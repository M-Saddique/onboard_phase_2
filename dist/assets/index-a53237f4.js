function P9(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(n,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();function Ob(t,e){const i=Object.create(null),n=t.split(",");for(let r=0;r<n.length;r++)i[n[r]]=!0;return e?r=>!!i[r.toLowerCase()]:r=>!!i[r]}const A9="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",M9=Ob(A9);function ir(t){if(dn(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],r=$s(n)?R9(n):ir(n);if(r)for(const a in r)e[a]=r[a]}return e}else{if($s(t))return t;if(fs(t))return t}}const O9=/;(?![^(]*\))/g,L9=/:([^]+)/,D9=/\/\*.*?\*\//gs;function R9(t){const e={};return t.replace(D9,"").split(O9).forEach(i=>{if(i){const n=i.split(L9);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Zs(t){let e="";if($s(t))e=t;else if(dn(t))for(let i=0;i<t.length;i++){const n=Zs(t[i]);n&&(e+=n+" ")}else if(fs(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function yL(t){if(!t)return null;let{class:e,style:i}=t;return e&&!$s(e)&&(t.class=Zs(e)),i&&(t.style=ir(i)),t}const B9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F9=Ob(B9);function bL(t){return!!t||t===""}function $9(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=kf(t[n],e[n]);return i}function kf(t,e){if(t===e)return!0;let i=dA(t),n=dA(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=$v(t),n=$v(e),i||n)return t===e;if(i=dn(t),n=dn(e),i||n)return i&&n?$9(t,e):!1;if(i=fs(t),n=fs(e),i||n){if(!i||!n)return!1;const r=Object.keys(t).length,a=Object.keys(e).length;if(r!==a)return!1;for(const c in t){const s=t.hasOwnProperty(c),p=e.hasOwnProperty(c);if(s&&!p||!s&&p||!kf(t[c],e[c]))return!1}}return String(t)===String(e)}function Lb(t,e){return t.findIndex(i=>kf(i,e))}const Zt=t=>$s(t)?t:t==null?"":dn(t)||fs(t)&&(t.toString===wL||!Vn(t.toString))?JSON.stringify(t,xL,2):String(t),xL=(t,e)=>e&&e.__v_isRef?xL(t,e.value):Jm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,r])=>(i[`${n} =>`]=r,i),{})}:qp(e)?{[`Set(${e.size})`]:[...e.values()]}:fs(e)&&!dn(e)&&!TL(e)?String(e):e,ss={},Qm=[],ed=()=>{},N9=()=>!1,z9=/^on[^a-z]/,hy=t=>z9.test(t),zS=t=>t.startsWith("onUpdate:"),uo=Object.assign,VS=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},V9=Object.prototype.hasOwnProperty,Ir=(t,e)=>V9.call(t,e),dn=Array.isArray,Jm=t=>Rg(t)==="[object Map]",qp=t=>Rg(t)==="[object Set]",dA=t=>Rg(t)==="[object Date]",U9=t=>Rg(t)==="[object RegExp]",Vn=t=>typeof t=="function",$s=t=>typeof t=="string",$v=t=>typeof t=="symbol",fs=t=>t!==null&&typeof t=="object",US=t=>fs(t)&&Vn(t.then)&&Vn(t.catch),wL=Object.prototype.toString,Rg=t=>wL.call(t),j9=t=>Rg(t).slice(8,-1),TL=t=>Rg(t)==="[object Object]",jS=t=>$s(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,bv=Ob(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Db=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},H9=/-(\w)/g,ll=Db(t=>t.replace(H9,(e,i)=>i?i.toUpperCase():"")),G9=/\B([A-Z])/g,Sc=Db(t=>t.replace(G9,"-$1").toLowerCase()),Zd=Db(t=>t.charAt(0).toUpperCase()+t.slice(1)),xv=Db(t=>t?`on${Zd(t)}`:""),dg=(t,e)=>!Object.is(t,e),eg=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},O1=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},L1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},D1=t=>{const e=$s(t)?Number(t):NaN;return isNaN(e)?t:e};let hA;const W9=()=>hA||(hA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Gu;class HS{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Gu,!e&&Gu&&(this.index=(Gu.scopes||(Gu.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=Gu;try{return Gu=this,e()}finally{Gu=i}}}on(){Gu=this}off(){Gu=this.parent}stop(e){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function fy(t){return new HS(t)}function SL(t,e=Gu){e&&e.active&&e.effects.push(t)}function CL(){return Gu}function bu(t){Gu&&Gu.cleanups.push(t)}const GS=t=>{const e=new Set(t);return e.w=0,e.n=0,e},kL=t=>(t.w&Ef)>0,EL=t=>(t.n&Ef)>0,q9=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Ef},Z9=t=>{const{deps:e}=t;if(e.length){let i=0;for(let n=0;n<e.length;n++){const r=e[n];kL(r)&&!EL(r)?r.delete(t):e[i++]=r,r.w&=~Ef,r.n&=~Ef}e.length=i}},R1=new WeakMap;let uv=0,Ef=1;const s2=30;let Kc;const Mp=Symbol(""),o2=Symbol("");class py{constructor(e,i=null,n){this.fn=e,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,SL(this,n)}run(){if(!this.active)return this.fn();let e=Kc,i=wf;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Kc,Kc=this,wf=!0,Ef=1<<++uv,uv<=s2?q9(this):fA(this),this.fn()}finally{uv<=s2&&Z9(this),Ef=1<<--uv,Kc=this.parent,wf=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Kc===this?this.deferStop=!0:this.active&&(fA(this),this.onStop&&this.onStop(),this.active=!1)}}function fA(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}function Y9(t,e){t.effect&&(t=t.effect.fn);const i=new py(t);e&&(uo(i,e),e.scope&&SL(i,e.scope)),(!e||!e.lazy)&&i.run();const n=i.run.bind(i);return n.effect=i,n}function X9(t){t.effect.stop()}let wf=!0;const IL=[];function Bg(){IL.push(wf),wf=!1}function Fg(){const t=IL.pop();wf=t===void 0?!0:t}function xu(t,e,i){if(wf&&Kc){let n=R1.get(t);n||R1.set(t,n=new Map);let r=n.get(i);r||n.set(i,r=GS()),PL(r)}}function PL(t,e){let i=!1;uv<=s2?EL(t)||(t.n|=Ef,i=!kL(t)):i=!t.has(Kc),i&&(t.add(Kc),Kc.deps.push(t))}function kh(t,e,i,n,r,a){const c=R1.get(t);if(!c)return;let s=[];if(e==="clear")s=[...c.values()];else if(i==="length"&&dn(t)){const p=Number(n);c.forEach((_,b)=>{(b==="length"||b>=p)&&s.push(_)})}else switch(i!==void 0&&s.push(c.get(i)),e){case"add":dn(t)?jS(i)&&s.push(c.get("length")):(s.push(c.get(Mp)),Jm(t)&&s.push(c.get(o2)));break;case"delete":dn(t)||(s.push(c.get(Mp)),Jm(t)&&s.push(c.get(o2)));break;case"set":Jm(t)&&s.push(c.get(Mp));break}if(s.length===1)s[0]&&a2(s[0]);else{const p=[];for(const _ of s)_&&p.push(..._);a2(GS(p))}}function a2(t,e){const i=dn(t)?t:[...t];for(const n of i)n.computed&&pA(n);for(const n of i)n.computed||pA(n)}function pA(t,e){(t!==Kc||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function K9(t,e){var i;return(i=R1.get(t))===null||i===void 0?void 0:i.get(e)}const Q9=Ob("__proto__,__v_isRef,__isVue"),AL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter($v)),J9=Rb(),eV=Rb(!1,!0),tV=Rb(!0),iV=Rb(!0,!0),mA=nV();function nV(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...i){const n=Wn(this);for(let a=0,c=this.length;a<c;a++)xu(n,"get",a+"");const r=n[e](...i);return r===-1||r===!1?n[e](...i.map(Wn)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...i){Bg();const n=Wn(this)[e].apply(this,i);return Fg(),n}}),t}function rV(t){const e=Wn(this);return xu(e,"has",t),e.hasOwnProperty(t)}function Rb(t=!1,e=!1){return function(n,r,a){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&a===(t?e?FL:BL:e?RL:DL).get(n))return n;const c=dn(n);if(!t){if(c&&Ir(mA,r))return Reflect.get(mA,r,a);if(r==="hasOwnProperty")return rV}const s=Reflect.get(n,r,a);return($v(r)?AL.has(r):Q9(r))||(t||xu(n,"get",r),e)?s:Bs(s)?c&&jS(r)?s:s.value:fs(s)?t?Zp(s):Bo(s):s}}const sV=ML(),oV=ML(!0);function ML(t=!1){return function(i,n,r,a){let c=i[n];if(Np(c)&&Bs(c)&&!Bs(r))return!1;if(!t&&(!Nv(r)&&!Np(r)&&(c=Wn(c),r=Wn(r)),!dn(i)&&Bs(c)&&!Bs(r)))return c.value=r,!0;const s=dn(i)&&jS(n)?Number(n)<i.length:Ir(i,n),p=Reflect.set(i,n,r,a);return i===Wn(a)&&(s?dg(r,c)&&kh(i,"set",n,r):kh(i,"add",n,r)),p}}function aV(t,e){const i=Ir(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&kh(t,"delete",e,void 0),n}function lV(t,e){const i=Reflect.has(t,e);return(!$v(e)||!AL.has(e))&&xu(t,"has",e),i}function uV(t){return xu(t,"iterate",dn(t)?"length":Mp),Reflect.ownKeys(t)}const OL={get:J9,set:sV,deleteProperty:aV,has:lV,ownKeys:uV},LL={get:tV,set(t,e){return!0},deleteProperty(t,e){return!0}},cV=uo({},OL,{get:eV,set:oV}),dV=uo({},LL,{get:iV}),WS=t=>t,Bb=t=>Reflect.getPrototypeOf(t);function z0(t,e,i=!1,n=!1){t=t.__v_raw;const r=Wn(t),a=Wn(e);i||(e!==a&&xu(r,"get",e),xu(r,"get",a));const{has:c}=Bb(r),s=n?WS:i?ZS:zv;if(c.call(r,e))return s(t.get(e));if(c.call(r,a))return s(t.get(a));t!==r&&t.get(e)}function V0(t,e=!1){const i=this.__v_raw,n=Wn(i),r=Wn(t);return e||(t!==r&&xu(n,"has",t),xu(n,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)}function U0(t,e=!1){return t=t.__v_raw,!e&&xu(Wn(t),"iterate",Mp),Reflect.get(t,"size",t)}function gA(t){t=Wn(t);const e=Wn(this);return Bb(e).has.call(e,t)||(e.add(t),kh(e,"add",t,t)),this}function _A(t,e){e=Wn(e);const i=Wn(this),{has:n,get:r}=Bb(i);let a=n.call(i,t);a||(t=Wn(t),a=n.call(i,t));const c=r.call(i,t);return i.set(t,e),a?dg(e,c)&&kh(i,"set",t,e):kh(i,"add",t,e),this}function vA(t){const e=Wn(this),{has:i,get:n}=Bb(e);let r=i.call(e,t);r||(t=Wn(t),r=i.call(e,t)),n&&n.call(e,t);const a=e.delete(t);return r&&kh(e,"delete",t,void 0),a}function yA(){const t=Wn(this),e=t.size!==0,i=t.clear();return e&&kh(t,"clear",void 0,void 0),i}function j0(t,e){return function(n,r){const a=this,c=a.__v_raw,s=Wn(c),p=e?WS:t?ZS:zv;return!t&&xu(s,"iterate",Mp),c.forEach((_,b)=>n.call(r,p(_),p(b),a))}}function H0(t,e,i){return function(...n){const r=this.__v_raw,a=Wn(r),c=Jm(a),s=t==="entries"||t===Symbol.iterator&&c,p=t==="keys"&&c,_=r[t](...n),b=i?WS:e?ZS:zv;return!e&&xu(a,"iterate",p?o2:Mp),{next(){const{value:S,done:E}=_.next();return E?{value:S,done:E}:{value:s?[b(S[0]),b(S[1])]:b(S),done:E}},[Symbol.iterator](){return this}}}}function cf(t){return function(...e){return t==="delete"?!1:this}}function hV(){const t={get(a){return z0(this,a)},get size(){return U0(this)},has:V0,add:gA,set:_A,delete:vA,clear:yA,forEach:j0(!1,!1)},e={get(a){return z0(this,a,!1,!0)},get size(){return U0(this)},has:V0,add:gA,set:_A,delete:vA,clear:yA,forEach:j0(!1,!0)},i={get(a){return z0(this,a,!0)},get size(){return U0(this,!0)},has(a){return V0.call(this,a,!0)},add:cf("add"),set:cf("set"),delete:cf("delete"),clear:cf("clear"),forEach:j0(!0,!1)},n={get(a){return z0(this,a,!0,!0)},get size(){return U0(this,!0)},has(a){return V0.call(this,a,!0)},add:cf("add"),set:cf("set"),delete:cf("delete"),clear:cf("clear"),forEach:j0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=H0(a,!1,!1),i[a]=H0(a,!0,!1),e[a]=H0(a,!1,!0),n[a]=H0(a,!0,!0)}),[t,i,e,n]}const[fV,pV,mV,gV]=hV();function Fb(t,e){const i=e?t?gV:mV:t?pV:fV;return(n,r,a)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(Ir(i,r)&&r in n?i:n,r,a)}const _V={get:Fb(!1,!1)},vV={get:Fb(!1,!0)},yV={get:Fb(!0,!1)},bV={get:Fb(!0,!0)},DL=new WeakMap,RL=new WeakMap,BL=new WeakMap,FL=new WeakMap;function xV(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wV(t){return t.__v_skip||!Object.isExtensible(t)?0:xV(j9(t))}function Bo(t){return Np(t)?t:$b(t,!1,OL,_V,DL)}function $L(t){return $b(t,!1,cV,vV,RL)}function Zp(t){return $b(t,!0,LL,yV,BL)}function TV(t){return $b(t,!0,dV,bV,FL)}function $b(t,e,i,n,r){if(!fs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=r.get(t);if(a)return a;const c=wV(t);if(c===0)return t;const s=new Proxy(t,c===2?n:i);return r.set(t,s),s}function Op(t){return Np(t)?Op(t.__v_raw):!!(t&&t.__v_isReactive)}function Np(t){return!!(t&&t.__v_isReadonly)}function Nv(t){return!!(t&&t.__v_isShallow)}function qS(t){return Op(t)||Np(t)}function Wn(t){const e=t&&t.__v_raw;return e?Wn(e):t}function Ar(t){return O1(t,"__v_skip",!0),t}const zv=t=>fs(t)?Bo(t):t,ZS=t=>fs(t)?Zp(t):t;function YS(t){wf&&Kc&&(t=Wn(t),PL(t.dep||(t.dep=GS())))}function Nb(t,e){t=Wn(t);const i=t.dep;i&&a2(i)}function Bs(t){return!!(t&&t.__v_isRef===!0)}function lt(t){return NL(t,!1)}function Tf(t){return NL(t,!0)}function NL(t,e){return Bs(t)?t:new SV(t,e)}class SV{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:Wn(e),this._value=i?e:zv(e)}get value(){return YS(this),this._value}set value(e){const i=this.__v_isShallow||Nv(e)||Np(e);e=i?e:Wn(e),dg(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:zv(e),Nb(this))}}function CV(t){Nb(t)}function Da(t){return Bs(t)?t.value:t}const kV={get:(t,e,i)=>Da(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const r=t[e];return Bs(r)&&!Bs(i)?(r.value=i,!0):Reflect.set(t,e,i,n)}};function XS(t){return Op(t)?t:new Proxy(t,kV)}class EV{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:n}=e(()=>YS(this),()=>Nb(this));this._get=i,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function IV(t){return new EV(t)}function zb(t){const e=dn(t)?new Array(t.length):{};for(const i in t)e[i]=li(t,i);return e}class PV{constructor(e,i,n){this._object=e,this._key=i,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return K9(Wn(this._object),this._key)}}function li(t,e,i){const n=t[e];return Bs(n)?n:new PV(t,e,i)}var zL;class AV{constructor(e,i,n,r){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[zL]=!1,this._dirty=!0,this.effect=new py(e,()=>{this._dirty||(this._dirty=!0,Nb(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=Wn(this);return YS(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}zL="__v_isReadonly";function MV(t,e,i=!1){let n,r;const a=Vn(t);return a?(n=t,r=ed):(n=t.get,r=t.set),new AV(n,r,a||!r,i)}function OV(t,...e){}function LV(t,e){}function bh(t,e,i,n){let r;try{r=n?t(...n):t()}catch(a){Yp(a,e,i)}return r}function Xu(t,e,i,n){if(Vn(t)){const a=bh(t,e,i,n);return a&&US(a)&&a.catch(c=>{Yp(c,e,i)}),a}const r=[];for(let a=0;a<t.length;a++)r.push(Xu(t[a],e,i,n));return r}function Yp(t,e,i,n=!0){const r=e?e.vnode:null;if(e){let a=e.parent;const c=e.proxy,s=i;for(;a;){const _=a.ec;if(_){for(let b=0;b<_.length;b++)if(_[b](t,c,s)===!1)return}a=a.parent}const p=e.appContext.config.errorHandler;if(p){bh(p,null,10,[t,c,s]);return}}DV(t,i,r,n)}function DV(t,e,i,n=!0){console.error(t)}let Vv=!1,l2=!1;const sl=[];let Ld=0;const tg=[];let mh=null,bp=0;const VL=Promise.resolve();let KS=null;function Cn(t){const e=KS||VL;return t?e.then(this?t.bind(this):t):e}function RV(t){let e=Ld+1,i=sl.length;for(;e<i;){const n=e+i>>>1;Uv(sl[n])<t?e=n+1:i=n}return e}function Vb(t){(!sl.length||!sl.includes(t,Vv&&t.allowRecurse?Ld+1:Ld))&&(t.id==null?sl.push(t):sl.splice(RV(t.id),0,t),UL())}function UL(){!Vv&&!l2&&(l2=!0,KS=VL.then(jL))}function BV(t){const e=sl.indexOf(t);e>Ld&&sl.splice(e,1)}function QS(t){dn(t)?tg.push(...t):(!mh||!mh.includes(t,t.allowRecurse?bp+1:bp))&&tg.push(t),UL()}function bA(t,e=Vv?Ld+1:0){for(;e<sl.length;e++){const i=sl[e];i&&i.pre&&(sl.splice(e,1),e--,i())}}function B1(t){if(tg.length){const e=[...new Set(tg)];if(tg.length=0,mh){mh.push(...e);return}for(mh=e,mh.sort((i,n)=>Uv(i)-Uv(n)),bp=0;bp<mh.length;bp++)mh[bp]();mh=null,bp=0}}const Uv=t=>t.id==null?1/0:t.id,FV=(t,e)=>{const i=Uv(t)-Uv(e);if(i===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function jL(t){l2=!1,Vv=!0,sl.sort(FV);const e=ed;try{for(Ld=0;Ld<sl.length;Ld++){const i=sl[Ld];i&&i.active!==!1&&bh(i,null,14)}}finally{Ld=0,sl.length=0,B1(),Vv=!1,KS=null,(sl.length||tg.length)&&jL()}}let Um,G0=[];function HL(t,e){var i,n;Um=t,Um?(Um.enabled=!0,G0.forEach(({event:r,args:a})=>Um.emit(r,...a)),G0=[]):typeof window<"u"&&window.HTMLElement&&!(!((n=(i=window.navigator)===null||i===void 0?void 0:i.userAgent)===null||n===void 0)&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(a=>{HL(a,e)}),setTimeout(()=>{Um||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,G0=[])},3e3)):G0=[]}function $V(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||ss;let r=i;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in n){const b=`${c==="modelValue"?"model":c}Modifiers`,{number:S,trim:E}=n[b]||ss;E&&(r=i.map(I=>$s(I)?I.trim():I)),S&&(r=i.map(L1))}let s,p=n[s=xv(e)]||n[s=xv(ll(e))];!p&&a&&(p=n[s=xv(Sc(e))]),p&&Xu(p,t,6,r);const _=n[s+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Xu(_,t,6,r)}}function GL(t,e,i=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const a=t.emits;let c={},s=!1;if(!Vn(t)){const p=_=>{const b=GL(_,e,!0);b&&(s=!0,uo(c,b))};!i&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}return!a&&!s?(fs(t)&&n.set(t,null),null):(dn(a)?a.forEach(p=>c[p]=null):uo(c,a),fs(t)&&n.set(t,c),c)}function Ub(t,e){return!t||!hy(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ir(t,e[0].toLowerCase()+e.slice(1))||Ir(t,Sc(e))||Ir(t,e))}let Ra=null,jb=null;function jv(t){const e=Ra;return Ra=t,jb=t&&t.type.__scopeId||null,e}function Yd(t){jb=t}function Xd(){jb=null}const Hb=t=>D;function D(t,e=Ra,i){if(!e||t._n)return t;const n=(...r)=>{n._d&&m2(-1);const a=jv(e);let c;try{c=t(...r)}finally{jv(a),n._d&&m2(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function p1(t){const{type:e,vnode:i,proxy:n,withProxy:r,props:a,propsOptions:[c],slots:s,attrs:p,emit:_,render:b,renderCache:S,data:E,setupState:I,ctx:R,inheritAttrs:V}=t;let q,U;const H=jv(t);try{if(i.shapeFlag&4){const ne=r||n;q=Wu(b.call(ne,ne,S,a,I,E,R)),U=p}else{const ne=e;q=Wu(ne.length>1?ne(a,{attrs:p,slots:s,emit:_}):ne(a,null)),U=e.props?p:zV(p)}}catch(ne){Sv.length=0,Yp(ne,t,1),q=w(ga)}let Z=q;if(U&&V!==!1){const ne=Object.keys(U),{shapeFlag:ie}=Z;ne.length&&ie&7&&(c&&ne.some(zS)&&(U=VV(U,c)),Z=nd(Z,U))}return i.dirs&&(Z=nd(Z),Z.dirs=Z.dirs?Z.dirs.concat(i.dirs):i.dirs),i.transition&&(Z.transition=i.transition),q=Z,jv(H),q}function NV(t){let e;for(let i=0;i<t.length;i++){const n=t[i];if(Eh(n)){if(n.type!==ga||n.children==="v-if"){if(e)return;e=n}}else return}return e}const zV=t=>{let e;for(const i in t)(i==="class"||i==="style"||hy(i))&&((e||(e={}))[i]=t[i]);return e},VV=(t,e)=>{const i={};for(const n in t)(!zS(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function UV(t,e,i){const{props:n,children:r,component:a}=t,{props:c,children:s,patchFlag:p}=e,_=a.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&p>=0){if(p&1024)return!0;if(p&16)return n?xA(n,c,_):!!c;if(p&8){const b=e.dynamicProps;for(let S=0;S<b.length;S++){const E=b[S];if(c[E]!==n[E]&&!Ub(_,E))return!0}}}else return(r||s)&&(!s||!s.$stable)?!0:n===c?!1:n?c?xA(n,c,_):!0:!!c;return!1}function xA(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const a=n[r];if(e[a]!==t[a]&&!Ub(i,a))return!0}return!1}function JS({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}const WL=t=>t.__isSuspense,jV={name:"Suspense",__isSuspense:!0,process(t,e,i,n,r,a,c,s,p,_){t==null?GV(e,i,n,r,a,c,s,p,_):WV(t,e,i,n,r,c,s,p,_)},hydrate:qV,create:eC,normalize:ZV},HV=jV;function Hv(t,e){const i=t.props&&t.props[e];Vn(i)&&i()}function GV(t,e,i,n,r,a,c,s,p){const{p:_,o:{createElement:b}}=p,S=b("div"),E=t.suspense=eC(t,r,n,e,S,i,a,c,s,p);_(null,E.pendingBranch=t.ssContent,S,null,n,E,a,c),E.deps>0?(Hv(t,"onPending"),Hv(t,"onFallback"),_(null,t.ssFallback,e,i,n,null,a,c),ig(E,t.ssFallback)):E.resolve()}function WV(t,e,i,n,r,a,c,s,{p,um:_,o:{createElement:b}}){const S=e.suspense=t.suspense;S.vnode=e,e.el=t.el;const E=e.ssContent,I=e.ssFallback,{activeBranch:R,pendingBranch:V,isInFallback:q,isHydrating:U}=S;if(V)S.pendingBranch=E,Qc(E,V)?(p(V,E,S.hiddenContainer,null,r,S,a,c,s),S.deps<=0?S.resolve():q&&(p(R,I,i,n,r,null,a,c,s),ig(S,I))):(S.pendingId++,U?(S.isHydrating=!1,S.activeBranch=V):_(V,r,S),S.deps=0,S.effects.length=0,S.hiddenContainer=b("div"),q?(p(null,E,S.hiddenContainer,null,r,S,a,c,s),S.deps<=0?S.resolve():(p(R,I,i,n,r,null,a,c,s),ig(S,I))):R&&Qc(E,R)?(p(R,E,i,n,r,S,a,c,s),S.resolve(!0)):(p(null,E,S.hiddenContainer,null,r,S,a,c,s),S.deps<=0&&S.resolve()));else if(R&&Qc(E,R))p(R,E,i,n,r,S,a,c,s),ig(S,E);else if(Hv(e,"onPending"),S.pendingBranch=E,S.pendingId++,p(null,E,S.hiddenContainer,null,r,S,a,c,s),S.deps<=0)S.resolve();else{const{timeout:H,pendingId:Z}=S;H>0?setTimeout(()=>{S.pendingId===Z&&S.fallback(I)},H):H===0&&S.fallback(I)}}function eC(t,e,i,n,r,a,c,s,p,_,b=!1){const{p:S,m:E,um:I,n:R,o:{parentNode:V,remove:q}}=_,U=t.props?D1(t.props.timeout):void 0,H={vnode:t,parent:e,parentComponent:i,isSVG:c,container:n,hiddenContainer:r,anchor:a,deps:0,pendingId:0,timeout:typeof U=="number"?U:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:b,isUnmounted:!1,effects:[],resolve(Z=!1){const{vnode:ne,activeBranch:ie,pendingBranch:oe,pendingId:pe,effects:de,parentComponent:fe,container:ge}=H;if(H.isHydrating)H.isHydrating=!1;else if(!Z){const Oe=ie&&oe.transition&&oe.transition.mode==="out-in";Oe&&(ie.transition.afterLeave=()=>{pe===H.pendingId&&E(oe,ge,ke,0)});let{anchor:ke}=H;ie&&(ke=R(ie),I(ie,fe,H,!0)),Oe||E(oe,ge,ke,0)}ig(H,oe),H.pendingBranch=null,H.isInFallback=!1;let we=H.parent,Ie=!1;for(;we;){if(we.pendingBranch){we.effects.push(...de),Ie=!0;break}we=we.parent}Ie||QS(de),H.effects=[],Hv(ne,"onResolve")},fallback(Z){if(!H.pendingBranch)return;const{vnode:ne,activeBranch:ie,parentComponent:oe,container:pe,isSVG:de}=H;Hv(ne,"onFallback");const fe=R(ie),ge=()=>{H.isInFallback&&(S(null,Z,pe,fe,oe,null,de,s,p),ig(H,Z))},we=Z.transition&&Z.transition.mode==="out-in";we&&(ie.transition.afterLeave=ge),H.isInFallback=!0,I(ie,oe,null,!0),we||ge()},move(Z,ne,ie){H.activeBranch&&E(H.activeBranch,Z,ne,ie),H.container=Z},next(){return H.activeBranch&&R(H.activeBranch)},registerDep(Z,ne){const ie=!!H.pendingBranch;ie&&H.deps++;const oe=Z.vnode.el;Z.asyncDep.catch(pe=>{Yp(pe,Z,0)}).then(pe=>{if(Z.isUnmounted||H.isUnmounted||H.pendingId!==Z.suspenseId)return;Z.asyncResolved=!0;const{vnode:de}=Z;g2(Z,pe,!1),oe&&(de.el=oe);const fe=!oe&&Z.subTree.el;ne(Z,de,V(oe||Z.subTree.el),oe?null:R(Z.subTree),H,c,p),fe&&q(fe),JS(Z,de.el),ie&&--H.deps===0&&H.resolve()})},unmount(Z,ne){H.isUnmounted=!0,H.activeBranch&&I(H.activeBranch,i,Z,ne),H.pendingBranch&&I(H.pendingBranch,i,Z,ne)}};return H}function qV(t,e,i,n,r,a,c,s,p){const _=e.suspense=eC(e,n,i,t.parentNode,document.createElement("div"),null,r,a,c,s,!0),b=p(t,_.pendingBranch=e.ssContent,i,_,a,c);return _.deps===0&&_.resolve(),b}function ZV(t){const{shapeFlag:e,children:i}=t,n=e&32;t.ssContent=wA(n?i.default:i),t.ssFallback=n?wA(i.fallback):w(ga)}function wA(t){let e;if(Vn(t)){const i=Vp&&t._c;i&&(t._d=!1,be()),t=t(),i&&(t._d=!0,e=vu,gD())}return dn(t)&&(t=NV(t)),t=Wu(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(i=>i!==t)),t}function qL(t,e){e&&e.pendingBranch?dn(t)?e.effects.push(...t):e.effects.push(t):QS(t)}function ig(t,e){t.activeBranch=e;const{vnode:i,parentComponent:n}=t,r=i.el=e.el;n&&n.subTree===i&&(n.vnode.el=r,JS(n,r))}function Mn(t,e){if(ao){let i=ao.provides;const n=ao.parent&&ao.parent.provides;n===i&&(i=ao.provides=Object.create(n)),i[t]=e}}function qi(t,e,i=!1){const n=ao||Ra;if(n){const r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&Vn(e)?e.call(n.proxy):e}}function Xs(t,e){return my(t,null,e)}function ZL(t,e){return my(t,null,{flush:"post"})}function YV(t,e){return my(t,null,{flush:"sync"})}const W0={};function Fi(t,e,i){return my(t,e,i)}function my(t,e,{immediate:i,deep:n,flush:r,onTrack:a,onTrigger:c}=ss){const s=CL()===(ao==null?void 0:ao.scope)?ao:null;let p,_=!1,b=!1;if(Bs(t)?(p=()=>t.value,_=Nv(t)):Op(t)?(p=()=>t,n=!0):dn(t)?(b=!0,_=t.some(Z=>Op(Z)||Nv(Z)),p=()=>t.map(Z=>{if(Bs(Z))return Z.value;if(Op(Z))return Tp(Z);if(Vn(Z))return bh(Z,s,2)})):Vn(t)?e?p=()=>bh(t,s,2):p=()=>{if(!(s&&s.isUnmounted))return S&&S(),Xu(t,s,3,[E])}:p=ed,e&&n){const Z=p;p=()=>Tp(Z())}let S,E=Z=>{S=U.onStop=()=>{bh(Z,s,4)}},I;if(fg)if(E=ed,e?i&&Xu(e,s,3,[p(),b?[]:void 0,E]):p(),r==="sync"){const Z=kD();I=Z.__watcherHandles||(Z.__watcherHandles=[])}else return ed;let R=b?new Array(t.length).fill(W0):W0;const V=()=>{if(U.active)if(e){const Z=U.run();(n||_||(b?Z.some((ne,ie)=>dg(ne,R[ie])):dg(Z,R)))&&(S&&S(),Xu(e,s,3,[Z,R===W0?void 0:b&&R[0]===W0?[]:R,E]),R=Z)}else U.run()};V.allowRecurse=!!e;let q;r==="sync"?q=V:r==="post"?q=()=>Oa(V,s&&s.suspense):(V.pre=!0,s&&(V.id=s.uid),q=()=>Vb(V));const U=new py(p,q);e?i?V():R=U.run():r==="post"?Oa(U.run.bind(U),s&&s.suspense):U.run();const H=()=>{U.stop(),s&&s.scope&&VS(s.scope.effects,U)};return I&&I.push(H),H}function XV(t,e,i){const n=this.proxy,r=$s(t)?t.includes(".")?YL(n,t):()=>n[t]:t.bind(n,n);let a;Vn(e)?a=e:(a=e.handler,i=e);const c=ao;Pf(this);const s=my(r,a.bind(n),i);return c?Pf(c):Sf(),s}function YL(t,e){const i=e.split(".");return()=>{let n=t;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}function Tp(t,e){if(!fs(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Bs(t))Tp(t.value,e);else if(dn(t))for(let i=0;i<t.length;i++)Tp(t[i],e);else if(qp(t)||Jm(t))t.forEach(i=>{Tp(i,e)});else if(TL(t))for(const i in t)Tp(t[i],e);return t}function tC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fn(()=>{t.isMounted=!0}),as(()=>{t.isUnmounting=!0}),t}const wc=[Function,Array],KV={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wc,onEnter:wc,onAfterEnter:wc,onEnterCancelled:wc,onBeforeLeave:wc,onLeave:wc,onAfterLeave:wc,onLeaveCancelled:wc,onBeforeAppear:wc,onAppear:wc,onAfterAppear:wc,onAppearCancelled:wc},setup(t,{slots:e}){const i=Kd(),n=tC();let r;return()=>{const a=e.default&&Gb(e.default(),!0);if(!a||!a.length)return;let c=a[0];if(a.length>1){for(const V of a)if(V.type!==ga){c=V;break}}const s=Wn(t),{mode:p}=s;if(n.isLeaving)return sT(c);const _=TA(c);if(!_)return sT(c);const b=hg(_,s,n,i);zp(_,b);const S=i.subTree,E=S&&TA(S);let I=!1;const{getTransitionKey:R}=_.type;if(R){const V=R();r===void 0?r=V:V!==r&&(r=V,I=!0)}if(E&&E.type!==ga&&(!Qc(_,E)||I)){const V=hg(E,s,n,i);if(zp(E,V),p==="out-in")return n.isLeaving=!0,V.afterLeave=()=>{n.isLeaving=!1,i.update.active!==!1&&i.update()},sT(c);p==="in-out"&&_.type!==ga&&(V.delayLeave=(q,U,H)=>{const Z=XL(n,E);Z[String(E.key)]=E,q._leaveCb=()=>{U(),q._leaveCb=void 0,delete b.delayedLeave},b.delayedLeave=H})}return c}}},iC=KV;function XL(t,e){const{leavingVNodes:i}=t;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function hg(t,e,i,n){const{appear:r,mode:a,persisted:c=!1,onBeforeEnter:s,onEnter:p,onAfterEnter:_,onEnterCancelled:b,onBeforeLeave:S,onLeave:E,onAfterLeave:I,onLeaveCancelled:R,onBeforeAppear:V,onAppear:q,onAfterAppear:U,onAppearCancelled:H}=e,Z=String(t.key),ne=XL(i,t),ie=(de,fe)=>{de&&Xu(de,n,9,fe)},oe=(de,fe)=>{const ge=fe[1];ie(de,fe),dn(de)?de.every(we=>we.length<=1)&&ge():de.length<=1&&ge()},pe={mode:a,persisted:c,beforeEnter(de){let fe=s;if(!i.isMounted)if(r)fe=V||s;else return;de._leaveCb&&de._leaveCb(!0);const ge=ne[Z];ge&&Qc(t,ge)&&ge.el._leaveCb&&ge.el._leaveCb(),ie(fe,[de])},enter(de){let fe=p,ge=_,we=b;if(!i.isMounted)if(r)fe=q||p,ge=U||_,we=H||b;else return;let Ie=!1;const Oe=de._enterCb=ke=>{Ie||(Ie=!0,ke?ie(we,[de]):ie(ge,[de]),pe.delayedLeave&&pe.delayedLeave(),de._enterCb=void 0)};fe?oe(fe,[de,Oe]):Oe()},leave(de,fe){const ge=String(t.key);if(de._enterCb&&de._enterCb(!0),i.isUnmounting)return fe();ie(S,[de]);let we=!1;const Ie=de._leaveCb=Oe=>{we||(we=!0,fe(),Oe?ie(R,[de]):ie(I,[de]),de._leaveCb=void 0,ne[ge]===t&&delete ne[ge])};ne[ge]=t,E?oe(E,[de,Ie]):Ie()},clone(de){return hg(de,e,i,n)}};return pe}function sT(t){if(gy(t))return t=nd(t),t.children=null,t}function TA(t){return gy(t)?t.children?t.children[0]:void 0:t}function zp(t,e){t.shapeFlag&6&&t.component?zp(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gb(t,e=!1,i){let n=[],r=0;for(let a=0;a<t.length;a++){let c=t[a];const s=i==null?c.key:String(i)+String(c.key!=null?c.key:a);c.type===Oi?(c.patchFlag&128&&r++,n=n.concat(Gb(c.children,e,s))):(e||c.type!==ga)&&n.push(s!=null?nd(c,{key:s}):c)}if(r>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function qn(t){return Vn(t)?{setup:t,name:t.name}:t}const Lp=t=>!!t.type.__asyncLoader;function QV(t){Vn(t)&&(t={loader:t});const{loader:e,loadingComponent:i,errorComponent:n,delay:r=200,timeout:a,suspensible:c=!0,onError:s}=t;let p=null,_,b=0;const S=()=>(b++,p=null,E()),E=()=>{let I;return p||(I=p=e().catch(R=>{if(R=R instanceof Error?R:new Error(String(R)),s)return new Promise((V,q)=>{s(R,()=>V(S()),()=>q(R),b+1)});throw R}).then(R=>I!==p&&p?p:(R&&(R.__esModule||R[Symbol.toStringTag]==="Module")&&(R=R.default),_=R,R)))};return qn({name:"AsyncComponentWrapper",__asyncLoader:E,get __asyncResolved(){return _},setup(){const I=ao;if(_)return()=>oT(_,I);const R=H=>{p=null,Yp(H,I,13,!n)};if(c&&I.suspense||fg)return E().then(H=>()=>oT(H,I)).catch(H=>(R(H),()=>n?w(n,{error:H}):null));const V=lt(!1),q=lt(),U=lt(!!r);return r&&setTimeout(()=>{U.value=!1},r),a!=null&&setTimeout(()=>{if(!V.value&&!q.value){const H=new Error(`Async component timed out after ${a}ms.`);R(H),q.value=H}},a),E().then(()=>{V.value=!0,I.parent&&gy(I.parent.vnode)&&Vb(I.parent.update)}).catch(H=>{R(H),q.value=H}),()=>{if(V.value&&_)return oT(_,I);if(q.value&&n)return w(n,{error:q.value});if(i&&!U.value)return w(i)}}})}function oT(t,e){const{ref:i,props:n,children:r,ce:a}=e.vnode,c=w(t,n,r);return c.ref=i,c.ce=a,delete e.vnode.ce,c}const gy=t=>t.type.__isKeepAlive,JV={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const i=Kd(),n=i.ctx;if(!n.renderer)return()=>{const H=e.default&&e.default();return H&&H.length===1?H[0]:H};const r=new Map,a=new Set;let c=null;const s=i.suspense,{renderer:{p,m:_,um:b,o:{createElement:S}}}=n,E=S("div");n.activate=(H,Z,ne,ie,oe)=>{const pe=H.component;_(H,Z,ne,0,s),p(pe.vnode,H,Z,ne,pe,s,ie,H.slotScopeIds,oe),Oa(()=>{pe.isDeactivated=!1,pe.a&&eg(pe.a);const de=H.props&&H.props.onVnodeMounted;de&&pu(de,pe.parent,H)},s)},n.deactivate=H=>{const Z=H.component;_(H,E,null,1,s),Oa(()=>{Z.da&&eg(Z.da);const ne=H.props&&H.props.onVnodeUnmounted;ne&&pu(ne,Z.parent,H),Z.isDeactivated=!0},s)};function I(H){aT(H),b(H,i,s,!0)}function R(H){r.forEach((Z,ne)=>{const ie=v2(Z.type);ie&&(!H||!H(ie))&&V(ne)})}function V(H){const Z=r.get(H);!c||!Qc(Z,c)?I(Z):c&&aT(c),r.delete(H),a.delete(H)}Fi(()=>[t.include,t.exclude],([H,Z])=>{H&&R(ne=>cv(H,ne)),Z&&R(ne=>!cv(Z,ne))},{flush:"post",deep:!0});let q=null;const U=()=>{q!=null&&r.set(q,lT(i.subTree))};return Fn(U),qb(U),as(()=>{r.forEach(H=>{const{subTree:Z,suspense:ne}=i,ie=lT(Z);if(H.type===ie.type&&H.key===ie.key){aT(ie);const oe=ie.component.da;oe&&Oa(oe,ne);return}I(H)})}),()=>{if(q=null,!e.default)return null;const H=e.default(),Z=H[0];if(H.length>1)return c=null,H;if(!Eh(Z)||!(Z.shapeFlag&4)&&!(Z.shapeFlag&128))return c=null,Z;let ne=lT(Z);const ie=ne.type,oe=v2(Lp(ne)?ne.type.__asyncResolved||{}:ie),{include:pe,exclude:de,max:fe}=t;if(pe&&(!oe||!cv(pe,oe))||de&&oe&&cv(de,oe))return c=ne,Z;const ge=ne.key==null?ie:ne.key,we=r.get(ge);return ne.el&&(ne=nd(ne),Z.shapeFlag&128&&(Z.ssContent=ne)),q=ge,we?(ne.el=we.el,ne.component=we.component,ne.transition&&zp(ne,ne.transition),ne.shapeFlag|=512,a.delete(ge),a.add(ge)):(a.add(ge),fe&&a.size>parseInt(fe,10)&&V(a.values().next().value)),ne.shapeFlag|=256,c=ne,WL(Z.type)?Z:ne}}},e7=JV;function cv(t,e){return dn(t)?t.some(i=>cv(i,e)):$s(t)?t.split(",").includes(e):U9(t)?t.test(e):!1}function nC(t,e){KL(t,"a",e)}function rC(t,e){KL(t,"da",e)}function KL(t,e,i=ao){const n=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Wb(e,n,i),i){let r=i.parent;for(;r&&r.parent;)gy(r.parent.vnode)&&t7(n,e,i,r),r=r.parent}}function t7(t,e,i,n){const r=Wb(e,t,n,!0);Nf(()=>{VS(n[e],r)},i)}function aT(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function lT(t){return t.shapeFlag&128?t.ssContent:t}function Wb(t,e,i=ao,n=!1){if(i){const r=i[t]||(i[t]=[]),a=e.__weh||(e.__weh=(...c)=>{if(i.isUnmounted)return;Bg(),Pf(i);const s=Xu(e,i,t,c);return Sf(),Fg(),s});return n?r.unshift(a):r.push(a),a}}const $h=t=>(e,i=ao)=>(!fg||t==="sp")&&Wb(t,(...n)=>e(...n),i),_y=$h("bm"),Fn=$h("m"),sC=$h("bu"),qb=$h("u"),as=$h("bum"),Nf=$h("um"),QL=$h("sp"),JL=$h("rtg"),eD=$h("rtc");function tD(t,e=ao){Wb("ec",t,e)}function Br(t,e){const i=Ra;if(i===null)return t;const n=Yb(i)||i.proxy,r=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[c,s,p,_=ss]=e[a];c&&(Vn(c)&&(c={mounted:c,updated:c}),c.deep&&Tp(s),r.push({dir:c,instance:n,value:s,oldValue:void 0,arg:p,modifiers:_}))}return t}function Ad(t,e,i,n){const r=t.dirs,a=e&&e.dirs;for(let c=0;c<r.length;c++){const s=r[c];a&&(s.oldValue=a[c].value);let p=s.dir[n];p&&(Bg(),Xu(p,i,8,[t.el,s,t,e]),Fg())}}const oC="components",i7="directives";function ue(t,e){return aC(oC,t,!0,e)||t}const iD=Symbol();function nD(t){return $s(t)?aC(oC,t,!1)||t:t||iD}function Ba(t){return aC(i7,t)}function aC(t,e,i=!0,n=!1){const r=Ra||ao;if(r){const a=r.type;if(t===oC){const s=v2(a,!1);if(s&&(s===e||s===ll(e)||s===Zd(ll(e))))return a}const c=SA(r[t]||a[t],e)||SA(r.appContext[t],e);return!c&&n?a:c}}function SA(t,e){return t&&(t[e]||t[ll(e)]||t[Zd(ll(e))])}function Zr(t,e,i,n){let r;const a=i&&i[n];if(dn(t)||$s(t)){r=new Array(t.length);for(let c=0,s=t.length;c<s;c++)r[c]=e(t[c],c,void 0,a&&a[c])}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,a&&a[c])}else if(fs(t))if(t[Symbol.iterator])r=Array.from(t,(c,s)=>e(c,s,void 0,a&&a[s]));else{const c=Object.keys(t);r=new Array(c.length);for(let s=0,p=c.length;s<p;s++){const _=c[s];r[s]=e(t[_],_,s,a&&a[s])}}else r=[];return i&&(i[n]=r),r}function n7(t,e){for(let i=0;i<e.length;i++){const n=e[i];if(dn(n))for(let r=0;r<n.length;r++)t[n[r].name]=n[r].fn;else n&&(t[n.name]=n.key?(...r)=>{const a=n.fn(...r);return a&&(a.key=n.key),a}:n.fn)}return t}function $d(t,e,i={},n,r){if(Ra.isCE||Ra.parent&&Lp(Ra.parent)&&Ra.parent.isCE)return e!=="default"&&(i.name=e),w("slot",i,n&&n());let a=t[e];a&&a._c&&(a._d=!1),be();const c=a&&rD(a(i)),s=He(Oi,{key:i.key||c&&c.key||`_${e}`},c||(n?n():[]),c&&t._===1?64:-2);return!r&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function rD(t){return t.some(e=>Eh(e)?!(e.type===ga||e.type===Oi&&!rD(e.children)):!0)?t:null}function m1(t,e){const i={};for(const n in t)i[e&&/[A-Z]/.test(n)?`on:${n}`:xv(n)]=t[n];return i}const u2=t=>t?bD(t)?Yb(t)||t.proxy:u2(t.parent):null,wv=uo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>u2(t.parent),$root:t=>u2(t.root),$emit:t=>t.emit,$options:t=>lC(t),$forceUpdate:t=>t.f||(t.f=()=>Vb(t.update)),$nextTick:t=>t.n||(t.n=Cn.bind(t.proxy)),$watch:t=>XV.bind(t)}),uT=(t,e)=>t!==ss&&!t.__isScriptSetup&&Ir(t,e),c2={get({_:t},e){const{ctx:i,setupState:n,data:r,props:a,accessCache:c,type:s,appContext:p}=t;let _;if(e[0]!=="$"){const I=c[e];if(I!==void 0)switch(I){case 1:return n[e];case 2:return r[e];case 4:return i[e];case 3:return a[e]}else{if(uT(n,e))return c[e]=1,n[e];if(r!==ss&&Ir(r,e))return c[e]=2,r[e];if((_=t.propsOptions[0])&&Ir(_,e))return c[e]=3,a[e];if(i!==ss&&Ir(i,e))return c[e]=4,i[e];d2&&(c[e]=0)}}const b=wv[e];let S,E;if(b)return e==="$attrs"&&xu(t,"get",e),b(t);if((S=s.__cssModules)&&(S=S[e]))return S;if(i!==ss&&Ir(i,e))return c[e]=4,i[e];if(E=p.config.globalProperties,Ir(E,e))return E[e]},set({_:t},e,i){const{data:n,setupState:r,ctx:a}=t;return uT(r,e)?(r[e]=i,!0):n!==ss&&Ir(n,e)?(n[e]=i,!0):Ir(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:r,propsOptions:a}},c){let s;return!!i[c]||t!==ss&&Ir(t,c)||uT(e,c)||(s=a[0])&&Ir(s,c)||Ir(n,c)||Ir(wv,c)||Ir(r.config.globalProperties,c)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Ir(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}},r7=uo({},c2,{get(t,e){if(e!==Symbol.unscopables)return c2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!M9(e)}});let d2=!0;function s7(t){const e=lC(t),i=t.proxy,n=t.ctx;d2=!1,e.beforeCreate&&CA(e.beforeCreate,t,"bc");const{data:r,computed:a,methods:c,watch:s,provide:p,inject:_,created:b,beforeMount:S,mounted:E,beforeUpdate:I,updated:R,activated:V,deactivated:q,beforeDestroy:U,beforeUnmount:H,destroyed:Z,unmounted:ne,render:ie,renderTracked:oe,renderTriggered:pe,errorCaptured:de,serverPrefetch:fe,expose:ge,inheritAttrs:we,components:Ie,directives:Oe,filters:ke}=e;if(_&&o7(_,n,null,t.appContext.config.unwrapInjectedRef),c)for(const gt in c){const nt=c[gt];Vn(nt)&&(n[gt]=nt.bind(i))}if(r){const gt=r.call(i,i);fs(gt)&&(t.data=Bo(gt))}if(d2=!0,a)for(const gt in a){const nt=a[gt],ft=Vn(nt)?nt.bind(i,i):Vn(nt.get)?nt.get.bind(i,i):ed,Tt=!Vn(nt)&&Vn(nt.set)?nt.set.bind(i):ed,pt=Me({get:ft,set:Tt});Object.defineProperty(n,gt,{enumerable:!0,configurable:!0,get:()=>pt.value,set:et=>pt.value=et})}if(s)for(const gt in s)sD(s[gt],n,i,gt);if(p){const gt=Vn(p)?p.call(i):p;Reflect.ownKeys(gt).forEach(nt=>{Mn(nt,gt[nt])})}b&&CA(b,t,"c");function Qe(gt,nt){dn(nt)?nt.forEach(ft=>gt(ft.bind(i))):nt&&gt(nt.bind(i))}if(Qe(_y,S),Qe(Fn,E),Qe(sC,I),Qe(qb,R),Qe(nC,V),Qe(rC,q),Qe(tD,de),Qe(eD,oe),Qe(JL,pe),Qe(as,H),Qe(Nf,ne),Qe(QL,fe),dn(ge))if(ge.length){const gt=t.exposed||(t.exposed={});ge.forEach(nt=>{Object.defineProperty(gt,nt,{get:()=>i[nt],set:ft=>i[nt]=ft})})}else t.exposed||(t.exposed={});ie&&t.render===ed&&(t.render=ie),we!=null&&(t.inheritAttrs=we),Ie&&(t.components=Ie),Oe&&(t.directives=Oe)}function o7(t,e,i=ed,n=!1){dn(t)&&(t=h2(t));for(const r in t){const a=t[r];let c;fs(a)?"default"in a?c=qi(a.from||r,a.default,!0):c=qi(a.from||r):c=qi(a),Bs(c)&&n?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:s=>c.value=s}):e[r]=c}}function CA(t,e,i){Xu(dn(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function sD(t,e,i,n){const r=n.includes(".")?YL(i,n):()=>i[n];if($s(t)){const a=e[t];Vn(a)&&Fi(r,a)}else if(Vn(t))Fi(r,t.bind(i));else if(fs(t))if(dn(t))t.forEach(a=>sD(a,e,i,n));else{const a=Vn(t.handler)?t.handler.bind(i):e[t.handler];Vn(a)&&Fi(r,a,t)}}function lC(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=t.appContext,s=a.get(e);let p;return s?p=s:!r.length&&!i&&!n?p=e:(p={},r.length&&r.forEach(_=>F1(p,_,c,!0)),F1(p,e,c)),fs(e)&&a.set(e,p),p}function F1(t,e,i,n=!1){const{mixins:r,extends:a}=e;a&&F1(t,a,i,!0),r&&r.forEach(c=>F1(t,c,i,!0));for(const c in e)if(!(n&&c==="expose")){const s=a7[c]||i&&i[c];t[c]=s?s(t[c],e[c]):e[c]}return t}const a7={data:kA,props:vp,emits:vp,methods:vp,computed:vp,beforeCreate:Ol,created:Ol,beforeMount:Ol,mounted:Ol,beforeUpdate:Ol,updated:Ol,beforeDestroy:Ol,beforeUnmount:Ol,destroyed:Ol,unmounted:Ol,activated:Ol,deactivated:Ol,errorCaptured:Ol,serverPrefetch:Ol,components:vp,directives:vp,watch:u7,provide:kA,inject:l7};function kA(t,e){return e?t?function(){return uo(Vn(t)?t.call(this,this):t,Vn(e)?e.call(this,this):e)}:e:t}function l7(t,e){return vp(h2(t),h2(e))}function h2(t){if(dn(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ol(t,e){return t?[...new Set([].concat(t,e))]:e}function vp(t,e){return t?uo(uo(Object.create(null),t),e):e}function u7(t,e){if(!t)return e;if(!e)return t;const i=uo(Object.create(null),t);for(const n in e)i[n]=Ol(t[n],e[n]);return i}function c7(t,e,i,n=!1){const r={},a={};O1(a,Zb,1),t.propsDefaults=Object.create(null),oD(t,e,r,a);for(const c in t.propsOptions[0])c in r||(r[c]=void 0);i?t.props=n?r:$L(r):t.type.props?t.props=r:t.props=a,t.attrs=a}function d7(t,e,i,n){const{props:r,attrs:a,vnode:{patchFlag:c}}=t,s=Wn(r),[p]=t.propsOptions;let _=!1;if((n||c>0)&&!(c&16)){if(c&8){const b=t.vnode.dynamicProps;for(let S=0;S<b.length;S++){let E=b[S];if(Ub(t.emitsOptions,E))continue;const I=e[E];if(p)if(Ir(a,E))I!==a[E]&&(a[E]=I,_=!0);else{const R=ll(E);r[R]=f2(p,s,R,I,t,!1)}else I!==a[E]&&(a[E]=I,_=!0)}}}else{oD(t,e,r,a)&&(_=!0);let b;for(const S in s)(!e||!Ir(e,S)&&((b=Sc(S))===S||!Ir(e,b)))&&(p?i&&(i[S]!==void 0||i[b]!==void 0)&&(r[S]=f2(p,s,S,void 0,t,!0)):delete r[S]);if(a!==s)for(const S in a)(!e||!Ir(e,S))&&(delete a[S],_=!0)}_&&kh(t,"set","$attrs")}function oD(t,e,i,n){const[r,a]=t.propsOptions;let c=!1,s;if(e)for(let p in e){if(bv(p))continue;const _=e[p];let b;r&&Ir(r,b=ll(p))?!a||!a.includes(b)?i[b]=_:(s||(s={}))[b]=_:Ub(t.emitsOptions,p)||(!(p in n)||_!==n[p])&&(n[p]=_,c=!0)}if(a){const p=Wn(i),_=s||ss;for(let b=0;b<a.length;b++){const S=a[b];i[S]=f2(r,p,S,_[S],t,!Ir(_,S))}}return c}function f2(t,e,i,n,r,a){const c=t[i];if(c!=null){const s=Ir(c,"default");if(s&&n===void 0){const p=c.default;if(c.type!==Function&&Vn(p)){const{propsDefaults:_}=r;i in _?n=_[i]:(Pf(r),n=_[i]=p.call(null,e),Sf())}else n=p}c[0]&&(a&&!s?n=!1:c[1]&&(n===""||n===Sc(i))&&(n=!0))}return n}function aD(t,e,i=!1){const n=e.propsCache,r=n.get(t);if(r)return r;const a=t.props,c={},s=[];let p=!1;if(!Vn(t)){const b=S=>{p=!0;const[E,I]=aD(S,e,!0);uo(c,E),I&&s.push(...I)};!i&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!a&&!p)return fs(t)&&n.set(t,Qm),Qm;if(dn(a))for(let b=0;b<a.length;b++){const S=ll(a[b]);EA(S)&&(c[S]=ss)}else if(a)for(const b in a){const S=ll(b);if(EA(S)){const E=a[b],I=c[S]=dn(E)||Vn(E)?{type:E}:Object.assign({},E);if(I){const R=AA(Boolean,I.type),V=AA(String,I.type);I[0]=R>-1,I[1]=V<0||R<V,(R>-1||Ir(I,"default"))&&s.push(S)}}}const _=[c,s];return fs(t)&&n.set(t,_),_}function EA(t){return t[0]!=="$"}function IA(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function PA(t,e){return IA(t)===IA(e)}function AA(t,e){return dn(e)?e.findIndex(i=>PA(i,t)):Vn(e)&&PA(e,t)?0:-1}const lD=t=>t[0]==="_"||t==="$stable",uC=t=>dn(t)?t.map(Wu):[Wu(t)],h7=(t,e,i)=>{if(e._n)return e;const n=D((...r)=>uC(e(...r)),i);return n._c=!1,n},uD=(t,e,i)=>{const n=t._ctx;for(const r in t){if(lD(r))continue;const a=t[r];if(Vn(a))e[r]=h7(r,a,n);else if(a!=null){const c=uC(a);e[r]=()=>c}}},cD=(t,e)=>{const i=uC(e);t.slots.default=()=>i},f7=(t,e)=>{if(t.vnode.shapeFlag&32){const i=e._;i?(t.slots=Wn(e),O1(e,"_",i)):uD(e,t.slots={})}else t.slots={},e&&cD(t,e);O1(t.slots,Zb,1)},p7=(t,e,i)=>{const{vnode:n,slots:r}=t;let a=!0,c=ss;if(n.shapeFlag&32){const s=e._;s?i&&s===1?a=!1:(uo(r,e),!i&&s===1&&delete r._):(a=!e.$stable,uD(e,r)),c=e}else e&&(cD(t,e),c={default:1});if(a)for(const s in r)!lD(s)&&!(s in c)&&delete r[s]};function dD(){return{app:null,config:{isNativeTag:N9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let m7=0;function g7(t,e){return function(n,r=null){Vn(n)||(n=Object.assign({},n)),r!=null&&!fs(r)&&(r=null);const a=dD(),c=new Set;let s=!1;const p=a.app={_uid:m7++,_component:n,_props:r,_container:null,_context:a,_instance:null,version:ID,get config(){return a.config},set config(_){},use(_,...b){return c.has(_)||(_&&Vn(_.install)?(c.add(_),_.install(p,...b)):Vn(_)&&(c.add(_),_(p,...b))),p},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),p},component(_,b){return b?(a.components[_]=b,p):a.components[_]},directive(_,b){return b?(a.directives[_]=b,p):a.directives[_]},mount(_,b,S){if(!s){const E=w(n,r);return E.appContext=a,b&&e?e(E,_):t(E,_,S),s=!0,p._container=_,_.__vue_app__=p,Yb(E.component)||E.component.proxy}},unmount(){s&&(t(null,p._container),delete p._container.__vue_app__)},provide(_,b){return a.provides[_]=b,p}};return p}}function $1(t,e,i,n,r=!1){if(dn(t)){t.forEach((E,I)=>$1(E,e&&(dn(e)?e[I]:e),i,n,r));return}if(Lp(n)&&!r)return;const a=n.shapeFlag&4?Yb(n.component)||n.component.proxy:n.el,c=r?null:a,{i:s,r:p}=t,_=e&&e.r,b=s.refs===ss?s.refs={}:s.refs,S=s.setupState;if(_!=null&&_!==p&&($s(_)?(b[_]=null,Ir(S,_)&&(S[_]=null)):Bs(_)&&(_.value=null)),Vn(p))bh(p,s,12,[c,b]);else{const E=$s(p),I=Bs(p);if(E||I){const R=()=>{if(t.f){const V=E?Ir(S,p)?S[p]:b[p]:p.value;r?dn(V)&&VS(V,a):dn(V)?V.includes(a)||V.push(a):E?(b[p]=[a],Ir(S,p)&&(S[p]=b[p])):(p.value=[a],t.k&&(b[t.k]=p.value))}else E?(b[p]=c,Ir(S,p)&&(S[p]=c)):I&&(p.value=c,t.k&&(b[t.k]=c))};c?(R.id=-1,Oa(R,i)):R()}}}let df=!1;const q0=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",Z0=t=>t.nodeType===8;function _7(t){const{mt:e,p:i,o:{patchProp:n,createText:r,nextSibling:a,parentNode:c,remove:s,insert:p,createComment:_}}=t,b=(U,H)=>{if(!H.hasChildNodes()){i(null,U,H),B1(),H._vnode=U;return}df=!1,S(H.firstChild,U,null,null,null),B1(),H._vnode=U,df&&console.error("Hydration completed but contains mismatches.")},S=(U,H,Z,ne,ie,oe=!1)=>{const pe=Z0(U)&&U.data==="[",de=()=>V(U,H,Z,ne,ie,pe),{type:fe,ref:ge,shapeFlag:we,patchFlag:Ie}=H;let Oe=U.nodeType;H.el=U,Ie===-2&&(oe=!1,H.dynamicChildren=null);let ke=null;switch(fe){case If:Oe!==3?H.children===""?(p(H.el=r(""),c(U),U),ke=U):ke=de():(U.data!==H.children&&(df=!0,U.data=H.children),ke=a(U));break;case ga:Oe!==8||pe?ke=de():ke=a(U);break;case Dp:if(pe&&(U=a(U),Oe=U.nodeType),Oe===1||Oe===3){ke=U;const Ee=!H.children.length;for(let Qe=0;Qe<H.staticCount;Qe++)Ee&&(H.children+=ke.nodeType===1?ke.outerHTML:ke.data),Qe===H.staticCount-1&&(H.anchor=ke),ke=a(ke);return pe?a(ke):ke}else de();break;case Oi:pe?ke=R(U,H,Z,ne,ie,oe):ke=de();break;default:if(we&1)Oe!==1||H.type.toLowerCase()!==U.tagName.toLowerCase()?ke=de():ke=E(U,H,Z,ne,ie,oe);else if(we&6){H.slotScopeIds=ie;const Ee=c(U);if(e(H,Ee,null,Z,ne,q0(Ee),oe),ke=pe?q(U):a(U),ke&&Z0(ke)&&ke.data==="teleport end"&&(ke=a(ke)),Lp(H)){let Qe;pe?(Qe=w(Oi),Qe.anchor=ke?ke.previousSibling:Ee.lastChild):Qe=U.nodeType===3?ye(""):w("div"),Qe.el=U,H.component.subTree=Qe}}else we&64?Oe!==8?ke=de():ke=H.type.hydrate(U,H,Z,ne,ie,oe,t,I):we&128&&(ke=H.type.hydrate(U,H,Z,ne,q0(c(U)),ie,oe,t,S))}return ge!=null&&$1(ge,null,ne,H),ke},E=(U,H,Z,ne,ie,oe)=>{oe=oe||!!H.dynamicChildren;const{type:pe,props:de,patchFlag:fe,shapeFlag:ge,dirs:we}=H,Ie=pe==="input"&&we||pe==="option";if(Ie||fe!==-1){if(we&&Ad(H,null,Z,"created"),de)if(Ie||!oe||fe&48)for(const ke in de)(Ie&&ke.endsWith("value")||hy(ke)&&!bv(ke))&&n(U,ke,null,de[ke],!1,void 0,Z);else de.onClick&&n(U,"onClick",null,de.onClick,!1,void 0,Z);let Oe;if((Oe=de&&de.onVnodeBeforeMount)&&pu(Oe,Z,H),we&&Ad(H,null,Z,"beforeMount"),((Oe=de&&de.onVnodeMounted)||we)&&qL(()=>{Oe&&pu(Oe,Z,H),we&&Ad(H,null,Z,"mounted")},ne),ge&16&&!(de&&(de.innerHTML||de.textContent))){let ke=I(U.firstChild,H,U,Z,ne,ie,oe);for(;ke;){df=!0;const Ee=ke;ke=ke.nextSibling,s(Ee)}}else ge&8&&U.textContent!==H.children&&(df=!0,U.textContent=H.children)}return U.nextSibling},I=(U,H,Z,ne,ie,oe,pe)=>{pe=pe||!!H.dynamicChildren;const de=H.children,fe=de.length;for(let ge=0;ge<fe;ge++){const we=pe?de[ge]:de[ge]=Wu(de[ge]);if(U)U=S(U,we,ne,ie,oe,pe);else{if(we.type===If&&!we.children)continue;df=!0,i(null,we,Z,null,ne,ie,q0(Z),oe)}}return U},R=(U,H,Z,ne,ie,oe)=>{const{slotScopeIds:pe}=H;pe&&(ie=ie?ie.concat(pe):pe);const de=c(U),fe=I(a(U),H,de,Z,ne,ie,oe);return fe&&Z0(fe)&&fe.data==="]"?a(H.anchor=fe):(df=!0,p(H.anchor=_("]"),de,fe),fe)},V=(U,H,Z,ne,ie,oe)=>{if(df=!0,H.el=null,oe){const fe=q(U);for(;;){const ge=a(U);if(ge&&ge!==fe)s(ge);else break}}const pe=a(U),de=c(U);return s(U),i(null,H,de,pe,Z,ne,q0(de),ie),pe},q=U=>{let H=0;for(;U;)if(U=a(U),U&&Z0(U)&&(U.data==="["&&H++,U.data==="]")){if(H===0)return a(U);H--}return U};return[b,S]}const Oa=qL;function hD(t){return pD(t)}function fD(t){return pD(t,_7)}function pD(t,e){const i=W9();i.__VUE__=!0;const{insert:n,remove:r,patchProp:a,createElement:c,createText:s,createComment:p,setText:_,setElementText:b,parentNode:S,nextSibling:E,setScopeId:I=ed,insertStaticContent:R}=t,V=(Ve,dt,kt,Xe=null,it=null,ct=null,At=!1,Gt=null,Bt=!!dt.dynamicChildren)=>{if(Ve===dt)return;Ve&&!Qc(Ve,dt)&&(Xe=Rt(Ve),et(Ve,it,ct,!0),Ve=null),dt.patchFlag===-2&&(Bt=!1,dt.dynamicChildren=null);const{type:Yt,ref:gi,shapeFlag:_i}=dt;switch(Yt){case If:q(Ve,dt,kt,Xe);break;case ga:U(Ve,dt,kt,Xe);break;case Dp:Ve==null&&H(dt,kt,Xe,At);break;case Oi:Ie(Ve,dt,kt,Xe,it,ct,At,Gt,Bt);break;default:_i&1?ie(Ve,dt,kt,Xe,it,ct,At,Gt,Bt):_i&6?Oe(Ve,dt,kt,Xe,it,ct,At,Gt,Bt):(_i&64||_i&128)&&Yt.process(Ve,dt,kt,Xe,it,ct,At,Gt,Bt,Ei)}gi!=null&&it&&$1(gi,Ve&&Ve.ref,ct,dt||Ve,!dt)},q=(Ve,dt,kt,Xe)=>{if(Ve==null)n(dt.el=s(dt.children),kt,Xe);else{const it=dt.el=Ve.el;dt.children!==Ve.children&&_(it,dt.children)}},U=(Ve,dt,kt,Xe)=>{Ve==null?n(dt.el=p(dt.children||""),kt,Xe):dt.el=Ve.el},H=(Ve,dt,kt,Xe)=>{[Ve.el,Ve.anchor]=R(Ve.children,dt,kt,Xe,Ve.el,Ve.anchor)},Z=({el:Ve,anchor:dt},kt,Xe)=>{let it;for(;Ve&&Ve!==dt;)it=E(Ve),n(Ve,kt,Xe),Ve=it;n(dt,kt,Xe)},ne=({el:Ve,anchor:dt})=>{let kt;for(;Ve&&Ve!==dt;)kt=E(Ve),r(Ve),Ve=kt;r(dt)},ie=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt)=>{At=At||dt.type==="svg",Ve==null?oe(dt,kt,Xe,it,ct,At,Gt,Bt):fe(Ve,dt,it,ct,At,Gt,Bt)},oe=(Ve,dt,kt,Xe,it,ct,At,Gt)=>{let Bt,Yt;const{type:gi,props:_i,shapeFlag:zi,transition:Hi,dirs:Zi}=Ve;if(Bt=Ve.el=c(Ve.type,ct,_i&&_i.is,_i),zi&8?b(Bt,Ve.children):zi&16&&de(Ve.children,Bt,null,Xe,it,ct&&gi!=="foreignObject",At,Gt),Zi&&Ad(Ve,null,Xe,"created"),pe(Bt,Ve,Ve.scopeId,At,Xe),_i){for(const ci in _i)ci!=="value"&&!bv(ci)&&a(Bt,ci,null,_i[ci],ct,Ve.children,Xe,it,tt);"value"in _i&&a(Bt,"value",null,_i.value),(Yt=_i.onVnodeBeforeMount)&&pu(Yt,Xe,Ve)}Zi&&Ad(Ve,null,Xe,"beforeMount");const Ci=(!it||it&&!it.pendingBranch)&&Hi&&!Hi.persisted;Ci&&Hi.beforeEnter(Bt),n(Bt,dt,kt),((Yt=_i&&_i.onVnodeMounted)||Ci||Zi)&&Oa(()=>{Yt&&pu(Yt,Xe,Ve),Ci&&Hi.enter(Bt),Zi&&Ad(Ve,null,Xe,"mounted")},it)},pe=(Ve,dt,kt,Xe,it)=>{if(kt&&I(Ve,kt),Xe)for(let ct=0;ct<Xe.length;ct++)I(Ve,Xe[ct]);if(it){let ct=it.subTree;if(dt===ct){const At=it.vnode;pe(Ve,At,At.scopeId,At.slotScopeIds,it.parent)}}},de=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt=0)=>{for(let Yt=Bt;Yt<Ve.length;Yt++){const gi=Ve[Yt]=Gt?_f(Ve[Yt]):Wu(Ve[Yt]);V(null,gi,dt,kt,Xe,it,ct,At,Gt)}},fe=(Ve,dt,kt,Xe,it,ct,At)=>{const Gt=dt.el=Ve.el;let{patchFlag:Bt,dynamicChildren:Yt,dirs:gi}=dt;Bt|=Ve.patchFlag&16;const _i=Ve.props||ss,zi=dt.props||ss;let Hi;kt&&fp(kt,!1),(Hi=zi.onVnodeBeforeUpdate)&&pu(Hi,kt,dt,Ve),gi&&Ad(dt,Ve,kt,"beforeUpdate"),kt&&fp(kt,!0);const Zi=it&&dt.type!=="foreignObject";if(Yt?ge(Ve.dynamicChildren,Yt,Gt,kt,Xe,Zi,ct):At||nt(Ve,dt,Gt,null,kt,Xe,Zi,ct,!1),Bt>0){if(Bt&16)we(Gt,dt,_i,zi,kt,Xe,it);else if(Bt&2&&_i.class!==zi.class&&a(Gt,"class",null,zi.class,it),Bt&4&&a(Gt,"style",_i.style,zi.style,it),Bt&8){const Ci=dt.dynamicProps;for(let ci=0;ci<Ci.length;ci++){const Si=Ci[ci],sn=_i[Si],vn=zi[Si];(vn!==sn||Si==="value")&&a(Gt,Si,sn,vn,it,Ve.children,kt,Xe,tt)}}Bt&1&&Ve.children!==dt.children&&b(Gt,dt.children)}else!At&&Yt==null&&we(Gt,dt,_i,zi,kt,Xe,it);((Hi=zi.onVnodeUpdated)||gi)&&Oa(()=>{Hi&&pu(Hi,kt,dt,Ve),gi&&Ad(dt,Ve,kt,"updated")},Xe)},ge=(Ve,dt,kt,Xe,it,ct,At)=>{for(let Gt=0;Gt<dt.length;Gt++){const Bt=Ve[Gt],Yt=dt[Gt],gi=Bt.el&&(Bt.type===Oi||!Qc(Bt,Yt)||Bt.shapeFlag&70)?S(Bt.el):kt;V(Bt,Yt,gi,null,Xe,it,ct,At,!0)}},we=(Ve,dt,kt,Xe,it,ct,At)=>{if(kt!==Xe){if(kt!==ss)for(const Gt in kt)!bv(Gt)&&!(Gt in Xe)&&a(Ve,Gt,kt[Gt],null,At,dt.children,it,ct,tt);for(const Gt in Xe){if(bv(Gt))continue;const Bt=Xe[Gt],Yt=kt[Gt];Bt!==Yt&&Gt!=="value"&&a(Ve,Gt,Yt,Bt,At,dt.children,it,ct,tt)}"value"in Xe&&a(Ve,"value",kt.value,Xe.value)}},Ie=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt)=>{const Yt=dt.el=Ve?Ve.el:s(""),gi=dt.anchor=Ve?Ve.anchor:s("");let{patchFlag:_i,dynamicChildren:zi,slotScopeIds:Hi}=dt;Hi&&(Gt=Gt?Gt.concat(Hi):Hi),Ve==null?(n(Yt,kt,Xe),n(gi,kt,Xe),de(dt.children,kt,gi,it,ct,At,Gt,Bt)):_i>0&&_i&64&&zi&&Ve.dynamicChildren?(ge(Ve.dynamicChildren,zi,kt,it,ct,At,Gt),(dt.key!=null||it&&dt===it.subTree)&&cC(Ve,dt,!0)):nt(Ve,dt,kt,gi,it,ct,At,Gt,Bt)},Oe=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt)=>{dt.slotScopeIds=Gt,Ve==null?dt.shapeFlag&512?it.ctx.activate(dt,kt,Xe,At,Bt):ke(dt,kt,Xe,it,ct,At,Bt):Ee(Ve,dt,Bt)},ke=(Ve,dt,kt,Xe,it,ct,At)=>{const Gt=Ve.component=yD(Ve,Xe,it);if(gy(Ve)&&(Gt.ctx.renderer=Ei),xD(Gt),Gt.asyncDep){if(it&&it.registerDep(Gt,Qe),!Ve.el){const Bt=Gt.subTree=w(ga);U(null,Bt,dt,kt)}return}Qe(Gt,Ve,dt,kt,it,ct,At)},Ee=(Ve,dt,kt)=>{const Xe=dt.component=Ve.component;if(UV(Ve,dt,kt))if(Xe.asyncDep&&!Xe.asyncResolved){gt(Xe,dt,kt);return}else Xe.next=dt,BV(Xe.update),Xe.update();else dt.el=Ve.el,Xe.vnode=dt},Qe=(Ve,dt,kt,Xe,it,ct,At)=>{const Gt=()=>{if(Ve.isMounted){let{next:gi,bu:_i,u:zi,parent:Hi,vnode:Zi}=Ve,Ci=gi,ci;fp(Ve,!1),gi?(gi.el=Zi.el,gt(Ve,gi,At)):gi=Zi,_i&&eg(_i),(ci=gi.props&&gi.props.onVnodeBeforeUpdate)&&pu(ci,Hi,gi,Zi),fp(Ve,!0);const Si=p1(Ve),sn=Ve.subTree;Ve.subTree=Si,V(sn,Si,S(sn.el),Rt(sn),Ve,it,ct),gi.el=Si.el,Ci===null&&JS(Ve,Si.el),zi&&Oa(zi,it),(ci=gi.props&&gi.props.onVnodeUpdated)&&Oa(()=>pu(ci,Hi,gi,Zi),it)}else{let gi;const{el:_i,props:zi}=dt,{bm:Hi,m:Zi,parent:Ci}=Ve,ci=Lp(dt);if(fp(Ve,!1),Hi&&eg(Hi),!ci&&(gi=zi&&zi.onVnodeBeforeMount)&&pu(gi,Ci,dt),fp(Ve,!0),_i&&Vi){const Si=()=>{Ve.subTree=p1(Ve),Vi(_i,Ve.subTree,Ve,it,null)};ci?dt.type.__asyncLoader().then(()=>!Ve.isUnmounted&&Si()):Si()}else{const Si=Ve.subTree=p1(Ve);V(null,Si,kt,Xe,Ve,it,ct),dt.el=Si.el}if(Zi&&Oa(Zi,it),!ci&&(gi=zi&&zi.onVnodeMounted)){const Si=dt;Oa(()=>pu(gi,Ci,Si),it)}(dt.shapeFlag&256||Ci&&Lp(Ci.vnode)&&Ci.vnode.shapeFlag&256)&&Ve.a&&Oa(Ve.a,it),Ve.isMounted=!0,dt=kt=Xe=null}},Bt=Ve.effect=new py(Gt,()=>Vb(Yt),Ve.scope),Yt=Ve.update=()=>Bt.run();Yt.id=Ve.uid,fp(Ve,!0),Yt()},gt=(Ve,dt,kt)=>{dt.component=Ve;const Xe=Ve.vnode.props;Ve.vnode=dt,Ve.next=null,d7(Ve,dt.props,Xe,kt),p7(Ve,dt.children,kt),Bg(),bA(),Fg()},nt=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt=!1)=>{const Yt=Ve&&Ve.children,gi=Ve?Ve.shapeFlag:0,_i=dt.children,{patchFlag:zi,shapeFlag:Hi}=dt;if(zi>0){if(zi&128){Tt(Yt,_i,kt,Xe,it,ct,At,Gt,Bt);return}else if(zi&256){ft(Yt,_i,kt,Xe,it,ct,At,Gt,Bt);return}}Hi&8?(gi&16&&tt(Yt,it,ct),_i!==Yt&&b(kt,_i)):gi&16?Hi&16?Tt(Yt,_i,kt,Xe,it,ct,At,Gt,Bt):tt(Yt,it,ct,!0):(gi&8&&b(kt,""),Hi&16&&de(_i,kt,Xe,it,ct,At,Gt,Bt))},ft=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt)=>{Ve=Ve||Qm,dt=dt||Qm;const Yt=Ve.length,gi=dt.length,_i=Math.min(Yt,gi);let zi;for(zi=0;zi<_i;zi++){const Hi=dt[zi]=Bt?_f(dt[zi]):Wu(dt[zi]);V(Ve[zi],Hi,kt,null,it,ct,At,Gt,Bt)}Yt>gi?tt(Ve,it,ct,!0,!1,_i):de(dt,kt,Xe,it,ct,At,Gt,Bt,_i)},Tt=(Ve,dt,kt,Xe,it,ct,At,Gt,Bt)=>{let Yt=0;const gi=dt.length;let _i=Ve.length-1,zi=gi-1;for(;Yt<=_i&&Yt<=zi;){const Hi=Ve[Yt],Zi=dt[Yt]=Bt?_f(dt[Yt]):Wu(dt[Yt]);if(Qc(Hi,Zi))V(Hi,Zi,kt,null,it,ct,At,Gt,Bt);else break;Yt++}for(;Yt<=_i&&Yt<=zi;){const Hi=Ve[_i],Zi=dt[zi]=Bt?_f(dt[zi]):Wu(dt[zi]);if(Qc(Hi,Zi))V(Hi,Zi,kt,null,it,ct,At,Gt,Bt);else break;_i--,zi--}if(Yt>_i){if(Yt<=zi){const Hi=zi+1,Zi=Hi<gi?dt[Hi].el:Xe;for(;Yt<=zi;)V(null,dt[Yt]=Bt?_f(dt[Yt]):Wu(dt[Yt]),kt,Zi,it,ct,At,Gt,Bt),Yt++}}else if(Yt>zi)for(;Yt<=_i;)et(Ve[Yt],it,ct,!0),Yt++;else{const Hi=Yt,Zi=Yt,Ci=new Map;for(Yt=Zi;Yt<=zi;Yt++){const Mr=dt[Yt]=Bt?_f(dt[Yt]):Wu(dt[Yt]);Mr.key!=null&&Ci.set(Mr.key,Yt)}let ci,Si=0;const sn=zi-Zi+1;let vn=!1,hn=0;const Nn=new Array(sn);for(Yt=0;Yt<sn;Yt++)Nn[Yt]=0;for(Yt=Hi;Yt<=_i;Yt++){const Mr=Ve[Yt];if(Si>=sn){et(Mr,it,ct,!0);continue}let Yr;if(Mr.key!=null)Yr=Ci.get(Mr.key);else for(ci=Zi;ci<=zi;ci++)if(Nn[ci-Zi]===0&&Qc(Mr,dt[ci])){Yr=ci;break}Yr===void 0?et(Mr,it,ct,!0):(Nn[Yr-Zi]=Yt+1,Yr>=hn?hn=Yr:vn=!0,V(Mr,dt[Yr],kt,null,it,ct,At,Gt,Bt),Si++)}const yr=vn?v7(Nn):Qm;for(ci=yr.length-1,Yt=sn-1;Yt>=0;Yt--){const Mr=Zi+Yt,Yr=dt[Mr],fr=Mr+1<gi?dt[Mr+1].el:Xe;Nn[Yt]===0?V(null,Yr,kt,fr,it,ct,At,Gt,Bt):vn&&(ci<0||Yt!==yr[ci]?pt(Yr,kt,fr,2):ci--)}}},pt=(Ve,dt,kt,Xe,it=null)=>{const{el:ct,type:At,transition:Gt,children:Bt,shapeFlag:Yt}=Ve;if(Yt&6){pt(Ve.component.subTree,dt,kt,Xe);return}if(Yt&128){Ve.suspense.move(dt,kt,Xe);return}if(Yt&64){At.move(Ve,dt,kt,Ei);return}if(At===Oi){n(ct,dt,kt);for(let _i=0;_i<Bt.length;_i++)pt(Bt[_i],dt,kt,Xe);n(Ve.anchor,dt,kt);return}if(At===Dp){Z(Ve,dt,kt);return}if(Xe!==2&&Yt&1&&Gt)if(Xe===0)Gt.beforeEnter(ct),n(ct,dt,kt),Oa(()=>Gt.enter(ct),it);else{const{leave:_i,delayLeave:zi,afterLeave:Hi}=Gt,Zi=()=>n(ct,dt,kt),Ci=()=>{_i(ct,()=>{Zi(),Hi&&Hi()})};zi?zi(ct,Zi,Ci):Ci()}else n(ct,dt,kt)},et=(Ve,dt,kt,Xe=!1,it=!1)=>{const{type:ct,props:At,ref:Gt,children:Bt,dynamicChildren:Yt,shapeFlag:gi,patchFlag:_i,dirs:zi}=Ve;if(Gt!=null&&$1(Gt,null,kt,Ve,!0),gi&256){dt.ctx.deactivate(Ve);return}const Hi=gi&1&&zi,Zi=!Lp(Ve);let Ci;if(Zi&&(Ci=At&&At.onVnodeBeforeUnmount)&&pu(Ci,dt,Ve),gi&6)Fe(Ve.component,kt,Xe);else{if(gi&128){Ve.suspense.unmount(kt,Xe);return}Hi&&Ad(Ve,null,dt,"beforeUnmount"),gi&64?Ve.type.remove(Ve,dt,kt,it,Ei,Xe):Yt&&(ct!==Oi||_i>0&&_i&64)?tt(Yt,dt,kt,!1,!0):(ct===Oi&&_i&384||!it&&gi&16)&&tt(Bt,dt,kt),Xe&&Mt(Ve)}(Zi&&(Ci=At&&At.onVnodeUnmounted)||Hi)&&Oa(()=>{Ci&&pu(Ci,dt,Ve),Hi&&Ad(Ve,null,dt,"unmounted")},kt)},Mt=Ve=>{const{type:dt,el:kt,anchor:Xe,transition:it}=Ve;if(dt===Oi){Qt(kt,Xe);return}if(dt===Dp){ne(Ve);return}const ct=()=>{r(kt),it&&!it.persisted&&it.afterLeave&&it.afterLeave()};if(Ve.shapeFlag&1&&it&&!it.persisted){const{leave:At,delayLeave:Gt}=it,Bt=()=>At(kt,ct);Gt?Gt(Ve.el,ct,Bt):Bt()}else ct()},Qt=(Ve,dt)=>{let kt;for(;Ve!==dt;)kt=E(Ve),r(Ve),Ve=kt;r(dt)},Fe=(Ve,dt,kt)=>{const{bum:Xe,scope:it,update:ct,subTree:At,um:Gt}=Ve;Xe&&eg(Xe),it.stop(),ct&&(ct.active=!1,et(At,Ve,dt,kt)),Gt&&Oa(Gt,dt),Oa(()=>{Ve.isUnmounted=!0},dt),dt&&dt.pendingBranch&&!dt.isUnmounted&&Ve.asyncDep&&!Ve.asyncResolved&&Ve.suspenseId===dt.pendingId&&(dt.deps--,dt.deps===0&&dt.resolve())},tt=(Ve,dt,kt,Xe=!1,it=!1,ct=0)=>{for(let At=ct;At<Ve.length;At++)et(Ve[At],dt,kt,Xe,it)},Rt=Ve=>Ve.shapeFlag&6?Rt(Ve.component.subTree):Ve.shapeFlag&128?Ve.suspense.next():E(Ve.anchor||Ve.el),Xt=(Ve,dt,kt)=>{Ve==null?dt._vnode&&et(dt._vnode,null,null,!0):V(dt._vnode||null,Ve,dt,null,null,null,kt),bA(),B1(),dt._vnode=Ve},Ei={p:V,um:et,m:pt,r:Mt,mt:ke,mc:de,pc:nt,pbc:ge,n:Rt,o:t};let Ni,Vi;return e&&([Ni,Vi]=e(Ei)),{render:Xt,hydrate:Ni,createApp:g7(Xt,Ni)}}function fp({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function cC(t,e,i=!1){const n=t.children,r=e.children;if(dn(n)&&dn(r))for(let a=0;a<n.length;a++){const c=n[a];let s=r[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=r[a]=_f(r[a]),s.el=c.el),i||cC(c,s)),s.type===If&&(s.el=c.el)}}function v7(t){const e=t.slice(),i=[0];let n,r,a,c,s;const p=t.length;for(n=0;n<p;n++){const _=t[n];if(_!==0){if(r=i[i.length-1],t[r]<_){e[n]=r,i.push(n);continue}for(a=0,c=i.length-1;a<c;)s=a+c>>1,t[i[s]]<_?a=s+1:c=s;_<t[i[a]]&&(a>0&&(e[n]=i[a-1]),i[a]=n)}}for(a=i.length,c=i[a-1];a-- >0;)i[a]=c,c=e[c];return i}const y7=t=>t.__isTeleport,Tv=t=>t&&(t.disabled||t.disabled===""),MA=t=>typeof SVGElement<"u"&&t instanceof SVGElement,p2=(t,e)=>{const i=t&&t.to;return $s(i)?e?e(i):null:i},b7={__isTeleport:!0,process(t,e,i,n,r,a,c,s,p,_){const{mc:b,pc:S,pbc:E,o:{insert:I,querySelector:R,createText:V,createComment:q}}=_,U=Tv(e.props);let{shapeFlag:H,children:Z,dynamicChildren:ne}=e;if(t==null){const ie=e.el=V(""),oe=e.anchor=V("");I(ie,i,n),I(oe,i,n);const pe=e.target=p2(e.props,R),de=e.targetAnchor=V("");pe&&(I(de,pe),c=c||MA(pe));const fe=(ge,we)=>{H&16&&b(Z,ge,we,r,a,c,s,p)};U?fe(i,oe):pe&&fe(pe,de)}else{e.el=t.el;const ie=e.anchor=t.anchor,oe=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,de=Tv(t.props),fe=de?i:oe,ge=de?ie:pe;if(c=c||MA(oe),ne?(E(t.dynamicChildren,ne,fe,r,a,c,s),cC(t,e,!0)):p||S(t,e,fe,ge,r,a,c,s,!1),U)de||Y0(e,i,ie,_,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const we=e.target=p2(e.props,R);we&&Y0(e,we,null,_,0)}else de&&Y0(e,oe,pe,_,1)}mD(e)},remove(t,e,i,n,{um:r,o:{remove:a}},c){const{shapeFlag:s,children:p,anchor:_,targetAnchor:b,target:S,props:E}=t;if(S&&a(b),(c||!Tv(E))&&(a(_),s&16))for(let I=0;I<p.length;I++){const R=p[I];r(R,e,i,!0,!!R.dynamicChildren)}},move:Y0,hydrate:x7};function Y0(t,e,i,{o:{insert:n},m:r},a=2){a===0&&n(t.targetAnchor,e,i);const{el:c,anchor:s,shapeFlag:p,children:_,props:b}=t,S=a===2;if(S&&n(c,e,i),(!S||Tv(b))&&p&16)for(let E=0;E<_.length;E++)r(_[E],e,i,2);S&&n(s,e,i)}function x7(t,e,i,n,r,a,{o:{nextSibling:c,parentNode:s,querySelector:p}},_){const b=e.target=p2(e.props,p);if(b){const S=b._lpa||b.firstChild;if(e.shapeFlag&16)if(Tv(e.props))e.anchor=_(c(t),e,s(t),i,n,r,a),e.targetAnchor=S;else{e.anchor=c(t);let E=S;for(;E;)if(E=c(E),E&&E.nodeType===8&&E.data==="teleport anchor"){e.targetAnchor=E,b._lpa=e.targetAnchor&&c(e.targetAnchor);break}_(S,e,b,i,n,r,a)}mD(e)}return e.anchor&&c(e.anchor)}const dC=b7;function mD(t){const e=t.ctx;if(e&&e.ut){let i=t.children[0].el;for(;i!==t.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const Oi=Symbol(void 0),If=Symbol(void 0),ga=Symbol(void 0),Dp=Symbol(void 0),Sv=[];let vu=null;function be(t=!1){Sv.push(vu=t?null:[])}function gD(){Sv.pop(),vu=Sv[Sv.length-1]||null}let Vp=1;function m2(t){Vp+=t}function _D(t){return t.dynamicChildren=Vp>0?vu||Qm:null,gD(),Vp>0&&vu&&vu.push(t),t}function ti(t,e,i,n,r,a){return _D(Pe(t,e,i,n,r,a,!0))}function He(t,e,i,n,r){return _D(w(t,e,i,n,r,!0))}function Eh(t){return t?t.__v_isVNode===!0:!1}function Qc(t,e){return t.type===e.type&&t.key===e.key}function w7(t){}const Zb="__vInternal",vD=({key:t})=>t??null,g1=({ref:t,ref_key:e,ref_for:i})=>t!=null?$s(t)||Bs(t)||Vn(t)?{i:Ra,r:t,k:e,f:!!i}:t:null;function Pe(t,e=null,i=null,n=0,r=null,a=t===Oi?0:1,c=!1,s=!1){const p={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vD(e),ref:e&&g1(e),scopeId:jb,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ra};return s?(fC(p,i),a&128&&t.normalize(p)):i&&(p.shapeFlag|=$s(i)?8:16),Vp>0&&!c&&vu&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&vu.push(p),p}const w=T7;function T7(t,e=null,i=null,n=0,r=null,a=!1){if((!t||t===iD)&&(t=ga),Eh(t)){const s=nd(t,e,!0);return i&&fC(s,i),Vp>0&&!a&&vu&&(s.shapeFlag&6?vu[vu.indexOf(t)]=s:vu.push(s)),s.patchFlag|=-2,s}if(A7(t)&&(t=t.__vccOpts),e){e=hC(e);let{class:s,style:p}=e;s&&!$s(s)&&(e.class=Zs(s)),fs(p)&&(qS(p)&&!dn(p)&&(p=uo({},p)),e.style=ir(p))}const c=$s(t)?1:WL(t)?128:y7(t)?64:fs(t)?4:Vn(t)?2:0;return Pe(t,e,i,n,r,c,a,!0)}function hC(t){return t?qS(t)||Zb in t?uo({},t):t:null}function nd(t,e,i=!1){const{props:n,ref:r,patchFlag:a,children:c}=t,s=e?Mi(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&vD(s),ref:e&&e.ref?i&&r?dn(r)?r.concat(g1(e)):[r,g1(e)]:g1(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oi?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nd(t.ssContent),ssFallback:t.ssFallback&&nd(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ye(t=" ",e=0){return w(If,null,t,e)}function $g(t,e){const i=w(Dp,null,t);return i.staticCount=e,i}function We(t="",e=!1){return e?(be(),He(ga,null,t)):w(ga,null,t)}function Wu(t){return t==null||typeof t=="boolean"?w(ga):dn(t)?w(Oi,null,t.slice()):typeof t=="object"?_f(t):w(If,null,String(t))}function _f(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:nd(t)}function fC(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(dn(e))i=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),fC(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!(Zb in e)?e._ctx=Ra:r===3&&Ra&&(Ra.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Vn(e)?(e={default:e,_ctx:Ra},i=32):(e=String(e),n&64?(i=16,e=[ye(e)]):i=8);t.children=e,t.shapeFlag|=i}function Mi(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Zs([e.class,n.class]));else if(r==="style")e.style=ir([e.style,n.style]);else if(hy(r)){const a=e[r],c=n[r];c&&a!==c&&!(dn(a)&&a.includes(c))&&(e[r]=a?[].concat(a,c):c)}else r!==""&&(e[r]=n[r])}return e}function pu(t,e,i,n=null){Xu(t,e,7,[i,n])}const S7=dD();let C7=0;function yD(t,e,i){const n=t.type,r=(e?e.appContext:t.appContext)||S7,a={uid:C7++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new HS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:aD(n,r),emitsOptions:GL(n,r),emit:null,emitted:null,propsDefaults:ss,inheritAttrs:n.inheritAttrs,ctx:ss,data:ss,props:ss,attrs:ss,slots:ss,refs:ss,setupState:ss,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=$V.bind(null,a),t.ce&&t.ce(a),a}let ao=null;const Kd=()=>ao||Ra,Pf=t=>{ao=t,t.scope.on()},Sf=()=>{ao&&ao.scope.off(),ao=null};function bD(t){return t.vnode.shapeFlag&4}let fg=!1;function xD(t,e=!1){fg=e;const{props:i,children:n}=t.vnode,r=bD(t);c7(t,i,r,e),f7(t,n);const a=r?k7(t,e):void 0;return fg=!1,a}function k7(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=Ar(new Proxy(t.ctx,c2));const{setup:n}=i;if(n){const r=t.setupContext=n.length>1?TD(t):null;Pf(t),Bg();const a=bh(n,t,0,[t.props,r]);if(Fg(),Sf(),US(a)){if(a.then(Sf,Sf),e)return a.then(c=>{g2(t,c,e)}).catch(c=>{Yp(c,t,0)});t.asyncDep=a}else g2(t,a,e)}else wD(t,e)}function g2(t,e,i){Vn(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fs(e)&&(t.setupState=XS(e)),wD(t,i)}let N1,_2;function E7(t){N1=t,_2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,r7))}}const I7=()=>!N1;function wD(t,e,i){const n=t.type;if(!t.render){if(!e&&N1&&!n.render){const r=n.template||lC(t).template;if(r){const{isCustomElement:a,compilerOptions:c}=t.appContext.config,{delimiters:s,compilerOptions:p}=n,_=uo(uo({isCustomElement:a,delimiters:s},c),p);n.render=N1(r,_)}}t.render=n.render||ed,_2&&_2(t)}Pf(t),Bg(),s7(t),Fg(),Sf()}function P7(t){return new Proxy(t.attrs,{get(e,i){return xu(t,"get","$attrs"),e[i]}})}function TD(t){const e=n=>{t.exposed=n||{}};let i;return{get attrs(){return i||(i=P7(t))},slots:t.slots,emit:t.emit,expose:e}}function Yb(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(XS(Ar(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in wv)return wv[i](t)},has(e,i){return i in e||i in wv}}))}function v2(t,e=!0){return Vn(t)?t.displayName||t.name:t.name||e&&t.__name}function A7(t){return Vn(t)&&"__vccOpts"in t}const Me=(t,e)=>MV(t,e,fg);function M7(){return null}function O7(){return null}function L7(t){}function D7(t,e){return null}function R7(){return SD().slots}function B7(){return SD().attrs}function SD(){const t=Kd();return t.setupContext||(t.setupContext=TD(t))}function F7(t,e){const i=dn(t)?t.reduce((n,r)=>(n[r]={},n),{}):t;for(const n in e){const r=i[n];r?dn(r)||Vn(r)?i[n]={type:r,default:e[n]}:r.default=e[n]:r===null&&(i[n]={default:e[n]})}return i}function $7(t,e){const i={};for(const n in t)e.includes(n)||Object.defineProperty(i,n,{enumerable:!0,get:()=>t[n]});return i}function N7(t){const e=Kd();let i=t();return Sf(),US(i)&&(i=i.catch(n=>{throw Pf(e),n})),[i,()=>Pf(e)]}function Ns(t,e,i){const n=arguments.length;return n===2?fs(e)&&!dn(e)?Eh(e)?w(t,null,[e]):w(t,e):w(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Eh(i)&&(i=[i]),w(t,e,i))}const CD=Symbol(""),kD=()=>qi(CD);function z7(){}function V7(t,e,i,n){const r=i[n];if(r&&ED(r,t))return r;const a=e();return a.memo=t.slice(),i[n]=a}function ED(t,e){const i=t.memo;if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(dg(i[n],e[n]))return!1;return Vp>0&&vu&&vu.push(t),!0}const ID="3.2.47",U7={createComponentInstance:yD,setupComponent:xD,renderComponentRoot:p1,setCurrentRenderingInstance:jv,isVNode:Eh,normalizeVNode:Wu},j7=U7,H7=null,G7=null,W7="http://www.w3.org/2000/svg",xp=typeof document<"u"?document:null,OA=xp&&xp.createElement("template"),q7={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const r=e?xp.createElementNS(W7,t):xp.createElement(t,i?{is:i}:void 0);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>xp.createTextNode(t),createComment:t=>xp.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xp.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,r,a){const c=i?i.previousSibling:e.lastChild;if(r&&(r===a||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===a||!(r=r.nextSibling)););else{OA.innerHTML=n?`<svg>${t}</svg>`:t;const s=OA.content;if(n){const p=s.firstChild;for(;p.firstChild;)s.appendChild(p.firstChild);s.removeChild(p)}e.insertBefore(s,i)}return[c?c.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function Z7(t,e,i){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function Y7(t,e,i){const n=t.style,r=$s(i);if(i&&!r){if(e&&!$s(e))for(const a in e)i[a]==null&&y2(n,a,"");for(const a in i)y2(n,a,i[a])}else{const a=n.display;r?e!==i&&(n.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=a)}}const LA=/\s*!important$/;function y2(t,e,i){if(dn(i))i.forEach(n=>y2(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=X7(t,e);LA.test(i)?t.setProperty(Sc(n),i.replace(LA,""),"important"):t[n]=i}}const DA=["Webkit","Moz","ms"],cT={};function X7(t,e){const i=cT[e];if(i)return i;let n=ll(e);if(n!=="filter"&&n in t)return cT[e]=n;n=Zd(n);for(let r=0;r<DA.length;r++){const a=DA[r]+n;if(a in t)return cT[e]=a}return e}const RA="http://www.w3.org/1999/xlink";function K7(t,e,i,n,r){if(n&&e.startsWith("xlink:"))i==null?t.removeAttributeNS(RA,e.slice(6,e.length)):t.setAttributeNS(RA,e,i);else{const a=F9(e);i==null||a&&!bL(i)?t.removeAttribute(e):t.setAttribute(e,a?"":i)}}function Q7(t,e,i,n,r,a,c){if(e==="innerHTML"||e==="textContent"){n&&c(n,r,a),t[e]=i??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=i;const p=i??"";(t.value!==p||t.tagName==="OPTION")&&(t.value=p),i==null&&t.removeAttribute(e);return}let s=!1;if(i===""||i==null){const p=typeof t[e];p==="boolean"?i=bL(i):i==null&&p==="string"?(i="",s=!0):p==="number"&&(i=0,s=!0)}try{t[e]=i}catch{}s&&t.removeAttribute(e)}function gh(t,e,i,n){t.addEventListener(e,i,n)}function J7(t,e,i,n){t.removeEventListener(e,i,n)}function eU(t,e,i,n,r=null){const a=t._vei||(t._vei={}),c=a[e];if(n&&c)c.value=n;else{const[s,p]=tU(e);if(n){const _=a[e]=rU(n,r);gh(t,s,_,p)}else c&&(J7(t,s,c,p),a[e]=void 0)}}const BA=/(?:Once|Passive|Capture)$/;function tU(t){let e;if(BA.test(t)){e={};let n;for(;n=t.match(BA);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Sc(t.slice(2)),e]}let dT=0;const iU=Promise.resolve(),nU=()=>dT||(iU.then(()=>dT=0),dT=Date.now());function rU(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Xu(sU(n,i.value),e,5,[n])};return i.value=t,i.attached=nU(),i}function sU(t,e){if(dn(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const FA=/^on[a-z]/,oU=(t,e,i,n,r=!1,a,c,s,p)=>{e==="class"?Z7(t,n,r):e==="style"?Y7(t,i,n):hy(e)?zS(e)||eU(t,e,i,n,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):aU(t,e,n,r))?Q7(t,e,n,a,c,s,p):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),K7(t,e,n,r))};function aU(t,e,i,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&FA.test(e)&&Vn(i)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||FA.test(e)&&$s(i)?!1:e in t}function PD(t,e){const i=qn(t);class n extends Xb{constructor(a){super(i,a,e)}}return n.def=i,n}const lU=t=>PD(t,HD),uU=typeof HTMLElement<"u"?HTMLElement:class{};class Xb extends uU{constructor(e,i={},n){super(),this._def=e,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Cn(()=>{this._connected||(V1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver(n=>{for(const r of n)this._setAttr(r.attributeName)}).observe(this,{attributes:!0});const e=(n,r=!1)=>{const{props:a,styles:c}=n;let s;if(a&&!dn(a))for(const p in a){const _=a[p];(_===Number||_&&_.type===Number)&&(p in this._props&&(this._props[p]=D1(this._props[p])),(s||(s=Object.create(null)))[ll(p)]=!0)}this._numberProps=s,r&&this._resolveProps(n),this._applyStyles(c),this._update()},i=this._def.__asyncLoader;i?i().then(n=>e(n,!0)):e(this._def)}_resolveProps(e){const{props:i}=e,n=dn(i)?i:Object.keys(i||{});for(const r of Object.keys(this))r[0]!=="_"&&n.includes(r)&&this._setProp(r,this[r],!0,!1);for(const r of n.map(ll))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(a){this._setProp(r,a)}})}_setAttr(e){let i=this.getAttribute(e);const n=ll(e);this._numberProps&&this._numberProps[n]&&(i=D1(i)),this._setProp(n,i,!1)}_getProp(e){return this._props[e]}_setProp(e,i,n=!0,r=!0){i!==this._props[e]&&(this._props[e]=i,r&&this._instance&&this._update(),n&&(i===!0?this.setAttribute(Sc(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(Sc(e),i+""):i||this.removeAttribute(Sc(e))))}_update(){V1(this._createVNode(),this.shadowRoot)}_createVNode(){const e=w(this._def,uo({},this._props));return this._instance||(e.ce=i=>{this._instance=i,i.isCE=!0;const n=(a,c)=>{this.dispatchEvent(new CustomEvent(a,{detail:c}))};i.emit=(a,...c)=>{n(a,c),Sc(a)!==a&&n(Sc(a),c)};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof Xb){i.parent=r._instance,i.provides=r._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(i=>{const n=document.createElement("style");n.textContent=i,this.shadowRoot.appendChild(n)})}}function cU(t="$style"){{const e=Kd();if(!e)return ss;const i=e.type.__cssModules;if(!i)return ss;const n=i[t];return n||ss}}function dU(t){const e=Kd();if(!e)return;const i=e.ut=(r=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(a=>x2(a,r))},n=()=>{const r=t(e.proxy);b2(e.subTree,r),i(r)};ZL(n),Fn(()=>{const r=new MutationObserver(n);r.observe(e.subTree.el.parentNode,{childList:!0}),Nf(()=>r.disconnect())})}function b2(t,e){if(t.shapeFlag&128){const i=t.suspense;t=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{b2(i.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)x2(t.el,e);else if(t.type===Oi)t.children.forEach(i=>b2(i,e));else if(t.type===Dp){let{el:i,anchor:n}=t;for(;i&&(x2(i,e),i!==n);)i=i.nextSibling}}function x2(t,e){if(t.nodeType===1){const i=t.style;for(const n in e)i.setProperty(`--${n}`,e[n])}}const hf="transition",Z_="animation",Nl=(t,{slots:e})=>Ns(iC,MD(t),e);Nl.displayName="Transition";const AD={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hU=Nl.props=uo({},iC.props,AD),pp=(t,e=[])=>{dn(t)?t.forEach(i=>i(...e)):t&&t(...e)},$A=t=>t?dn(t)?t.some(e=>e.length>1):t.length>1:!1;function MD(t){const e={};for(const Ie in t)Ie in AD||(e[Ie]=t[Ie]);if(t.css===!1)return e;const{name:i="v",type:n,duration:r,enterFromClass:a=`${i}-enter-from`,enterActiveClass:c=`${i}-enter-active`,enterToClass:s=`${i}-enter-to`,appearFromClass:p=a,appearActiveClass:_=c,appearToClass:b=s,leaveFromClass:S=`${i}-leave-from`,leaveActiveClass:E=`${i}-leave-active`,leaveToClass:I=`${i}-leave-to`}=t,R=fU(r),V=R&&R[0],q=R&&R[1],{onBeforeEnter:U,onEnter:H,onEnterCancelled:Z,onLeave:ne,onLeaveCancelled:ie,onBeforeAppear:oe=U,onAppear:pe=H,onAppearCancelled:de=Z}=e,fe=(Ie,Oe,ke)=>{gf(Ie,Oe?b:s),gf(Ie,Oe?_:c),ke&&ke()},ge=(Ie,Oe)=>{Ie._isLeaving=!1,gf(Ie,S),gf(Ie,I),gf(Ie,E),Oe&&Oe()},we=Ie=>(Oe,ke)=>{const Ee=Ie?pe:H,Qe=()=>fe(Oe,Ie,ke);pp(Ee,[Oe,Qe]),NA(()=>{gf(Oe,Ie?p:a),ph(Oe,Ie?b:s),$A(Ee)||zA(Oe,n,V,Qe)})};return uo(e,{onBeforeEnter(Ie){pp(U,[Ie]),ph(Ie,a),ph(Ie,c)},onBeforeAppear(Ie){pp(oe,[Ie]),ph(Ie,p),ph(Ie,_)},onEnter:we(!1),onAppear:we(!0),onLeave(Ie,Oe){Ie._isLeaving=!0;const ke=()=>ge(Ie,Oe);ph(Ie,S),LD(),ph(Ie,E),NA(()=>{Ie._isLeaving&&(gf(Ie,S),ph(Ie,I),$A(ne)||zA(Ie,n,q,ke))}),pp(ne,[Ie,ke])},onEnterCancelled(Ie){fe(Ie,!1),pp(Z,[Ie])},onAppearCancelled(Ie){fe(Ie,!0),pp(de,[Ie])},onLeaveCancelled(Ie){ge(Ie),pp(ie,[Ie])}})}function fU(t){if(t==null)return null;if(fs(t))return[hT(t.enter),hT(t.leave)];{const e=hT(t);return[e,e]}}function hT(t){return D1(t)}function ph(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t._vtc||(t._vtc=new Set)).add(e)}function gf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:i}=t;i&&(i.delete(e),i.size||(t._vtc=void 0))}function NA(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let pU=0;function zA(t,e,i,n){const r=t._endId=++pU,a=()=>{r===t._endId&&n()};if(i)return setTimeout(a,i);const{type:c,timeout:s,propCount:p}=OD(t,e);if(!c)return n();const _=c+"end";let b=0;const S=()=>{t.removeEventListener(_,E),a()},E=I=>{I.target===t&&++b>=p&&S()};setTimeout(()=>{b<p&&S()},s+1),t.addEventListener(_,E)}function OD(t,e){const i=window.getComputedStyle(t),n=R=>(i[R]||"").split(", "),r=n(`${hf}Delay`),a=n(`${hf}Duration`),c=VA(r,a),s=n(`${Z_}Delay`),p=n(`${Z_}Duration`),_=VA(s,p);let b=null,S=0,E=0;e===hf?c>0&&(b=hf,S=c,E=a.length):e===Z_?_>0&&(b=Z_,S=_,E=p.length):(S=Math.max(c,_),b=S>0?c>_?hf:Z_:null,E=b?b===hf?a.length:p.length:0);const I=b===hf&&/\b(transform|all)(,|$)/.test(n(`${hf}Property`).toString());return{type:b,timeout:S,propCount:E,hasTransform:I}}function VA(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,n)=>UA(i)+UA(t[n])))}function UA(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function LD(){return document.body.offsetHeight}const DD=new WeakMap,RD=new WeakMap,BD={name:"TransitionGroup",props:uo({},hU,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=Kd(),n=tC();let r,a;return qb(()=>{if(!r.length)return;const c=t.moveClass||`${t.name||"v"}-move`;if(!yU(r[0].el,i.vnode.el,c))return;r.forEach(gU),r.forEach(_U);const s=r.filter(vU);LD(),s.forEach(p=>{const _=p.el,b=_.style;ph(_,c),b.transform=b.webkitTransform=b.transitionDuration="";const S=_._moveCb=E=>{E&&E.target!==_||(!E||/transform$/.test(E.propertyName))&&(_.removeEventListener("transitionend",S),_._moveCb=null,gf(_,c))};_.addEventListener("transitionend",S)})}),()=>{const c=Wn(t),s=MD(c);let p=c.tag||Oi;r=a,a=e.default?Gb(e.default()):[];for(let _=0;_<a.length;_++){const b=a[_];b.key!=null&&zp(b,hg(b,s,n,i))}if(r)for(let _=0;_<r.length;_++){const b=r[_];zp(b,hg(b,s,n,i)),DD.set(b,b.el.getBoundingClientRect())}return w(p,null,a)}}},mU=t=>delete t.mode;BD.props;const FD=BD;function gU(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function _U(t){RD.set(t,t.el.getBoundingClientRect())}function vU(t){const e=DD.get(t),i=RD.get(t),n=e.left-i.left,r=e.top-i.top;if(n||r){const a=t.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${r}px)`,a.transitionDuration="0s",t}}function yU(t,e,i){const n=t.cloneNode();t._vtc&&t._vtc.forEach(c=>{c.split(/\s+/).forEach(s=>s&&n.classList.remove(s))}),i.split(/\s+/).forEach(c=>c&&n.classList.add(c)),n.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(n);const{hasTransform:a}=OD(n);return r.removeChild(n),a}const Af=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dn(e)?i=>eg(e,i):e};function bU(t){t.target.composing=!0}function jA(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Up={created(t,{modifiers:{lazy:e,trim:i,number:n}},r){t._assign=Af(r);const a=n||r.props&&r.props.type==="number";gh(t,e?"change":"input",c=>{if(c.target.composing)return;let s=t.value;i&&(s=s.trim()),a&&(s=L1(s)),t._assign(s)}),i&&gh(t,"change",()=>{t.value=t.value.trim()}),e||(gh(t,"compositionstart",bU),gh(t,"compositionend",jA),gh(t,"change",jA))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:n,number:r}},a){if(t._assign=Af(a),t.composing||document.activeElement===t&&t.type!=="range"&&(i||n&&t.value.trim()===e||(r||t.type==="number")&&L1(t.value)===e))return;const c=e??"";t.value!==c&&(t.value=c)}},pC={deep:!0,created(t,e,i){t._assign=Af(i),gh(t,"change",()=>{const n=t._modelValue,r=pg(t),a=t.checked,c=t._assign;if(dn(n)){const s=Lb(n,r),p=s!==-1;if(a&&!p)c(n.concat(r));else if(!a&&p){const _=[...n];_.splice(s,1),c(_)}}else if(qp(n)){const s=new Set(n);a?s.add(r):s.delete(r),c(s)}else c($D(t,a))})},mounted:HA,beforeUpdate(t,e,i){t._assign=Af(i),HA(t,e,i)}};function HA(t,{value:e,oldValue:i},n){t._modelValue=e,dn(e)?t.checked=Lb(e,n.props.value)>-1:qp(e)?t.checked=e.has(n.props.value):e!==i&&(t.checked=kf(e,$D(t,!0)))}const mC={created(t,{value:e},i){t.checked=kf(e,i.props.value),t._assign=Af(i),gh(t,"change",()=>{t._assign(pg(t))})},beforeUpdate(t,{value:e,oldValue:i},n){t._assign=Af(n),e!==i&&(t.checked=kf(e,n.props.value))}},z1={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const r=qp(e);gh(t,"change",()=>{const a=Array.prototype.filter.call(t.options,c=>c.selected).map(c=>i?L1(pg(c)):pg(c));t._assign(t.multiple?r?new Set(a):a:a[0])}),t._assign=Af(n)},mounted(t,{value:e}){GA(t,e)},beforeUpdate(t,e,i){t._assign=Af(i)},updated(t,{value:e}){GA(t,e)}};function GA(t,e){const i=t.multiple;if(!(i&&!dn(e)&&!qp(e))){for(let n=0,r=t.options.length;n<r;n++){const a=t.options[n],c=pg(a);if(i)dn(e)?a.selected=Lb(e,c)>-1:a.selected=e.has(c);else if(kf(pg(a),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function pg(t){return"_value"in t?t._value:t.value}function $D(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const ND={created(t,e,i){X0(t,e,i,null,"created")},mounted(t,e,i){X0(t,e,i,null,"mounted")},beforeUpdate(t,e,i,n){X0(t,e,i,n,"beforeUpdate")},updated(t,e,i,n){X0(t,e,i,n,"updated")}};function zD(t,e){switch(t){case"SELECT":return z1;case"TEXTAREA":return Up;default:switch(e){case"checkbox":return pC;case"radio":return mC;default:return Up}}}function X0(t,e,i,n,r){const c=zD(t.tagName,i.props&&i.props.type)[r];c&&c(t,e,i,n)}function xU(){Up.getSSRProps=({value:t})=>({value:t}),mC.getSSRProps=({value:t},e)=>{if(e.props&&kf(e.props.value,t))return{checked:!0}},pC.getSSRProps=({value:t},e)=>{if(dn(t)){if(e.props&&Lb(t,e.props.value)>-1)return{checked:!0}}else if(qp(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},ND.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const i=zD(e.type.toUpperCase(),e.props&&e.props.type);if(i.getSSRProps)return i.getSSRProps(t,e)}}const wU=["ctrl","shift","alt","meta"],TU={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wU.some(i=>t[`${i}Key`]&&!e.includes(i))},zl=(t,e)=>(i,...n)=>{for(let r=0;r<e.length;r++){const a=TU[e[r]];if(a&&a(i,e))return}return t(i,...n)},SU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vl=(t,e)=>i=>{if(!("key"in i))return;const n=Sc(i.key);if(e.some(r=>r===n||SU[r]===n))return t(i)},Qu={beforeMount(t,{value:e},{transition:i}){t._vod=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):Y_(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:n}){!e!=!i&&(n?e?(n.beforeEnter(t),Y_(t,!0),n.enter(t)):n.leave(t,()=>{Y_(t,!1)}):Y_(t,e))},beforeUnmount(t,{value:e}){Y_(t,e)}};function Y_(t,e){t.style.display=e?t._vod:"none"}function CU(){Qu.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const VD=uo({patchProp:oU},q7);let Cv,WA=!1;function UD(){return Cv||(Cv=hD(VD))}function jD(){return Cv=WA?Cv:fD(VD),WA=!0,Cv}const V1=(...t)=>{UD().render(...t)},HD=(...t)=>{jD().hydrate(...t)},GD=(...t)=>{const e=UD().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=WD(n);if(!r)return;const a=e._component;!Vn(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=i(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},e},kU=(...t)=>{const e=jD().createApp(...t),{mount:i}=e;return e.mount=n=>{const r=WD(n);if(r)return i(r,!0,r instanceof SVGElement)},e};function WD(t){return $s(t)?document.querySelector(t):t}let qA=!1;const EU=()=>{qA||(qA=!0,xU(),CU())},IU=()=>{},PU=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:iC,Comment:ga,EffectScope:HS,Fragment:Oi,KeepAlive:e7,ReactiveEffect:py,Static:Dp,Suspense:HV,Teleport:dC,Text:If,Transition:Nl,TransitionGroup:FD,VueElement:Xb,assertNumber:LV,callWithAsyncErrorHandling:Xu,callWithErrorHandling:bh,camelize:ll,capitalize:Zd,cloneVNode:nd,compatUtils:G7,compile:IU,computed:Me,createApp:GD,createBlock:He,createCommentVNode:We,createElementBlock:ti,createElementVNode:Pe,createHydrationRenderer:fD,createPropsRestProxy:$7,createRenderer:hD,createSSRApp:kU,createSlots:n7,createStaticVNode:$g,createTextVNode:ye,createVNode:w,customRef:IV,defineAsyncComponent:QV,defineComponent:qn,defineCustomElement:PD,defineEmits:O7,defineExpose:L7,defineProps:M7,defineSSRCustomElement:lU,get devtools(){return Um},effect:Y9,effectScope:fy,getCurrentInstance:Kd,getCurrentScope:CL,getTransitionRawChildren:Gb,guardReactiveProps:hC,h:Ns,handleError:Yp,hydrate:HD,initCustomFormatter:z7,initDirectivesForSSR:EU,inject:qi,isMemoSame:ED,isProxy:qS,isReactive:Op,isReadonly:Np,isRef:Bs,isRuntimeOnly:I7,isShallow:Nv,isVNode:Eh,markRaw:Ar,mergeDefaults:F7,mergeProps:Mi,nextTick:Cn,normalizeClass:Zs,normalizeProps:yL,normalizeStyle:ir,onActivated:nC,onBeforeMount:_y,onBeforeUnmount:as,onBeforeUpdate:sC,onDeactivated:rC,onErrorCaptured:tD,onMounted:Fn,onRenderTracked:eD,onRenderTriggered:JL,onScopeDispose:bu,onServerPrefetch:QL,onUnmounted:Nf,onUpdated:qb,openBlock:be,popScopeId:Xd,provide:Mn,proxyRefs:XS,pushScopeId:Yd,queuePostFlushCb:QS,reactive:Bo,readonly:Zp,ref:lt,registerRuntimeCompiler:E7,render:V1,renderList:Zr,renderSlot:$d,resolveComponent:ue,resolveDirective:Ba,resolveDynamicComponent:nD,resolveFilter:H7,resolveTransitionHooks:hg,setBlockTracking:m2,setDevtoolsHook:HL,setTransitionHooks:zp,shallowReactive:$L,shallowReadonly:TV,shallowRef:Tf,ssrContextKey:CD,ssrUtils:j7,stop:X9,toDisplayString:Zt,toHandlerKey:xv,toHandlers:m1,toRaw:Wn,toRef:li,toRefs:zb,transformVNodeArgs:w7,triggerRef:CV,unref:Da,useAttrs:B7,useCssModule:cU,useCssVars:dU,useSSRContext:kD,useSlots:R7,useTransitionState:tC,vModelCheckbox:pC,vModelDynamic:ND,vModelRadio:mC,vModelSelect:z1,vModelText:Up,vShow:Qu,version:ID,warn:OV,watch:Fi,watchEffect:Xs,watchPostEffect:ZL,watchSyncEffect:YV,withAsyncContext:N7,withCtx:D,withDefaults:D7,withDirectives:Br,withKeys:Vl,withMemo:V7,withModifiers:zl,withScopeId:Hb},Symbol.toStringTag,{value:"Module"}));var AU=!1;/*!
  * pinia v2.0.34
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const MU=Symbol();var ZA;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ZA||(ZA={}));function OU(){const t=fy(!0),e=t.run(()=>lt({}));let i=[],n=[];const r=Ar({install(a){r._a=a,a.provide(MU,r),a.config.globalProperties.$pinia=r,n.forEach(c=>i.push(c)),n=[]},use(a){return!this._a&&!AU?n.push(a):i.push(a),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return r}function YA(t,e,i){LU(t,e),e.set(t,i)}function LU(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function DU(t,e,i){var n=qD(t,e,"set");return RU(t,n,i),i}function RU(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}function mp(t,e){var i=qD(t,e,"get");return BU(t,i)}function qD(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function BU(t,e){return e.get?e.get.call(t):e.value}function ZD(t,e,i){const n=e.length-1;if(n<0)return t===void 0?i:t;for(let r=0;r<n;r++){if(t==null)return i;t=t[e[r]]}return t==null||t[e[n]]===void 0?i:t[e[n]]}function Xp(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const i=Object.keys(t);return i.length!==Object.keys(e).length?!1:i.every(n=>Xp(t[n],e[n]))}function mg(t,e,i){return t==null||!e||typeof e!="string"?i:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),ZD(t,e.split("."),i))}function Cc(t,e,i){if(e==null)return t===void 0?i:t;if(t!==Object(t)){if(typeof e!="function")return i;const r=e(t,i);return typeof r>"u"?i:r}if(typeof e=="string")return mg(t,e,i);if(Array.isArray(e))return ZD(t,e,i);if(typeof e!="function")return i;const n=e(t,i);return typeof n>"u"?i:n}function yh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(i,n)=>e+n)}function Xi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function w2(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function FU(t){return t==null?void 0:t.$el}const XA=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),T2=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function YD(t){return Object.keys(t)}function Kp(t,e){const i=Object.create(null),n=Object.create(null);for(const r in t)e.some(a=>a instanceof RegExp?a.test(r):a===r)?i[r]=t[r]:n[r]=t[r];return[i,n]}function Qd(t,e){const i={...t};return e.forEach(n=>delete i[n]),i}function Qp(t){return Kp(t,["class","style","id",/^data-/])}function kc(t){return t==null?[]:Array.isArray(t)?t:[t]}function Yu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(i,t))}function KA(t){const e=t.toString().trim();return e.includes(".")?e.length-e.indexOf(".")-1:0}function QA(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+i.repeat(Math.max(0,e-t.length))}function $U(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let n=0;for(;n<t.length;)i.push(t.substr(n,e)),n+=e;return i}function JA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(t<e)return`${t} B`;const i=e===1024?["Ki","Mi","Gi"]:["k","M","G"];let n=-1;for(;Math.abs(t)>=e&&n<i.length-1;)t/=e,++n;return`${t.toFixed(1)} ${i[n]}B`}function Ih(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n={};for(const r in t)n[r]=t[r];for(const r in e){const a=t[r],c=e[r];if(w2(a)&&w2(c)){n[r]=Ih(a,c,i);continue}if(Array.isArray(a)&&Array.isArray(c)&&i){n[r]=i(a,c);continue}n[r]=c}return n}function Cf(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Cf.cache.has(t))return Cf.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Cf.cache.set(t,e),e}Cf.cache=new Map;function kv(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(i=>kv(t,i)).flat(1);if(Array.isArray(e.children))return e.children.map(i=>kv(t,i)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return kv(t,e.component.subTree).flat(1)}return[]}var K0=new WeakMap,Am=new WeakMap;class NU{constructor(e){YA(this,K0,{writable:!0,value:[]}),YA(this,Am,{writable:!0,value:0}),this.size=e}push(e){mp(this,K0)[mp(this,Am)]=e,DU(this,Am,(mp(this,Am)+1)%this.size)}values(){return mp(this,K0).slice(mp(this,Am)).concat(mp(this,K0).slice(0,mp(this,Am)))}}function zU(t){return"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}function gC(t){const e=Bo({}),i=Me(t);return Xs(()=>{for(const n in i.value)e[n]=i.value[n]},{flush:"sync"}),zb(e)}function U1(t,e){return t.includes(e)}const VU=/^on[^a-z]/,XD=t=>VU.test(t),xh=()=>[Function,Array];function e3(t,e){return e="on"+Zd(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function j1(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(Array.isArray(t))for(const r of t)r(...i);else typeof t=="function"&&t(...i)}const KD=["top","bottom"],UU=["start","end","left","right"];function S2(t,e){let[i,n]=t.split(" ");return n||(n=U1(KD,i)?"start":U1(UU,i)?"top":"center"),{side:C2(i,e),align:C2(n,e)}}function C2(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function fT(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function pT(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function t3(t){return{side:t.align,align:t.side}}function i3(t){return U1(KD,t.side)?"y":"x"}class ng{constructor(e){let{x:i,y:n,width:r,height:a}=e;this.x=i,this.y=n,this.width=r,this.height=a}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function n3(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function _C(t){const e=t.getBoundingClientRect(),i=getComputedStyle(t),n=i.transform;if(n){let r,a,c,s,p;if(n.startsWith("matrix3d("))r=n.slice(9,-1).split(/, /),a=+r[0],c=+r[5],s=+r[12],p=+r[13];else if(n.startsWith("matrix("))r=n.slice(7,-1).split(/, /),a=+r[0],c=+r[3],s=+r[4],p=+r[5];else return new ng(e);const _=i.transformOrigin,b=e.x-s-(1-a)*parseFloat(_),S=e.y-p-(1-c)*parseFloat(_.slice(_.indexOf(" ")+1)),E=a?e.width/a:t.offsetWidth+1,I=c?e.height/c:t.offsetHeight+1;return new ng({x:b,y:S,width:E,height:I})}else return new ng(e)}function Sp(t,e,i){if(typeof t.animate>"u")return{finished:Promise.resolve()};let n;try{n=t.animate(e,i)}catch{return{finished:Promise.resolve()}}return typeof n.finished>"u"&&(n.finished=new Promise(r=>{n.onfinish=()=>{r(n)}})),n}function QD(t,e,i){if(i&&(e={__isVue:!0,$parent:i,$options:e}),e){if(e.$_alreadyWarned=e.$_alreadyWarned||[],e.$_alreadyWarned.includes(t))return;e.$_alreadyWarned.push(t)}return`[Vuetify] ${t}`+(e?GU(e):"")}function Rp(t,e,i){const n=QD(t,e,i);n!=null&&console.warn(n)}function k2(t,e,i){const n=QD(t,e,i);n!=null&&console.error(n)}const jU=/(?:^|[-_])(\w)/g,HU=t=>t.replace(jU,e=>e.toUpperCase()).replace(/[-_]/g,"");function mT(t,e){if(t.$root===t)return"<Root>";const i=typeof t=="function"&&t.cid!=null?t.options:t.__isVue?t.$options||t.constructor.options:t||{};let n=i.name||i._componentTag;const r=i.__file;if(!n&&r){const a=r.match(/([^/\\]+)\.vue$/);n=a==null?void 0:a[1]}return(n?`<${HU(n)}>`:"<Anonymous>")+(r&&e!==!1?` at ${r}`:"")}function GU(t){if(t.__isVue&&t.$parent){const e=[];let i=0;for(;t;){if(e.length>0){const n=e[e.length-1];if(n.constructor===t.constructor){i++,t=t.$parent;continue}else i>0&&(e[e.length-1]=[n,i],i=0)}e.push(t),t=t.$parent}return`

found in

`+e.map((n,r)=>`${r===0?"---> ":" ".repeat(5+r*2)}${Array.isArray(n)?`${mT(n[0])}... (${n[1]} recursive calls)`:mT(n)}`).join(`
`)}else return`

(found in ${mT(t)})`}const WU=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],qU=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,ZU=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],YU=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function JD(t){const e=Array(3),i=qU,n=WU;for(let r=0;r<3;++r)e[r]=Math.round(Yu(i(n[r][0]*t[0]+n[r][1]*t[1]+n[r][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function vC(t){let{r:e,g:i,b:n}=t;const r=[0,0,0],a=YU,c=ZU;e=a(e/255),i=a(i/255),n=a(n/255);for(let s=0;s<3;++s)r[s]=c[s][0]*e+c[s][1]*i+c[s][2]*n;return r}const H1=.20689655172413793,XU=t=>t>H1**3?Math.cbrt(t):t/(3*H1**2)+4/29,KU=t=>t>H1?t**3:3*H1**2*(t-4/29);function e4(t){const e=XU,i=e(t[1]);return[116*i-16,500*(e(t[0]/.95047)-i),200*(i-e(t[2]/1.08883))]}function t4(t){const e=KU,i=(t[0]+16)/116;return[e(i+t[1]/500)*.95047,e(i),e(i-t[2]/200)*1.08883]}function r3(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function Cp(t){if(typeof t=="number")return(isNaN(t)||t<0||t>16777215)&&Rp(`'${t}' is not a valid hex color`),{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;[3,4].includes(e.length)?e=e.split("").map(n=>n+n).join(""):[6,8].includes(e.length)||Rp(`'${t}' is not a valid hex(a) color`);const i=parseInt(e,16);return(isNaN(i)||i<0||i>4294967295)&&Rp(`'${t}' is not a valid hex(a) color`),o4(e)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${t==null?t:t.constructor.name} instead`)}function Kb(t){const{h:e,s:i,v:n,a:r}=t,a=s=>{const p=(s+e/60)%6;return n-n*i*Math.max(Math.min(p,4-p,1),0)},c=[a(5),a(3),a(1)].map(s=>Math.round(s*255));return{r:c[0],g:c[1],b:c[2],a:r}}function yC(t){if(!t)return{h:0,s:1,v:1,a:1};const e=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(e,i,n),a=Math.min(e,i,n);let c=0;r!==a&&(r===e?c=60*(0+(i-n)/(r-a)):r===i?c=60*(2+(n-e)/(r-a)):r===n&&(c=60*(4+(e-i)/(r-a)))),c<0&&(c=c+360);const s=r===0?0:(r-a)/r,p=[c,s,r];return{h:p[0],s:p[1],v:p[2],a:t.a}}function i4(t){const{h:e,s:i,v:n,a:r}=t,a=n-n*i/2,c=a===1||a===0?0:(n-a)/Math.min(a,1-a);return{h:e,s:c,l:a,a:r}}function n4(t){const{h:e,s:i,l:n,a:r}=t,a=n+i*Math.min(n,1-n),c=a===0?0:2-2*n/a;return{h:e,s:c,v:a,a:r}}function QU(t){let{r:e,g:i,b:n,a:r}=t;return r===void 0?`rgb(${e}, ${i}, ${n})`:`rgba(${e}, ${i}, ${n}, ${r})`}function r4(t){return QU(Kb(t))}function Q0(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function s4(t){let{r:e,g:i,b:n,a:r}=t;return`#${[Q0(e),Q0(i),Q0(n),r!==void 0?Q0(Math.round(r*255)):""].join("")}`}function o4(t){t=u4(t);let[e,i,n,r]=$U(t,2).map(a=>parseInt(a,16));return r=r===void 0?r:r/255,{r:e,g:i,b:n,a:r}}function a4(t){const e=o4(t);return yC(e)}function l4(t){return s4(Kb(t))}function u4(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=QA(QA(t,6),8,"F")),t}function JU(t,e){const i=e4(vC(t));return i[0]=i[0]+e*10,JD(t4(i))}function ej(t,e){const i=e4(vC(t));return i[0]=i[0]-e*10,JD(t4(i))}function E2(t){const e=Cp(t);return vC(e)[1]}function tj(t,e){const i=E2(t),n=E2(e),r=Math.max(i,n),a=Math.min(i,n);return(r+.05)/(a+.05)}function Fa(t,e){const i=Kd();if(!i)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return i}function Nh(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=Fa(t).type;return Cf((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}let c4=0,_1=new WeakMap;function cl(){const t=Fa("getUid");if(_1.has(t))return _1.get(t);{const e=c4++;return _1.set(t,e),e}}cl.reset=()=>{c4=0,_1=new WeakMap};function ij(t){const{provides:e}=Fa("injectSelf");if(e&&t in e)return e[t]}function gn(t,e){return i=>Object.keys(t).reduce((n,r)=>{const c=typeof t[r]=="object"&&t[r]!=null&&!Array.isArray(t[r])?t[r]:{type:t[r]};return i&&r in i?n[r]={...c,default:i[r]}:n[r]=c,e&&!n[r].source&&(n[r].source=e),n},{})}function jp(t,e){let i;function n(){i=fy(),i.run(()=>e.length?e(()=>{i==null||i.stop(),n()}):e())}Fi(t,r=>{r&&!i?n():r||(i==null||i.stop(),i=void 0)},{immediate:!0}),bu(()=>{i==null||i.stop()})}function nj(t,e){var i,n;return typeof((i=t.props)==null?void 0:i[e])<"u"||typeof((n=t.props)==null?void 0:n[Cf(e)])<"u"}function wu(t){if(t._setup=t._setup??t.setup,!t.name)return Rp("The component is missing an explicit name, unable to generate default prop value"),t;if(t._setup){t.props=gn(t.props??{},Cf(t.name))();const e=Object.keys(t.props);t.filterProps=function(n){return Kp(n,e)},t.props._as=String,t.setup=function(n,r){const a=f4();if(!a.value)return t._setup(n,r);const c=Kd(),s=Me(()=>a.value[n._as??t.name]),p=new Proxy(n,{get(S,E){var R,V;const I=Reflect.get(S,E);return typeof E=="string"&&!nj(c.vnode,E)?((R=s.value)==null?void 0:R[E])??((V=a.value.global)==null?void 0:V[E])??I:I}}),_=Tf();Xs(()=>{if(s.value){const S=Object.entries(s.value).filter(E=>{let[I]=E;return I.startsWith(I[0].toUpperCase())});S.length&&(_.value=Object.fromEntries(S))}});const b=t._setup(p,r);return jp(_,()=>{var S;co(Ih(((S=ij(Wv))==null?void 0:S.value)??{},_.value))}),b}}return t}function yi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?wu:qn)(e)}function rj(t,e){return e.props=t,e}function od(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",i=arguments.length>2?arguments[2]:void 0;return yi()({name:i??Zd(ll(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e}},setup(n,r){let{slots:a}=r;return()=>{var c;return Ns(n.tag,{class:t},(c=a.default)==null?void 0:c.call(a))}}})}function d4(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const Gv="cubic-bezier(0.4, 0, 0.2, 1)",sj="cubic-bezier(0.0, 0, 0.2, 1)",oj="cubic-bezier(0.4, 0, 1, 1)";function h4(t){for(;t;){if(bC(t))return t;t=t.parentElement}return document.scrollingElement}function G1(t,e){const i=[];if(e&&t&&!e.contains(t))return i;for(;t&&(bC(t)&&i.push(t),t!==e);)t=t.parentElement;return i}function bC(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}const Eo=typeof window<"u",xC=Eo&&"IntersectionObserver"in window,aj=Eo&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),I2=Eo&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports("selector(:focus-visible)");function lj(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function Pi(t){const e=Fa("useRender");e.render=t}const Wv=Symbol.for("vuetify:defaults");function uj(t){return lt(t)}function f4(){const t=qi(Wv);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function co(t,e){const i=f4(),n=lt(t),r=Me(()=>{if(Da(e==null?void 0:e.disabled))return i.value;const c=Da(e==null?void 0:e.scoped),s=Da(e==null?void 0:e.reset),p=Da(e==null?void 0:e.root);let _=Ih(n.value,{prev:i.value});if(c)return _;if(s||p){const b=Number(s||1/0);for(let S=0;S<=b&&!(!_||!("prev"in _));S++)_=_.prev;return _}return _.prev?Ih(_.prev,_):_});return Mn(Wv,r),r}const Qb=["sm","md","lg","xl","xxl"],P2=Symbol.for("vuetify:display"),s3={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},cj=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s3;return Ih(s3,t)};function o3(t){return Eo&&!t?window.innerWidth:0}function a3(t){return Eo&&!t?window.innerHeight:0}function l3(t){const e=Eo&&!t?window.navigator.userAgent:"ssr";function i(R){return!!e.match(R)}const n=i(/android/i),r=i(/iphone|ipad|ipod/i),a=i(/cordova/i),c=i(/electron/i),s=i(/chrome/i),p=i(/edge/i),_=i(/firefox/i),b=i(/opera/i),S=i(/win/i),E=i(/mac/i),I=i(/linux/i);return{android:n,ios:r,cordova:a,electron:c,chrome:s,edge:p,firefox:_,opera:b,win:S,mac:E,linux:I,touch:aj,ssr:e==="ssr"}}function dj(t,e){const{thresholds:i,mobileBreakpoint:n}=cj(t),r=lt(a3(e)),a=Tf(l3(e)),c=Bo({}),s=lt(o3(e));function p(){r.value=a3(),s.value=o3()}function _(){p(),a.value=l3()}return Xs(()=>{const b=s.value<i.sm,S=s.value<i.md&&!b,E=s.value<i.lg&&!(S||b),I=s.value<i.xl&&!(E||S||b),R=s.value<i.xxl&&!(I||E||S||b),V=s.value>=i.xxl,q=b?"xs":S?"sm":E?"md":I?"lg":R?"xl":"xxl",U=typeof n=="number"?n:i[n],H=s.value<U;c.xs=b,c.sm=S,c.md=E,c.lg=I,c.xl=R,c.xxl=V,c.smAndUp=!b,c.mdAndUp=!(b||S),c.lgAndUp=!(b||S||E),c.xlAndUp=!(b||S||E||I),c.smAndDown=!(E||I||R||V),c.mdAndDown=!(I||R||V),c.lgAndDown=!(R||V),c.xlAndDown=!V,c.name=q,c.height=r.value,c.width=s.value,c.mobile=H,c.mobileBreakpoint=n,c.platform=a.value,c.thresholds=i}),Eo&&window.addEventListener("resize",p,{passive:!0}),{...zb(c),update:_,ssr:!!e}}function Ng(){const t=qi(P2);if(!t)throw new Error("Could not find Vuetify display injection");return t}const hj={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},fj={component:t=>Ns(wC,{...t,class:"mdi"})},On=[String,Function,Object],A2=Symbol.for("vuetify:icons"),Jb=gn({icon:{type:On},tag:{type:String,required:!0}},"icon"),M2=yi()({name:"VComponentIcon",props:Jb(),setup(t,e){let{slots:i}=e;return()=>w(t.tag,null,{default:()=>{var n;return[t.icon?w(t.icon,null,null):(n=i.default)==null?void 0:n.call(i)]}})}}),p4=wu({name:"VSvgIcon",inheritAttrs:!1,props:Jb(),setup(t,e){let{attrs:i}=e;return()=>w(t.tag,Mi(i,{style:null}),{default:()=>[w("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[w("path",{d:t.icon},null)])]})}}),pj=wu({name:"VLigatureIcon",props:Jb(),setup(t){return()=>w(t.tag,null,{default:()=>[t.icon]})}}),wC=wu({name:"VClassIcon",props:Jb(),setup(t){return()=>w(t.tag,{class:t.icon},null)}}),mj={svg:{component:p4},class:{component:wC}};function gj(t){return Ih({defaultSet:"mdi",sets:{...mj,mdi:fj},aliases:hj},t)}const _j=t=>{const e=qi(A2);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:Me(()=>{var p;const n=Bs(t)?t.value:t.icon;if(!n)return{component:M2};let r=n;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=(p=e.aliases)==null?void 0:p[r.slice(1)])),!r)throw new Error(`Could not find aliased icon "${n}"`);if(typeof r!="string")return{component:M2,icon:r};const a=Object.keys(e.sets).find(_=>typeof r=="string"&&r.startsWith(`${_}:`)),c=a?r.slice(a.length+1):r;return{component:e.sets[a??e.defaultSet].component,icon:c}})}};function Pn(t,e,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S=>S,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:S=>S;const a=Fa("useProxiedModel"),c=lt(t[e]!==void 0?t[e]:i),s=Cf(e),_=Me(s!==e?()=>{var S,E,I,R;return t[e],!!(((S=a.vnode.props)!=null&&S.hasOwnProperty(e)||(E=a.vnode.props)!=null&&E.hasOwnProperty(s))&&((I=a.vnode.props)!=null&&I.hasOwnProperty(`onUpdate:${e}`)||(R=a.vnode.props)!=null&&R.hasOwnProperty(`onUpdate:${s}`)))}:()=>{var S,E;return t[e],!!((S=a.vnode.props)!=null&&S.hasOwnProperty(e)&&((E=a.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${e}`)))});jp(()=>!_.value,()=>{Fi(()=>t[e],S=>{c.value=S})});const b=Me({get(){const S=t[e];return n(_.value?S:c.value)},set(S){const E=r(S),I=Wn(_.value?t[e]:c.value);I===E||n(I)===S||(c.value=E,a==null||a.emit(`update:${e}`,E))}});return Object.defineProperty(b,"externalValue",{get:()=>_.value?t[e]:c.value}),b}const vj={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading..."},u3="$vuetify.",c3=(t,e)=>t.replace(/\{(\d+)\}/g,(i,n)=>String(e[+n])),m4=(t,e,i)=>function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];if(!n.startsWith(u3))return c3(n,a);const s=n.replace(u3,""),p=t.value&&i.value[t.value],_=e.value&&i.value[e.value];let b=mg(p,s,null);return b||(Rp(`Translation key "${n}" not found in "${t.value}", trying fallback locale`),b=mg(_,s,null)),b||(k2(`Translation key "${n}" not found in fallback`),b=n),typeof b!="string"&&(k2(`Translation key "${n}" has a non-string value`),b=n),c3(b,a)};function g4(t,e){return(i,n)=>new Intl.NumberFormat([t.value,e.value],n).format(i)}function gT(t,e,i){const n=Pn(t,e,t[e]??i.value);return n.value=t[e]??i.value,Fi(i,r=>{t[e]==null&&(n.value=i.value)}),n}function _4(t){return e=>{const i=gT(e,"locale",t.current),n=gT(e,"fallback",t.fallback),r=gT(e,"messages",t.messages);return{name:"vuetify",current:i,fallback:n,messages:r,t:m4(i,n,r),n:g4(i,n),provide:_4({current:i,fallback:n,messages:r})}}}function yj(t){const e=lt((t==null?void 0:t.locale)??"en"),i=lt((t==null?void 0:t.fallback)??"en"),n=lt({en:vj,...t==null?void 0:t.messages});return{name:"vuetify",current:e,fallback:i,messages:n,t:m4(e,i,n),n:g4(e,i),provide:_4({current:e,fallback:i,messages:n})}}const bj={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},gg=Symbol.for("vuetify:locale");function xj(t){return t.name!=null}function wj(t){const e=t!=null&&t.adapter&&xj(t==null?void 0:t.adapter)?t==null?void 0:t.adapter:yj(t),i=Sj(e,t);return{...e,...i}}function Tu(){const t=qi(gg);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function Tj(t){const e=qi(gg);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");const i=e.provide(t),n=Cj(i,e.rtl,t),r={...i,...n};return Mn(gg,r),r}function Sj(t,e){const i=lt((e==null?void 0:e.rtl)??bj),n=Me(()=>i.value[t.current.value]??!1);return{isRtl:n,rtl:i,rtlClasses:Me(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function Cj(t,e,i){const n=Me(()=>i.rtl??e.value[t.current.value]??!1);return{isRtl:n,rtl:e,rtlClasses:Me(()=>`v-locale--is-${n.value?"rtl":"ltr"}`)}}function zh(){const t=qi(gg);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const Mm=2.4,d3=.2126729,h3=.7151522,f3=.072175,kj=.55,Ej=.58,Ij=.57,Pj=.62,J0=.03,p3=1.45,Aj=5e-4,Mj=1.25,Oj=1.25,m3=.078,g3=12.82051282051282,e1=.06,_3=.001;function v3(t,e){const i=(t.r/255)**Mm,n=(t.g/255)**Mm,r=(t.b/255)**Mm,a=(e.r/255)**Mm,c=(e.g/255)**Mm,s=(e.b/255)**Mm;let p=i*d3+n*h3+r*f3,_=a*d3+c*h3+s*f3;if(p<=J0&&(p+=(J0-p)**p3),_<=J0&&(_+=(J0-_)**p3),Math.abs(_-p)<Aj)return 0;let b;if(_>p){const S=(_**kj-p**Ej)*Mj;b=S<_3?0:S<m3?S-S*g3*e1:S-e1}else{const S=(_**Pj-p**Ij)*Oj;b=S>-_3?0:S>-m3?S-S*g3*e1:S+e1}return b*100}const qv=Symbol.for("vuetify:theme"),vr=gn({theme:String},"theme"),X_={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function Lj(){var i,n;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X_;if(!t)return{...X_,isDisabled:!0};const e={};for(const[r,a]of Object.entries(t.themes??{})){const c=a.dark||r==="dark"?(i=X_.themes)==null?void 0:i.dark:(n=X_.themes)==null?void 0:n.light;e[r]=Ih(c,a)}return Ih(X_,{...t,themes:e})}function Dj(t){const e=Bo(Lj(t)),i=lt(e.defaultTheme),n=lt(e.themes),r=Me(()=>{const b={};for(const[S,E]of Object.entries(n.value)){const I=b[S]={...E,colors:{...E.colors}};if(e.variations)for(const R of e.variations.colors){const V=I.colors[R];if(V)for(const q of["lighten","darken"]){const U=q==="lighten"?JU:ej;for(const H of yh(e.variations[q],1))I.colors[`${R}-${q}-${H}`]=s4(U(Cp(V),H))}}for(const R of Object.keys(I.colors)){if(/^on-[a-z]/.test(R)||I.colors[`on-${R}`])continue;const V=`on-${R}`,q=Cp(I.colors[R]),U=Math.abs(v3(Cp(0),q)),H=Math.abs(v3(Cp(16777215),q));I.colors[V]=H>Math.min(U,50)?"#fff":"#000"}}return b}),a=Me(()=>r.value[i.value]),c=Me(()=>{const b=[];a.value.dark&&gp(b,":root",["color-scheme: dark"]),gp(b,":root",y3(a.value));for(const[R,V]of Object.entries(r.value))gp(b,`.v-theme--${R}`,[`color-scheme: ${V.dark?"dark":"normal"}`,...y3(V)]);const S=[],E=[],I=new Set(Object.values(r.value).flatMap(R=>Object.keys(R.colors)));for(const R of I)/^on-[a-z]/.test(R)?gp(E,`.${R}`,[`color: rgb(var(--v-theme-${R})) !important`]):(gp(S,`.bg-${R}`,[`--v-theme-overlay-multiplier: var(--v-theme-${R}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${R})) !important`,`color: rgb(var(--v-theme-on-${R})) !important`]),gp(E,`.text-${R}`,[`color: rgb(var(--v-theme-${R})) !important`]),gp(E,`.border-${R}`,[`--v-border-color: var(--v-theme-${R})`]));return b.push(...S,...E),b.map((R,V)=>V===0?R:`    ${R}`).join("")});function s(){return{style:[{children:c.value,id:"vuetify-theme-stylesheet",nonce:e.cspNonce||!1}]}}function p(b){const S=b._context.provides.usehead;if(S)if(S.push){const E=S.push(s);Fi(c,()=>{E.patch(s)})}else Eo?(S.addHeadObjs(Me(s)),Xs(()=>S.updateDOM())):S.addHeadObjs(s());else{let I=function(){if(!e.isDisabled){if(typeof document<"u"&&!E){const R=document.createElement("style");R.type="text/css",R.id="vuetify-theme-stylesheet",e.cspNonce&&R.setAttribute("nonce",e.cspNonce),E=R,document.head.appendChild(E)}E&&(E.innerHTML=c.value)}},E=Eo?document.getElementById("vuetify-theme-stylesheet"):null;Fi(c,I,{immediate:!0})}}const _=Me(()=>e.isDisabled?void 0:`v-theme--${i.value}`);return{install:p,isDisabled:e.isDisabled,name:i,themes:n,current:a,computedThemes:r,themeClasses:_,styles:c,global:{name:i,current:a}}}function Vr(t){Fa("provideTheme");const e=qi(qv,null);if(!e)throw new Error("Could not find Vuetify theme injection");const i=Me(()=>t.theme??(e==null?void 0:e.name.value)),n=Me(()=>e.isDisabled?void 0:`v-theme--${i.value}`),r={...e,name:i,themeClasses:n};return Mn(qv,r),r}function v4(){Fa("useTheme");const t=qi(qv,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function gp(t,e,i){t.push(`${e} {
`,...i.map(n=>`  ${n};
`),`}
`)}function y3(t){const e=t.dark?2:1,i=t.dark?1:2,n=[];for(const[r,a]of Object.entries(t.colors)){const c=Cp(a);n.push(`--v-theme-${r}: ${c.r},${c.g},${c.b}`),r.startsWith("on-")||n.push(`--v-theme-${r}-overlay-multiplier: ${E2(a)>.18?e:i}`)}for(const[r,a]of Object.entries(t.variables)){const c=typeof a=="string"&&a.startsWith("#")?Cp(a):void 0,s=c?`${c.r}, ${c.g}, ${c.b}`:void 0;n.push(`--v-${r}: ${s??a}`)}return n}function Mf(t){const e=lt(),i=lt();if(Eo){const n=new ResizeObserver(r=>{t==null||t(r,n),r.length&&(i.value=r[0].contentRect)});as(()=>{n.disconnect()}),Fi(e,(r,a)=>{a&&(n.unobserve(a),i.value=void 0),r&&n.observe(r)},{flush:"post"})}return{resizeRef:e,contentRect:Zp(i)}}const W1=Symbol.for("vuetify:layout"),y4=Symbol.for("vuetify:layout-item"),b3=1e3,b4=gn({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),zg=gn({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Rj(){const t=qi(W1);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function Vg(t){const e=qi(W1);if(!e)throw new Error("[Vuetify] Could not find injected layout");const i=t.id??`layout-item-${cl()}`,n=Fa("useLayoutItem");Mn(y4,{id:i});const r=lt(!1);rC(()=>r.value=!0),nC(()=>r.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:c}=e.register(n,{...t,active:Me(()=>r.value?!1:t.active.value),id:i});return as(()=>e.unregister(i)),{layoutItemStyles:a,layoutRect:e.layoutRect,layoutItemScrimStyles:c}}const Bj=(t,e,i,n)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const c of t){const s=e.get(c),p=i.get(c),_=n.get(c);if(!s||!p||!_)continue;const b={...r,[s.value]:parseInt(r[s.value],10)+(_.value?parseInt(p.value,10):0)};a.push({id:c,layer:b}),r=b}return a};function x4(t){const e=qi(W1,null),i=Me(()=>e?e.rootZIndex.value-100:b3),n=lt([]),r=Bo(new Map),a=Bo(new Map),c=Bo(new Map),s=Bo(new Map),p=Bo(new Map),{resizeRef:_,contentRect:b}=Mf(),S=Me(()=>{const oe=new Map,pe=t.overlaps??[];for(const de of pe.filter(fe=>fe.includes(":"))){const[fe,ge]=de.split(":");if(!n.value.includes(fe)||!n.value.includes(ge))continue;const we=r.get(fe),Ie=r.get(ge),Oe=a.get(fe),ke=a.get(ge);!we||!Ie||!Oe||!ke||(oe.set(ge,{position:we.value,amount:parseInt(Oe.value,10)}),oe.set(fe,{position:Ie.value,amount:-parseInt(ke.value,10)}))}return oe}),E=Me(()=>{const oe=[...new Set([...c.values()].map(de=>de.value))].sort((de,fe)=>de-fe),pe=[];for(const de of oe){const fe=n.value.filter(ge=>{var we;return((we=c.get(ge))==null?void 0:we.value)===de});pe.push(...fe)}return Bj(pe,r,a,s)}),I=Me(()=>!Array.from(p.values()).some(oe=>oe.value)),R=Me(()=>E.value[E.value.length-1].layer),V=Me(()=>({"--v-layout-left":Xi(R.value.left),"--v-layout-right":Xi(R.value.right),"--v-layout-top":Xi(R.value.top),"--v-layout-bottom":Xi(R.value.bottom),...I.value?void 0:{transition:"none"}})),q=Me(()=>E.value.slice(1).map((oe,pe)=>{let{id:de}=oe;const{layer:fe}=E.value[pe],ge=a.get(de),we=r.get(de);return{id:de,...fe,size:Number(ge.value),position:we.value}})),U=oe=>q.value.find(pe=>pe.id===oe),H=Fa("createLayout"),Z=lt(!1);Fn(()=>{Z.value=!0}),Mn(W1,{register:(oe,pe)=>{let{id:de,order:fe,position:ge,layoutSize:we,elementSize:Ie,active:Oe,disableTransitions:ke,absolute:Ee}=pe;c.set(de,fe),r.set(de,ge),a.set(de,we),s.set(de,Oe),ke&&p.set(de,ke);const gt=kv(y4,H==null?void 0:H.vnode).indexOf(oe);gt>-1?n.value.splice(gt,0,de):n.value.push(de);const nt=Me(()=>q.value.findIndex(et=>et.id===de)),ft=Me(()=>i.value+E.value.length*2-nt.value*2),Tt=Me(()=>{const et=ge.value==="left"||ge.value==="right",Mt=ge.value==="right",Qt=ge.value==="bottom",Fe={[ge.value]:0,zIndex:ft.value,transform:`translate${et?"X":"Y"}(${(Oe.value?0:-110)*(Mt||Qt?-1:1)}%)`,position:Ee.value||i.value!==b3?"absolute":"fixed",...I.value?void 0:{transition:"none"}};if(!Z.value)return Fe;const tt=q.value[nt.value];if(!tt)throw new Error(`[Vuetify] Could not find layout item "${de}"`);const Rt=S.value.get(de);return Rt&&(tt[Rt.position]+=Rt.amount),{...Fe,height:et?`calc(100% - ${tt.top}px - ${tt.bottom}px)`:Ie.value?`${Ie.value}px`:void 0,left:Mt?void 0:`${tt.left}px`,right:Mt?`${tt.right}px`:void 0,top:ge.value!=="bottom"?`${tt.top}px`:void 0,bottom:ge.value!=="top"?`${tt.bottom}px`:void 0,width:et?Ie.value?`${Ie.value}px`:void 0:`calc(100% - ${tt.left}px - ${tt.right}px)`}}),pt=Me(()=>({zIndex:ft.value-1}));return{layoutItemStyles:Tt,layoutItemScrimStyles:pt,zIndex:ft}},unregister:oe=>{c.delete(oe),r.delete(oe),a.delete(oe),s.delete(oe),p.delete(oe),n.value=n.value.filter(pe=>pe!==oe)},mainRect:R,mainStyles:V,getLayoutItem:U,items:q,layoutRect:b,rootZIndex:i});const ne=Me(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),ie=Me(()=>({zIndex:i.value,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:ne,layoutStyles:ie,getLayoutItem:U,items:q,layoutRect:b,layoutRef:_}}function w4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...i}=t,n=Ih(e,i),{aliases:r={},components:a={},directives:c={}}=n,s=uj(n.defaults),p=dj(n.display,n.ssr),_=Dj(n.theme),b=gj(n.icons),S=wj(n.locale);return{install:I=>{for(const R in c)I.directive(R,c[R]);for(const R in a)I.component(R,a[R]);for(const R in r)I.component(R,wu({...r[R],name:R,aliasName:r[R].name}));if(_.install(I),I.provide(Wv,s),I.provide(P2,p),I.provide(qv,_),I.provide(A2,b),I.provide(gg,S),Eo&&n.ssr)if(I.$nuxt)I.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:R}=I;I.mount=function(){const V=R(...arguments);return Cn(()=>p.update()),I.mount=R,V}}cl.reset(),I.mixin({computed:{$vuetify(){return Bo({defaults:K_.call(this,Wv),display:K_.call(this,P2),theme:K_.call(this,qv),icons:K_.call(this,A2),locale:K_.call(this,gg)})}}})},defaults:s,display:p,theme:_,icons:b,locale:S}}const Fj="3.1.14";w4.version=Fj;function K_(t){var n,r;const e=this.$,i=((n=e.parent)==null?void 0:n.provides)??((r=e.vnode.appContext)==null?void 0:r.provides);if(i&&t in i)return i[t]}var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function TC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var a=Function.bind.apply(e,r);return new a}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var dv;typeof window<"u"?dv=window:typeof _g<"u"?dv=_g:typeof self<"u"?dv=self:dv={};var yt=dv;const $j={},Nj=Object.freeze(Object.defineProperty({__proto__:null,default:$j},Symbol.toStringTag,{value:"Module"})),zj=TC(Nj);var x3=typeof _g<"u"?_g:typeof window<"u"?window:{},Vj=zj,hv;typeof document<"u"?hv=document:(hv=x3["__GLOBAL_DOCUMENT_CACHE@4"],hv||(hv=x3["__GLOBAL_DOCUMENT_CACHE@4"]=Vj));var ji=hv,Bn={},Uj={get exports(){return Bn},set exports(t){Bn=t}};(function(t,e){function i(p){if(p&&typeof p=="object"){var _=p.which||p.keyCode||p.charCode;_&&(p=_)}if(typeof p=="number")return c[p];var b=String(p),S=n[b.toLowerCase()];if(S)return S;var S=r[b.toLowerCase()];if(S)return S;if(b.length===1)return b.charCodeAt(0)}i.isEventKey=function(_,b){if(_&&typeof _=="object"){var S=_.which||_.keyCode||_.charCode;if(S==null)return!1;if(typeof b=="string"){var E=n[b.toLowerCase()];if(E)return E===S;var E=r[b.toLowerCase()];if(E)return E===S}else if(typeof b=="number")return b===S;return!1}},e=t.exports=i;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var c=e.names=e.title={};for(a in n)c[n[a]]=a;for(var s in r)n[s]=r[s]})(Uj,Bn);var jj=Hj;function Hj(t,e){var i,n=null;try{i=JSON.parse(t,e)}catch(r){n=r}return[n,i]}var Zv={},Gj={get exports(){return Zv},set exports(t){Zv=t}};function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Ph.apply(this,arguments)}const Wj=Object.freeze(Object.defineProperty({__proto__:null,default:Ph},Symbol.toStringTag,{value:"Module"})),qj=TC(Wj);var Zj=Xj,Yj=Object.prototype.toString;function Xj(t){if(!t)return!1;var e=Yj.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var Kj=yt,Qj=function(e,i){return i===void 0&&(i=!1),function(n,r,a){if(n){e(n);return}if(r.statusCode>=400&&r.statusCode<=599){var c=a;if(i)if(Kj.TextDecoder){var s=Jj(r.headers&&r.headers["content-type"]);try{c=new TextDecoder(s).decode(a)}catch{}}else c=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:c});return}e(null,a)}};function Jj(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,i){var n=i.split("="),r=n[0],a=n[1];return r.trim()==="charset"?a.trim():e},"utf-8")}var eH=Qj,S4=yt,tH=qj,iH=Zj;Nd.httpHandler=eH;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var nH=function(e){var i={};return e&&e.trim().split(`
`).forEach(function(n){var r=n.indexOf(":"),a=n.slice(0,r).trim().toLowerCase(),c=n.slice(r+1).trim();typeof i[a]>"u"?i[a]=c:Array.isArray(i[a])?i[a].push(c):i[a]=[i[a],c]}),i};Gj.exports=Nd;Zv.default=Nd;Nd.XMLHttpRequest=S4.XMLHttpRequest||aH;Nd.XDomainRequest="withCredentials"in new Nd.XMLHttpRequest?Nd.XMLHttpRequest:S4.XDomainRequest;rH(["get","put","post","patch","head","delete"],function(t){Nd[t==="delete"?"del":t]=function(e,i,n){return i=C4(e,i,n),i.method=t.toUpperCase(),k4(i)}});function rH(t,e){for(var i=0;i<t.length;i++)e(t[i])}function sH(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function C4(t,e,i){var n=t;return iH(e)?(i=e,typeof t=="string"&&(n={uri:t})):n=tH({},e,{uri:t}),n.callback=i,n}function Nd(t,e,i){return e=C4(t,e,i),k4(e)}function k4(t){if(typeof t.callback>"u")throw new Error("callback argument missing");var e=!1,i=function(Z,ne,ie){e||(e=!0,t.callback(Z,ne,ie))};function n(){s.readyState===4&&setTimeout(c,0)}function r(){var H=void 0;if(s.response?H=s.response:H=s.responseText||oH(s),V)try{H=JSON.parse(H)}catch{}return H}function a(H){return clearTimeout(q),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,i(H,U)}function c(){if(!_){var H;clearTimeout(q),t.useXDR&&s.status===void 0?H=200:H=s.status===1223?204:s.status;var Z=U,ne=null;return H!==0?(Z={body:r(),statusCode:H,method:S,headers:{},url:b,rawRequest:s},s.getAllResponseHeaders&&(Z.headers=nH(s.getAllResponseHeaders()))):ne=new Error("Internal XMLHttpRequest Error"),i(ne,Z,Z.body)}}var s=t.xhr||null;s||(t.cors||t.useXDR?s=new Nd.XDomainRequest:s=new Nd.XMLHttpRequest);var p,_,b=s.url=t.uri||t.url,S=s.method=t.method||"GET",E=t.body||t.data,I=s.headers=t.headers||{},R=!!t.sync,V=!1,q,U={body:void 0,headers:{},statusCode:0,method:S,url:b,rawRequest:s};if("json"in t&&t.json!==!1&&(V=!0,I.accept||I.Accept||(I.Accept="application/json"),S!=="GET"&&S!=="HEAD"&&(I["content-type"]||I["Content-Type"]||(I["Content-Type"]="application/json"),E=JSON.stringify(t.json===!0?E:t.json))),s.onreadystatechange=n,s.onload=c,s.onerror=a,s.onprogress=function(){},s.onabort=function(){_=!0},s.ontimeout=a,s.open(S,b,!R,t.username,t.password),R||(s.withCredentials=!!t.withCredentials),!R&&t.timeout>0&&(q=setTimeout(function(){if(!_){_=!0,s.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",a(H)}},t.timeout)),s.setRequestHeader)for(p in I)I.hasOwnProperty(p)&&s.setRequestHeader(p,I[p]);else if(t.headers&&!sH(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(s.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(s),s.send(E||null),s}function oH(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function aH(){}var q1={},lH={get exports(){return q1},set exports(t){q1=t}},w3=ji,SC=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function qu(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}qu.prototype=SC(Error.prototype);qu.prototype.constructor=qu;qu.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function CC(t){function e(n,r,a,c){return(n|0)*3600+(r|0)*60+(a|0)+(c|0)/1e3}var i=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function Ev(){this.values=SC(null)}Ev.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function fv(t,e,i,n){var r=n?t.split(n):[t];for(var a in r)if(typeof r[a]=="string"){var c=r[a].split(i);if(c.length===2){var s=c[0].trim(),p=c[1].trim();e(s,p)}}}function uH(t,e,i){var n=t;function r(){var s=CC(t);if(s===null)throw new qu(qu.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),s}function a(s,p){var _=new Ev;fv(s,function(b,S){switch(b){case"region":for(var E=i.length-1;E>=0;E--)if(i[E].id===S){_.set(b,i[E].region);break}break;case"vertical":_.alt(b,S,["rl","lr"]);break;case"line":var I=S.split(","),R=I[0];_.integer(b,R),_.percent(b,R)&&_.set("snapToLines",!1),_.alt(b,R,["auto"]),I.length===2&&_.alt("lineAlign",I[1],["start","center","end"]);break;case"position":I=S.split(","),_.percent(b,I[0]),I.length===2&&_.alt("positionAlign",I[1],["start","center","end"]);break;case"size":_.percent(b,S);break;case"align":_.alt(b,S,["start","center","end","left","right"]);break}},/:/,/\s/),p.region=_.get("region",null),p.vertical=_.get("vertical","");try{p.line=_.get("line","auto")}catch{}p.lineAlign=_.get("lineAlign","start"),p.snapToLines=_.get("snapToLines",!0),p.size=_.get("size",100);try{p.align=_.get("align","center")}catch{p.align=_.get("align","middle")}try{p.position=_.get("position","auto")}catch{p.position=_.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},p.align)}p.positionAlign=_.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},p.align)}function c(){t=t.replace(/^\s+/,"")}if(c(),e.startTime=r(),c(),t.substr(0,3)!=="-->")throw new qu(qu.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),c(),e.endTime=r(),c(),a(t,e)}var _T=w3.createElement&&w3.createElement("textarea"),cH={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},T3={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},dH={v:"title",lang:"lang"},S3={rt:"ruby"};function E4(t,e){function i(){if(!e)return null;function R(q){return e=e.substr(q.length),q}var V=e.match(/^([^<]*)(<[^>]*>?)?/);return R(V[1]?V[1]:V[2])}function n(R){return _T.innerHTML=R,R=_T.textContent,_T.textContent="",R}function r(R,V){return!S3[V.localName]||S3[V.localName]===R.localName}function a(R,V){var q=cH[R];if(!q)return null;var U=t.document.createElement(q),H=dH[R];return H&&V&&(U[H]=V.trim()),U}for(var c=t.document.createElement("div"),s=c,p,_=[];(p=i())!==null;){if(p[0]==="<"){if(p[1]==="/"){_.length&&_[_.length-1]===p.substr(2).replace(">","")&&(_.pop(),s=s.parentNode);continue}var b=CC(p.substr(1,p.length-2)),S;if(b){S=t.document.createProcessingInstruction("timestamp",b),s.appendChild(S);continue}var E=p.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!E||(S=a(E[1],E[3]),!S)||!r(s,S))continue;if(E[2]){var I=E[2].split(".");I.forEach(function(R){var V=/^bg_/.test(R),q=V?R.slice(3):R;if(T3.hasOwnProperty(q)){var U=V?"background-color":"color",H=T3[q];S.style[U]=H}}),S.className=I.join(" ")}_.push(E[1]),s.appendChild(S),s=S;continue}s.appendChild(t.document.createTextNode(n(p)))}return c}var C3=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function hH(t){for(var e=0;e<C3.length;e++){var i=C3[e];if(t>=i[0]&&t<=i[1])return!0}return!1}function fH(t){var e=[],i="",n;if(!t||!t.childNodes)return"ltr";function r(s,p){for(var _=p.childNodes.length-1;_>=0;_--)s.push(p.childNodes[_])}function a(s){if(!s||!s.length)return null;var p=s.pop(),_=p.textContent||p.innerText;if(_){var b=_.match(/^.*(\n|\r)/);return b?(s.length=0,b[0]):_}if(p.tagName==="ruby")return a(s);if(p.childNodes)return r(s,p),a(s)}for(r(e,t);i=a(e);)for(var c=0;c<i.length;c++)if(n=i.charCodeAt(c),hH(n))return"rtl";return"ltr"}function pH(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,i=e.textTrackList,n=0,r=0;r<i.length&&i[r]!==e;r++)i[r].mode==="showing"&&n++;return++n*-1}function ex(){}ex.prototype.applyStyles=function(t,e){e=e||this.div;for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])};ex.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Z1(t,e,i){ex.call(this),this.cue=e,this.cueDiv=E4(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:fH(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Z1.prototype=SC(ex.prototype);Z1.prototype.constructor=Z1;function Dl(t){var e,i,n,r;if(t.div){i=t.div.offsetHeight,n=t.div.offsetWidth,r=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||i,this.bottom=t.bottom||r+(t.height||i),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}Dl.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Dl.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};Dl.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};Dl.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};Dl.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};Dl.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),i=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*i;return n/(this.height*this.width)};Dl.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};Dl.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var r={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||i};return r};function mH(t,e,i,n){function r(q,U){for(var H,Z=new Dl(q),ne=1,ie=0;ie<U.length;ie++){for(;q.overlapsOppositeAxis(i,U[ie])||q.within(i)&&q.overlapsAny(n);)q.move(U[ie]);if(q.within(i))return q;var oe=q.intersectPercentage(i);ne>oe&&(H=new Dl(q),ne=oe),q=new Dl(Z)}return H||Z}var a=new Dl(e),c=e.cue,s=pH(c),p=[];if(c.snapToLines){var _;switch(c.vertical){case"":p=["+y","-y"],_="height";break;case"rl":p=["+x","-x"],_="width";break;case"lr":p=["-x","+x"],_="width";break}var b=a.lineHeight,S=b*Math.round(s),E=i[_]+b,I=p[0];Math.abs(S)>E&&(S=S<0?-1:1,S*=Math.ceil(E/b)*b),s<0&&(S+=c.vertical===""?i.height:i.width,p=p.reverse()),a.move(I,S)}else{var R=a.lineHeight/i.height*100;switch(c.lineAlign){case"center":s-=R/2;break;case"end":s-=R;break}switch(c.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")});break}p=["+y","-x","+x","-y"],a=new Dl(e)}var V=r(a,p);e.move(V.toCSSCompatValues(i))}function Ug(){}Ug.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};Ug.convertCueToDOMTree=function(t,e){return!t||!e?null:E4(t,e)};var gH=.05,_H="sans-serif",vH="1.5%";Ug.processCues=function(t,e,i){if(!t||!e||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=vH,i.appendChild(n);function r(b){for(var S=0;S<b.length;S++)if(b[S].hasBeenReset||!b[S].displayState)return!0;return!1}if(!r(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var c=[],s=Dl.getSimpleBoxPosition(n),p=Math.round(s.height*gH*100)/100,_={font:p+"px "+_H};(function(){for(var b,S,E=0;E<e.length;E++)S=e[E],b=new Z1(t,S,_),n.appendChild(b.div),mH(t,b,s,c),S.displayState=b.div,c.push(Dl.getSimpleBoxPosition(b))})()};Ug.Parser=function(t,e,i){i||(i=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]};Ug.Parser.prototype={reportOrThrowError:function(t){if(t instanceof qu)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function i(){for(var b=e.buffer,S=0;S<b.length&&b[S]!=="\r"&&b[S]!==`
`;)++S;var E=b.substr(0,S);return b[S]==="\r"&&++S,b[S]===`
`&&++S,e.buffer=b.substr(S),E}function n(b){var S=new Ev;if(fv(b,function(I,R){switch(I){case"id":S.set(I,R);break;case"width":S.percent(I,R);break;case"lines":S.integer(I,R);break;case"regionanchor":case"viewportanchor":var V=R.split(",");if(V.length!==2)break;var q=new Ev;if(q.percent("x",V[0]),q.percent("y",V[1]),!q.has("x")||!q.has("y"))break;S.set(I+"X",q.get("x")),S.set(I+"Y",q.get("y"));break;case"scroll":S.alt(I,R,["up"]);break}},/=/,/\s/),S.has("id")){var E=new(e.vttjs.VTTRegion||e.window.VTTRegion);E.width=S.get("width",100),E.lines=S.get("lines",3),E.regionAnchorX=S.get("regionanchorX",0),E.regionAnchorY=S.get("regionanchorY",100),E.viewportAnchorX=S.get("viewportanchorX",0),E.viewportAnchorY=S.get("viewportanchorY",100),E.scroll=S.get("scroll",""),e.onregion&&e.onregion(E),e.regionList.push({id:S.get("id"),region:E})}}function r(b){var S=new Ev;fv(b,function(E,I){switch(E){case"MPEGT":S.integer(E+"S",I);break;case"LOCA":S.set(E+"L",CC(I));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:S.get("MPEGTS"),LOCAL:S.get("LOCAL")})}function a(b){b.match(/X-TIMESTAMP-MAP/)?fv(b,function(S,E){switch(S){case"X-TIMESTAMP-MAP":r(E);break}},/=/):fv(b,function(S,E){switch(S){case"Region":n(E);break}},/:/)}try{var c;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;c=i();var s=c.match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new qu(qu.Errors.BadSignature);e.state="HEADER"}for(var p=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(p?p=!1:c=i(),e.state){case"HEADER":/:/.test(c)?a(c):c||(e.state="ID");continue;case"NOTE":c||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){e.state="NOTE";break}if(!c)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",c.indexOf("-->")===-1){e.cue.id=c;continue}case"CUE":try{uH(c,e.cue,e.regionList)}catch(b){e.reportOrThrowError(b),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var _=c.indexOf("-->")!==-1;if(!c||_&&(p=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=c.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":c||(e.state="ID");continue}}}catch(b){e.reportOrThrowError(b),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new qu(qu.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var yH=Ug,bH="auto",xH={"":1,lr:1,rl:1},wH={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function TH(t){if(typeof t!="string")return!1;var e=xH[t.toLowerCase()];return e?t.toLowerCase():!1}function vT(t){if(typeof t!="string")return!1;var e=wH[t.toLowerCase()];return e?t.toLowerCase():!1}function I4(t,e,i){this.hasBeenReset=!1;var n="",r=!1,a=t,c=e,s=i,p=null,_="",b=!0,S="auto",E="start",I="auto",R="auto",V=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(U){n=""+U}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(U){r=!!U}},startTime:{enumerable:!0,get:function(){return a},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");a=U,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");c=U,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(U){s=""+U,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return p},set:function(U){p=U,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return _},set:function(U){var H=TH(U);if(H===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");_=H,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return b},set:function(U){b=!!U,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return S},set:function(U){if(typeof U!="number"&&U!==bH)throw new SyntaxError("Line: an invalid number or illegal string was specified.");S=U,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return E},set:function(U){var H=vT(U);H?(E=H,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return I},set:function(U){if(U<0||U>100)throw new Error("Position must be between 0 and 100.");I=U,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return R},set:function(U){var H=vT(U);H?(R=H,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return V},set:function(U){if(U<0||U>100)throw new Error("Size must be between 0 and 100.");V=U,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(U){var H=vT(U);if(!H)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=H,this.hasBeenReset=!0}}}),this.displayState=void 0}I4.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var SH=I4,CH={"":!0,up:!0};function kH(t){if(typeof t!="string")return!1;var e=CH[t.toLowerCase()];return e?t.toLowerCase():!1}function Q_(t){return typeof t=="number"&&t>=0&&t<=100}function EH(){var t=100,e=3,i=0,n=100,r=0,a=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(s){if(!Q_(s))throw new Error("Width must be between 0 and 100.");t=s}},lines:{enumerable:!0,get:function(){return e},set:function(s){if(typeof s!="number")throw new TypeError("Lines must be set to a number.");e=s}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(s){if(!Q_(s))throw new Error("RegionAnchorX must be between 0 and 100.");n=s}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(s){if(!Q_(s))throw new Error("RegionAnchorY must be between 0 and 100.");i=s}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(s){if(!Q_(s))throw new Error("ViewportAnchorY must be between 0 and 100.");a=s}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(s){if(!Q_(s))throw new Error("ViewportAnchorX must be between 0 and 100.");r=s}},scroll:{enumerable:!0,get:function(){return c},set:function(s){var p=kH(s);p===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=p}}})}var IH=EH,Ah=yt,Jp=lH.exports={WebVTT:yH,VTTCue:SH,VTTRegion:IH};Ah.vttjs=Jp;Ah.WebVTT=Jp.WebVTT;var PH=Jp.VTTCue,AH=Jp.VTTRegion,MH=Ah.VTTCue,OH=Ah.VTTRegion;Jp.shim=function(){Ah.VTTCue=PH,Ah.VTTRegion=AH};Jp.restore=function(){Ah.VTTCue=MH,Ah.VTTRegion=OH};Ah.VTTCue||Jp.shim();var O2={},LH={get exports(){return O2},set exports(t){O2=t}};(function(t,e){(function(i){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,c=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(p,_,b){if(b=b||{},p=p.trim(),_=_.trim(),!_){if(!b.alwaysNormalize)return p;var S=s.parseURL(p);if(!S)throw new Error("Error trying to parse base URL.");return S.path=s.normalizePath(S.path),s.buildURLFromParts(S)}var E=s.parseURL(_);if(!E)throw new Error("Error trying to parse relative URL.");if(E.scheme)return b.alwaysNormalize?(E.path=s.normalizePath(E.path),s.buildURLFromParts(E)):_;var I=s.parseURL(p);if(!I)throw new Error("Error trying to parse base URL.");if(!I.netLoc&&I.path&&I.path[0]!=="/"){var R=r.exec(I.path);I.netLoc=R[1],I.path=R[2]}I.netLoc&&!I.path&&(I.path="/");var V={scheme:I.scheme,netLoc:E.netLoc,path:null,params:E.params,query:E.query,fragment:E.fragment};if(!E.netLoc&&(V.netLoc=I.netLoc,E.path[0]!=="/"))if(!E.path)V.path=I.path,E.params||(V.params=I.params,E.query||(V.query=I.query));else{var q=I.path,U=q.substring(0,q.lastIndexOf("/")+1)+E.path;V.path=s.normalizePath(U)}return V.path===null&&(V.path=b.alwaysNormalize?s.normalizePath(E.path):E.path),s.buildURLFromParts(V)},parseURL:function(p){var _=n.exec(p);return _?{scheme:_[1]||"",netLoc:_[2]||"",path:_[3]||"",params:_[4]||"",query:_[5]||"",fragment:_[6]||""}:null},normalizePath:function(p){for(p=p.split("").reverse().join("").replace(a,"");p.length!==(p=p.replace(c,"")).length;);return p.split("").reverse().join("")},buildURLFromParts:function(p){return p.scheme+p.netLoc+p.path+p.params+p.query+p.fragment}};t.exports=s})()})(LH);const Y1=O2;var k3="http://example.com",DH=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=yt.location&&yt.location.href||"");var n=typeof yt.URL=="function",r=/^\/\//.test(e),a=!yt.location&&!/\/\//i.test(e);if(n?e=new yt.URL(e,yt.location||k3):/\/\//i.test(e)||(e=Y1.buildAbsoluteURL(yt.location&&yt.location.href||"",e)),n){var c=new URL(i,e);return a?c.href.slice(k3.length):r?c.href.slice(c.protocol.length):c.href}return Y1.buildAbsoluteURL(e,i)},kC=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,r){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(r)},e.off=function(n,r){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(r);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var r=this.listeners[n];if(r)if(arguments.length===2)for(var a=r.length,c=0;c<a;++c)r[c].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),p=r.length,_=0;_<p;++_)r[_].apply(this,s)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(r){n.push(r)})},t}(),RH=function(e){return yt.atob?yt.atob(e):Buffer.from(e,"base64").toString("binary")};function BH(t){for(var e=RH(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}/*! @name m3u8-parser @version 6.0.0 @license Apache-2.0 */class FH extends kC{constructor(){super(),this.buffer=""}push(e){let i;for(this.buffer+=e,i=this.buffer.indexOf(`
`);i>-1;i=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const $H=String.fromCharCode(9),yT=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},NH=function(){const t="[^=]*",e='"[^"]*"|[^,]*',i="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+i+")")},Yc=function(t){const e={};if(!t)return e;const i=t.split(NH());let n=i.length,r;for(;n--;)i[n]!==""&&(r=/([^=]*)=(.*)/.exec(i[n]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e};class zH extends kC{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let i,n;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((a,c)=>{const s=c(e);return s===e?a:a.concat([s])},[e]).forEach(a=>{for(let c=0;c<this.customParsers.length;c++)if(this.customParsers[c].call(this,a))return;if(a.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:a.slice(1)});return}if(a=a.replace("\r",""),i=/^#EXTM3U/.exec(a),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a),i){n={type:"tag",tagType:"inf"},i[1]&&(n.duration=parseFloat(i[1])),i[2]&&(n.title=i[2]),this.trigger("data",n);return}if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"targetduration"},i[1]&&(n.duration=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"version"},i[1]&&(n.version=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"media-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a),i){n={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(n.number=parseInt(i[1],10)),this.trigger("data",n);return}if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a),i){n={type:"tag",tagType:"playlist-type"},i[1]&&(n.playlistType=i[1]),this.trigger("data",n);return}if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a),i){n=Ph(yT(i[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",n);return}if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a),i){n={type:"tag",tagType:"allow-cache"},i[1]&&(n.allowed=!/NO/.test(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-MAP:(.*)$/.exec(a),i){if(n={type:"tag",tagType:"map"},i[1]){const c=Yc(i[1]);c.URI&&(n.uri=c.URI),c.BYTERANGE&&(n.byterange=yT(c.BYTERANGE))}this.trigger("data",n);return}if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(a),i){if(n={type:"tag",tagType:"stream-inf"},i[1]){if(n.attributes=Yc(i[1]),n.attributes.RESOLUTION){const c=n.attributes.RESOLUTION.split("x"),s={};c[0]&&(s.width=parseInt(c[0],10)),c[1]&&(s.height=parseInt(c[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n);return}if(i=/^#EXT-X-MEDIA:(.*)$/.exec(a),i){n={type:"tag",tagType:"media"},i[1]&&(n.attributes=Yc(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-ENDLIST/.exec(a),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(a),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a),i){n={type:"tag",tagType:"program-date-time"},i[1]&&(n.dateTimeString=i[1],n.dateTimeObject=new Date(i[1])),this.trigger("data",n);return}if(i=/^#EXT-X-KEY:(.*)$/.exec(a),i){n={type:"tag",tagType:"key"},i[1]&&(n.attributes=Yc(i[1]),n.attributes.IV&&(n.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),this.trigger("data",n);return}if(i=/^#EXT-X-START:(.*)$/.exec(a),i){n={type:"tag",tagType:"start"},i[1]&&(n.attributes=Yc(i[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-out-cont"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-out"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-CUE-IN:(.*)?$/.exec(a),i){n={type:"tag",tagType:"cue-in"},i[1]?n.data=i[1]:n.data="",this.trigger("data",n);return}if(i=/^#EXT-X-SKIP:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"skip"},n.attributes=Yc(i[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split($H)),this.trigger("data",n);return}if(i=/^#EXT-X-PART:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"part"},n.attributes=Yc(i[1]),["DURATION"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=parseFloat(n.attributes[c]))}),["INDEPENDENT","GAP"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=/YES/.test(n.attributes[c]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=yT(n.attributes.BYTERANGE)),this.trigger("data",n);return}if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"server-control"},n.attributes=Yc(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=parseFloat(n.attributes[c]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=/YES/.test(n.attributes[c]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PART-INF:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"part-inf"},n.attributes=Yc(i[1]),["PART-TARGET"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=parseFloat(n.attributes[c]))}),this.trigger("data",n);return}if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"preload-hint"},n.attributes=Yc(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(c){if(n.attributes.hasOwnProperty(c)){n.attributes[c]=parseInt(n.attributes[c],10);const s=c==="BYTERANGE-LENGTH"?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[s]=n.attributes[c],delete n.attributes[c]}}),this.trigger("data",n);return}if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),i&&i[1]){n={type:"tag",tagType:"rendition-report"},n.attributes=Yc(i[1]),["LAST-MSN","LAST-PART"].forEach(function(c){n.attributes.hasOwnProperty(c)&&(n.attributes[c]=parseInt(n.attributes[c],10))}),this.trigger("data",n);return}this.trigger("data",{type:"tag",data:a.slice(4)})})}addParser({expression:e,customType:i,dataParser:n,segment:r}){typeof n!="function"&&(n=a=>a),this.customParsers.push(a=>{if(e.exec(a))return this.trigger("data",{type:"custom",data:n(a),customType:i,segment:r}),!0})}addTagMapper({expression:e,map:i}){const n=r=>e.test(r)?i(r):r;this.tagMappers.push(n)}}const VH=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Om=function(t){const e={};return Object.keys(t).forEach(function(i){e[VH(i)]=t[i]}),e},bT=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:n}=t;if(!e)return;const r="#EXT-X-SERVER-CONTROL",a="holdBack",c="partHoldBack",s=i&&i*3,p=n&&n*2;i&&!e.hasOwnProperty(a)&&(e[a]=s,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&e[a]<s&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[a]}) to targetDuration * 3 (${s})`}),e[a]=s),n&&!e.hasOwnProperty(c)&&(e[c]=n*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[c]}).`})),n&&e[c]<p&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[c]}) to partTargetDuration * 2 (${p}).`}),e[c]=p)};class UH extends kC{constructor(){super(),this.lineStream=new FH,this.parseStream=new zH,this.lineStream.pipe(this.parseStream);const e=this,i=[];let n={},r,a,c=!1;const s=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},_="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let b=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let S=0,E=0;this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&r&&(n.map=r),!n.key&&a&&(n.key=a),!n.timeline&&typeof b=="number"&&(n.timeline=b),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(I){let R,V;({tag(){({version(){I.version&&(this.manifest.version=I.version)},"allow-cache"(){this.manifest.allowCache=I.allowed,"allowed"in I||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const q={};"length"in I&&(n.byterange=q,q.length=I.length,"offset"in I||(I.offset=S)),"offset"in I&&(n.byterange=q,q.offset=I.offset),S=q.offset+q.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),I.duration>0&&(n.duration=I.duration),I.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!I.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(I.attributes.METHOD==="NONE"){a=null;return}if(!I.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(I.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:I.attributes};return}if(I.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:I.attributes.URI};return}if(I.attributes.KEYFORMAT===_){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(I.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(I.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),I.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(I.attributes.KEYID&&I.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:I.attributes.KEYFORMAT,keyId:I.attributes.KEYID.substring(2)},pssh:BH(I.attributes.URI.split(",")[1])};return}I.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:I.attributes.METHOD||"AES-128",uri:I.attributes.URI},typeof I.attributes.IV<"u"&&(a.iv=I.attributes.IV)},"media-sequence"(){if(!isFinite(I.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+I.number});return}this.manifest.mediaSequence=I.number},"discontinuity-sequence"(){if(!isFinite(I.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+I.number});return}this.manifest.discontinuitySequence=I.number,b=I.number},"playlist-type"(){if(!/VOD|EVENT/.test(I.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+I.playlist});return}this.manifest.playlistType=I.playlistType},map(){r={},I.uri&&(r.uri=I.uri),I.byterange&&(r.byterange=I.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||p,!I.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),Ph(n.attributes,I.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(I.attributes&&I.attributes.TYPE&&I.attributes["GROUP-ID"]&&I.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const q=this.manifest.mediaGroups[I.attributes.TYPE];q[I.attributes["GROUP-ID"]]=q[I.attributes["GROUP-ID"]]||{},R=q[I.attributes["GROUP-ID"]],V={default:/yes/i.test(I.attributes.DEFAULT)},V.default?V.autoselect=!0:V.autoselect=/yes/i.test(I.attributes.AUTOSELECT),I.attributes.LANGUAGE&&(V.language=I.attributes.LANGUAGE),I.attributes.URI&&(V.uri=I.attributes.URI),I.attributes["INSTREAM-ID"]&&(V.instreamId=I.attributes["INSTREAM-ID"]),I.attributes.CHARACTERISTICS&&(V.characteristics=I.attributes.CHARACTERISTICS),I.attributes.FORCED&&(V.forced=/yes/i.test(I.attributes.FORCED)),R[I.attributes.NAME]=V},discontinuity(){b+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=I.dateTimeString,this.manifest.dateTimeObject=I.dateTimeObject),n.dateTimeString=I.dateTimeString,n.dateTimeObject=I.dateTimeObject},targetduration(){if(!isFinite(I.duration)||I.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+I.duration});return}this.manifest.targetDuration=I.duration,bT.call(this,this.manifest)},start(){if(!I.attributes||isNaN(I.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:I.attributes["TIME-OFFSET"],precise:I.attributes.PRECISE}},"cue-out"(){n.cueOut=I.data},"cue-out-cont"(){n.cueOutCont=I.data},"cue-in"(){n.cueIn=I.data},skip(){this.manifest.skip=Om(I.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",I.attributes,["SKIPPED-SEGMENTS"])},part(){c=!0;const q=this.manifest.segments.length,U=Om(I.attributes);n.parts=n.parts||[],n.parts.push(U),U.byterange&&(U.byterange.hasOwnProperty("offset")||(U.byterange.offset=E),E=U.byterange.offset+U.byterange.length);const H=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${H} for segment #${q}`,I.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Z,ne)=>{Z.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${ne} lacks required attribute(s): LAST-PART`})})},"server-control"(){const q=this.manifest.serverControl=Om(I.attributes);q.hasOwnProperty("canBlockReload")||(q.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),bT.call(this,this.manifest),q.canSkipDateranges&&!q.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const q=this.manifest.segments.length,U=Om(I.attributes),H=U.type&&U.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(U),U.byterange&&(U.byterange.hasOwnProperty("offset")||(U.byterange.offset=H?E:0,H&&(E=U.byterange.offset+U.byterange.length)));const Z=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Z} for segment #${q}`,I.attributes,["TYPE","URI"]),!!U.type)for(let ne=0;ne<n.preloadHints.length-1;ne++){const ie=n.preloadHints[ne];ie.type&&ie.type===U.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Z} for segment #${q} has the same TYPE ${U.type} as preload hint #${ne}`})}},"rendition-report"(){const q=Om(I.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(q);const U=this.manifest.renditionReports.length-1,H=["LAST-MSN","URI"];c&&H.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${U}`,I.attributes,H)},"part-inf"(){this.manifest.partInf=Om(I.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",I.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),bT.call(this,this.manifest)}}[I.tagType]||s).call(e)},uri(){n.uri=I.uri,i.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),a&&(n.key=a),n.timeline=b,r&&(n.map=r),E=0,n={}},comment(){},custom(){I.segment?(n.custom=n.custom||{},n.custom[I.customType]=I.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[I.customType]=I.data)}})[I.type].call(e)})}warnOnMissingAttributes_(e,i,n){const r=[];n.forEach(function(a){i.hasOwnProperty(a)||r.push(a)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Bp={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},jH=["video","audio","text"],E3=["Video","Audio","Text"],P4=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(i,n,r){var a=("00"+Number(n).toString(16)).slice(-2),c=("00"+Number(r).toString(16)).slice(-2);return"avc1."+a+"00"+c})},Md=function(e){e===void 0&&(e="");var i=e.split(","),n=[];return i.forEach(function(r){r=r.trim();var a;jH.forEach(function(c){var s=Bp[c].exec(r.toLowerCase());if(!(!s||s.length<=1)){a=c;var p=r.substring(0,s[1].length),_=r.replace(p,"");n.push({type:p,details:_,mediaType:c})}}),a||n.push({type:r,details:"",mediaType:"unknown"})}),n},HH=function(e,i){if(!e.mediaGroups.AUDIO||!i)return null;var n=e.mediaGroups.AUDIO[i];if(!n)return null;for(var r in n){var a=n[r];if(a.default&&a.playlists)return Md(a.playlists[0].attributes.CODECS)}return null},A4=function(e){return e===void 0&&(e=""),Bp.audio.test(e.trim().toLowerCase())},GH=function(e){return e===void 0&&(e=""),Bp.text.test(e.trim().toLowerCase())},Yv=function(e){if(!(!e||typeof e!="string")){var i=e.toLowerCase().split(",").map(function(a){return P4(a.trim())}),n="video";i.length===1&&A4(i[0])?n="audio":i.length===1&&GH(i[0])&&(n="application");var r="mp4";return i.every(function(a){return Bp.mp4.test(a)})?r="mp4":i.every(function(a){return Bp.webm.test(a)})?r="webm":i.every(function(a){return Bp.ogg.test(a)})&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}},v1=function(e){return e===void 0&&(e=""),yt.MediaSource&&yt.MediaSource.isTypeSupported&&yt.MediaSource.isTypeSupported(Yv(e))||!1},xT=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(i){i=i.trim();for(var n=0;n<E3.length;n++){var r=E3[n];if(Bp["muxer"+r].test(i))return!0}return!1})},I3="mp4a.40.2",WH="avc1.4d400d",qH=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ZH=/^application\/dash\+xml/i,M4=function(e){return qH.test(e)?"hls":ZH.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},YH=function(e){return e.toString(2).length},XH=function(e){return Math.ceil(YH(e)/8)},O4=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},KH=function(e){return O4(e)},Tn=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!KH(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},La=yt.BigInt||Number,L2=[La("0x1"),La("0x100"),La("0x10000"),La("0x1000000"),La("0x100000000"),La("0x10000000000"),La("0x1000000000000"),La("0x100000000000000"),La("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var QH=function(e,i){var n=i===void 0?{}:i,r=n.signed,a=r===void 0?!1:r,c=n.le,s=c===void 0?!1:c;e=Tn(e);var p=s?"reduce":"reduceRight",_=e[p]?e[p]:Array.prototype[p],b=_.call(e,function(E,I,R){var V=s?R:Math.abs(R+1-e.length);return E+La(I)*L2[V]},La(0));if(a){var S=L2[e.length]/La(2)-La(1);b=La(b),b>S&&(b-=S,b-=S,b-=La(2))}return Number(b)},JH=function(e,i){var n=i===void 0?{}:i,r=n.le,a=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=La(e);for(var c=XH(e),s=new Uint8Array(new ArrayBuffer(c)),p=0;p<c;p++){var _=a?p:Math.abs(p+1-s.length);s[_]=Number(e/L2[p]&La(255)),e<0&&(s[_]=Math.abs(~s[_]),s[_]-=p===0?1:2)}return s},L4=function(e,i){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;i||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},eG=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(i=i.filter(function(s){return s&&(s.byteLength||s.length)&&typeof s!="string"}),i.length<=1)return Tn(i[0]);var r=i.reduce(function(s,p,_){return s+(p.byteLength||p.length)},0),a=new Uint8Array(r),c=0;return i.forEach(function(s){s=Tn(s),a.set(s,c),c+=s.byteLength}),a},Rs=function(e,i,n){var r=n===void 0?{}:n,a=r.offset,c=a===void 0?0:a,s=r.mask,p=s===void 0?[]:s;e=Tn(e),i=Tn(i);var _=i.every?i.every:Array.prototype.every;return i.length&&e.length-c>=i.length&&_.call(i,function(b,S){var E=p[S]?p[S]&e[c+S]:e[c+S];return b===E})},P3="http://example.com",EC=function(e,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(e)&&(e=yt.location&&yt.location.href||"");var n=typeof yt.URL=="function",r=/^\/\//.test(e),a=!yt.location&&!/\/\//i.test(e);if(n?e=new yt.URL(e,yt.location||P3):/\/\//i.test(e)||(e=Y1.buildAbsoluteURL(yt.location&&yt.location.href||"",e)),n){var c=new URL(i,e);return a?c.href.slice(P3.length):r?c.href.slice(c.protocol.length):c.href}return Y1.buildAbsoluteURL(e,i)},tG=function(e,i,n){i.forEach(function(r){for(var a in e.mediaGroups[r])for(var c in e.mediaGroups[r][a]){var s=e.mediaGroups[r][a][c];n(s,r,a,c)}})},iG=function(e){return yt.atob?yt.atob(e):Buffer.from(e,"base64").toString("binary")};function nG(t){for(var e=iG(t),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}var zf={},Vh={};function rG(t,e,i){if(i===void 0&&(i=Array.prototype),t&&typeof i.find=="function")return i.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];if(e.call(void 0,r,n,t))return r}}function IC(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function sG(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}var D4=IC({HTML:"text/html",isHTML:function(t){return t===D4.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),R4=IC({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===R4.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Vh.assign=sG;Vh.find=rG;Vh.freeze=IC;Vh.MIME_TYPE=D4;Vh.NAMESPACE=R4;var B4=Vh,zd=B4.find,Xv=B4.NAMESPACE;function oG(t){return t!==""}function aG(t){return t?t.split(/[\t\n\f\r ]+/).filter(oG):[]}function lG(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function A3(t){if(!t)return[];var e=aG(t);return Object.keys(e.reduce(lG,{}))}function uG(t){return function(e){return t&&t.indexOf(e)!==-1}}function vy(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function Su(t,e){var i=t.prototype;if(!(i instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,vy(i,n),t.prototype=i=n}i.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),i.constructor=t)}var Cu={},td=Cu.ELEMENT_NODE=1,vg=Cu.ATTRIBUTE_NODE=2,X1=Cu.TEXT_NODE=3,F4=Cu.CDATA_SECTION_NODE=4,$4=Cu.ENTITY_REFERENCE_NODE=5,cG=Cu.ENTITY_NODE=6,N4=Cu.PROCESSING_INSTRUCTION_NODE=7,z4=Cu.COMMENT_NODE=8,V4=Cu.DOCUMENT_NODE=9,U4=Cu.DOCUMENT_TYPE_NODE=10,Mh=Cu.DOCUMENT_FRAGMENT_NODE=11,dG=Cu.NOTATION_NODE=12,dl={},_a={};dl.INDEX_SIZE_ERR=(_a[1]="Index size error",1);dl.DOMSTRING_SIZE_ERR=(_a[2]="DOMString size error",2);var gu=dl.HIERARCHY_REQUEST_ERR=(_a[3]="Hierarchy request error",3);dl.WRONG_DOCUMENT_ERR=(_a[4]="Wrong document",4);dl.INVALID_CHARACTER_ERR=(_a[5]="Invalid character",5);dl.NO_DATA_ALLOWED_ERR=(_a[6]="No data allowed",6);dl.NO_MODIFICATION_ALLOWED_ERR=(_a[7]="No modification allowed",7);var j4=dl.NOT_FOUND_ERR=(_a[8]="Not found",8);dl.NOT_SUPPORTED_ERR=(_a[9]="Not supported",9);var M3=dl.INUSE_ATTRIBUTE_ERR=(_a[10]="Attribute in use",10);dl.INVALID_STATE_ERR=(_a[11]="Invalid state",11);dl.SYNTAX_ERR=(_a[12]="Syntax error",12);dl.INVALID_MODIFICATION_ERR=(_a[13]="Invalid modification",13);dl.NAMESPACE_ERR=(_a[14]="Invalid namespace",14);dl.INVALID_ACCESS_ERR=(_a[15]="Invalid access",15);function Co(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,_a[t]),this.message=_a[t],Error.captureStackTrace&&Error.captureStackTrace(this,Co);return i.code=t,e&&(this.message=this.message+": "+e),i}Co.prototype=Error.prototype;vy(dl,Co);function wh(){}wh.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var i=[],n=0;n<this.length;n++)Wm(this[n],i,t,e);return i.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function yg(t,e){this._node=t,this._refresh=e,PC(this)}function PC(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var i=t._refresh(t._node);t5(t,"length",i.length),vy(i,t),t._inc=e}}yg.prototype.item=function(t){return PC(this),this[t]};Su(yg,wh);function K1(){}function H4(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function O3(t,e,i,n){if(n?e[H4(e,n)]=i:e[e.length++]=i,t){i.ownerElement=t;var r=t.ownerDocument;r&&(n&&q4(r,t,n),hG(r,t,i))}}function L3(t,e,i){var n=H4(e,i);if(n>=0){for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,t){var a=t.ownerDocument;a&&(q4(a,t,i),i.ownerElement=null)}}else throw new Co(j4,new Error(t.tagName+"@"+i))}K1.prototype={length:0,item:wh.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Co(M3);var i=this.getNamedItem(t.nodeName);return O3(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e=t.ownerElement,i;if(e&&e!=this._ownerElement)throw new Co(M3);return i=this.getNamedItemNS(t.namespaceURI,t.localName),O3(this._ownerElement,this,t,i),i},removeNamedItem:function(t){var e=this.getNamedItem(t);return L3(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return L3(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var n=this[i];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function G4(){}G4.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var n=new yy;if(n.implementation=this,n.childNodes=new wh,n.doctype=i||null,i&&n.appendChild(i),e){var r=n.createElementNS(t,e);n.appendChild(r)}return n},createDocumentType:function(t,e,i){var n=new tx;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=i||"",n}};function ts(){}ts.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Q1(this,t,e)},replaceChild:function(t,e){Q1(this,t,e,Y4),e&&this.removeChild(e)},removeChild:function(t){return Z4(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return D2(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==X1&&t.nodeType==X1?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===t)return n}e=e.nodeType==vg?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,t))return i[t];e=e.nodeType==vg?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function W4(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}vy(Cu,ts);vy(Cu,ts.prototype);function Kv(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Kv(t,e))return!0;while(t=t.nextSibling)}function yy(){this.ownerDocument=this}function hG(t,e,i){t&&t._inc++;var n=i.namespaceURI;n===Xv.XMLNS&&(e._nsMap[i.prefix?i.localName:""]=i.value)}function q4(t,e,i,n){t&&t._inc++;var r=i.namespaceURI;r===Xv.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function AC(t,e,i){if(t&&t._inc){t._inc++;var n=e.childNodes;if(i)n[n.length++]=i;else{for(var r=e.firstChild,a=0;r;)n[a++]=r,r=r.nextSibling;n.length=a,delete n[n.length]}}}function Z4(t,e){var i=e.previousSibling,n=e.nextSibling;return i?i.nextSibling=n:t.firstChild=n,n?n.previousSibling=i:t.lastChild=i,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,AC(t.ownerDocument,t),e}function fG(t){return t&&(t.nodeType===ts.DOCUMENT_NODE||t.nodeType===ts.DOCUMENT_FRAGMENT_NODE||t.nodeType===ts.ELEMENT_NODE)}function pG(t){return t&&(Vd(t)||MC(t)||Oh(t)||t.nodeType===ts.DOCUMENT_FRAGMENT_NODE||t.nodeType===ts.COMMENT_NODE||t.nodeType===ts.PROCESSING_INSTRUCTION_NODE)}function Oh(t){return t&&t.nodeType===ts.DOCUMENT_TYPE_NODE}function Vd(t){return t&&t.nodeType===ts.ELEMENT_NODE}function MC(t){return t&&t.nodeType===ts.TEXT_NODE}function D3(t,e){var i=t.childNodes||[];if(zd(i,Vd)||Oh(e))return!1;var n=zd(i,Oh);return!(e&&n&&i.indexOf(n)>i.indexOf(e))}function R3(t,e){var i=t.childNodes||[];function n(a){return Vd(a)&&a!==e}if(zd(i,n))return!1;var r=zd(i,Oh);return!(e&&r&&i.indexOf(r)>i.indexOf(e))}function mG(t,e,i){if(!fG(t))throw new Co(gu,"Unexpected parent node type "+t.nodeType);if(i&&i.parentNode!==t)throw new Co(j4,"child not in parent");if(!pG(e)||Oh(e)&&t.nodeType!==ts.DOCUMENT_NODE)throw new Co(gu,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function gG(t,e,i){var n=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===ts.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Vd);if(a.length>1||zd(r,MC))throw new Co(gu,"More than one element or text in fragment");if(a.length===1&&!D3(t,i))throw new Co(gu,"Element in fragment can not be inserted before doctype")}if(Vd(e)&&!D3(t,i))throw new Co(gu,"Only one element can be added and only after doctype");if(Oh(e)){if(zd(n,Oh))throw new Co(gu,"Only one doctype is allowed");var c=zd(n,Vd);if(i&&n.indexOf(c)<n.indexOf(i))throw new Co(gu,"Doctype can only be inserted before an element");if(!i&&c)throw new Co(gu,"Doctype can not be appended since element is present")}}function Y4(t,e,i){var n=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===ts.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Vd);if(a.length>1||zd(r,MC))throw new Co(gu,"More than one element or text in fragment");if(a.length===1&&!R3(t,i))throw new Co(gu,"Element in fragment can not be inserted before doctype")}if(Vd(e)&&!R3(t,i))throw new Co(gu,"Only one element can be added and only after doctype");if(Oh(e)){if(zd(n,function(p){return Oh(p)&&p!==i}))throw new Co(gu,"Only one doctype is allowed");var c=zd(n,Vd);if(i&&n.indexOf(c)<n.indexOf(i))throw new Co(gu,"Doctype can only be inserted before an element")}}function Q1(t,e,i,n){mG(t,e,i),t.nodeType===ts.DOCUMENT_NODE&&(n||gG)(t,e,i);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Mh){var a=e.firstChild;if(a==null)return e;var c=e.lastChild}else a=c=e;var s=i?i.previousSibling:t.lastChild;a.previousSibling=s,c.nextSibling=i,s?s.nextSibling=a:t.firstChild=a,i==null?t.lastChild=c:i.previousSibling=c;do a.parentNode=t;while(a!==c&&(a=a.nextSibling));return AC(t.ownerDocument||t,t),e.nodeType==Mh&&(e.firstChild=e.lastChild=null),e}function _G(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,AC(t.ownerDocument,t,e),e}yy.prototype={nodeName:"#document",nodeType:V4,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Mh){for(var i=t.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,e),i=n}return t}return Q1(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===td&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Z4(this,t)},replaceChild:function(t,e){Q1(this,t,e,Y4),t.ownerDocument=this,e&&this.removeChild(e),Vd(t)&&(this.documentElement=t)},importNode:function(t,e){return e5(this,t,e)},getElementById:function(t){var e=null;return Kv(this.documentElement,function(i){if(i.nodeType==td&&i.getAttribute("id")==t)return e=i,!0}),e},getElementsByClassName:function(t){var e=A3(t);return new yg(this,function(i){var n=[];return e.length>0&&Kv(i.documentElement,function(r){if(r!==i&&r.nodeType===td){var a=r.getAttribute("class");if(a){var c=t===a;if(!c){var s=A3(a);c=e.every(uG(s))}c&&n.push(r)}}}),n})},createElement:function(t){var e=new Hp;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new wh;var i=e.attributes=new K1;return i._ownerElement=e,e},createDocumentFragment:function(){var t=new ix;return t.ownerDocument=this,t.childNodes=new wh,t},createTextNode:function(t){var e=new OC;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new LC;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new DC;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new BC;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new J1;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new RC;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new Hp,n=e.split(":"),r=i.attributes=new K1;return i.childNodes=new wh,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,r._ownerElement=i,i},createAttributeNS:function(t,e){var i=new J1,n=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,n.length==2?(i.prefix=n[0],i.localName=n[1]):i.localName=e,i}};Su(yy,ts);function Hp(){this._nsMap={}}Hp.prototype={nodeType:td,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Mh?this.insertBefore(t,null):_G(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new yg(this,function(e){var i=[];return Kv(e,function(n){n!==e&&n.nodeType==td&&(t==="*"||n.tagName==t)&&i.push(n)}),i})},getElementsByTagNameNS:function(t,e){return new yg(this,function(i){var n=[];return Kv(i,function(r){r!==i&&r.nodeType===td&&(t==="*"||r.namespaceURI===t)&&(e==="*"||r.localName==e)&&n.push(r)}),n})}};yy.prototype.getElementsByTagName=Hp.prototype.getElementsByTagName;yy.prototype.getElementsByTagNameNS=Hp.prototype.getElementsByTagNameNS;Su(Hp,ts);function J1(){}J1.prototype.nodeType=vg;Su(J1,ts);function by(){}by.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(_a[gu])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){var n=this.data.substring(0,t),r=this.data.substring(t+e);i=n+i+r,this.nodeValue=this.data=i,this.length=i.length}};Su(by,ts);function OC(){}OC.prototype={nodeName:"#text",nodeType:X1,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Su(OC,by);function LC(){}LC.prototype={nodeName:"#comment",nodeType:z4};Su(LC,by);function DC(){}DC.prototype={nodeName:"#cdata-section",nodeType:F4};Su(DC,by);function tx(){}tx.prototype.nodeType=U4;Su(tx,ts);function X4(){}X4.prototype.nodeType=dG;Su(X4,ts);function K4(){}K4.prototype.nodeType=cG;Su(K4,ts);function RC(){}RC.prototype.nodeType=$4;Su(RC,ts);function ix(){}ix.prototype.nodeName="#document-fragment";ix.prototype.nodeType=Mh;Su(ix,ts);function BC(){}BC.prototype.nodeType=N4;Su(BC,ts);function Q4(){}Q4.prototype.serializeToString=function(t,e,i){return J4.call(t,e,i)};ts.prototype.toString=J4;function J4(t,e){var i=[],n=this.nodeType==9&&this.documentElement||this,r=n.prefix,a=n.namespaceURI;if(a&&r==null){var r=n.lookupPrefix(a);if(r==null)var c=[{namespace:a,prefix:null}]}return Wm(this,i,t,e,c),i.join("")}function B3(t,e,i){var n=t.prefix||"",r=t.namespaceURI;if(!r||n==="xml"&&r===Xv.XML||r===Xv.XMLNS)return!1;for(var a=i.length;a--;){var c=i[a];if(c.prefix===n)return c.namespace!==r}return!0}function wT(t,e,i){t.push(" ",e,'="',i.replace(/[<>&"\t\n\r]/g,W4),'"')}function Wm(t,e,i,n,r){if(r||(r=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case td:var a=t.attributes,c=a.length,U=t.firstChild,s=t.tagName;i=Xv.isHTML(t.namespaceURI)||i;var p=s;if(!i&&!t.prefix&&t.namespaceURI){for(var _,b=0;b<a.length;b++)if(a.item(b).name==="xmlns"){_=a.item(b).value;break}if(!_)for(var S=r.length-1;S>=0;S--){var E=r[S];if(E.prefix===""&&E.namespace===t.namespaceURI){_=E.namespace;break}}if(_!==t.namespaceURI)for(var S=r.length-1;S>=0;S--){var E=r[S];if(E.namespace===t.namespaceURI){E.prefix&&(p=E.prefix+":"+s);break}}}e.push("<",p);for(var I=0;I<c;I++){var R=a.item(I);R.prefix=="xmlns"?r.push({prefix:R.localName,namespace:R.value}):R.nodeName=="xmlns"&&r.push({prefix:"",namespace:R.value})}for(var I=0;I<c;I++){var R=a.item(I);if(B3(R,i,r)){var V=R.prefix||"",q=R.namespaceURI;wT(e,V?"xmlns:"+V:"xmlns",q),r.push({prefix:V,namespace:q})}Wm(R,e,i,n,r)}if(s===p&&B3(t,i,r)){var V=t.prefix||"",q=t.namespaceURI;wT(e,V?"xmlns:"+V:"xmlns",q),r.push({prefix:V,namespace:q})}if(U||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(e.push(">"),i&&/^script$/i.test(s))for(;U;)U.data?e.push(U.data):Wm(U,e,i,n,r.slice()),U=U.nextSibling;else for(;U;)Wm(U,e,i,n,r.slice()),U=U.nextSibling;e.push("</",p,">")}else e.push("/>");return;case V4:case Mh:for(var U=t.firstChild;U;)Wm(U,e,i,n,r.slice()),U=U.nextSibling;return;case vg:return wT(e,t.name,t.value);case X1:return e.push(t.data.replace(/[<&>]/g,W4));case F4:return e.push("<![CDATA[",t.data,"]]>");case z4:return e.push("<!--",t.data,"-->");case U4:var H=t.publicId,Z=t.systemId;if(e.push("<!DOCTYPE ",t.name),H)e.push(" PUBLIC ",H),Z&&Z!="."&&e.push(" ",Z),e.push(">");else if(Z&&Z!=".")e.push(" SYSTEM ",Z,">");else{var ne=t.internalSubset;ne&&e.push(" [",ne,"]"),e.push(">")}return;case N4:return e.push("<?",t.target," ",t.data,"?>");case $4:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function e5(t,e,i){var n;switch(e.nodeType){case td:n=e.cloneNode(!1),n.ownerDocument=t;case Mh:break;case vg:i=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,i)for(var r=e.firstChild;r;)n.appendChild(e5(t,r,i)),r=r.nextSibling;return n}function D2(t,e,i){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=e[r];typeof a!="object"&&a!=n[r]&&(n[r]=a)}switch(e.childNodes&&(n.childNodes=new wh),n.ownerDocument=t,n.nodeType){case td:var c=e.attributes,s=n.attributes=new K1,p=c.length;s._ownerElement=n;for(var _=0;_<p;_++)n.setAttributeNode(D2(t,c.item(_),!0));break;case vg:i=!0}if(i)for(var b=e.firstChild;b;)n.appendChild(D2(t,b,i)),b=b.nextSibling;return n}function t5(t,e,i){t[e]=i}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case td:case Mh:var i=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}};Object.defineProperty(yg.prototype,"length",{get:function(){return PC(this),this.$$length}}),Object.defineProperty(ts.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case td:case Mh:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),t5=function(e,i,n){e["$$"+i]=n}}}catch{}zf.DocumentType=tx;zf.DOMException=Co;zf.DOMImplementation=G4;zf.Element=Hp;zf.Node=ts;zf.NodeList=wh;zf.XMLSerializer=Q4;var nx={},i5={};(function(t){var e=Vh.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES})(i5);var FC={},Qv=Vh.NAMESPACE,R2=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F3=new RegExp("[\\-\\.0-9"+R2.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),$3=new RegExp("^"+R2.source+F3.source+"*(?::"+R2.source+F3.source+"*)?$"),J_=0,ff=1,Lm=2,ev=3,Dm=4,Rm=5,tv=6,t1=7;function bg(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,bg)}bg.prototype=new Error;bg.prototype.name=bg.name;function n5(){}n5.prototype={parse:function(t,e,i){var n=this.domBuilder;n.startDocument(),r5(e,e={}),vG(t,e,i,n,this.errorHandler),n.endDocument()}};function vG(t,e,i,n,r){function a(Qe){if(Qe>65535){Qe-=65536;var gt=55296+(Qe>>10),nt=56320+(Qe&1023);return String.fromCharCode(gt,nt)}else return String.fromCharCode(Qe)}function c(Qe){var gt=Qe.slice(1,-1);return Object.hasOwnProperty.call(i,gt)?i[gt]:gt.charAt(0)==="#"?a(parseInt(gt.substr(1).replace("x","0x"))):(r.error("entity not found:"+Qe),Qe)}function s(Qe){if(Qe>V){var gt=t.substring(V,Qe).replace(/&#?\w+;/g,c);E&&p(V),n.characters(gt,0,Qe-V),V=Qe}}function p(Qe,gt){for(;Qe>=b&&(gt=S.exec(t));)_=gt.index,b=_+gt[0].length,E.lineNumber++;E.columnNumber=Qe-_+1}for(var _=0,b=0,S=/.*(?:\r\n?|\n)|.*$/g,E=n.locator,I=[{currentNSMap:e}],R={},V=0;;){try{var q=t.indexOf("<",V);if(q<0){if(!t.substr(V).match(/^\s*$/)){var U=n.doc,H=U.createTextNode(t.substr(V));U.appendChild(H),n.currentElement=H}return}switch(q>V&&s(q),t.charAt(q+1)){case"/":var we=t.indexOf(">",q+3),Z=t.substring(q+2,we).replace(/[ \t\n\r]+$/g,""),ne=I.pop();we<0?(Z=t.substring(q+2).replace(/[\s<].*/,""),r.error("end tag name: "+Z+" is not complete:"+ne.tagName),we=q+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),r.error("end tag name: "+Z+" maybe not complete"),we=q+1+Z.length);var ie=ne.localNSMap,oe=ne.tagName==Z,pe=oe||ne.tagName&&ne.tagName.toLowerCase()==Z.toLowerCase();if(pe){if(n.endElement(ne.uri,ne.localName,Z),ie)for(var de in ie)Object.prototype.hasOwnProperty.call(ie,de)&&n.endPrefixMapping(de);oe||r.fatalError("end tag name: "+Z+" is not match the current start tagName:"+ne.tagName)}else I.push(ne);we++;break;case"?":E&&p(q),we=TG(t,q,n);break;case"!":E&&p(q),we=wG(t,q,n,r);break;default:E&&p(q);var fe=new s5,ge=I[I.length-1].currentNSMap,we=yG(t,q,fe,ge,c,r),Ie=fe.length;if(!fe.closed&&xG(t,we,fe.tagName,R)&&(fe.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),E&&Ie){for(var Oe=N3(E,{}),ke=0;ke<Ie;ke++){var Ee=fe[ke];p(Ee.offset),Ee.locator=N3(E,{})}n.locator=Oe,z3(fe,n,ge)&&I.push(fe),n.locator=E}else z3(fe,n,ge)&&I.push(fe);Qv.isHTML(fe.uri)&&!fe.closed?we=bG(t,we,fe.tagName,c,n):we++}}catch(Qe){if(Qe instanceof bg)throw Qe;r.error("element parse error: "+Qe),we=-1}we>V?V=we:s(Math.max(q,V)+1)}}function N3(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function yG(t,e,i,n,r,a){function c(E,I,R){i.attributeNames.hasOwnProperty(E)&&a.fatalError("Attribute "+E+" redefined"),i.addValue(E,I.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),R)}for(var s,p,_=++e,b=J_;;){var S=t.charAt(_);switch(S){case"=":if(b===ff)s=t.slice(e,_),b=ev;else if(b===Lm)b=ev;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(b===ev||b===ff)if(b===ff&&(a.warning('attribute value must after "="'),s=t.slice(e,_)),e=_+1,_=t.indexOf(S,e),_>0)p=t.slice(e,_),c(s,p,e-1),b=Rm;else throw new Error("attribute value no end '"+S+"' match");else if(b==Dm)p=t.slice(e,_),c(s,p,e),a.warning('attribute "'+s+'" missed start quot('+S+")!!"),e=_+1,b=Rm;else throw new Error('attribute value must after "="');break;case"/":switch(b){case J_:i.setTagName(t.slice(e,_));case Rm:case tv:case t1:b=t1,i.closed=!0;case Dm:case ff:break;case Lm:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),b==J_&&i.setTagName(t.slice(e,_)),_;case">":switch(b){case J_:i.setTagName(t.slice(e,_));case Rm:case tv:case t1:break;case Dm:case ff:p=t.slice(e,_),p.slice(-1)==="/"&&(i.closed=!0,p=p.slice(0,-1));case Lm:b===Lm&&(p=s),b==Dm?(a.warning('attribute "'+p+'" missed quot(")!'),c(s,p,e)):((!Qv.isHTML(n[""])||!p.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),c(p,p,e));break;case ev:throw new Error("attribute value missed!!")}return _;case"":S=" ";default:if(S<=" ")switch(b){case J_:i.setTagName(t.slice(e,_)),b=tv;break;case ff:s=t.slice(e,_),b=Lm;break;case Dm:var p=t.slice(e,_);a.warning('attribute "'+p+'" missed quot(")!!'),c(s,p,e);case Rm:b=tv;break}else switch(b){case Lm:i.tagName,(!Qv.isHTML(n[""])||!s.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),c(s,s,e),e=_,b=ff;break;case Rm:a.warning('attribute space is required"'+s+'"!!');case tv:b=ff,e=_;break;case ev:b=Dm,e=_;break;case t1:throw new Error("elements closed character '/' and '>' must be connected to")}}_++}}function z3(t,e,i){for(var n=t.tagName,r=null,S=t.length;S--;){var a=t[S],c=a.qName,s=a.value,E=c.indexOf(":");if(E>0)var p=a.prefix=c.slice(0,E),_=c.slice(E+1),b=p==="xmlns"&&_;else _=c,p=null,b=c==="xmlns"&&"";a.localName=_,b!==!1&&(r==null&&(r={},r5(i,i={})),i[b]=r[b]=s,a.uri=Qv.XMLNS,e.startPrefixMapping(b,s))}for(var S=t.length;S--;){a=t[S];var p=a.prefix;p&&(p==="xml"&&(a.uri=Qv.XML),p!=="xmlns"&&(a.uri=i[p||""]))}var E=n.indexOf(":");E>0?(p=t.prefix=n.slice(0,E),_=t.localName=n.slice(E+1)):(p=null,_=t.localName=n);var I=t.uri=i[p||""];if(e.startElement(I,_,n,t),t.closed){if(e.endElement(I,_,n),r)for(p in r)Object.prototype.hasOwnProperty.call(r,p)&&e.endPrefixMapping(p)}else return t.currentNSMap=i,t.localNSMap=r,!0}function bG(t,e,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var a=t.indexOf("</"+i+">",e),c=t.substring(e+1,a);if(/[&<]/.test(c))return/^script$/i.test(i)?(r.characters(c,0,c.length),a):(c=c.replace(/&#?\w+;/g,n),r.characters(c,0,c.length),a)}return e+1}function xG(t,e,i,n){var r=n[i];return r==null&&(r=t.lastIndexOf("</"+i+">"),r<e&&(r=t.lastIndexOf("</"+i)),n[i]=r),r<e}function r5(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function wG(t,e,i,n){var r=t.charAt(e+2);switch(r){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(i.comment(t,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,a-e-9),i.endCDATA(),a+3}var c=SG(t,e),s=c.length;if(s>1&&/!doctype/i.test(c[0][0])){var p=c[1][0],_=!1,b=!1;s>3&&(/^public$/i.test(c[2][0])?(_=c[3][0],b=s>4&&c[4][0]):/^system$/i.test(c[2][0])&&(b=c[3][0]));var S=c[s-1];return i.startDTD(p,_,b),i.endDTD(),S.index+S[0].length}}return-1}function TG(t,e,i){var n=t.indexOf("?>",e);if(n){var r=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,i.processingInstruction(r[1],r[2]),n+2):-1}return-1}function s5(){this.attributeNames={}}s5.prototype={setTagName:function(t){if(!$3.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!$3.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function SG(t,e){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);i=r.exec(t);)if(n.push(i),i[1])return n}FC.XMLReader=n5;FC.ParseError=bg;var CG=Vh,kG=zf,V3=i5,o5=FC,EG=kG.DOMImplementation,U3=CG.NAMESPACE,IG=o5.ParseError,PG=o5.XMLReader;function a5(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function l5(t){this.options=t||{locator:{}}}l5.prototype.parseFromString=function(t,e){var i=this.options,n=new PG,r=i.domBuilder||new xy,a=i.errorHandler,c=i.locator,s=i.xmlns||{},p=/\/x?html?$/.test(e),_=p?V3.HTML_ENTITIES:V3.XML_ENTITIES;c&&r.setDocumentLocator(c),n.errorHandler=AG(a,r,c),n.domBuilder=i.domBuilder||r,p&&(s[""]=U3.HTML),s.xml=s.xml||U3.XML;var b=i.normalizeLineEndings||a5;return t&&typeof t=="string"?n.parse(b(t),s,_):n.errorHandler.error("invalid doc source"),r.doc};function AG(t,e,i){if(!t){if(e instanceof xy)return e;t=e}var n={},r=t instanceof Function;i=i||{};function a(c){var s=t[c];!s&&r&&(s=t.length==2?function(p){t(c,p)}:t),n[c]=s&&function(p){s("[xmldom "+c+"]	"+p+B2(i))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function xy(){this.cdata=!1}function Bm(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}xy.prototype={startDocument:function(){this.doc=new EG().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,i,n){var r=this.doc,a=r.createElementNS(t,i||e),c=n.length;i1(this,a),this.currentElement=a,this.locator&&Bm(this.locator,a);for(var s=0;s<c;s++){var t=n.getURI(s),p=n.getValue(s),i=n.getQName(s),_=r.createAttributeNS(t,i);this.locator&&Bm(n.getLocator(s),_),_.value=_.nodeValue=p,a.setAttributeNode(_)}},endElement:function(t,e,i){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.doc.createProcessingInstruction(t,e);this.locator&&Bm(this.locator,i),i1(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=j3.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Bm(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=j3.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Bm(this.locator,n),i1(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(t,e,i);this.locator&&Bm(this.locator,r),i1(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]	"+t,B2(this.locator))},error:function(t){console.error("[xmldom error]	"+t,B2(this.locator))},fatalError:function(t){throw new IG(t,this.locator)}};function B2(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function j3(t,e,i){return typeof t=="string"?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){xy.prototype[t]=function(){return null}});function i1(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}nx.__DOMHandler=xy;nx.normalizeLineEndings=a5;nx.DOMParser=l5;var MG=nx.DOMParser;/*! @name mpd-parser @version 1.1.1 @license Apache-2.0 */const H3=t=>!!t&&typeof t=="object",ol=(...t)=>t.reduce((e,i)=>(typeof i!="object"||Object.keys(i).forEach(n=>{Array.isArray(e[n])&&Array.isArray(i[n])?e[n]=e[n].concat(i[n]):H3(e[n])&&H3(i[n])?e[n]=ol(e[n],i[n]):e[n]=i[n]}),e),{}),u5=t=>Object.keys(t).map(e=>t[e]),OG=(t,e)=>{const i=[];for(let n=t;n<e;n++)i.push(n);return i},xg=t=>t.reduce((e,i)=>e.concat(i),[]),c5=t=>{if(!t.length)return[];const e=[];for(let i=0;i<t.length;i++)e.push(t[i]);return e},LG=(t,e)=>t.reduce((i,n,r)=>(n[e]&&i.push(r),i),[]),DG=(t,e)=>u5(t.reduce((i,n)=>(n.forEach(r=>{i[e(r)]=r}),i),{}));var wg={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Jv=({baseUrl:t="",source:e="",range:i="",indexRange:n=""})=>{const r={uri:e,resolvedUri:EC(t||"",e)};if(i||n){const c=(i||n).split("-");let s=yt.BigInt?yt.BigInt(c[0]):parseInt(c[0],10),p=yt.BigInt?yt.BigInt(c[1]):parseInt(c[1],10);s<Number.MAX_SAFE_INTEGER&&typeof s=="bigint"&&(s=Number(s)),p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p));let _;typeof p=="bigint"||typeof s=="bigint"?_=yt.BigInt(p)-yt.BigInt(s)+yt.BigInt(1):_=p-s+1,typeof _=="bigint"&&_<Number.MAX_SAFE_INTEGER&&(_=Number(_)),r.byterange={length:_,offset:s}}return r},RG=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=yt.BigInt(t.offset)+yt.BigInt(t.length)-yt.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},G3=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),BG={static(t){const{duration:e,timescale:i=1,sourceDuration:n,periodDuration:r}=t,a=G3(t.endNumber),c=e/i;return typeof a=="number"?{start:0,end:a}:typeof r=="number"?{start:0,end:r/c}:{start:0,end:n/c}},dynamic(t){const{NOW:e,clientOffset:i,availabilityStartTime:n,timescale:r=1,duration:a,periodStart:c=0,minimumUpdatePeriod:s=0,timeShiftBufferDepth:p=1/0}=t,_=G3(t.endNumber),b=(e+i)/1e3,S=n+c,I=b+s-S,R=Math.ceil(I*r/a),V=Math.floor((b-S-p)*r/a),q=Math.floor((b-S)*r/a);return{start:Math.max(0,V),end:typeof _=="number"?_:Math.min(R,q)}}},FG=t=>e=>{const{duration:i,timescale:n=1,periodStart:r,startNumber:a=1}=t;return{number:a+e,duration:i/n,timeline:r,time:e*i}},$C=t=>{const{type:e,duration:i,timescale:n=1,periodDuration:r,sourceDuration:a}=t,{start:c,end:s}=BG[e](t),p=OG(c,s).map(FG(t));if(e==="static"){const _=p.length-1,b=typeof r=="number"?r:a;p[_].duration=b-i/n*_}return p},d5=t=>{const{baseUrl:e,initialization:i={},sourceDuration:n,indexRange:r="",periodStart:a,presentationTime:c,number:s=0,duration:p}=t;if(!e)throw new Error(wg.NO_BASE_URL);const _=Jv({baseUrl:e,source:i.sourceURL,range:i.range}),b=Jv({baseUrl:e,source:e,indexRange:r});if(b.map=_,p){const S=$C(t);S.length&&(b.duration=S[0].duration,b.timeline=S[0].timeline)}else n&&(b.duration=n,b.timeline=a);return b.presentationTime=c||a,b.number=s,[b]},NC=(t,e,i)=>{const n=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,a=t.timeline||0,c=t.sidx.byterange,s=c.offset+c.length,p=e.timescale,_=e.references.filter(q=>q.referenceType!==1),b=[],S=t.endList?"static":"dynamic",E=t.sidx.timeline;let I=E,R=t.mediaSequence||0,V;typeof e.firstOffset=="bigint"?V=yt.BigInt(s)+e.firstOffset:V=s+e.firstOffset;for(let q=0;q<_.length;q++){const U=e.references[q],H=U.referencedSize,Z=U.subsegmentDuration;let ne;typeof V=="bigint"?ne=V+yt.BigInt(H)-yt.BigInt(1):ne=V+H-1;const ie=`${V}-${ne}`,pe=d5({baseUrl:i,timescale:p,timeline:a,periodStart:E,presentationTime:I,number:R,duration:Z,sourceDuration:r,indexRange:ie,type:S})[0];n&&(pe.map=n),b.push(pe),typeof V=="bigint"?V+=yt.BigInt(H):V+=H,I+=Z/p,R++}return t.segments=b,t},$G=["AUDIO","SUBTITLES"],NG=1/60,h5=t=>DG(t,({timeline:e})=>e).sort((e,i)=>e.timeline>i.timeline?1:-1),zG=(t,e)=>{for(let i=0;i<t.length;i++)if(t[i].attributes.NAME===e)return t[i];return null},W3=t=>{let e=[];return tG(t,$G,(i,n,r,a)=>{e=e.concat(i.playlists||[])}),e},q3=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((i,n)=>{i.number=t.mediaSequence+n})},VG=({oldPlaylists:t,newPlaylists:e,timelineStarts:i})=>{e.forEach(n=>{n.discontinuitySequence=i.findIndex(function({timeline:p}){return p===n.timeline});const r=zG(t,n.attributes.NAME);if(!r||n.sidx)return;const a=n.segments[0],c=r.segments.findIndex(function(p){return Math.abs(p.presentationTime-a.presentationTime)<NG});if(c===-1){q3({playlist:n,mediaSequence:r.mediaSequence+r.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!r.segments.length&&n.timeline>r.timeline||r.segments.length&&n.timeline>r.segments[r.segments.length-1].timeline)&&n.discontinuitySequence--;return}r.segments[c].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),q3({playlist:n,mediaSequence:r.segments[c].number})})},UG=({oldManifest:t,newManifest:e})=>{const i=t.playlists.concat(W3(t)),n=e.playlists.concat(W3(e));return e.timelineStarts=h5([t.timelineStarts,e.timelineStarts]),VG({oldPlaylists:i,newPlaylists:n,timelineStarts:e.timelineStarts}),e},rx=t=>t&&t.uri+"-"+RG(t.byterange),TT=t=>u5(t.reduce((i,n)=>{const r=n.attributes.id+(n.attributes.lang||"");return i[r]?(n.segments&&(n.segments[0]&&(n.segments[0].discontinuity=!0),i[r].segments.push(...n.segments)),n.attributes.contentProtection&&(i[r].attributes.contentProtection=n.attributes.contentProtection)):(i[r]=n,i[r].attributes.timelineStarts=[]),i[r].attributes.timelineStarts.push({start:n.attributes.periodStart,timeline:n.attributes.periodStart}),i},{})).map(i=>(i.discontinuityStarts=LG(i.segments||[],"discontinuity"),i)),zC=(t,e)=>{const i=rx(t.sidx),n=i&&e[i]&&e[i].sidx;return n&&NC(t,n,t.sidx.resolvedUri),t},jG=(t,e={})=>{if(!Object.keys(e).length)return t;for(const i in t)t[i]=zC(t[i],e);return t},HG=({attributes:t,segments:e,sidx:i,mediaSequence:n,discontinuitySequence:r,discontinuityStarts:a},c)=>{const s={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,["PROGRAM-ID"]:1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:r,discontinuityStarts:a,timelineStarts:t.timelineStarts,mediaSequence:n,segments:e};return t.contentProtection&&(s.contentProtection=t.contentProtection),i&&(s.sidx=i),c&&(s.attributes.AUDIO="audio",s.attributes.SUBTITLES="subs"),s},GG=({attributes:t,segments:e,mediaSequence:i,discontinuityStarts:n,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const a={NAME:t.id,BANDWIDTH:t.bandwidth,["PROGRAM-ID"]:1};return t.codecs&&(a.CODECS=t.codecs),{attributes:a,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:n,discontinuitySequence:r,mediaSequence:i,segments:e}},WG=(t,e={},i=!1)=>{let n;const r=t.reduce((a,c)=>{const s=c.attributes.role&&c.attributes.role.value||"",p=c.attributes.lang||"";let _=c.attributes.label||"main";if(p&&!c.attributes.label){const S=s?` (${s})`:"";_=`${c.attributes.lang}${S}`}a[_]||(a[_]={language:p,autoselect:!0,default:s==="main",playlists:[],uri:""});const b=zC(HG(c,i),e);return a[_].playlists.push(b),typeof n>"u"&&s==="main"&&(n=c,n.default=!0),a},{});if(!n){const a=Object.keys(r)[0];r[a].default=!0}return r},qG=(t,e={})=>t.reduce((i,n)=>{const r=n.attributes.label||n.attributes.lang||"text";return i[r]||(i[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),i[r].playlists.push(zC(GG(n),e)),i},{}),ZG=t=>t.reduce((e,i)=>(i&&i.forEach(n=>{const{channel:r,language:a}=n;e[a]={autoselect:!1,default:!1,instreamId:r,language:a},n.hasOwnProperty("aspectRatio")&&(e[a].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(e[a].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(e[a]["3D"]=n["3D"])}),e),{}),YG=({attributes:t,segments:e,sidx:i,discontinuityStarts:n})=>{const r={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuityStarts:n,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(r.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(r.contentProtection=t.contentProtection),i&&(r.sidx=i),r},XG=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",KG=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",QG=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",JG=(t,e)=>{t.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=e.findIndex(function({timeline:n}){return n===i.timeline}),i.segments&&i.segments.forEach((n,r)=>{n.number=r})})},Z3=t=>t?Object.keys(t).reduce((e,i)=>{const n=t[i];return e.concat(n.playlists)},[]):[],eW=({dashPlaylists:t,locations:e,sidxMapping:i={},previousManifest:n,eventStream:r})=>{if(!t.length)return{};const{sourceDuration:a,type:c,suggestedPresentationDelay:s,minimumUpdatePeriod:p}=t[0].attributes,_=TT(t.filter(XG)).map(YG),b=TT(t.filter(KG)),S=TT(t.filter(QG)),E=t.map(Z=>Z.attributes.captionServices).filter(Boolean),I={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:a,playlists:jG(_,i)};p>=0&&(I.minimumUpdatePeriod=p*1e3),e&&(I.locations=e),c==="dynamic"&&(I.suggestedPresentationDelay=s),r&&r.length>0&&(I.eventStream=r);const R=I.playlists.length===0,V=b.length?WG(b,i,R):null,q=S.length?qG(S,i):null,U=_.concat(Z3(V),Z3(q)),H=U.map(({timelineStarts:Z})=>Z);return I.timelineStarts=h5(H),JG(U,I.timelineStarts),V&&(I.mediaGroups.AUDIO.audio=V),q&&(I.mediaGroups.SUBTITLES.subs=q),E.length&&(I.mediaGroups["CLOSED-CAPTIONS"].cc=ZG(E)),n?UG({oldManifest:n,newManifest:I}):I},tW=(t,e,i)=>{const{NOW:n,clientOffset:r,availabilityStartTime:a,timescale:c=1,periodStart:s=0,minimumUpdatePeriod:p=0}=t,_=(n+r)/1e3,b=a+s,E=_+p-b;return Math.ceil((E*c-e)/i)},f5=(t,e)=>{const{type:i,minimumUpdatePeriod:n=0,media:r="",sourceDuration:a,timescale:c=1,startNumber:s=1,periodStart:p}=t,_=[];let b=-1;for(let S=0;S<e.length;S++){const E=e[S],I=E.d,R=E.r||0,V=E.t||0;b<0&&(b=V),V&&V>b&&(b=V);let q;if(R<0){const Z=S+1;Z===e.length?i==="dynamic"&&n>0&&r.indexOf("$Number$")>0?q=tW(t,b,I):q=(a*c-b)/I:q=(e[Z].t-b)/I}else q=R+1;const U=s+_.length+q;let H=s+_.length;for(;H<U;)_.push({number:H,duration:I/c,time:b,timeline:p}),b+=I,H++}return _},iW=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,nW=t=>(e,i,n,r)=>{if(e==="$$")return"$";if(typeof t[i]>"u")return e;const a=""+t[i];return i==="RepresentationID"||(n?r=parseInt(r,10):r=1,a.length>=r)?a:`${new Array(r-a.length+1).join("0")}${a}`},Y3=(t,e)=>t.replace(iW,nW(e)),rW=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?$C(t):f5(t,e),sW=(t,e)=>{const i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=t,r=Jv({baseUrl:t.baseUrl,source:Y3(n.sourceURL,i),range:n.range});return rW(t,e).map(c=>{i.Number=c.number,i.Time=c.time;const s=Y3(t.media||"",i),p=t.timescale||1,_=t.presentationTimeOffset||0,b=t.periodStart+(c.time-_)/p;return{uri:s,timeline:c.timeline,duration:c.duration,resolvedUri:EC(t.baseUrl||"",s),map:r,number:c.number,presentationTime:b}})},oW=(t,e)=>{const{baseUrl:i,initialization:n={}}=t,r=Jv({baseUrl:i,source:n.sourceURL,range:n.range}),a=Jv({baseUrl:i,source:e.media,range:e.mediaRange});return a.map=r,a},aW=(t,e)=>{const{duration:i,segmentUrls:n=[],periodStart:r}=t;if(!i&&!e||i&&e)throw new Error(wg.SEGMENT_TIME_UNSPECIFIED);const a=n.map(p=>oW(t,p));let c;return i&&(c=$C(t)),e&&(c=f5(t,e)),c.map((p,_)=>{if(a[_]){const b=a[_],S=t.timescale||1,E=t.presentationTimeOffset||0;return b.timeline=p.timeline,b.duration=p.duration,b.number=p.number,b.presentationTime=r+(p.time-E)/S,b}}).filter(p=>p)},lW=({attributes:t,segmentInfo:e})=>{let i,n;e.template?(n=sW,i=ol(t,e.template)):e.base?(n=d5,i=ol(t,e.base)):e.list&&(n=aW,i=ol(t,e.list));const r={attributes:t};if(!n)return r;const a=n(i,e.segmentTimeline);if(i.duration){const{duration:c,timescale:s=1}=i;i.duration=c/s}else a.length?i.duration=a.reduce((c,s)=>Math.max(c,Math.ceil(s.duration)),0):i.duration=0;return r.attributes=i,r.segments=a,e.base&&i.indexRange&&(r.sidx=a[0],r.segments=[]),r},uW=t=>t.map(lW),Ys=(t,e)=>c5(t.childNodes).filter(({tagName:i})=>i===e),sx=t=>t.textContent.trim(),cW=t=>parseFloat(t.split("/").reduce((e,i)=>e/i)),Fm=t=>{const s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!s)return 0;const[p,_,b,S,E,I]=s.slice(1);return parseFloat(p||0)*31536e3+parseFloat(_||0)*2592e3+parseFloat(b||0)*86400+parseFloat(S||0)*3600+parseFloat(E||0)*60+parseFloat(I||0)},dW=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),X3={mediaPresentationDuration(t){return Fm(t)},availabilityStartTime(t){return dW(t)/1e3},minimumUpdatePeriod(t){return Fm(t)},suggestedPresentationDelay(t){return Fm(t)},type(t){return t},timeShiftBufferDepth(t){return Fm(t)},start(t){return Fm(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return cW(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Fm(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},fa=t=>t&&t.attributes?c5(t.attributes).reduce((e,i)=>{const n=X3[i.name]||X3.DEFAULT;return e[i.name]=n(i.value),e},{}):{},hW={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ox=(t,e)=>e.length?xg(t.map(function(i){return e.map(function(n){return EC(i,sx(n))})})):t,VC=t=>{const e=Ys(t,"SegmentTemplate")[0],i=Ys(t,"SegmentList")[0],n=i&&Ys(i,"SegmentURL").map(S=>ol({tag:"SegmentURL"},fa(S))),r=Ys(t,"SegmentBase")[0],a=i||e,c=a&&Ys(a,"SegmentTimeline")[0],s=i||r||e,p=s&&Ys(s,"Initialization")[0],_=e&&fa(e);_&&p?_.initialization=p&&fa(p):_&&_.initialization&&(_.initialization={sourceURL:_.initialization});const b={template:_,segmentTimeline:c&&Ys(c,"S").map(S=>fa(S)),list:i&&ol(fa(i),{segmentUrls:n,initialization:fa(p)}),base:r&&ol(fa(r),{initialization:fa(p)})};return Object.keys(b).forEach(S=>{b[S]||delete b[S]}),b},fW=(t,e,i)=>n=>{const r=Ys(n,"BaseURL"),a=ox(e,r),c=ol(t,fa(n)),s=VC(n);return a.map(p=>({segmentInfo:ol(i,s),attributes:ol(c,{baseUrl:p})}))},pW=t=>t.reduce((e,i)=>{const n=fa(i);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const r=hW[n.schemeIdUri];if(r){e[r]={attributes:n};const a=Ys(i,"cenc:pssh")[0];if(a){const c=sx(a);e[r].pssh=c&&nG(c)}}return e},{}),mW=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{let n,r;return r=i,/^CC\d=/.test(i)?[n,r]=i.split("="):/^CC\d$/.test(i)&&(n=i),{channel:n,language:r}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(i=>{const n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[r,a=""]=i.split("=");n.channel=r,n.language=i,a.split(",").forEach(c=>{const[s,p]=c.split(":");s==="lang"?n.language=p:s==="er"?n.easyReader=Number(p):s==="war"?n.aspectRatio=Number(p):s==="3D"&&(n["3D"]=Number(p))})}else n.language=i;return n.channel&&(n.channel="SERVICE"+n.channel),n})},gW=t=>xg(Ys(t.node,"EventStream").map(e=>{const i=fa(e),n=i.schemeIdUri;return Ys(e,"Event").map(r=>{const a=fa(r),c=a.presentationTime||0,s=i.timescale||1,p=a.duration||0,_=c/s+t.attributes.start;return{schemeIdUri:n,value:i.value,id:a.id,start:_,end:_+p/s,messageData:sx(r)||a.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),_W=(t,e,i)=>n=>{const r=fa(n),a=ox(e,Ys(n,"BaseURL")),c=Ys(n,"Role")[0],s={role:fa(c)};let p=ol(t,r,s);const _=Ys(n,"Accessibility")[0],b=mW(fa(_));b&&(p=ol(p,{captionServices:b}));const S=Ys(n,"Label")[0];if(S&&S.childNodes.length){const q=S.childNodes[0].nodeValue.trim();p=ol(p,{label:q})}const E=pW(Ys(n,"ContentProtection"));Object.keys(E).length&&(p=ol(p,{contentProtection:E}));const I=VC(n),R=Ys(n,"Representation"),V=ol(i,I);return xg(R.map(fW(p,a,V)))},vW=(t,e)=>(i,n)=>{const r=ox(e,Ys(i.node,"BaseURL")),a=ol(t,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(a.periodDuration=i.attributes.duration);const c=Ys(i.node,"AdaptationSet"),s=VC(i.node);return xg(c.map(_W(a,r,s)))},yW=({attributes:t,priorPeriodAttributes:e,mpdType:i})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&i==="static"?0:null,bW=(t,e={})=>{const{manifestUri:i="",NOW:n=Date.now(),clientOffset:r=0}=e,a=Ys(t,"Period");if(!a.length)throw new Error(wg.INVALID_NUMBER_OF_PERIOD);const c=Ys(t,"Location"),s=fa(t),p=ox([i],Ys(t,"BaseURL"));s.type=s.type||"static",s.sourceDuration=s.mediaPresentationDuration||0,s.NOW=n,s.clientOffset=r,c.length&&(s.locations=c.map(sx));const _=[];return a.forEach((b,S)=>{const E=fa(b),I=_[S-1];E.start=yW({attributes:E,priorPeriodAttributes:I?I.attributes:null,mpdType:s.type}),_.push({node:b,attributes:E})}),{locations:s.locations,representationInfo:xg(_.map(vW(s,p))),eventStream:xg(_.map(gW))}},p5=t=>{if(t==="")throw new Error(wg.DASH_EMPTY_MANIFEST);const e=new MG;let i,n;try{i=e.parseFromString(t,"application/xml"),n=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(wg.DASH_INVALID_XML);return n},xW=t=>{const e=Ys(t,"UTCTiming")[0];if(!e)return null;const i=fa(e);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(wg.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},wW=(t,e={})=>{const i=bW(p5(t),e),n=uW(i.representationInfo);return eW({dashPlaylists:n,locations:i.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:i.eventStream})},TW=t=>xW(p5(t));var m5=Math.pow(2,32),SW=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i;return e.getBigUint64?(i=e.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):e.getUint32(0)*m5+e.getUint32(4)},CW={getUint64:SW,MAX_UINT32:m5},K3=CW.getUint64,kW=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;i.version===0?(i.earliestPresentationTime=e.getUint32(n),i.firstOffset=e.getUint32(n+4),n+=8):(i.earliestPresentationTime=K3(t.subarray(n)),i.firstOffset=K3(t.subarray(n+8)),n+=16),n+=2;var r=e.getUint16(n);for(n+=2;r>0;n+=12,r--)i.references.push({referenceType:(t[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return i},EW=kW,IW=Tn([73,68,51]),PW=function(e,i){i===void 0&&(i=0),e=Tn(e);var n=e[i+5],r=e[i+6]<<21|e[i+7]<<14|e[i+8]<<7|e[i+9],a=(n&16)>>4;return a?r+20:r+10},pv=function t(e,i){return i===void 0&&(i=0),e=Tn(e),e.length-i<10||!Rs(e,IW,{offset:i})?i:(i+=PW(e,i),t(e,i))},Q3=function(e){return typeof e=="string"?L4(e):e},AW=function(e){return Array.isArray(e)?e.map(function(i){return Q3(i)}):[Q3(e)]},MW=function t(e,i,n){n===void 0&&(n=!1),i=AW(i),e=Tn(e);var r=[];if(!i.length)return r;for(var a=0;a<e.length;){var c=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,s=e.subarray(a+4,a+8);if(c===0)break;var p=a+c;if(p>e.length){if(n)break;p=e.length}var _=e.subarray(a+8,p);Rs(s,i[0])&&(i.length===1?r.push(_):r.push.apply(r,t(_,i.slice(1),n))),a=p}return r},n1={EBML:Tn([26,69,223,163]),DocType:Tn([66,130]),Segment:Tn([24,83,128,103]),SegmentInfo:Tn([21,73,169,102]),Tracks:Tn([22,84,174,107]),Track:Tn([174]),TrackNumber:Tn([215]),DefaultDuration:Tn([35,227,131]),TrackEntry:Tn([174]),TrackType:Tn([131]),FlagDefault:Tn([136]),CodecID:Tn([134]),CodecPrivate:Tn([99,162]),VideoTrack:Tn([224]),AudioTrack:Tn([225]),Cluster:Tn([31,67,182,117]),Timestamp:Tn([231]),TimestampScale:Tn([42,215,177]),BlockGroup:Tn([160]),BlockDuration:Tn([155]),Block:Tn([161]),SimpleBlock:Tn([163])},F2=[128,64,32,16,8,4,2,1],OW=function(e){for(var i=1,n=0;n<F2.length&&!(e&F2[n]);n++)i++;return i},eb=function(e,i,n,r){n===void 0&&(n=!0),r===void 0&&(r=!1);var a=OW(e[i]),c=e.subarray(i,i+a);return n&&(c=Array.prototype.slice.call(e,i,i+a),c[0]^=F2[a-1]),{length:a,value:QH(c,{signed:r}),bytes:c}},J3=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(i){return t(i)}):typeof e=="number"?JH(e):e},LW=function(e){return Array.isArray(e)?e.map(function(i){return J3(i)}):[J3(e)]},DW=function t(e,i,n){if(n>=i.length)return i.length;var r=eb(i,n,!1);if(Rs(e.bytes,r.bytes))return n;var a=eb(i,n+r.length);return t(e,i,n+a.length+a.value+r.length)},eM=function t(e,i){i=LW(i),e=Tn(e);var n=[];if(!i.length)return n;for(var r=0;r<e.length;){var a=eb(e,r,!1),c=eb(e,r+a.length),s=r+a.length+c.length;c.value===127&&(c.value=DW(a,e,s),c.value!==e.length&&(c.value-=s));var p=s+c.value>e.length?e.length:s+c.value,_=e.subarray(s,p);Rs(i[0],a.bytes)&&(i.length===1?n.push(_):n=n.concat(t(_,i.slice(1))));var b=a.length+c.length+_.length;r+=b}return n},RW=Tn([0,0,0,1]),BW=Tn([0,0,1]),FW=Tn([0,0,3]),$W=function(e){for(var i=[],n=1;n<e.length-2;)Rs(e.subarray(n,n+3),FW)&&(i.push(n+2),n++),n++;if(i.length===0)return e;var r=e.length-i.length,a=new Uint8Array(r),c=0;for(n=0;n<r;c++,n++)c===i[0]&&(c++,i.shift()),a[n]=e[c];return a},g5=function(e,i,n,r){r===void 0&&(r=1/0),e=Tn(e),n=[].concat(n);for(var a=0,c,s=0;a<e.length&&(s<r||c);){var p=void 0;if(Rs(e.subarray(a),RW)?p=4:Rs(e.subarray(a),BW)&&(p=3),!p){a++;continue}if(s++,c)return $W(e.subarray(c,a));var _=void 0;i==="h264"?_=e[a+p]&31:i==="h265"&&(_=e[a+p]>>1&63),n.indexOf(_)!==-1&&(c=a+p),a+=p+(i==="h264"?1:2)}return e.subarray(0,0)},NW=function(e,i,n){return g5(e,"h264",i,n)},zW=function(e,i,n){return g5(e,"h265",i,n)},Ml={webm:Tn([119,101,98,109]),matroska:Tn([109,97,116,114,111,115,107,97]),flac:Tn([102,76,97,67]),ogg:Tn([79,103,103,83]),ac3:Tn([11,119]),riff:Tn([82,73,70,70]),avi:Tn([65,86,73]),wav:Tn([87,65,86,69]),"3gp":Tn([102,116,121,112,51,103]),mp4:Tn([102,116,121,112]),fmp4:Tn([115,116,121,112]),mov:Tn([102,116,121,112,113,116]),moov:Tn([109,111,111,118]),moof:Tn([109,111,111,102])},Tg={aac:function(e){var i=pv(e);return Rs(e,[255,16],{offset:i,mask:[255,22]})},mp3:function(e){var i=pv(e);return Rs(e,[255,2],{offset:i,mask:[255,6]})},webm:function(e){var i=eM(e,[n1.EBML,n1.DocType])[0];return Rs(i,Ml.webm)},mkv:function(e){var i=eM(e,[n1.EBML,n1.DocType])[0];return Rs(i,Ml.matroska)},mp4:function(e){if(Tg["3gp"](e)||Tg.mov(e))return!1;if(Rs(e,Ml.mp4,{offset:4})||Rs(e,Ml.fmp4,{offset:4})||Rs(e,Ml.moof,{offset:4})||Rs(e,Ml.moov,{offset:4}))return!0},mov:function(e){return Rs(e,Ml.mov,{offset:4})},"3gp":function(e){return Rs(e,Ml["3gp"],{offset:4})},ac3:function(e){var i=pv(e);return Rs(e,Ml.ac3,{offset:i})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var i=0;i+188<e.length&&i<188;){if(e[i]===71&&e[i+188]===71)return!0;i+=1}return!1},flac:function(e){var i=pv(e);return Rs(e,Ml.flac,{offset:i})},ogg:function(e){return Rs(e,Ml.ogg)},avi:function(e){return Rs(e,Ml.riff)&&Rs(e,Ml.avi,{offset:8})},wav:function(e){return Rs(e,Ml.riff)&&Rs(e,Ml.wav,{offset:8})},h264:function(e){return NW(e,7,3).length},h265:function(e){return zW(e,[32,33],3).length}},$2=Object.keys(Tg).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);$2.forEach(function(t){var e=Tg[t];Tg[t]=function(i){return e(Tn(i))}});var VW=Tg,UC=function(e){e=Tn(e);for(var i=0;i<$2.length;i++){var n=$2[i];if(VW[n](e))return n}return""},UW=function(e){return MW(e,["moof"]).length>0},jC=9e4,HC,GC,ax,WC,_5,v5,y5;HC=function(t){return t*jC};GC=function(t,e){return t*e};ax=function(t){return t/jC};WC=function(t,e){return t/e};_5=function(t,e){return HC(WC(t,e))};v5=function(t,e){return GC(ax(t),e)};y5=function(t,e,i){return ax(i?t:t-e)};var tb={ONE_SECOND_IN_TS:jC,secondsToVideoTs:HC,secondsToAudioTs:GC,videoTsToSeconds:ax,audioTsToSeconds:WC,audioTsToVideoTs:_5,videoTsToAudioTs:v5,metadataTsToSeconds:y5};/**
 * @license
 * Video.js 8.0.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var b5="8.0.4";const _h={},Of=function(t,e){return _h[t]=_h[t]||[],e&&(_h[t]=_h[t].concat(e)),_h[t]},jW=function(t,e){Of(t,e)},x5=function(t,e){const i=Of(t).indexOf(e);return i<=-1?!1:(_h[t]=_h[t].slice(),_h[t].splice(i,1),!0)},HW=function(t,e){Of(t,[].concat(e).map(i=>{const n=(...r)=>(x5(t,n),i(...r));return n}))},ib={prefixed:!0},y1=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],tM=y1[0];let mv;for(let t=0;t<y1.length;t++)if(y1[t][1]in ji){mv=y1[t];break}if(mv){for(let t=0;t<mv.length;t++)ib[tM[t]]=mv[t];ib.prefixed=mv[0]!==tM[0]}let mu=[];const GW=(t,e)=>(i,n,r)=>{const a=e.levels[n],c=new RegExp(`^(${a})$`);if(i!=="log"&&r.unshift(i.toUpperCase()+":"),r.unshift(t+":"),mu){mu.push([].concat(r));const p=mu.length-1e3;mu.splice(0,p>0?p:0)}if(!yt.console)return;let s=yt.console[i];!s&&i==="debug"&&(s=yt.console.info||yt.console.log),!(!s||!a||!c.test(i))&&s[Array.isArray(r)?"apply":"call"](yt.console,r)};function w5(t){let e="info",i;const n=function(...r){i("log",e,r)};return i=GW(t,n),n.createLogger=r=>w5(t+": "+r),n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=r=>{if(typeof r=="string"){if(!n.levels.hasOwnProperty(r))throw new Error(`"${r}" in not a valid log level`);e=r}return e},n.history=()=>mu?[].concat(mu):[],n.history.filter=r=>(mu||[]).filter(a=>new RegExp(`.*${r}.*`).test(a[0])),n.history.clear=()=>{mu&&(mu.length=0)},n.history.disable=()=>{mu!==null&&(mu.length=0,mu=null)},n.history.enable=()=>{mu===null&&(mu=[])},n.error=(...r)=>i("error",e,r),n.warn=(...r)=>i("warn",e,r),n.debug=(...r)=>i("debug",e,r),n}const gr=w5("VIDEOJS"),T5=gr.createLogger,WW=Object.prototype.toString,S5=function(t){return jd(t)?Object.keys(t):[]};function rg(t,e){S5(t).forEach(i=>e(t[i],i))}function C5(t,e,i=0){return S5(t).reduce((n,r)=>e(n,t[r],r),i)}function jd(t){return!!t&&typeof t=="object"}function Sg(t){return jd(t)&&WW.call(t)==="[object Object]"&&t.constructor===Object}function vs(...t){const e={};return t.forEach(i=>{i&&rg(i,(n,r)=>{if(!Sg(n)){e[r]=n;return}Sg(e[r])||(e[r]={}),e[r]=vs(e[r],n)})}),e}function lx(t,e,i,n=!0){const r=c=>Object.defineProperty(t,e,{value:c,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){const c=i();return r(c),c}};return n&&(a.set=r),Object.defineProperty(t,e,a)}var qW=Object.freeze({__proto__:null,each:rg,reduce:C5,isObject:jd,isPlain:Sg,merge:vs,defineLazyProperty:lx});let qC=!1,k5=null,Hd=!1,E5,I5=!1,sg=!1,og=!1,Gd=!1,ZC=null,ux=null,P5=null,nb=!1,cx=!1,rb=!1,dx=!1;const ey=!!(jg()&&("ontouchstart"in yt||yt.navigator.maxTouchPoints||yt.DocumentTouch&&yt.document instanceof yt.DocumentTouch)),$m=yt.navigator&&yt.navigator.userAgentData;$m&&(Hd=$m.platform==="Android",sg=!!$m.brands.find(t=>t.brand==="Microsoft Edge"),og=!!$m.brands.find(t=>t.brand==="Chromium"),Gd=!sg&&og,ZC=ux=($m.brands.find(t=>t.brand==="Chromium")||{}).version||null,cx=$m.platform==="Windows");if(!og){const t=yt.navigator&&yt.navigator.userAgent||"";qC=/iPod/i.test(t),k5=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Hd=/Android/i.test(t),E5=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return i&&n?parseFloat(e[1]+"."+e[2]):i||null}(),I5=/Firefox/i.test(t),sg=/Edg/i.test(t),og=/Chrome/i.test(t)||/CriOS/i.test(t),Gd=!sg&&og,ZC=ux=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),P5=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);return!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11),i}(),nb=/Safari/i.test(t)&&!Gd&&!Hd&&!sg,cx=/Windows/i.test(t),rb=/iPad/i.test(t)||nb&&ey&&!/iPhone/i.test(t),dx=/iPhone/i.test(t)&&!rb}const $l=dx||rb||qC,hx=(nb||$l)&&!Gd;var ZW=Object.freeze({__proto__:null,get IS_IPOD(){return qC},get IOS_VERSION(){return k5},get IS_ANDROID(){return Hd},get ANDROID_VERSION(){return E5},get IS_FIREFOX(){return I5},get IS_EDGE(){return sg},get IS_CHROMIUM(){return og},get IS_CHROME(){return Gd},get CHROMIUM_VERSION(){return ZC},get CHROME_VERSION(){return ux},get IE_VERSION(){return P5},get IS_SAFARI(){return nb},get IS_WINDOWS(){return cx},get IS_IPAD(){return rb},get IS_IPHONE(){return dx},TOUCH_ENABLED:ey,IS_IOS:$l,IS_ANY_SAFARI:hx});function iM(t){return typeof t=="string"&&!!t.trim()}function YW(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function jg(){return ji===yt.document}function Hg(t){return jd(t)&&t.nodeType===1}function A5(){try{return yt.parent!==yt.self}catch{return!0}}function M5(t){return function(e,i){if(!iM(e))return ji[t](null);iM(i)&&(i=ji.querySelector(i));const n=Hg(i)?i:ji;return n[t]&&n[t](e)}}function lr(t="div",e={},i={},n){const r=ji.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){const c=e[a];a==="textContent"?Vf(r,c):(r[a]!==c||a==="tabIndex")&&(r[a]=c)}),Object.getOwnPropertyNames(i).forEach(function(a){r.setAttribute(a,i[a])}),n&&YC(r,n),r}function Vf(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function N2(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Iv(t,e){return YW(e),t.classList.contains(e)}function Fp(t,...e){return t.classList.add(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t}function fx(t,...e){return t?(t.classList.remove(...e.reduce((i,n)=>i.concat(n.split(/\s+/)),[])),t):(gr.warn("removeClass was called with an element that doesn't exist"),null)}function O5(t,e,i){return typeof i=="function"&&(i=i(t,e)),typeof i!="boolean"&&(i=void 0),e.split(/\s+/).forEach(n=>t.classList.toggle(n,i)),t}function L5(t,e){Object.getOwnPropertyNames(e).forEach(function(i){const n=e[i];n===null||typeof n>"u"||n===!1?t.removeAttribute(i):t.setAttribute(i,n===!0?"":n)})}function vf(t){const e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0){const n=t.attributes;for(let r=n.length-1;r>=0;r--){const a=n[r].name;let c=n[r].value;(typeof t[a]=="boolean"||i.indexOf(","+a+",")!==-1)&&(c=c!==null),e[a]=c}}return e}function D5(t,e){return t.getAttribute(e)}function Cg(t,e,i){t.setAttribute(e,i)}function px(t,e){t.removeAttribute(e)}function R5(){ji.body.focus(),ji.onselectstart=function(){return!1}}function B5(){ji.onselectstart=function(){return!0}}function kg(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(n=>{e[n]!==void 0&&(i[n]=e[n])}),i.height||(i.height=parseFloat(Eg(t,"height"))),i.width||(i.width=parseFloat(Eg(t,"width"))),i}}function ty(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let n=0,r=0;for(;t.offsetParent&&t!==ji[ib.fullscreenElement];)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:n,top:r,width:e,height:i}}function mx(t,e){const i={x:0,y:0};if($l){let b=t;for(;b&&b.nodeName.toLowerCase()!=="html";){const S=Eg(b,"transform");if(/^matrix/.test(S)){const E=S.slice(7,-1).split(/,\s/).map(Number);i.x+=E[4],i.y+=E[5]}else if(/^matrix3d/.test(S)){const E=S.slice(9,-1).split(/,\s/).map(Number);i.x+=E[12],i.y+=E[13]}b=b.parentNode}}const n={},r=ty(e.target),a=ty(t),c=a.width,s=a.height;let p=e.offsetY-(a.top-r.top),_=e.offsetX-(a.left-r.left);return e.changedTouches&&(_=e.changedTouches[0].pageX-a.left,p=e.changedTouches[0].pageY+a.top,$l&&(_-=i.x,p-=i.y)),n.y=1-Math.max(0,Math.min(1,p/s)),n.x=Math.max(0,Math.min(1,_/c)),n}function F5(t){return jd(t)&&t.nodeType===3}function gx(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function $5(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),Hg(e)||F5(e))return e;if(typeof e=="string"&&/\S/.test(e))return ji.createTextNode(e)}).filter(e=>e)}function YC(t,e){return $5(e).forEach(i=>t.appendChild(i)),t}function N5(t,e){return YC(gx(t),e)}function iy(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const Lf=M5("querySelector"),z5=M5("querySelectorAll");function Eg(t,e){if(!t||!e)return"";if(typeof yt.getComputedStyle=="function"){let i;try{i=yt.getComputedStyle(t)}catch{return""}return i?i.getPropertyValue(e)||i[e]:""}return""}var V5=Object.freeze({__proto__:null,isReal:jg,isEl:Hg,isInFrame:A5,createEl:lr,textContent:Vf,prependTo:N2,hasClass:Iv,addClass:Fp,removeClass:fx,toggleClass:O5,setAttributes:L5,getAttributes:vf,getAttribute:D5,setAttribute:Cg,removeAttribute:px,blockTextSelection:R5,unblockTextSelection:B5,getBoundingClientRect:kg,findPosition:ty,getPointerPosition:mx,isTextNode:F5,emptyEl:gx,normalizeContent:$5,appendContent:YC,insertContent:N5,isSingleLeftClick:iy,$:Lf,$$:z5,computedStyle:Eg});let U5=!1,z2;const XW=function(){if(z2.options.autoSetup===!1)return;const t=Array.prototype.slice.call(ji.getElementsByTagName("video")),e=Array.prototype.slice.call(ji.getElementsByTagName("audio")),i=Array.prototype.slice.call(ji.getElementsByTagName("video-js")),n=t.concat(e,i);if(n&&n.length>0)for(let r=0,a=n.length;r<a;r++){const c=n[r];if(c&&c.getAttribute)c.player===void 0&&c.getAttribute("data-setup")!==null&&z2(c);else{V2(1);break}}else U5||V2(1)};function V2(t,e){jg()&&(e&&(z2=e),yt.setTimeout(XW,t))}function U2(){U5=!0,yt.removeEventListener("load",U2)}jg()&&(ji.readyState==="complete"?U2():yt.addEventListener("load",U2));const j5=function(t){const e=ji.createElement("style");return e.className=t,e},H5=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Rl=new WeakMap;const KW=3;let QW=KW;function Wd(){return QW++}function nM(t,e){if(!Rl.has(t))return;const i=Rl.get(t);i.handlers[e].length===0&&(delete i.handlers[e],t.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&Rl.delete(t)}function XC(t,e,i,n){i.forEach(function(r){t(e,r,n)})}function _x(t){if(t.fixed_)return t;function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const n=t||yt.event;t={};for(const r in n)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&r!=="path"&&(r==="returnValue"&&n.preventDefault||(t[r]=n[r]));if(t.target||(t.target=t.srcElement||ji),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,t.clientX!==null&&t.clientX!==void 0){const r=ji.documentElement,a=ji.body;t.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let r1;const JW=function(){if(typeof r1!="boolean"){r1=!1;try{const t=Object.defineProperty({},"passive",{get(){r1=!0}});yt.addEventListener("test",null,t),yt.removeEventListener("test",null,t)}catch{}}return r1},eq=["touchstart","touchmove"];function Ku(t,e,i){if(Array.isArray(e))return XC(Ku,t,e,i);Rl.has(t)||Rl.set(t,{});const n=Rl.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),i.guid||(i.guid=Wd()),n.handlers[e].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(r,a){if(n.disabled)return;r=_x(r);const c=n.handlers[r.type];if(c){const s=c.slice(0);for(let p=0,_=s.length;p<_&&!r.isImmediatePropagationStopped();p++)try{s[p].call(t,r,a)}catch(b){gr.error(b)}}}),n.handlers[e].length===1)if(t.addEventListener){let r=!1;JW()&&eq.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,n.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function ul(t,e,i){if(!Rl.has(t))return;const n=Rl.get(t);if(!n.handlers)return;if(Array.isArray(e))return XC(ul,t,e,i);const r=function(c,s){n.handlers[s]=[],nM(c,s)};if(e===void 0){for(const c in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},c)&&r(t,c);return}const a=n.handlers[e];if(a){if(!i){r(t,e);return}if(i.guid)for(let c=0;c<a.length;c++)a[c].guid===i.guid&&a.splice(c--,1);nM(t,e)}}function Gg(t,e,i){const n=Rl.has(t)?Rl.get(t):{},r=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=_x(e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&e.bubbles===!0)Gg.call(null,r,e,i);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Rl.has(e.target)||Rl.set(e.target,{});const a=Rl.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function vx(t,e,i){if(Array.isArray(e))return XC(vx,t,e,i);const n=function(){ul(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Wd(),Ku(t,e,n)}function KC(t,e,i){const n=function(){ul(t,e,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||Wd(),Ku(t,e,n)}var tq=Object.freeze({__proto__:null,fixEvent:_x,on:Ku,off:ul,trigger:Gg,one:vx,any:KC});const Ic=30,ys=function(t,e,i){e.guid||(e.guid=Wd());const n=e.bind(t);return n.guid=i?i+"_"+e.guid:e.guid,n},qd=function(t,e){let i=yt.performance.now();return function(...r){const a=yt.performance.now();a-i>=e&&(t(...r),i=a)}},G5=function(t,e,i,n=yt){let r;const a=()=>{n.clearTimeout(r),r=null},c=function(){const s=this,p=arguments;let _=function(){r=null,_=null,i||t.apply(s,p)};!r&&i&&t.apply(s,p),n.clearTimeout(r),r=n.setTimeout(_,e)};return c.cancel=a,c};var iq=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Ic,bind_:ys,throttle:qd,debounce:G5});let iv;class Pc{on(e,i){const n=this.addEventListener;this.addEventListener=()=>{},Ku(this,e,i),this.addEventListener=n}off(e,i){ul(this,e,i)}one(e,i){const n=this.addEventListener;this.addEventListener=()=>{},vx(this,e,i),this.addEventListener=n}any(e,i){const n=this.addEventListener;this.addEventListener=()=>{},KC(this,e,i),this.addEventListener=n}trigger(e){const i=e.type||e;typeof e=="string"&&(e={type:i}),e=_x(e),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](e),Gg(this,e)}queueTrigger(e){iv||(iv=new Map);const i=e.type||e;let n=iv.get(this);n||(n=new Map,iv.set(this,n));const r=n.get(i);n.delete(i),yt.clearTimeout(r);const a=yt.setTimeout(()=>{n.delete(i),n.size===0&&(n=null,iv.delete(this)),this.trigger(e)},0);n.set(i,a)}}Pc.prototype.allowedEvents_={};Pc.prototype.addEventListener=Pc.prototype.on;Pc.prototype.removeEventListener=Pc.prototype.off;Pc.prototype.dispatchEvent=Pc.prototype.trigger;const yx=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,Th=t=>t instanceof Pc||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),nq=(t,e)=>{Th(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},j2=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,sb=(t,e,i)=>{if(!t||!t.nodeName&&!Th(t))throw new Error(`Invalid target for ${yx(e)}#${i}; must be a DOM node or evented object.`)},W5=(t,e,i)=>{if(!j2(t))throw new Error(`Invalid event type for ${yx(e)}#${i}; must be a non-empty string or array.`)},q5=(t,e,i)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${yx(e)}#${i}; must be a function.`)},ST=(t,e,i)=>{const n=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let r,a,c;return n?(r=t.eventBusEl_,e.length>=3&&e.shift(),[a,c]=e):[r,a,c]=e,sb(r,t,i),W5(a,t,i),q5(c,t,i),c=ys(t,c),{isTargetingSelf:n,target:r,type:a,listener:c}},_p=(t,e,i,n)=>{sb(t,t,e),t.nodeName?tq[e](t,i,n):t[e](i,n)},rq={on(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=ST(this,t,"on");if(_p(i,"on",n,r),!e){const a=()=>this.off(i,n,r);a.guid=r.guid;const c=()=>this.off("dispose",a);c.guid=r.guid,_p(this,"on","dispose",a),_p(i,"on","dispose",c)}},one(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=ST(this,t,"one");if(e)_p(i,"one",n,r);else{const a=(...c)=>{this.off(i,n,a),r.apply(null,c)};a.guid=r.guid,_p(i,"one",n,a)}},any(...t){const{isTargetingSelf:e,target:i,type:n,listener:r}=ST(this,t,"any");if(e)_p(i,"any",n,r);else{const a=(...c)=>{this.off(i,n,a),r.apply(null,c)};a.guid=r.guid,_p(i,"any",n,a)}},off(t,e,i){if(!t||j2(t))ul(this.eventBusEl_,t,e);else{const n=t,r=e;sb(n,this,"off"),W5(r,this,"off"),q5(i,this,"off"),i=ys(this,i),this.off("dispose",i),n.nodeName?(ul(n,r,i),ul(n,"dispose",i)):Th(n)&&(n.off(r,i),n.off("dispose",i))}},trigger(t,e){sb(this.eventBusEl_,this,"trigger");const i=t&&typeof t!="string"?t.type:t;if(!j2(i))throw new Error(`Invalid event type for ${yx(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Gg(this.eventBusEl_,t,e)}};function QC(t,e={}){const{eventBusKey:i}=e;if(i){if(!t[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);t.eventBusEl_=t[i]}else t.eventBusEl_=lr("span",{className:"vjs-event-bus"});return Object.assign(t,rq),t.eventedCallbacks&&t.eventedCallbacks.forEach(n=>{n()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(n){n&&Rl.has(n)&&Rl.delete(n)}),yt.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const sq={state:{},setState(t){typeof t=="function"&&(t=t());let e;return rg(t,(i,n)=>{this.state[n]!==i&&(e=e||{},e[n]={from:this.state[n],to:i}),this.state[n]=i}),e&&Th(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function Z5(t,e){return Object.assign(t,sq),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&Th(t)&&t.on("statechanged",t.handleStateChanged),t}const Pv=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},oo=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},Y5=function(t,e){return oo(t)===oo(e)};var oq=Object.freeze({__proto__:null,toLowerCase:Pv,toTitleCase:oo,titleCaseEquals:Y5});class fi{constructor(e,i,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=vs({},this.options_),i=this.options_=vs(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${Wd()}`}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(r=>this.addClass(r)),i.evented!==!1&&(QC(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Z5(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(n),i.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=vs(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,i,n){return lr(e,i,n)}localize(e,i,n=e){const r=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),c=a&&a[r],s=r&&r.split("-")[0],p=a&&a[s];let _=n;return c&&c[e]?_=c[e]:p&&p[e]&&(_=p[e]),i&&(_=_.replace(/\{(\d+)\}/g,function(b,S){const E=i[S-1];let I=E;return typeof E>"u"&&(I=b),I})),_}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((n,r)=>n.concat(r),[]);let i=this;for(let n=0;n<e.length;n++)if(i=i.getChild(e[n]),!i||!i.getChild)return;return i}addChild(e,i={},n=this.children_.length){let r,a;if(typeof e=="string"){a=oo(e);const c=i.componentClass||a;i.name=a;const s=fi.getComponent(c);if(!s)throw new Error(`Component ${c} does not exist`);if(typeof s!="function")return null;r=new s(this.player_||this,i)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),a=a||r.name&&oo(r.name()),a&&(this.childNameIndex_[a]=r,this.childNameIndex_[Pv(a)]=r),typeof r.el=="function"&&r.el()){let c=null;this.children_[n+1]&&(this.children_[n+1].el_?c=this.children_[n+1].el_:Hg(this.children_[n+1])&&(c=this.children_[n+1])),this.contentEl().insertBefore(r.el(),c)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let i=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){i=!0,this.children_.splice(r,1);break}if(!i)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[oo(e.name())]=null,this.childNameIndex_[Pv(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const i=this.options_,n=c=>{const s=c.name;let p=c.opts;if(i[s]!==void 0&&(p=i[s]),p===!1)return;p===!0&&(p={}),p.playerOptions=this.options_.playerOptions;const _=this.addChild(s,p);_&&(this[s]=_)};let r;const a=fi.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(c){return!r.some(function(s){return typeof s=="string"?c===s:c===s.name})})).map(c=>{let s,p;return typeof c=="string"?(s=c,p=e[s]||this.options_[s]||{}):(s=c.name,p=c),{name:s,opts:p}}).filter(c=>{const s=fi.getComponent(c.opts.componentClass||oo(c.name));return s&&!a.isTech(s)}).forEach(n)}}buildCSSClass(){return""}ready(e,i=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}i?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(e,i){return Lf(e,i||this.contentEl())}$$(e,i){return z5(e,i||this.contentEl())}hasClass(e){return Iv(this.el_,e)}addClass(...e){Fp(this.el_,...e)}removeClass(...e){fx(this.el_,...e)}toggleClass(e,i){O5(this.el_,e,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return D5(this.el_,e)}setAttribute(e,i){Cg(this.el_,e,i)}removeAttribute(e){px(this.el_,e)}width(e,i){return this.dimension("width",e,i)}height(e,i){return this.dimension("height",e,i)}dimensions(e,i){this.width(e,!0),this.height(i)}dimension(e,i,n){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[e]=i:i==="auto"?this.el_.style[e]="":this.el_.style[e]=i+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],a=r.indexOf("px");return parseInt(a!==-1?r.slice(0,a):this.el_["offset"+oo(e)],10)}currentDimension(e){let i=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(i=Eg(this.el_,e),i=parseFloat(i),i===0||isNaN(i)){const n=`offset${oo(e)}`;i=this.el_[n]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Bn.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,i=null;const n=10,r=200;let a;this.on("touchstart",function(s){s.touches.length===1&&(i={pageX:s.touches[0].pageX,pageY:s.touches[0].pageY},e=yt.performance.now(),a=!0)}),this.on("touchmove",function(s){if(s.touches.length>1)a=!1;else if(i){const p=s.touches[0].pageX-i.pageX,_=s.touches[0].pageY-i.pageY;Math.sqrt(p*p+_*_)>n&&(a=!1)}});const c=function(){a=!1};this.on("touchleave",c),this.on("touchcancel",c),this.on("touchend",function(s){i=null,a===!0&&yt.performance.now()-e<r&&(s.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=ys(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){e(),this.clearInterval(i),i=this.setInterval(e,250)});const n=function(r){e(),this.clearInterval(i)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,i){var n;return e=ys(this,e),this.clearTimersOnDispose_(),n=yt.setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},i),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),yt.clearTimeout(e)),e}setInterval(e,i){e=ys(this,e),this.clearTimersOnDispose_();const n=yt.setInterval(e,i);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),yt.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var i;return e=ys(this,e),i=yt.requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),e()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(e,i){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),i=ys(this,i);const n=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),yt.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,i])=>{this[e].forEach((n,r)=>this[i](r))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,i){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=fi.getComponent("Tech"),r=n&&n.isTech(i),a=fi===i||fi.prototype.isPrototypeOf(i.prototype);if(r||!a){let s;throw r?s="techs must be registered using Tech.registerTech()":s="must be a Component subclass",new Error(`Illegal component, "${e}"; ${s}.`)}e=oo(e),fi.components_||(fi.components_={});const c=fi.getComponent("Player");if(e==="Player"&&c&&c.players){const s=c.players,p=Object.keys(s);if(s&&p.length>0&&p.map(_=>s[_]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return fi.components_[e]=i,fi.components_[Pv(e)]=i,i}static getComponent(e){if(!(!e||!fi.components_))return fi.components_[e]}}fi.registerComponent("Component",fi);function aq(t,e,i){if(typeof e!="number"||e<0||e>i)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${i}).`)}function rM(t,e,i,n){return aq(t,n,i.length-1),i[n][e]}function CT(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:rM.bind(null,"start",0,t),end:rM.bind(null,"end",1,t)},yt.Symbol&&yt.Symbol.iterator&&(e[yt.Symbol.iterator]=()=>(t||[]).values()),e}function Ud(t,e){return Array.isArray(t)?CT(t):t===void 0||e===void 0?CT():CT([[t,e]])}const X5=function(t,e){t=t<0?0:t;let i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600);const a=Math.floor(e/60%60),c=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=n=i="-"),r=r>0||c>0?r+":":"",n=((r||a>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,r+n+i};let JC=X5;function K5(t){JC=t}function Q5(){JC=X5}function Gp(t,e=t){return JC(t,e)}var lq=Object.freeze({__proto__:null,createTimeRanges:Ud,createTimeRange:Ud,setFormatTime:K5,resetFormatTime:Q5,formatTime:Gp});function J5(t,e){let i=0,n,r;if(!e)return 0;(!t||!t.length)&&(t=Ud(0,0));for(let a=0;a<t.length;a++)n=t.start(a),r=t.end(a),r>e&&(r=e),i+=r-n;return i/e}function Bl(t){if(t instanceof Bl)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:jd(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=Bl.defaultMessages[this.code]||"")}Bl.prototype.code=0;Bl.prototype.message="";Bl.prototype.status=null;Bl.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Bl.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let t=0;t<Bl.errorTypes.length;t++)Bl[Bl.errorTypes[t]]=t,Bl.prototype[Bl.errorTypes[t]]=t;function Av(t){return t!=null&&typeof t.then=="function"}function Dd(t){Av(t)&&t.then(null,e=>{})}const H2=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,n,r)=>(t[n]&&(i[n]=t[n]),i),{cues:t.cues&&Array.prototype.map.call(t.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},uq=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const a=H2(r.track);return r.src&&(a.src=r.src),a}).concat(Array.prototype.filter.call(t.textTracks(),function(r){return i.indexOf(r)===-1}).map(H2))},cq=function(t,e){return t.forEach(function(i){const n=e.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(r=>n.addCue(r))}),e.textTracks()};var sM={textTracksToJson:uq,jsonToTextTracks:cq,trackToJson_:H2};const kT="vjs-modal-dialog";class Wg extends fi{constructor(e,i){super(e,i),this.handleKeyDown_=n=>this.handleKeyDown(n),this.close_=n=>this.close(n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=lr("div",{className:`${kT}-content`},{role:"document"}),this.descEl_=lr("p",{className:`${kT}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Vf(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${kT} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const i=this.closeable_=!!e;let n=this.getChild("closeButton");if(i&&!n){const r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close_)}!i&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const i=this.contentEl(),n=i.parentNode,r=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(i),this.empty(),N5(i,e),this.trigger("modalfill"),r?n.insertBefore(i,r):n.appendChild(i);const a=this.getChild("closeButton");a&&n.appendChild(a.el_)}empty(){this.trigger("beforemodalempty"),gx(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=ji.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Bn.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!Bn.isEventKey(e,"Tab"))return;const i=this.focusableEls_(),n=this.el_.querySelector(":focus");let r;for(let a=0;a<i.length;a++)if(n===i[a]){r=a;break}ji.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===i.length-1&&(i[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,i=>(i instanceof yt.HTMLAnchorElement||i instanceof yt.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof yt.HTMLInputElement||i instanceof yt.HTMLSelectElement||i instanceof yt.HTMLTextAreaElement||i instanceof yt.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof yt.HTMLIFrameElement||i instanceof yt.HTMLObjectElement||i instanceof yt.HTMLEmbedElement||i.hasAttribute("tabindex")&&i.getAttribute("tabindex")!==-1||i.hasAttribute("contenteditable"))}}Wg.prototype.options_={pauseOnOpen:!0,temporary:!0};fi.registerComponent("ModalDialog",Wg);class Ig extends Pc{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<e.length;i++)this.addTrack(e[i])}addTrack(e){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Th(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let i;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){i=this[n],i.off&&i.off(),this.tracks_.splice(n,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(e){let i=null;for(let n=0,r=this.length;n<r;n++){const a=this[n];if(a.id===e){i=a;break}}return i}}Ig.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in Ig.prototype.allowedEvents_)Ig.prototype["on"+t]=null;const ET=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].enabled=!1)};class dq extends Ig{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].enabled){ET(e,e[i]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&ET(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,ET(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const IT=function(t,e){for(let i=0;i<t.length;i++)!Object.keys(t[i]).length||e.id===t[i].id||(t[i].selected=!1)};class hq extends Ig{constructor(e=[]){for(let i=e.length-1;i>=0;i--)if(e[i].selected){IT(e,e[i]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(e){e.selected&&IT(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,IT(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class eR extends Ig{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class fq{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,n=e.length;i<n;i++)this.addTrackElement_(e[i])}addTrackElement_(e){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let i;for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){i=this.trackElements_[n];break}return i}removeTrackElement_(e){for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}}class ob{constructor(e){ob.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const i=this.length||0;let n=0;const r=e.length;this.cues_=e,this.length_=e.length;const a=function(c){""+c in this||Object.defineProperty(this,""+c,{get(){return this.cues_[c]}})};if(i<r)for(n=i;n<r;n++)a.call(this,n)}getCueById(e){let i=null;for(let n=0,r=this.length;n<r;n++){const a=this[n];if(a.id===e){i=a;break}}return i}}const pq={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},mq={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},gq={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},oM={disabled:"disabled",hidden:"hidden",showing:"showing"};class ek extends Pc{constructor(e={}){super();const i={id:e.id||"vjs_track_"+Wd(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const r in i)Object.defineProperty(this,r,{get(){return i[r]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(r){r!==n&&(n=r,this.trigger("labelchange"))}})}}const tk=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"],i=ji.createElement("a");i.href=t;const n={};for(let r=0;r<e.length;r++)n[e[r]]=i[e[r]];return n.protocol==="http:"&&(n.host=n.host.replace(/:80$/,"")),n.protocol==="https:"&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=yt.location.protocol),n.host||(n.host=yt.location.host),n},tR=function(t){if(!t.match(/^https?:\/\//)){const e=ji.createElement("a");e.href=t,t=e.href}return t},ik=function(t){if(typeof t=="string"){const i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(i)return i.pop().toLowerCase()}return""},bx=function(t,e=yt.location){const i=tk(t);return(i.protocol===":"?e.protocol:i.protocol)+i.host!==e.protocol+e.host};var _q=Object.freeze({__proto__:null,parseUrl:tk,getAbsoluteURL:tR,getFileExtension:ik,isCrossOrigin:bx});const aM=function(t,e){const i=new yt.WebVTT.Parser(yt,yt.vttjs,yt.WebVTT.StringDecoder()),n=[];i.oncue=function(r){e.addCue(r)},i.onparsingerror=function(r){n.push(r)},i.onflush=function(){e.trigger({type:"loadeddata",target:e})},i.parse(t),n.length>0&&(yt.console&&yt.console.groupCollapsed&&yt.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),n.forEach(r=>gr.error(r)),yt.console&&yt.console.groupEnd&&yt.console.groupEnd()),i.flush()},lM=function(t,e){const i={uri:t},n=bx(t);n&&(i.cors=n);const r=e.tech_.crossOrigin()==="use-credentials";r&&(i.withCredentials=r),Zv(i,ys(this,function(a,c,s){if(a)return gr.error(a,c);e.loaded_=!0,typeof yt.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],p=>{if(p.type==="vttjserror"){gr.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return aM(s,e)}):aM(s,e)}))};class wy extends ek{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const i=vs(e,{kind:gq[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=oM[i.mode]||"disabled";const r=i.default;(i.kind==="metadata"||i.kind==="chapters")&&(n="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const a=new ob(this.cues_),c=new ob(this.activeCues_);let s=!1;this.timeupdateHandler=ys(this,function(_={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){_.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1),_.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const p=()=>{this.stopTracking()};this.tech_.one("dispose",p),n!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return n},set(_){oM[_]&&n!==_&&(n=_,!this.preload_&&n!=="disabled"&&this.cues.length===0&&lM(this.src,this),this.stopTracking(),n!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?a:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return c;const _=this.tech_.currentTime(),b=[];for(let S=0,E=this.cues.length;S<E;S++){const I=this.cues[S];I.startTime<=_&&I.endTime>=_&&b.push(I)}if(s=!1,b.length!==this.activeCues_.length)s=!0;else for(let S=0;S<b.length;S++)this.activeCues_.indexOf(b[S])===-1&&(s=!0);return this.activeCues_=b,c.setCues_(this.activeCues_),c},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||i.kind!=="subtitles"&&i.kind!=="captions")&&lM(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let i=e;if(yt.vttjs&&!(e instanceof yt.vttjs.VTTCue)){i=new yt.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in i||(i[r]=e[r]);i.id=e.id,i.originalCue_=e}const n=this.tech_.textTracks();for(let r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}removeCue(e){let i=this.cues_.length;for(;i--;){const n=this.cues_[i];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}wy.prototype.allowedEvents_={cuechange:"cuechange"};class iR extends ek{constructor(e={}){const i=vs(e,{kind:mq[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(r){typeof r!="boolean"||r===n||(n=r,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class nR extends ek{constructor(e={}){const i=vs(e,{kind:pq[e.kind]||""});super(i);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(r){typeof r!="boolean"||r===n||(n=r,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class Lh extends Pc{constructor(e={}){super();let i;const n=new wy(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return i}},track:{get(){return n}}}),i=Lh.NONE,n.addEventListener("loadeddata",()=>{i=Lh.LOADED,this.trigger({type:"load",target:this})})}}Lh.prototype.allowedEvents_={load:"load"};Lh.NONE=0;Lh.LOADING=1;Lh.LOADED=2;Lh.ERROR=3;const Ec={audio:{ListClass:dq,TrackClass:iR,capitalName:"Audio"},video:{ListClass:hq,TrackClass:nR,capitalName:"Video"},text:{ListClass:eR,TrackClass:wy,capitalName:"Text"}};Object.keys(Ec).forEach(function(t){Ec[t].getterName=`${t}Tracks`,Ec[t].privateName=`${t}Tracks_`});const Pg={remoteText:{ListClass:eR,TrackClass:wy,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:fq,TrackClass:Lh,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ll=Object.assign({},Ec,Pg);Pg.names=Object.keys(Pg);Ec.names=Object.keys(Ec);Ll.names=[].concat(Pg.names).concat(Ec.names);function vq(t,e,i,n,r={}){const a=t.textTracks();r.kind=e,i&&(r.label=i),n&&(r.language=n),r.tech=t;const c=new Ll.text.TrackClass(r);return a.addTrack(c),c}class Xn extends fi{constructor(e={},i=function(){}){e.reportTouchActivity=!1,super(null,e,i),this.onDurationChange_=n=>this.onDurationChange(n),this.trackProgress_=n=>this.trackProgress(n),this.trackCurrentTime_=n=>this.trackCurrentTime(n),this.stopTrackingCurrentTime_=n=>this.stopTrackingCurrentTime(n),this.disposeSourceHandler_=n=>this.disposeSourceHandler(n),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Ll.names.forEach(n=>{const r=Ll[n];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(n=>{e[`native${n}Tracks`]===!1&&(this[`featuresNative${n}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Ll.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ys(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,i===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Ud(0,0)}bufferedPercent(){return J5(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ec.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(i=>{const n=this[`${i}Tracks`]()||[];let r=n.length;for(;r--;){const a=n[r];i==="text"&&this.removeRemoteTextTrack(a),n.removeTrack(a)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let i=e.length;for(;i--;){const n=e[i];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Bl(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ud(0,0):Ud()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ec.names.forEach(e=>{const i=Ec[e],n=()=>{this.trigger(`${e}trackchange`)},r=this[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),this.on("dispose",()=>{r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!yt.WebVTT)if(ji.body.contains(this.el())){if(!this.options_["vtt.js"]&&Sg(q1)&&Object.keys(q1).length>0){this.trigger("vttjsloaded");return}const e=ji.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),yt.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),i=this.remoteTextTracks(),n=s=>e.addTrack(s.track),r=s=>e.removeTrack(s.track);i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();const a=()=>this.trigger("texttrackchange"),c=()=>{a();for(let s=0;s<e.length;s++){const p=e[s];p.removeEventListener("cuechange",a),p.mode==="showing"&&p.addEventListener("cuechange",a)}};c(),e.addEventListener("change",c),e.addEventListener("addtrack",c),e.addEventListener("removetrack",c),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",r),e.removeEventListener("change",c),e.removeEventListener("addtrack",c),e.removeEventListener("removetrack",c);for(let s=0;s<e.length;s++)e[s].removeEventListener("cuechange",a)})}addTextTrack(e,i,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return vq(this,e,i,n)}createRemoteTextTrack(e){const i=vs(e,{tech:this});return new Pg.remoteTextEl.TrackClass(i)}addRemoteTextTrack(e={},i){const n=this.createRemoteTextTrack(e);return typeof i!="boolean"&&(i=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),i===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const i=Wd();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),e())})):this.requestNamedAnimationFrame(i,e),i}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(e,i){return Xn.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Xn||e instanceof Xn||e===Xn}static registerTech(e,i){if(Xn.techs_||(Xn.techs_={}),!Xn.isTech(i))throw new Error(`Tech ${e} must be a Tech`);if(!Xn.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Xn.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=oo(e),Xn.techs_[e]=i,Xn.techs_[Pv(e)]=i,e!=="Tech"&&Xn.defaultTechOrder_.push(e),i}static getTech(e){if(e){if(Xn.techs_&&Xn.techs_[e])return Xn.techs_[e];if(e=oo(e),yt&&yt.videojs&&yt.videojs[e])return gr.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),yt.videojs[e]}}}Ll.names.forEach(function(t){const e=Ll[t];Xn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Xn.prototype.featuresVolumeControl=!0;Xn.prototype.featuresMuteControl=!0;Xn.prototype.featuresFullscreenResize=!1;Xn.prototype.featuresPlaybackRate=!1;Xn.prototype.featuresProgressEvents=!1;Xn.prototype.featuresSourceset=!1;Xn.prototype.featuresTimeupdateEvents=!1;Xn.prototype.featuresNativeTextTracks=!1;Xn.prototype.featuresVideoFrameCallback=!1;Xn.withSourceHandlers=function(t){t.registerSourceHandler=function(i,n){let r=t.sourceHandlers;r||(r=t.sourceHandlers=[]),n===void 0&&(n=r.length),r.splice(n,0,i)},t.canPlayType=function(i){const n=t.sourceHandlers||[];let r;for(let a=0;a<n.length;a++)if(r=n[a].canPlayType(i),r)return r;return""},t.selectSourceHandler=function(i,n){const r=t.sourceHandlers||[];let a;for(let c=0;c<r.length;c++)if(a=r[c].canHandleSource(i,n),a)return r[c];return null},t.canPlaySource=function(i,n){const r=t.selectSourceHandler(i,n);return r?r.canHandleSource(i,n):""},["seekable","seeking","duration"].forEach(function(i){const n=this[i];typeof n=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(i){let n=t.selectSourceHandler(i,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:gr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=n.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};fi.registerComponent("Tech",Xn);Xn.registerTech("Tech",Xn);Xn.defaultTechOrder_=[];const $p={},G2={},ab={};function yq(t,e){$p[t]=$p[t]||[],$p[t].push(e)}function bq(t,e,i){t.setTimeout(()=>yp(e,$p[e.type],i,t),1)}function xq(t,e){t.forEach(i=>i.setTech&&i.setTech(e))}function wq(t,e,i){return t.reduceRight(nk(i),e[i]())}function Tq(t,e,i,n){return e[i](t.reduce(nk(i),n))}function uM(t,e,i,n=null){const r="call"+oo(i),a=t.reduce(nk(r),n),c=a===ab,s=c?null:e[i](a);return kq(t,i,s,c),s}const Sq={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Cq={setCurrentTime:1,setMuted:1,setVolume:1},cM={play:1,pause:1};function nk(t){return(e,i)=>e===ab?ab:i[t]?i[t](e):e}function kq(t,e,i,n){for(let r=t.length-1;r>=0;r--){const a=t[r];a[e]&&a[e](n,i)}}function Eq(t){G2[t.id()]=null}function Iq(t,e){const i=G2[t.id()];let n=null;if(i==null)return n=e(t),G2[t.id()]=[[e,n]],n;for(let r=0;r<i.length;r++){const[a,c]=i[r];a===e&&(n=c)}return n===null&&(n=e(t),i.push([e,n])),n}function yp(t={},e=[],i,n,r=[],a=!1){const[c,...s]=e;if(typeof c=="string")yp(t,$p[c],i,n,r,a);else if(c){const p=Iq(n,c);if(!p.setSource)return r.push(p),yp(t,s,i,n,r,a);p.setSource(Object.assign({},t),function(_,b){if(_)return yp(t,s,i,n,r,a);r.push(p),yp(b,t.type===b.type?s:$p[b.type],i,n,r,a)})}else s.length?yp(t,s,i,n,r,a):a?i(t,r):yp(t,$p["*"],i,n,r,!0)}const Pq={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},lb=function(t=""){const e=ik(t);return Pq[e.toLowerCase()]||""},Aq=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const i=t.cache_.sources.filter(r=>r.src===e);if(i.length)return i[0].type;const n=t.$$("source");for(let r=0;r<n.length;r++){const a=n[r];if(a.type&&a.src&&a.src===e)return a.type}return lb(e)},rR=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(i){i=rR(i),Array.isArray(i)?e=e.concat(i):jd(i)&&e.push(i)}),t=e}else typeof t=="string"&&t.trim()?t=[dM({src:t})]:jd(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[dM(t)]:t=[];return t};function dM(t){if(!t.type){const e=lb(t.src);e&&(t.type=e)}return t}class Mq extends fi{constructor(e,i,n){const r=vs({createEl:!1},i);if(super(e,r,n),!i.playerOptions.sources||i.playerOptions.sources.length===0)for(let a=0,c=i.playerOptions.techOrder;a<c.length;a++){const s=oo(c[a]);let p=Xn.getTech(s);if(s||(p=fi.getComponent(s)),p&&p.isSupported()){e.loadTech_(s);break}}else e.src(i.playerOptions.sources)}}fi.registerComponent("MediaLoader",Mq);class xx extends fi{constructor(e,i){super(e,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=n=>this.handleMouseOver(n),this.handleMouseOut_=n=>this.handleMouseOut(n),this.handleClick_=n=>this.handleClick(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.emitTapEvents(),this.enable()}createEl(e="div",i={},n={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),e==="button"&&gr.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=i.tabIndex;const r=lr(e,i,n);return r.appendChild(lr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=lr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,i=this.el()){if(e===void 0)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,Vf(this.controlTextEl_,n),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Bn.isEventKey(e,"Space")||Bn.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}fi.registerComponent("ClickableComponent",xx);class W2 extends xx{constructor(e,i){super(e,i),this.update(),this.update_=n=>this.update(n),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return lr("picture",{className:"vjs-poster",tabIndex:-1},{},lr("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}crossOrigin(e){if(typeof e>"u")return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.el_.querySelector("img").crossOrigin=e}update(e){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(e){this.el_.querySelector("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Dd(this.player_.play()):this.player_.pause())}}W2.prototype.crossorigin=W2.prototype.crossOrigin;fi.registerComponent("PosterImage",W2);const Tc="#222",hM="#ccc",Oq={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function PT(t,e){let i;if(t.length===4)i=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)i=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function AT(t,e,i){try{t.style[e]=i}catch{return}}class Lq extends fi{constructor(e,i,n){super(e,i,n);const r=a=>this.updateDisplay(a);e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",r),e.on("loadedmetadata",a=>this.preselectTrack(a)),e.ready(ys(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);const a=yt.screen.orientation||yt,c=yt.screen.orientation?"change":"orientationchange";a.addEventListener(c,r),e.on("dispose",()=>a.removeEventListener(c,r));const s=this.options_.playerOptions.tracks||[];for(let p=0;p<s.length;p++)this.player_.addRemoteTextTrack(s[p],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},i=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let r,a,c;for(let s=0;s<i.length;s++){const p=i[s];n&&n.enabled&&n.language&&n.language===p.language&&p.kind in e?p.kind===n.kind?c=p:c||(c=p):n&&!n.enabled?(c=null,r=null,a=null):p.default&&(p.kind==="descriptions"&&!r?r=p:p.kind in e&&!a&&(a=p))}c?c.mode="showing":a?a.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof yt.WebVTT=="function"&&yt.WebVTT.processCues(yt,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const c=[];for(let s=0;s<e.length;++s){const p=e[s];p.mode==="showing"&&c.push(p)}this.updateForTrack(c);return}let n=null,r=null,a=e.length;for(;a--;){const c=e[a];c.mode==="showing"&&(c.kind==="descriptions"?n=c:r=c)}r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):n&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n))}updateDisplayState(e){const i=this.player_.textTrackSettings.getValues(),n=e.activeCues;let r=n.length;for(;r--;){const a=n[r];if(!a)continue;const c=a.displayState;if(i.color&&(c.firstChild.style.color=i.color),i.textOpacity&&AT(c.firstChild,"color",PT(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(c.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&AT(c.firstChild,"backgroundColor",PT(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?AT(c,"backgroundColor",PT(i.windowColor,i.windowOpacity)):c.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?c.firstChild.style.textShadow=`2px 2px 3px ${Tc}, 2px 2px 4px ${Tc}, 2px 2px 5px ${Tc}`:i.edgeStyle==="raised"?c.firstChild.style.textShadow=`1px 1px ${Tc}, 2px 2px ${Tc}, 3px 3px ${Tc}`:i.edgeStyle==="depressed"?c.firstChild.style.textShadow=`1px 1px ${hM}, 0 1px ${hM}, -1px -1px ${Tc}, 0 -1px ${Tc}`:i.edgeStyle==="uniform"&&(c.firstChild.style.textShadow=`0 0 4px ${Tc}, 0 0 4px ${Tc}, 0 0 4px ${Tc}, 0 0 4px ${Tc}`)),i.fontPercent&&i.fontPercent!==1){const s=yt.parseFloat(c.style.fontSize);c.style.fontSize=s*i.fontPercent+"px",c.style.height="auto",c.style.top="auto"}i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?c.firstChild.style.fontVariant="small-caps":c.firstChild.style.fontFamily=Oq[i.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof yt.WebVTT!="function"||e.every(n=>!n.activeCues))return;const i=[];for(let n=0;n<e.length;++n){const r=e[n];for(let a=0;a<r.activeCues.length;++a)i.push(r.activeCues[a])}yt.WebVTT.processCues(yt,i,this.el_);for(let n=0;n<e.length;++n){const r=e[n];for(let a=0;a<r.activeCues.length;++a){const c=r.activeCues[a].displayState;Fp(c,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:n)),r.language&&Cg(c,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}fi.registerComponent("TextTrackDisplay",Lq);class Dq extends fi{createEl(){const e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),n=lr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r}}fi.registerComponent("LoadingSpinner",Dq);class id extends xx{createEl(e,i={},n={}){e="button",i=Object.assign({className:this.buildCSSClass()},i),n=Object.assign({type:"button"},n);const r=lr(e,i,n);return r.appendChild(lr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,i={}){const n=this.constructor.name;return gr.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),fi.prototype.addChild.call(this,e,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(Bn.isEventKey(e,"Space")||Bn.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}}fi.registerComponent("Button",id);class sR extends id{constructor(e,i){super(e,i),this.mouseused_=!1,this.on("mousedown",n=>this.handleMouseDown(n))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const i=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){Dd(i),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const a=()=>r.focus();Av(i)?i.then(a,()=>{}):this.setTimeout(a,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}sR.prototype.controlText_="Play Video";fi.registerComponent("BigPlayButton",sR);class Rq extends id{constructor(e,i){super(e,i),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Bn.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}fi.registerComponent("CloseButton",Rq);class oR extends id{constructor(e,i={}){super(e,i),i.replay=i.replay===void 0||i.replay,this.on(e,"play",n=>this.handlePlay(n)),this.on(e,"pause",n=>this.handlePause(n)),i.replay&&this.on(e,"ended",n=>this.handleEnded(n))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Dd(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}oR.prototype.controlText_="Play";fi.registerComponent("PlayToggle",oR);class qg extends fi{constructor(e,i){super(e,i),this.on(e,["timeupdate","ended"],n=>this.updateContent(n)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),i=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=lr("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return i.appendChild(n),this.contentEl_=lr("span",{className:`${e}-display`},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=Gp(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,gr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=ji.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}qg.prototype.labelText_="Time";qg.prototype.controlText_="Time";fi.registerComponent("TimeDisplay",qg);class rk extends qg{buildCSSClass(){return"vjs-current-time"}updateContent(e){let i;this.player_.ended()?i=this.player_.duration():i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}rk.prototype.labelText_="Current Time";rk.prototype.controlText_="Current Time";fi.registerComponent("CurrentTimeDisplay",rk);class sk extends qg{constructor(e,i){super(e,i);const n=r=>this.updateContent(r);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const i=this.player_.duration();this.updateTextNode_(i)}}sk.prototype.labelText_="Duration";sk.prototype.controlText_="Duration";fi.registerComponent("DurationDisplay",sk);class Bq extends fi{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return i.appendChild(n),e.appendChild(i),e}}fi.registerComponent("TimeDivider",Bq);class ok extends qg{constructor(e,i){super(e,i),this.on(e,"durationchange",n=>this.updateContent(n))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(lr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let i;this.player_.ended()?i=0:this.player_.remainingTimeDisplay?i=this.player_.remainingTimeDisplay():i=this.player_.remainingTime(),this.updateTextNode_(i)}}ok.prototype.labelText_="Remaining Time";ok.prototype.controlText_="Remaining Time";fi.registerComponent("RemainingTimeDisplay",ok);class Fq extends fi{constructor(e,i){super(e,i),this.updateShowing(),this.on(this.player(),"durationchange",n=>this.updateShowing(n))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=lr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(lr("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(ji.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}fi.registerComponent("LiveDisplay",Fq);class aR extends id{constructor(e,i){super(e,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=n=>this.updateLiveEdgeStatus(n),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=lr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}aR.prototype.controlText_="Seek to live, currently playing live";fi.registerComponent("SeekToLive",aR);function Ty(t,e,i){return t=Number(t),Math.min(i,Math.max(e,isNaN(t)?e:t))}var $q=Object.freeze({__proto__:null,clamp:Ty});class ak extends fi{constructor(e,i){super(e,i),this.handleMouseDown_=n=>this.handleMouseDown(n),this.handleMouseUp_=n=>this.handleMouseUp(n),this.handleKeyDown_=n=>this.handleKeyDown(n),this.handleClick_=n=>this.handleClick(n),this.handleMouseMove_=n=>this.handleMouseMove(n),this.update_=n=>this.update(n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,i={},n={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,i,n)}handleMouseDown(e){const i=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Gd&&e.preventDefault(),R5(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;B5(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Ty(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const i=mx(this.el_,e);return this.vertical()?i.y:i.x}handleKeyDown(e){Bn.isEventKey(e,"Left")||Bn.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Bn.isEventKey(e,"Right")||Bn.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}fi.registerComponent("Slider",ak);const MT=(t,e)=>Ty(t/e*100,0,100).toFixed(2)+"%";class Nq extends fi{constructor(e,i){super(e,i),this.partEls_=[],this.on(e,"progress",n=>this.update(n))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),i=lr("span",{className:"vjs-control-text"}),n=lr("span",{textContent:this.localize("Loaded")}),r=ji.createTextNode(": ");return this.percentageEl_=lr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,n=this.player_.buffered(),r=i&&i.isLive()?i.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),c=this.partEls_,s=MT(a,r);this.percent_!==s&&(this.el_.style.width=s,Vf(this.percentageEl_,s),this.percent_=s);for(let p=0;p<n.length;p++){const _=n.start(p),b=n.end(p);let S=c[p];S||(S=this.el_.appendChild(lr()),c[p]=S),!(S.dataset.start===_&&S.dataset.end===b)&&(S.dataset.start=_,S.dataset.end=b,S.style.left=MT(_,a),S.style.width=MT(b-_,a))}for(let p=c.length;p>n.length;p--)this.el_.removeChild(c[p-1]);c.length=n.length})}}fi.registerComponent("LoadProgressBar",Nq);class zq extends fi{constructor(e,i){super(e,i),this.update=qd(ys(this,this.update),Ic)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,i,n){const r=ty(this.el_),a=kg(this.player_.el()),c=e.width*i;if(!a||!r)return;const s=e.left-a.left+c,p=e.width-c+(a.right-e.right);let _=r.width/2;s<_?_+=_-s:p<_&&(_=p),_<0?_=0:_>r.width&&(_=r.width),_=Math.round(_),this.el_.style.right=`-${_}px`,this.write(n)}write(e){Vf(this.el_,e)}updateTime(e,i,n,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let a;const c=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const s=this.player_.liveTracker.liveWindow(),p=s-i*s;a=(p<1?"":"-")+Gp(p,s)}else a=Gp(n,c);this.update(e,i,a),r&&r()})}}fi.registerComponent("TimeTooltip",zq);class lk extends fi{constructor(e,i){super(e,i),this.update=qd(ys(this,this.update),Ic)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,i){const n=this.getChild("timeTooltip");if(!n)return;const r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,i,r)}}lk.prototype.options_={children:[]};!$l&&!Hd&&lk.prototype.options_.children.push("timeTooltip");fi.registerComponent("PlayProgressBar",lk);class lR extends fi{constructor(e,i){super(e,i),this.update=qd(ys(this,this.update),Ic)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i){const n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,n,()=>{this.el_.style.left=`${e.width*i}px`})}}lR.prototype.options_={children:["timeTooltip"]};fi.registerComponent("MouseTimeDisplay",lR);const s1=5,fM=12;class uk extends ak{constructor(e,i){super(e,i),this.setEventHandlers_()}setEventHandlers_(){this.update_=ys(this,this.update),this.update=qd(this.update_,Ic),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ji&&"visibilityState"in ji&&this.on(ji,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){ji.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ic))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(ji.visibilityState==="hidden")return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let a=this.player_.duration();r&&r.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2)),this.percent_=i),(this.currentTime_!==n||this.duration_!==a)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Gp(n,a),Gp(a,a)],"{1} of {2}")),this.currentTime_=n,this.duration_=a),this.bar&&this.bar.update(kg(this.el()),this.getProgress())}),i}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let i;const n=this.player_.liveTracker;return n&&n.isLive()?(i=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i}handleMouseDown(e){iy(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,i=!1){if(!iy(e))return;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let n;const r=this.calculateDistance(e),a=this.player_.liveTracker;if(!a||!a.isLive())n=r*this.player_.duration(),n===this.player_.duration()&&(n=n-.1);else{if(r>=.99){a.seekToLiveEdge();return}const c=a.seekableStart(),s=a.liveCurrentTime();if(n=c+r*a.liveWindow(),n>=s&&(n=s),n<=c&&(n=c+.1),n===1/0)return}this.userSeek_(n)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Dd(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+s1)}stepBack(){this.userSeek_(this.player_.currentTime()-s1)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const i=this.player_.liveTracker;if(Bn.isEventKey(e,"Space")||Bn.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Bn.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Bn.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Bn(e))){e.preventDefault(),e.stopPropagation();const n=(Bn.codes[Bn(e)]-Bn.codes[0])*10/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else Bn.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-s1*fM)):Bn.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+s1*fM)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ji&&"visibilityState"in ji&&this.off(ji,"visibilitychange",this.toggleVisibility_),super.dispose()}}uk.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!$l&&!Hd&&uk.prototype.options_.children.splice(1,0,"mouseTimeDisplay");fi.registerComponent("SeekBar",uk);class uR extends fi{constructor(e,i){super(e,i),this.handleMouseMove=qd(ys(this,this.handleMouseMove),Ic),this.throttledHandleMouseSeek=qd(ys(this,this.handleMouseSeek),Ic),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.handleMouseDownHandler_=n=>this.handleMouseDown(n),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const i=this.getChild("seekBar");if(!i)return;const n=i.getChild("playProgressBar"),r=i.getChild("mouseTimeDisplay");if(!n&&!r)return;const a=i.el(),c=ty(a);let s=mx(a,e).x;s=Ty(s,0,1),r&&r.update(c,s),n&&n.update(c,i.getProgress())}handleMouseSeek(e){const i=this.getChild("seekBar");i&&i.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Dd(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const i=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}uR.prototype.options_={children:["seekBar"]};fi.registerComponent("ProgressControl",uR);class cR extends id{constructor(e,i){super(e,i),this.on(e,["enterpictureinpicture","leavepictureinpicture"],n=>this.handlePictureInPictureChange(n)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],n=>this.handlePictureInPictureEnabledChange(n)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{e.currentType().substring(0,5)==="audio"||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){ji.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}cR.prototype.controlText_="Picture-in-Picture";fi.registerComponent("PictureInPictureToggle",cR);class dR extends id{constructor(e,i){super(e,i),this.on(e,"fullscreenchange",n=>this.handleFullscreenChange(n)),ji[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}dR.prototype.controlText_="Fullscreen";fi.registerComponent("FullscreenToggle",dR);const Vq=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class Uq extends fi{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}fi.registerComponent("VolumeLevel",Uq);class jq extends fi{constructor(e,i){super(e,i),this.update=qd(ys(this,this.update),Ic)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,i,n,r){if(!n){const a=kg(this.el_),c=kg(this.player_.el()),s=e.width*i;if(!c||!a)return;const p=e.left-c.left+s,_=e.width-s+(c.right-e.right);let b=a.width/2;p<b?b+=b-p:_<b&&(b=_),b<0?b=0:b>a.width&&(b=a.width),this.el_.style.right=`-${b}px`}this.write(`${r}%`)}write(e){Vf(this.el_,e)}updateVolume(e,i,n,r,a){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,i,n,r.toFixed(0)),a&&a()})}}fi.registerComponent("VolumeLevelTooltip",jq);class hR extends fi{constructor(e,i){super(e,i),this.update=qd(ys(this,this.update),Ic)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,i,n){const r=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,n,r,()=>{n?this.el_.style.bottom=`${e.height*i}px`:this.el_.style.left=`${e.width*i}px`})}}hR.prototype.options_={children:["volumeLevelTooltip"]};fi.registerComponent("MouseVolumeLevelDisplay",hR);class wx extends ak{constructor(e,i){super(e,i),this.on("slideractive",n=>this.updateLastVolume_(n)),this.on(e,"volumechange",n=>this.updateARIAAttributes(n)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){iy(e)&&super.handleMouseDown(e)}handleMouseMove(e){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const n=this.el(),r=kg(n),a=this.vertical();let c=mx(n,e);c=a?c.y:c.x,c=Ty(c,0,1),i.update(r,c,a)}iy(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}wx.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!$l&&!Hd&&wx.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");wx.prototype.playerEvent="volumechange";fi.registerComponent("VolumeBar",wx);class fR extends fi{constructor(e,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Sg(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(e,i),Vq(this,e),this.throttledHandleMouseMove=qd(ys(this,this.handleMouseMove),Ic),this.handleMouseUpHandler_=n=>this.handleMouseUp(n),this.on("mousedown",n=>this.handleMouseDown(n)),this.on("touchstart",n=>this.handleMouseDown(n)),this.on("mousemove",n=>this.handleMouseMove(n)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}fR.prototype.options_={children:["volumeBar"]};fi.registerComponent("VolumeControl",fR);const Hq=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class pR extends id{constructor(e,i){super(e,i),Hq(this,e),this.on(e,["loadstart","volumechange"],n=>this.update(n))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const i=this.player_.volume(),n=this.player_.lastVolume_();if(i===0){const r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let i=3;$l&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2),fx(this.el_,[0,1,2,3].reduce((n,r)=>n+`${r?" ":""}vjs-vol-${r}`,"")),Fp(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}pR.prototype.controlText_="Mute";fi.registerComponent("MuteToggle",pR);class mR extends fi{constructor(e,i={}){typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||Sg(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(e,i),this.handleKeyPressHandler_=n=>this.handleKeyPress(n),this.on(e,["loadstart"],n=>this.volumePanelState_(n)),this.on(this.muteToggle,"keyup",n=>this.handleKeyPress(n)),this.on(this.volumeControl,"keyup",n=>this.handleVolumeControlKeyUp(n)),this.on("keydown",n=>this.handleKeyPress(n)),this.on("mouseover",n=>this.handleMouseOver(n)),this.on("mouseout",n=>this.handleMouseOut(n)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Bn.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ku(ji,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),ul(ji,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Bn.isEventKey(e,"Esc")&&this.handleMouseOut()}}mR.prototype.options_={children:["muteToggle","volumeControl"]};fi.registerComponent("VolumePanel",mR);class gR extends fi{constructor(e,i){super(e,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",n=>this.handleKeyDown(n)),this.boundHandleBlur_=n=>this.handleBlur(n),this.boundHandleTapClick_=n=>this.handleTapClick(n)}addEventListenerForItem(e){e instanceof fi&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof fi&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const i=this.addChild(e);i&&this.addEventListenerForItem(i)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=lr(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Ku(i,"click",function(n){n.preventDefault(),n.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const i=e.relatedTarget||ji.activeElement;if(!this.children().some(n=>n.el()===i)){const n=this.menuButton_;n&&n.buttonPressed_&&i!==n.el().firstChild&&n.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const n=i.filter(r=>r.el()===e.target)[0];if(!n)return;n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){Bn.isEventKey(e,"Left")||Bn.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Bn.isEventKey(e,"Right")||Bn.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())}}fi.registerComponent("Menu",gR);class ck extends fi{constructor(e,i={}){super(e,i),this.menuButton_=new id(e,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=id.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ku(ji,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new gR(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=lr("li",{className:"vjs-menu-title",textContent:oo(this.options_.title),tabIndex:-1}),n=new fi(this.player_,{el:i});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const i=id.prototype.buildCSSClass();return`vjs-menu-button ${e} ${i} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,i=this.menuButton_.el()){return this.menuButton_.controlText(e,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),ul(ji,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Bn.isEventKey(e,"Esc")||Bn.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Bn.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Bn.isEventKey(e,"Up")||Bn.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Bn.isEventKey(e,"Esc")||Bn.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Bn.isEventKey(e,"Esc")||Bn.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Bn.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$l&&A5())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}fi.registerComponent("MenuButton",ck);class dk extends ck{constructor(e,i){const n=i.tracks;if(super(e,i),this.items.length<=1&&this.hide(),!n)return;const r=ys(this,this.update);n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),n.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r),n.removeEventListener("labelchange",r)})}}fi.registerComponent("TrackButton",dk);const Gq=["Tab","Esc","Up","Down","Right","Left"];class Sy extends xx{constructor(e,i){super(e,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,i,n){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),n);return r.replaceChild(lr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){Gq.some(i=>Bn.isEventKey(e,i))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}fi.registerComponent("MenuItem",Sy);class Cy extends Sy{constructor(e,i){const n=i.track,r=e.textTracks();i.label=n.label||n.language||"Unknown",i.selected=n.mode==="showing",super(e,i),this.track=n,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const a=(...s)=>{this.handleTracksChange.apply(this,s)},c=(...s)=>{this.handleSelectedLanguageChange.apply(this,s)};if(e.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",c),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",c)}),r.onchange===void 0){let s;this.on(["tap","click"],function(){if(typeof yt.Event!="object")try{s=new yt.Event("change")}catch{}s||(s=ji.createEvent("Event"),s.initEvent("change",!0,!0)),r.dispatchEvent(s)})}this.handleTracksChange()}handleClick(e){const i=this.track,n=this.player_.textTracks();if(super.handleClick(e),!!n)for(let r=0;r<n.length;r++){const a=n[r];this.kinds.indexOf(a.kind)!==-1&&(a===i?a.mode!=="showing"&&(a.mode="showing"):a.mode!=="disabled"&&(a.mode="disabled"))}}handleTracksChange(e){const i=this.track.mode==="showing";i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}fi.registerComponent("TextTrackMenuItem",Cy);class _R extends Cy{constructor(e,i){i.track={player:e,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(e,i)}handleTracksChange(e){const i=this.player().textTracks();let n=!0;for(let r=0,a=i.length;r<a;r++){const c=i[r];if(this.options_.kinds.indexOf(c.kind)>-1&&c.mode==="showing"){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const i=this.player().textTracks();let n=!0;for(let r=0,a=i.length;r<a;r++){const c=i[r];if(["captions","descriptions","subtitles"].indexOf(c.kind)>-1&&c.mode==="showing"){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}}fi.registerComponent("OffTextTrackMenuItem",_R);class Zg extends dk{constructor(e,i={}){i.tracks=e.textTracks(),super(e,i)}createItems(e=[],i=Cy){let n;this.label_&&(n=`${this.label_} off`),e.push(new _R(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let a=0;a<r.length;a++){const c=r[a];if(this.kinds_.indexOf(c.kind)>-1){const s=new i(this.player_,{track:c,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass(`vjs-${c.kind}-menu-item`),e.push(s)}}return e}}fi.registerComponent("TextTrackButton",Zg);class vR extends Sy{constructor(e,i){const n=i.track,r=i.cue,a=e.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=r.text,i.selected=r.startTime<=a&&a<r.endTime,super(e,i),this.track=n,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}fi.registerComponent("ChaptersTrackMenuItem",vR);class hk extends Zg{constructor(e,i,n){super(e,i,n),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(oo(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const i=this.track_.cues;if(!i)return e;for(let n=0,r=i.length;n<r;n++){const a=i[n],c=new vR(this.player_,{track:this.track_,cue:a});e.push(c)}return e}}hk.prototype.kind_="chapters";hk.prototype.controlText_="Chapters";fi.registerComponent("ChaptersButton",hk);class fk extends Zg{constructor(e,i,n){super(e,i,n);const r=e.textTracks(),a=ys(this,this.handleTracksChange);r.addEventListener("change",a),this.on("dispose",function(){r.removeEventListener("change",a)})}handleTracksChange(e){const i=this.player().textTracks();let n=!1;for(let r=0,a=i.length;r<a;r++){const c=i[r];if(c.kind!==this.kind_&&c.mode==="showing"){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}fk.prototype.kind_="descriptions";fk.prototype.controlText_="Descriptions";fi.registerComponent("DescriptionsButton",fk);class pk extends Zg{constructor(e,i,n){super(e,i,n)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}pk.prototype.kind_="subtitles";pk.prototype.controlText_="Subtitles";fi.registerComponent("SubtitlesButton",pk);class mk extends Cy{constructor(e,i){i.track={player:e,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(e,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}}fi.registerComponent("CaptionSettingsMenuItem",mk);class gk extends Zg{constructor(e,i,n){super(e,i,n)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new mk(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}gk.prototype.kind_="captions";gk.prototype.controlText_="Captions";fi.registerComponent("CaptionsButton",gk);class yR extends Cy{createEl(e,i,n){const r=super.createEl(e,i,n),a=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(a.appendChild(lr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(lr("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}fi.registerComponent("SubsCapsMenuItem",yR);class _k extends Zg{constructor(e,i={}){super(e,i),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(oo(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new mk(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,yR),e}}_k.prototype.kinds_=["captions","subtitles"];_k.prototype.controlText_="Subtitles";fi.registerComponent("SubsCapsButton",_k);class bR extends Sy{constructor(e,i){const n=i.track,r=e.audioTracks();i.label=n.label||n.language||"Unknown",i.selected=n.enabled,super(e,i),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const a=(...c)=>{this.handleTracksChange.apply(this,c)};r.addEventListener("change",a),this.on("dispose",()=>{r.removeEventListener("change",a)})}createEl(e,i,n){const r=super.createEl(e,i,n),a=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(a.appendChild(lr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(lr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const r=i[n];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}fi.registerComponent("AudioTrackMenuItem",bR);class xR extends dk{constructor(e,i={}){i.tracks=e.audioTracks(),super(e,i)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let n=0;n<i.length;n++){const r=i[n];e.push(new bR(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}xR.prototype.controlText_="Audio Track";fi.registerComponent("AudioTrackButton",xR);class vk extends Sy{constructor(e,i){const n=i.rate,r=parseFloat(n,10);i.label=n,i.selected=r===e.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(e,i),this.label=n,this.rate=r,this.on(e,"ratechange",a=>this.update(a))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}vk.prototype.contentElType="button";fi.registerComponent("PlaybackRateMenuItem",vk);class wR extends ck{constructor(e,i){super(e,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",n=>this.updateVisibility(n)),this.on(e,"ratechange",n=>this.updateLabel(n)),this.on(e,"playbackrateschange",n=>this.handlePlaybackRateschange(n))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=lr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),i=[];for(let n=e.length-1;n>=0;n--)i.push(new vk(this.player(),{rate:e[n]+"x"}));return i}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}wR.prototype.controlText_="Playback Rate";fi.registerComponent("PlaybackRateMenuButton",wR);class TR extends fi{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",i={},n={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(e,i,n)}}fi.registerComponent("Spacer",TR);class Wq extends TR{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}fi.registerComponent("CustomControlSpacer",Wq);class ub extends fi{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ub.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in ji&&ub.prototype.options_.children.splice(ub.prototype.options_.children.length-1,0,"pictureInPictureToggle");fi.registerComponent("ControlBar",ub);class SR extends Wg{constructor(e,i){super(e,i),this.on(e,"error",n=>this.open(n))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}SR.prototype.options_=Object.assign({},Wg.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});fi.registerComponent("ErrorDisplay",SR);const OT="vjs-text-track-settings",pM=["#000","Black"],mM=["#00F","Blue"],gM=["#0FF","Cyan"],_M=["#0F0","Green"],vM=["#F0F","Magenta"],yM=["#F00","Red"],bM=["#FFF","White"],xM=["#FF0","Yellow"],LT=["1","Opaque"],DT=["0.5","Semi-Transparent"],wM=["0","Transparent"],wp={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[pM,bM,yM,_M,mM,xM,vM,gM]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[LT,DT,wM]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[bM,pM,yM,_M,mM,xM,vM,gM]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[LT,DT]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[wM,DT,LT]}};wp.windowColor.options=wp.backgroundColor.options;function CR(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function qq(t,e){const i=t.options[t.options.selectedIndex].value;return CR(i,e)}function Zq(t,e,i){if(e){for(let n=0;n<t.options.length;n++)if(CR(t.options[n].value,i)===e){t.selectedIndex=n;break}}}class Yq extends Wg{constructor(e,i){i.temporary=!1,super(e,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=lr("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),i.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),rg(wp,n=>{this.on(this.$(n.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,i="",n="label"){const r=wp[e],a=r.id.replace("%s",this.id_),c=[i,a].join(" ").trim();return[`<${n} id="${a}" class="${n==="label"?"vjs-label":""}">`,this.localize(r.label),`</${n}>`,`<select aria-labelledby="${c}">`].concat(r.options.map(s=>{const p=a+"-"+s[1].replace(/\W+/g,"");return[`<option id="${p}" value="${s[0]}" `,`aria-labelledby="${c} ${p}">`,this.localize(s[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return lr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return lr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return lr("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return C5(wp,(e,i,n)=>{const r=qq(this.$(i.selector),i.parser);return r!==void 0&&(e[n]=r),e},{})}setValues(e){rg(wp,(i,n)=>{Zq(this.$(i.selector),e[n],i.parser)})}setDefaults(){rg(wp,e=>{const i=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=i})}restoreSettings(){let e;try{e=JSON.parse(yt.localStorage.getItem(OT))}catch(i){gr.warn(i)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?yt.localStorage.setItem(OT,JSON.stringify(e)):yt.localStorage.removeItem(OT)}catch(i){gr.warn(i)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,i=e&&e.subsCapsButton,n=e&&e.captionsButton;i?i.focus():n&&n.focus()}}fi.registerComponent("TextTrackSettings",Yq);class Xq extends fi{constructor(e,i){let n=i.ResizeObserver||yt.ResizeObserver;i.ResizeObserver===null&&(n=!1);const r=vs({createEl:!n,reportTouchActivity:!1},i);super(e,r),this.ResizeObserver=i.ResizeObserver||yt.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=G5(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const a=this.debouncedHandler_;let c=this.unloadListener_=function(){ul(this,"resize",a),ul(this,"unload",c),c=null};Ku(this.el_.contentWindow,"unload",c),Ku(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}fi.registerComponent("ResizeManager",Xq);const Kq={trackingThreshold:20,liveTolerance:15};class Qq extends fi{constructor(e,i){const n=vs(Kq,i,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const i=Number(yt.performance.now().toFixed(4)),n=this.lastTime_===-1?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+n;const r=this.liveCurrentTime(),a=this.player_.currentTime();let c=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(c=!1),c!==this.behindLiveEdge_&&(this.behindLiveEdge_=c,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ic),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.end(n));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),i=[];let n=e?e.length:0;for(;n--;)i.push(e.start(n));return i.length?i.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}fi.registerComponent("LiveTracker",Qq);class Jq extends fi{constructor(e,i){super(e,i),this.on("statechanged",n=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:lr("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Wd()}`}),description:lr("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Wd()}`})},lr("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,i=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const a=this.state[r],c=this.els[r],s=n[r];gx(c),a&&Vf(c,a),i&&(i.removeAttribute(s),a&&i.setAttribute(s,c.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,i=e&&e.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}fi.registerComponent("TitleBar",Jq);const q2=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const i=t.$$("source"),n=[];let r="";if(!i.length)return!1;for(let a=0;a<i.length;a++){const c=i[a].src;c&&n.indexOf(c)===-1&&n.push(c)}return n.length?(n.length===1&&(r=n[0]),t.triggerSourceset(r),!0):!1},eZ=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=ji.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const i=ji.createDocumentFragment();for(;e.childNodes.length;)i.appendChild(e.childNodes[0]);return this.innerText="",yt.Element.prototype.appendChild.call(this,i),this.innerHTML}}),kR=(t,e)=>{let i={};for(let n=0;n<t.length&&(i=Object.getOwnPropertyDescriptor(t[n],e),!(i&&i.set&&i.get));n++);return i.enumerable=!0,i.configurable=!0,i},tZ=t=>kR([t.el(),yt.HTMLMediaElement.prototype,yt.Element.prototype,eZ],"innerHTML"),TM=function(t){const e=t.el();if(e.resetSourceWatch_)return;const i={},n=tZ(t),r=a=>(...c)=>{const s=a.apply(e,c);return q2(t),s};["append","appendChild","insertAdjacentHTML"].forEach(a=>{e[a]&&(i[a]=e[a],e[a]=r(i[a]))}),Object.defineProperty(e,"innerHTML",vs(n,{set:r(n.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(i).forEach(a=>{e[a]=i[a]}),Object.defineProperty(e,"innerHTML",n)},t.one("sourceset",e.resetSourceWatch_)},iZ=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?tR(yt.Element.prototype.getAttribute.call(this,"src")):""},set(t){return yt.Element.prototype.setAttribute.call(this,"src",t),t}}),nZ=t=>kR([t.el(),yt.HTMLMediaElement.prototype,iZ],"src"),rZ=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=nZ(t),n=e.setAttribute,r=e.load;Object.defineProperty(e,"src",vs(i,{set:a=>{const c=i.set.call(e,a);return t.triggerSourceset(e.src),c}})),e.setAttribute=(a,c)=>{const s=n.call(e,a,c);return/src/i.test(a)&&t.triggerSourceset(e.src),s},e.load=()=>{const a=r.call(e);return q2(t)||(t.triggerSourceset(""),TM(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):q2(t)||TM(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}};class nn extends Xn{constructor(e,i){super(e,i);const n=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",n&&(this.el_.currentSrc!==n.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const a=this.el_.childNodes;let c=a.length;const s=[];for(;c--;){const p=a[c];p.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(p),this.remoteTextTracks().addTrack(p.track),this.textTracks().addTrack(p.track),!r&&!this.el_.hasAttribute("crossorigin")&&bx(p.src)&&(r=!0)):s.push(p))}for(let p=0;p<s.length;p++)this.el_.removeChild(s[p])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&gr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(ey||dx)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),nn.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){rZ(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let i;const n=()=>{i=[];for(let a=0;a<e.length;a++){const c=e[a];c.kind==="metadata"&&i.push({track:c,storedMode:c.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const r=()=>{for(let a=0;a<i.length;a++){const c=i[a];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})}overrideNative_(e,i){if(i!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(r=>{this.el()[`${n}Tracks`].removeEventListener(r,this[`${n}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!i,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const i=Ec[e],n=this.el()[i.getterName],r=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!n||!n.addEventListener)return;const a={change:s=>{const p={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(p),e==="text"&&this[Pg.remoteText.getterName]().trigger(p)},addtrack(s){r.addTrack(s.track)},removetrack(s){r.removeTrack(s.track)}},c=function(){const s=[];for(let p=0;p<r.length;p++){let _=!1;for(let b=0;b<n.length;b++)if(n[b]===r[p]){_=!0;break}_||s.push(r[p])}for(;s.length;)r.removeTrack(s.shift())};this[i.getterName+"Listeners_"]=a,Object.keys(a).forEach(s=>{const p=a[s];n.addEventListener(s,p),this.on("dispose",_=>n.removeEventListener(s,p))}),this.on("loadstart",c),this.on("dispose",s=>this.off("loadstart",c))}proxyNativeTracks_(){Ec.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),nn.disposeMediaElement(e),e=n}else{e=ji.createElement("video");const n=this.options_.tag&&vf(this.options_.tag),r=vs({},n);(!ey||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,L5(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Cg(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let n=0;n<i.length;n++){const r=i[n],a=this.options_[r];typeof a<"u"&&(a?Cg(e,r,r):px(e,r),e[r]=a)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let n=!1;const r=function(){n=!0};this.on("loadstart",r);const a=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",a),n||this.trigger("loadstart")});return}const i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(n){this.trigger(n)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&hx?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){gr(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Hd&&Gd&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Dd(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){nn.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,n):super.addTextTrack(e,i,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const i=ji.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i}addRemoteTextTrack(e,i){const n=super.addRemoteTextTrack(e,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const i=this.$$("track");let n=i.length;for(;n--;)(e===i[n]||e===i[n].track)&&this.el().removeChild(i[n])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),yt.performance&&(e.creationTime=yt.performance.now()),e}}lx(nn,"TEST_VID",function(){if(!jg())return;const t=ji.createElement("video"),e=ji.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t});nn.isSupported=function(){try{nn.TEST_VID.volume=.5}catch{return!1}return!!(nn.TEST_VID&&nn.TEST_VID.canPlayType)};nn.canPlayType=function(t){return nn.TEST_VID.canPlayType(t)};nn.canPlaySource=function(t,e){return nn.canPlayType(t.type)};nn.canControlVolume=function(){try{const t=nn.TEST_VID.volume;nn.TEST_VID.volume=t/2+.1;const e=t!==nn.TEST_VID.volume;return e&&$l?(yt.setTimeout(()=>{nn&&nn.prototype&&(nn.prototype.featuresVolumeControl=t!==nn.TEST_VID.volume)}),!1):e}catch{return!1}};nn.canMuteVolume=function(){try{const t=nn.TEST_VID.muted;return nn.TEST_VID.muted=!t,nn.TEST_VID.muted?Cg(nn.TEST_VID,"muted","muted"):px(nn.TEST_VID,"muted","muted"),t!==nn.TEST_VID.muted}catch{return!1}};nn.canControlPlaybackRate=function(){if(Hd&&Gd&&ux<58)return!1;try{const t=nn.TEST_VID.playbackRate;return nn.TEST_VID.playbackRate=t/2+.1,t!==nn.TEST_VID.playbackRate}catch{return!1}};nn.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(ji.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(ji.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(ji.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(ji.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};nn.supportsNativeTextTracks=function(){return hx||$l&&Gd};nn.supportsNativeVideoTracks=function(){return!!(nn.TEST_VID&&nn.TEST_VID.videoTracks)};nn.supportsNativeAudioTracks=function(){return!!(nn.TEST_VID&&nn.TEST_VID.audioTracks)};nn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){lx(nn.prototype,t,()=>nn[e](),!0)});nn.prototype.featuresVolumeControl=nn.canControlVolume();nn.prototype.movingMediaElementInDOM=!$l;nn.prototype.featuresFullscreenResize=!0;nn.prototype.featuresProgressEvents=!0;nn.prototype.featuresTimeupdateEvents=!0;nn.prototype.featuresVideoFrameCallback=!!(nn.TEST_VID&&nn.TEST_VID.requestVideoFrameCallback);nn.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};nn.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let i=e.length;for(;i--;)t.removeChild(e[i]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){nn.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){nn.prototype["set"+oo(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){nn.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){nn.prototype["set"+oo(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){nn.prototype[t]=function(){return this.el_[t]()}});Xn.withSourceHandlers(nn);nn.nativeSourceHandler={};nn.nativeSourceHandler.canPlayType=function(t){try{return nn.TEST_VID.canPlayType(t)}catch{return""}};nn.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return nn.nativeSourceHandler.canPlayType(t.type);if(t.src){const i=ik(t.src);return nn.nativeSourceHandler.canPlayType(`video/${i}`)}return""};nn.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)};nn.nativeSourceHandler.dispose=function(){};nn.registerSourceHandler(nn.nativeSourceHandler);Xn.registerTech("Html5",nn);const ER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],RT={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Z2=["tiny","xsmall","small","medium","large","xlarge","huge"],b1={};Z2.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;b1[t]=`vjs-layout-${e}`});const sZ={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class bs extends fi{constructor(e,i,n){if(e.id=e.id||i.id||`vjs_video_${Wd()}`,i=Object.assign(bs.getTagSettings(e),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const c=e.closest("[lang]");c&&(i.language=c.getAttribute("lang"))}if(super(null,i,n),this.boundDocumentFullscreenChange_=c=>this.documentFullscreenChange_(c),this.boundFullWindowOnEscKey_=c=>this.fullWindowOnEscKey(c),this.boundUpdateStyleEl_=c=>this.updateStyleEl_(c),this.boundApplyInitTime_=c=>this.applyInitTime_(c),this.boundUpdateCurrentBreakpoint_=c=>this.updateCurrentBreakpoint_(c),this.boundHandleTechClick_=c=>this.handleTechClick_(c),this.boundHandleTechDoubleClick_=c=>this.handleTechDoubleClick_(c),this.boundHandleTechTouchStart_=c=>this.handleTechTouchStart_(c),this.boundHandleTechTouchMove_=c=>this.handleTechTouchMove_(c),this.boundHandleTechTouchEnd_=c=>this.handleTechTouchEnd_(c),this.boundHandleTechTap_=c=>this.handleTechTap_(c),this.isFullscreen_=!1,this.log=T5(this.id_),this.fsApi_=ib,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&vf(e),this.language(this.options_.language),i.languages){const c={};Object.getOwnPropertyNames(i.languages).forEach(function(s){c[s.toLowerCase()]=i.languages[s]}),this.languages_=c}else this.languages_=bs.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(c=>{if(typeof this[c]!="function")throw new Error(`plugin "${c}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),QC(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ku(ji,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=vs(this.options_);i.plugins&&Object.keys(i.plugins).forEach(c=>{this[c](i.plugins[c])}),i.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(i.playbackRates),this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),ey&&this.addClass("vjs-touch-enabled"),$l||this.addClass("vjs-workinghover"),bs.players[this.id_]=this;const a=b5.split(".")[0];this.addClass(`vjs-v${a}`),this.userActive(!0),this.reportUserActivity(),this.one("play",c=>this.listenForUserActivity_(c)),this.on("keydown",c=>this.handleKeyDown(c)),this.on("languagechange",c=>this.handleLanguagechange(c)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),ul(ji,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ul(ji,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),bs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Eq(this),Ll.names.forEach(e=>{const i=Ll[e],n=this[i.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,i,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";n?i=this.el_=e.parentNode:r||(i=this.el_=super.createEl("div"));const a=vf(e);if(r){for(i=this.el_=e,e=this.tag=ji.createElement("video");i.children.length;)e.appendChild(i.firstChild);Iv(i,"video-js")||Fp(i,"video-js"),i.appendChild(e),n=this.playerElIngest_=i,Object.keys(i).forEach(s=>{try{e[s]=i[s]}catch{}})}if(e.setAttribute("tabindex","-1"),a.tabindex="-1",Gd&&cx&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(s){r&&s==="class"||i.setAttribute(s,a[s]),r&&e.setAttribute(s,a[s])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused"),yt.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=j5("vjs-styles-dimensions");const s=Lf(".vjs-styles-defaults"),p=Lf("head");p.insertBefore(this.styleEl_,s?s.nextSibling:p.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const c=e.getElementsByTagName("a");for(let s=0;s<c.length;s++){const p=c.item(s);Fp(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(i,e),N2(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){gr.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,i){const n=e+"_";if(i===void 0)return this[n]||0;if(i===""||i==="auto"){this[n]=void 0,this.updateStyleEl_();return}const r=parseFloat(i);if(isNaN(r)){gr.error(`Improper value "${i}" supplied for for ${e}`);return}this[n]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Th(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),nq(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(yt.VIDEOJS_NO_DYNAMIC_STYLE===!0){const s=typeof this.width_=="number"?this.width_:this.options_.width,p=typeof this.height_=="number"?this.height_:this.options_.height,_=this.tech_&&this.tech_.el();_&&(s>=0&&(_.width=s),p>=0&&(_.height=p));return}let e,i,n,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?n=this.aspectRatio_:this.videoWidth()>0?n=this.videoWidth()+":"+this.videoHeight():n="16:9";const a=n.split(":"),c=a[1]/a[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/c:e=this.videoWidth()||300,this.height_!==void 0?i=this.height_:i=e*c,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),H5(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${i}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${c*100}%;
      }
    `)}loadTech_(e,i){this.tech_&&this.unloadTech_();const n=oo(e),r=e.charAt(0).toLowerCase()+e.slice(1);n!=="Html5"&&this.tag&&(Xn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let a=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(a=!1);const c={source:i,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ll.names.forEach(p=>{const _=Ll[p];c[_.getterName]=this[_.privateName]}),Object.assign(c,this.options_[n]),Object.assign(c,this.options_[r]),Object.assign(c,this.options_[e.toLowerCase()]),this.tag&&(c.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);const s=Xn.getTech(e);if(!s)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new s(c),this.tech_.ready(ys(this,this.handleTechReady_),!0),sM.jsonToTextTracks(this.textTracksJson_||[],this.tech_),ER.forEach(p=>{this.on(this.tech_,p,_=>this[`handleTech${oo(p)}_`](_))}),Object.keys(RT).forEach(p=>{this.on(this.tech_,p,_=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${RT[p]}_`].bind(this),event:_});return}this[`handleTech${RT[p]}_`](_)})}),this.on(this.tech_,"loadstart",p=>this.handleTechLoadStart_(p)),this.on(this.tech_,"sourceset",p=>this.handleTechSourceset_(p)),this.on(this.tech_,"waiting",p=>this.handleTechWaiting_(p)),this.on(this.tech_,"ended",p=>this.handleTechEnded_(p)),this.on(this.tech_,"seeking",p=>this.handleTechSeeking_(p)),this.on(this.tech_,"play",p=>this.handleTechPlay_(p)),this.on(this.tech_,"pause",p=>this.handleTechPause_(p)),this.on(this.tech_,"durationchange",p=>this.handleTechDurationChange_(p)),this.on(this.tech_,"fullscreenchange",(p,_)=>this.handleTechFullscreenChange_(p,_)),this.on(this.tech_,"fullscreenerror",(p,_)=>this.handleTechFullscreenError_(p,_)),this.on(this.tech_,"enterpictureinpicture",p=>this.handleTechEnterPictureInPicture_(p)),this.on(this.tech_,"leavepictureinpicture",p=>this.handleTechLeavePictureInPicture_(p)),this.on(this.tech_,"error",p=>this.handleTechError_(p)),this.on(this.tech_,"posterchange",p=>this.handleTechPosterChange_(p)),this.on(this.tech_,"textdata",p=>this.handleTechTextData_(p)),this.on(this.tech_,"ratechange",p=>this.handleTechRateChange_(p)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)&&N2(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Ll.names.forEach(e=>{const i=Ll[e];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=sM.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&gr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const i=()=>{const r=this.muted();this.muted(!0);const a=()=>{this.muted(r)};this.playTerminatedQueue_.push(a);const c=this.play();if(Av(c))return c.catch(s=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${s||""}`)})};let n;if(e==="any"&&!this.muted()?(n=this.play(),Av(n)&&(n=n.catch(i))):e==="muted"&&!this.muted()?n=i():n=this.play(),!!Av(n))return n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let i=e,n="";typeof i!="string"&&(i=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!n&&(n=Aq(this,i)),this.cache_.source=vs({},e,{src:i,type:n});const r=this.cache_.sources.filter(p=>p.src&&p.src===i),a=[],c=this.$$("source"),s=[];for(let p=0;p<c.length;p++){const _=vf(c[p]);a.push(_),_.src&&_.src===i&&s.push(_.src)}s.length&&!r.length?this.cache_.sources=a:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(e){if(!this.changingSrc_){let i=a=>this.updateSourceCaches_(a);const n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=()=>{}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],a=>{if(a.type==="sourceset")return;const c=this.techGet("currentSrc");this.lastSource_.tech=c,this.updateSourceCaches_(c)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),i=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Dd(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),n=>n.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const i=e.target.player;if(i&&i!==this)return;const n=this.el();let r=ji[this.fsApi_.fullscreenElement]===n;!r&&n.matches?r=n.matches(":"+this.fsApi_.fullscreen):!r&&n.msMatchesSelector&&(r=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(e,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,i){this.ready(function(){if(e in Cq)return Tq(this.middleware_,this.tech_,e,i);if(e in cM)return uM(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(n){throw gr(n),n}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in Sq)return wq(this.middleware_,this.tech_,e);if(e in cM)return uM(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw this.tech_[e]===void 0?(gr(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,i),i):i.name==="TypeError"?(gr(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):(gr(i),i)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Dd){this.playCallbacks_.push(e);const i=!!(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i){this.waitToPlay_=r=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!i&&(hx||$l)&&this.load();return}const n=this.techGet_("play");n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})}runPlayCallbacks_(e){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(n){n(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Ud(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(typeof e<"u"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Ud(0,0)),e}bufferedPercent(){return J5(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),i=this.duration();let n=e.end(e.length-1);return n>i&&(n=i),n}volume(e){let i;if(e!==void 0){i=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=i,this.techCall_("setVolume",i),i>0&&this.lastVolume_(i);return}return i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const i=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((n,r)=>{function a(){i.off("fullscreenerror",s),i.off("fullscreenchange",c)}function c(){a(),n()}function s(_,b){a(),r(b)}i.one("fullscreenchange",c),i.one("fullscreenerror",s);const p=i.requestFullscreenHelper_(e);p&&(p.then(a,a),p.then(n,r))})}requestFullscreenHelper_(e){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(i=e)),this.fsApi_.requestFullscreen){const n=this.el_[this.fsApi_.requestFullscreen](i);return n&&n.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((i,n)=>{function r(){e.off("fullscreenerror",c),e.off("fullscreenchange",a)}function a(){r(),i()}function c(p,_){r(),n(_)}e.one("fullscreenchange",a),e.one("fullscreenerror",c);const s=e.exitFullscreenHelper_();s&&(s.then(r,r),s.then(i,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=ji[this.fsApi_.exitFullscreen]();return e&&Dd(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ji.documentElement.style.overflow,Ku(ji,"keydown",this.boundFullWindowOnEscKey_),ji.documentElement.style.overflow="hidden",Fp(ji.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Bn.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,ul(ji,"keydown",this.boundFullWindowOnEscKey_),ji.documentElement.style.overflow=this.docOrigOverflow,fx(ji.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in ji&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in ji)return ji.exitPictureInPicture()}handleKeyDown(e){const{userActions:i}=this.options_;!i||!i.hotkeys||(r=>{const a=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const c=["button","checkbox","hidden","radio","reset","submit"];return a==="input"?c.indexOf(r.type)===-1:["textarea"].indexOf(a)!==-1})(this.el_.ownerDocument.activeElement)||(typeof i.hotkeys=="function"?i.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=c=>Bn.isEventKey(c,"f"),muteKey:r=c=>Bn.isEventKey(c,"m"),playPauseKey:a=c=>Bn.isEventKey(c,"k")||Bn.isEventKey(c,"Space")}=i;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const c=fi.getComponent("FullscreenToggle");ji[this.fsApi_.fullscreenEnabled]!==!1&&c.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),fi.getComponent("MuteToggle").prototype.handleClick.call(this,e)):a.call(this,e)&&(e.preventDefault(),e.stopPropagation(),fi.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let i;for(let n=0,r=this.options_.techOrder;n<r.length;n++){const a=r[n];let c=Xn.getTech(a);if(c||(c=fi.getComponent(a)),!c){gr.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`);continue}if(c.isSupported()&&(i=c.canPlayType(e),i))return i}return""}selectSource(e){const i=this.options_.techOrder.map(s=>[s,Xn.getTech(s)]).filter(([s,p])=>p?p.isSupported():(gr.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(s,p,_){let b;return s.some(S=>p.some(E=>{if(b=_(S,E),b)return!0})),b};let r;const a=s=>(p,_)=>s(_,p),c=([s,p],_)=>{if(p.canPlaySource(_,this.options_[s.toLowerCase()]))return{source:_,tech:s}};return this.options_.sourceOrder?r=n(e,i,a(c)):r=n(i,e,c),r||!1}handleSrc_(e,i){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=rR(e);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,i||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),bq(this,n[0],(r,a)=>{if(this.middleware_=a,i||(this.cache_.sources=n),this.updateSourceCaches_(r),this.src_(r)){if(n.length>1)return this.handleSrc_(n.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}xq(a,this.tech_)}),n.length>1){const r=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},a=()=>{this.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",a)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const i=this.selectSource([e]);return i?Y5(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Dd(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Th(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{durationDisplay:e,remainingTimeDisplay:i}=this.controlBar||{};e&&e.updateContent(),i&&i.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),i=[];return Object.keys(e).length!==0&&i.push(e),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let i;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),i=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Of("beforeerror").forEach(i=>{const n=i(this,e);if(!(jd(n)&&!Array.isArray(n)||typeof n=="string"||typeof n=="number"||n===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=n}),this.options_.suppressNotSupportedError&&e&&e.code===4){const i=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Bl(e),this.addClass("vjs-error"),gr.error(`(CODE:${this.error_.code} ${Bl.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Of("error").forEach(i=>i(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,i,n;const r=ys(this,this.reportUserActivity),a=function(b){(b.screenX!==i||b.screenY!==n)&&(i=b.screenX,n=b.screenY,r())},c=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},s=function(b){r(),this.clearInterval(e)};this.on("mousedown",c),this.on("mousemove",a),this.on("mouseup",s),this.on("mouseleave",s);const p=this.getChild("controlBar");p&&!$l&&!Hd&&(p.on("mouseenter",function(b){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),p.on("mouseleave",function(b){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let _;this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(_);const b=this.options_.inactivityTimeout;b<=0||(_=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},b))},250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),i=this.getChild("ControlBar"),n=i&&i.currentHeight();e.forEach(r=>{r!==i&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,i,n){if(this.tech_)return this.tech_.addTextTrack(e,i,n)}addRemoteTextTrack(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)}removeRemoteTextTrack(e={}){let{track:i}=e;if(i||(i=e),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Th(this)&&this.trigger("languagechange"))}languages(){return vs(bs.prototype.options_.languages,this.languages_)}toJSON(){const e=vs(this.options_),i=e.tracks;e.tracks=[];for(let n=0;n<i.length;n++){let r=i[n];r=vs(r),r.player=void 0,e.tracks[n]=r}return e}createModal(e,i){i=i||{},i.content=e||"";const n=new Wg(this,i);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),i=this.currentWidth();for(let n=0;n<Z2.length;n++){const r=Z2[n],a=this.breakpoints_[r];if(i<=a){if(e===r)return;e&&this.removeClass(b1[e]),this.addClass(b1[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},sZ,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const i=this.responsive_;if(e!==i)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return b1[this.breakpoint_]||""}loadMedia(e,i){if(!e||typeof e!="object")return;this.reset(),this.cache_.media=vs(e);const{artist:n,artwork:r,description:a,poster:c,src:s,textTracks:p,title:_}=this.cache_.media;!r&&c&&(this.cache_.media.artwork=[{src:c,type:lb(c)}]),s&&this.src(s),c&&this.poster(c),Array.isArray(p)&&p.forEach(b=>this.addRemoteTextTrack(b,!1)),this.titleBar&&this.titleBar.update({title:_,description:a||n||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const e=this.poster(),i=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src})),r={src:i,textTracks:n};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:lb(r.poster)}]),r}return vs(this.cache_.media)}static getTagSettings(e){const i={sources:[],tracks:[]},n=vf(e),r=n["data-setup"];if(Iv(e,"vjs-fill")&&(n.fill=!0),Iv(e,"vjs-fluid")&&(n.fluid=!0),r!==null){const[a,c]=jj(r||"{}");a&&gr.error(a),Object.assign(n,c)}if(Object.assign(i,n),e.hasChildNodes()){const a=e.childNodes;for(let c=0,s=a.length;c<s;c++){const p=a[c],_=p.nodeName.toLowerCase();_==="source"?i.sources.push(vf(p)):_==="track"&&i.tracks.push(vf(p))}}return i}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(i=>typeof i=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Ll.names.forEach(function(t){const e=Ll[t];bs.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});bs.prototype.crossorigin=bs.prototype.crossOrigin;bs.players={};const nv=yt.navigator;bs.prototype.options_={techOrder:Xn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:nv&&(nv.languages&&nv.languages[0]||nv.userLanguage||nv.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){bs.prototype[t]=function(){return this.techGet_(t)}});ER.forEach(function(t){bs.prototype[`handleTech${oo(t)}_`]=function(){return this.trigger(t)}});fi.registerComponent("Player",bs);const cb="plugin",ag="activePlugins_",qm={},db=t=>qm.hasOwnProperty(t),x1=t=>db(t)?qm[t]:void 0,IR=(t,e)=>{t[ag]=t[ag]||{},t[ag][e]=!0},hb=(t,e,i)=>{const n=(i?"before":"")+"pluginsetup";t.trigger(n,e),t.trigger(n+":"+e.name,e)},oZ=function(t,e){const i=function(){hb(this,{name:t,plugin:e,instance:null},!0);const n=e.apply(this,arguments);return IR(this,t),hb(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(n){i[n]=e[n]}),i},SM=(t,e)=>(e.prototype.name=t,function(...i){hb(this,{name:t,plugin:e,instance:null},!0);const n=new e(this,...i);return this[t]=()=>n,hb(this,n.getEventHash()),n});class yu{constructor(e){if(this.constructor===yu)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),QC(this),delete this.trigger,Z5(this,this.constructor.defaultState),IR(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,i={}){return Gg(this.eventBusEl_,e,this.getEventHash(i))}handleStateChanged(e){}dispose(){const{name:e,player:i}=this;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[ag][e]=!1,this.player=this.state=null,i[e]=SM(e,qm[e])}static isBasic(e){const i=typeof e=="string"?x1(e):e;return typeof i=="function"&&!yu.prototype.isPrototypeOf(i.prototype)}static registerPlugin(e,i){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(db(e))gr.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(bs.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof i!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof i}.`);return qm[e]=i,e!==cb&&(yu.isBasic(i)?bs.prototype[e]=oZ(e,i):bs.prototype[e]=SM(e,i)),i}static deregisterPlugin(e){if(e===cb)throw new Error("Cannot de-register base plugin.");db(e)&&(delete qm[e],delete bs.prototype[e])}static getPlugins(e=Object.keys(qm)){let i;return e.forEach(n=>{const r=x1(n);r&&(i=i||{},i[n]=r)}),i}static getPluginVersion(e){const i=x1(e);return i&&i.VERSION||""}}yu.getPlugin=x1;yu.BASE_PLUGIN_NAME=cb;yu.registerPlugin(cb,yu);bs.prototype.usingPlugin=function(t){return!!this[ag]&&this[ag][t]===!0};bs.prototype.hasPlugin=function(t){return!!db(t)};function aZ(t,e){let i=!1;return function(...n){return i||gr.warn(t),i=!0,e.apply(this,n)}}function ad(t,e,i,n){return aZ(`${e} is deprecated and will be removed in ${t}.0; please use ${i} instead.`,n)}const PR=t=>t.indexOf("#")===0?t.slice(1):t;function ei(t,e,i){let n=ei.getPlayer(t);if(n)return e&&gr.warn(`Player "${t}" is already initialised. Options will not be applied.`),i&&n.ready(i),n;const r=typeof t=="string"?Lf("#"+PR(t)):t;if(!Hg(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r))&&gr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Of("beforesetup").forEach(c=>{const s=c(r,vs(e));if(!jd(s)||Array.isArray(s)){gr.error("please return an object in beforesetup hooks");return}e=vs(e,s)});const a=fi.getComponent("Player");return n=new a(r,e,i),Of("setup").forEach(c=>c(n)),n}ei.hooks_=_h;ei.hooks=Of;ei.hook=jW;ei.hookOnce=HW;ei.removeHook=x5;if(yt.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&jg()){let t=Lf(".vjs-styles-defaults");if(!t){t=j5("vjs-styles-defaults");const e=Lf("head");e&&e.insertBefore(t,e.firstChild),H5(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}V2(1,ei);ei.VERSION=b5;ei.options=bs.prototype.options_;ei.getPlayers=()=>bs.players;ei.getPlayer=t=>{const e=bs.players;let i;if(typeof t=="string"){const n=PR(t),r=e[n];if(r)return r;i=Lf("#"+n)}else i=t;if(Hg(i)){const{player:n,playerId:r}=i;if(n||e[r])return n||e[r]}};ei.getAllPlayers=()=>Object.keys(bs.players).map(t=>bs.players[t]).filter(Boolean);ei.players=bs.players;ei.getComponent=fi.getComponent;ei.registerComponent=(t,e)=>{Xn.isTech(e)&&gr.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),fi.registerComponent.call(fi,t,e)};ei.getTech=Xn.getTech;ei.registerTech=Xn.registerTech;ei.use=yq;Object.defineProperty(ei,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ei.middleware,"TERMINATOR",{value:ab,writeable:!1,enumerable:!0});ei.browser=ZW;ei.obj=qW;ei.mergeOptions=ad(9,"videojs.mergeOptions","videojs.obj.merge",vs);ei.defineLazyProperty=ad(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",lx);ei.bind=ad(9,"videojs.bind","native Function.prototype.bind",ys);ei.registerPlugin=yu.registerPlugin;ei.deregisterPlugin=yu.deregisterPlugin;ei.plugin=(t,e)=>(gr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),yu.registerPlugin(t,e));ei.getPlugins=yu.getPlugins;ei.getPlugin=yu.getPlugin;ei.getPluginVersion=yu.getPluginVersion;ei.addLanguage=function(t,e){return t=(""+t).toLowerCase(),ei.options.languages=vs(ei.options.languages,{[t]:e}),ei.options.languages[t]};ei.log=gr;ei.createLogger=T5;ei.time=lq;ei.createTimeRange=ad(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ud);ei.createTimeRanges=ad(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ud);ei.formatTime=ad(9,"videojs.formatTime","videojs.time.formatTime",Gp);ei.setFormatTime=ad(9,"videojs.setFormatTime","videojs.time.setFormatTime",K5);ei.resetFormatTime=ad(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Q5);ei.parseUrl=ad(9,"videojs.parseUrl","videojs.url.parseUrl",tk);ei.isCrossOrigin=ad(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",bx);ei.EventTarget=Pc;ei.any=KC;ei.on=Ku;ei.one=vx;ei.off=ul;ei.trigger=Gg;ei.xhr=Zv;ei.TextTrack=wy;ei.AudioTrack=iR;ei.VideoTrack=nR;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{ei[t]=function(){return gr.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),V5[t].apply(null,arguments)}});ei.computedStyle=ad(9,"videojs.computedStyle","videojs.dom.computedStyle",Eg);ei.dom=V5;ei.fn=iq;ei.num=$q;ei.str=oq;ei.url=_q;/*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 */class lZ{constructor(e){let i=this;return i.id=e.id,i.label=i.id,i.width=e.width,i.height=e.height,i.bitrate=e.bandwidth,i.frameRate=e.frameRate,i.enabled_=e.enabled,Object.defineProperty(i,"enabled",{get(){return i.enabled_()},set(n){i.enabled_(n)}}),i}}class fb extends ei.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e}addQualityLevel(e){let i=this.getQualityLevelById(e.id);if(i)return i;const n=this.levels_.length;return i=new lZ(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(e){let i=null;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){i=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i}getQualityLevelById(e){for(let i=0,n=this.length;i<n;i++){const r=this[i];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}fb.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in fb.prototype.allowedEvents_)fb.prototype["on"+t]=null;var AR="3.0.0";const uZ=ei.registerPlugin||ei.plugin,cZ=function(t,e){const i=t.qualityLevels,n=new fb,r=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>n,t.qualityLevels.VERSION=AR,n},MR=function(t){return cZ(this,ei.mergeOptions({},t))};uZ("qualityLevels",MR);MR.VERSION=AR;/*! @name @videojs/http-streaming @version 3.0.0 @license Apache-2.0 */const Xc=DH,pb=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,ld=t=>ei.log.debug?ei.log.debug.bind(ei,"VHS:",`${t} >`):function(){};function hs(...t){const e=ei.obj||ei;return(e.merge||e.mergeOptions).apply(e,t)}function al(...t){const e=ei.time||ei;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}const Df=1/30,Rd=Df*3,OR=function(t,e){const i=[];let n;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return al(i)},Zm=function(t,e){return OR(t,function(i,n){return i-Rd<=e&&n+Rd>=e})},o1=function(t,e){return OR(t,function(i){return i-Df>=e})},dZ=function(t){if(t.length<2)return al();const e=[];for(let i=1;i<t.length;i++){const n=t.end(i-1),r=t.start(i);e.push([n,r])}return al(e)},hZ=function(t,e){let i=null,n=null,r=0;const a=[],c=[];if(!t||!t.length||!e||!e.length)return al();let s=t.length;for(;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(a.sort(function(p,_){return p.time-_.time}),s=0;s<a.length;s++)a[s].type==="start"?(r++,r===2&&(i=a[s].time)):a[s].type==="end"&&(r--,r===1&&(n=a[s].time)),i!==null&&n!==null&&(c.push([i,n]),i=null,n=null);return al(c)},LR=t=>{const e=[];if(!t||!t.length)return"";for(let i=0;i<t.length;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")},fZ=function(t,e,i=1){return((t.length?t.end(t.length-1):0)-e)/i},kp=t=>{const e=[];for(let i=0;i<t.length;i++)e.push({start:t.start(i),end:t.end(i)});return e},pZ=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let i=0;i<t.length;i++)if(t.start(i)!==e.start(i)||t.end(i)!==e.end(i))return!0;return!1},CM=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},yk=function(t,e){let i=0;if(!t||!t.length)return i;for(let n=0;n<t.length;n++){const r=t.start(n),a=t.end(n);if(!(e>a)){if(e>r&&e<=a){i+=a-e;continue}i+=a-r}}return i},bk=(t,e)=>{if(!e.preload)return e.duration;let i=0;return(e.parts||[]).forEach(function(n){i+=n.duration}),(e.preloadHints||[]).forEach(function(n){n.type==="PART"&&(i+=t.partTargetDuration)}),i},Y2=t=>(t.segments||[]).reduce((e,i,n)=>(i.parts?i.parts.forEach(function(r,a){e.push({duration:r.duration,segmentIndex:n,partIndex:a,part:r,segment:i})}):e.push({duration:i.duration,segmentIndex:n,partIndex:null,segment:i,part:null}),e),[]),DR=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},RR=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let n=(i||[]).reduce((r,a)=>r+(a.type==="PART"?1:0),0);return n+=e&&e.length?e.length:0,n},BR=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const i=DR(e).length>0;return i&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:i&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},mZ=function(t,e){let i=0,n=e-t.mediaSequence,r=t.segments[n];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;n--;){if(r=t.segments[n],typeof r.end<"u")return{result:i+r.end,precise:!0};if(i+=bk(t,r),typeof r.start<"u")return{result:i+r.start,precise:!0}}return{result:i,precise:!1}},gZ=function(t,e){let i=0,n,r=e-t.mediaSequence;for(;r<t.segments.length;r++){if(n=t.segments[r],typeof n.start<"u")return{result:n.start-i,precise:!0};if(i+=bk(t,n),typeof n.end<"u")return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},FR=function(t,e,i){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const n=mZ(t,e);if(n.precise)return n.result;const r=gZ(t,e);return r.precise?r.result:n.result+i},$R=function(t,e,i){if(!t)return 0;if(typeof i!="number"&&(i=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return yt.Infinity}return FR(t,e,i)},Mv=function({defaultDuration:t,durationList:e,startIndex:i,endIndex:n}){let r=0;if(i>n&&([i,n]=[n,i]),i<0){for(let a=i;a<Math.min(0,n);a++)r+=t;i=0}for(let a=i;a<n;a++)r+=e[a].duration;return r},NR=function(t,e,i,n){if(!t||!t.segments)return null;if(t.endList)return $R(t);if(e===null)return null;e=e||0;let r=FR(t,t.mediaSequence+t.segments.length,e);return i&&(n=typeof n=="number"?n:BR(null,t),r-=n),Math.max(0,r)},_Z=function(t,e,i){const r=e||0,a=NR(t,e,!0,i);return a===null?al():al(r,a)},vZ=function({playlist:t,currentTime:e,startingSegmentIndex:i,startingPartIndex:n,startTime:r,exactManifestTimings:a}){let c=e-r;const s=Y2(t);let p=0;for(let _=0;_<s.length;_++){const b=s[_];if(i===b.segmentIndex&&!(typeof n=="number"&&typeof b.partIndex=="number"&&n!==b.partIndex)){p=_;break}}if(c<0){if(p>0)for(let _=p-1;_>=0;_--){const b=s[_];if(c+=b.duration,a){if(c<0)continue}else if(c+Df<=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:r-Mv({defaultDuration:t.targetDuration,durationList:s,startIndex:p,endIndex:_})}}return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:e}}if(p<0){for(let _=p;_<0;_++)if(c-=t.targetDuration,c<0)return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:e};p=0}for(let _=p;_<s.length;_++){const b=s[_];if(c-=b.duration,a){if(c>0)continue}else if(c-Df>=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:r+Mv({defaultDuration:t.targetDuration,durationList:s,startIndex:p,endIndex:_})}}return{segmentIndex:s[s.length-1].segmentIndex,partIndex:s[s.length-1].partIndex,startTime:e}},zR=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},xk=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Tx=function(t){const e=zR(t);return!t.disabled&&!e},yZ=function(t){return t.disabled},bZ=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},VR=function(t,e){return e.attributes&&e.attributes[t]},xZ=function(t,e,i,n=0){return VR("BANDWIDTH",i)?(t*i.attributes.BANDWIDTH-n*8)/e:NaN},X2=(t,e)=>{if(t.playlists.length===1)return!0;const i=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(n=>Tx(n)?(n.attributes.BANDWIDTH||0)<i:!1).length===0},wk=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),kM=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let n=!1;for(const r in i){for(const a in i[r])if(n=e(i[r][a]),n)break;if(n)break}return!!n},ky=t=>{if(!t||!t.playlists||!t.playlists.length)return kM(t,i=>i.playlists&&i.playlists.length||i.uri);for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;if(!(n&&n.split(",").every(a=>A4(a))||kM(t,a=>wk(i,a))))return!1}return!0};var _u={liveEdgeDelay:BR,duration:$R,seekable:_Z,getMediaInfoForTime:vZ,isEnabled:Tx,isDisabled:yZ,isExcluded:zR,isIncompatible:xk,playlistEnd:NR,isAes:bZ,hasAttribute:VR,estimateSegmentRequestTime:xZ,isLowestEnabledRendition:X2,isAudioOnly:ky,playlistMatch:wk,segmentDurationWithParts:bk};const{log:UR}=ei,Tk=(t,e)=>`${t}-${e}`,wZ=({onwarn:t,oninfo:e,manifestString:i,customTagParsers:n=[],customTagMappers:r=[],llhls:a})=>{const c=new UH;t&&c.on("warn",t),e&&c.on("info",e),n.forEach(_=>c.addParser(_)),r.forEach(_=>c.addTagMapper(_)),c.push(i),c.end();const s=c.manifest;if(a||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(_){s.hasOwnProperty(_)&&delete s[_]}),s.segments&&s.segments.forEach(function(_){["parts","preloadHints"].forEach(function(b){_.hasOwnProperty(b)&&delete _[b]})})),!s.targetDuration){let _=10;s.segments&&s.segments.length&&(_=s.segments.reduce((b,S)=>Math.max(b,S.duration),0)),t&&t(`manifest has no targetDuration defaulting to ${_}`),s.targetDuration=_}const p=DR(s);if(p.length&&!s.partTargetDuration){const _=p.reduce((b,S)=>Math.max(b,S.duration),0);t&&(t(`manifest has no partTargetDuration defaulting to ${_}`),UR.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),s.partTargetDuration=_}return s},Ey=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(t.mediaGroups[i])for(const n in t.mediaGroups[i])for(const r in t.mediaGroups[i][n]){const a=t.mediaGroups[i][n][r];e(a,i,n,r)}})},jR=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},TZ=t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];jR({playlist:i,id:Tk(e,i.uri)}),i.resolvedUri=Xc(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH||UR.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},SZ=t=>{Ey(t,e=>{e.uri&&(e.resolvedUri=Xc(t.uri,e.uri))})},CZ=(t,e)=>{const i=Tk(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:yt.location.href,resolvedUri:yt.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n},HR=(t,e)=>{t.uri=e;for(let n=0;n<t.playlists.length;n++)if(!t.playlists[n].uri){const r=`placeholder-uri-${n}`;t.playlists[n].uri=r}const i=ky(t);Ey(t,(n,r,a,c)=>{const s=`placeholder-uri-${r}-${a}-${c}`;if(!n.playlists||!n.playlists.length){if(i&&r==="AUDIO"&&!n.uri)for(let p=0;p<t.playlists.length;p++){const _=t.playlists[p];if(_.attributes&&_.attributes.AUDIO&&_.attributes.AUDIO===a)return}n.playlists=[Ph({},n)]}n.playlists.forEach(function(p,_){const b=Tk(_,s);p.uri?p.resolvedUri=p.resolvedUri||Xc(t.uri,p.uri):(p.uri=_===0?s:b,p.resolvedUri=p.uri),p.id=p.id||b,p.attributes=p.attributes||{},t.playlists[p.id]=p,t.playlists[p.uri]=p})}),TZ(t),SZ(t)},{EventTarget:kZ}=ei,EZ=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:n}=e;let r=e.mediaSequence+e.segments.length;if(n){const a=n.parts||[],c=RR(e)-1;c>-1&&c!==a.length-1&&(i._HLS_part=c),(c>-1||a.length)&&r--}i._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const n=new yt.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){i.hasOwnProperty(r)&&n.searchParams.set(r,i[r])}),t=n.toString()}return t},IZ=(t,e)=>{if(!t)return e;const i=hs(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=hs(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},PZ=(t,e,i)=>{const n=t.slice(),r=e.slice();i=i||0;const a=[];let c;for(let s=0;s<r.length;s++){const p=n[s+i],_=r[s];p?(c=p.map||c,a.push(IZ(p,_))):(c&&!_.map&&(_.map=c),a.push(_))}return a},GR=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=Xc(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Xc(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Xc(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Xc(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=Xc(e,i.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=Xc(e,i.uri))})},WR=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(let n=0;n<i.preloadHints.length;n++)if(i.preloadHints[n].type==="MAP")return e}i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},qR=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,K2=(t,e,i=qR)=>{const n=hs(t,{}),r=n.playlists[e.id];if(!r||i(r,e))return null;e.segments=WR(e);const a=hs(r,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let c=0;c<e.skip.skippedSegments;c++)e.segments.unshift({skipped:!0})}a.segments=PZ(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}a.segments.forEach(c=>{GR(c,a.resolvedUri)});for(let c=0;c<n.playlists.length;c++)n.playlists[c].id===e.id&&(n.playlists[c]=a);return n.playlists[e.id]=a,n.playlists[e.uri]=a,Ey(t,(c,s,p,_)=>{if(c.playlists)for(let b=0;b<c.playlists.length;b++)e.id===c.playlists[b].id&&(c.playlists[b]=a)}),n},Q2=(t,e)=>{const i=t.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],a=r&&r.duration||n&&n.duration;return e&&a?a*1e3:(t.partTargetDuration||t.targetDuration||10)*500};class Ym extends kZ{constructor(e,i,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=ld("PlaylistLoader");const{withCredentials:r=!1}=n;this.src=e,this.vhs_=i,this.withCredentials=r;const a=i.options_;this.customTagParsers=a&&a.customTagParsers||[],this.customTagMappers=a&&a.customTagMappers||[],this.llhls=a&&a.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let i=Xc(this.main.uri,e.uri);this.llhls&&(i=EZ(i,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(n,r)=>{if(this.request){if(n)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,i,n){const{uri:r,id:a}=i;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[a],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:i}){return wZ({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:i,url:n,id:r}){this.request=null,this.state="HAVE_METADATA";const a=i||this.parseManifest_({url:n,manifestString:e});a.lastRequest=Date.now(),jR({playlist:a,uri:n,id:r});const c=K2(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,c?(this.main=c,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Q2(this.media(),!!c)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),yt.clearTimeout(this.mediaUpdateTimeout),yt.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,i){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(yt.clearTimeout(this.finalRenditionTimeout),i){const c=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=yt.setTimeout(this.media.bind(this,e,!1),c);return}const n=this.state,r=!this.media_||e.id!==this.media_.id,a=this.main.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Q2(e,!0)),!!r){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(c,s)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=pb(e.resolvedUri,s),c)return this.playlistRequestError(this.request,e,n);this.haveMetadata({playlistString:s.responseText,url:e.uri,id:e.id}),n==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(e){const n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=yt.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},n);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=yt.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=yt.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,i)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=pb(this.src,i);const n=this.parseManifest_({manifestString:i.responseText,url:this.src});this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,HR(this.main,this.srcUri()),e.playlists.forEach(n=>{n.segments=WR(n),n.segments.forEach(r=>{GR(r,n.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const i=this.srcUri()||yt.location.href;this.main=CZ(e,i),this.haveMetadata({playlistObject:e,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:AZ}=ei,J2=function(t,e,i,n){const r=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),i.headers&&(t.responseHeaders=i.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),n(e,t)},ZR=function(){const t=function e(i,n){i=hs({timeout:45e3},i);const r=e.beforeRequest||ei.Vhs.xhr.beforeRequest;if(r&&typeof r=="function"){const p=r(i);p&&(i=p)}const c=(ei.Vhs.xhr.original===!0?AZ:ei.Vhs.xhr)(i,function(p,_){return J2(c,p,_,n)}),s=c.abort;return c.abort=function(){return c.aborted=!0,s.apply(c,arguments)},c.uri=i.uri,c.requestTime=Date.now(),c};return t.original=!0,t},MZ=function(t){let e;const i=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=yt.BigInt(t.offset)+yt.BigInt(t.length)-yt.BigInt(1):e=t.offset+t.length-1,"bytes="+i+"-"+e},eS=function(t){const e={};return t.byterange&&(e.Range=MZ(t.byterange)),e},OZ=function(t,e){return t.start(e)+"-"+t.end(e)},LZ=function(t,e){const i=t.toString(16);return"00".substring(0,2-i.length)+i+(e%2?" ":"")},DZ=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},YR=function(t){const e={};return Object.keys(t).forEach(i=>{const n=t[i];O4(n)?e[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:e[i]=n}),e},mb=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},XR=function(t){return t.resolvedUri},KR=t=>{const e=Array.prototype.slice.call(t),i=16;let n="",r,a;for(let c=0;c<e.length/i;c++)r=e.slice(c*i,c*i+i).map(LZ).join(""),a=e.slice(c*i,c*i+i).map(DZ).join(""),n+=r+" "+a+`
`;return n},RZ=({bytes:t})=>KR(t),BZ=t=>{let e="",i;for(i=0;i<t.length;i++)e+=OZ(t,i)+" ";return e};var FZ=Object.freeze({__proto__:null,createTransferableMessage:YR,initSegmentId:mb,segmentKeyId:XR,hexDump:KR,tagDump:RZ,textRanges:BZ});const QR=.25,$Z=(t,e)=>{if(!e.dateTimeObject)return null;const i=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+i,a=t-r;return new Date(e.dateTimeObject.getTime()+a*1e3)},NZ=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,zZ=(t,e)=>{let i;try{i=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let n=e.segments[0];if(i<n.dateTimeObject)return null;for(let p=0;p<e.segments.length-1;p++){n=e.segments[p];const _=e.segments[p+1].dateTimeObject;if(i<_)break}const r=e.segments[e.segments.length-1],a=r.dateTimeObject,c=r.videoTimingInfo?NZ(r.videoTimingInfo):r.duration+r.duration*QR,s=new Date(a.getTime()+c*1e3);return i>s?null:(i>a&&(n=r),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:_u.duration(e,e.mediaSequence+e.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},VZ=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let i=0,n;for(let a=0;a<e.segments.length&&(n=e.segments[a],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,!(t<=i));a++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+r.duration*QR)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},UZ=(t,e)=>{let i,n;try{i=new Date(t),n=new Date(e)}catch{}const r=i.getTime();return(n.getTime()-r)/1e3},jZ=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},HZ=({playlist:t,time:e=void 0,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return i({message:"getProgramTime: playlist and time must be provided"});const n=VZ(e,t);if(!n)return i({message:"valid programTime was not found"});if(n.type==="estimate")return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const r={mediaSeconds:e},a=$Z(e,n.segment);return a&&(r.programDateTime=a.toISOString()),i(null,r)},JR=({programTime:t,playlist:e,retryCount:i=2,seekTo:n,pauseAfterSeek:r=!0,tech:a,callback:c})=>{if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!n)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!a.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!jZ(e))return c({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const s=zZ(t,e);if(!s)return c({message:`${t} was not found in the stream`});const p=s.segment,_=UZ(p.dateTimeObject,t);if(s.type==="estimate"){if(i===0)return c({message:`${t} is not buffered yet. Try again`});n(s.estimatedStart+_),a.one("seeked",()=>{JR({programTime:t,playlist:e,retryCount:i-1,seekTo:n,pauseAfterSeek:r,tech:a,callback:c})});return}const b=p.start+_,S=()=>c(null,a.currentTime());a.one("seeked",S),r&&a.pause(),n(b)},BT=(t,e)=>{if(t.readyState===4)return e()},GZ=(t,e,i)=>{let n=[],r,a=!1;const c=function(b,S,E,I){return S.abort(),a=!0,i(b,S,E,I)},s=function(b,S){if(a)return;if(b)return c(b,S,"",n);const E=S.responseText.substring(n&&n.byteLength||0,S.responseText.length);if(n=eG(n,L4(E,!0)),r=r||pv(n),n.length<10||r&&n.length<r+2)return BT(S,()=>c(b,S,"",n));const I=UC(n);return I==="ts"&&n.length<188?BT(S,()=>c(b,S,"",n)):!I&&n.length<376?BT(S,()=>c(b,S,"",n)):c(null,S,I,n)},_=e({uri:t,beforeSend(b){b.overrideMimeType("text/plain; charset=x-user-defined"),b.addEventListener("progress",function({total:S,loaded:E}){return J2(b,null,{statusCode:b.status},s)})}},function(b,S){return J2(_,b,S,s)});return _},{EventTarget:WZ}=ei,EM=function(t,e){if(!qR(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let i=0;i<t.segments.length;i++){const n=t.segments[i],r=e.segments[i];if(n.uri!==r.uri)return!1;if(!n.byterange&&!r.byterange)continue;const a=n.byterange,c=r.byterange;if(a&&!c||!a&&c||a.offset!==c.offset||a.length!==c.length)return!1}return!0},qZ=({mainXml:t,srcUrl:e,clientOffset:i,sidxMapping:n,previousManifest:r})=>{const a=wW(t,{manifestUri:e,clientOffset:i,sidxMapping:n,previousManifest:r});return HR(a,e),a},ZZ=(t,e,i)=>{let n=!0,r=hs(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let a=0;a<e.playlists.length;a++){const c=e.playlists[a];if(c.sidx){const p=rx(c.sidx);i&&i[p]&&i[p].sidx&&NC(c,i[p].sidx,c.sidx.resolvedUri)}const s=K2(r,c,EM);s&&(r=s,n=!1)}return Ey(e,(a,c,s,p)=>{if(a.playlists&&a.playlists.length){const _=a.playlists[0].id,b=K2(r,a.playlists[0],EM);b&&(r=b,r.mediaGroups[c][s][p].playlists[0]=r.playlists[_],n=!1)}}),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(n=!1),n?null:r},YZ=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,IM=(t,e)=>{const i={};for(const n in t){const a=t[n].sidx;if(a){const c=rx(a);if(!e[c])break;const s=e[c].sidxInfo;YZ(s,a)&&(i[c]=e[c])}}return i},XZ=(t,e)=>{let n=IM(t.playlists,e);return Ey(t,(r,a,c,s)=>{if(r.playlists&&r.playlists.length){const p=r.playlists;n=hs(n,IM(p,e))}}),n};class tS extends WZ{constructor(e,i,n={},r){super(),this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:a=!1}=n;if(this.vhs_=i,this.withCredentials=a,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=ld("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,i,n){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2},n&&(this.state=n),this.trigger("error"),!0}addSidxSegments_(e,i,n){const r=e.sidx&&rx(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){this.mediaRequest_=yt.setTimeout(()=>n(!1),0);return}const a=pb(e.sidx.resolvedUri),c=(s,p)=>{if(this.requestErrored_(s,p,i))return;const _=this.mainPlaylistLoader_.sidxMapping_;let b;try{b=EW(Tn(p.response).subarray(8))}catch(S){this.requestErrored_(S,p,i);return}return _[r]={sidxInfo:e.sidx,sidx:b},NC(e,b,e.sidx.resolvedUri),n(!0)};this.request=GZ(a,this.vhs_.xhr,(s,p,_,b)=>{if(s)return c(s,p);if(!_||_!=="mp4")return c({status:p.status,message:`Unsupported ${_||"unknown"} container type for sidx segment at URL: ${a}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},p);const{offset:S,length:E}=e.sidx.byterange;if(b.length>=E+S)return c(s,{response:b.subarray(S,S+E),status:p.status,uri:p.uri});this.request=this.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:eS({byterange:e.sidx.byterange})},c)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},yt.clearTimeout(this.minimumUpdatePeriodTimeout_),yt.clearTimeout(this.mediaRequest_),yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,r=>{this.haveMetadata({startingState:i,playlist:e})}))}haveMetadata({startingState:e,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(yt.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){yt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(e){const n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=yt.setTimeout(()=>this.load(),n);return}if(!this.started){this.start();return}i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=yt.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(i,n)=>{if(this.requestErrored_(i,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}const r=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=pb(this.mainPlaylistLoader_.srcUrl,n),r){this.handleMain_(),this.syncClientServerClock_(()=>e(n,r));return}return e(n,r)})}syncClientServerClock_(e){const i=TW(this.mainPlaylistLoader_.mainXml_);if(i===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(i.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Xc(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(n,r)=>{if(!this.request)return;if(n)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let a;i.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?a=this.mainLoaded_:a=Date.parse(r.responseHeaders.date):a=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let i=qZ({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(i=ZZ(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(yt.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let i=e.main&&e.main.minimumUpdatePeriod;if(i===0&&(e.media()?i=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof i!="number"||i<=0){i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`);return}this.createMUPTimeout_(i)}createMUPTimeout_(e){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=yt.setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=XZ(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,n=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==i[e];if(n?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=yt.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},Q2(this.media(),!!n)))};r()}this.trigger("loadedplaylist")}}var pa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const KZ=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e.buffer},eB=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},QZ=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},tB=function(t){return function(){const e=QZ(t),i=eB(new Worker(e));i.objURL=e;const n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(e),n.call(this)},i}},iB=function(t){return`var browserWorkerPolyFill = ${eB.toString()};
browserWorkerPolyFill(self);
`+t},nB=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},JZ=iB(nB(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var F={};this.on=function(K,te){F[K]||(F[K]=[]),F[K]=F[K].concat(te)},this.off=function(K,te){var ee;return F[K]?(ee=F[K].indexOf(te),F[K]=F[K].slice(),F[K].splice(ee,1),ee>-1):!1},this.trigger=function(K){var te,ee,h,v;if(te=F[K],!!te)if(arguments.length===2)for(h=te.length,ee=0;ee<h;++ee)te[ee].call(this,arguments[1]);else{for(v=[],ee=arguments.length,ee=1;ee<arguments.length;++ee)v.push(arguments[ee]);for(h=te.length,ee=0;ee<h;++ee)te[ee].apply(this,v)}},this.dispose=function(){F={}}}};e.prototype.pipe=function(F){return this.on("data",function(K){F.push(K)}),this.on("done",function(K){F.flush(K)}),this.on("partialdone",function(K){F.partialFlush(K)}),this.on("endedtimeline",function(K){F.endTimeline(K)}),this.on("reset",function(K){F.reset(K)}),F},e.prototype.push=function(F){this.trigger("data",F)},e.prototype.flush=function(F){this.trigger("done",F)},e.prototype.partialFlush=function(F){this.trigger("partialdone",F)},e.prototype.endTimeline=function(F){this.trigger("endedtimeline",F)},e.prototype.reset=function(F){this.trigger("reset",F)};var i=e,n=Math.pow(2,32),r=function(F){var K=new DataView(F.buffer,F.byteOffset,F.byteLength),te;return K.getBigUint64?(te=K.getBigUint64(0),te<Number.MAX_SAFE_INTEGER?Number(te):te):K.getUint32(0)*n+K.getUint32(4)},a={getUint64:r,MAX_UINT32:n},c=a.MAX_UINT32,s,p,_,b,S,E,I,R,V,q,U,H,Z,ne,ie,oe,pe,de,fe,ge,we,Ie,Oe,ke,Ee,Qe,gt,nt,ft,Tt,pt,et,Mt,Qt,Fe,tt;(function(){var F;if(Oe={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(F in Oe)Oe.hasOwnProperty(F)&&(Oe[F]=[F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2),F.charCodeAt(3)]);ke=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Qe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ee=new Uint8Array([0,0,0,1]),gt=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),nt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ft={video:gt,audio:nt},et=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),pt=new Uint8Array([0,0,0,0,0,0,0,0]),Mt=new Uint8Array([0,0,0,0,0,0,0,0]),Qt=Mt,Fe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),tt=Mt,Tt=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(F){var K=[],te=0,ee,h,v;for(ee=1;ee<arguments.length;ee++)K.push(arguments[ee]);for(ee=K.length;ee--;)te+=K[ee].byteLength;for(h=new Uint8Array(te+8),v=new DataView(h.buffer,h.byteOffset,h.byteLength),v.setUint32(0,h.byteLength),h.set(F,4),ee=0,te=8;ee<K.length;ee++)h.set(K[ee],te),te+=K[ee].byteLength;return h},p=function(){return s(Oe.dinf,s(Oe.dref,et))},_=function(F){return s(Oe.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,F.audioobjecttype<<3|F.samplingfrequencyindex>>>1,F.samplingfrequencyindex<<7|F.channelcount<<3,6,1,2]))},b=function(){return s(Oe.ftyp,ke,Ee,ke,Qe)},oe=function(F){return s(Oe.hdlr,ft[F])},S=function(F){return s(Oe.mdat,F)},ie=function(F){var K=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,F.duration>>>24&255,F.duration>>>16&255,F.duration>>>8&255,F.duration&255,85,196,0,0]);return F.samplerate&&(K[12]=F.samplerate>>>24&255,K[13]=F.samplerate>>>16&255,K[14]=F.samplerate>>>8&255,K[15]=F.samplerate&255),s(Oe.mdhd,K)},ne=function(F){return s(Oe.mdia,ie(F),oe(F.type),I(F))},E=function(F){return s(Oe.mfhd,new Uint8Array([0,0,0,0,(F&4278190080)>>24,(F&16711680)>>16,(F&65280)>>8,F&255]))},I=function(F){return s(Oe.minf,F.type==="video"?s(Oe.vmhd,Tt):s(Oe.smhd,pt),p(),de(F))},R=function(F,K){for(var te=[],ee=K.length;ee--;)te[ee]=ge(K[ee]);return s.apply(null,[Oe.moof,E(F)].concat(te))},V=function(F){for(var K=F.length,te=[];K--;)te[K]=H(F[K]);return s.apply(null,[Oe.moov,U(4294967295)].concat(te).concat(q(F)))},q=function(F){for(var K=F.length,te=[];K--;)te[K]=we(F[K]);return s.apply(null,[Oe.mvex].concat(te))},U=function(F){var K=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(F&4278190080)>>24,(F&16711680)>>16,(F&65280)>>8,F&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(Oe.mvhd,K)},pe=function(F){var K=F.samples||[],te=new Uint8Array(4+K.length),ee,h;for(h=0;h<K.length;h++)ee=K[h].flags,te[h+4]=ee.dependsOn<<4|ee.isDependedOn<<2|ee.hasRedundancy;return s(Oe.sdtp,te)},de=function(F){return s(Oe.stbl,fe(F),s(Oe.stts,tt),s(Oe.stsc,Qt),s(Oe.stsz,Fe),s(Oe.stco,Mt))},function(){var F,K;fe=function(te){return s(Oe.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),te.type==="video"?F(te):K(te))},F=function(te){var ee=te.sps||[],h=te.pps||[],v=[],P=[],z,X;for(z=0;z<ee.length;z++)v.push((ee[z].byteLength&65280)>>>8),v.push(ee[z].byteLength&255),v=v.concat(Array.prototype.slice.call(ee[z]));for(z=0;z<h.length;z++)P.push((h[z].byteLength&65280)>>>8),P.push(h[z].byteLength&255),P=P.concat(Array.prototype.slice.call(h[z]));if(X=[Oe.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(te.width&65280)>>8,te.width&255,(te.height&65280)>>8,te.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(Oe.avcC,new Uint8Array([1,te.profileIdc,te.profileCompatibility,te.levelIdc,255].concat([ee.length],v,[h.length],P))),s(Oe.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],te.sarRatio){var ce=te.sarRatio[0],Se=te.sarRatio[1];X.push(s(Oe.pasp,new Uint8Array([(ce&4278190080)>>24,(ce&16711680)>>16,(ce&65280)>>8,ce&255,(Se&4278190080)>>24,(Se&16711680)>>16,(Se&65280)>>8,Se&255])))}return s.apply(null,X)},K=function(te){return s(Oe.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(te.channelcount&65280)>>8,te.channelcount&255,(te.samplesize&65280)>>8,te.samplesize&255,0,0,0,0,(te.samplerate&65280)>>8,te.samplerate&255,0,0]),_(te))}}(),Z=function(F){var K=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,0,(F.duration&4278190080)>>24,(F.duration&16711680)>>16,(F.duration&65280)>>8,F.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(F.width&65280)>>8,F.width&255,0,0,(F.height&65280)>>8,F.height&255,0,0]);return s(Oe.tkhd,K)},ge=function(F){var K,te,ee,h,v,P,z;return K=s(Oe.tfhd,new Uint8Array([0,0,0,58,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),P=Math.floor(F.baseMediaDecodeTime/c),z=Math.floor(F.baseMediaDecodeTime%c),te=s(Oe.tfdt,new Uint8Array([1,0,0,0,P>>>24&255,P>>>16&255,P>>>8&255,P&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255])),v=32+20+8+16+8+8,F.type==="audio"?(ee=Ie(F,v),s(Oe.traf,K,te,ee)):(h=pe(F),ee=Ie(F,h.length+v),s(Oe.traf,K,te,ee,h))},H=function(F){return F.duration=F.duration||4294967295,s(Oe.trak,Z(F),ne(F))},we=function(F){var K=new Uint8Array([0,0,0,0,(F.id&4278190080)>>24,(F.id&16711680)>>16,(F.id&65280)>>8,F.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return F.type!=="video"&&(K[K.length-1]=0),s(Oe.trex,K)},function(){var F,K,te;te=function(ee,h){var v=0,P=0,z=0,X=0;return ee.length&&(ee[0].duration!==void 0&&(v=1),ee[0].size!==void 0&&(P=2),ee[0].flags!==void 0&&(z=4),ee[0].compositionTimeOffset!==void 0&&(X=8)),[0,0,v|P|z|X,1,(ee.length&4278190080)>>>24,(ee.length&16711680)>>>16,(ee.length&65280)>>>8,ee.length&255,(h&4278190080)>>>24,(h&16711680)>>>16,(h&65280)>>>8,h&255]},K=function(ee,h){var v,P,z,X,ce,Se;for(X=ee.samples||[],h+=8+12+16*X.length,z=te(X,h),P=new Uint8Array(z.length+X.length*16),P.set(z),v=z.length,Se=0;Se<X.length;Se++)ce=X[Se],P[v++]=(ce.duration&4278190080)>>>24,P[v++]=(ce.duration&16711680)>>>16,P[v++]=(ce.duration&65280)>>>8,P[v++]=ce.duration&255,P[v++]=(ce.size&4278190080)>>>24,P[v++]=(ce.size&16711680)>>>16,P[v++]=(ce.size&65280)>>>8,P[v++]=ce.size&255,P[v++]=ce.flags.isLeading<<2|ce.flags.dependsOn,P[v++]=ce.flags.isDependedOn<<6|ce.flags.hasRedundancy<<4|ce.flags.paddingValue<<1|ce.flags.isNonSyncSample,P[v++]=ce.flags.degradationPriority&240<<8,P[v++]=ce.flags.degradationPriority&15,P[v++]=(ce.compositionTimeOffset&4278190080)>>>24,P[v++]=(ce.compositionTimeOffset&16711680)>>>16,P[v++]=(ce.compositionTimeOffset&65280)>>>8,P[v++]=ce.compositionTimeOffset&255;return s(Oe.trun,P)},F=function(ee,h){var v,P,z,X,ce,Se;for(X=ee.samples||[],h+=8+12+8*X.length,z=te(X,h),v=new Uint8Array(z.length+X.length*8),v.set(z),P=z.length,Se=0;Se<X.length;Se++)ce=X[Se],v[P++]=(ce.duration&4278190080)>>>24,v[P++]=(ce.duration&16711680)>>>16,v[P++]=(ce.duration&65280)>>>8,v[P++]=ce.duration&255,v[P++]=(ce.size&4278190080)>>>24,v[P++]=(ce.size&16711680)>>>16,v[P++]=(ce.size&65280)>>>8,v[P++]=ce.size&255;return s(Oe.trun,v)},Ie=function(ee,h){return ee.type==="audio"?F(ee,h):K(ee,h)}}();var Rt={ftyp:b,mdat:S,moof:R,moov:V,initSegment:function(F){var K=b(),te=V(F),ee;return ee=new Uint8Array(K.byteLength+te.byteLength),ee.set(K),ee.set(te,K.byteLength),ee}},Xt=function(F){var K,te,ee=[],h=[];for(h.byteLength=0,h.nalCount=0,h.duration=0,ee.byteLength=0,K=0;K<F.length;K++)te=F[K],te.nalUnitType==="access_unit_delimiter_rbsp"?(ee.length&&(ee.duration=te.dts-ee.dts,h.byteLength+=ee.byteLength,h.nalCount+=ee.length,h.duration+=ee.duration,h.push(ee)),ee=[te],ee.byteLength=te.data.byteLength,ee.pts=te.pts,ee.dts=te.dts):(te.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(ee.keyFrame=!0),ee.duration=te.dts-ee.dts,ee.byteLength+=te.data.byteLength,ee.push(te));return h.length&&(!ee.duration||ee.duration<=0)&&(ee.duration=h[h.length-1].duration),h.byteLength+=ee.byteLength,h.nalCount+=ee.length,h.duration+=ee.duration,h.push(ee),h},Ei=function(F){var K,te,ee=[],h=[];for(ee.byteLength=0,ee.nalCount=0,ee.duration=0,ee.pts=F[0].pts,ee.dts=F[0].dts,h.byteLength=0,h.nalCount=0,h.duration=0,h.pts=F[0].pts,h.dts=F[0].dts,K=0;K<F.length;K++)te=F[K],te.keyFrame?(ee.length&&(h.push(ee),h.byteLength+=ee.byteLength,h.nalCount+=ee.nalCount,h.duration+=ee.duration),ee=[te],ee.nalCount=te.length,ee.byteLength=te.byteLength,ee.pts=te.pts,ee.dts=te.dts,ee.duration=te.duration):(ee.duration+=te.duration,ee.nalCount+=te.length,ee.byteLength+=te.byteLength,ee.push(te));return h.length&&ee.duration<=0&&(ee.duration=h[h.length-1].duration),h.byteLength+=ee.byteLength,h.nalCount+=ee.nalCount,h.duration+=ee.duration,h.push(ee),h},Ni=function(F){var K;return!F[0][0].keyFrame&&F.length>1&&(K=F.shift(),F.byteLength-=K.byteLength,F.nalCount-=K.nalCount,F[0][0].dts=K.dts,F[0][0].pts=K.pts,F[0][0].duration+=K.duration),F},Vi=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ve=function(F,K){var te=Vi();return te.dataOffset=K,te.compositionTimeOffset=F.pts-F.dts,te.duration=F.duration,te.size=4*F.length,te.size+=F.byteLength,F.keyFrame&&(te.flags.dependsOn=2,te.flags.isNonSyncSample=0),te},dt=function(F,K){var te,ee,h,v,P,z=K||0,X=[];for(te=0;te<F.length;te++)for(v=F[te],ee=0;ee<v.length;ee++)P=v[ee],h=Ve(P,z),z+=h.size,X.push(h);return X},kt=function(F){var K,te,ee,h,v,P,z=0,X=F.byteLength,ce=F.nalCount,Se=X+4*ce,je=new Uint8Array(Se),bt=new DataView(je.buffer);for(K=0;K<F.length;K++)for(h=F[K],te=0;te<h.length;te++)for(v=h[te],ee=0;ee<v.length;ee++)P=v[ee],bt.setUint32(z,P.data.byteLength),z+=4,je.set(P.data,z),z+=P.data.byteLength;return je},Xe=function(F,K){var te,ee=K||0,h=[];return te=Ve(F,ee),h.push(te),h},it=function(F){var K,te,ee=0,h=F.byteLength,v=F.length,P=h+4*v,z=new Uint8Array(P),X=new DataView(z.buffer);for(K=0;K<F.length;K++)te=F[K],X.setUint32(ee,te.data.byteLength),ee+=4,z.set(te.data,ee),ee+=te.data.byteLength;return z},ct={groupNalsIntoFrames:Xt,groupFramesIntoGops:Ei,extendFirstKeyFrame:Ni,generateSampleTable:dt,concatenateNalData:kt,generateSampleTableForFrame:Xe,concatenateNalDataForFrame:it},At=[33,16,5,32,164,27],Gt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Bt=function(F){for(var K=[];F--;)K.push(0);return K},Yt=function(F){return Object.keys(F).reduce(function(K,te){return K[te]=new Uint8Array(F[te].reduce(function(ee,h){return ee.concat(h)},[])),K},{})},gi,_i=function(){if(!gi){var F={96e3:[At,[227,64],Bt(154),[56]],88200:[At,[231],Bt(170),[56]],64e3:[At,[248,192],Bt(240),[56]],48e3:[At,[255,192],Bt(268),[55,148,128],Bt(54),[112]],44100:[At,[255,192],Bt(268),[55,163,128],Bt(84),[112]],32e3:[At,[255,192],Bt(268),[55,234],Bt(226),[112]],24e3:[At,[255,192],Bt(268),[55,255,128],Bt(268),[111,112],Bt(126),[224]],16e3:[At,[255,192],Bt(268),[55,255,128],Bt(268),[111,255],Bt(269),[223,108],Bt(195),[1,192]],12e3:[Gt,Bt(268),[3,127,248],Bt(268),[6,255,240],Bt(268),[13,255,224],Bt(268),[27,253,128],Bt(259),[56]],11025:[Gt,Bt(268),[3,127,248],Bt(268),[6,255,240],Bt(268),[13,255,224],Bt(268),[27,255,192],Bt(268),[55,175,128],Bt(108),[112]],8e3:[Gt,Bt(268),[3,121,16],Bt(47),[7]]};gi=Yt(F)}return gi},zi=9e4,Hi,Zi,Ci,ci,Si,sn,vn;Hi=function(F){return F*zi},Zi=function(F,K){return F*K},Ci=function(F){return F/zi},ci=function(F,K){return F/K},Si=function(F,K){return Hi(ci(F,K))},sn=function(F,K){return Zi(Ci(F),K)},vn=function(F,K,te){return Ci(te?F:F-K)};var hn={ONE_SECOND_IN_TS:zi,secondsToVideoTs:Hi,secondsToAudioTs:Zi,videoTsToSeconds:Ci,audioTsToSeconds:ci,audioTsToVideoTs:Si,videoTsToAudioTs:sn,metadataTsToSeconds:vn},Nn=_i,yr=hn,Mr=function(F){var K,te,ee=0;for(K=0;K<F.length;K++)te=F[K],ee+=te.data.byteLength;return ee},Yr=function(F,K,te,ee){var h,v=0,P=0,z=0,X=0,ce,Se,je;if(K.length&&(h=yr.audioTsToVideoTs(F.baseMediaDecodeTime,F.samplerate),v=Math.ceil(yr.ONE_SECOND_IN_TS/(F.samplerate/1024)),te&&ee&&(P=h-Math.max(te,ee),z=Math.floor(P/v),X=z*v),!(z<1||X>yr.ONE_SECOND_IN_TS/2))){for(ce=Nn()[F.samplerate],ce||(ce=K[0].data),Se=0;Se<z;Se++)je=K[0],K.splice(0,0,{data:ce,dts:je.dts-v,pts:je.pts-v});return F.baseMediaDecodeTime-=Math.floor(yr.videoTsToAudioTs(X,F.samplerate)),X}},fr=function(F,K,te){return K.minSegmentDts>=te?F:(K.minSegmentDts=1/0,F.filter(function(ee){return ee.dts>=te?(K.minSegmentDts=Math.min(K.minSegmentDts,ee.dts),K.minSegmentPts=K.minSegmentDts,!0):!1}))},Ko=function(F){var K,te,ee=[];for(K=0;K<F.length;K++)te=F[K],ee.push({size:te.data.byteLength,duration:1024});return ee},An=function(F){var K,te,ee=0,h=new Uint8Array(Mr(F));for(K=0;K<F.length;K++)te=F[K],h.set(te.data,ee),ee+=te.data.byteLength;return h},Is={prefixWithSilence:Yr,trimAdtsFramesByEarliestDts:fr,generateSampleTable:Ko,concatenateFrameData:An},Xr=hn.ONE_SECOND_IN_TS,Fo=function(F,K){typeof K.pts=="number"&&(F.timelineStartInfo.pts===void 0&&(F.timelineStartInfo.pts=K.pts),F.minSegmentPts===void 0?F.minSegmentPts=K.pts:F.minSegmentPts=Math.min(F.minSegmentPts,K.pts),F.maxSegmentPts===void 0?F.maxSegmentPts=K.pts:F.maxSegmentPts=Math.max(F.maxSegmentPts,K.pts)),typeof K.dts=="number"&&(F.timelineStartInfo.dts===void 0&&(F.timelineStartInfo.dts=K.dts),F.minSegmentDts===void 0?F.minSegmentDts=K.dts:F.minSegmentDts=Math.min(F.minSegmentDts,K.dts),F.maxSegmentDts===void 0?F.maxSegmentDts=K.dts:F.maxSegmentDts=Math.max(F.maxSegmentDts,K.dts))},za=function(F){delete F.minSegmentDts,delete F.maxSegmentDts,delete F.minSegmentPts,delete F.maxSegmentPts},Hl=function(F,K){var te,ee,h=F.minSegmentDts;return K||(h-=F.timelineStartInfo.dts),te=F.timelineStartInfo.baseMediaDecodeTime,te+=h,te=Math.max(0,te),F.type==="audio"&&(ee=F.samplerate/Xr,te*=ee,te=Math.floor(te)),te},va={clearDtsInfo:za,calculateTrackBaseMediaDecodeTime:Hl,collectDtsInfo:Fo},ps=4,Fr=128,ms=function(F){for(var K=0,te={payloadType:-1,payloadSize:0},ee=0,h=0;K<F.byteLength&&F[K]!==Fr;){for(;F[K]===255;)ee+=255,K++;for(ee+=F[K++];F[K]===255;)h+=255,K++;if(h+=F[K++],!te.payload&&ee===ps){var v=String.fromCharCode(F[K+3],F[K+4],F[K+5],F[K+6]);if(v==="GA94"){te.payloadType=ee,te.payloadSize=h,te.payload=F.subarray(K,K+h);break}else te.payload=void 0}K+=h,ee=0,h=0}return te},Io=function(F){return F.payload[0]!==181||(F.payload[1]<<8|F.payload[2])!==49||String.fromCharCode(F.payload[3],F.payload[4],F.payload[5],F.payload[6])!=="GA94"||F.payload[7]!==3?null:F.payload.subarray(8,F.payload.length-1)},gs=function(F,K){var te=[],ee,h,v,P;if(!(K[0]&64))return te;for(h=K[0]&31,ee=0;ee<h;ee++)v=ee*3,P={type:K[v+2]&3,pts:F},K[v+2]&4&&(P.ccData=K[v+3]<<8|K[v+4],te.push(P));return te},Ge=function(F){for(var K=F.byteLength,te=[],ee=1,h,v;ee<K-2;)F[ee]===0&&F[ee+1]===0&&F[ee+2]===3?(te.push(ee+2),ee+=2):ee++;if(te.length===0)return F;h=K-te.length,v=new Uint8Array(h);var P=0;for(ee=0;ee<h;P++,ee++)P===te[0]&&(P++,te.shift()),v[ee]=F[P];return v},_e={parseSei:ms,parseUserData:Io,parseCaptionPackets:gs,discardEmulationPreventionBytes:Ge,USER_DATA_REGISTERED_ITU_T_T35:ps},Te=i,ze=_e,De=function(F){F=F||{},De.prototype.init.call(this),this.parse708captions_=typeof F.parse708captions=="boolean"?F.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Bi(0,0),new Bi(0,1),new Bi(1,0),new Bi(1,1)],this.parse708captions_&&(this.cc708Stream_=new jt({captionServices:F.captionServices})),this.reset(),this.ccStreams_.forEach(function(K){K.on("data",this.trigger.bind(this,"data")),K.on("partialdone",this.trigger.bind(this,"partialdone")),K.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};De.prototype=new Te,De.prototype.push=function(F){var K,te,ee;if(F.nalUnitType==="sei_rbsp"&&(K=ze.parseSei(F.escapedRBSP),!!K.payload&&K.payloadType===ze.USER_DATA_REGISTERED_ITU_T_T35&&(te=ze.parseUserData(K),!!te))){if(F.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(F.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}ee=ze.parseCaptionPackets(F.pts,te),this.captionPackets_=this.captionPackets_.concat(ee),this.latestDts_!==F.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=F.dts}},De.prototype.flushCCStreams=function(F){this.ccStreams_.forEach(function(K){return F==="flush"?K.flush():K.partialFlush()},this)},De.prototype.flushStream=function(F){if(!this.captionPackets_.length){this.flushCCStreams(F);return}this.captionPackets_.forEach(function(K,te){K.presortIndex=te}),this.captionPackets_.sort(function(K,te){return K.pts===te.pts?K.presortIndex-te.presortIndex:K.pts-te.pts}),this.captionPackets_.forEach(function(K){K.type<2?this.dispatchCea608Packet(K):this.dispatchCea708Packet(K)},this),this.captionPackets_.length=0,this.flushCCStreams(F)},De.prototype.flush=function(){return this.flushStream("flush")},De.prototype.partialFlush=function(){return this.flushStream("partialFlush")},De.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(F){F.reset()})},De.prototype.dispatchCea608Packet=function(F){this.setsTextOrXDSActive(F)?this.activeCea608Channel_[F.type]=null:this.setsChannel1Active(F)?this.activeCea608Channel_[F.type]=0:this.setsChannel2Active(F)&&(this.activeCea608Channel_[F.type]=1),this.activeCea608Channel_[F.type]!==null&&this.ccStreams_[(F.type<<1)+this.activeCea608Channel_[F.type]].push(F)},De.prototype.setsChannel1Active=function(F){return(F.ccData&30720)===4096},De.prototype.setsChannel2Active=function(F){return(F.ccData&30720)===6144},De.prototype.setsTextOrXDSActive=function(F){return(F.ccData&28928)===256||(F.ccData&30974)===4138||(F.ccData&30974)===6186},De.prototype.dispatchCea708Packet=function(F){this.parse708captions_&&this.cc708Stream_.push(F)};var _t={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ct=function(F){var K=_t[F]||F;return F&4096&&F===K?"":String.fromCharCode(K)},St=function(F){return 32<=F&&F<=127||160<=F&&F<=255},vt=function(F){this.windowNum=F,this.reset()};vt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},vt.prototype.getText=function(){return this.rows.join(`
`)},vt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},vt.prototype.newLine=function(F){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(F),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},vt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},vt.prototype.addText=function(F){this.rows[this.rowIdx]+=F},vt.prototype.backspace=function(){if(!this.isEmpty()){var F=this.rows[this.rowIdx];this.rows[this.rowIdx]=F.substr(0,F.length-1)}};var Pt=function(F,K,te){this.serviceNum=F,this.text="",this.currentWindow=new vt(-1),this.windows=[],this.stream=te,typeof K=="string"&&this.createTextDecoder(K)};Pt.prototype.init=function(F,K){this.startPts=F;for(var te=0;te<8;te++)this.windows[te]=new vt(te),typeof K=="function"&&(this.windows[te].beforeRowOverflow=K)},Pt.prototype.setCurrentWindow=function(F){this.currentWindow=this.windows[F]},Pt.prototype.createTextDecoder=function(F){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(F)}catch(K){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+F+" encoding. "+K})}};var jt=function(F){F=F||{},jt.prototype.init.call(this);var K=this,te=F.captionServices||{},ee={},h;Object.keys(te).forEach(v=>{h=te[v],/^SERVICE/.test(v)&&(ee[v]=h.encoding)}),this.serviceEncodings=ee,this.current708Packet=null,this.services={},this.push=function(v){v.type===3?(K.new708Packet(),K.add708Bytes(v)):(K.current708Packet===null&&K.new708Packet(),K.add708Bytes(v))}};jt.prototype=new Te,jt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},jt.prototype.add708Bytes=function(F){var K=F.ccData,te=K>>>8,ee=K&255;this.current708Packet.ptsVals.push(F.pts),this.current708Packet.data.push(te),this.current708Packet.data.push(ee)},jt.prototype.push708Packet=function(){var F=this.current708Packet,K=F.data,te=null,ee=null,h=0,v=K[h++];for(F.seq=v>>6,F.sizeCode=v&63;h<K.length;h++)v=K[h++],te=v>>5,ee=v&31,te===7&&ee>0&&(v=K[h++],te=v),this.pushServiceBlock(te,h,ee),ee>0&&(h+=ee-1)},jt.prototype.pushServiceBlock=function(F,K,te){var ee,h=K,v=this.current708Packet.data,P=this.services[F];for(P||(P=this.initService(F,h));h<K+te&&h<v.length;h++)ee=v[h],St(ee)?h=this.handleText(h,P):ee===24?h=this.multiByteCharacter(h,P):ee===16?h=this.extendedCommands(h,P):128<=ee&&ee<=135?h=this.setCurrentWindow(h,P):152<=ee&&ee<=159?h=this.defineWindow(h,P):ee===136?h=this.clearWindows(h,P):ee===140?h=this.deleteWindows(h,P):ee===137?h=this.displayWindows(h,P):ee===138?h=this.hideWindows(h,P):ee===139?h=this.toggleWindows(h,P):ee===151?h=this.setWindowAttributes(h,P):ee===144?h=this.setPenAttributes(h,P):ee===145?h=this.setPenColor(h,P):ee===146?h=this.setPenLocation(h,P):ee===143?P=this.reset(h,P):ee===8?P.currentWindow.backspace():ee===12?P.currentWindow.clearText():ee===13?P.currentWindow.pendingNewLine=!0:ee===14?P.currentWindow.clearText():ee===141&&h++},jt.prototype.extendedCommands=function(F,K){var te=this.current708Packet.data,ee=te[++F];return St(ee)&&(F=this.handleText(F,K,{isExtended:!0})),F},jt.prototype.getPts=function(F){return this.current708Packet.ptsVals[Math.floor(F/2)]},jt.prototype.initService=function(F,K){var ee="SERVICE"+F,te=this,ee,h;return ee in this.serviceEncodings&&(h=this.serviceEncodings[ee]),this.services[F]=new Pt(F,h,te),this.services[F].init(this.getPts(K),function(v){te.flushDisplayed(v,te.services[F])}),this.services[F]},jt.prototype.handleText=function(F,K,te){var ee=te&&te.isExtended,h=te&&te.isMultiByte,v=this.current708Packet.data,P=ee?4096:0,z=v[F],X=v[F+1],ce=K.currentWindow,Se,je;return K.textDecoder_&&!ee?(h?(je=[z,X],F++):je=[z],Se=K.textDecoder_.decode(new Uint8Array(je))):Se=Ct(P|z),ce.pendingNewLine&&!ce.isEmpty()&&ce.newLine(this.getPts(F)),ce.pendingNewLine=!1,ce.addText(Se),F},jt.prototype.multiByteCharacter=function(F,K){var te=this.current708Packet.data,ee=te[F+1],h=te[F+2];return St(ee)&&St(h)&&(F=this.handleText(++F,K,{isMultiByte:!0})),F},jt.prototype.setCurrentWindow=function(F,K){var te=this.current708Packet.data,ee=te[F],h=ee&7;return K.setCurrentWindow(h),F},jt.prototype.defineWindow=function(F,K){var te=this.current708Packet.data,ee=te[F],h=ee&7;K.setCurrentWindow(h);var v=K.currentWindow;return ee=te[++F],v.visible=(ee&32)>>5,v.rowLock=(ee&16)>>4,v.columnLock=(ee&8)>>3,v.priority=ee&7,ee=te[++F],v.relativePositioning=(ee&128)>>7,v.anchorVertical=ee&127,ee=te[++F],v.anchorHorizontal=ee,ee=te[++F],v.anchorPoint=(ee&240)>>4,v.rowCount=ee&15,ee=te[++F],v.columnCount=ee&63,ee=te[++F],v.windowStyle=(ee&56)>>3,v.penStyle=ee&7,v.virtualRowCount=v.rowCount+1,F},jt.prototype.setWindowAttributes=function(F,K){var te=this.current708Packet.data,ee=te[F],h=K.currentWindow.winAttr;return ee=te[++F],h.fillOpacity=(ee&192)>>6,h.fillRed=(ee&48)>>4,h.fillGreen=(ee&12)>>2,h.fillBlue=ee&3,ee=te[++F],h.borderType=(ee&192)>>6,h.borderRed=(ee&48)>>4,h.borderGreen=(ee&12)>>2,h.borderBlue=ee&3,ee=te[++F],h.borderType+=(ee&128)>>5,h.wordWrap=(ee&64)>>6,h.printDirection=(ee&48)>>4,h.scrollDirection=(ee&12)>>2,h.justify=ee&3,ee=te[++F],h.effectSpeed=(ee&240)>>4,h.effectDirection=(ee&12)>>2,h.displayEffect=ee&3,F},jt.prototype.flushDisplayed=function(F,K){for(var te=[],ee=0;ee<8;ee++)K.windows[ee].visible&&!K.windows[ee].isEmpty()&&te.push(K.windows[ee].getText());K.endPts=F,K.text=te.join(`

`),this.pushCaption(K),K.startPts=F},jt.prototype.pushCaption=function(F){F.text!==""&&(this.trigger("data",{startPts:F.startPts,endPts:F.endPts,text:F.text,stream:"cc708_"+F.serviceNum}),F.text="",F.startPts=F.endPts)},jt.prototype.displayWindows=function(F,K){var te=this.current708Packet.data,ee=te[++F],h=this.getPts(F);this.flushDisplayed(h,K);for(var v=0;v<8;v++)ee&1<<v&&(K.windows[v].visible=1);return F},jt.prototype.hideWindows=function(F,K){var te=this.current708Packet.data,ee=te[++F],h=this.getPts(F);this.flushDisplayed(h,K);for(var v=0;v<8;v++)ee&1<<v&&(K.windows[v].visible=0);return F},jt.prototype.toggleWindows=function(F,K){var te=this.current708Packet.data,ee=te[++F],h=this.getPts(F);this.flushDisplayed(h,K);for(var v=0;v<8;v++)ee&1<<v&&(K.windows[v].visible^=1);return F},jt.prototype.clearWindows=function(F,K){var te=this.current708Packet.data,ee=te[++F],h=this.getPts(F);this.flushDisplayed(h,K);for(var v=0;v<8;v++)ee&1<<v&&K.windows[v].clearText();return F},jt.prototype.deleteWindows=function(F,K){var te=this.current708Packet.data,ee=te[++F],h=this.getPts(F);this.flushDisplayed(h,K);for(var v=0;v<8;v++)ee&1<<v&&K.windows[v].reset();return F},jt.prototype.setPenAttributes=function(F,K){var te=this.current708Packet.data,ee=te[F],h=K.currentWindow.penAttr;return ee=te[++F],h.textTag=(ee&240)>>4,h.offset=(ee&12)>>2,h.penSize=ee&3,ee=te[++F],h.italics=(ee&128)>>7,h.underline=(ee&64)>>6,h.edgeType=(ee&56)>>3,h.fontStyle=ee&7,F},jt.prototype.setPenColor=function(F,K){var te=this.current708Packet.data,ee=te[F],h=K.currentWindow.penColor;return ee=te[++F],h.fgOpacity=(ee&192)>>6,h.fgRed=(ee&48)>>4,h.fgGreen=(ee&12)>>2,h.fgBlue=ee&3,ee=te[++F],h.bgOpacity=(ee&192)>>6,h.bgRed=(ee&48)>>4,h.bgGreen=(ee&12)>>2,h.bgBlue=ee&3,ee=te[++F],h.edgeRed=(ee&48)>>4,h.edgeGreen=(ee&12)>>2,h.edgeBlue=ee&3,F},jt.prototype.setPenLocation=function(F,K){var te=this.current708Packet.data,ee=te[F],h=K.currentWindow.penLoc;return K.currentWindow.pendingNewLine=!0,ee=te[++F],h.row=ee&15,ee=te[++F],h.column=ee&63,F},jt.prototype.reset=function(F,K){var te=this.getPts(F);return this.flushDisplayed(te,K),this.initService(K.serviceNum,F)};var Ii={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ai=function(F){return F===null?"":(F=Ii[F]||F,String.fromCharCode(F))},Ji=14,Qi=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Gi=function(){for(var F=[],K=Ji+1;K--;)F.push("");return F},Bi=function(F,K){Bi.prototype.init.call(this),this.field_=F||0,this.dataChannel_=K||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(te){var ee,h,v,P,z;if(ee=te.ccData&32639,ee===this.lastControlCode_){this.lastControlCode_=null;return}if((ee&61440)===4096?this.lastControlCode_=ee:ee!==this.PADDING_&&(this.lastControlCode_=null),v=ee>>>8,P=ee&255,ee!==this.PADDING_)if(ee===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(ee===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(te.pts),this.flushDisplayed(te.pts),h=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=h,this.startPts_=te.pts;else if(ee===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(te.pts);else if(ee===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(te.pts);else if(ee===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(te.pts);else if(ee===this.CARRIAGE_RETURN_)this.clearFormatting(te.pts),this.flushDisplayed(te.pts),this.shiftRowsUp_(),this.startPts_=te.pts;else if(ee===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(ee===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(te.pts),this.displayed_=Gi();else if(ee===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Gi();else if(ee===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(te.pts),this.displayed_=Gi()),this.mode_="paintOn",this.startPts_=te.pts;else if(this.isSpecialCharacter(v,P))v=(v&3)<<8,z=ai(v|P),this[this.mode_](te.pts,z),this.column_++;else if(this.isExtCharacter(v,P))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),v=(v&3)<<8,z=ai(v|P),this[this.mode_](te.pts,z),this.column_++;else if(this.isMidRowCode(v,P))this.clearFormatting(te.pts),this[this.mode_](te.pts," "),this.column_++,(P&14)===14&&this.addFormatting(te.pts,["i"]),(P&1)===1&&this.addFormatting(te.pts,["u"]);else if(this.isOffsetControlCode(v,P))this.column_+=P&3;else if(this.isPAC(v,P)){var X=Qi.indexOf(ee&7968);this.mode_==="rollUp"&&(X-this.rollUpRows_+1<0&&(X=this.rollUpRows_-1),this.setRollUp(te.pts,X)),X!==this.row_&&(this.clearFormatting(te.pts),this.row_=X),P&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(te.pts,["u"]),(ee&16)===16&&(this.column_=((ee&14)>>1)*4),this.isColorPAC(P)&&(P&14)===14&&this.addFormatting(te.pts,["i"])}else this.isNormalChar(v)&&(P===0&&(P=null),z=ai(v),z+=ai(P),this[this.mode_](te.pts,z),this.column_+=z.length)}};Bi.prototype=new Te,Bi.prototype.flushDisplayed=function(F){var K=this.displayed_.map(function(te,ee){try{return te.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+ee+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");K.length&&this.trigger("data",{startPts:this.startPts_,endPts:F,text:K,stream:this.name_})},Bi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Gi(),this.nonDisplayed_=Gi(),this.lastControlCode_=null,this.column_=0,this.row_=Ji,this.rollUpRows_=2,this.formatting_=[]},Bi.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Bi.prototype.isSpecialCharacter=function(F,K){return F===this.EXT_&&K>=48&&K<=63},Bi.prototype.isExtCharacter=function(F,K){return(F===this.EXT_+1||F===this.EXT_+2)&&K>=32&&K<=63},Bi.prototype.isMidRowCode=function(F,K){return F===this.EXT_&&K>=32&&K<=47},Bi.prototype.isOffsetControlCode=function(F,K){return F===this.OFFSET_&&K>=33&&K<=35},Bi.prototype.isPAC=function(F,K){return F>=this.BASE_&&F<this.BASE_+8&&K>=64&&K<=127},Bi.prototype.isColorPAC=function(F){return F>=64&&F<=79||F>=96&&F<=127},Bi.prototype.isNormalChar=function(F){return F>=32&&F<=127},Bi.prototype.setRollUp=function(F,K){if(this.mode_!=="rollUp"&&(this.row_=Ji,this.mode_="rollUp",this.flushDisplayed(F),this.nonDisplayed_=Gi(),this.displayed_=Gi()),K!==void 0&&K!==this.row_)for(var te=0;te<this.rollUpRows_;te++)this.displayed_[K-te]=this.displayed_[this.row_-te],this.displayed_[this.row_-te]="";K===void 0&&(K=this.row_),this.topRow_=K-this.rollUpRows_+1},Bi.prototype.addFormatting=function(F,K){this.formatting_=this.formatting_.concat(K);var te=K.reduce(function(ee,h){return ee+"<"+h+">"},"");this[this.mode_](F,te)},Bi.prototype.clearFormatting=function(F){if(this.formatting_.length){var K=this.formatting_.reverse().reduce(function(te,ee){return te+"</"+ee+">"},"");this.formatting_=[],this[this.mode_](F,K)}},Bi.prototype.popOn=function(F,K){var te=this.nonDisplayed_[this.row_];te+=K,this.nonDisplayed_[this.row_]=te},Bi.prototype.rollUp=function(F,K){var te=this.displayed_[this.row_];te+=K,this.displayed_[this.row_]=te},Bi.prototype.shiftRowsUp_=function(){var F;for(F=0;F<this.topRow_;F++)this.displayed_[F]="";for(F=this.row_+1;F<Ji+1;F++)this.displayed_[F]="";for(F=this.topRow_;F<this.row_;F++)this.displayed_[F]=this.displayed_[F+1];this.displayed_[this.row_]=""},Bi.prototype.paintOn=function(F,K){var te=this.displayed_[this.row_];te+=K,this.displayed_[this.row_]=te};var yn={CaptionStream:De,Cea608Stream:Bi,Cea708Stream:jt},Ln={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},rn=i,Jn=8589934592,er=4294967296,ya="shared",$o=function(F,K){var te=1;for(F>K&&(te=-1);Math.abs(K-F)>er;)F+=te*Jn;return F},Wt=function(F){var K,te;Wt.prototype.init.call(this),this.type_=F||ya,this.push=function(ee){this.type_!==ya&&ee.type!==this.type_||(te===void 0&&(te=ee.dts),ee.dts=$o(ee.dts,te),ee.pts=$o(ee.pts,te),K=ee.dts,this.trigger("data",ee))},this.flush=function(){te=K,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){te=void 0,K=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Wt.prototype=new rn;var Po={TimestampRolloverStream:Wt,handleRollover:$o},pr=(F,K,te)=>{if(!F)return-1;for(var ee=te;ee<F.length;ee++)if(F[ee]===K)return ee;return-1},ba={typedArrayIndexOf:pr},Lc=i,Qs=Ln,En=ba.typedArrayIndexOf,dr={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Qo=function(F,K,te){var ee,h="";for(ee=K;ee<te;ee++)h+="%"+("00"+F[ee].toString(16)).slice(-2);return h},bi=function(F,K,te){return decodeURIComponent(Qo(F,K,te))},_n=function(F,K,te){return unescape(Qo(F,K,te))},bn=function(F){return F[0]<<21|F[1]<<14|F[2]<<7|F[3]},fn={APIC:function(F){var K=1,te,ee,h="-->";F.data[0]===dr.Utf8&&(te=En(F.data,0,K),!(te<0)&&(F.mimeType=_n(F.data,K,te),K=te+1,F.pictureType=F.data[K],K++,ee=En(F.data,0,K),!(ee<0)&&(F.description=bi(F.data,K,ee),K=ee+1,F.mimeType===h?F.url=_n(F.data,K,F.data.length):F.pictureData=F.data.subarray(K,F.data.length))))},"T*":function(F){F.data[0]===dr.Utf8&&(F.value=bi(F.data,1,F.data.length).replace(/\0*$/,""),F.values=F.value.split("\0"))},TXXX:function(F){var K;F.data[0]===dr.Utf8&&(K=En(F.data,0,1),K!==-1&&(F.description=bi(F.data,1,K),F.value=bi(F.data,K+1,F.data.length).replace(/\0*$/,""),F.data=F.value))},"W*":function(F){F.url=_n(F.data,0,F.data.length).replace(/\0.*$/,"")},WXXX:function(F){var K;F.data[0]===dr.Utf8&&(K=En(F.data,0,1),K!==-1&&(F.description=bi(F.data,1,K),F.url=_n(F.data,K+1,F.data.length).replace(/\0.*$/,"")))},PRIV:function(F){var K;for(K=0;K<F.data.length;K++)if(F.data[K]===0){F.owner=_n(F.data,0,K);break}F.privateData=F.data.subarray(K+1),F.data=F.privateData}},nr;nr=function(F){var K={descriptor:F&&F.descriptor},te=0,ee=[],h=0,v;if(nr.prototype.init.call(this),this.dispatchType=Qs.METADATA_STREAM_TYPE.toString(16),K.descriptor)for(v=0;v<K.descriptor.length;v++)this.dispatchType+=("00"+K.descriptor[v].toString(16)).slice(-2);this.push=function(P){var z,X,ce,Se,je,bt;if(P.type==="timed-metadata"){if(P.dataAlignmentIndicator&&(h=0,ee.length=0),ee.length===0&&(P.data.length<10||P.data[0]!=="I".charCodeAt(0)||P.data[1]!=="D".charCodeAt(0)||P.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(ee.push(P),h+=P.data.byteLength,ee.length===1&&(te=bn(P.data.subarray(6,10)),te+=10),!(h<te)){for(z={data:new Uint8Array(te),frames:[],pts:ee[0].pts,dts:ee[0].dts},je=0;je<te;)z.data.set(ee[0].data.subarray(0,te-je),je),je+=ee[0].data.byteLength,h-=ee[0].data.byteLength,ee.shift();X=10,z.data[5]&64&&(X+=4,X+=bn(z.data.subarray(10,14)),te-=bn(z.data.subarray(16,20)));do{if(ce=bn(z.data.subarray(X+4,X+8)),ce<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(bt=String.fromCharCode(z.data[X],z.data[X+1],z.data[X+2],z.data[X+3]),Se={id:bt,data:z.data.subarray(X+10,X+ce+10)},Se.key=Se.id,fn[Se.id]?fn[Se.id](Se):Se.id[0]==="T"?fn["T*"](Se):Se.id[0]==="W"&&fn["W*"](Se),Se.owner==="com.apple.streaming.transportStreamTimestamp"){var wt=Se.data,si=(wt[3]&1)<<30|wt[4]<<22|wt[5]<<14|wt[6]<<6|wt[7]>>>2;si*=4,si+=wt[7]&3,Se.timeStamp=si,z.pts===void 0&&z.dts===void 0&&(z.pts=Se.timeStamp,z.dts=Se.timeStamp),this.trigger("timestamp",Se)}z.frames.push(Se),X+=10,X+=ce}while(X<te);this.trigger("data",z)}}}},nr.prototype=new Lc;var xn=nr,go=i,ns=yn,Ps=Ln,Ur=Po.TimestampRolloverStream,In,tr,Or,Ao=188,_o=71;In=function(){var F=new Uint8Array(Ao),K=0;In.prototype.init.call(this),this.push=function(te){var ee=0,h=Ao,v;for(K?(v=new Uint8Array(te.byteLength+K),v.set(F.subarray(0,K)),v.set(te,K),K=0):v=te;h<v.byteLength;){if(v[ee]===_o&&v[h]===_o){this.trigger("data",v.subarray(ee,h)),ee+=Ao,h+=Ao;continue}ee++,h++}ee<v.byteLength&&(F.set(v.subarray(ee),0),K=v.byteLength-ee)},this.flush=function(){K===Ao&&F[0]===_o&&(this.trigger("data",F),K=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){K=0,this.trigger("reset")}},In.prototype=new go,tr=function(){var F,K,te,ee;tr.prototype.init.call(this),ee=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,F=function(h,v){var P=0;v.payloadUnitStartIndicator&&(P+=h[P]+1),v.type==="pat"?K(h.subarray(P),v):te(h.subarray(P),v)},K=function(h,v){v.section_number=h[7],v.last_section_number=h[8],ee.pmtPid=(h[10]&31)<<8|h[11],v.pmtPid=ee.pmtPid},te=function(h,v){var P,z,X,ce;if(h[5]&1){for(ee.programMapTable={video:null,audio:null,"timed-metadata":{}},P=(h[1]&15)<<8|h[2],z=3+P-4,X=(h[10]&15)<<8|h[11],ce=12+X;ce<z;){var Se=h[ce],je=(h[ce+1]&31)<<8|h[ce+2];Se===Ps.H264_STREAM_TYPE&&ee.programMapTable.video===null?ee.programMapTable.video=je:Se===Ps.ADTS_STREAM_TYPE&&ee.programMapTable.audio===null?ee.programMapTable.audio=je:Se===Ps.METADATA_STREAM_TYPE&&(ee.programMapTable["timed-metadata"][je]=Se),ce+=((h[ce+3]&15)<<8|h[ce+4])+5}v.programMapTable=ee.programMapTable}},this.push=function(h){var v={},P=4;if(v.payloadUnitStartIndicator=!!(h[1]&64),v.pid=h[1]&31,v.pid<<=8,v.pid|=h[2],(h[3]&48)>>>4>1&&(P+=h[P]+1),v.pid===0)v.type="pat",F(h.subarray(P),v),this.trigger("data",v);else if(v.pid===this.pmtPid)for(v.type="pmt",F(h.subarray(P),v),this.trigger("data",v);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([h,P,v]):this.processPes_(h,P,v)},this.processPes_=function(h,v,P){P.pid===this.programMapTable.video?P.streamType=Ps.H264_STREAM_TYPE:P.pid===this.programMapTable.audio?P.streamType=Ps.ADTS_STREAM_TYPE:P.streamType=this.programMapTable["timed-metadata"][P.pid],P.type="pes",P.data=h.subarray(v),this.trigger("data",P)}},tr.prototype=new go,tr.STREAM_TYPES={h264:27,adts:15},Or=function(){var F=this,K=!1,te={data:[],size:0},ee={data:[],size:0},h={data:[],size:0},v,P=function(X,ce){var Se;const je=X[0]<<16|X[1]<<8|X[2];ce.data=new Uint8Array,je===1&&(ce.packetLength=6+(X[4]<<8|X[5]),ce.dataAlignmentIndicator=(X[6]&4)!==0,Se=X[7],Se&192&&(ce.pts=(X[9]&14)<<27|(X[10]&255)<<20|(X[11]&254)<<12|(X[12]&255)<<5|(X[13]&254)>>>3,ce.pts*=4,ce.pts+=(X[13]&6)>>>1,ce.dts=ce.pts,Se&64&&(ce.dts=(X[14]&14)<<27|(X[15]&255)<<20|(X[16]&254)<<12|(X[17]&255)<<5|(X[18]&254)>>>3,ce.dts*=4,ce.dts+=(X[18]&6)>>>1)),ce.data=X.subarray(9+X[8]))},z=function(X,ce,Se){var je=new Uint8Array(X.size),bt={type:ce},wt=0,si=0,ki=!1,on;if(!(!X.data.length||X.size<9)){for(bt.trackId=X.data[0].pid,wt=0;wt<X.data.length;wt++)on=X.data[wt],je.set(on.data,si),si+=on.data.byteLength;P(je,bt),ki=ce==="video"||bt.packetLength<=X.size,(Se||ki)&&(X.size=0,X.data.length=0),ki&&F.trigger("data",bt)}};Or.prototype.init.call(this),this.push=function(X){({pat:function(){},pes:function(){var ce,Se;switch(X.streamType){case Ps.H264_STREAM_TYPE:ce=te,Se="video";break;case Ps.ADTS_STREAM_TYPE:ce=ee,Se="audio";break;case Ps.METADATA_STREAM_TYPE:ce=h,Se="timed-metadata";break;default:return}X.payloadUnitStartIndicator&&z(ce,Se,!0),ce.data.push(X),ce.size+=X.data.byteLength},pmt:function(){var ce={type:"metadata",tracks:[]};v=X.programMapTable,v.video!==null&&ce.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.video,codec:"avc",type:"video"}),v.audio!==null&&ce.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.audio,codec:"adts",type:"audio"}),K=!0,F.trigger("data",ce)}})[X.type]()},this.reset=function(){te.size=0,te.data.length=0,ee.size=0,ee.data.length=0,this.trigger("reset")},this.flushStreams_=function(){z(te,"video"),z(ee,"audio"),z(h,"timed-metadata")},this.flush=function(){if(!K&&v){var X={type:"metadata",tracks:[]};v.video!==null&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.video,codec:"avc",type:"video"}),v.audio!==null&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.audio,codec:"adts",type:"audio"}),F.trigger("data",X)}K=!1,this.flushStreams_(),this.trigger("done")}},Or.prototype=new go;var Gl={PAT_PID:0,MP2T_PACKET_LENGTH:Ao,TransportPacketStream:In,TransportParseStream:tr,ElementaryStream:Or,TimestampRolloverStream:Ur,CaptionStream:ns.CaptionStream,Cea608Stream:ns.Cea608Stream,Cea708Stream:ns.Cea708Stream,MetadataStream:xn};for(var No in Ps)Ps.hasOwnProperty(No)&&(Gl[No]=Ps[No]);var pl=Gl,Jo=i,Mo=hn.ONE_SECOND_IN_TS,Va,ws=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Va=function(F){var K,te=0;Va.prototype.init.call(this),this.skipWarn_=function(ee,h){this.trigger("log",{level:"warn",message:`adts skiping bytes ${ee} to ${h} in frame ${te} outside syncword`})},this.push=function(ee){var h=0,v,P,z,X,ce;if(F||(te=0),ee.type==="audio"){K&&K.length?(z=K,K=new Uint8Array(z.byteLength+ee.data.byteLength),K.set(z),K.set(ee.data,z.byteLength)):K=ee.data;for(var Se;h+7<K.length;){if(K[h]!==255||(K[h+1]&246)!==240){typeof Se!="number"&&(Se=h),h++;continue}if(typeof Se=="number"&&(this.skipWarn_(Se,h),Se=null),P=(~K[h+1]&1)*2,v=(K[h+3]&3)<<11|K[h+4]<<3|(K[h+5]&224)>>5,X=((K[h+6]&3)+1)*1024,ce=X*Mo/ws[(K[h+2]&60)>>>2],K.byteLength-h<v)break;this.trigger("data",{pts:ee.pts+te*ce,dts:ee.dts+te*ce,sampleCount:X,audioobjecttype:(K[h+2]>>>6&3)+1,channelcount:(K[h+2]&1)<<2|(K[h+3]&192)>>>6,samplerate:ws[(K[h+2]&60)>>>2],samplingfrequencyindex:(K[h+2]&60)>>>2,samplesize:16,data:K.subarray(h+7+P,h+v)}),te++,h+=v}typeof Se=="number"&&(this.skipWarn_(Se,h),Se=null),K=K.subarray(h)}},this.flush=function(){te=0,this.trigger("done")},this.reset=function(){K=void 0,this.trigger("reset")},this.endTimeline=function(){K=void 0,this.trigger("endedtimeline")}},Va.prototype=new Jo;var br=Va,ml;ml=function(F){var K=F.byteLength,te=0,ee=0;this.length=function(){return 8*K},this.bitsAvailable=function(){return 8*K+ee},this.loadWord=function(){var h=F.byteLength-K,v=new Uint8Array(4),P=Math.min(4,K);if(P===0)throw new Error("no bytes available");v.set(F.subarray(h,h+P)),te=new DataView(v.buffer).getUint32(0),ee=P*8,K-=P},this.skipBits=function(h){var v;ee>h?(te<<=h,ee-=h):(h-=ee,v=Math.floor(h/8),h-=v*8,K-=v,this.loadWord(),te<<=h,ee-=h)},this.readBits=function(h){var v=Math.min(ee,h),P=te>>>32-v;return ee-=v,ee>0?te<<=v:K>0&&this.loadWord(),v=h-v,v>0?P<<v|this.readBits(v):P},this.skipLeadingZeros=function(){var h;for(h=0;h<ee;++h)if(te&2147483648>>>h)return te<<=h,ee-=h,h;return this.loadWord(),h+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var h=this.skipLeadingZeros();return this.readBits(h+1)-1},this.readExpGolomb=function(){var h=this.readUnsignedExpGolomb();return 1&h?1+h>>>1:-1*(h>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var gl=ml,Vs=i,ln=gl,As,Yn,jr;Yn=function(){var F=0,K,te;Yn.prototype.init.call(this),this.push=function(ee){var h;te?(h=new Uint8Array(te.byteLength+ee.data.byteLength),h.set(te),h.set(ee.data,te.byteLength),te=h):te=ee.data;for(var v=te.byteLength;F<v-3;F++)if(te[F+2]===1){K=F+5;break}for(;K<v;)switch(te[K]){case 0:if(te[K-1]!==0){K+=2;break}else if(te[K-2]!==0){K++;break}F+3!==K-2&&this.trigger("data",te.subarray(F+3,K-2));do K++;while(te[K]!==1&&K<v);F=K-2,K+=3;break;case 1:if(te[K-1]!==0||te[K-2]!==0){K+=3;break}this.trigger("data",te.subarray(F+3,K-2)),F=K-2,K+=3;break;default:K+=3;break}te=te.subarray(F),K-=F,F=0},this.reset=function(){te=null,F=0,this.trigger("reset")},this.flush=function(){te&&te.byteLength>3&&this.trigger("data",te.subarray(F+3)),te=null,F=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Yn.prototype=new Vs,jr={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},As=function(){var F=new Yn,K,te,ee,h,v,P,z;As.prototype.init.call(this),K=this,this.push=function(X){X.type==="video"&&(te=X.trackId,ee=X.pts,h=X.dts,F.push(X))},F.on("data",function(X){var ce={trackId:te,pts:ee,dts:h,data:X,nalUnitTypeCode:X[0]&31};switch(ce.nalUnitTypeCode){case 5:ce.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ce.nalUnitType="sei_rbsp",ce.escapedRBSP=v(X.subarray(1));break;case 7:ce.nalUnitType="seq_parameter_set_rbsp",ce.escapedRBSP=v(X.subarray(1)),ce.config=P(ce.escapedRBSP);break;case 8:ce.nalUnitType="pic_parameter_set_rbsp";break;case 9:ce.nalUnitType="access_unit_delimiter_rbsp";break}K.trigger("data",ce)}),F.on("done",function(){K.trigger("done")}),F.on("partialdone",function(){K.trigger("partialdone")}),F.on("reset",function(){K.trigger("reset")}),F.on("endedtimeline",function(){K.trigger("endedtimeline")}),this.flush=function(){F.flush()},this.partialFlush=function(){F.partialFlush()},this.reset=function(){F.reset()},this.endTimeline=function(){F.endTimeline()},z=function(X,ce){var Se=8,je=8,bt,wt;for(bt=0;bt<X;bt++)je!==0&&(wt=ce.readExpGolomb(),je=(Se+wt+256)%256),Se=je===0?Se:je},v=function(X){for(var ce=X.byteLength,Se=[],je=1,bt,wt;je<ce-2;)X[je]===0&&X[je+1]===0&&X[je+2]===3?(Se.push(je+2),je+=2):je++;if(Se.length===0)return X;bt=ce-Se.length,wt=new Uint8Array(bt);var si=0;for(je=0;je<bt;si++,je++)si===Se[0]&&(si++,Se.shift()),wt[je]=X[si];return wt},P=function(X){var ce=0,Se=0,je=0,bt=0,wt,si,ki,on,cr,Cr,_s,Ss,Ja,ou,Nc,wr=[1,1],au,js;if(wt=new ln(X),si=wt.readUnsignedByte(),on=wt.readUnsignedByte(),ki=wt.readUnsignedByte(),wt.skipUnsignedExpGolomb(),jr[si]&&(cr=wt.readUnsignedExpGolomb(),cr===3&&wt.skipBits(1),wt.skipUnsignedExpGolomb(),wt.skipUnsignedExpGolomb(),wt.skipBits(1),wt.readBoolean()))for(Nc=cr!==3?8:12,js=0;js<Nc;js++)wt.readBoolean()&&(js<6?z(16,wt):z(64,wt));if(wt.skipUnsignedExpGolomb(),Cr=wt.readUnsignedExpGolomb(),Cr===0)wt.readUnsignedExpGolomb();else if(Cr===1)for(wt.skipBits(1),wt.skipExpGolomb(),wt.skipExpGolomb(),_s=wt.readUnsignedExpGolomb(),js=0;js<_s;js++)wt.skipExpGolomb();if(wt.skipUnsignedExpGolomb(),wt.skipBits(1),Ss=wt.readUnsignedExpGolomb(),Ja=wt.readUnsignedExpGolomb(),ou=wt.readBits(1),ou===0&&wt.skipBits(1),wt.skipBits(1),wt.readBoolean()&&(ce=wt.readUnsignedExpGolomb(),Se=wt.readUnsignedExpGolomb(),je=wt.readUnsignedExpGolomb(),bt=wt.readUnsignedExpGolomb()),wt.readBoolean()&&wt.readBoolean()){switch(au=wt.readUnsignedByte(),au){case 1:wr=[1,1];break;case 2:wr=[12,11];break;case 3:wr=[10,11];break;case 4:wr=[16,11];break;case 5:wr=[40,33];break;case 6:wr=[24,11];break;case 7:wr=[20,11];break;case 8:wr=[32,11];break;case 9:wr=[80,33];break;case 10:wr=[18,11];break;case 11:wr=[15,11];break;case 12:wr=[64,33];break;case 13:wr=[160,99];break;case 14:wr=[4,3];break;case 15:wr=[3,2];break;case 16:wr=[2,1];break;case 255:{wr=[wt.readUnsignedByte()<<8|wt.readUnsignedByte(),wt.readUnsignedByte()<<8|wt.readUnsignedByte()];break}}wr&&wr[0]/wr[1]}return{profileIdc:si,levelIdc:ki,profileCompatibility:on,width:(Ss+1)*16-ce*2-Se*2,height:(2-ou)*(Ja+1)*16-je*2-bt*2,sarRatio:wr}}},As.prototype=new Vs;var _l={H264Stream:As,NalByteStream:Yn},Wl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],xa=function(F,K){var te=F[K+6]<<21|F[K+7]<<14|F[K+8]<<7|F[K+9],ee=F[K+5],h=(ee&16)>>4;return te=te>=0?te:0,h?te+20:te+10},Lr=function(F,K){return F.length-K<10||F[K]!=="I".charCodeAt(0)||F[K+1]!=="D".charCodeAt(0)||F[K+2]!=="3".charCodeAt(0)?K:(K+=xa(F,K),Lr(F,K))},ql=function(F){var K=Lr(F,0);return F.length>=K+2&&(F[K]&255)===255&&(F[K+1]&240)===240&&(F[K+1]&22)===16},Oo=function(F){return F[0]<<21|F[1]<<14|F[2]<<7|F[3]},xr=function(F,K,te){var ee,h="";for(ee=K;ee<te;ee++)h+="%"+("00"+F[ee].toString(16)).slice(-2);return h},zo=function(F,K,te){return unescape(xr(F,K,te))},ku=function(F,K){var te=(F[K+5]&224)>>5,ee=F[K+4]<<3,h=F[K+3]&3<<11;return h|ee|te},hd=function(F,K){return F[K]==="I".charCodeAt(0)&&F[K+1]==="D".charCodeAt(0)&&F[K+2]==="3".charCodeAt(0)?"timed-metadata":F[K]&!0&&(F[K+1]&240)===240?"audio":null},Dc=function(F){for(var K=0;K+5<F.length;){if(F[K]!==255||(F[K+1]&246)!==240){K++;continue}return Wl[(F[K+2]&60)>>>2]}return null},vl=function(F){var K,te,ee,h;K=10,F[5]&64&&(K+=4,K+=Oo(F.subarray(10,14)));do{if(te=Oo(F.subarray(K+4,K+8)),te<1)return null;if(h=String.fromCharCode(F[K],F[K+1],F[K+2],F[K+3]),h==="PRIV"){ee=F.subarray(K+10,K+te+10);for(var v=0;v<ee.byteLength;v++)if(ee[v]===0){var P=zo(ee,0,v);if(P==="com.apple.streaming.transportStreamTimestamp"){var z=ee.subarray(v+1),X=(z[3]&1)<<30|z[4]<<22|z[5]<<14|z[6]<<6|z[7]>>>2;return X*=4,X+=z[7]&3,X}break}}K+=10,K+=te}while(K<F.byteLength);return null},Zl={isLikelyAacData:ql,parseId3TagSize:xa,parseAdtsSize:ku,parseType:hd,parseSampleRate:Dc,parseAacTimestamp:vl},Eu=i,Ua=Zl,Sn;Sn=function(){var F=new Uint8Array,K=0;Sn.prototype.init.call(this),this.setTimestamp=function(te){K=te},this.push=function(te){var ee=0,h=0,v,P,z,X;for(F.length?(X=F.length,F=new Uint8Array(te.byteLength+X),F.set(F.subarray(0,X)),F.set(te,X)):F=te;F.length-h>=3;){if(F[h]==="I".charCodeAt(0)&&F[h+1]==="D".charCodeAt(0)&&F[h+2]==="3".charCodeAt(0)){if(F.length-h<10||(ee=Ua.parseId3TagSize(F,h),h+ee>F.length))break;P={type:"timed-metadata",data:F.subarray(h,h+ee)},this.trigger("data",P),h+=ee;continue}else if((F[h]&255)===255&&(F[h+1]&240)===240){if(F.length-h<7||(ee=Ua.parseAdtsSize(F,h),h+ee>F.length))break;z={type:"audio",data:F.subarray(h,h+ee),pts:K,dts:K},this.trigger("data",z),h+=ee;continue}h++}v=F.length-h,v>0?F=F.subarray(h):F=new Uint8Array},this.reset=function(){F=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){F=new Uint8Array,this.trigger("endedtimeline")}},Sn.prototype=new Eu;var Iu=Sn,us=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ms=us,Yl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],nc=Yl,ja=i,Ha=Rt,yl=ct,Xl=Is,vo=va,Os=pl,Kl=hn,Js=br,rc=_l.H264Stream,sc=Iu,eo=Zl.isLikelyAacData,Un=hn.ONE_SECOND_IN_TS,wa=Ms,bl=nc,Ta,Vo,Sa,ea,oc=function(F,K){K.stream=F,this.trigger("log",K)},xl=function(F,K){for(var te=Object.keys(K),ee=0;ee<te.length;ee++){var h=te[ee];h==="headOfPipeline"||!K[h].on||K[h].on("log",oc.bind(F,h))}},ac=function(F,K){var te;if(F.length!==K.length)return!1;for(te=0;te<F.length;te++)if(F[te]!==K[te])return!1;return!0},Uo=function(F,K,te,ee,h,v){var P=te-K,z=ee-K,X=h-te;return{start:{dts:F,pts:F+P},end:{dts:F+z,pts:F+X},prependedContentDuration:v,baseMediaDecodeTime:F}};Vo=function(F,K){var te=[],ee,h=0,v=0,P=1/0;K=K||{},ee=K.firstSequenceNumber||0,Vo.prototype.init.call(this),this.push=function(z){vo.collectDtsInfo(F,z),F&&wa.forEach(function(X){F[X]=z[X]}),te.push(z)},this.setEarliestDts=function(z){h=z},this.setVideoBaseMediaDecodeTime=function(z){P=z},this.setAudioAppendStart=function(z){v=z},this.flush=function(){var z,X,ce,Se,je,bt,wt;if(te.length===0){this.trigger("done","AudioSegmentStream");return}z=Xl.trimAdtsFramesByEarliestDts(te,F,h),F.baseMediaDecodeTime=vo.calculateTrackBaseMediaDecodeTime(F,K.keepOriginalTimestamps),wt=Xl.prefixWithSilence(F,z,v,P),F.samples=Xl.generateSampleTable(z),ce=Ha.mdat(Xl.concatenateFrameData(z)),te=[],X=Ha.moof(ee,[F]),Se=new Uint8Array(X.byteLength+ce.byteLength),ee++,Se.set(X),Se.set(ce,X.byteLength),vo.clearDtsInfo(F),je=Math.ceil(Un*1024/F.samplerate),z.length&&(bt=z.length*je,this.trigger("segmentTimingInfo",Uo(Kl.audioTsToVideoTs(F.baseMediaDecodeTime,F.samplerate),z[0].dts,z[0].pts,z[0].dts+bt,z[0].pts+bt,wt||0)),this.trigger("timingInfo",{start:z[0].pts,end:z[0].pts+bt})),this.trigger("data",{track:F,boxes:Se}),this.trigger("done","AudioSegmentStream")},this.reset=function(){vo.clearDtsInfo(F),te=[],this.trigger("reset")}},Vo.prototype=new ja,Ta=function(F,K){var te,ee=[],h=[],v,P;K=K||{},te=K.firstSequenceNumber||0,Ta.prototype.init.call(this),delete F.minPTS,this.gopCache_=[],this.push=function(z){vo.collectDtsInfo(F,z),z.nalUnitType==="seq_parameter_set_rbsp"&&!v&&(v=z.config,F.sps=[z.data],bl.forEach(function(X){F[X]=v[X]},this)),z.nalUnitType==="pic_parameter_set_rbsp"&&!P&&(P=z.data,F.pps=[z.data]),ee.push(z)},this.flush=function(){for(var z,X,ce,Se,je,bt,wt=0,si,ki;ee.length&&ee[0].nalUnitType!=="access_unit_delimiter_rbsp";)ee.shift();if(ee.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(z=yl.groupNalsIntoFrames(ee),ce=yl.groupFramesIntoGops(z),ce[0][0].keyFrame||(X=this.getGopForFusion_(ee[0],F),X?(wt=X.duration,ce.unshift(X),ce.byteLength+=X.byteLength,ce.nalCount+=X.nalCount,ce.pts=X.pts,ce.dts=X.dts,ce.duration+=X.duration):ce=yl.extendFirstKeyFrame(ce)),h.length){var on;if(K.alignGopsAtEnd?on=this.alignGopsAtEnd_(ce):on=this.alignGopsAtStart_(ce),!on){this.gopCache_.unshift({gop:ce.pop(),pps:F.pps,sps:F.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),ee=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}vo.clearDtsInfo(F),ce=on}vo.collectDtsInfo(F,ce),F.samples=yl.generateSampleTable(ce),je=Ha.mdat(yl.concatenateNalData(ce)),F.baseMediaDecodeTime=vo.calculateTrackBaseMediaDecodeTime(F,K.keepOriginalTimestamps),this.trigger("processedGopsInfo",ce.map(function(cr){return{pts:cr.pts,dts:cr.dts,byteLength:cr.byteLength}})),si=ce[0],ki=ce[ce.length-1],this.trigger("segmentTimingInfo",Uo(F.baseMediaDecodeTime,si.dts,si.pts,ki.dts+ki.duration,ki.pts+ki.duration,wt)),this.trigger("timingInfo",{start:ce[0].pts,end:ce[ce.length-1].pts+ce[ce.length-1].duration}),this.gopCache_.unshift({gop:ce.pop(),pps:F.pps,sps:F.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),ee=[],this.trigger("baseMediaDecodeTime",F.baseMediaDecodeTime),this.trigger("timelineStartInfo",F.timelineStartInfo),Se=Ha.moof(te,[F]),bt=new Uint8Array(Se.byteLength+je.byteLength),te++,bt.set(Se),bt.set(je,Se.byteLength),this.trigger("data",{track:F,boxes:bt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),ee=[],this.gopCache_.length=0,h.length=0,this.trigger("reset")},this.resetStream_=function(){vo.clearDtsInfo(F),v=void 0,P=void 0},this.getGopForFusion_=function(z){var X=45e3,ce=1e4,Se=1/0,je,bt,wt,si,ki;for(ki=0;ki<this.gopCache_.length;ki++)si=this.gopCache_[ki],wt=si.gop,!(!(F.pps&&ac(F.pps[0],si.pps[0]))||!(F.sps&&ac(F.sps[0],si.sps[0])))&&(wt.dts<F.timelineStartInfo.dts||(je=z.dts-wt.dts-wt.duration,je>=-ce&&je<=X&&(!bt||Se>je)&&(bt=si,Se=je)));return bt?bt.gop:null},this.alignGopsAtStart_=function(z){var X,ce,Se,je,bt,wt,si,ki;for(bt=z.byteLength,wt=z.nalCount,si=z.duration,X=ce=0;X<h.length&&ce<z.length&&(Se=h[X],je=z[ce],Se.pts!==je.pts);){if(je.pts>Se.pts){X++;continue}ce++,bt-=je.byteLength,wt-=je.nalCount,si-=je.duration}return ce===0?z:ce===z.length?null:(ki=z.slice(ce),ki.byteLength=bt,ki.duration=si,ki.nalCount=wt,ki.pts=ki[0].pts,ki.dts=ki[0].dts,ki)},this.alignGopsAtEnd_=function(z){var X,ce,Se,je,bt,wt;for(X=h.length-1,ce=z.length-1,bt=null,wt=!1;X>=0&&ce>=0;){if(Se=h[X],je=z[ce],Se.pts===je.pts){wt=!0;break}if(Se.pts>je.pts){X--;continue}X===h.length-1&&(bt=ce),ce--}if(!wt&&bt===null)return null;var si;if(wt?si=ce:si=bt,si===0)return z;var ki=z.slice(si),on=ki.reduce(function(cr,Cr){return cr.byteLength+=Cr.byteLength,cr.duration+=Cr.duration,cr.nalCount+=Cr.nalCount,cr},{byteLength:0,duration:0,nalCount:0});return ki.byteLength=on.byteLength,ki.duration=on.duration,ki.nalCount=on.nalCount,ki.pts=ki[0].pts,ki.dts=ki[0].dts,ki},this.alignGopsWith=function(z){h=z}},Ta.prototype=new ja,ea=function(F,K){this.numberOfTracks=0,this.metadataStream=K,F=F||{},typeof F.remux<"u"?this.remuxTracks=!!F.remux:this.remuxTracks=!0,typeof F.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=F.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ea.prototype.init.call(this),this.push=function(te){if(te.text)return this.pendingCaptions.push(te);if(te.frames)return this.pendingMetadata.push(te);this.pendingTracks.push(te.track),this.pendingBytes+=te.boxes.byteLength,te.track.type==="video"&&(this.videoTrack=te.track,this.pendingBoxes.push(te.boxes)),te.track.type==="audio"&&(this.audioTrack=te.track,this.pendingBoxes.unshift(te.boxes))}},ea.prototype=new ja,ea.prototype.flush=function(F){var K=0,te={captions:[],captionStreams:{},metadata:[],info:{}},ee,h,v,P=0,z;if(this.pendingTracks.length<this.numberOfTracks){if(F!=="VideoSegmentStream"&&F!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(P=this.videoTrack.timelineStartInfo.pts,bl.forEach(function(X){te.info[X]=this.videoTrack[X]},this)):this.audioTrack&&(P=this.audioTrack.timelineStartInfo.pts,wa.forEach(function(X){te.info[X]=this.audioTrack[X]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?te.type=this.pendingTracks[0].type:te.type="combined",this.emittedTracks+=this.pendingTracks.length,v=Ha.initSegment(this.pendingTracks),te.initSegment=new Uint8Array(v.byteLength),te.initSegment.set(v),te.data=new Uint8Array(this.pendingBytes),z=0;z<this.pendingBoxes.length;z++)te.data.set(this.pendingBoxes[z],K),K+=this.pendingBoxes[z].byteLength;for(z=0;z<this.pendingCaptions.length;z++)ee=this.pendingCaptions[z],ee.startTime=Kl.metadataTsToSeconds(ee.startPts,P,this.keepOriginalTimestamps),ee.endTime=Kl.metadataTsToSeconds(ee.endPts,P,this.keepOriginalTimestamps),te.captionStreams[ee.stream]=!0,te.captions.push(ee);for(z=0;z<this.pendingMetadata.length;z++)h=this.pendingMetadata[z],h.cueTime=Kl.metadataTsToSeconds(h.pts,P,this.keepOriginalTimestamps),te.metadata.push(h);for(te.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",te),z=0;z<te.captions.length;z++)ee=te.captions[z],this.trigger("caption",ee);for(z=0;z<te.metadata.length;z++)h=te.metadata[z],this.trigger("id3Frame",h)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ea.prototype.setRemux=function(F){this.remuxTracks=F},Sa=function(F){var K=this,te=!0,ee,h;Sa.prototype.init.call(this),F=F||{},this.baseMediaDecodeTime=F.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var v={};this.transmuxPipeline_=v,v.type="aac",v.metadataStream=new Os.MetadataStream,v.aacStream=new sc,v.audioTimestampRolloverStream=new Os.TimestampRolloverStream("audio"),v.timedMetadataTimestampRolloverStream=new Os.TimestampRolloverStream("timed-metadata"),v.adtsStream=new Js,v.coalesceStream=new ea(F,v.metadataStream),v.headOfPipeline=v.aacStream,v.aacStream.pipe(v.audioTimestampRolloverStream).pipe(v.adtsStream),v.aacStream.pipe(v.timedMetadataTimestampRolloverStream).pipe(v.metadataStream).pipe(v.coalesceStream),v.metadataStream.on("timestamp",function(P){v.aacStream.setTimestamp(P.timeStamp)}),v.aacStream.on("data",function(P){P.type!=="timed-metadata"&&P.type!=="audio"||v.audioSegmentStream||(h=h||{timelineStartInfo:{baseMediaDecodeTime:K.baseMediaDecodeTime},codec:"adts",type:"audio"},v.coalesceStream.numberOfTracks++,v.audioSegmentStream=new Vo(h,F),v.audioSegmentStream.on("log",K.getLogTrigger_("audioSegmentStream")),v.audioSegmentStream.on("timingInfo",K.trigger.bind(K,"audioTimingInfo")),v.adtsStream.pipe(v.audioSegmentStream).pipe(v.coalesceStream),K.trigger("trackinfo",{hasAudio:!!h,hasVideo:!!ee}))}),v.coalesceStream.on("data",this.trigger.bind(this,"data")),v.coalesceStream.on("done",this.trigger.bind(this,"done")),xl(this,v)},this.setupTsPipeline=function(){var v={};this.transmuxPipeline_=v,v.type="ts",v.metadataStream=new Os.MetadataStream,v.packetStream=new Os.TransportPacketStream,v.parseStream=new Os.TransportParseStream,v.elementaryStream=new Os.ElementaryStream,v.timestampRolloverStream=new Os.TimestampRolloverStream,v.adtsStream=new Js,v.h264Stream=new rc,v.captionStream=new Os.CaptionStream(F),v.coalesceStream=new ea(F,v.metadataStream),v.headOfPipeline=v.packetStream,v.packetStream.pipe(v.parseStream).pipe(v.elementaryStream).pipe(v.timestampRolloverStream),v.timestampRolloverStream.pipe(v.h264Stream),v.timestampRolloverStream.pipe(v.adtsStream),v.timestampRolloverStream.pipe(v.metadataStream).pipe(v.coalesceStream),v.h264Stream.pipe(v.captionStream).pipe(v.coalesceStream),v.elementaryStream.on("data",function(P){var z;if(P.type==="metadata"){for(z=P.tracks.length;z--;)!ee&&P.tracks[z].type==="video"?(ee=P.tracks[z],ee.timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime):!h&&P.tracks[z].type==="audio"&&(h=P.tracks[z],h.timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime);ee&&!v.videoSegmentStream&&(v.coalesceStream.numberOfTracks++,v.videoSegmentStream=new Ta(ee,F),v.videoSegmentStream.on("log",K.getLogTrigger_("videoSegmentStream")),v.videoSegmentStream.on("timelineStartInfo",function(X){h&&!F.keepOriginalTimestamps&&(h.timelineStartInfo=X,v.audioSegmentStream.setEarliestDts(X.dts-K.baseMediaDecodeTime))}),v.videoSegmentStream.on("processedGopsInfo",K.trigger.bind(K,"gopInfo")),v.videoSegmentStream.on("segmentTimingInfo",K.trigger.bind(K,"videoSegmentTimingInfo")),v.videoSegmentStream.on("baseMediaDecodeTime",function(X){h&&v.audioSegmentStream.setVideoBaseMediaDecodeTime(X)}),v.videoSegmentStream.on("timingInfo",K.trigger.bind(K,"videoTimingInfo")),v.h264Stream.pipe(v.videoSegmentStream).pipe(v.coalesceStream)),h&&!v.audioSegmentStream&&(v.coalesceStream.numberOfTracks++,v.audioSegmentStream=new Vo(h,F),v.audioSegmentStream.on("log",K.getLogTrigger_("audioSegmentStream")),v.audioSegmentStream.on("timingInfo",K.trigger.bind(K,"audioTimingInfo")),v.audioSegmentStream.on("segmentTimingInfo",K.trigger.bind(K,"audioSegmentTimingInfo")),v.adtsStream.pipe(v.audioSegmentStream).pipe(v.coalesceStream)),K.trigger("trackinfo",{hasAudio:!!h,hasVideo:!!ee})}}),v.coalesceStream.on("data",this.trigger.bind(this,"data")),v.coalesceStream.on("id3Frame",function(P){P.dispatchType=v.metadataStream.dispatchType,K.trigger("id3Frame",P)}),v.coalesceStream.on("caption",this.trigger.bind(this,"caption")),v.coalesceStream.on("done",this.trigger.bind(this,"done")),xl(this,v)},this.setBaseMediaDecodeTime=function(v){var P=this.transmuxPipeline_;F.keepOriginalTimestamps||(this.baseMediaDecodeTime=v),h&&(h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,vo.clearDtsInfo(h),P.audioTimestampRolloverStream&&P.audioTimestampRolloverStream.discontinuity()),ee&&(P.videoSegmentStream&&(P.videoSegmentStream.gopCache_=[]),ee.timelineStartInfo.dts=void 0,ee.timelineStartInfo.pts=void 0,vo.clearDtsInfo(ee),P.captionStream.reset()),P.timestampRolloverStream&&P.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(v){h&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(v)},this.setRemux=function(v){var P=this.transmuxPipeline_;F.remux=v,P&&P.coalesceStream&&P.coalesceStream.setRemux(v)},this.alignGopsWith=function(v){ee&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(v)},this.getLogTrigger_=function(v){var P=this;return function(z){z.stream=v,P.trigger("log",z)}},this.push=function(v){if(te){var P=eo(v);P&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!P&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),te=!1}this.transmuxPipeline_.headOfPipeline.push(v)},this.flush=function(){te=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Sa.prototype=new ja;var Ga={Transmuxer:Sa,VideoSegmentStream:Ta,AudioSegmentStream:Vo,AUDIO_PROPERTIES:wa,VIDEO_PROPERTIES:bl,generateSegmentTimingInfo:Uo},Wa=function(F){return F>>>0},cs=function(F){return("00"+F.toString(16)).slice(-2)},kn={toUnsigned:Wa,toHexString:cs},Lo=function(F){var K="";return K+=String.fromCharCode(F[0]),K+=String.fromCharCode(F[1]),K+=String.fromCharCode(F[2]),K+=String.fromCharCode(F[3]),K},Us=Lo,Rc=kn.toUnsigned,lc=Us,uc=function(F,K){var te=[],ee,h,v,P,z;if(!K.length)return null;for(ee=0;ee<F.byteLength;)h=Rc(F[ee]<<24|F[ee+1]<<16|F[ee+2]<<8|F[ee+3]),v=lc(F.subarray(ee+4,ee+8)),P=h>1?ee+h:F.byteLength,v===K[0]&&(K.length===1?te.push(F.subarray(ee+8,P)):(z=uc(F.subarray(ee+8,P),K.slice(1)),z.length&&(te=te.concat(z)))),ee=P;return te},Ql=uc,cc=kn.toUnsigned,fd=a.getUint64,dc=function(F){var K={version:F[0],flags:new Uint8Array(F.subarray(1,4))};return K.version===1?K.baseMediaDecodeTime=fd(F.subarray(4)):K.baseMediaDecodeTime=cc(F[4]<<24|F[5]<<16|F[6]<<8|F[7]),K},Pu=dc,Au=function(F){return{isLeading:(F[0]&12)>>>2,dependsOn:F[0]&3,isDependedOn:(F[1]&192)>>>6,hasRedundancy:(F[1]&48)>>>4,paddingValue:(F[1]&14)>>>1,isNonSyncSample:F[1]&1,degradationPriority:F[2]<<8|F[3]}},to=Au,qa=to,pd=function(F){var K={version:F[0],flags:new Uint8Array(F.subarray(1,4)),samples:[]},te=new DataView(F.buffer,F.byteOffset,F.byteLength),ee=K.flags[2]&1,h=K.flags[2]&4,v=K.flags[1]&1,P=K.flags[1]&2,z=K.flags[1]&4,X=K.flags[1]&8,ce=te.getUint32(4),Se=8,je;for(ee&&(K.dataOffset=te.getInt32(Se),Se+=4),h&&ce&&(je={flags:qa(F.subarray(Se,Se+4))},Se+=4,v&&(je.duration=te.getUint32(Se),Se+=4),P&&(je.size=te.getUint32(Se),Se+=4),X&&(K.version===1?je.compositionTimeOffset=te.getInt32(Se):je.compositionTimeOffset=te.getUint32(Se),Se+=4),K.samples.push(je),ce--);ce--;)je={},v&&(je.duration=te.getUint32(Se),Se+=4),P&&(je.size=te.getUint32(Se),Se+=4),z&&(je.flags=qa(F.subarray(Se,Se+4)),Se+=4),X&&(K.version===1?je.compositionTimeOffset=te.getInt32(Se):je.compositionTimeOffset=te.getUint32(Se),Se+=4),K.samples.push(je);return K},ta=pd,Mu=function(F){var K=new DataView(F.buffer,F.byteOffset,F.byteLength),te={version:F[0],flags:new Uint8Array(F.subarray(1,4)),trackId:K.getUint32(4)},ee=te.flags[2]&1,h=te.flags[2]&2,v=te.flags[2]&8,P=te.flags[2]&16,z=te.flags[2]&32,X=te.flags[0]&65536,ce=te.flags[0]&131072,Se;return Se=8,ee&&(Se+=4,te.baseDataOffset=K.getUint32(12),Se+=4),h&&(te.sampleDescriptionIndex=K.getUint32(Se),Se+=4),v&&(te.defaultSampleDuration=K.getUint32(Se),Se+=4),P&&(te.defaultSampleSize=K.getUint32(Se),Se+=4),z&&(te.defaultSampleFlags=K.getUint32(Se)),X&&(te.durationIsEmpty=!0),!ee&&ce&&(te.baseDataOffsetIsMoof=!0),te},yo=Mu,wl;typeof window<"u"?wl=window:typeof t<"u"?wl=t:typeof self<"u"?wl=self:wl={};var ia=wl,Ou=_e.discardEmulationPreventionBytes,bo=yn.CaptionStream,Za=Ql,Ca=Pu,Tl=ta,Lu=yo,Ya=ia,ih=function(F,K){for(var te=F,ee=0;ee<K.length;ee++){var h=K[ee];if(te<h.size)return h;te-=h.size}return null},Do=function(F,K,te){var ee=new DataView(F.buffer,F.byteOffset,F.byteLength),h={logs:[],seiNals:[]},v,P,z,X;for(P=0;P+4<F.length;P+=z)if(z=ee.getUint32(P),P+=4,!(z<=0))switch(F[P]&31){case 6:var ce=F.subarray(P+1,P+1+z),Se=ih(P,K);if(v={nalUnitType:"sei_rbsp",size:z,data:ce,escapedRBSP:Ou(ce),trackId:te},Se)v.pts=Se.pts,v.dts=Se.dts,X=Se;else if(X)v.pts=X.pts,v.dts=X.dts;else{h.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+P+" for trackId "+te+". See mux.js#223."});break}h.seiNals.push(v);break}return h},md=function(F,K,te){var ee=K,h=te.defaultSampleDuration||0,v=te.defaultSampleSize||0,P=te.trackId,z=[];return F.forEach(function(X){var ce=Tl(X),Se=ce.samples;Se.forEach(function(je){je.duration===void 0&&(je.duration=h),je.size===void 0&&(je.size=v),je.trackId=P,je.dts=ee,je.compositionTimeOffset===void 0&&(je.compositionTimeOffset=0),typeof ee=="bigint"?(je.pts=ee+Ya.BigInt(je.compositionTimeOffset),ee+=Ya.BigInt(je.duration)):(je.pts=ee+je.compositionTimeOffset,ee+=je.duration)}),z=z.concat(Se)}),z},jo=function(F,K){var te=Za(F,["moof","traf"]),ee=Za(F,["mdat"]),h={},v=[];return ee.forEach(function(P,z){var X=te[z];v.push({mdat:P,traf:X})}),v.forEach(function(P){var z=P.mdat,X=P.traf,ce=Za(X,["tfhd"]),Se=Lu(ce[0]),je=Se.trackId,bt=Za(X,["tfdt"]),wt=bt.length>0?Ca(bt[0]).baseMediaDecodeTime:0,si=Za(X,["trun"]),ki,on;K===je&&si.length>0&&(ki=md(si,wt,Se),on=Do(z,ki,je),h[je]||(h[je]={seiNals:[],logs:[]}),h[je].seiNals=h[je].seiNals.concat(on.seiNals),h[je].logs=h[je].logs.concat(on.logs))}),h},gd=function(F,K,te){var ee;if(K===null)return null;ee=jo(F,K);var h=ee[K]||{};return{seiNals:h.seiNals,logs:h.logs,timescale:te}},xo=function(){var F=!1,K,te,ee,h,v,P;this.isInitialized=function(){return F},this.init=function(z){K=new bo,F=!0,P=z?z.isPartial:!1,K.on("data",function(X){X.startTime=X.startPts/h,X.endTime=X.endPts/h,v.captions.push(X),v.captionStreams[X.stream]=!0}),K.on("log",function(X){v.logs.push(X)})},this.isNewInit=function(z,X){return z&&z.length===0||X&&typeof X=="object"&&Object.keys(X).length===0?!1:ee!==z[0]||h!==X[ee]},this.parse=function(z,X,ce){var Se;if(this.isInitialized()){if(!X||!ce)return null;if(this.isNewInit(X,ce))ee=X[0],h=ce[ee];else if(ee===null||!h)return te.push(z),null}else return null;for(;te.length>0;){var je=te.shift();this.parse(je,X,ce)}return Se=gd(z,ee,h),Se&&Se.logs&&(v.logs=v.logs.concat(Se.logs)),Se===null||!Se.seiNals?v.logs.length?{logs:v.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Se.seiNals),this.flushStream(),v)},this.pushNals=function(z){if(!this.isInitialized()||!z||z.length===0)return null;z.forEach(function(X){K.push(X)})},this.flushStream=function(){if(!this.isInitialized())return null;P?K.partialFlush():K.flush()},this.clearParsedCaptions=function(){v.captions=[],v.captionStreams={},v.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;K.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){te=[],ee=null,h=null,v?this.clearParsedCaptions():v={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},hc=xo,Sl=kn.toUnsigned,Cl=kn.toHexString,ur=Ql,ka=Us,Jl=yo,Xa=ta,Ea=Pu,fc=a.getUint64,pc,Bc,kl,mc,Fc,Du,El=ia;pc=function(F){var K={},te=ur(F,["moov","trak"]);return te.reduce(function(ee,h){var v,P,z,X,ce;return v=ur(h,["tkhd"])[0],!v||(P=v[0],z=P===0?12:20,X=Sl(v[z]<<24|v[z+1]<<16|v[z+2]<<8|v[z+3]),ce=ur(h,["mdia","mdhd"])[0],!ce)?null:(P=ce[0],z=P===0?12:20,ee[X]=Sl(ce[z]<<24|ce[z+1]<<16|ce[z+2]<<8|ce[z+3]),ee)},K)},Bc=function(F,K){var te;te=ur(K,["moof","traf"]);var ee=te.reduce(function(h,v){var P=ur(v,["tfhd"])[0],z=Sl(P[4]<<24|P[5]<<16|P[6]<<8|P[7]),X=F[z]||9e4,ce=ur(v,["tfdt"])[0],Se=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),je;ce[0]===1?je=fc(ce.subarray(4,12)):je=Se.getUint32(4);let bt;return typeof je=="bigint"?bt=je/El.BigInt(X):typeof je=="number"&&!isNaN(je)&&(bt=je/X),bt<Number.MAX_SAFE_INTEGER&&(bt=Number(bt)),bt<h&&(h=bt),h},1/0);return typeof ee=="bigint"||isFinite(ee)?ee:0},kl=function(F,K){var te=ur(K,["moof","traf"]),ee=0,h=0,v;if(te&&te.length){var P=ur(te[0],["tfhd"])[0],z=ur(te[0],["trun"])[0],X=ur(te[0],["tfdt"])[0];if(P){var ce=Jl(P);v=ce.trackId}if(X){var Se=Ea(X);ee=Se.baseMediaDecodeTime}if(z){var je=Xa(z);je.samples&&je.samples.length&&(h=je.samples[0].compositionTimeOffset||0)}}var bt=F[v]||9e4;typeof ee=="bigint"&&(h=El.BigInt(h),bt=El.BigInt(bt));var wt=(ee+h)/bt;return typeof wt=="bigint"&&wt<Number.MAX_SAFE_INTEGER&&(wt=Number(wt)),wt},mc=function(F){var K=ur(F,["moov","trak"]),te=[];return K.forEach(function(ee){var h=ur(ee,["mdia","hdlr"]),v=ur(ee,["tkhd"]);h.forEach(function(P,z){var X=ka(P.subarray(8,12)),ce=v[z],Se,je,bt;X==="vide"&&(Se=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),je=Se.getUint8(0),bt=je===0?Se.getUint32(12):Se.getUint32(20),te.push(bt))})}),te},Du=function(F){var K=F[0],te=K===0?12:20;return Sl(F[te]<<24|F[te+1]<<16|F[te+2]<<8|F[te+3])},Fc=function(F){var K=ur(F,["moov","trak"]),te=[];return K.forEach(function(ee){var h={},v=ur(ee,["tkhd"])[0],P,z;v&&(P=new DataView(v.buffer,v.byteOffset,v.byteLength),z=P.getUint8(0),h.id=z===0?P.getUint32(12):P.getUint32(20));var X=ur(ee,["mdia","hdlr"])[0];if(X){var ce=ka(X.subarray(8,12));ce==="vide"?h.type="video":ce==="soun"?h.type="audio":h.type=ce}var Se=ur(ee,["mdia","minf","stbl","stsd"])[0];if(Se){var je=Se.subarray(8);h.codec=ka(je.subarray(4,8));var bt=ur(je,[h.codec])[0],wt,si;bt&&(/^[asm]vc[1-9]$/i.test(h.codec)?(wt=bt.subarray(78),si=ka(wt.subarray(4,8)),si==="avcC"&&wt.length>11?(h.codec+=".",h.codec+=Cl(wt[9]),h.codec+=Cl(wt[10]),h.codec+=Cl(wt[11])):h.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(h.codec)?(wt=bt.subarray(28),si=ka(wt.subarray(4,8)),si==="esds"&&wt.length>20&&wt[19]!==0?(h.codec+="."+Cl(wt[19]),h.codec+="."+Cl(wt[20]>>>2&63).replace(/^0/,"")):h.codec="mp4a.40.2"):h.codec=h.codec.toLowerCase())}var ki=ur(ee,["mdia","mdhd"])[0];ki&&(h.timescale=Du(ki)),te.push(h)}),te};var $c={findBox:ur,parseType:ka,timescale:pc,startTime:Bc,compositionStartTime:kl,videoTrackIds:mc,tracks:Fc,getTimescaleFromMediaHeader:Du},wo=Ln,eu=function(F){var K=F[1]&31;return K<<=8,K|=F[2],K},tu=function(F){return!!(F[1]&64)},io=function(F){var K=0;return(F[3]&48)>>>4>1&&(K+=F[4]+1),K},iu=function(F,K){var te=eu(F);return te===0?"pat":te===K?"pmt":K?"pes":null},nu=function(F){var K=tu(F),te=4+io(F);return K&&(te+=F[te]+1),(F[te+10]&31)<<8|F[te+11]},ru=function(F){var K={},te=tu(F),ee=4+io(F);if(te&&(ee+=F[ee]+1),!!(F[ee+5]&1)){var h,v,P;h=(F[ee+1]&15)<<8|F[ee+2],v=3+h-4,P=(F[ee+10]&15)<<8|F[ee+11];for(var z=12+P;z<v;){var X=ee+z;K[(F[X+1]&31)<<8|F[X+2]]=F[X],z+=((F[X+3]&15)<<8|F[X+4])+5}return K}},na=function(F,K){var te=eu(F),ee=K[te];switch(ee){case wo.H264_STREAM_TYPE:return"video";case wo.ADTS_STREAM_TYPE:return"audio";case wo.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Ia=function(F){var K=tu(F);if(!K)return null;var te=4+io(F);if(te>=F.byteLength)return null;var ee=null,h;return h=F[te+7],h&192&&(ee={},ee.pts=(F[te+9]&14)<<27|(F[te+10]&255)<<20|(F[te+11]&254)<<12|(F[te+12]&255)<<5|(F[te+13]&254)>>>3,ee.pts*=4,ee.pts+=(F[te+13]&6)>>>1,ee.dts=ee.pts,h&64&&(ee.dts=(F[te+14]&14)<<27|(F[te+15]&255)<<20|(F[te+16]&254)<<12|(F[te+17]&255)<<5|(F[te+18]&254)>>>3,ee.dts*=4,ee.dts+=(F[te+18]&6)>>>1)),ee},To=function(F){switch(F){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Dn=function(F){for(var K=4+io(F),te=F.subarray(K),ee=0,h=0,v=!1,P;h<te.byteLength-3;h++)if(te[h+2]===1){ee=h+5;break}for(;ee<te.byteLength;)switch(te[ee]){case 0:if(te[ee-1]!==0){ee+=2;break}else if(te[ee-2]!==0){ee++;break}h+3!==ee-2&&(P=To(te[h+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(v=!0));do ee++;while(te[ee]!==1&&ee<te.length);h=ee-2,ee+=3;break;case 1:if(te[ee-1]!==0||te[ee-2]!==0){ee+=3;break}P=To(te[h+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(v=!0),h=ee-2,ee+=3;break;default:ee+=3;break}return te=te.subarray(h),ee-=h,h=0,te&&te.byteLength>3&&(P=To(te[h+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(v=!0)),v},Ru={parseType:iu,parsePat:nu,parsePmt:ru,parsePayloadUnitStartIndicator:tu,parsePesType:na,parsePesTime:Ia,videoPacketContainsKeyFrame:Dn},_d=Ln,Ts=Po.handleRollover,Qn={};Qn.ts=Ru,Qn.aac=Zl;var ra=hn.ONE_SECOND_IN_TS,rs=188,no=71,Bu=function(F,K){for(var te=0,ee=rs,h,v;ee<F.byteLength;){if(F[te]===no&&F[ee]===no){switch(h=F.subarray(te,ee),v=Qn.ts.parseType(h,K.pid),v){case"pat":K.pid=Qn.ts.parsePat(h);break;case"pmt":var P=Qn.ts.parsePmt(h);K.table=K.table||{},Object.keys(P).forEach(function(z){K.table[z]=P[z]});break}te+=rs,ee+=rs;continue}te++,ee++}},sa=function(F,K,te){for(var ee=0,h=rs,v,P,z,X,ce,Se=!1;h<=F.byteLength;){if(F[ee]===no&&(F[h]===no||h===F.byteLength)){switch(v=F.subarray(ee,h),P=Qn.ts.parseType(v,K.pid),P){case"pes":z=Qn.ts.parsePesType(v,K.table),X=Qn.ts.parsePayloadUnitStartIndicator(v),z==="audio"&&X&&(ce=Qn.ts.parsePesTime(v),ce&&(ce.type="audio",te.audio.push(ce),Se=!0));break}if(Se)break;ee+=rs,h+=rs;continue}ee++,h++}for(h=F.byteLength,ee=h-rs,Se=!1;ee>=0;){if(F[ee]===no&&(F[h]===no||h===F.byteLength)){switch(v=F.subarray(ee,h),P=Qn.ts.parseType(v,K.pid),P){case"pes":z=Qn.ts.parsePesType(v,K.table),X=Qn.ts.parsePayloadUnitStartIndicator(v),z==="audio"&&X&&(ce=Qn.ts.parsePesTime(v),ce&&(ce.type="audio",te.audio.push(ce),Se=!0));break}if(Se)break;ee-=rs,h-=rs;continue}ee--,h--}},oa=function(F,K,te){for(var ee=0,h=rs,v,P,z,X,ce,Se,je,bt,wt=!1,si={data:[],size:0};h<F.byteLength;){if(F[ee]===no&&F[h]===no){switch(v=F.subarray(ee,h),P=Qn.ts.parseType(v,K.pid),P){case"pes":if(z=Qn.ts.parsePesType(v,K.table),X=Qn.ts.parsePayloadUnitStartIndicator(v),z==="video"&&(X&&!wt&&(ce=Qn.ts.parsePesTime(v),ce&&(ce.type="video",te.video.push(ce),wt=!0)),!te.firstKeyFrame)){if(X&&si.size!==0){for(Se=new Uint8Array(si.size),je=0;si.data.length;)bt=si.data.shift(),Se.set(bt,je),je+=bt.byteLength;if(Qn.ts.videoPacketContainsKeyFrame(Se)){var ki=Qn.ts.parsePesTime(Se);ki?(te.firstKeyFrame=ki,te.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}si.size=0}si.data.push(v),si.size+=v.byteLength}break}if(wt&&te.firstKeyFrame)break;ee+=rs,h+=rs;continue}ee++,h++}for(h=F.byteLength,ee=h-rs,wt=!1;ee>=0;){if(F[ee]===no&&F[h]===no){switch(v=F.subarray(ee,h),P=Qn.ts.parseType(v,K.pid),P){case"pes":z=Qn.ts.parsePesType(v,K.table),X=Qn.ts.parsePayloadUnitStartIndicator(v),z==="video"&&X&&(ce=Qn.ts.parsePesTime(v),ce&&(ce.type="video",te.video.push(ce),wt=!0));break}if(wt)break;ee-=rs,h-=rs;continue}ee--,h--}},Il=function(F,K){if(F.audio&&F.audio.length){var te=K;(typeof te>"u"||isNaN(te))&&(te=F.audio[0].dts),F.audio.forEach(function(v){v.dts=Ts(v.dts,te),v.pts=Ts(v.pts,te),v.dtsTime=v.dts/ra,v.ptsTime=v.pts/ra})}if(F.video&&F.video.length){var ee=K;if((typeof ee>"u"||isNaN(ee))&&(ee=F.video[0].dts),F.video.forEach(function(v){v.dts=Ts(v.dts,ee),v.pts=Ts(v.pts,ee),v.dtsTime=v.dts/ra,v.ptsTime=v.pts/ra}),F.firstKeyFrame){var h=F.firstKeyFrame;h.dts=Ts(h.dts,ee),h.pts=Ts(h.pts,ee),h.dtsTime=h.dts/ra,h.ptsTime=h.pts/ra}}},gc=function(F){for(var K=!1,te=0,ee=null,h=null,v=0,P=0,z;F.length-P>=3;){var X=Qn.aac.parseType(F,P);switch(X){case"timed-metadata":if(F.length-P<10){K=!0;break}if(v=Qn.aac.parseId3TagSize(F,P),v>F.length){K=!0;break}h===null&&(z=F.subarray(P,P+v),h=Qn.aac.parseAacTimestamp(z)),P+=v;break;case"audio":if(F.length-P<7){K=!0;break}if(v=Qn.aac.parseAdtsSize(F,P),v>F.length){K=!0;break}ee===null&&(z=F.subarray(P,P+v),ee=Qn.aac.parseSampleRate(z)),te++,P+=v;break;default:P++;break}if(K)return null}if(ee===null||h===null)return null;var ce=ra/ee,Se={audio:[{type:"audio",dts:h,pts:h},{type:"audio",dts:h+te*1024*ce,pts:h+te*1024*ce}]};return Se},Pa=function(F){var K={pid:null,table:null},te={};Bu(F,K);for(var ee in K.table)if(K.table.hasOwnProperty(ee)){var h=K.table[ee];switch(h){case _d.H264_STREAM_TYPE:te.video=[],oa(F,K,te),te.video.length===0&&delete te.video;break;case _d.ADTS_STREAM_TYPE:te.audio=[],sa(F,K,te),te.audio.length===0&&delete te.audio;break}}return te},Ka=function(F,K){var te=Qn.aac.isLikelyAacData(F),ee;return te?ee=gc(F):ee=Pa(F),!ee||!ee.audio&&!ee.video?null:(Il(ee,K),ee)},su={inspect:Ka,parseAudioPes_:sa};const Qa=function(F,K){K.on("data",function(te){const ee=te.initSegment;te.initSegment={data:ee.buffer,byteOffset:ee.byteOffset,byteLength:ee.byteLength};const h=te.data;te.data=h.buffer,F.postMessage({action:"data",segment:te,byteOffset:h.byteOffset,byteLength:h.byteLength},[te.data])}),K.on("done",function(te){F.postMessage({action:"done"})}),K.on("gopInfo",function(te){F.postMessage({action:"gopInfo",gopInfo:te})}),K.on("videoSegmentTimingInfo",function(te){const ee={start:{decode:hn.videoTsToSeconds(te.start.dts),presentation:hn.videoTsToSeconds(te.start.pts)},end:{decode:hn.videoTsToSeconds(te.end.dts),presentation:hn.videoTsToSeconds(te.end.pts)},baseMediaDecodeTime:hn.videoTsToSeconds(te.baseMediaDecodeTime)};te.prependedContentDuration&&(ee.prependedContentDuration=hn.videoTsToSeconds(te.prependedContentDuration)),F.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:ee})}),K.on("audioSegmentTimingInfo",function(te){const ee={start:{decode:hn.videoTsToSeconds(te.start.dts),presentation:hn.videoTsToSeconds(te.start.pts)},end:{decode:hn.videoTsToSeconds(te.end.dts),presentation:hn.videoTsToSeconds(te.end.pts)},baseMediaDecodeTime:hn.videoTsToSeconds(te.baseMediaDecodeTime)};te.prependedContentDuration&&(ee.prependedContentDuration=hn.videoTsToSeconds(te.prependedContentDuration)),F.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:ee})}),K.on("id3Frame",function(te){F.postMessage({action:"id3Frame",id3Frame:te})}),K.on("caption",function(te){F.postMessage({action:"caption",caption:te})}),K.on("trackinfo",function(te){F.postMessage({action:"trackinfo",trackInfo:te})}),K.on("audioTimingInfo",function(te){F.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:hn.videoTsToSeconds(te.start),end:hn.videoTsToSeconds(te.end)}})}),K.on("videoTimingInfo",function(te){F.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:hn.videoTsToSeconds(te.start),end:hn.videoTsToSeconds(te.end)}})}),K.on("log",function(te){F.postMessage({action:"log",log:te})})};class Li{constructor(K,te){this.options=te||{},this.self=K,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ga.Transmuxer(this.options),Qa(this.self,this.transmuxer)}pushMp4Captions(K){this.captionParser||(this.captionParser=new hc,this.captionParser.init());const te=new Uint8Array(K.data,K.byteOffset,K.byteLength),ee=this.captionParser.parse(te,K.trackIds,K.timescales);this.self.postMessage({action:"mp4Captions",captions:ee&&ee.captions||[],logs:ee&&ee.logs||[],data:te.buffer},[te.buffer])}probeMp4StartTime({timescales:K,data:te}){const ee=$c.startTime(K,te);this.self.postMessage({action:"probeMp4StartTime",startTime:ee,data:te},[te.buffer])}probeMp4Tracks({data:K}){const te=$c.tracks(K);this.self.postMessage({action:"probeMp4Tracks",tracks:te,data:K},[K.buffer])}probeTs({data:K,baseStartTime:te}){const ee=typeof te=="number"&&!isNaN(te)?te*hn.ONE_SECOND_IN_TS:void 0,h=su.inspect(K,ee);let v=null;h&&(v={hasVideo:h.video&&h.video.length===2||!1,hasAudio:h.audio&&h.audio.length===2||!1},v.hasVideo&&(v.videoStart=h.video[0].ptsTime),v.hasAudio&&(v.audioStart=h.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:v,data:K},[K.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(K){const te=new Uint8Array(K.data,K.byteOffset,K.byteLength);this.transmuxer.push(te)}reset(){this.transmuxer.reset()}setTimestampOffset(K){const te=K.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(hn.secondsToVideoTs(te)))}setAudioAppendStart(K){this.transmuxer.setAudioAppendStart(Math.ceil(hn.secondsToVideoTs(K.appendStart)))}setRemux(K){this.transmuxer.setRemux(K.remux)}flush(K){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(K){this.transmuxer.alignGopsWith(K.gopsToAlignWith.slice())}}self.onmessage=function(F){if(F.data.action==="init"&&F.data.options){this.messageHandlers=new Li(self,F.data.options);return}this.messageHandlers||(this.messageHandlers=new Li(self)),F.data&&F.data.action&&F.data.action!=="init"&&this.messageHandlers[F.data.action]&&this.messageHandlers[F.data.action](F.data)}}));var eY=tB(JZ);const tY=(t,e,i)=>{const{type:n,initSegment:r,captions:a,captionStreams:c,metadata:s,videoFrameDtsTime:p,videoFramePtsTime:_}=t.data.segment;e.buffer.push({captions:a,captionStreams:c,metadata:s});const b=t.data.segment.boxes||{data:t.data.segment.data},S={type:n,data:new Uint8Array(b.data,b.data.byteOffset,b.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof p<"u"&&(S.videoFrameDtsTime=p),typeof _<"u"&&(S.videoFramePtsTime=_),i(S)},iY=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},nY=(t,e)=>{e.gopInfo=t.data.gopInfo},rB=t=>{const{transmuxer:e,bytes:i,audioAppendStart:n,gopsToAlignWith:r,remux:a,onData:c,onTrackInfo:s,onAudioTimingInfo:p,onVideoTimingInfo:_,onVideoSegmentTimingInfo:b,onAudioSegmentTimingInfo:S,onId3:E,onCaptions:I,onDone:R,onEndedTimeline:V,onTransmuxerLog:q,isEndOfTimeline:U}=t,H={buffer:[]};let Z=U;const ne=ie=>{e.currentTransmux===t&&(ie.data.action==="data"&&tY(ie,H,c),ie.data.action==="trackinfo"&&s(ie.data.trackInfo),ie.data.action==="gopInfo"&&nY(ie,H),ie.data.action==="audioTimingInfo"&&p(ie.data.audioTimingInfo),ie.data.action==="videoTimingInfo"&&_(ie.data.videoTimingInfo),ie.data.action==="videoSegmentTimingInfo"&&b(ie.data.videoSegmentTimingInfo),ie.data.action==="audioSegmentTimingInfo"&&S(ie.data.audioSegmentTimingInfo),ie.data.action==="id3Frame"&&E([ie.data.id3Frame],ie.data.id3Frame.dispatchType),ie.data.action==="caption"&&I(ie.data.caption),ie.data.action==="endedtimeline"&&(Z=!1,V()),ie.data.action==="log"&&q(ie.data.log),ie.data.type==="transmuxed"&&(Z||(e.onmessage=null,iY({transmuxedData:H,callback:R}),sB(e))))};if(e.onmessage=ne,n&&e.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof a<"u"&&e.postMessage({action:"setRemux",remux:a}),i.byteLength){const ie=i instanceof ArrayBuffer?i:i.buffer,oe=i instanceof ArrayBuffer?0:i.byteOffset;e.postMessage({action:"push",data:ie,byteOffset:oe,byteLength:i.byteLength},[ie])}U&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},sB=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():rB(t.currentTransmux))},PM=(t,e)=>{t.postMessage({action:e}),sB(t)},oB=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,PM(e,t);return}e.transmuxQueue.push(PM.bind(null,e,t))},rY=t=>{oB("reset",t)},sY=t=>{oB("endTimeline",t)},aB=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,rB(t);return}t.transmuxer.transmuxQueue.push(t)},oY=t=>{const e=new eY;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e};var FT={reset:rY,endTimeline:sY,transmux:aB,createTransmuxer:oY};const gb=function(t){const e=t.transmuxer,i=t.endAction||t.action,n=t.callback,r=Ph({},t,{endAction:null,transmuxer:null,callback:null}),a=c=>{c.data.action===i&&(e.removeEventListener("message",a),c.data.data&&(c.data.data=new Uint8Array(c.data.data,t.byteOffset||0,t.byteLength||c.data.data.byteLength),t.data&&(t.data=c.data.data)),n(c.data))};if(e.addEventListener("message",a),t.data){const c=t.data instanceof ArrayBuffer;r.byteOffset=c?0:t.data.byteOffset,r.byteLength=t.data.byteLength;const s=[c?t.data:t.data.buffer];e.postMessage(r,s)}else e.postMessage(r)},Bd={FAILURE:2,TIMEOUT:-101,ABORTED:-102},iS=t=>{t.forEach(e=>{e.abort()})},aY=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),lY=t=>{const e=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},Sk=(t,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Bd.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Bd.ABORTED,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Bd.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Bd.FAILURE,xhr:e}:null,AM=(t,e,i)=>(n,r)=>{const a=r.response,c=Sk(n,r);if(c)return i(c,t);if(a.byteLength!==16)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Bd.FAILURE,xhr:r},t);const s=new DataView(a),p=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);for(let _=0;_<e.length;_++)e[_].bytes=p;return i(null,t)},lB=(t,e)=>{const i=UC(t.map.bytes);if(i!=="mp4"){const n=t.map.resolvedUri||t.map.uri;return e({internal:!0,message:`Found unsupported ${i||"unknown"} container for initialization segment at URL: ${n}`,code:Bd.FAILURE})}gb({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:n,data:r})=>(t.map.bytes=r,n.forEach(function(a){t.map.tracks=t.map.tracks||{},!t.map.tracks[a.type]&&(t.map.tracks[a.type]=a,typeof a.id=="number"&&a.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[a.id]=a.timescale))}),e(null))})},uY=({segment:t,finishProcessingFn:e})=>(i,n)=>{const r=Sk(i,n);if(r)return e(r,t);const a=new Uint8Array(n.response);if(t.map.key)return t.map.encryptedBytes=a,e(null,t);t.map.bytes=a,lB(t,function(c){if(c)return c.xhr=n,c.status=n.status,e(c,t);e(null,t)})},cY=({segment:t,finishProcessingFn:e,responseType:i})=>(n,r)=>{const a=Sk(n,r);if(a)return e(a,t);const c=i==="arraybuffer"||!r.responseText?r.response:KZ(r.responseText.substring(t.lastReachedChar||0));return t.stats=aY(r),t.key?t.encryptedBytes=new Uint8Array(c):t.bytes=new Uint8Array(c),e(null,t)},dY=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})=>{const I=t.map&&t.map.tracks||{},R=!!(I.audio&&I.video);let V=n.bind(null,t,"audio","start");const q=n.bind(null,t,"audio","end");let U=n.bind(null,t,"video","start");const H=n.bind(null,t,"video","end"),Z=()=>aB({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:R,onData:ne=>{ne.type=ne.type==="combined"?"video":ne.type,b(t,ne)},onTrackInfo:ne=>{i&&(R&&(ne.isMuxed=!0),i(t,ne))},onAudioTimingInfo:ne=>{V&&typeof ne.start<"u"&&(V(ne.start),V=null),q&&typeof ne.end<"u"&&q(ne.end)},onVideoTimingInfo:ne=>{U&&typeof ne.start<"u"&&(U(ne.start),U=null),H&&typeof ne.end<"u"&&H(ne.end)},onVideoSegmentTimingInfo:ne=>{r(ne)},onAudioSegmentTimingInfo:ne=>{a(ne)},onId3:(ne,ie)=>{c(t,ne,ie)},onCaptions:ne=>{s(t,[ne])},isEndOfTimeline:p,onEndedTimeline:()=>{_()},onTransmuxerLog:E,onDone:ne=>{S&&(ne.type=ne.type==="combined"?"video":ne.type,S(null,t,ne))}});gb({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:ne=>{t.bytes=e=ne.data;const ie=ne.result;ie&&(i(t,{hasAudio:ie.hasAudio,hasVideo:ie.hasVideo,isMuxed:R}),i=null,ie.hasAudio&&!R&&V(ie.audioStart),ie.hasVideo&&U(ie.videoStart),V=null,U=null),Z()}})},uB=({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})=>{let I=new Uint8Array(e);if(UW(I)){t.isFmp4=!0;const{tracks:R}=t.map,V={isFmp4:!0,hasVideo:!!R.video,hasAudio:!!R.audio};R.audio&&R.audio.codec&&R.audio.codec!=="enca"&&(V.audioCodec=R.audio.codec),R.video&&R.video.codec&&R.video.codec!=="encv"&&(V.videoCodec=R.video.codec),R.video&&R.audio&&(V.isMuxed=!0),i(t,V);const q=U=>{b(t,{data:I,type:V.hasAudio&&!V.isMuxed?"audio":"video"}),U&&U.length&&s(t,U),S(null,t,{})};gb({action:"probeMp4StartTime",timescales:t.map.timescales,data:I,transmuxer:t.transmuxer,callback:({data:U,startTime:H})=>{if(e=U.buffer,t.bytes=I=U,V.hasAudio&&!V.isMuxed&&n(t,"audio","start",H),V.hasVideo&&n(t,"video","start",H),!R.video||!U.byteLength||!t.transmuxer){q();return}gb({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:I,timescales:t.map.timescales,trackIds:[R.video.id],callback:Z=>{e=Z.data.buffer,t.bytes=I=Z.data,Z.logs.forEach(function(ne){E(hs(ne,{stream:"mp4CaptionParser"}))}),q(Z.captions)}})}});return}if(!t.transmuxer){S(null,t,{});return}if(typeof t.container>"u"&&(t.container=UC(I)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),S(null,t,{});return}dY({segment:t,bytes:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})},cB=function({id:t,key:e,encryptedBytes:i,decryptionWorker:n},r){const a=s=>{if(s.data.source===t){n.removeEventListener("message",a);const p=s.data.decrypted;r(new Uint8Array(p.bytes,p.byteOffset,p.byteLength))}};n.addEventListener("message",a);let c;e.bytes.slice?c=e.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(e.bytes)),n.postMessage(YR({source:t,encrypted:i,key:c,iv:e.iv}),[i.buffer,c.buffer])},hY=({decryptionWorker:t,segment:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})=>{cB({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t},I=>{e.bytes=I,uB({segment:e,bytes:e.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})})},fY=({activeXhrs:t,decryptionWorker:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})=>{let I=0,R=!1;return(V,q)=>{if(!R){if(V)return R=!0,iS(t),S(V,q);if(I+=1,I===t.length){const U=function(){if(q.encryptedBytes)return hY({decryptionWorker:e,segment:q,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E});uB({segment:q,bytes:q.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b,doneFn:S,onTransmuxerLog:E})};if(q.endOfAllRequests=Date.now(),q.map&&q.map.encryptedBytes&&!q.map.bytes)return cB({decryptionWorker:e,id:q.requestId+"-init",encryptedBytes:q.map.encryptedBytes,key:q.map.key},H=>{q.map.bytes=H,lB(q,Z=>{if(Z)return iS(t),S(Z,q);U()})});U()}}}},pY=({loadendState:t,abortFn:e})=>i=>{i.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},mY=({segment:t,progressFn:e,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:c,captionsFn:s,isEndOfTimeline:p,endedTimelineFn:_,dataFn:b})=>S=>{if(!S.target.aborted)return t.stats=hs(t.stats,lY(S)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(S,t)},gY=({xhr:t,xhrOptions:e,decryptionWorker:i,segment:n,abortFn:r,progressFn:a,trackInfoFn:c,timingInfoFn:s,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:S,isEndOfTimeline:E,endedTimelineFn:I,dataFn:R,doneFn:V,onTransmuxerLog:q})=>{const U=[],H=fY({activeXhrs:U,decryptionWorker:i,trackInfoFn:c,timingInfoFn:s,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:S,isEndOfTimeline:E,endedTimelineFn:I,dataFn:R,doneFn:V,onTransmuxerLog:q});if(n.key&&!n.key.bytes){const pe=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&pe.push(n.map.key);const de=hs(e,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),fe=AM(n,pe,H),ge=t(de,fe);U.push(ge)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){const we=hs(e,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),Ie=AM(n,[n.map.key],H),Oe=t(we,Ie);U.push(Oe)}const de=hs(e,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:eS(n.map)}),fe=uY({segment:n,finishProcessingFn:H}),ge=t(de,fe);U.push(ge)}const Z=hs(e,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:eS(n)}),ne=cY({segment:n,finishProcessingFn:H,responseType:Z.responseType}),ie=t(Z,ne);ie.addEventListener("progress",mY({segment:n,progressFn:a,trackInfoFn:c,timingInfoFn:s,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:S,isEndOfTimeline:E,endedTimelineFn:I,dataFn:R})),U.push(ie);const oe={};return U.forEach(pe=>{pe.addEventListener("loadend",pY({loadendState:oe,abortFn:r}))}),()=>iS(U)},_Y=ld("CodecUtils"),vY=function(t){const e=t.attributes||{};if(e.CODECS)return Md(e.CODECS)},dB=(t,e)=>{const i=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&i.AUDIO&&t.mediaGroups.AUDIO[i.AUDIO]},yY=(t,e)=>{if(!dB(t,e))return!0;const i=e.attributes||{},n=t.mediaGroups.AUDIO[i.AUDIO];for(const r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1},_b=function(t){const e={};return t.forEach(({mediaType:i,type:n,details:r})=>{e[i]=e[i]||[],e[i].push(P4(`${n}${r}`))}),Object.keys(e).forEach(function(i){if(e[i].length>1){_Y(`multiple ${i} codecs found as attributes: ${e[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[i]=null;return}e[i]=e[i][0]}),e},MM=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},Ov=function(t,e){const i=e.attributes||{},n=_b(vY(e)||[]);if(dB(t,e)&&!n.audio&&!yY(t,e)){const r=_b(HH(t,i.AUDIO)||[]);r.audio&&(n.audio=r.audio)}return n},a1=ld("PlaylistSelector"),OM=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},vb=function(t,e){if(!t)return"";const i=yt.getComputedStyle(t);return i?i[e]:""},lg=function(t,e){const i=t.slice();t.sort(function(n,r){const a=e(n,r);return a===0?i.indexOf(n)-i.indexOf(r):a})},Ck=function(t,e){let i,n;return t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||yt.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||yt.Number.MAX_VALUE,i-n},bY=function(t,e){let i,n;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||yt.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||yt.Number.MAX_VALUE,i===n&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n};let hB=function(t,e,i,n,r,a){if(!t)return;const c={bandwidth:e,width:i,height:n,limitRenditionByPlayerDimensions:r};let s=t.playlists;_u.isAudioOnly(t)&&(s=a.getAudioTrackPlaylists_(),c.audioOnly=!0);let p=s.map(ie=>{let oe;const pe=ie.attributes&&ie.attributes.RESOLUTION&&ie.attributes.RESOLUTION.width,de=ie.attributes&&ie.attributes.RESOLUTION&&ie.attributes.RESOLUTION.height;return oe=ie.attributes&&ie.attributes.BANDWIDTH,oe=oe||yt.Number.MAX_VALUE,{bandwidth:oe,width:pe,height:de,playlist:ie}});lg(p,(ie,oe)=>ie.bandwidth-oe.bandwidth),p=p.filter(ie=>!_u.isIncompatible(ie.playlist));let _=p.filter(ie=>_u.isEnabled(ie.playlist));_.length||(_=p.filter(ie=>!_u.isDisabled(ie.playlist)));const b=_.filter(ie=>ie.bandwidth*pa.BANDWIDTH_VARIANCE<e);let S=b[b.length-1];const E=b.filter(ie=>ie.bandwidth===S.bandwidth)[0];if(r===!1){const ie=E||_[0]||p[0];if(ie&&ie.playlist){let oe="sortedPlaylistReps";return E&&(oe="bandwidthBestRep"),_[0]&&(oe="enabledPlaylistReps"),a1(`choosing ${OM(ie)} using ${oe} with options`,c),ie.playlist}return a1("could not choose a playlist with options",c),null}const I=b.filter(ie=>ie.width&&ie.height);lg(I,(ie,oe)=>ie.width-oe.width);const R=I.filter(ie=>ie.width===i&&ie.height===n);S=R[R.length-1];const V=R.filter(ie=>ie.bandwidth===S.bandwidth)[0];let q,U,H;V||(q=I.filter(ie=>ie.width>i||ie.height>n),U=q.filter(ie=>ie.width===q[0].width&&ie.height===q[0].height),S=U[U.length-1],H=U.filter(ie=>ie.bandwidth===S.bandwidth)[0]);let Z;if(a.leastPixelDiffSelector){const ie=I.map(oe=>(oe.pixelDiff=Math.abs(oe.width-i)+Math.abs(oe.height-n),oe));lg(ie,(oe,pe)=>oe.pixelDiff===pe.pixelDiff?pe.bandwidth-oe.bandwidth:oe.pixelDiff-pe.pixelDiff),Z=ie[0]}const ne=Z||H||V||E||_[0]||p[0];if(ne&&ne.playlist){let ie="sortedPlaylistReps";return Z?ie="leastPixelDiffRep":H?ie="resolutionPlusOneRep":V?ie="resolutionBestRep":E?ie="bandwidthBestRep":_[0]&&(ie="enabledPlaylistReps"),a1(`choosing ${OM(ne)} using ${ie} with options`,c),ne.playlist}return a1("could not choose a playlist with options",c),null};const LM=function(){const t=this.useDevicePixelRatio&&yt.devicePixelRatio||1;return hB(this.playlists.main,this.systemBandwidth,parseInt(vb(this.tech_.el(),"width"),10)*t,parseInt(vb(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},xY=function(t){let e=-1,i=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const n=this.useDevicePixelRatio&&yt.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(e=t*this.systemBandwidth+(1-t)*e,i=this.systemBandwidth),hB(this.playlists.main,e,parseInt(vb(this.tech_.el(),"width"),10)*n,parseInt(vb(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},wY=function(t){const{main:e,currentTime:i,bandwidth:n,duration:r,segmentDuration:a,timeUntilRebuffer:c,currentTimeline:s,syncController:p}=t,_=e.playlists.filter(R=>!_u.isIncompatible(R));let b=_.filter(_u.isEnabled);b.length||(b=_.filter(R=>!_u.isDisabled(R)));const E=b.filter(_u.hasAttribute.bind(null,"BANDWIDTH")).map(R=>{const q=p.getSyncPoint(R,r,s,i)?1:2,H=_u.estimateSegmentRequestTime(a,n,R)*q-c;return{playlist:R,rebufferingImpact:H}}),I=E.filter(R=>R.rebufferingImpact<=0);return lg(I,(R,V)=>Ck(V.playlist,R.playlist)),I.length?I[0]:(lg(E,(R,V)=>R.rebufferingImpact-V.rebufferingImpact),E[0]||null)},TY=function(){const t=this.playlists.main.playlists.filter(_u.isEnabled);return lg(t,(i,n)=>Ck(i,n)),t.filter(i=>!!Ov(this.playlists.main,i).video)[0]||null},SY=t=>{let e=0,i;return t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach(n=>{i.set(n,e),e+=n.byteLength})),i},CY=function(t,e,i){if(!t[i]){e.trigger({type:"usage",name:"vhs-608"});let n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);const r=e.textTracks().getTrackById(n);if(r)t[i]=r;else{const a=e.options_.vhs&&e.options_.vhs.captionServices||{};let c=i,s=i,p=!1;const _=a[n];_&&(c=_.label,s=_.language,p=_.default),t[i]=e.addRemoteTextTrack({kind:"captions",id:n,default:p,label:c,language:s},!1).track}}},kY=function({inbandTextTracks:t,captionArray:e,timestampOffset:i}){if(!e)return;const n=yt.WebKitDataCue||yt.VTTCue;e.forEach(r=>{const a=r.stream;t[a].addCue(new n(r.startTime+i,r.endTime+i,r.text))})},EY=function(t){Object.defineProperties(t.frame,{id:{get(){return ei.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return ei.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return ei.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},IY=({inbandTextTracks:t,metadataArray:e,timestampOffset:i,videoDuration:n})=>{if(!e)return;const r=yt.WebKitDataCue||yt.VTTCue,a=t.metadataTrack_;if(!a||(e.forEach(b=>{const S=b.cueTime+i;typeof S!="number"||yt.isNaN(S)||S<0||!(S<1/0)||b.frames.forEach(E=>{const I=new r(S,S,E.value||E.url||E.data||"");I.frame=E,I.value=E,EY(I),a.addCue(I)})}),!a.cues||!a.cues.length))return;const c=a.cues,s=[];for(let b=0;b<c.length;b++)c[b]&&s.push(c[b]);const p=s.reduce((b,S)=>{const E=b[S.startTime]||[];return E.push(S),b[S.startTime]=E,b},{}),_=Object.keys(p).sort((b,S)=>Number(b)-Number(S));_.forEach((b,S)=>{const E=p[b],I=Number(_[S+1])||n;E.forEach(R=>{R.endTime=I})})},PY=(t,e,i)=>{t.metadataTrack_||(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)},gv=function(t,e,i){let n,r;if(i&&i.cues)for(n=i.cues.length;n--;)r=i.cues[n],r.startTime>=t&&r.endTime<=e&&i.removeCue(r)},AY=function(t){const e=t.cues;if(e)for(let i=0;i<e.length;i++){const n=[];let r=0;for(let a=0;a<e.length;a++)e[i].startTime===e[a].startTime&&e[i].endTime===e[a].endTime&&e[i].text===e[a].text&&(r++,r>1&&n.push(e[a]));n.length&&n.forEach(a=>t.removeCue(a))}},MY=(t,e,i)=>{if(typeof e>"u"||e===null||!t.length)return[];const n=Math.ceil((e-i+3)*tb.ONE_SECOND_IN_TS);let r;for(r=0;r<t.length&&!(t[r].pts>n);r++);return t.slice(r)},OY=(t,e,i)=>{if(!e.length)return t;if(i)return e.slice();const n=e[0].pts;let r=0;for(r;r<t.length&&!(t[r].pts>=n);r++);return t.slice(0,r).concat(e)},LY=(t,e,i,n)=>{const r=Math.ceil((e-n)*tb.ONE_SECOND_IN_TS),a=Math.ceil((i-n)*tb.ONE_SECOND_IN_TS),c=t.slice();let s=t.length;for(;s--&&!(t[s].pts<=a););if(s===-1)return c;let p=s+1;for(;p--&&!(t[p].pts<=r););return p=Math.max(p,0),c.splice(p,s-p+1),c},DY=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const i=Object.keys(t).sort(),n=Object.keys(e).sort();if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++){const a=i[r];if(a!==n[r]||t[a]!==e[a])return!1}return!0},fB=22,RY=function(t,e,i){e=e||[];const n=[];let r=0;for(let a=0;a<e.length;a++){const c=e[a];if(t===c.timeline&&(n.push(a),r+=c.duration,r>i))return a}return n.length===0?0:n[n.length-1]},rv=1,BY=500,DM=t=>typeof t=="number"&&isFinite(t),l1=1/60,FY=(t,e,i)=>t!=="main"||!e||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,$Y=(t,e,i)=>{let n=e-pa.BACK_BUFFER_LENGTH;t.length&&(n=Math.max(n,t.start(0)));const r=e-i;return Math.min(r,n)},Nm=t=>{const{startOfSegment:e,duration:i,segment:n,part:r,playlist:{mediaSequence:a,id:c,segments:s=[]},mediaIndex:p,partIndex:_,timeline:b}=t,S=s.length-1;let E="mediaIndex/partIndex increment";t.getMediaInfoForTime?E=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(E="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(E+=` with independent ${t.independent}`);const I=typeof _=="number",R=t.segment.uri?"segment":"pre-segment",V=I?RR({preloadSegment:n})-1:0;return`${R} [${a+p}/${a+S}]`+(I?` part [${_}/${V}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(I?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${i}] timeline [${b}] selected by [${E}] playlist [${c}]`},RM=t=>`${t}TimingInfo`,NY=({segmentTimeline:t,currentTimeline:e,startOfSegment:i,buffered:n,overrideCheck:r})=>!r&&t===e?null:t<e?i:n.length?n.end(n.length-1):i,BM=({timelineChangeController:t,currentTimeline:e,segmentTimeline:i,loaderType:n,audioDisabled:r})=>{if(e===i)return!1;if(n==="audio"){const a=t.lastTimelineChange({type:"main"});return!a||a.to!==i}if(n==="main"&&r){const a=t.pendingTimelineChange({type:"audio"});return!(a&&a.to===i)}return!1},zY=t=>{let e=0;return["video","audio"].forEach(function(i){const n=t[`${i}TimingInfo`];if(!n)return;const{start:r,end:a}=n;let c;typeof r=="bigint"||typeof a=="bigint"?c=yt.BigInt(a)-yt.BigInt(r):typeof r=="number"&&typeof a=="number"&&(c=a-r),typeof c<"u"&&c>e&&(e=c)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},FM=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+Df:!1,VY=(t,e)=>{if(e!=="hls")return null;const i=zY({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!i)return null;const n=t.playlist.targetDuration,r=FM({segmentDuration:i,maxDuration:n*2}),a=FM({segmentDuration:i,maxDuration:n}),c=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${i} when the reported duration is ${t.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||a?{severity:r?"warn":"info",message:c}:null};class nS extends ei.EventTarget{constructor(e,i={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=ei.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=ld(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(n){n!==this.state_&&(this.logger_(`${this.state_} -> ${n}`),this.state_=n,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return FT.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&yt.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,yt.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&FT.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return al();if(this.loaderType_==="main"){const{hasAudio:i,hasVideo:n,isMuxed:r}=e;if(n&&i&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,i=!1){if(!e)return null;const n=mb(e);let r=this.initSegments_[n];return i&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,i=!1){if(!e)return null;const n=XR(e);let r=this.keyCache_[n];this.cacheEncryptionKeys_&&i&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,i={}){if(!e)return;const n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let a=null;if(n&&(n.id?a=n.id:n.uri&&(a=n.uri)),this.logger_(`playlist update [${a} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const c=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${c}]`),this.mediaIndex!==null)if(this.mediaIndex-=c,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){const p=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=p}}r&&(r.mediaIndex-=c,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(yt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&FT.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,i,n=()=>{},r=!1){if(i===1/0&&(i=this.duration_()),i<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let a=1;const c=()=>{a--,a===0&&n()};(r||!this.audioDisabled_)&&(a++,this.sourceUpdater_.removeAudio(e,i,c)),(r||this.loaderType_==="main")&&(this.gopBuffer_=LY(this.gopBuffer_,e,i,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,i,c));for(const s in this.inbandTextTracks_)gv(e,i,this.inbandTextTracks_[s]);gv(e,i,this.segmentMetadataTrack_),c()}monitorBuffer_(){this.checkBufferTimeout_&&yt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=yt.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&yt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=yt.setTimeout(this.monitorBufferTick_.bind(this),BY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,i=this.playlist_,n=this.partIndex){if(!i||!this.mediaSource_)return!1;const r=typeof e=="number"&&i.segments[e],a=e+1===i.segments.length,c=!r||!r.parts||n+1===r.parts.length;return i.endList&&this.mediaSource_.readyState==="open"&&a&&c}chooseNextRequest_(){const e=this.buffered_(),i=CM(e)||0,n=yk(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,a=n>=this.goalBufferLength_(),c=this.playlist_.segments;if(!c.length||r||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(s.isSyncRequest)s.mediaIndex=RY(this.currentTimeline_,c,i);else if(this.mediaIndex!==null){const S=c[this.mediaIndex],E=typeof this.partIndex=="number"?this.partIndex:-1;s.startOfSegment=S.end?S.end:i,S.parts&&S.parts[E+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=E+1):s.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:S,startTime:E,partIndex:I}=_u.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?i:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});s.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${i}`:`currentTime ${this.currentTime_()}`,s.mediaIndex=S,s.startOfSegment=E,s.partIndex=I}const p=c[s.mediaIndex];let _=p&&typeof s.partIndex=="number"&&p.parts&&p.parts[s.partIndex];if(!p||typeof s.partIndex=="number"&&!_)return null;if(typeof s.partIndex!="number"&&p.parts&&(s.partIndex=0,_=p.parts[0]),!n&&_&&!_.independent)if(s.partIndex===0){const S=c[s.mediaIndex-1],E=S.parts&&S.parts.length&&S.parts[S.parts.length-1];E&&E.independent&&(s.mediaIndex-=1,s.partIndex=S.parts.length-1,s.independent="previous segment")}else p.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");const b=this.mediaSource_&&this.mediaSource_.readyState==="ended";return s.mediaIndex>=c.length-1&&b&&!this.seeking_()?null:this.generateSegmentInfo_(s)}generateSegmentInfo_(e){const{independent:i,playlist:n,mediaIndex:r,startOfSegment:a,isSyncRequest:c,partIndex:s,forceTimestampOffset:p,getMediaInfoForTime:_}=e,b=n.segments[r],S=typeof s=="number"&&b.parts[s],E={requestId:"segment-loader-"+Math.random(),uri:S&&S.resolvedUri||b.resolvedUri,mediaIndex:r,partIndex:S?s:null,isSyncRequest:c,startOfSegment:a,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:b.timeline,duration:S&&S.duration||b.duration,segment:b,part:S,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:_,independent:i},I=typeof p<"u"?p:this.isPendingTimestampOffset_;E.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:b.timeline,currentTimeline:this.currentTimeline_,startOfSegment:a,buffered:this.buffered_(),overrideCheck:I});const R=CM(this.sourceUpdater_.audioBuffered());return typeof R=="number"&&(E.audioAppendStart=R-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(E.gopsToAlignWith=MY(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),E}timestampOffsetForSegment_(e){return NY(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,a=_u.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),c=fZ(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(a<=c)return;const s=wY({main:this.vhs_.playlists.main,currentTime:i,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:c,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!s)return;const _=a-c-s.rebufferingImpact;let b=.5;c<=Df&&(b=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||_<b)&&(this.bandwidth=s.playlist.attributes.BANDWIDTH*pa.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Nm(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(e,i){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(i=i||{},DY(this.currentMediaInfo_,i)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,i,n,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const a=this.pendingSegment_,c=RM(i);a[c]=a[c]||{},a[c][n]=r,this.logger_(`timinginfo: ${i} - ${n} - ${r}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};i.forEach(c=>{a[c.stream]=a[c.stream]||{startTime:1/0,captions:[],endTime:0};const s=a[c.stream];s.startTime=Math.min(s.startTime,c.startTime+r),s.endTime=Math.max(s.endTime,c.endTime+r),s.captions.push(c)}),Object.keys(a).forEach(c=>{const{startTime:s,endTime:p,captions:_}=a[c],b=this.inbandTextTracks_;this.logger_(`adding cues from ${s} -> ${p} for ${c}`),CY(b,this.vhs_.tech_,c),gv(s,p,b[c]),kY({captionArray:_,inbandTextTracks:b,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,n));return}const a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();PY(this.inbandTextTracks_,n,this.vhs_.tech_),IY({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:a,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(i=>i())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(i=>i())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!BM({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!e||!i)return!1;const{hasAudio:n,hasVideo:r,isMuxed:a}=i;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!a&&!e.audioTimingInfo||BM({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,i));return}const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[RM(i.type)].start;else{const r=this.getCurrentMediaInfo_(),a=this.loaderType_==="main"&&r&&r.hasVideo;let c;a&&(c=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:c,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,i.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==n.mediaIndex||r.partIndex!==n.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,i)}}updateAppendInitSegmentStatus(e,i){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:i,map:n,playlist:r}){if(n){const a=mb(n);if(this.activeInitSegmentId_===a)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=a}return i&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n},r){const a=this.sourceUpdater_.audioBuffered(),c=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+kp(a).join(", ")),c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+kp(c).join(", "));const s=a.length?a.start(0):0,p=a.length?a.end(a.length-1):0,_=c.length?c.start(0):0,b=c.length?c.end(c.length-1):0;if(p-s<=rv&&b-_<=rv){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${kp(a).join(", ")}, video buffer: ${kp(c).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:i,bytes:n}));const E=this.currentTime_()-rv;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${E}`),this.remove(0,E,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${rv}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=yt.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},rv*1e3)},!0)}handleAppendError_({segmentInfo:e,type:i,bytes:n},r){if(r){if(r.code===fB){this.handleQuotaExceededError_({segmentInfo:e,type:i,bytes:n});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error(`${i} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:n,data:r,bytes:a}){if(!a){const c=[r];let s=r.byteLength;n&&(c.unshift(n),s+=n.byteLength),a=SY({bytes:s,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:i,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:e,type:i,bytes:a}))}handleSegmentTimingInfo_(e,i,n){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,a=`${e}TimingInfo`;r[a]||(r[a]={}),r[a].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[a].transmuxedPresentationStart=n.start.presentation,r[a].transmuxedDecodeStart=n.start.decode,r[a].transmuxedPresentationEnd=n.end.presentation,r[a].transmuxedDecodeEnd=n.end.decode,r[a].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,i){const{type:n,data:r}=i;if(!r||!r.byteLength||n==="audio"&&this.audioDisabled_)return;const a=this.getInitSegmentAndUpdateState_({type:n,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:a,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{const i=Ph({},e,{forceTimestampOffset:!0});Ph(e,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,a=e.timeline!==this.currentTimeline_&&e.timeline>0,c=n||r&&a;this.logger_(`Requesting ${Nm(e)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=gY({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:s,level:p,stream:_})=>{this.logger_(`${Nm(e)} logged from transmuxer stream ${_} as a ${p}: ${s}`)}})}trimBackBuffer_(e){const i=$Y(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(e){const i=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:i.resolvedUri,byterange:n?n.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},a=e.playlist.segments[e.mediaIndex-1];if(a&&a.timeline===i.timeline&&(a.videoTimingInfo?r.baseStartTime=a.videoTimingInfo.transmuxedDecodeEnd:a.audioTimingInfo&&(r.baseStartTime=a.audioTimingInfo.transmuxedDecodeEnd)),i.key){const c=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(i.key),r.key.iv=c}return i.map&&(r.map=this.initSegmentForMap(i.map)),r}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,i){if(this.pendingSegment_.byteLength=i.bytesReceived,e<l1){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${l1}`);return}this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,i,n){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,n));return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Bd.ABORTED)return;if(this.pause(),e.code===Bd.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,i.stats),r.endOfAllRequests=i.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=OY(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const i=this.syncController_.mappingForTimeline(e);i!==null&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:i,mediaIndex:n,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:a,useVideoTimingInfo:c,videoTimingInfo:s,audioTimingInfo:p}){if(typeof e<"u")return e;if(!c)return p.start;const _=i.segments[n-1];return n===0||!_||typeof _.start>"u"||_.end!==r+a?r:s.start}waitForAppendsToComplete_(e){const i=this.getCurrentMediaInfo_(e);if(!i){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:n,hasVideo:r,isMuxed:a}=i,c=this.loaderType_==="main"&&r,s=!this.audioDisabled_&&n&&!a;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}c&&e.waitingOnAppends++,s&&e.waitingOnAppends++,c&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const i=FY(this.loaderType_,this.getCurrentMediaInfo_(),e);return i?(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:i,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i&&typeof i.transmuxedDecodeStart=="number"?i.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const i=this.getMediaInfo_(),r=this.loaderType_==="main"&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const i=VY(e,this.sourceType_);if(i&&(i.severity==="warn"?ei.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Nm(e)}`);return}this.logger_(`Appended ${Nm(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,r=e.part,a=n.end&&this.currentTime_()-n.end>e.playlist.targetDuration*3,c=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(a||c){this.logger_(`bad ${a?"segment":"part"} ${Nm(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<l1){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${l1}`);return}const i=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-i)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const i=e.segment,n=i.start,r=i.end;if(!DM(n)||!DM(r))return;gv(n,r,this.segmentMetadataTrack_);const a=yt.WebKitDataCue||yt.VTTCue,c={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},s=JSON.stringify(c),p=new a(n,r,s);p.value=c,this.segmentMetadataTrack_.addCue(p)}}function vh(){}const pB=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},UY=["video","audio"],rS=(t,e)=>{const i=e[`${t}Buffer`];return i&&i.updating||e.queuePending[t]},jY=(t,e)=>{for(let i=0;i<e.length;i++){const n=e[i];if(n.type==="mediaSource")return null;if(n.type===t)return i}return null},ug=(t,e)=>{if(e.queue.length===0)return;let i=0,n=e.queue[i];if(n.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),n.action(e),n.doneFn&&n.doneFn(),ug("audio",e),ug("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||rS(t,e))){if(n.type!==t){if(i=jY(t,e.queue),i===null)return;n=e.queue[i]}if(e.queue.splice(i,1),e.queuePending[t]=n,n.action(t,e),!n.doneFn){e.queuePending[t]=null,ug(t,e);return}}},mB=(t,e)=>{const i=e[`${t}Buffer`],n=pB(t);i&&(i.removeEventListener("updateend",e[`on${n}UpdateEnd_`]),i.removeEventListener("error",e[`on${n}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},Od=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,Uu={appendBuffer:(t,e,i)=>(n,r)=>{const a=r[`${n}Buffer`];if(Od(r.mediaSource,a)){r.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${n}Buffer`);try{a.appendBuffer(t)}catch(c){r.logger_(`Error with code ${c.code} `+(c.code===fB?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${n}Buffer`),r.queuePending[n]=null,i(c)}}},remove:(t,e)=>(i,n)=>{const r=n[`${i}Buffer`];if(Od(n.mediaSource,r)){n.logger_(`Removing ${t} to ${e} from ${i}Buffer`);try{r.remove(t,e)}catch{n.logger_(`Remove ${t} to ${e} from ${i}Buffer failed`)}}},timestampOffset:t=>(e,i)=>{const n=i[`${e}Buffer`];Od(i.mediaSource,n)&&(i.logger_(`Setting ${e}timestampOffset to ${t}`),n.timestampOffset=t)},callback:t=>(e,i)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(i){ei.log.warn("Failed to call media source endOfStream",i)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(i){ei.log.warn("Failed to set media source duration",i)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const i=e[`${t}Buffer`];if(Od(e.mediaSource,i)){e.logger_(`calling abort on ${t}Buffer`);try{i.abort()}catch(n){ei.log.warn(`Failed to abort on ${t}Buffer`,n)}}},addSourceBuffer:(t,e)=>i=>{const n=pB(t),r=Yv(e);i.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const a=i.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",i[`on${n}UpdateEnd_`]),a.addEventListener("error",i[`on${n}Error_`]),i.codecs[t]=e,i[`${t}Buffer`]=a},removeSourceBuffer:t=>e=>{const i=e[`${t}Buffer`];if(mB(t,e),!!Od(e.mediaSource,i)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(i)}catch(n){ei.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,n)}}},changeType:t=>(e,i)=>{const n=i[`${e}Buffer`],r=Yv(t);Od(i.mediaSource,n)&&i.codecs[e]!==t&&(i.logger_(`changing ${e}Buffer codec from ${i.codecs[e]} to ${t}`),n.changeType(r),i.codecs[e]=t)}},ju=({type:t,sourceUpdater:e,action:i,doneFn:n,name:r})=>{e.queue.push({type:t,action:i,doneFn:n,name:r}),ug(t,e)},$M=(t,e)=>i=>{if(e.queuePending[t]){const n=e.queuePending[t].doneFn;e.queuePending[t]=null,n&&n(e[`${t}Error_`])}ug(t,e)};class gB extends ei.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>ug("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=ld("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=$M("video",this),this.onAudioUpdateEnd_=$M("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,i){ju({type:"mediaSource",sourceUpdater:this,action:Uu.addSourceBuffer(e,i),name:"addSourceBuffer"})}abort(e){ju({type:e,sourceUpdater:this,action:Uu.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){ei.log.error("removeSourceBuffer is not supported!");return}ju({type:"mediaSource",sourceUpdater:this,action:Uu.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!ei.browser.IE_VERSION&&!ei.browser.IS_FIREFOX&&yt.MediaSource&&yt.MediaSource.prototype&&typeof yt.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return yt.SourceBuffer&&yt.SourceBuffer.prototype&&typeof yt.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,i){if(!this.canChangeType()){ei.log.error("changeType is not supported!");return}ju({type:e,sourceUpdater:this,action:Uu.changeType(i),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(i=>{const n=e[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,n);this.canChangeType()&&this.changeType(i,n)})}appendBuffer(e,i){const{segmentInfo:n,type:r,bytes:a}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,i]),this.logger_(`delayed audio append of ${a.length} until video append`);return}const c=i;if(ju({type:r,sourceUpdater:this,action:Uu.appendBuffer(a,n||{mediaIndex:-1},c),doneFn:i,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const s=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${s.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,s.forEach(p=>{this.appendBuffer.apply(this,p)})}}audioBuffered(){return Od(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:al()}videoBuffered(){return Od(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:al()}buffered(){const e=Od(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=Od(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():hZ(this.audioBuffered(),this.videoBuffered())}setDuration(e,i=vh){ju({type:"mediaSource",sourceUpdater:this,action:Uu.duration(e),name:"duration",doneFn:i})}endOfStream(e=null,i=vh){typeof e!="string"&&(e=void 0),ju({type:"mediaSource",sourceUpdater:this,action:Uu.endOfStream(e),name:"endOfStream",doneFn:i})}removeAudio(e,i,n=vh){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){n();return}ju({type:"audio",sourceUpdater:this,action:Uu.remove(e,i),doneFn:n,name:"remove"})}removeVideo(e,i,n=vh){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){n();return}ju({type:"video",sourceUpdater:this,action:Uu.remove(e,i),doneFn:n,name:"remove"})}updating(){return!!(rS("audio",this)||rS("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(ju({type:"audio",sourceUpdater:this,action:Uu.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(ju({type:"video",sourceUpdater:this,action:Uu.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&ju({type:"audio",sourceUpdater:this,action:Uu.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&ju({type:"video",sourceUpdater:this,action:Uu.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),UY.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>mB(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const NM=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),zM=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class HY extends nS{constructor(e,i={}){super(e,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return al();const e=this.subtitlesTrack_.cues,i=e[0].startTime,n=e[e.length-1].startTime;return al([[i,n]])}initSegmentForMap(e,i=!1){if(!e)return null;const n=mb(e);let r=this.initSegments_[n];if(i&&!r&&e.bytes){const a=zM.byteLength+e.bytes.byteLength,c=new Uint8Array(a);c.set(e.bytes),c.set(zM,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:c}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,i){gv(e,i,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const i=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",i),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,i,n){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(i.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Bd.TIMEOUT&&this.handleTimeout_(),e.code===Bd.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const a=r.segment;if(a.map&&(a.map.bytes=i.map.bytes),r.bytes=i.bytes,typeof yt.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let c;const s=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",c),this.stopForError({message:"Error loading vtt.js"})};c=()=>{this.subtitlesTrack_.tech_.off("vttjserror",s),this.segmentRequestFinished_(e,i,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",c),this.subtitlesTrack_.tech_.one("vttjserror",s);return}a.requested=!0;try{this.parseVTTCues_(r)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(c=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new yt.VTTCue(c.startTime,c.endTime,c.text):c)}),AY(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let i,n=!1;typeof yt.TextDecoder=="function"?i=new yt.TextDecoder("utf8"):(i=yt.WebVTT.StringDecoder(),n=!0);const r=new yt.WebVTT.Parser(yt,yt.vttjs,i);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=c=>{e.timestampmap=c},r.onparsingerror=c=>{ei.log.warn("Error encountered when parsing cues: "+c.message)},e.segment.map){let c=e.segment.map.bytes;n&&(c=NM(c)),r.parse(c)}let a=e.bytes;n&&(a=NM(a)),r.parse(a),r.flush()}updateTimeMapping_(e,i,n){const r=e.segment;if(!i)return;if(!e.cues.length){r.empty=!0;return}const a=e.timestampmap,c=a.MPEGTS/tb.ONE_SECOND_IN_TS-a.LOCAL+i.mapping;if(e.cues.forEach(s=>{s.startTime+=c,s.endTime+=c}),!n.syncInfo){const s=e.cues[0].startTime,p=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,p-r.duration)}}}}const GY=function(t,e){const i=t.cues;for(let n=0;n<i.length;n++){const r=i[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},WY=function(t,e,i=0){if(!t.segments)return;let n=i,r;for(let a=0;a<t.segments.length;a++){const c=t.segments[a];if(r||(r=GY(e,n+c.duration/2)),r){if("cueIn"in c){r.endTime=n,r.adEndTime=n,n+=c.duration,r=null;continue}if(n<r.endTime){n+=c.duration;continue}r.endTime+=c.duration}else if("cueOut"in c&&(r=new yt.VTTCue(n,n+c.duration,c.cueOut),r.adStartTime=n,r.adEndTime=n+parseFloat(c.cueOut),e.addCue(r)),"cueOutCont"in c){const[s,p]=c.cueOutCont.split("/").map(parseFloat);r=new yt.VTTCue(n,n+c.duration,""),r.adStartTime=n-s,r.adEndTime=r.adStartTime+p,e.addCue(r)}n+=c.duration}},qY=86400,VM=[{name:"VOD",run:(t,e,i,n,r)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(t,e,i,n,r)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let a=null,c=null;const s=Y2(e);r=r||0;for(let p=0;p<s.length;p++){const _=e.endList||r===0?p:s.length-(p+1),b=s[_],S=b.segment,E=t.timelineToDatetimeMappings[S.timeline];if(!E||!S.dateTimeObject)continue;let R=S.dateTimeObject.getTime()/1e3+E;if(S.parts&&typeof b.partIndex=="number")for(let q=0;q<b.partIndex;q++)R+=S.parts[q].duration;const V=Math.abs(r-R);if(c!==null&&(V===0||c<V))break;c=V,a={time:R,segmentIndex:b.segmentIndex,partIndex:b.partIndex}}return a}},{name:"Segment",run:(t,e,i,n,r)=>{let a=null,c=null;r=r||0;const s=Y2(e);for(let p=0;p<s.length;p++){const _=e.endList||r===0?p:s.length-(p+1),b=s[_],S=b.segment,E=b.part&&b.part.start||S&&S.start;if(S.timeline===n&&typeof E<"u"){const I=Math.abs(r-E);if(c!==null&&c<I)break;(!a||c===null||c>=I)&&(c=I,a={time:E,segmentIndex:b.segmentIndex,partIndex:b.partIndex})}}return a}},{name:"Discontinuity",run:(t,e,i,n,r)=>{let a=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let c=null;for(let s=0;s<e.discontinuityStarts.length;s++){const p=e.discontinuityStarts[s],_=e.discontinuitySequence+s+1,b=t.discontinuities[_];if(b){const S=Math.abs(r-b.time);if(c!==null&&c<S)break;(!a||c===null||c>=S)&&(c=S,a={time:b.time,segmentIndex:p,partIndex:null})}}}return a}},{name:"Playlist",run:(t,e,i,n,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class ZY extends ei.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=ld("SyncController")}getSyncPoint(e,i,n,r){const a=this.runStrategies_(e,i,n,r);return a.length?this.selectSyncPoint_(a,{key:"time",value:r}):null}getExpiredTime(e,i){if(!e||!e.segments)return null;const n=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!n.length)return null;const r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Mv({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,i,n,r){const a=[];for(let c=0;c<VM.length;c++){const s=VM[c],p=s.run(this,e,i,n,r);p&&(p.strategy=s.name,a.push({strategy:s.name,syncPoint:p}))}return a}selectSyncPoint_(e,i){let n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[i.key]-i.value),a=e[0].strategy;for(let c=1;c<e.length;c++){const s=Math.abs(e[c].syncPoint[i.key]-i.value);s<r&&(r=s,n=e[c].syncPoint,a=e[c].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${a}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+(typeof n.partIndex=="number"?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,i){const n=i.mediaSequence-e.mediaSequence;if(n>qY){ei.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);return}for(let r=n-1;r>=0;r--){const a=e.segments[r];if(a&&typeof a.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+r,time:a.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const i=e.segments[0],n=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:i}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,i),r=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const a=r.dateTimeObject;r.discontinuity&&i&&a&&(this.timelineToDatetimeMappings[r.timeline]=-(a.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,i,n){const r=e.segment,a=e.part;let c=this.timelines[e.timeline],s,p;if(typeof e.timestampOffset=="number")c={time:e.startOfSegment,mapping:e.startOfSegment-i.start},n&&(this.timelines[e.timeline]=c,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${c.time}] [mapping: ${c.mapping}]`)),s=e.startOfSegment,p=i.end+c.mapping;else if(c)s=i.start+c.mapping,p=i.end+c.mapping;else return!1;return a&&(a.start=s,a.end=p),(!r.start||s<r.start)&&(r.start=s),r.end=p,!0}saveDiscontinuitySyncInfo_(e){const i=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let r=0;r<i.discontinuityStarts.length;r++){const a=i.discontinuityStarts[r],c=i.discontinuitySequence+r+1,s=a-e.mediaIndex,p=Math.abs(s);if(!this.discontinuities[c]||this.discontinuities[c].accuracy>p){let _;s<0?_=n.start-Mv({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:a}):_=n.end+Mv({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[c]={time:_,accuracy:p}}}}dispose(){this.trigger("dispose"),this.off()}}class YY extends ei.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:i,to:n}){return typeof i=="number"&&typeof n=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:i,to:n}){return typeof i=="number"&&typeof n=="number"&&(this.lastTimelineChanges_[e]={type:e,from:i,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const XY=iB(nB(function(){var t=function(){function V(){this.listeners={}}var q=V.prototype;return q.on=function(H,Z){this.listeners[H]||(this.listeners[H]=[]),this.listeners[H].push(Z)},q.off=function(H,Z){if(!this.listeners[H])return!1;var ne=this.listeners[H].indexOf(Z);return this.listeners[H]=this.listeners[H].slice(0),this.listeners[H].splice(ne,1),ne>-1},q.trigger=function(H){var Z=this.listeners[H];if(Z)if(arguments.length===2)for(var ne=Z.length,ie=0;ie<ne;++ie)Z[ie].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),pe=Z.length,de=0;de<pe;++de)Z[de].apply(this,oe)},q.dispose=function(){this.listeners={}},q.pipe=function(H){this.on("data",function(Z){H.push(Z)})},V}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const i=function(){const V=[[[],[],[],[],[]],[[],[],[],[],[]]],q=V[0],U=V[1],H=q[4],Z=U[4];let ne,ie,oe;const pe=[],de=[];let fe,ge,we,Ie,Oe,ke;for(ne=0;ne<256;ne++)de[(pe[ne]=ne<<1^(ne>>7)*283)^ne]=ne;for(ie=oe=0;!H[ie];ie^=fe||1,oe=de[oe]||1)for(Ie=oe^oe<<1^oe<<2^oe<<3^oe<<4,Ie=Ie>>8^Ie&255^99,H[ie]=Ie,Z[Ie]=ie,we=pe[ge=pe[fe=pe[ie]]],ke=we*16843009^ge*65537^fe*257^ie*16843008,Oe=pe[Ie]*257^Ie*16843008,ne=0;ne<4;ne++)q[ne][ie]=Oe=Oe<<24^Oe>>>8,U[ne][Ie]=ke=ke<<24^ke>>>8;for(ne=0;ne<5;ne++)q[ne]=q[ne].slice(0),U[ne]=U[ne].slice(0);return V};let n=null;class r{constructor(q){n||(n=i()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];let U,H,Z;const ne=this._tables[0][4],ie=this._tables[1],oe=q.length;let pe=1;if(oe!==4&&oe!==6&&oe!==8)throw new Error("Invalid aes key size");const de=q.slice(0),fe=[];for(this._key=[de,fe],U=oe;U<4*oe+28;U++)Z=de[U-1],(U%oe===0||oe===8&&U%oe===4)&&(Z=ne[Z>>>24]<<24^ne[Z>>16&255]<<16^ne[Z>>8&255]<<8^ne[Z&255],U%oe===0&&(Z=Z<<8^Z>>>24^pe<<24,pe=pe<<1^(pe>>7)*283)),de[U]=de[U-oe]^Z;for(H=0;U;H++,U--)Z=de[H&3?U:U-4],U<=4||H<4?fe[H]=Z:fe[H]=ie[0][ne[Z>>>24]]^ie[1][ne[Z>>16&255]]^ie[2][ne[Z>>8&255]]^ie[3][ne[Z&255]]}decrypt(q,U,H,Z,ne,ie){const oe=this._key[1];let pe=q^oe[0],de=Z^oe[1],fe=H^oe[2],ge=U^oe[3],we,Ie,Oe;const ke=oe.length/4-2;let Ee,Qe=4;const gt=this._tables[1],nt=gt[0],ft=gt[1],Tt=gt[2],pt=gt[3],et=gt[4];for(Ee=0;Ee<ke;Ee++)we=nt[pe>>>24]^ft[de>>16&255]^Tt[fe>>8&255]^pt[ge&255]^oe[Qe],Ie=nt[de>>>24]^ft[fe>>16&255]^Tt[ge>>8&255]^pt[pe&255]^oe[Qe+1],Oe=nt[fe>>>24]^ft[ge>>16&255]^Tt[pe>>8&255]^pt[de&255]^oe[Qe+2],ge=nt[ge>>>24]^ft[pe>>16&255]^Tt[de>>8&255]^pt[fe&255]^oe[Qe+3],Qe+=4,pe=we,de=Ie,fe=Oe;for(Ee=0;Ee<4;Ee++)ne[(3&-Ee)+ie]=et[pe>>>24]<<24^et[de>>16&255]<<16^et[fe>>8&255]<<8^et[ge&255]^oe[Qe++],we=pe,pe=de,de=fe,fe=ge,ge=we}}class a extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const c=function(V){return V<<24|(V&65280)<<8|(V&16711680)>>8|V>>>24},s=function(V,q,U){const H=new Int32Array(V.buffer,V.byteOffset,V.byteLength>>2),Z=new r(Array.prototype.slice.call(q)),ne=new Uint8Array(V.byteLength),ie=new Int32Array(ne.buffer);let oe,pe,de,fe,ge,we,Ie,Oe,ke;for(oe=U[0],pe=U[1],de=U[2],fe=U[3],ke=0;ke<H.length;ke+=4)ge=c(H[ke]),we=c(H[ke+1]),Ie=c(H[ke+2]),Oe=c(H[ke+3]),Z.decrypt(ge,we,Ie,Oe,ie,ke),ie[ke]=c(ie[ke]^oe),ie[ke+1]=c(ie[ke+1]^pe),ie[ke+2]=c(ie[ke+2]^de),ie[ke+3]=c(ie[ke+3]^fe),oe=ge,pe=we,de=Ie,fe=Oe;return ne};class p{constructor(q,U,H,Z){const ne=p.STEP,ie=new Int32Array(q.buffer),oe=new Uint8Array(q.byteLength);let pe=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(ie.subarray(pe,pe+ne),U,H,oe)),pe=ne;pe<ie.length;pe+=ne)H=new Uint32Array([c(ie[pe-4]),c(ie[pe-3]),c(ie[pe-2]),c(ie[pe-1])]),this.asyncStream_.push(this.decryptChunk_(ie.subarray(pe,pe+ne),U,H,oe));this.asyncStream_.push(function(){Z(null,e(oe))})}static get STEP(){return 32e3}decryptChunk_(q,U,H,Z){return function(){const ne=s(q,U,H);Z.set(ne,q.byteOffset)}}}var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b;typeof window<"u"?b=window:typeof _<"u"?b=_:typeof self<"u"?b=self:b={};var S=b,E=function(q){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(q):q&&q.buffer instanceof ArrayBuffer},I=S.BigInt||Number;I("0x1"),I("0x100"),I("0x10000"),I("0x1000000"),I("0x100000000"),I("0x10000000000"),I("0x1000000000000"),I("0x100000000000000"),I("0x10000000000000000"),function(){var V=new Uint16Array([65484]),q=new Uint8Array(V.buffer,V.byteOffset,V.byteLength);return q[0]===255?"big":q[0]===204?"little":"unknown"}();const R=function(V){const q={};return Object.keys(V).forEach(U=>{const H=V[U];E(H)?q[U]={bytes:H.buffer,byteOffset:H.byteOffset,byteLength:H.byteLength}:q[U]=H}),q};self.onmessage=function(V){const q=V.data,U=new Uint8Array(q.encrypted.bytes,q.encrypted.byteOffset,q.encrypted.byteLength),H=new Uint32Array(q.key.bytes,q.key.byteOffset,q.key.byteLength/4),Z=new Uint32Array(q.iv.bytes,q.iv.byteOffset,q.iv.byteLength/4);new p(U,H,Z,function(ne,ie){self.postMessage(R({source:q.source,decrypted:ie}),[ie.buffer])})}}));var KY=tB(XY);const QY=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},yb=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},sS=(t,e)=>{e.activePlaylistLoader=t,t.load()},JY=(t,e)=>()=>{const{segmentLoaders:{[t]:i,main:n},mediaTypes:{[t]:r}}=e,a=r.activeTrack(),c=r.getActiveGroup(),s=r.activePlaylistLoader,p=r.lastGroup_;if(!(c&&p&&c.id===p.id)&&(r.lastGroup_=c,r.lastTrack_=a,yb(i,r),!(!c||c.isMainPlaylist))){if(!c.playlistLoader){s&&n.resetEverything();return}i.resyncLoader(),sS(c.playlistLoader,r)}},eX=(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;n.lastGroup_=null,i.abort(),i.pause()},tX=(t,e)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[t]:n,main:r},mediaTypes:{[t]:a}}=e,c=a.activeTrack(),s=a.getActiveGroup(),p=a.activePlaylistLoader,_=a.lastTrack_;if(!(_&&c&&_.id===c.id)&&(a.lastGroup_=s,a.lastTrack_=c,yb(n,a),!!s)){if(s.isMainPlaylist){if(!c||!_||c.id===_.id)return;const b=e.vhs.playlistController_,S=b.selectPlaylist();if(b.media()===S)return;a.logger_(`track change. Switching main audio from ${_.id} to ${c.id}`),i.pause(),r.resetEverything(),b.fastQualityChange_(S);return}if(t==="AUDIO"){if(!s.playlistLoader){r.setAudio(!0),r.resetEverything();return}n.setAudio(!0),r.setAudio(!1)}if(p===s.playlistLoader){sS(s.playlistLoader,a);return}n.track&&n.track(c),n.resetEverything(),sS(s.playlistLoader,a)}},bb={AUDIO:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n},excludePlaylist:r}=e;yb(i,n);const a=n.activeTrack(),c=n.activeGroup(),s=(c.filter(_=>_.default)[0]||c[0]).id,p=n.tracks[s];if(a===p){r({error:{message:"Problem encountered loading the default audio track."}});return}ei.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const _ in n.tracks)n.tracks[_].enabled=n.tracks[_]===p;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{segmentLoaders:{[t]:i},mediaTypes:{[t]:n}}=e;ei.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),yb(i,n);const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},UM={AUDIO:(t,e,i)=>{if(!e)return;const{tech:n,requestOptions:r,segmentLoaders:{[t]:a}}=i;e.on("loadedmetadata",()=>{const c=e.media();a.playlist(c,r),(!n.paused()||c.endList&&n.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),n.paused()||a.load()}),e.on("error",bb[t](t,i))},SUBTITLES:(t,e,i)=>{const{tech:n,requestOptions:r,segmentLoaders:{[t]:a},mediaTypes:{[t]:c}}=i;e.on("loadedmetadata",()=>{const s=e.media();a.playlist(s,r),a.track(c.activeTrack()),(!n.paused()||s.endList&&n.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),n.paused()||a.load()}),e.on("error",bb[t](t,i))}},iX={AUDIO:(t,e)=>{const{vhs:i,sourceType:n,segmentLoaders:{[t]:r},requestOptions:a,main:{mediaGroups:c},mediaTypes:{[t]:{groups:s,tracks:p,logger_:_}},mainPlaylistLoader:b}=e,S=ky(b.main);(!c[t]||Object.keys(c[t]).length===0)&&(c[t]={main:{default:{default:!0}}},S&&(c[t].main.default.playlists=b.main.playlists));for(const E in c[t]){s[E]||(s[E]=[]);for(const I in c[t][E]){let R=c[t][E][I],V;if(S?(_(`AUDIO group '${E}' label '${I}' is a main playlist`),R.isMainPlaylist=!0,V=null):n==="vhs-json"&&R.playlists?V=new Ym(R.playlists[0],i,a):R.resolvedUri?V=new Ym(R.resolvedUri,i,a):R.playlists&&n==="dash"?V=new tS(R.playlists[0],i,a,b):V=null,R=hs({id:I,playlistLoader:V},R),UM[t](t,R.playlistLoader,e),s[E].push(R),typeof p[I]>"u"){const q=new ei.AudioTrack({id:I,kind:QY(R),enabled:!1,language:R.language,default:R.default,label:I});p[I]=q}}}r.on("error",bb[t](t,e))},SUBTITLES:(t,e)=>{const{tech:i,vhs:n,sourceType:r,segmentLoaders:{[t]:a},requestOptions:c,main:{mediaGroups:s},mediaTypes:{[t]:{groups:p,tracks:_}},mainPlaylistLoader:b}=e;for(const S in s[t]){p[S]||(p[S]=[]);for(const E in s[t][S]){if(s[t][S][E].forced)continue;let I=s[t][S][E],R;if(r==="hls")R=new Ym(I.resolvedUri,n,c);else if(r==="dash"){if(!I.playlists.filter(q=>q.excludeUntil!==1/0).length)return;R=new tS(I.playlists[0],n,c,b)}else r==="vhs-json"&&(R=new Ym(I.playlists?I.playlists[0]:I.resolvedUri,n,c));if(I=hs({id:E,playlistLoader:R},I),UM[t](t,I.playlistLoader,e),p[S].push(I),typeof _[E]>"u"){const V=i.addRemoteTextTrack({id:E,kind:"subtitles",default:I.default&&I.autoselect,language:I.language,label:E},!1).track;_[E]=V}}}a.on("error",bb[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:i,main:{mediaGroups:n},mediaTypes:{[t]:{groups:r,tracks:a}}}=e;for(const c in n[t]){r[c]||(r[c]=[]);for(const s in n[t][c]){const p=n[t][c][s];if(!/^(?:CC|SERVICE)/.test(p.instreamId))continue;const _=i.options_.vhs&&i.options_.vhs.captionServices||{};let b={label:s,language:p.language,instreamId:p.instreamId,default:p.default&&p.autoselect};if(_[b.instreamId]&&(b=hs(b,_[b.instreamId])),b.default===void 0&&delete b.default,r[c].push(hs({id:s},p)),typeof a[s]>"u"){const S=i.addRemoteTextTrack({id:b.instreamId,kind:"captions",default:b.default,language:b.language,label:b.label},!1).track;a[s]=S}}}}},_B=(t,e)=>{for(let i=0;i<t.length;i++)if(wk(e,t[i])||t[i].playlists&&_B(t[i].playlists,e))return!0;return!1},nX=(t,e)=>i=>{const{mainPlaylistLoader:n,mediaTypes:{[t]:{groups:r}}}=e,a=n.media();if(!a)return null;let c=null;a.attributes[t]&&(c=r[a.attributes[t]]);const s=Object.keys(r);if(!c)if(t==="AUDIO"&&s.length>1&&ky(e.main))for(let p=0;p<s.length;p++){const _=r[s[p]];if(_B(_,a)){c=_;break}}else r.main?c=r.main:s.length===1&&(c=r[s[0]]);return typeof i>"u"?c:i===null||!c?null:c.filter(p=>p.id===i.id)[0]||null},rX={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].enabled)return i[n];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:i}}}=e;for(const n in i)if(i[n].mode==="showing"||i[n].mode==="hidden")return i[n];return null}},sX=(t,{mediaTypes:e})=>()=>{const i=e[t].activeTrack();return i?e[t].activeGroup(i):null},oX=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(_=>{iX[_](_,t)});const{mediaTypes:e,mainPlaylistLoader:i,tech:n,vhs:r,segmentLoaders:{["AUDIO"]:a,main:c}}=t;["AUDIO","SUBTITLES"].forEach(_=>{e[_].activeGroup=nX(_,t),e[_].activeTrack=rX[_](_,t),e[_].onGroupChanged=JY(_,t),e[_].onGroupChanging=eX(_,t),e[_].onTrackChanged=tX(_,t),e[_].getActiveGroup=sX(_,t)});const s=e.AUDIO.activeGroup();if(s){const _=(s.filter(S=>S.default)[0]||s[0]).id;e.AUDIO.tracks[_].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(c.setAudio(!1),a.setAudio(!0)):c.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(_=>e[_].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(_=>e[_].onGroupChanging())});const p=()=>{e.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",p),n.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{n.audioTracks().removeEventListener("change",p),n.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),n.clearTracks("audio");for(const _ in e.AUDIO.tracks)n.audioTracks().addTrack(e.AUDIO.tracks[_])},aX=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:vh,activeTrack:vh,getActiveGroup:vh,onGroupChanged:vh,onTrackChanged:vh,lastTrack_:null,logger_:ld(`MediaGroups[${e}]`)}}),t},lX=60*2;let hh;const uX=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],cX=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},dX=function({currentPlaylist:t,buffered:e,currentTime:i,nextPlaylist:n,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:c,bufferBasedABR:s,log:p}){if(!n)return ei.log.warn("We received no playlist to switch to. Please check your stream."),!1;const _=`allowing switch ${t&&t.id||"null"} -> ${n.id}`;if(!t)return p(`${_} as current playlist is not set`),!0;if(n.id===t.id)return!1;const b=!!Zm(e,i).length;if(!t.endList)return!b&&typeof t.partTargetDuration=="number"?(p(`not ${_} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(p(`${_} as current playlist is live`),!0);const S=yk(e,i),E=s?pa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:pa.MAX_BUFFER_LOW_WATER_LINE;if(c<E)return p(`${_} as duration < max low water line (${c} < ${E})`),!0;const I=n.attributes.BANDWIDTH,R=t.attributes.BANDWIDTH;if(I<R&&(!s||S<a)){let V=`${_} as next bandwidth < current bandwidth (${I} < ${R})`;return s&&(V+=` and forwardBuffer < bufferHighWaterLine (${S} < ${a})`),p(V),!0}if((!s||I>R)&&S>=r){let V=`${_} as forwardBuffer >= bufferLowWaterLine (${S} >= ${r})`;return s&&(V+=` and next bandwidth > current bandwidth (${I} > ${R})`),p(V),!0}return p(`not ${_} as no switching criteria met`),!1};class hX extends ei.EventTarget{constructor(e){super();const{src:i,withCredentials:n,tech:r,bandwidth:a,externVhs:c,useCueTags:s,playlistExclusionDuration:p,enableLowInitialPlaylist:_,sourceType:b,cacheEncryptionKeys:S,bufferBasedABR:E,leastPixelDiffSelector:I,captionServices:R}=e;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:V}=e;(V===null||typeof V>"u")&&(V=1/0),hh=c,this.bufferBasedABR=!!E,this.leastPixelDiffSelector=!!I,this.withCredentials=n,this.tech_=r,this.vhs_=r.vhs,this.sourceType_=b,this.useCueTags_=s,this.playlistExclusionDuration=p,this.maxPlaylistRetries=V,this.enableLowInitialPlaylist=_,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:V,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=aX(),this.mediaSource=new yt.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=al(),this.hasPlayed_=!1,this.syncController_=new ZY(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new KY,this.sourceUpdater_=new gB(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new YY;const q={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:R,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:a,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:S,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_=this.sourceType_==="dash"?new tS(i,this.vhs_,this.requestOptions_):new Ym(i,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new nS(hs(q,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new nS(hs(q,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new HY(hs(q,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),uX.forEach(H=>{this[H+"_"]=cX.bind(this,H)}),this.logger_=ld("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const U=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(U,()=>{const H=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-H,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return e===-1||i===-1?-1:e+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,e)}switchMedia_(e,i,n){const r=this.media(),a=r&&(r.id||r.uri),c=e.id||e.uri;a&&a!==c&&(this.logger_(`switch media ${a} -> ${c} from ${i}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})),this.mainPlaylistLoader_.media(e,n)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=yt.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(yt.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;const n=e.mediaGroups.AUDIO,r=Object.keys(n);let a;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{const s=n.main||r.length&&n[r[0]];for(const p in s)if(s[p].default){a={label:p};break}}if(!a)return i;const c=[];for(const s in n)if(n[s][a.label]){const p=n[s][a.label];if(p.playlists&&p.playlists.length)c.push.apply(c,p.playlists);else if(p.uri)c.push(p);else if(e.playlists.length)for(let _=0;_<e.playlists.length;_++){const b=e.playlists[_];b.attributes&&b.attributes.AUDIO&&b.attributes.AUDIO===s&&c.push(b)}}return c.length?c:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),i=e.targetDuration*1.5*1e3;X2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),oX({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),i=e.targetDuration*1.5*1e3;X2(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,i){const n=e.mediaGroups||{};let r=!0;const a=Object.keys(n.AUDIO);for(const c in n.AUDIO)for(const s in n.AUDIO[c])n.AUDIO[c][s].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),hh.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),a.length&&Object.keys(n.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),a=this.bufferHighWaterLine(),c=this.tech_.buffered();return dX({buffered:c,currentTime:n,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:lX}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{ei.browser.IE_VERSION||ei.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const i=this.seekable();if(!i.length)return!1;if(ei.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();!i||i.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(n===null)return!1;const r=hh.Playlist.playlistEnd(e,n),a=this.tech_.currentTime(),c=this.tech_.buffered();if(!c.length)return r-a<=Rd;const s=c.end(c.length-1);return s-a<=Rd&&r-s<=Rd}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||i.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,a=r.filter(Tx),c=a.length===1&&a[0]===e;if(r.length===1&&n!==1/0)return ei.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(c);if(c){let I=!1;r.forEach(R=>{if(R===e)return;const V=R.excludeUntil;typeof V<"u"&&V!==1/0&&(I=!0,delete R.excludeUntil)}),I&&(ei.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let s;e.playlistErrors_>this.maxPlaylistRetries?s=1/0:s=Date.now()+n*1e3,e.excludeUntil=s,i.reason&&(e.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const p=this.selectPlaylist();if(!p){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const _=i.internal?this.logger_:ei.log.warn,b=i.message?" "+i.message:"";_(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${b} Switching to playlist ${p.id}.`),p.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),p.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const S=p.targetDuration/2*1e3||5*1e3,E=typeof p.lastRequest=="number"&&Date.now()-p.lastRequest<=S;return this.switchMedia_(p,"exclude",c||E)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,i){const n=[],r=e==="all";(r||e==="main")&&n.push(this.mainPlaylistLoader_);const a=[];(r||e==="audio")&&a.push("AUDIO"),(r||e==="subtitle")&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(c=>{const s=this.mediaTypes_[c]&&this.mediaTypes_[c].activePlaylistLoader;s&&n.push(s)}),["main","audio","subtitle"].forEach(c=>{const s=this[`${c}SegmentLoader_`];s&&(e===c||e==="all")&&n.push(s)}),n.forEach(c=>i.forEach(s=>{typeof c[s]=="function"&&c[s]()}))}setCurrentTime(e){const i=Zm(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(i&&i.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:hh.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let i=this.mainPlaylistLoader_.media();if(!i)return;let n=this.syncController_.getExpiredTime(i,this.duration());if(n===null)return;const r=this.mainPlaylistLoader_.main,a=hh.Playlist.seekable(i,n,hh.Playlist.liveEdgeDelay(r,i));if(a.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(i,this.duration()),n===null||(e=hh.Playlist.seekable(i,n,hh.Playlist.liveEdgeDelay(r,i)),e.length===0)))return;let c,s;this.seekable_&&this.seekable_.length&&(c=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=al([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===c&&this.seekable_.start(0)===s)&&(this.logger_(`seekable updated [${LR(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const i=this.tech_.buffered();let n=hh.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const i=this.mediaTypes_[e].groups;for(const n in i)i[n].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!i||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;const i=Ov(this.main(),this.media()),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=i.video||e.main.videoCodec||WH),e.main.isMuxed&&(n.video+=`,${i.audio||e.main.audioCodec||I3}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(n.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||I3,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(p,_)=>p?v1(_):xT(_),c={};let s;if(["video","audio"].forEach(function(p){if(n.hasOwnProperty(p)&&!a(e[p].isFmp4,n[p])){const _=e[p].isFmp4?"browser":"muxer";c[_]=c[_]||[],c[_].push(n[p]),p==="audio"&&(s=_)}}),r&&s&&this.media().attributes.AUDIO){const p=this.media().attributes.AUDIO;this.main().playlists.forEach(_=>{(_.attributes&&_.attributes.AUDIO)===p&&_!==this.media()&&(_.excludeUntil=1/0)}),this.logger_(`excluding audio group ${p} as ${s} does not support codec(s): "${n.audio}"`)}if(Object.keys(c).length){const p=Object.keys(c).reduce((_,b)=>(_&&(_+=", "),_+=`${b} does not support codec(s): "${c[b].join(",")}"`,_),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:p},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const p=[];if(["video","audio"].forEach(_=>{const b=(Md(this.sourceUpdater_.codecs[_]||"")[0]||{}).type,S=(Md(n[_]||"")[0]||{}).type;b&&S&&b.toLowerCase()!==S.toLowerCase()&&p.push(`"${this.sourceUpdater_.codecs[_]}" -> "${n[_]}"`)}),p.length){this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${p.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const e=this.main().playlists,i=[];Object.keys(e).forEach(n=>{const r=e[n];if(i.indexOf(r.id)!==-1)return;i.push(r.id);const a=Ov(this.main,r),c=[];a.audio&&!xT(a.audio)&&!v1(a.audio)&&c.push(`audio codec ${a.audio}`),a.video&&!xT(a.video)&&!v1(a.video)&&c.push(`video codec ${a.video}`),a.text&&a.text==="stpp.ttml.im1t"&&c.push(`text codec ${a.text}`),c.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${c.join(", ")}`))})}excludeIncompatibleVariants_(e){const i=[],n=this.main().playlists,r=_b(Md(e)),a=MM(r),c=r.video&&Md(r.video)[0]||null,s=r.audio&&Md(r.audio)[0]||null;Object.keys(n).forEach(p=>{const _=n[p];if(i.indexOf(_.id)!==-1||_.excludeUntil===1/0)return;i.push(_.id);const b=[],S=Ov(this.mainPlaylistLoader_.main,_),E=MM(S);if(!(!S.audio&&!S.video)){if(E!==a&&b.push(`codec count "${E}" !== "${a}"`),!this.sourceUpdater_.canChangeType()){const I=S.video&&Md(S.video)[0]||null,R=S.audio&&Md(S.audio)[0]||null;I&&c&&I.type.toLowerCase()!==c.type.toLowerCase()&&b.push(`video codec "${I.type}" !== "${c.type}"`),R&&s&&R.type.toLowerCase()!==s.type.toLowerCase()&&b.push(`audio codec "${R.type}" !== "${s.type}"`)}b.length&&(_.excludeUntil=1/0,this.logger_(`excluding ${_.id}: ${b.join(" && ")}`))}})}updateAdCues_(e){let i=0;const n=this.seekable();n.length&&(i=n.start(0)),WY(e,this.cueTagsTrack_,i)}goalBufferLength(){const e=this.tech_.currentTime(),i=pa.GOAL_BUFFER_LENGTH,n=pa.GOAL_BUFFER_LENGTH_RATE,r=Math.max(i,pa.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*n,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),i=pa.BUFFER_LOW_WATER_LINE,n=pa.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(i,pa.MAX_BUFFER_LOW_WATER_LINE),a=Math.max(i,pa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*n,this.bufferBasedABR?a:r)}bufferHighWaterLine(){return pa.BUFFER_HIGH_WATER_LINE}}const fX=(t,e,i)=>n=>{const r=t.main.playlists[e],a=xk(r),c=Tx(r);return typeof n>"u"?c:(n?delete r.disabled:r.disabled=!0,n!==c&&!a&&(i(),n?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),n)};class pX{constructor(e,i,n){const{playlistController_:r}=e,a=r.fastQualityChange_.bind(r);if(i.attributes){const c=i.attributes.RESOLUTION;this.width=c&&c.width,this.height=c&&c.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=Ov(r.main(),i),this.playlist=i,this.id=n,this.enabled=fX(e.playlists,i.id,a)}}const mX=function(t){t.representations=()=>{const e=t.playlistController_.main(),i=ky(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return i?i.filter(n=>!xk(n)).map((n,r)=>new pX(t,n,n.id)):[]}},jM=["seeking","seeked","pause","playing","error"];class gX{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=ld("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),a=()=>this.resetTimeUpdate_(),c=this.playlistController_,s=["main","subtitle","audio"],p={};s.forEach(b=>{p[b]={reset:()=>this.resetSegmentDownloads_(b),updateend:()=>this.checkSegmentDownloads_(b)},c[`${b}SegmentLoader_`].on("appendsdone",p[b].updateend),c[`${b}SegmentLoader_`].on("playlistupdate",p[b].reset),this.tech_.on(["seeked","seeking"],p[b].reset)});const _=b=>{["main","audio"].forEach(S=>{c[`${S}SegmentLoader_`][b]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),_("off"))},this.clearSeekingAppendCheck_=()=>_("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),_("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(jM,a),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(jM,a),this.tech_.off("canplay",n),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),s.forEach(b=>{c[`${b}SegmentLoader_`].off("appendsdone",p[b].updateend),c[`${b}SegmentLoader_`].off("playlistupdate",p[b].reset),this.tech_.off(["seeked","seeking"],p[b].reset)}),this.checkCurrentTimeTimeout_&&yt.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&yt.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=yt.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const i=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=i.buffered_()}checkSegmentDownloads_(e){const i=this.playlistController_,n=i[`${e}SegmentLoader_`],r=n.buffered_(),a=pZ(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,a){this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:kp(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&i.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===e&&(!i.length||e+Rd>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),n=this.tech_.currentTime(),r=this.afterSeekableWindow_(i,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let a;if(r&&(a=i.end(i.length-1)),this.beforeSeekableWindow_(i,n)){const R=i.start(0);a=R+(R===i.end(0)?0:Rd)}if(typeof a<"u")return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${LR(i)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;const c=this.playlistController_.sourceUpdater_,s=this.tech_.buffered(),p=c.audioBuffer?c.audioBuffered():null,_=c.videoBuffer?c.videoBuffered():null,b=this.media(),S=b.partTargetDuration?b.partTargetDuration:(b.targetDuration-Df)*2,E=[p,_];for(let R=0;R<E.length;R++){if(!E[R])continue;if(yk(E[R],n)<S)return!1}const I=o1(s,n);return I.length===0?!1:(a=I.start(0)+Rd,this.logger_(`Buffered region starts (${I.start(0)})  just beyond seek point (${n}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),i=this.tech_.buffered(),n=Zm(i,e);if(n.length&&e+3<=n.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,i)){const s=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${s}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const c=o1(r,i);return c.length>0?(this.logger_(`Stopped at ${i} and seeking to ${c.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0):!1}afterSeekableWindow_(e,i,n,r=!1){if(!e.length)return!1;let a=e.end(e.length-1)+Rd;return!n.endList&&r&&(a=e.end(e.length-1)+n.targetDuration*3),i>a}beforeSeekableWindow_(e,i){return!!(e.length&&e.start(0)>0&&i<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:i,currentTime:n}){if(!e)return;let r;if(e.length&&i.length){const a=Zm(e,n-3),c=Zm(e,n),s=Zm(i,n);s.length&&!c.length&&a.length&&(r={start:a.end(0),end:s.end(0)})}else o1(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${n}`),!0):!1}skipTheGap_(e){const i=this.tech_.buffered(),n=this.tech_.currentTime(),r=o1(i,n);this.resetTimeUpdate_(),!(r.length===0||n!==e)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Df),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,i){const n=dZ(e);for(let r=0;r<n.length;r++){const a=n.start(r),c=n.end(r);if(i-a<4&&i-a>2)return{start:a,end:c}}return null}}const _X={errorInterval:30,getSource(t){const i=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(i)}},vB=function(t,e){let i=0,n=0;const r=hs(_X,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const a=function(){n&&t.currentTime(n)},c=function(b){b!=null&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(b),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},s=function(){if(Date.now()-i<r.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){ei.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),r.getSource.call(t,c)},p=function(){t.off("loadedmetadata",a),t.off("error",s),t.off("dispose",p)},_=function(b){p(),vB(t,b)};t.on("error",s),t.on("dispose",p),t.reloadSourceOnError=_},vX=function(t){vB(this,t)};var yB="3.0.0",yX="6.2.0",bX="1.0.1",xX="6.0.0",wX="4.0.1";const Fl={PlaylistLoader:Ym,Playlist:_u,utils:FZ,STANDARD_PLAYLIST_SELECTOR:LM,INITIAL_PLAYLIST_SELECTOR:TY,lastBandwidthSelector:LM,movingAverageBandwidthSelector:xY,comparePlaylistBandwidth:Ck,comparePlaylistResolution:bY,xhr:ZR()};Object.keys(pa).forEach(t=>{Object.defineProperty(Fl,t,{get(){return ei.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),pa[t]},set(e){if(ei.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){ei.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}pa[t]=e}})});const bB="videojs-vhs",xB=function(t,e){const i=e.media();let n=-1;for(let r=0;r<t.length;r++)if(t[r].id===i.id){n=r;break}t.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})},TX=function(t,e){e.representations().forEach(i=>{t.addQualityLevel(i)}),xB(t,e.playlists)};Fl.canPlaySource=function(){return ei.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const SX=(t,e,i)=>{if(!t)return t;let n={};e&&e.attributes&&e.attributes.CODECS&&(n=_b(Md(e.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);const r=Yv(n.video),a=Yv(n.audio),c={};for(const s in t)c[s]={},a&&(c[s].audioContentType=a),r&&(c[s].videoContentType=r),e.contentProtection&&e.contentProtection[s]&&e.contentProtection[s].pssh&&(c[s].pssh=e.contentProtection[s].pssh),typeof t[s]=="string"&&(c[s].url=t[s]);return hs(t,c)},CX=(t,e)=>t.reduce((i,n)=>{if(!n.contentProtection)return i;const r=e.reduce((a,c)=>{const s=n.contentProtection[c];return s&&s.pssh&&(a[c]={pssh:s.pssh}),a},{});return Object.keys(r).length&&i.push(r),i},[]),kX=({player:t,sourceKeySystems:e,audioMedia:i,mainPlaylists:n})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const r=i?n.concat([i]):n,a=CX(r,Object.keys(e)),c=[],s=[];return a.forEach(p=>{s.push(new Promise((_,b)=>{t.tech_.one("keysessioncreated",_)})),c.push(new Promise((_,b)=>{t.eme.initializeMediaKeys({keySystems:p},S=>{if(S){b(S);return}_()})}))}),Promise.race([Promise.all(c),Promise.race(s)])},EX=({player:t,sourceKeySystems:e,media:i,audioMedia:n})=>{const r=SX(e,i,n);return r?(t.currentSource().keySystems=r,r&&!t.eme?(ei.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},wB=()=>{if(!yt.localStorage)return null;const t=yt.localStorage.getItem(bB);if(!t)return null;try{return JSON.parse(t)}catch{return null}},IX=t=>{if(!yt.localStorage)return!1;let e=wB();e=e?hs(e,t):t;try{yt.localStorage.setItem(bB,JSON.stringify(e))}catch{return!1}return e},PX=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t;Fl.supportsNativeHls=function(){if(!ji||!ji.createElement)return!1;const t=ji.createElement("video");return ei.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(t.canPlayType(i))}):!1}();Fl.supportsNativeDash=function(){return!ji||!ji.createElement||!ei.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(ji.createElement("video").canPlayType("application/dash+xml"))}();Fl.supportsTypeNatively=t=>t==="hls"?Fl.supportsNativeHls:t==="dash"?Fl.supportsNativeDash:!1;Fl.isSupported=function(){return ei.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const AX=ei.getComponent("Component");class TB extends AX{constructor(e,i,n){if(super(i,n.vhs),typeof n.initialBandwidth=="number"&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=ld("VhsHandler"),i.options_&&i.options_.playerId){const r=ei.getPlayer(i.options_.playerId);this.player_=r}if(this.tech_=i,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(ji,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const a=ji.fullscreenElement||ji.webkitFullscreenElement||ji.mozFullScreenElement||ji.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const e=wB();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=pa.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===pa.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,i){if(!e)return;this.setOptions_(),this.options_.src=PX(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Fl,this.options_.sourceType=M4(i),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.playlistController_=new hX(this.options_);const n=hs({liveRangeSafeTimeDelta:Rd},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new gX(n),this.playlistController_.on("error",()=>{const a=ei.players[this.tech_.options_.playerId];let c=this.playlistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),a.error(c)});const r=this.options_.bufferBasedABR?Fl.movingAverageBandwidthSelector(.55):Fl.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=Fl.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;const c=yt.navigator.connection||yt.navigator.mozConnection||yt.navigator.webkitConnection,s=1e7;if(this.options_.useNetworkInformationApi&&c){const p=c.downlink*1e3*1e3;p>=s&&a>=s?a=Math.max(a,p):a=p}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const a=1/(this.bandwidth||1);let c;return this.throughput>0?c=1/this.throughput:c=0,Math.floor(1/(a+c))},set(){ei.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>kp(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>kp(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&IX({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{mX(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=yt.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),kX({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=EX({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",n=>{if(n.status!=="output-restricted")return;const r=this.playlistController_.main();if(!r||!r.playlists)return;const a=[];r.playlists.forEach(c=>{c&&c.attributes&&c.attributes.RESOLUTION&&c.attributes.RESOLUTION.height>=720&&(!c.excludeUntil||c.excludeUntil<1/0)&&(c.excludeUntil=1/0,a.push(c))}),a.length&&(ei.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...a),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),ei.browser.IE_VERSION===11||!i){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=ei.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{TX(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{xB(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":yB,"mux.js":yX,"mpd-parser":bX,"m3u8-parser":xX,"aes-decrypter":wX}}version(){return this.constructor.version()}canChangeType(){return gB.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&yt.URL.revokeObjectURL&&(yt.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,i){return HZ({playlist:this.playlistController_.media(),time:e,callback:i})}seekToProgramTime(e,i,n=!0,r=2){return JR({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}const kk={name:"videojs-http-streaming",VERSION:yB,canHandleSource(t,e={}){const i=hs(ei.options,e);return kk.canPlayType(t.type,i)},handleSource(t,e,i={}){const n=hs(ei.options,i);return e.vhs=new TB(t,e,n),e.vhs.xhr=ZR(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e={}){const{vhs:{overrideNative:i=!ei.browser.IS_ANY_SAFARI}={}}=hs(ei.options,e),n=M4(t);return n&&(!Fl.supportsTypeNatively(n)||i)?"maybe":""}},MX=()=>v1("avc1.4d400d,mp4a.40.2");MX()&&ei.getTech("Html5").registerSourceHandler(kk,0);ei.VhsHandler=TB;ei.VhsSourceHandler=kk;ei.Vhs=Fl;ei.use||ei.registerComponent("Vhs",Fl);ei.options.vhs=ei.options.vhs||{};(!ei.getPlugin||!ei.getPlugin("reloadSourceOnError"))&&ei.registerPlugin("reloadSourceOnError",vX);function $T(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}var OX={src:{type:String,onChange:function(t,e){return t.src(e)}},width:{type:Number,onChange:function(t,e){return t.width(e)},onEvent:function(t,e){t.on(["playerresize","resize"],function(){return e(t.width())})}},height:{type:Number,onChange:function(t,e){return t.height(e)},onEvent:function(t,e){t.on(["playerresize","resize"],function(){return e(t.height())})}},preload:{type:String,onChange:function(t,e){return t.preload(e)}},loop:{type:Boolean,onChange:function(t,e){return t.loop(e)}},muted:{type:Boolean,onChange:function(t,e){return t.muted(e)},onEvent:function(t,e){return t.on("volumechange",function(){return e(t.muted())})}},poster:{type:String,onChange:function(t,e){return t.poster(e)},onEvent:function(t,e){return t.on("posterchange",function(){return e(t.poster())})}},controls:{type:Boolean,onChange:function(t,e){return t.controls(e)},onEvent:function(t,e){t.on("controlsenabled",function(){return e(!0)}),t.on("controlsdisabled",function(){return e(!1)})}},autoplay:{type:[Boolean,String],onChange:function(t,e){return t.autoplay(e)}},crossorigin:{type:String,onChange:function(t,e){return t.crossOrigin(e)}},crossOrigin:{type:String,onChange:function(t,e){return t.crossOrigin(e)}},playsinline:{type:Boolean,onChange:function(t,e){return t.playsinline(e)}},playsInline:{type:Boolean,onChange:function(t,e){return t.playsinline(e)}}},LX={id:{type:String},sources:{type:Array,onChange:function(t,e){return t.src(e)}},tracks:{type:Array,onChange:function(t,e){for(var i=t.remoteTextTracks(),n=(i==null?void 0:i.length)||0;n--;)t.removeRemoteTextTrack(i[n]);t.ready(function(){e.forEach(function(r){return t.addRemoteTextTrack(r,!1)})})}},textTrackSettings:{type:Object,onChange:function(t,e){return t.textTrackSettings.options(e)}},language:{type:String,onChange:function(t,e){return t.language(e)},onEvent:function(t,e){return t.on("languagechange",function(){return e(t.language())})}},languages:{type:Object},playbackRates:{type:Array,onChange:function(t,e){return t.playbackRates(e??[])},onEvent:function(t,e){t.on("playbackrateschange",function(){return e(t.playbackRates())})}},audioOnlyMode:{type:Boolean,onChange:function(t,e){return t.audioOnlyMode(e)}},audioPosterMode:{type:Boolean,onChange:function(t,e){return t.audioPosterMode(e)}},responsive:{type:Boolean,onChange:function(t,e){return t.responsive(e)}},breakpoints:{type:Object,onChange:function(t,e){return t.breakpoints(e)}},fluid:{type:Boolean,onChange:function(t,e){return t.fluid(e)}},fill:{type:Boolean,onChange:function(t,e){return t.fill(e)}},aspectRatio:{type:String,onChange:function(t,e){return t.aspectRatio(e)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(t,e){return t.disablePictureInPicture(e)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},DX={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(t,e){return t.controlBar.options(e)}}},RX={html5:{type:Object}},BX={volume:{type:Number,onChange:function(t,e){return t.volume(e)},onEvent:function(t,e){return t.on("volumechange",function(){return e(t.volume())})}},playbackRate:{type:Number,onChange:function(t,e){t.playbackRate(e),t.defaultPlaybackRate(e)},onEvent:function(t,e){t.on("ratechange",function(){e(t.playbackRate())})}},options:{type:Object}},ny=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},OX),LX),DX),RX),BX),Ek=Object.keys(ny),SB=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),CB=Object.keys(SB);Object.values(SB);var NT=function(t){var e,i=t==null?void 0:t.trim().replace(/\s+/g," ");return i&&(e=i.split(" "))!==null&&e!==void 0?e:[]},zT={src:{getter:function(t){return t.src()}},currentSrc:{getter:function(t){return t.currentSrc()}},currentSource:{getter:function(t){return t.currentSource()}},width:{events:["resize","playerresize"],getter:function(t){return t.width()}},height:{events:["resize","playerresize"],getter:function(t){return t.height()}},currentWidth:{events:["resize","playerresize"],getter:function(t){return t.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(t){return t.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(t){return t.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(t){return t.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(t){return t.controls()}},volume:{events:["volumechange"],getter:function(t){return t.volume()}},muted:{events:["volumechange"],getter:function(t){return t.muted()}},poster:{events:["posterchange"],getter:function(t){return t.poster()}},seeking:{events:["seeking"],getter:function(t){return t.seeking()}},paused:{events:["pause","play","playing"],getter:function(t){return t.paused()}},ended:{events:["ended","play"],getter:function(t){return t.ended()}},currentTime:{events:["timeupdate"],getter:function(t){return t.currentTime()}},duration:{events:["durationchange"],getter:function(t){return t.duration()}},playbackRate:{events:["ratechange"],getter:function(t){return t.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(t){return t.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(t){return t.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(t){return t.isInPictureInPicture()}},isLive:{getter:function(t){var e;return(e=t.liveTracker)===null||e===void 0?void 0:e.isLive()}},language:{events:["languagechange"],getter:function(t){return t.language()}},userActive:{events:["useractive","userinactive"],getter:function(t){return t.userActive()}},readyState:{events:["loadeddata"],getter:function(t){return t.readyState()}},networkState:{events:["loadeddata","error"],getter:function(t){return t.networkState()}},error:{events:["loadeddata","error"],getter:function(t){return t.error()}},buffered:{events:["progress"],getter:function(t){return t.buffered()}},bufferedPercent:{events:["progress"],getter:function(t){return t.bufferedPercent()}},played:{events:["timeupdate"],getter:function(t){return t.played()}},seekable:{events:["progress","seeked"],getter:function(t){return t.seekable()}},audioTracks:{getter:function(t){var e;return(e=t.audioTracks)===null||e===void 0?void 0:e.call(t)}},videoTracks:{getter:function(t){var e;return(e=t.videoTracks)===null||e===void 0?void 0:e.call(t)}},textTracks:{getter:function(t){var e;return(e=t.textTracks)===null||e===void 0?void 0:e.call(t)}}},kB=Ek.filter(function(t){return!!ny[t].onEvent}),EB=function(t){return"update:"+t},FX=CB.concat(kB.map(EB)),$X=Ek.reduce(function(t,e){var i,n=ny[e],r=Array.isArray(n.type)?n.type:[n.type],a=Object.assign({},n);return r.includes(Boolean)&&(a.default=void 0),Object.assign(Object.assign({},t),((i={})[e]=a,i))},{}),w1=qn({name:"VueVideoPlayer",props:Object.assign(Object.assign({},$X),{class:[String,Object,Array]}),emits:FX.concat(["mounted"],["unmounted"]),setup:function(t,e){var i=Wn(t),n=i.class,r=$T(i,["class"]),a=Tf(!1),c=Tf(null),s=Tf(null),p=Me(function(){return s.value?s.value.player:null}),_=lt(null),b=Me(function(){return _.value?Zp(_.value):null});return Fn(function(){var S,E=function(I){var R,V=I.props,q=I.element,U=I.className,H=I.onEvent,Z=V.options;Z===void 0&&(Z={});var ne=$T(V,["options"]),ie={};Object.keys(ne).forEach(function(Oe){var ke=ne[Oe];ke!==void 0&&(ie[Oe]=ke)});var oe=Object.assign(Object.assign({},ie),Z),pe=oe.volume,de=oe.playbackRate,fe=$T(oe,["volume","playbackRate"]),ge=Object.assign(Object.assign({},fe),{playsinline:(R=fe.playsinline)!==null&&R!==void 0?R:fe.playsInline}),we=ei(q,ge,function(){var Oe=this;CB.forEach(function(ke){Oe.on(ke,function(Ee){H(ke,Ee)})}),fe.src&&!fe.sources&&this.src(fe.src),pe&&Number.isFinite(pe)&&this.volume(pe),de&&Number.isFinite(de)&&(this.defaultPlaybackRate(de),setTimeout(function(){Oe.playbackRate(de)},0))});U&&NT(U).map(function(Oe){return we.addClass(Oe)});var Ie=function(Oe){var ke;(ke=we.options)===null||ke===void 0||ke.call(we,Oe??{})};return{player:we,dispose:function(){return we.dispose()},updateClassNames:function(Oe,ke){NT(Oe).map(function(Ee){return we.removeClass(Ee)}),NT(ke).map(function(Ee){return we.addClass(Ee)})},updateOptions:Ie,updatePropOption:function(Oe,ke){var Ee,Qe,gt;Ie(((Ee={})[Oe]=ke,Ee)),(gt=(Qe=ny[Oe])===null||Qe===void 0?void 0:Qe.onChange)===null||gt===void 0||gt.call(Qe,we,ke)}}}({element:c.value,props:r,onEvent:e.emit});S={player:E.player,onEvent:e.emit},kB.forEach(function(I){var R,V;(V=(R=ny[I])===null||R===void 0?void 0:R.onEvent)===null||V===void 0||V.call(R,S.player,function(q){S.onEvent(EB(I),q)})}),Fi(function(){return t.class},function(I,R){var V=Zs(R),q=Zs(I);E.updateClassNames(V,q)},{immediate:!0}),Fi(function(){return t.options},function(I){return E.updateOptions(I??{})},{deep:!0}),Ek.filter(function(I){return I!=="options"}).forEach(function(I){Fi(function(){return t[I]},function(R){return E.updatePropOption(I,R)},{deep:!0})}),function(I,R){var V=Object.keys(zT),q=V.reduce(function(H,Z){var ne;return Object.assign(Object.assign({},H),((ne={})[Z]=zT[Z].getter(I),ne))},{playing:!1,waiting:!1}),U=function(H,Z){q[H]=Z,R.onUpdate(H,Z,Object.assign({},q))};I.on(["pause","ended"],function(){U("playing",!1)}),I.on(["play","playing"],function(){U("playing",!0)}),I.on("waiting",function(){U("waiting",!0);var H=I.currentTime(),Z=function(){H!==I.currentTime()&&(U("waiting",!1),I.off("timeupdate",Z))};I.on("timeupdate",Z)}),V.forEach(function(H){var Z,ne=zT[H];I.on(["loadstart","loadedmetadata"].concat((Z=ne.events)!==null&&Z!==void 0?Z:[]),function(){U(H,ne.getter(I))})}),R.onInit(Object.assign({},q))}(E.player,{onInit:function(I){_.value=I},onUpdate:function(I,R){_.value&&(_.value[I]=R)}}),s.value=E,a.value=!0,e.emit("mounted",{video:c.value,player:p.value,state:b.value})}),as(function(){s.value&&(s.value.dispose(),s.value=null,_.value=null,e.emit("unmounted"))}),function(){var S,E;return Ns("div",{"data-vjs-player":"",class:Zs(n)},[Ns("video",{class:["video-js","v-video-player"],ref:c}),a.value&&((E=(S=e.slots).default)===null||E===void 0?void 0:E.call(S,{video:c.value,player:p.value,state:b.value}))])}}}),NX=function(t){t.component("VideoPlayer",w1),t.component(w1.name,w1)},zX={VideoPlayer:w1,install:NX};/*! vue-countdown v2.1.1 | (c) 2018-present Chen Fengyuan | MIT */const T1=1e3,S1=60*T1,C1=60*S1,HM=24*C1,GM="abort",WM="end",qM="progress",ZM="start",YM="visibilitychange";var XM=qn({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:t=>t>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:t=>t>=0},transform:{type:Function,default:t=>t}},emits:[GM,WM,qM,ZM],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/HM)},hours(){return Math.floor(this.totalMilliseconds%HM/C1)},minutes(){return Math.floor(this.totalMilliseconds%C1/S1)},seconds(){return Math.floor(this.totalMilliseconds%S1/T1)},milliseconds(){return Math.floor(this.totalMilliseconds%T1)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/C1)},totalMinutes(){return Math.floor(this.totalMilliseconds/S1)},totalSeconds(){return Math.floor(this.totalMilliseconds/T1)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(YM,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(YM,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit(ZM),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const t=Math.min(this.totalMilliseconds,this.interval);if(t>0){let e,i;const n=r=>{e||(e=r),i||(i=r);const a=r-e;a>=t||a+(r-i)/2>=t?this.progress():this.requestId=requestAnimationFrame(n),i=r};this.requestId=requestAnimationFrame(n)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(qM,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(GM))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(WM))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return Ns(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}}),oS={},VX={get exports(){return oS},set exports(t){oS=t}};const IB=TC(PU);(function(t){t.exports=function(e){var i={};function n(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=i,n.d=function(r,a,c){n.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:c})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,a){if(a&1&&(r=n(r)),a&8||a&4&&typeof r=="object"&&r&&r.__esModule)return r;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),a&2&&typeof r!="string")for(var s in r)n.d(c,s,function(p){return r[p]}.bind(null,s));return c},n.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(a,"a",a),a},n.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},n.p="",n(n.s="fb15")}({"014b":function(e,i,n){var r=n("e53d"),a=n("07e3"),c=n("8e60"),s=n("63b6"),p=n("9138"),_=n("ebfd").KEY,b=n("294c"),S=n("dbdb"),E=n("45f2"),I=n("62a0"),R=n("5168"),V=n("ccb9"),q=n("6718"),U=n("47ee"),H=n("9003"),Z=n("e4ae"),ne=n("f772"),ie=n("241e"),oe=n("36c3"),pe=n("1bc3"),de=n("aebd"),fe=n("a159"),ge=n("0395"),we=n("bf0b"),Ie=n("9aa9"),Oe=n("d9f6"),ke=n("c3a1"),Ee=we.f,Qe=Oe.f,gt=ge.f,nt=r.Symbol,ft=r.JSON,Tt=ft&&ft.stringify,pt="prototype",et=R("_hidden"),Mt=R("toPrimitive"),Qt={}.propertyIsEnumerable,Fe=S("symbol-registry"),tt=S("symbols"),Rt=S("op-symbols"),Xt=Object[pt],Ei=typeof nt=="function"&&!!Ie.f,Ni=r.QObject,Vi=!Ni||!Ni[pt]||!Ni[pt].findChild,Ve=c&&b(function(){return fe(Qe({},"a",{get:function(){return Qe(this,"a",{value:7}).a}})).a!=7})?function(Ci,ci,Si){var sn=Ee(Xt,ci);sn&&delete Xt[ci],Qe(Ci,ci,Si),sn&&Ci!==Xt&&Qe(Xt,ci,sn)}:Qe,dt=function(Ci){var ci=tt[Ci]=fe(nt[pt]);return ci._k=Ci,ci},kt=Ei&&typeof nt.iterator=="symbol"?function(Ci){return typeof Ci=="symbol"}:function(Ci){return Ci instanceof nt},Xe=function(ci,Si,sn){return ci===Xt&&Xe(Rt,Si,sn),Z(ci),Si=pe(Si,!0),Z(sn),a(tt,Si)?(sn.enumerable?(a(ci,et)&&ci[et][Si]&&(ci[et][Si]=!1),sn=fe(sn,{enumerable:de(0,!1)})):(a(ci,et)||Qe(ci,et,de(1,{})),ci[et][Si]=!0),Ve(ci,Si,sn)):Qe(ci,Si,sn)},it=function(ci,Si){Z(ci);for(var sn=U(Si=oe(Si)),vn=0,hn=sn.length,Nn;hn>vn;)Xe(ci,Nn=sn[vn++],Si[Nn]);return ci},ct=function(ci,Si){return Si===void 0?fe(ci):it(fe(ci),Si)},At=function(ci){var Si=Qt.call(this,ci=pe(ci,!0));return this===Xt&&a(tt,ci)&&!a(Rt,ci)?!1:Si||!a(this,ci)||!a(tt,ci)||a(this,et)&&this[et][ci]?Si:!0},Gt=function(ci,Si){if(ci=oe(ci),Si=pe(Si,!0),!(ci===Xt&&a(tt,Si)&&!a(Rt,Si))){var sn=Ee(ci,Si);return sn&&a(tt,Si)&&!(a(ci,et)&&ci[et][Si])&&(sn.enumerable=!0),sn}},Bt=function(ci){for(var Si=gt(oe(ci)),sn=[],vn=0,hn;Si.length>vn;)!a(tt,hn=Si[vn++])&&hn!=et&&hn!=_&&sn.push(hn);return sn},Yt=function(ci){for(var Si=ci===Xt,sn=gt(Si?Rt:oe(ci)),vn=[],hn=0,Nn;sn.length>hn;)a(tt,Nn=sn[hn++])&&(!Si||a(Xt,Nn))&&vn.push(tt[Nn]);return vn};Ei||(nt=function(){if(this instanceof nt)throw TypeError("Symbol is not a constructor!");var ci=I(arguments.length>0?arguments[0]:void 0),Si=function(sn){this===Xt&&Si.call(Rt,sn),a(this,et)&&a(this[et],ci)&&(this[et][ci]=!1),Ve(this,ci,de(1,sn))};return c&&Vi&&Ve(Xt,ci,{configurable:!0,set:Si}),dt(ci)},p(nt[pt],"toString",function(){return this._k}),we.f=Gt,Oe.f=Xe,n("6abf").f=ge.f=Bt,n("355d").f=At,Ie.f=Yt,c&&!n("b8e3")&&p(Xt,"propertyIsEnumerable",At,!0),V.f=function(Ci){return dt(R(Ci))}),s(s.G+s.W+s.F*!Ei,{Symbol:nt});for(var gi="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),_i=0;gi.length>_i;)R(gi[_i++]);for(var zi=ke(R.store),Hi=0;zi.length>Hi;)q(zi[Hi++]);s(s.S+s.F*!Ei,"Symbol",{for:function(Ci){return a(Fe,Ci+="")?Fe[Ci]:Fe[Ci]=nt(Ci)},keyFor:function(ci){if(!kt(ci))throw TypeError(ci+" is not a symbol!");for(var Si in Fe)if(Fe[Si]===ci)return Si},useSetter:function(){Vi=!0},useSimple:function(){Vi=!1}}),s(s.S+s.F*!Ei,"Object",{create:ct,defineProperty:Xe,defineProperties:it,getOwnPropertyDescriptor:Gt,getOwnPropertyNames:Bt,getOwnPropertySymbols:Yt});var Zi=b(function(){Ie.f(1)});s(s.S+s.F*Zi,"Object",{getOwnPropertySymbols:function(ci){return Ie.f(ie(ci))}}),ft&&s(s.S+s.F*(!Ei||b(function(){var Ci=nt();return Tt([Ci])!="[null]"||Tt({a:Ci})!="{}"||Tt(Object(Ci))!="{}"})),"JSON",{stringify:function(ci){for(var Si=[ci],sn=1,vn,hn;arguments.length>sn;)Si.push(arguments[sn++]);if(hn=vn=Si[1],!(!ne(vn)&&ci===void 0||kt(ci)))return H(vn)||(vn=function(Nn,yr){if(typeof hn=="function"&&(yr=hn.call(this,Nn,yr)),!kt(yr))return yr}),Si[1]=vn,Tt.apply(ft,Si)}}),nt[pt][Mt]||n("35e8")(nt[pt],Mt,nt[pt].valueOf),E(nt,"Symbol"),E(Math,"Math",!0),E(r.JSON,"JSON",!0)},"01f9":function(e,i,n){var r=n("2d00"),a=n("5ca1"),c=n("2aba"),s=n("32e9"),p=n("84f2"),_=n("41a0"),b=n("7f20"),S=n("38fd"),E=n("2b4c")("iterator"),I=!([].keys&&"next"in[].keys()),R="@@iterator",V="keys",q="values",U=function(){return this};e.exports=function(H,Z,ne,ie,oe,pe,de){_(ne,Z,ie);var fe=function(pt){if(!I&&pt in Oe)return Oe[pt];switch(pt){case V:return function(){return new ne(this,pt)};case q:return function(){return new ne(this,pt)}}return function(){return new ne(this,pt)}},ge=Z+" Iterator",we=oe==q,Ie=!1,Oe=H.prototype,ke=Oe[E]||Oe[R]||oe&&Oe[oe],Ee=ke||fe(oe),Qe=oe?we?fe("entries"):Ee:void 0,gt=Z=="Array"&&Oe.entries||ke,nt,ft,Tt;if(gt&&(Tt=S(gt.call(new H)),Tt!==Object.prototype&&Tt.next&&(b(Tt,ge,!0),!r&&typeof Tt[E]!="function"&&s(Tt,E,U))),we&&ke&&ke.name!==q&&(Ie=!0,Ee=function(){return ke.call(this)}),(!r||de)&&(I||Ie||!Oe[E])&&s(Oe,E,Ee),p[Z]=Ee,p[ge]=U,oe)if(nt={values:we?Ee:fe(q),keys:pe?Ee:fe(V),entries:Qe},de)for(ft in nt)ft in Oe||c(Oe,ft,nt[ft]);else a(a.P+a.F*(I||Ie),Z,nt);return nt}},"0395":function(e,i,n){var r=n("36c3"),a=n("6abf").f,c={}.toString,s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(_){try{return a(_)}catch{return s.slice()}};e.exports.f=function(b){return s&&c.call(b)=="[object Window]"?p(b):a(r(b))}},"0750":function(e,i,n){Object.defineProperty(i,"__esModule",{value:!0}),i.default={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"}},"07e3":function(e,i){var n={}.hasOwnProperty;e.exports=function(r,a){return n.call(r,a)}},"0a49":function(e,i,n){var r=n("9b43"),a=n("626a"),c=n("4bf8"),s=n("9def"),p=n("cd1c");e.exports=function(_,b){var S=_==1,E=_==2,I=_==3,R=_==4,V=_==6,q=_==5||V,U=b||p;return function(H,Z,ne){for(var ie=c(H),oe=a(ie),pe=r(Z,ne,3),de=s(oe.length),fe=0,ge=S?U(H,de):E?U(H,0):void 0,we,Ie;de>fe;fe++)if((q||fe in oe)&&(we=oe[fe],Ie=pe(we,fe,ie),_)){if(S)ge[fe]=Ie;else if(Ie)switch(_){case 3:return!0;case 5:return we;case 6:return fe;case 2:ge.push(we)}else if(R)return!1}return V?-1:I||R?R:ge}}},"0bfb":function(e,i,n){var r=n("cb7c");e.exports=function(){var a=r(this),c="";return a.global&&(c+="g"),a.ignoreCase&&(c+="i"),a.multiline&&(c+="m"),a.unicode&&(c+="u"),a.sticky&&(c+="y"),c}},"0d58":function(e,i,n){var r=n("ce10"),a=n("e11e");e.exports=Object.keys||function(s){return r(s,a)}},"0fc9":function(e,i,n){var r=n("3a38"),a=Math.max,c=Math.min;e.exports=function(s,p){return s=r(s),s<0?a(s+p,0):c(s,p)}},1169:function(e,i,n){var r=n("2d95");e.exports=Array.isArray||function(c){return r(c)=="Array"}},1173:function(e,i){e.exports=function(n,r,a,c){if(!(n instanceof r)||c!==void 0&&c in n)throw TypeError(a+": incorrect invocation!");return n}},"11e9":function(e,i,n){var r=n("52a7"),a=n("4630"),c=n("6821"),s=n("6a99"),p=n("69a8"),_=n("c69a"),b=Object.getOwnPropertyDescriptor;i.f=n("9e1e")?b:function(E,I){if(E=c(E),I=s(I,!0),_)try{return b(E,I)}catch{}if(p(E,I))return a(!r.f.call(E,I),E[I])}},1495:function(e,i,n){var r=n("86cc"),a=n("cb7c"),c=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(p,_){a(p);for(var b=c(_),S=b.length,E=0,I;S>E;)r.f(p,I=b[E++],_[I]);return p}},1654:function(e,i,n){var r=n("71c1")(!0);n("30f1")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a=this._t,c=this._i,s;return c>=a.length?{value:void 0,done:!0}:(s=r(a,c),this._i+=s.length,{value:s,done:!1})})},1691:function(e,i){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1af6":function(e,i,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1bc3":function(e,i,n){var r=n("f772");e.exports=function(a,c){if(!r(a))return a;var s,p;if(c&&typeof(s=a.toString)=="function"&&!r(p=s.call(a))||typeof(s=a.valueOf)=="function"&&!r(p=s.call(a))||!c&&typeof(s=a.toString)=="function"&&!r(p=s.call(a)))return p;throw TypeError("Can't convert object to primitive value")}},"1c15":function(e,i,n){Object.defineProperty(i,"__esModule",{value:!0}),i.default=(r,a=1)=>{if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(r)){let c=r.substring(1).split("");c.length===3&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]);const s=`0x${c.join("")}`;return`rgba(${[s>>16&255,s>>8&255,s&255].join(", ")}, ${a})`}throw new Error("Bad Hex")}},"1ec9":function(e,i,n){var r=n("f772"),a=n("e53d").document,c=r(a)&&r(a.createElement);e.exports=function(s){return c?a.createElement(s):{}}},"20d6":function(e,i,n){var r=n("5ca1"),a=n("0a49")(6),c="findIndex",s=!0;c in[]&&Array(1)[c](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(_){return a(this,_,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(c)},"20fd":function(e,i,n){var r=n("d9f6"),a=n("aebd");e.exports=function(c,s,p){s in c?r.f(c,s,a(0,p)):c[s]=p}},"230e":function(e,i,n){var r=n("d3f4"),a=n("7726").document,c=r(a)&&r(a.createElement);e.exports=function(s){return c?a.createElement(s):{}}},"241e":function(e,i,n){var r=n("25eb");e.exports=function(a){return Object(r(a))}},"24c5":function(e,i,n){var r=n("b8e3"),a=n("e53d"),c=n("d864"),s=n("40c3"),p=n("63b6"),_=n("f772"),b=n("79aa"),S=n("1173"),E=n("a22a"),I=n("f201"),R=n("4178").set,V=n("aba2")(),q=n("656e"),U=n("4439"),H=n("bc13"),Z=n("cd78"),ne="Promise",ie=a.TypeError,oe=a.process,pe=oe&&oe.versions,de=pe&&pe.v8||"",fe=a[ne],ge=s(oe)=="process",we=function(){},Ie,Oe,ke,Ee,Qe=Oe=q.f,gt=!!function(){try{var Fe=fe.resolve(1),tt=(Fe.constructor={})[n("5168")("species")]=function(Rt){Rt(we,we)};return(ge||typeof PromiseRejectionEvent=="function")&&Fe.then(we)instanceof tt&&de.indexOf("6.6")!==0&&H.indexOf("Chrome/66")===-1}catch{}}(),nt=function(Fe){var tt;return _(Fe)&&typeof(tt=Fe.then)=="function"?tt:!1},ft=function(Fe,tt){if(!Fe._n){Fe._n=!0;var Rt=Fe._c;V(function(){for(var Xt=Fe._v,Ei=Fe._s==1,Ni=0,Vi=function(Ve){var dt=Ei?Ve.ok:Ve.fail,kt=Ve.resolve,Xe=Ve.reject,it=Ve.domain,ct,At,Gt;try{dt?(Ei||(Fe._h==2&&et(Fe),Fe._h=1),dt===!0?ct=Xt:(it&&it.enter(),ct=dt(Xt),it&&(it.exit(),Gt=!0)),ct===Ve.promise?Xe(ie("Promise-chain cycle")):(At=nt(ct))?At.call(ct,kt,Xe):kt(ct)):Xe(Xt)}catch(Bt){it&&!Gt&&it.exit(),Xe(Bt)}};Rt.length>Ni;)Vi(Rt[Ni++]);Fe._c=[],Fe._n=!1,tt&&!Fe._h&&Tt(Fe)})}},Tt=function(Fe){R.call(a,function(){var tt=Fe._v,Rt=pt(Fe),Xt,Ei,Ni;if(Rt&&(Xt=U(function(){ge?oe.emit("unhandledRejection",tt,Fe):(Ei=a.onunhandledrejection)?Ei({promise:Fe,reason:tt}):(Ni=a.console)&&Ni.error&&Ni.error("Unhandled promise rejection",tt)}),Fe._h=ge||pt(Fe)?2:1),Fe._a=void 0,Rt&&Xt.e)throw Xt.v})},pt=function(Fe){return Fe._h!==1&&(Fe._a||Fe._c).length===0},et=function(Fe){R.call(a,function(){var tt;ge?oe.emit("rejectionHandled",Fe):(tt=a.onrejectionhandled)&&tt({promise:Fe,reason:Fe._v})})},Mt=function(Fe){var tt=this;tt._d||(tt._d=!0,tt=tt._w||tt,tt._v=Fe,tt._s=2,tt._a||(tt._a=tt._c.slice()),ft(tt,!0))},Qt=function(Fe){var tt=this,Rt;if(!tt._d){tt._d=!0,tt=tt._w||tt;try{if(tt===Fe)throw ie("Promise can't be resolved itself");(Rt=nt(Fe))?V(function(){var Xt={_w:tt,_d:!1};try{Rt.call(Fe,c(Qt,Xt,1),c(Mt,Xt,1))}catch(Ei){Mt.call(Xt,Ei)}}):(tt._v=Fe,tt._s=1,ft(tt,!1))}catch(Xt){Mt.call({_w:tt,_d:!1},Xt)}}};gt||(fe=function(tt){S(this,fe,ne,"_h"),b(tt),Ie.call(this);try{tt(c(Qt,this,1),c(Mt,this,1))}catch(Rt){Mt.call(this,Rt)}},Ie=function(tt){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Ie.prototype=n("5c95")(fe.prototype,{then:function(tt,Rt){var Xt=Qe(I(this,fe));return Xt.ok=typeof tt=="function"?tt:!0,Xt.fail=typeof Rt=="function"&&Rt,Xt.domain=ge?oe.domain:void 0,this._c.push(Xt),this._a&&this._a.push(Xt),this._s&&ft(this,!1),Xt.promise},catch:function(Fe){return this.then(void 0,Fe)}}),ke=function(){var Fe=new Ie;this.promise=Fe,this.resolve=c(Qt,Fe,1),this.reject=c(Mt,Fe,1)},q.f=Qe=function(Fe){return Fe===fe||Fe===Ee?new ke(Fe):Oe(Fe)}),p(p.G+p.W+p.F*!gt,{Promise:fe}),n("45f2")(fe,ne),n("4c95")(ne),Ee=n("584a")[ne],p(p.S+p.F*!gt,ne,{reject:function(tt){var Rt=Qe(this),Xt=Rt.reject;return Xt(tt),Rt.promise}}),p(p.S+p.F*(r||!gt),ne,{resolve:function(tt){return Z(r&&this===Ee?fe:this,tt)}}),p(p.S+p.F*!(gt&&n("4ee1")(function(Fe){fe.all(Fe).catch(we)})),ne,{all:function(tt){var Rt=this,Xt=Qe(Rt),Ei=Xt.resolve,Ni=Xt.reject,Vi=U(function(){var Ve=[],dt=0,kt=1;E(tt,!1,function(Xe){var it=dt++,ct=!1;Ve.push(void 0),kt++,Rt.resolve(Xe).then(function(At){ct||(ct=!0,Ve[it]=At,--kt||Ei(Ve))},Ni)}),--kt||Ei(Ve)});return Vi.e&&Ni(Vi.v),Xt.promise},race:function(tt){var Rt=this,Xt=Qe(Rt),Ei=Xt.reject,Ni=U(function(){E(tt,!1,function(Vi){Rt.resolve(Vi).then(Xt.resolve,Ei)})});return Ni.e&&Ei(Ni.v),Xt.promise}})},"252c":function(e,i,n){(function(r){n.d(i,"a",function(){return p});function a(){var E=window.navigator.userAgent,I=E.indexOf("MSIE ");if(I>0)return parseInt(E.substring(I+5,E.indexOf(".",I)),10);var R=E.indexOf("Trident/");if(R>0){var V=E.indexOf("rv:");return parseInt(E.substring(V+3,E.indexOf(".",V)),10)}var q=E.indexOf("Edge/");return q>0?parseInt(E.substring(q+5,E.indexOf(".",q)),10):-1}var c=void 0;function s(){s.init||(s.init=!0,c=a()!==-1)}var p={render:function(){var I=this,R=I.$createElement,V=I._self._c||R;return V("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){(this._w!==this.$el.offsetWidth||this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!c&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var I=this;s(),this.$nextTick(function(){I._w=I.$el.offsetWidth,I._h=I.$el.offsetHeight});var R=document.createElement("object");this._resizeObject=R,R.setAttribute("aria-hidden","true"),R.setAttribute("tabindex",-1),R.onload=this.addResizeHandlers,R.type="text/html",c&&this.$el.appendChild(R),R.data="about:blank",c||this.$el.appendChild(R)},beforeDestroy:function(){this.removeResizeHandlers()}};function _(E){E.component("resize-observer",p),E.component("ResizeObserver",p)}var b={version:"0.4.5",install:_},S=null;typeof window<"u"?S=window.Vue:typeof r<"u"&&(S=r.Vue),S&&S.use(b)}).call(this,n("c8ba"))},"25eb":function(e,i){e.exports=function(n){if(n==null)throw TypeError("Can't call method on  "+n);return n}},2621:function(e,i){i.f=Object.getOwnPropertySymbols},"292a":function(e,i,n){Object.defineProperty(i,"__esModule",{value:!0}),i.default=(r,a)=>{if(r.length<7)throw new Error(`[shade-color] color must be formatted "#FFFFFF" not like this "#FFF" - (${r})`);if(!r.includes("#"))throw new Error(`[shade-color] color must be an HEX - ex: "#FFFFFF" - (${r})`);let c=parseInt(r.substring(1,3),16),s=parseInt(r.substring(3,5),16),p=parseInt(r.substring(5,7),16);c=parseInt(String(c*(100+a)/100)),s=parseInt(String(s*(100+a)/100)),p=parseInt(String(p*(100+a)/100)),c=c<255?c:255,s=s<255?s:255,p=p<255?p:255;const _=c.toString(16).length===1?"0"+c.toString(16):c.toString(16),b=s.toString(16).length===1?"0"+s.toString(16):s.toString(16),S=p.toString(16).length===1?"0"+p.toString(16):p.toString(16);return"#"+_+b+S}},"294c":function(e,i){e.exports=function(n){try{return!!n()}catch{return!0}}},"2aba":function(e,i,n){var r=n("7726"),a=n("32e9"),c=n("69a8"),s=n("ca5a")("src"),p=n("fa5b"),_="toString",b=(""+p).split(_);n("8378").inspectSource=function(S){return p.call(S)},(e.exports=function(S,E,I,R){var V=typeof I=="function";V&&(c(I,"name")||a(I,"name",E)),S[E]!==I&&(V&&(c(I,s)||a(I,s,S[E]?""+S[E]:b.join(String(E)))),S===r?S[E]=I:R?S[E]?S[E]=I:a(S,E,I):(delete S[E],a(S,E,I)))})(Function.prototype,_,function(){return typeof this=="function"&&this[s]||p.call(this)})},"2aeb":function(e,i,n){var r=n("cb7c"),a=n("1495"),c=n("e11e"),s=n("613b")("IE_PROTO"),p=function(){},_="prototype",b=function(){var S=n("230e")("iframe"),E=c.length,I="<",R=">",V;for(S.style.display="none",n("fab2").appendChild(S),S.src="javascript:",V=S.contentWindow.document,V.open(),V.write(I+"script"+R+"document.F=Object"+I+"/script"+R),V.close(),b=V.F;E--;)delete b[_][c[E]];return b()};e.exports=Object.create||function(E,I){var R;return E!==null?(p[_]=r(E),R=new p,p[_]=null,R[s]=E):R=b(),I===void 0?R:a(R,I)}},"2b4c":function(e,i,n){var r=n("5537")("wks"),a=n("ca5a"),c=n("7726").Symbol,s=typeof c=="function",p=e.exports=function(_){return r[_]||(r[_]=s&&c[_]||(s?c:a)("Symbol."+_))};p.store=r},"2d00":function(e,i){e.exports=!1},"2d95":function(e,i){var n={}.toString;e.exports=function(r){return n.call(r).slice(8,-1)}},"2fdb":function(e,i,n){var r=n("5ca1"),a=n("d2c8"),c="includes";r(r.P+r.F*n("5147")(c),"String",{includes:function(p){return!!~a(this,p,c).indexOf(p,arguments.length>1?arguments[1]:void 0)}})},3024:function(e,i){e.exports=function(n,r,a){var c=a===void 0;switch(r.length){case 0:return c?n():n.call(a);case 1:return c?n(r[0]):n.call(a,r[0]);case 2:return c?n(r[0],r[1]):n.call(a,r[0],r[1]);case 3:return c?n(r[0],r[1],r[2]):n.call(a,r[0],r[1],r[2]);case 4:return c?n(r[0],r[1],r[2],r[3]):n.call(a,r[0],r[1],r[2],r[3])}return n.apply(a,r)}},"30f1":function(e,i,n){var r=n("b8e3"),a=n("63b6"),c=n("9138"),s=n("35e8"),p=n("481b"),_=n("8f60"),b=n("45f2"),S=n("53e2"),E=n("5168")("iterator"),I=!([].keys&&"next"in[].keys()),R="@@iterator",V="keys",q="values",U=function(){return this};e.exports=function(H,Z,ne,ie,oe,pe,de){_(ne,Z,ie);var fe=function(pt){if(!I&&pt in Oe)return Oe[pt];switch(pt){case V:return function(){return new ne(this,pt)};case q:return function(){return new ne(this,pt)}}return function(){return new ne(this,pt)}},ge=Z+" Iterator",we=oe==q,Ie=!1,Oe=H.prototype,ke=Oe[E]||Oe[R]||oe&&Oe[oe],Ee=ke||fe(oe),Qe=oe?we?fe("entries"):Ee:void 0,gt=Z=="Array"&&Oe.entries||ke,nt,ft,Tt;if(gt&&(Tt=S(gt.call(new H)),Tt!==Object.prototype&&Tt.next&&(b(Tt,ge,!0),!r&&typeof Tt[E]!="function"&&s(Tt,E,U))),we&&ke&&ke.name!==q&&(Ie=!0,Ee=function(){return ke.call(this)}),(!r||de)&&(I||Ie||!Oe[E])&&s(Oe,E,Ee),p[Z]=Ee,p[ge]=U,oe)if(nt={values:we?Ee:fe(q),keys:pe?Ee:fe(V),entries:Qe},de)for(ft in nt)ft in Oe||c(Oe,ft,nt[ft]);else a(a.P+a.F*(I||Ie),Z,nt);return nt}},"32e9":function(e,i,n){var r=n("86cc"),a=n("4630");e.exports=n("9e1e")?function(c,s,p){return r.f(c,s,a(1,p))}:function(c,s,p){return c[s]=p,c}},"32fc":function(e,i,n){var r=n("e53d").document;e.exports=r&&r.documentElement},"335c":function(e,i,n){var r=n("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return r(a)=="String"?a.split(""):Object(a)}},"355d":function(e,i){i.f={}.propertyIsEnumerable},"35e8":function(e,i,n){var r=n("d9f6"),a=n("aebd");e.exports=n("8e60")?function(c,s,p){return r.f(c,s,a(1,p))}:function(c,s,p){return c[s]=p,c}},"36c3":function(e,i,n){var r=n("335c"),a=n("25eb");e.exports=function(c){return r(a(c))}},3702:function(e,i,n){var r=n("481b"),a=n("5168")("iterator"),c=Array.prototype;e.exports=function(s){return s!==void 0&&(r.Array===s||c[a]===s)}},3846:function(e,i,n){n("9e1e")&&/./g.flags!="g"&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"38fd":function(e,i,n){var r=n("69a8"),a=n("4bf8"),c=n("613b")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(p){return p=a(p),r(p,c)?p[c]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?s:null}},"3a38":function(e,i){var n=Math.ceil,r=Math.floor;e.exports=function(a){return isNaN(a=+a)?0:(a>0?r:n)(a)}},"3c11":function(e,i,n){var r=n("63b6"),a=n("584a"),c=n("e53d"),s=n("f201"),p=n("cd78");r(r.P+r.R,"Promise",{finally:function(_){var b=s(this,a.Promise||c.Promise),S=typeof _=="function";return this.then(S?function(E){return p(b,_()).then(function(){return E})}:_,S?function(E){return p(b,_()).then(function(){throw E})}:_)}})},"40c3":function(e,i,n){var r=n("6b4c"),a=n("5168")("toStringTag"),c=r(function(){return arguments}())=="Arguments",s=function(p,_){try{return p[_]}catch{}};e.exports=function(p){var _,b,S;return p===void 0?"Undefined":p===null?"Null":typeof(b=s(_=Object(p),a))=="string"?b:c?r(_):(S=r(_))=="Object"&&typeof _.callee=="function"?"Arguments":S}},4178:function(e,i,n){var r=n("d864"),a=n("3024"),c=n("32fc"),s=n("1ec9"),p=n("e53d"),_=p.process,b=p.setImmediate,S=p.clearImmediate,E=p.MessageChannel,I=p.Dispatch,R=0,V={},q="onreadystatechange",U,H,Z,ne=function(){var oe=+this;if(V.hasOwnProperty(oe)){var pe=V[oe];delete V[oe],pe()}},ie=function(oe){ne.call(oe.data)};(!b||!S)&&(b=function(pe){for(var de=[],fe=1;arguments.length>fe;)de.push(arguments[fe++]);return V[++R]=function(){a(typeof pe=="function"?pe:Function(pe),de)},U(R),R},S=function(pe){delete V[pe]},n("6b4c")(_)=="process"?U=function(oe){_.nextTick(r(ne,oe,1))}:I&&I.now?U=function(oe){I.now(r(ne,oe,1))}:E?(H=new E,Z=H.port2,H.port1.onmessage=ie,U=r(Z.postMessage,Z,1)):p.addEventListener&&typeof postMessage=="function"&&!p.importScripts?(U=function(oe){p.postMessage(oe+"","*")},p.addEventListener("message",ie,!1)):q in s("script")?U=function(oe){c.appendChild(s("script"))[q]=function(){c.removeChild(this),ne.call(oe)}}:U=function(oe){setTimeout(r(ne,oe,1),0)}),e.exports={set:b,clear:S}},"41a0":function(e,i,n){var r=n("2aeb"),a=n("4630"),c=n("7f20"),s={};n("32e9")(s,n("2b4c")("iterator"),function(){return this}),e.exports=function(p,_,b){p.prototype=r(s,{next:a(1,b)}),c(p,_+" Iterator")}},"43fc":function(e,i,n){var r=n("63b6"),a=n("656e"),c=n("4439");r(r.S,"Promise",{try:function(s){var p=a.f(this),_=c(s);return(_.e?p.reject:p.resolve)(_.v),p.promise}})},4439:function(e,i){e.exports=function(n){try{return{e:!1,v:n()}}catch(r){return{e:!0,v:r}}}},"454f":function(e,i,n){n("46a7");var r=n("584a").Object;e.exports=function(c,s,p){return r.defineProperty(c,s,p)}},"456d":function(e,i,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",function(){return function(s){return a(r(s))}})},4588:function(e,i){var n=Math.ceil,r=Math.floor;e.exports=function(a){return isNaN(a=+a)?0:(a>0?r:n)(a)}},"45d0":function(e,i,n){var r=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(i,"__esModule",{value:!0});const a=r(n("0750"));i.default=c=>{if(!c)throw new Error("is-color-name: No color provided");return Object.keys(a.default).includes(c)}},"45f2":function(e,i,n){var r=n("d9f6").f,a=n("07e3"),c=n("5168")("toStringTag");e.exports=function(s,p,_){s&&!a(s=_?s:s.prototype,c)&&r(s,c,{configurable:!0,value:p})}},4630:function(e,i){e.exports=function(n,r){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:r}}},"46a7":function(e,i,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"47ee":function(e,i,n){var r=n("c3a1"),a=n("9aa9"),c=n("355d");e.exports=function(s){var p=r(s),_=a.f;if(_)for(var b=_(s),S=c.f,E=0,I;b.length>E;)S.call(s,I=b[E++])&&p.push(I);return p}},"481b":function(e,i){e.exports={}},"4bf8":function(e,i,n){var r=n("be13");e.exports=function(a){return Object(r(a))}},"4c95":function(e,i,n){var r=n("e53d"),a=n("584a"),c=n("d9f6"),s=n("8e60"),p=n("5168")("species");e.exports=function(_){var b=typeof a[_]=="function"?a[_]:r[_];s&&b&&!b[p]&&c.f(b,p,{configurable:!0,get:function(){return this}})}},"4ee1":function(e,i,n){var r=n("5168")("iterator"),a=!1;try{var c=[7][r]();c.return=function(){a=!0},Array.from(c,function(){throw 2})}catch{}e.exports=function(s,p){if(!p&&!a)return!1;var _=!1;try{var b=[7],S=b[r]();S.next=function(){return{done:_=!0}},b[r]=function(){return S},s(b)}catch{}return _}},"50ed":function(e,i){e.exports=function(n,r){return{value:r,done:!!n}}},5147:function(e,i,n){var r=n("2b4c")("match");e.exports=function(a){var c=/./;try{"/./"[a](c)}catch{try{return c[r]=!1,!"/./"[a](c)}catch{}}return!0}},5168:function(e,i,n){var r=n("dbdb")("wks"),a=n("62a0"),c=n("e53d").Symbol,s=typeof c=="function",p=e.exports=function(_){return r[_]||(r[_]=s&&c[_]||(s?c:a)("Symbol."+_))};p.store=r},"52a7":function(e,i){i.f={}.propertyIsEnumerable},"53e2":function(e,i,n){var r=n("07e3"),a=n("241e"),c=n("5559")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(p){return p=a(p),r(p,c)?p[c]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?s:null}},"549b":function(e,i,n){var r=n("d864"),a=n("63b6"),c=n("241e"),s=n("b0dc"),p=n("3702"),_=n("b447"),b=n("20fd"),S=n("7cd6");a(a.S+a.F*!n("4ee1")(function(E){Array.from(E)}),"Array",{from:function(I){var R=c(I),V=typeof this=="function"?this:Array,q=arguments.length,U=q>1?arguments[1]:void 0,H=U!==void 0,Z=0,ne=S(R),ie,oe,pe,de;if(H&&(U=r(U,q>2?arguments[2]:void 0,2)),ne!=null&&!(V==Array&&p(ne)))for(de=ne.call(R),oe=new V;!(pe=de.next()).done;Z++)b(oe,Z,H?s(de,U,[pe.value,Z],!0):pe.value);else for(ie=_(R.length),oe=new V(ie);ie>Z;Z++)b(oe,Z,H?U(R[Z],Z):R[Z]);return oe.length=Z,oe}})},"54a1":function(e,i,n){n("6c1c"),n("1654"),e.exports=n("95d5")},5537:function(e,i,n){var r=n("8378"),a=n("7726"),c="__core-js_shared__",s=a[c]||(a[c]={});(e.exports=function(p,_){return s[p]||(s[p]=_!==void 0?_:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,i,n){var r=n("dbdb")("keys"),a=n("62a0");e.exports=function(c){return r[c]||(r[c]=a(c))}},"584a":function(e,i){var n=e.exports={version:"2.6.11"};typeof __e=="number"&&(__e=n)},"5b4e":function(e,i,n){var r=n("36c3"),a=n("b447"),c=n("0fc9");e.exports=function(s){return function(p,_,b){var S=r(p),E=a(S.length),I=c(b,E),R;if(s&&_!=_){for(;E>I;)if(R=S[I++],R!=R)return!0}else for(;E>I;I++)if((s||I in S)&&S[I]===_)return s||I||0;return!s&&-1}}},"5c95":function(e,i,n){var r=n("35e8");e.exports=function(a,c,s){for(var p in c)s&&a[p]?a[p]=c[p]:r(a,p,c[p]);return a}},"5ca1":function(e,i,n){var r=n("7726"),a=n("8378"),c=n("32e9"),s=n("2aba"),p=n("9b43"),_="prototype",b=function(S,E,I){var R=S&b.F,V=S&b.G,q=S&b.S,U=S&b.P,H=S&b.B,Z=V?r:q?r[E]||(r[E]={}):(r[E]||{})[_],ne=V?a:a[E]||(a[E]={}),ie=ne[_]||(ne[_]={}),oe,pe,de,fe;V&&(I=E);for(oe in I)pe=!R&&Z&&Z[oe]!==void 0,de=(pe?Z:I)[oe],fe=H&&pe?p(de,r):U&&typeof de=="function"?p(Function.call,de):de,Z&&s(Z,oe,de,S&b.U),ne[oe]!=de&&c(ne,oe,fe),U&&ie[oe]!=de&&(ie[oe]=de)};r.core=a,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,e.exports=b},"5dbc":function(e,i,n){var r=n("d3f4"),a=n("8b97").set;e.exports=function(c,s,p){var _=s.constructor,b;return _!==p&&typeof _=="function"&&(b=_.prototype)!==p.prototype&&r(b)&&a&&a(c,b),c}},"5eda":function(e,i,n){var r=n("5ca1"),a=n("8378"),c=n("79e5");e.exports=function(s,p){var _=(a.Object||{})[s]||Object[s],b={};b[s]=p(_),r(r.S+r.F*c(function(){_(1)}),"Object",b)}},6038:function(e,i,n){var r=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(i,"__esModule",{value:!0}),i.hexToRgba=i.colorNameToHex=i.isColorName=i.shadeColor=void 0;const a=r(n("292a"));i.shadeColor=a.default;const c=r(n("45d0"));i.isColorName=c.default;const s=r(n("1c15"));i.hexToRgba=s.default;const p=r(n("c3b0"));i.colorNameToHex=p.default},"613b":function(e,i,n){var r=n("5537")("keys"),a=n("ca5a");e.exports=function(c){return r[c]||(r[c]=a(c))}},"626a":function(e,i,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return r(a)=="String"?a.split(""):Object(a)}},"62a0":function(e,i){var n=0,r=Math.random();e.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++n+r).toString(36))}},"63b6":function(e,i,n){var r=n("e53d"),a=n("584a"),c=n("d864"),s=n("35e8"),p=n("07e3"),_="prototype",b=function(S,E,I){var R=S&b.F,V=S&b.G,q=S&b.S,U=S&b.P,H=S&b.B,Z=S&b.W,ne=V?a:a[E]||(a[E]={}),ie=ne[_],oe=V?r:q?r[E]:(r[E]||{})[_],pe,de,fe;V&&(I=E);for(pe in I)de=!R&&oe&&oe[pe]!==void 0,!(de&&p(ne,pe))&&(fe=de?oe[pe]:I[pe],ne[pe]=V&&typeof oe[pe]!="function"?I[pe]:H&&de?c(fe,r):Z&&oe[pe]==fe?function(ge){var we=function(Ie,Oe,ke){if(this instanceof ge){switch(arguments.length){case 0:return new ge;case 1:return new ge(Ie);case 2:return new ge(Ie,Oe)}return new ge(Ie,Oe,ke)}return ge.apply(this,arguments)};return we[_]=ge[_],we}(fe):U&&typeof fe=="function"?c(Function.call,fe):fe,U&&((ne.virtual||(ne.virtual={}))[pe]=fe,S&b.R&&ie&&!ie[pe]&&s(ie,pe,fe)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,e.exports=b},"656e":function(e,i,n){var r=n("79aa");function a(c){var s,p;this.promise=new c(function(_,b){if(s!==void 0||p!==void 0)throw TypeError("Bad Promise constructor");s=_,p=b}),this.resolve=r(s),this.reject=r(p)}e.exports.f=function(c){return new a(c)}},6718:function(e,i,n){var r=n("e53d"),a=n("584a"),c=n("b8e3"),s=n("ccb9"),p=n("d9f6").f;e.exports=function(_){var b=a.Symbol||(a.Symbol=c?{}:r.Symbol||{});_.charAt(0)!="_"&&!(_ in b)&&p(b,_,{value:s.f(_)})}},6762:function(e,i,n){var r=n("5ca1"),a=n("c366")(!0);r(r.P,"Array",{includes:function(s){return a(this,s,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"67bb":function(e,i,n){e.exports=n("f921")},6821:function(e,i,n){var r=n("626a"),a=n("be13");e.exports=function(c){return r(a(c))}},"696e":function(e,i,n){n("c207"),n("1654"),n("6c1c"),n("24c5"),n("3c11"),n("43fc"),e.exports=n("584a").Promise},"69a8":function(e,i){var n={}.hasOwnProperty;e.exports=function(r,a){return n.call(r,a)}},"69d3":function(e,i,n){n("6718")("asyncIterator")},"6a99":function(e,i,n){var r=n("d3f4");e.exports=function(a,c){if(!r(a))return a;var s,p;if(c&&typeof(s=a.toString)=="function"&&!r(p=s.call(a))||typeof(s=a.valueOf)=="function"&&!r(p=s.call(a))||!c&&typeof(s=a.toString)=="function"&&!r(p=s.call(a)))return p;throw TypeError("Can't convert object to primitive value")}},"6abf":function(e,i,n){var r=n("e6f3"),a=n("1691").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(s){return r(s,a)}},"6b4c":function(e,i){var n={}.toString;e.exports=function(r){return n.call(r).slice(8,-1)}},"6b54":function(e,i,n){n("3846");var r=n("cb7c"),a=n("0bfb"),c=n("9e1e"),s="toString",p=/./[s],_=function(b){n("2aba")(RegExp.prototype,s,b,!0)};n("79e5")(function(){return p.call({source:"a",flags:"b"})!="/a/b"})?_(function(){var S=r(this);return"/".concat(S.source,"/","flags"in S?S.flags:!c&&S instanceof RegExp?a.call(S):void 0)}):p.name!=s&&_(function(){return p.call(this)})},"6c1c":function(e,i,n){n("c367");for(var r=n("e53d"),a=n("35e8"),c=n("481b"),s=n("5168")("toStringTag"),p="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),_=0;_<p.length;_++){var b=p[_],S=r[b],E=S&&S.prototype;E&&!E[s]&&a(E,s,b),c[b]=c.Array}},"71c1":function(e,i,n){var r=n("3a38"),a=n("25eb");e.exports=function(c){return function(s,p){var _=String(a(s)),b=r(p),S=_.length,E,I;return b<0||b>=S?c?"":void 0:(E=_.charCodeAt(b),E<55296||E>56319||b+1===S||(I=_.charCodeAt(b+1))<56320||I>57343?c?_.charAt(b):E:c?_.slice(b,b+2):(E-55296<<10)+(I-56320)+65536)}}},7514:function(e,i,n){var r=n("5ca1"),a=n("0a49")(5),c="find",s=!0;c in[]&&Array(1)[c](function(){s=!1}),r(r.P+r.F*s,"Array",{find:function(_){return a(this,_,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(c)},"765d":function(e,i,n){n("6718")("observable")},7726:function(e,i){var n=e.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=n)},"774e":function(e,i,n){e.exports=n("d2d5")},"77f1":function(e,i,n){var r=n("4588"),a=Math.max,c=Math.min;e.exports=function(s,p){return s=r(s),s<0?a(s+p,0):c(s,p)}},"794b":function(e,i,n){e.exports=!n("8e60")&&!n("294c")(function(){return Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a!=7})},"795b":function(e,i,n){e.exports=n("696e")},"79aa":function(e,i){e.exports=function(n){if(typeof n!="function")throw TypeError(n+" is not a function!");return n}},"79e5":function(e,i){e.exports=function(n){try{return!!n()}catch{return!0}}},"7cd6":function(e,i,n){var r=n("40c3"),a=n("5168")("iterator"),c=n("481b");e.exports=n("584a").getIteratorMethod=function(s){if(s!=null)return s[a]||s["@@iterator"]||c[r(s)]}},"7e90":function(e,i,n){var r=n("d9f6"),a=n("e4ae"),c=n("c3a1");e.exports=n("8e60")?Object.defineProperties:function(p,_){a(p);for(var b=c(_),S=b.length,E=0,I;S>E;)r.f(p,I=b[E++],_[I]);return p}},"7f20":function(e,i,n){var r=n("86cc").f,a=n("69a8"),c=n("2b4c")("toStringTag");e.exports=function(s,p,_){s&&!a(s=_?s:s.prototype,c)&&r(s,c,{configurable:!0,value:p})}},"7f7f":function(e,i,n){var r=n("86cc").f,a=Function.prototype,c=/^\s*function ([^ (]*)/,s="name";s in a||n("9e1e")&&r(a,s,{configurable:!0,get:function(){try{return(""+this).match(c)[1]}catch{return""}}})},"7f9a":function(e,i,n){},8378:function(e,i){var n=e.exports={version:"2.6.11"};typeof __e=="number"&&(__e=n)},8436:function(e,i){e.exports=function(){}},"84f2":function(e,i){e.exports={}},"85f2":function(e,i,n){e.exports=n("454f")},"85fe":function(e,i,n){(function(r){n.d(i,"a",function(){return ne});function a(de){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(fe){return typeof fe}:a=function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},a(de)}function c(de,fe){if(!(de instanceof fe))throw new TypeError("Cannot call a class as a function")}function s(de,fe){for(var ge=0;ge<fe.length;ge++){var we=fe[ge];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(de,we.key,we)}}function p(de,fe,ge){return fe&&s(de.prototype,fe),ge&&s(de,ge),de}function _(de){return b(de)||S(de)||E()}function b(de){if(Array.isArray(de)){for(var fe=0,ge=new Array(de.length);fe<de.length;fe++)ge[fe]=de[fe];return ge}}function S(de){if(Symbol.iterator in Object(de)||Object.prototype.toString.call(de)==="[object Arguments]")return Array.from(de)}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function I(de){var fe;return typeof de=="function"?fe={callback:de}:fe=de,fe}function R(de,fe){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},we,Ie,Oe,ke=function(Qe){for(var gt=arguments.length,nt=new Array(gt>1?gt-1:0),ft=1;ft<gt;ft++)nt[ft-1]=arguments[ft];if(Oe=nt,!(we&&Qe===Ie)){var Tt=ge.leading;typeof Tt=="function"&&(Tt=Tt(Qe,Ie)),(!we||Qe!==Ie)&&Tt&&de.apply(void 0,[Qe].concat(_(Oe))),Ie=Qe,clearTimeout(we),we=setTimeout(function(){de.apply(void 0,[Qe].concat(_(Oe))),we=0},fe)}};return ke._clear=function(){clearTimeout(we),we=null},ke}function V(de,fe){if(de===fe)return!0;if(a(de)==="object"){for(var ge in de)if(!V(de[ge],fe[ge]))return!1;return!0}return!1}var q=function(){function de(fe,ge,we){c(this,de),this.el=fe,this.observer=null,this.frozen=!1,this.createObserver(ge,we)}return p(de,[{key:"createObserver",value:function(ge,we){var Ie=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=I(ge),this.callback=function(Ee,Qe){Ie.options.callback(Ee,Qe),Ee&&Ie.options.once&&(Ie.frozen=!0,Ie.destroyObserver())},this.callback&&this.options.throttle){var Oe=this.options.throttleOptions||{},ke=Oe.leading;this.callback=R(this.callback,this.options.throttle,{leading:function(Qe){return ke==="both"||ke==="visible"&&Qe||ke==="hidden"&&!Qe}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(Ee){var Qe=Ee[0];if(Ee.length>1){var gt=Ee.find(function(ft){return ft.isIntersecting});gt&&(Qe=gt)}if(Ie.callback){var nt=Qe.isIntersecting&&Qe.intersectionRatio>=Ie.threshold;if(nt===Ie.oldResult)return;Ie.oldResult=nt,Ie.callback(nt,Qe)}},this.options.intersection),we.context.$nextTick(function(){Ie.observer&&Ie.observer.observe(Ie.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),de}();function U(de,fe,ge){var we=fe.value;if(we)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var Ie=new q(de,we,ge);de._vue_visibilityState=Ie}}function H(de,fe,ge){var we=fe.value,Ie=fe.oldValue;if(!V(we,Ie)){var Oe=de._vue_visibilityState;if(!we){Z(de);return}Oe?Oe.createObserver(we,ge):U(de,{value:we},ge)}}function Z(de){var fe=de._vue_visibilityState;fe&&(fe.destroyObserver(),delete de._vue_visibilityState)}var ne={bind:U,update:H,unbind:Z};function ie(de){de.directive("observe-visibility",ne)}var oe={version:"0.4.6",install:ie},pe=null;typeof window<"u"?pe=window.Vue:typeof r<"u"&&(pe=r.Vue),pe&&pe.use(oe)}).call(this,n("c8ba"))},"86cc":function(e,i,n){var r=n("cb7c"),a=n("c69a"),c=n("6a99"),s=Object.defineProperty;i.f=n("9e1e")?Object.defineProperty:function(_,b,S){if(r(_),b=c(b,!0),r(S),a)try{return s(_,b,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported!");return"value"in S&&(_[b]=S.value),_}},8875:function(e,i,n){var r,a,c;(function(s,p){a=[],r=p,c=typeof r=="function"?r.apply(i,a):r,c!==void 0&&(e.exports=c)})(typeof self<"u"?self:this,function(){function s(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(Z){var p=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,b=p.exec(Z.stack)||_.exec(Z.stack),S=b&&b[1]||!1,E=b&&b[2]||!1,I=document.location.href.replace(document.location.hash,""),R,V,q,U=document.getElementsByTagName("script");S===I&&(R=document.documentElement.outerHTML,V=new RegExp("(?:[^\\n]+?\\n){0,"+(E-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),q=R.replace(V,"$1").trim());for(var H=0;H<U.length;H++)if(U[H].readyState==="interactive"||U[H].src===S||S===I&&U[H].innerHTML&&U[H].innerHTML.trim()===q)return U[H];return null}}return s})},"8b97":function(e,i,n){var r=n("d3f4"),a=n("cb7c"),c=function(s,p){if(a(s),!r(p)&&p!==null)throw TypeError(p+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(s,p,_){try{_=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),_(s,[]),p=!(s instanceof Array)}catch{p=!0}return function(S,E){return c(S,E),p?S.__proto__=E:_(S,E),S}}({},!1):void 0),check:c}},"8bbf":function(e,i){e.exports=IB},"8e60":function(e,i,n){e.exports=!n("294c")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"8e6e":function(e,i,n){var r=n("5ca1"),a=n("990b"),c=n("6821"),s=n("11e9"),p=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(b){for(var S=c(b),E=s.f,I=a(S),R={},V=0,q,U;I.length>V;)U=E(S,q=I[V++]),U!==void 0&&p(R,q,U);return R}})},"8f60":function(e,i,n){var r=n("a159"),a=n("aebd"),c=n("45f2"),s={};n("35e8")(s,n("5168")("iterator"),function(){return this}),e.exports=function(p,_,b){p.prototype=r(s,{next:a(1,b)}),c(p,_+" Iterator")}},9003:function(e,i,n){var r=n("6b4c");e.exports=Array.isArray||function(c){return r(c)=="Array"}},9093:function(e,i,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(s){return r(s,a)}},9138:function(e,i,n){e.exports=n("35e8")},"95d5":function(e,i,n){var r=n("40c3"),a=n("5168")("iterator"),c=n("481b");e.exports=n("584a").isIterable=function(s){var p=Object(s);return p[a]!==void 0||"@@iterator"in p||c.hasOwnProperty(r(p))}},"96cf":function(e,i,n){var r=function(a){var c=Object.prototype,s=c.hasOwnProperty,p,_=typeof Symbol=="function"?Symbol:{},b=_.iterator||"@@iterator",S=_.asyncIterator||"@@asyncIterator",E=_.toStringTag||"@@toStringTag";function I(pt,et,Mt){return Object.defineProperty(pt,et,{value:Mt,enumerable:!0,configurable:!0,writable:!0}),pt[et]}try{I({},"")}catch{I=function(et,Mt,Qt){return et[Mt]=Qt}}function R(pt,et,Mt,Qt){var Fe=et&&et.prototype instanceof ie?et:ie,tt=Object.create(Fe.prototype),Rt=new nt(Qt||[]);return tt._invoke=ke(pt,Mt,Rt),tt}a.wrap=R;function V(pt,et,Mt){try{return{type:"normal",arg:pt.call(et,Mt)}}catch(Qt){return{type:"throw",arg:Qt}}}var q="suspendedStart",U="suspendedYield",H="executing",Z="completed",ne={};function ie(){}function oe(){}function pe(){}var de={};I(de,b,function(){return this});var fe=Object.getPrototypeOf,ge=fe&&fe(fe(ft([])));ge&&ge!==c&&s.call(ge,b)&&(de=ge);var we=pe.prototype=ie.prototype=Object.create(de);oe.prototype=pe,I(we,"constructor",pe),I(pe,"constructor",oe),oe.displayName=I(pe,E,"GeneratorFunction");function Ie(pt){["next","throw","return"].forEach(function(et){I(pt,et,function(Mt){return this._invoke(et,Mt)})})}a.isGeneratorFunction=function(pt){var et=typeof pt=="function"&&pt.constructor;return et?et===oe||(et.displayName||et.name)==="GeneratorFunction":!1},a.mark=function(pt){return Object.setPrototypeOf?Object.setPrototypeOf(pt,pe):(pt.__proto__=pe,I(pt,E,"GeneratorFunction")),pt.prototype=Object.create(we),pt},a.awrap=function(pt){return{__await:pt}};function Oe(pt,et){function Mt(tt,Rt,Xt,Ei){var Ni=V(pt[tt],pt,Rt);if(Ni.type==="throw")Ei(Ni.arg);else{var Vi=Ni.arg,Ve=Vi.value;return Ve&&typeof Ve=="object"&&s.call(Ve,"__await")?et.resolve(Ve.__await).then(function(dt){Mt("next",dt,Xt,Ei)},function(dt){Mt("throw",dt,Xt,Ei)}):et.resolve(Ve).then(function(dt){Vi.value=dt,Xt(Vi)},function(dt){return Mt("throw",dt,Xt,Ei)})}}var Qt;function Fe(tt,Rt){function Xt(){return new et(function(Ei,Ni){Mt(tt,Rt,Ei,Ni)})}return Qt=Qt?Qt.then(Xt,Xt):Xt()}this._invoke=Fe}Ie(Oe.prototype),I(Oe.prototype,S,function(){return this}),a.AsyncIterator=Oe,a.async=function(pt,et,Mt,Qt,Fe){Fe===void 0&&(Fe=Promise);var tt=new Oe(R(pt,et,Mt,Qt),Fe);return a.isGeneratorFunction(et)?tt:tt.next().then(function(Rt){return Rt.done?Rt.value:tt.next()})};function ke(pt,et,Mt){var Qt=q;return function(tt,Rt){if(Qt===H)throw new Error("Generator is already running");if(Qt===Z){if(tt==="throw")throw Rt;return Tt()}for(Mt.method=tt,Mt.arg=Rt;;){var Xt=Mt.delegate;if(Xt){var Ei=Ee(Xt,Mt);if(Ei){if(Ei===ne)continue;return Ei}}if(Mt.method==="next")Mt.sent=Mt._sent=Mt.arg;else if(Mt.method==="throw"){if(Qt===q)throw Qt=Z,Mt.arg;Mt.dispatchException(Mt.arg)}else Mt.method==="return"&&Mt.abrupt("return",Mt.arg);Qt=H;var Ni=V(pt,et,Mt);if(Ni.type==="normal"){if(Qt=Mt.done?Z:U,Ni.arg===ne)continue;return{value:Ni.arg,done:Mt.done}}else Ni.type==="throw"&&(Qt=Z,Mt.method="throw",Mt.arg=Ni.arg)}}}function Ee(pt,et){var Mt=pt.iterator[et.method];if(Mt===p){if(et.delegate=null,et.method==="throw"){if(pt.iterator.return&&(et.method="return",et.arg=p,Ee(pt,et),et.method==="throw"))return ne;et.method="throw",et.arg=new TypeError("The iterator does not provide a 'throw' method")}return ne}var Qt=V(Mt,pt.iterator,et.arg);if(Qt.type==="throw")return et.method="throw",et.arg=Qt.arg,et.delegate=null,ne;var Fe=Qt.arg;if(!Fe)return et.method="throw",et.arg=new TypeError("iterator result is not an object"),et.delegate=null,ne;if(Fe.done)et[pt.resultName]=Fe.value,et.next=pt.nextLoc,et.method!=="return"&&(et.method="next",et.arg=p);else return Fe;return et.delegate=null,ne}Ie(we),I(we,E,"Generator"),I(we,b,function(){return this}),I(we,"toString",function(){return"[object Generator]"});function Qe(pt){var et={tryLoc:pt[0]};1 in pt&&(et.catchLoc=pt[1]),2 in pt&&(et.finallyLoc=pt[2],et.afterLoc=pt[3]),this.tryEntries.push(et)}function gt(pt){var et=pt.completion||{};et.type="normal",delete et.arg,pt.completion=et}function nt(pt){this.tryEntries=[{tryLoc:"root"}],pt.forEach(Qe,this),this.reset(!0)}a.keys=function(pt){var et=[];for(var Mt in pt)et.push(Mt);return et.reverse(),function Qt(){for(;et.length;){var Fe=et.pop();if(Fe in pt)return Qt.value=Fe,Qt.done=!1,Qt}return Qt.done=!0,Qt}};function ft(pt){if(pt){var et=pt[b];if(et)return et.call(pt);if(typeof pt.next=="function")return pt;if(!isNaN(pt.length)){var Mt=-1,Qt=function Fe(){for(;++Mt<pt.length;)if(s.call(pt,Mt))return Fe.value=pt[Mt],Fe.done=!1,Fe;return Fe.value=p,Fe.done=!0,Fe};return Qt.next=Qt}}return{next:Tt}}a.values=ft;function Tt(){return{value:p,done:!0}}return nt.prototype={constructor:nt,reset:function(pt){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(gt),!pt)for(var et in this)et.charAt(0)==="t"&&s.call(this,et)&&!isNaN(+et.slice(1))&&(this[et]=p)},stop:function(){this.done=!0;var pt=this.tryEntries[0],et=pt.completion;if(et.type==="throw")throw et.arg;return this.rval},dispatchException:function(pt){if(this.done)throw pt;var et=this;function Mt(Ei,Ni){return tt.type="throw",tt.arg=pt,et.next=Ei,Ni&&(et.method="next",et.arg=p),!!Ni}for(var Qt=this.tryEntries.length-1;Qt>=0;--Qt){var Fe=this.tryEntries[Qt],tt=Fe.completion;if(Fe.tryLoc==="root")return Mt("end");if(Fe.tryLoc<=this.prev){var Rt=s.call(Fe,"catchLoc"),Xt=s.call(Fe,"finallyLoc");if(Rt&&Xt){if(this.prev<Fe.catchLoc)return Mt(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return Mt(Fe.finallyLoc)}else if(Rt){if(this.prev<Fe.catchLoc)return Mt(Fe.catchLoc,!0)}else if(Xt){if(this.prev<Fe.finallyLoc)return Mt(Fe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(pt,et){for(var Mt=this.tryEntries.length-1;Mt>=0;--Mt){var Qt=this.tryEntries[Mt];if(Qt.tryLoc<=this.prev&&s.call(Qt,"finallyLoc")&&this.prev<Qt.finallyLoc){var Fe=Qt;break}}Fe&&(pt==="break"||pt==="continue")&&Fe.tryLoc<=et&&et<=Fe.finallyLoc&&(Fe=null);var tt=Fe?Fe.completion:{};return tt.type=pt,tt.arg=et,Fe?(this.method="next",this.next=Fe.finallyLoc,ne):this.complete(tt)},complete:function(pt,et){if(pt.type==="throw")throw pt.arg;return pt.type==="break"||pt.type==="continue"?this.next=pt.arg:pt.type==="return"?(this.rval=this.arg=pt.arg,this.method="return",this.next="end"):pt.type==="normal"&&et&&(this.next=et),ne},finish:function(pt){for(var et=this.tryEntries.length-1;et>=0;--et){var Mt=this.tryEntries[et];if(Mt.finallyLoc===pt)return this.complete(Mt.completion,Mt.afterLoc),gt(Mt),ne}},catch:function(pt){for(var et=this.tryEntries.length-1;et>=0;--et){var Mt=this.tryEntries[et];if(Mt.tryLoc===pt){var Qt=Mt.completion;if(Qt.type==="throw"){var Fe=Qt.arg;gt(Mt)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(pt,et,Mt){return this.delegate={iterator:ft(pt),resultName:et,nextLoc:Mt},this.method==="next"&&(this.arg=p),ne}},a}(e.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"990b":function(e,i,n){var r=n("9093"),a=n("2621"),c=n("cb7c"),s=n("7726").Reflect;e.exports=s&&s.ownKeys||function(_){var b=r.f(c(_)),S=a.f;return S?b.concat(S(_)):b}},"9aa9":function(e,i){i.f=Object.getOwnPropertySymbols},"9b43":function(e,i,n){var r=n("d8e8");e.exports=function(a,c,s){if(r(a),c===void 0)return a;switch(s){case 1:return function(p){return a.call(c,p)};case 2:return function(p,_){return a.call(c,p,_)};case 3:return function(p,_,b){return a.call(c,p,_,b)}}return function(){return a.apply(c,arguments)}}},"9c6c":function(e,i,n){var r=n("2b4c")("unscopables"),a=Array.prototype;a[r]==null&&n("32e9")(a,r,{}),e.exports=function(c){a[r][c]=!0}},"9def":function(e,i,n){var r=n("4588"),a=Math.min;e.exports=function(c){return c>0?a(r(c),9007199254740991):0}},"9e1e":function(e,i,n){e.exports=!n("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a159:function(e,i,n){var r=n("e4ae"),a=n("7e90"),c=n("1691"),s=n("5559")("IE_PROTO"),p=function(){},_="prototype",b=function(){var S=n("1ec9")("iframe"),E=c.length,I="<",R=">",V;for(S.style.display="none",n("32fc").appendChild(S),S.src="javascript:",V=S.contentWindow.document,V.open(),V.write(I+"script"+R+"document.F=Object"+I+"/script"+R),V.close(),b=V.F;E--;)delete b[_][c[E]];return b()};e.exports=Object.create||function(E,I){var R;return E!==null?(p[_]=r(E),R=new p,p[_]=null,R[s]=E):R=b(),I===void 0?R:a(R,I)}},a22a:function(e,E,n){var r=n("d864"),a=n("b0dc"),c=n("3702"),s=n("e4ae"),p=n("b447"),_=n("7cd6"),b={},S={},E=e.exports=function(I,R,V,q,U){var H=U?function(){return I}:_(I),Z=r(V,q,R?2:1),ne=0,ie,oe,pe,de;if(typeof H!="function")throw TypeError(I+" is not iterable!");if(c(H)){for(ie=p(I.length);ie>ne;ne++)if(de=R?Z(s(oe=I[ne])[0],oe[1]):Z(I[ne]),de===b||de===S)return de}else for(pe=H.call(I);!(oe=pe.next()).done;)if(de=a(pe,Z,oe.value,R),de===b||de===S)return de};E.BREAK=b,E.RETURN=S},a745:function(e,i,n){e.exports=n("f410")},aa77:function(e,i,n){var r=n("5ca1"),a=n("be13"),c=n("79e5"),s=n("fdef"),p="["+s+"]",_="​",b=RegExp("^"+p+p+"*"),S=RegExp(p+p+"*$"),E=function(R,V,q){var U={},H=c(function(){return!!s[R]()||_[R]()!=_}),Z=U[R]=H?V(I):s[R];q&&(U[q]=Z),r(r.P+r.F*H,"String",U)},I=E.trim=function(R,V){return R=String(a(R)),V&1&&(R=R.replace(b,"")),V&2&&(R=R.replace(S,"")),R};e.exports=E},aae3:function(e,i,n){var r=n("d3f4"),a=n("2d95"),c=n("2b4c")("match");e.exports=function(s){var p;return r(s)&&((p=s[c])!==void 0?!!p:a(s)=="RegExp")}},aba2:function(e,i,n){var r=n("e53d"),a=n("4178").set,c=r.MutationObserver||r.WebKitMutationObserver,s=r.process,p=r.Promise,_=n("6b4c")(s)=="process";e.exports=function(){var b,S,E,I=function(){var U,H;for(_&&(U=s.domain)&&U.exit();b;){H=b.fn,b=b.next;try{H()}catch(Z){throw b?E():S=void 0,Z}}S=void 0,U&&U.enter()};if(_)E=function(){s.nextTick(I)};else if(c&&!(r.navigator&&r.navigator.standalone)){var R=!0,V=document.createTextNode("");new c(I).observe(V,{characterData:!0}),E=function(){V.data=R=!R}}else if(p&&p.resolve){var q=p.resolve(void 0);E=function(){q.then(I)}}else E=function(){a.call(r,I)};return function(U){var H={fn:U,next:void 0};S&&(S.next=H),b||(b=H,E()),S=H}}},ac6a:function(e,i,n){for(var r=n("cadf"),a=n("0d58"),c=n("2aba"),s=n("7726"),p=n("32e9"),_=n("84f2"),b=n("2b4c"),S=b("iterator"),E=b("toStringTag"),I=_.Array,R={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},V=a(R),q=0;q<V.length;q++){var U=V[q],H=R[U],Z=s[U],ne=Z&&Z.prototype,ie;if(ne&&(ne[S]||p(ne,S,I),ne[E]||p(ne,E,U),_[U]=I,H))for(ie in r)ne[ie]||c(ne,ie,r[ie],!0)}},aebd:function(e,i){e.exports=function(n,r){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:r}}},b0dc:function(e,i,n){var r=n("e4ae");e.exports=function(a,c,s,p){try{return p?c(r(s)[0],s[1]):c(s)}catch(b){var _=a.return;throw _!==void 0&&r(_.call(a)),b}}},b447:function(e,i,n){var r=n("3a38"),a=Math.min;e.exports=function(c){return c>0?a(r(c),9007199254740991):0}},b8e3:function(e,i){e.exports=!0},bc13:function(e,i,n){var r=n("e53d"),a=r.navigator;e.exports=a&&a.userAgent||""},be13:function(e,i){e.exports=function(n){if(n==null)throw TypeError("Can't call method on  "+n);return n}},bf0b:function(e,i,n){var r=n("355d"),a=n("aebd"),c=n("36c3"),s=n("1bc3"),p=n("07e3"),_=n("794b"),b=Object.getOwnPropertyDescriptor;i.f=n("8e60")?b:function(E,I){if(E=c(E),I=s(I,!0),_)try{return b(E,I)}catch{}if(p(E,I))return a(!r.f.call(E,I),E[I])}},c207:function(e,i){},c366:function(e,i,n){var r=n("6821"),a=n("9def"),c=n("77f1");e.exports=function(s){return function(p,_,b){var S=r(p),E=a(S.length),I=c(b,E),R;if(s&&_!=_){for(;E>I;)if(R=S[I++],R!=R)return!0}else for(;E>I;I++)if((s||I in S)&&S[I]===_)return s||I||0;return!s&&-1}}},c367:function(e,i,n){var r=n("8436"),a=n("50ed"),c=n("481b"),s=n("36c3");e.exports=n("30f1")(Array,"Array",function(p,_){this._t=s(p),this._i=0,this._k=_},function(){var p=this._t,_=this._k,b=this._i++;return!p||b>=p.length?(this._t=void 0,a(1)):_=="keys"?a(0,b):_=="values"?a(0,p[b]):a(0,[b,p[b]])},"values"),c.Arguments=c.Array,r("keys"),r("values"),r("entries")},c3a1:function(e,i,n){var r=n("e6f3"),a=n("1691");e.exports=Object.keys||function(s){return r(s,a)}},c3b0:function(e,i,n){var r=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(i,"__esModule",{value:!0});const a=r(n("0750"));i.default=c=>{if(!c)throw new Error("color-name-to-hex: No color name provided");const s=a.default[c.toLowerCase()];if(typeof s<"u")return s;throw new Error(`No hex found for ${c}`)}},c50b:function(e,i,n){},c5f6:function(e,i,n){var r=n("7726"),a=n("69a8"),c=n("2d95"),s=n("5dbc"),p=n("6a99"),_=n("79e5"),b=n("9093").f,S=n("11e9").f,E=n("86cc").f,I=n("aa77").trim,R="Number",V=r[R],q=V,U=V.prototype,H=c(n("2aeb")(U))==R,Z="trim"in String.prototype,ne=function(de){var fe=p(de,!1);if(typeof fe=="string"&&fe.length>2){fe=Z?fe.trim():I(fe,3);var ge=fe.charCodeAt(0),we,Ie,Oe;if(ge===43||ge===45){if(we=fe.charCodeAt(2),we===88||we===120)return NaN}else if(ge===48){switch(fe.charCodeAt(1)){case 66:case 98:Ie=2,Oe=49;break;case 79:case 111:Ie=8,Oe=55;break;default:return+fe}for(var ke=fe.slice(2),Ee=0,Qe=ke.length,gt;Ee<Qe;Ee++)if(gt=ke.charCodeAt(Ee),gt<48||gt>Oe)return NaN;return parseInt(ke,Ie)}}return+fe};if(!V(" 0o1")||!V("0b1")||V("+0x1")){V=function(fe){var ge=arguments.length<1?0:fe,we=this;return we instanceof V&&(H?_(function(){U.valueOf.call(we)}):c(we)!=R)?s(new q(ne(ge)),we,V):ne(ge)};for(var ie=n("9e1e")?b(q):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),oe=0,pe;ie.length>oe;oe++)a(q,pe=ie[oe])&&!a(V,pe)&&E(V,pe,S(q,pe));V.prototype=U,U.constructor=V,n("2aba")(r,R,V)}},c69a:function(e,i,n){e.exports=!n("9e1e")&&!n("79e5")(function(){return Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(e,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}e.exports=n},c8bb:function(e,i,n){e.exports=n("54a1")},ca5a:function(e,i){var n=0,r=Math.random();e.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++n+r).toString(36))}},cadf:function(e,i,n){var r=n("9c6c"),a=n("d53b"),c=n("84f2"),s=n("6821");e.exports=n("01f9")(Array,"Array",function(p,_){this._t=s(p),this._i=0,this._k=_},function(){var p=this._t,_=this._k,b=this._i++;return!p||b>=p.length?(this._t=void 0,a(1)):_=="keys"?a(0,b):_=="values"?a(0,p[b]):a(0,[b,p[b]])},"values"),c.Arguments=c.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,i,n){var r=n("d3f4");e.exports=function(a){if(!r(a))throw TypeError(a+" is not an object!");return a}},ccb9:function(e,i,n){i.f=n("5168")},cd1c:function(e,i,n){var r=n("e853");e.exports=function(a,c){return new(r(a))(c)}},cd78:function(e,i,n){var r=n("e4ae"),a=n("f772"),c=n("656e");e.exports=function(s,p){if(r(s),a(p)&&p.constructor===s)return p;var _=c.f(s),b=_.resolve;return b(p),_.promise}},ce10:function(e,i,n){var r=n("69a8"),a=n("6821"),c=n("c366")(!1),s=n("613b")("IE_PROTO");e.exports=function(p,_){var b=a(p),S=0,E=[],I;for(I in b)I!=s&&r(b,I)&&E.push(I);for(;_.length>S;)r(b,I=_[S++])&&(~c(E,I)||E.push(I));return E}},d2c8:function(e,i,n){var r=n("aae3"),a=n("be13");e.exports=function(c,s,p){if(r(s))throw TypeError("String#"+p+" doesn't accept regex!");return String(a(c))}},d2d5:function(e,i,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},d391:function(e){e.exports=JSON.parse('{"AC":"40123","AD":"312345","AE":"501234567","AF":"701234567","AG":"2684641234","AI":"2642351234","AL":"672123456","AM":"77123456","AO":"923123456","AR":"91123456789","AS":"6847331234","AT":"664123456","AU":"412345678","AW":"5601234","AX":"412345678","AZ":"401234567","BA":"61123456","BB":"2462501234","BD":"1812345678","BE":"470123456","BF":"70123456","BG":"43012345","BH":"36001234","BI":"79561234","BJ":"90011234","BL":"690001234","BM":"4413701234","BN":"7123456","BO":"71234567","BQ":"3181234","BR":"11961234567","BS":"2423591234","BT":"17123456","BW":"71123456","BY":"294911911","BZ":"6221234","CA":"5062345678","CC":"412345678","CD":"991234567","CF":"70012345","CG":"061234567","CH":"781234567","CI":"0123456789","CK":"71234","CL":"221234567","CM":"671234567","CN":"13123456789","CO":"3211234567","CR":"83123456","CU":"51234567","CV":"9911234","CW":"95181234","CX":"412345678","CY":"96123456","CZ":"601123456","DE":"15123456789","DJ":"77831001","DK":"32123456","DM":"7672251234","DO":"8092345678","DZ":"551234567","EC":"991234567","EE":"51234567","EG":"1001234567","EH":"650123456","ER":"7123456","ES":"612345678","ET":"911234567","FI":"412345678","FJ":"7012345","FK":"51234","FM":"3501234","FO":"211234","FR":"612345678","GA":"06031234","GB":"7400123456","GD":"4734031234","GE":"555123456","GF":"694201234","GG":"7781123456","GH":"231234567","GI":"57123456","GL":"221234","GM":"3012345","GN":"601123456","GP":"690001234","GQ":"222123456","GR":"6912345678","GT":"51234567","GU":"6713001234","GW":"955012345","GY":"6091234","HK":"51234567","HN":"91234567","HR":"921234567","HT":"34101234","HU":"201234567","ID":"812345678","IE":"850123456","IL":"502345678","IM":"7924123456","IN":"8123456789","IO":"3801234","IQ":"7912345678","IR":"9123456789","IS":"6111234","IT":"3123456789","JE":"7797712345","JM":"8762101234","JO":"790123456","JP":"9012345678","KE":"712123456","KG":"700123456","KH":"91234567","KI":"72001234","KM":"3212345","KN":"8697652917","KP":"1921234567","KR":"1020000000","KW":"50012345","KY":"3453231234","KZ":"7710009998","LA":"2023123456","LB":"71123456","LC":"7582845678","LI":"660234567","LK":"712345678","LR":"770123456","LS":"50123456","LT":"61234567","LU":"628123456","LV":"21234567","LY":"912345678","MA":"650123456","MC":"612345678","MD":"62112345","ME":"67622901","MF":"690001234","MG":"321234567","MH":"2351234","MK":"72345678","ML":"65012345","MM":"92123456","MN":"88123456","MO":"66123456","MP":"6702345678","MQ":"696201234","MR":"22123456","MS":"6644923456","MT":"96961234","MU":"52512345","MV":"7712345","MW":"991234567","MX":"12221234567","MY":"123456789","MZ":"821234567","NA":"811234567","NC":"751234","NE":"93123456","NF":"381234","NG":"8021234567","NI":"81234567","NL":"612345678","NO":"40612345","NP":"9841234567","NR":"5551234","NU":"8884012","NZ":"211234567","OM":"92123456","PA":"61234567","PE":"912345678","PF":"87123456","PG":"70123456","PH":"9051234567","PK":"3012345678","PL":"512345678","PM":"551234","PR":"7872345678","PS":"599123456","PT":"912345678","PW":"6201234","PY":"961456789","QA":"33123456","RE":"692123456","RO":"712034567","RS":"601234567","RU":"9123456789","RW":"720123456","SA":"512345678","SB":"7421234","SC":"2510123","SD":"911231234","SE":"701234567","SG":"81234567","SH":"51234","SI":"31234567","SJ":"41234567","SK":"912123456","SL":"25123456","SM":"66661212","SN":"701234567","SO":"71123456","SR":"7412345","SS":"977123456","ST":"9812345","SV":"70123456","SX":"7215205678","SY":"944567890","SZ":"76123456","TA":"8999","TC":"6492311234","TD":"63012345","TG":"90112345","TH":"812345678","TJ":"917123456","TK":"7290","TL":"77212345","TM":"66123456","TN":"20123456","TO":"7715123","TR":"5012345678","TT":"8682911234","TV":"901234","TW":"912345678","TZ":"621234567","UA":"501234567","UG":"712345678","US":"2015550123","UY":"94231234","UZ":"912345678","VA":"3123456789","VC":"7844301234","VE":"4121234567","VG":"2843001234","VI":"3406421234","VN":"912345678","VU":"5912345","WF":"821234","WS":"7212345","XK":"43201234","YE":"712345678","YT":"639012345","ZA":"711234567","ZM":"955123456","ZW":"712345678"}')},d3f4:function(e,i){e.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},d499:function(e,i,n){n("7f9a")},d53b:function(e,i){e.exports=function(n,r){return{value:r,done:!!n}}},d864:function(e,i,n){var r=n("79aa");e.exports=function(a,c,s){if(r(a),c===void 0)return a;switch(s){case 1:return function(p){return a.call(c,p)};case 2:return function(p,_){return a.call(c,p,_)};case 3:return function(p,_,b){return a.call(c,p,_,b)}}return function(){return a.apply(c,arguments)}}},d8e8:function(e,i){e.exports=function(n){if(typeof n!="function")throw TypeError(n+" is not a function!");return n}},d9f6:function(e,i,n){var r=n("e4ae"),a=n("794b"),c=n("1bc3"),s=Object.defineProperty;i.f=n("8e60")?Object.defineProperty:function(_,b,S){if(r(_),b=c(b,!0),r(S),a)try{return s(_,b,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported!");return"value"in S&&(_[b]=S.value),_}},db06:function(e,i,n){},dbdb:function(e,i,n){var r=n("584a"),a=n("e53d"),c="__core-js_shared__",s=a[c]||(a[c]={});(e.exports=function(p,_){return s[p]||(s[p]=_!==void 0?_:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},e11e:function(e,i){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e214:function(e,i,n){n("db06")},e4ae:function(e,i,n){var r=n("f772");e.exports=function(a){if(!r(a))throw TypeError(a+" is not an object!");return a}},e508:function(e,i,n){(function(r){n.d(i,"a",function(){return Ee});var a=n("252c"),c=n("85fe"),s=n("ed83"),p=n.n(s);n("8bbf");var _={itemsLimit:1e3};function b(Xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(it){return typeof it}:b=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},b(Xe)}function S(Xe,it,ct){return it in Xe?Object.defineProperty(Xe,it,{value:ct,enumerable:!0,configurable:!0,writable:!0}):Xe[it]=ct,Xe}function E(Xe,it){var ct=Object.keys(Xe);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(Xe);it&&(At=At.filter(function(Gt){return Object.getOwnPropertyDescriptor(Xe,Gt).enumerable})),ct.push.apply(ct,At)}return ct}function I(Xe){for(var it=1;it<arguments.length;it++){var ct=arguments[it]!=null?arguments[it]:{};it%2?E(Object(ct),!0).forEach(function(At){S(Xe,At,ct[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(ct)):E(Object(ct)).forEach(function(At){Object.defineProperty(Xe,At,Object.getOwnPropertyDescriptor(ct,At))})}return Xe}function R(Xe,it){if(Xe){if(typeof Xe=="string")return V(Xe,it);var ct=Object.prototype.toString.call(Xe).slice(8,-1);if(ct==="Object"&&Xe.constructor&&(ct=Xe.constructor.name),ct==="Map"||ct==="Set")return Array.from(ct);if(ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return V(Xe,it)}}function V(Xe,it){(it==null||it>Xe.length)&&(it=Xe.length);for(var ct=0,At=new Array(it);ct<it;ct++)At[ct]=Xe[ct];return At}function q(Xe){if(typeof Symbol>"u"||Xe[Symbol.iterator]==null){if(Array.isArray(Xe)||(Xe=R(Xe))){var it=0,ct=function(){};return{s:ct,n:function(){return it>=Xe.length?{done:!0}:{done:!1,value:Xe[it++]}},e:function(gi){throw gi},f:ct}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At,Gt=!0,Bt=!1,Yt;return{s:function(){At=Xe[Symbol.iterator]()},n:function(){var gi=At.next();return Gt=gi.done,gi},e:function(gi){Bt=!0,Yt=gi},f:function(){try{!Gt&&At.return!=null&&At.return()}finally{if(Bt)throw Yt}}}}var U={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(it){return["vertical","horizontal"].includes(it)}}};function H(){return this.items.length&&b(this.items[0])!=="object"}var Z=!1;if(typeof window<"u"){Z=!1;try{var ne=Object.defineProperty({},"passive",{get:function(){Z=!0}});window.addEventListener("test",null,ne)}catch{}}var ie=0,oe={name:"RecycleScroller",components:{ResizeObserver:a.a},directives:{ObserveVisibility:c.a},props:I({},U,{itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}}),data:function(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes:function(){if(this.itemSize===null){for(var it={"-1":{accumulator:0}},ct=this.items,At=this.sizeField,Gt=this.minItemSize,Bt=1e4,Yt=0,gi,_i=0,zi=ct.length;_i<zi;_i++)gi=ct[_i][At]||Gt,gi<Bt&&(Bt=gi),Yt+=gi,it[_i]={accumulator:Yt,size:gi};return this.$_computedMinItemSize=Bt,it}return[]},simpleArray:H},watch:{items:function(){this.updateVisibleItems(!0)},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler:function(){this.updateVisibleItems(!1)},deep:!0}},created:function(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted:function(){var it=this;this.applyPageMode(),this.$nextTick(function(){it.$_prerender=!1,it.updateVisibleItems(!0),it.ready=!0})},beforeDestroy:function(){this.removeListeners()},methods:{addView:function(it,ct,At,Gt,Bt){var Yt={item:At,position:0},gi={id:ie++,index:ct,used:!0,key:Gt,type:Bt};return Object.defineProperty(Yt,"nr",{configurable:!1,value:gi}),it.push(Yt),Yt},unuseView:function(it){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,At=this.$_unusedViews,Gt=it.nr.type,Bt=At.get(Gt);Bt||(Bt=[],At.set(Gt,Bt)),Bt.push(it),ct||(it.nr.used=!1,it.position=-9999,this.$_views.delete(it.nr.key))},handleResize:function(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll:function(it){var ct=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(function(){ct.$_scrollDirty=!1;var At=ct.updateVisibleItems(!1,!0),Gt=At.continuous;Gt||(clearTimeout(ct.$_refreshTimout),ct.$_refreshTimout=setTimeout(ct.handleScroll,100))}))},handleVisibilityChange:function(it,ct){var At=this;this.ready&&(it||ct.boundingClientRect.width!==0||ct.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(function(){At.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems:function(it){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,At=this.itemSize,Gt=this.$_computedMinItemSize,Bt=this.typeField,Yt=this.simpleArray?null:this.keyField,gi=this.items,_i=gi.length,zi=this.sizes,Hi=this.$_views,Zi=this.$_unusedViews,Ci=this.pool,ci,Si,sn;if(!_i)ci=Si=sn=0;else if(this.$_prerender)ci=0,Si=this.prerender,sn=null;else{var vn=this.getScroll();if(ct){var hn=vn.start-this.$_lastUpdateScrollPosition;if(hn<0&&(hn=-hn),At===null&&hn<Gt||hn<At)return{continuous:!0}}this.$_lastUpdateScrollPosition=vn.start;var Nn=this.buffer;if(vn.start-=Nn,vn.end+=Nn,At===null){var yr,Mr=0,Yr=_i-1,fr=~~(_i/2),Ko;do Ko=fr,yr=zi[fr].accumulator,yr<vn.start?Mr=fr:fr<_i-1&&zi[fr+1].accumulator>vn.start&&(Yr=fr),fr=~~((Mr+Yr)/2);while(fr!==Ko);for(fr<0&&(fr=0),ci=fr,sn=zi[_i-1].accumulator,Si=fr;Si<_i&&zi[Si].accumulator<vn.end;Si++);Si===-1?Si=gi.length-1:(Si++,Si>_i&&(Si=_i))}else ci=~~(vn.start/At),Si=Math.ceil(vn.end/At),ci<0&&(ci=0),Si>_i&&(Si=_i),sn=_i*At}Si-ci>_.itemsLimit&&this.itemsLimitError(),this.totalSize=sn;var An,Is=ci<=this.$_endIndex&&Si>=this.$_startIndex;if(this.$_continuous!==Is){if(Is){Hi.clear(),Zi.clear();for(var Xr=0,Fo=Ci.length;Xr<Fo;Xr++)An=Ci[Xr],this.unuseView(An)}this.$_continuous=Is}else if(Is)for(var za=0,Hl=Ci.length;za<Hl;za++)An=Ci[za],An.nr.used&&(it&&(An.nr.index=gi.findIndex(function(_e){return Yt?_e[Yt]===An.item[Yt]:_e===An.item})),(An.nr.index===-1||An.nr.index<ci||An.nr.index>=Si)&&this.unuseView(An));for(var va=Is?null:new Map,ps,Fr,ms,Io,gs=ci;gs<Si;gs++){ps=gi[gs];var Ge=Yt?ps[Yt]:ps;if(Ge==null)throw new Error("Key is ".concat(Ge," on item (keyField is '").concat(Yt,"')"));if(An=Hi.get(Ge),!At&&!zi[gs].size){An&&this.unuseView(An);continue}An?(An.nr.used=!0,An.item=ps):(Fr=ps[Bt],ms=Zi.get(Fr),Is?ms&&ms.length?(An=ms.pop(),An.item=ps,An.nr.used=!0,An.nr.index=gs,An.nr.key=Ge,An.nr.type=Fr):An=this.addView(Ci,gs,ps,Ge,Fr):(Io=va.get(Fr)||0,(!ms||Io>=ms.length)&&(An=this.addView(Ci,gs,ps,Ge,Fr),this.unuseView(An,!0),ms=Zi.get(Fr)),An=ms[Io],An.item=ps,An.nr.used=!0,An.nr.index=gs,An.nr.key=Ge,An.nr.type=Fr,va.set(Fr,Io+1),Io++),Hi.set(Ge,An)),At===null?An.position=zi[gs-1].accumulator:An.position=gs*At}return this.$_startIndex=ci,this.$_endIndex=Si,this.emitUpdate&&this.$emit("update",ci,Si),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:Is}},getListenerTarget:function(){var it=p()(this.$el);return window.document&&(it===window.document.documentElement||it===window.document.body)&&(it=window),it},getScroll:function(){var it=this.$el,ct=this.direction,At=ct==="vertical",Gt;if(this.pageMode){var Bt=it.getBoundingClientRect(),Yt=At?Bt.height:Bt.width,gi=-(At?Bt.top:Bt.left),_i=At?window.innerHeight:window.innerWidth;gi<0&&(_i+=gi,gi=0),gi+_i>Yt&&(_i=Yt-gi),Gt={start:gi,end:gi+_i}}else At?Gt={start:it.scrollTop,end:it.scrollTop+it.clientHeight}:Gt={start:it.scrollLeft,end:it.scrollLeft+it.clientWidth};return Gt},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Z?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(it){var ct;this.itemSize===null?ct=it>0?this.sizes[it-1].accumulator:0:ct=it*this.itemSize,this.scrollToPosition(ct)},scrollToPosition:function(it){this.direction==="vertical"?this.$el.scrollTop=it:this.$el.scrollLeft=it},itemsLimitError:function(){var it=this;throw setTimeout(function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",it.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews:function(){this.pool.sort(function(it,ct){return it.nr.index-ct.nr.index})}}};function pe(Xe,it,ct,At,Gt,Bt,Yt,gi,_i,zi){typeof Yt!="boolean"&&(_i=gi,gi=Yt,Yt=!1);const Hi=typeof ct=="function"?ct.options:ct;Xe&&Xe.render&&(Hi.render=Xe.render,Hi.staticRenderFns=Xe.staticRenderFns,Hi._compiled=!0,Gt&&(Hi.functional=!0)),At&&(Hi._scopeId=At);let Zi;if(Bt?(Zi=function(Ci){Ci=Ci||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!Ci&&typeof __VUE_SSR_CONTEXT__<"u"&&(Ci=__VUE_SSR_CONTEXT__),it&&it.call(this,_i(Ci)),Ci&&Ci._registeredComponents&&Ci._registeredComponents.add(Bt)},Hi._ssrRegister=Zi):it&&(Zi=Yt?function(Ci){it.call(this,zi(Ci,this.$root.$options.shadowRoot))}:function(Ci){it.call(this,gi(Ci))}),Zi)if(Hi.functional){const Ci=Hi.render;Hi.render=function(Si,sn){return Zi.call(sn),Ci(Si,sn)}}else{const Ci=Hi.beforeCreate;Hi.beforeCreate=Ci?[].concat(Ci,Zi):[Zi]}return ct}const de=oe;var fe=function(){var Xe,it,ct=this,At=ct.$createElement,Gt=ct._self._c||At;return Gt("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:ct.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:(Xe={ready:ct.ready,"page-mode":ct.pageMode},Xe["direction-"+ct.direction]=!0,Xe),on:{"&scroll":function(Bt){return ct.handleScroll(Bt)}}},[ct.$slots.before?Gt("div",{staticClass:"vue-recycle-scroller__slot"},[ct._t("before")],2):ct._e(),ct._v(" "),Gt("div",{ref:"wrapper",staticClass:"vue-recycle-scroller__item-wrapper",style:(it={},it[ct.direction==="vertical"?"minHeight":"minWidth"]=ct.totalSize+"px",it)},ct._l(ct.pool,function(Bt){return Gt("div",{key:Bt.nr.id,staticClass:"vue-recycle-scroller__item-view",class:{hover:ct.hoverKey===Bt.nr.key},style:ct.ready?{transform:"translate"+(ct.direction==="vertical"?"Y":"X")+"("+Bt.position+"px)"}:null,on:{mouseenter:function(Yt){ct.hoverKey=Bt.nr.key},mouseleave:function(Yt){ct.hoverKey=null}}},[ct._t("default",null,{item:Bt.item,index:Bt.nr.index,active:Bt.nr.used})],2)}),0),ct._v(" "),ct.$slots.after?Gt("div",{staticClass:"vue-recycle-scroller__slot"},[ct._t("after")],2):ct._e(),ct._v(" "),Gt("ResizeObserver",{on:{notify:ct.handleResize}})],1)},ge=[];fe._withStripped=!0;const Ee=pe({render:fe,staticRenderFns:ge},void 0,de,void 0,!1,void 0,!1,void 0,void 0,void 0);var Qe={name:"DynamicScroller",components:{RecycleScroller:Ee},inheritAttrs:!1,provide:function(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(function(it){var ct=q(it),At;try{for(ct.s();!(At=ct.n()).done;){var Gt=At.value;if(Gt.target){var Bt=new CustomEvent("resize",{detail:{contentRect:Gt.contentRect}});Gt.target.dispatchEvent(Bt)}}}catch(Yt){ct.e(Yt)}finally{ct.f()}})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},props:I({},U,{minItemSize:{type:[Number,String],required:!0}}),data:function(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:H,itemsWithSize:function(){for(var it=[],ct=this.items,At=this.keyField,Gt=this.simpleArray,Bt=this.vscrollData.sizes,Yt=0;Yt<ct.length;Yt++){var gi=ct[Yt],_i=Gt?Yt:gi[At],zi=Bt[_i];typeof zi>"u"&&!this.$_undefinedMap[_i]&&(zi=0),it.push({item:gi,id:_i,size:zi})}return it},listeners:function(){var it={};for(var ct in this.$listeners)ct!=="resize"&&ct!=="visible"&&(it[ct]=this.$listeners[ct]);return it}},watch:{items:function(){this.forceUpdate(!1)},simpleArray:{handler:function(it){this.vscrollData.simpleArray=it},immediate:!0},direction:function(it){this.forceUpdate(!0)}},created:function(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={}},activated:function(){this.vscrollData.active=!0},deactivated:function(){this.vscrollData.active=!1},methods:{onScrollerResize:function(){var it=this.$refs.scroller;it&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible:function(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate:function(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(it||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$emit("vscroll:update",{force:!0})},scrollToItem:function(it){var ct=this.$refs.scroller;ct&&ct.scrollToItem(it)},getItemSize:function(it){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,At=this.simpleArray?ct??this.items.indexOf(it):it[this.keyField];return this.vscrollData.sizes[At]||0},scrollToBottom:function(){var it=this;if(!this.$_scrollingToBottom){this.$_scrollingToBottom=!0;var ct=this.$el;this.$nextTick(function(){ct.scrollTop=ct.scrollHeight+5e3;var At=function Gt(){ct.scrollTop=ct.scrollHeight+5e3,requestAnimationFrame(function(){ct.scrollTop=ct.scrollHeight+5e3,it.$_undefinedSizes===0?it.$_scrollingToBottom=!1:requestAnimationFrame(Gt)})};requestAnimationFrame(At)})}}}};const gt=Qe;var nt=function(){var Xe=this,it=Xe.$createElement,ct=Xe._self._c||it;return ct("RecycleScroller",Xe._g(Xe._b({ref:"scroller",attrs:{items:Xe.itemsWithSize,"min-item-size":Xe.minItemSize,direction:Xe.direction,"key-field":"id"},on:{resize:Xe.onScrollerResize,visible:Xe.onScrollerVisible},scopedSlots:Xe._u([{key:"default",fn:function(At){var Gt=At.item,Bt=At.index,Yt=At.active;return[Xe._t("default",null,null,{item:Gt.item,index:Bt,active:Yt,itemWithSize:Gt})]}}],null,!0)},"RecycleScroller",Xe.$attrs,!1),Xe.listeners),[Xe._v(" "),ct("template",{slot:"before"},[Xe._t("before")],2),Xe._v(" "),ct("template",{slot:"after"},[Xe._t("after")],2)],2)},ft=[];nt._withStripped=!0;const Qt=pe({render:nt,staticRenderFns:ft},void 0,gt,void 0,!1,void 0,!1,void 0,void 0,void 0);var Fe={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id:function(){return this.vscrollData.simpleArray?this.index:this.item[this.vscrollData.keyField]},size:function(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0},finalActive:function(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id:function(){this.size||this.onDataUpdate()},finalActive:function(it){this.size||(it?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?it?this.observeSize():this.unobserveSize():it&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created:function(){var it=this;if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){var ct=function(Bt){it.$watch(function(){return it.sizeDependencies[Bt]},it.onDataUpdate)};for(var At in this.sizeDependencies)ct(At);this.vscrollParent.$on("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted:function(){this.vscrollData.active&&(this.updateSize(),this.observeSize())},beforeDestroy:function(){this.vscrollParent.$off("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$off("vscroll:update-size",this.onVscrollUpdateSize),this.unobserveSize()},methods:{updateSize:function(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData:function(){var it=this;this.watchData?this.$_watchData=this.$watch("data",function(){it.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate:function(it){var ct=it.force;!this.finalActive&&ct&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||ct||!this.size)&&this.updateSize()},onDataUpdate:function(){this.updateSize()},computeSize:function(it){var ct=this;this.$nextTick(function(){if(ct.id===it){var At=ct.$el.offsetWidth,Gt=ct.$el.offsetHeight;ct.applySize(At,Gt)}ct.$_pendingSizeUpdate=null})},applySize:function(it,ct){var At=Math.round(this.vscrollParent.direction==="vertical"?ct:it);At&&this.size!==At&&(this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.$set(this.vscrollData.sizes,this.id,At),this.$set(this.vscrollData.validSizes,this.id,!0),this.emitResize&&this.$emit("resize",this.id))},observeSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.observe(this.$el.parentNode),this.$el.parentNode.addEventListener("resize",this.onResize))},unobserveSize:function(){this.vscrollResizeObserver&&(this.vscrollResizeObserver.unobserve(this.$el.parentNode),this.$el.parentNode.removeEventListener("resize",this.onResize))},onResize:function(it){var ct=it.detail.contentRect,At=ct.width,Gt=ct.height;this.applySize(At,Gt)}},render:function(it){return it(this.tag,this.$slots.default)}};const Vi=pe({},void 0,Fe,void 0,void 0,void 0,!1,void 0,void 0,void 0);function Ve(Xe,it){Xe.component("".concat(it,"recycle-scroller"),Ee),Xe.component("".concat(it,"RecycleScroller"),Ee),Xe.component("".concat(it,"dynamic-scroller"),Qt),Xe.component("".concat(it,"DynamicScroller"),Qt),Xe.component("".concat(it,"dynamic-scroller-item"),Vi),Xe.component("".concat(it,"DynamicScrollerItem"),Vi)}var dt={version:"1.0.10",install:function(it,ct){var At=Object.assign({},{installComponents:!0,componentsPrefix:""},ct);for(var Gt in At)typeof At[Gt]<"u"&&(_[Gt]=At[Gt]);At.installComponents&&Ve(it,At.componentsPrefix)}},kt=null;typeof window<"u"?kt=window.Vue:typeof r<"u"&&(kt=r.Vue),kt&&kt.use(dt)}).call(this,n("c8ba"))},e53d:function(e,i){var n=e.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=n)},e6f3:function(e,i,n){var r=n("07e3"),a=n("36c3"),c=n("5b4e")(!1),s=n("5559")("IE_PROTO");e.exports=function(p,_){var b=a(p),S=0,E=[],I;for(I in b)I!=s&&r(b,I)&&E.push(I);for(;_.length>S;)r(b,I=_[S++])&&(~c(E,I)||E.push(I));return E}},e71e:function(e,i,n){n("c50b")},e853:function(e,i,n){var r=n("d3f4"),a=n("1169"),c=n("2b4c")("species");e.exports=function(s){var p;return a(s)&&(p=s.constructor,typeof p=="function"&&(p===Array||a(p.prototype))&&(p=void 0),r(p)&&(p=p[c],p===null&&(p=void 0))),p===void 0?Array:p}},ebfd:function(e,i,n){var r=n("62a0")("meta"),a=n("f772"),c=n("07e3"),s=n("d9f6").f,p=0,_=Object.isExtensible||function(){return!0},b=!n("294c")(function(){return _(Object.preventExtensions({}))}),S=function(q){s(q,r,{value:{i:"O"+ ++p,w:{}}})},E=function(q,U){if(!a(q))return typeof q=="symbol"?q:(typeof q=="string"?"S":"P")+q;if(!c(q,r)){if(!_(q))return"F";if(!U)return"E";S(q)}return q[r].i},I=function(q,U){if(!c(q,r)){if(!_(q))return!0;if(!U)return!1;S(q)}return q[r].w},R=function(q){return b&&V.NEED&&_(q)&&!c(q,r)&&S(q),q},V=e.exports={KEY:r,NEED:!1,fastKey:E,getWeak:I,onFreeze:R}},ed83:function(e,i,n){var r,a,c;(function(s,p){a=[],r=p,c=typeof r=="function"?r.apply(i,a):r,c!==void 0&&(e.exports=c)})(this,function(){var s=/(auto|scroll)/,p=function(I,R){return I.parentNode===null?R:p(I.parentNode,R.concat([I]))},_=function(I,R){return getComputedStyle(I,null).getPropertyValue(R)},b=function(I){return _(I,"overflow")+_(I,"overflow-y")+_(I,"overflow-x")},S=function(I){return s.test(b(I))},E=function(I){if(I instanceof HTMLElement||I instanceof SVGElement){for(var R=p(I.parentNode,[]),V=0;V<R.length;V+=1)if(S(R[V]))return R[V];return document.scrollingElement||document.documentElement}};return E})},f1ae:function(e,i,n){var r=n("86cc"),a=n("4630");e.exports=function(c,s,p){s in c?r.f(c,s,a(0,p)):c[s]=p}},f201:function(e,i,n){var r=n("e4ae"),a=n("79aa"),c=n("5168")("species");e.exports=function(s,p){var _=r(s).constructor,b;return _===void 0||(b=r(_)[c])==null?p:a(b)}},f410:function(e,i,n){n("1af6"),e.exports=n("584a").Array.isArray},f559:function(e,i,n){var r=n("5ca1"),a=n("9def"),c=n("d2c8"),s="startsWith",p=""[s];r(r.P+r.F*n("5147")(s),"String",{startsWith:function(b){var S=c(this,b,s),E=a(Math.min(arguments.length>1?arguments[1]:void 0,S.length)),I=String(b);return p?p.call(S,I,E):S.slice(E,E+I.length)===I}})},f772:function(e,i){e.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},f921:function(e,i,n){n("014b"),n("c207"),n("69d3"),n("765d"),e.exports=n("584a").Symbol},fa5b:function(e,i,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(e,i,n){var r=n("7726").document;e.exports=r&&r.documentElement},fb15:function(e,i,n){if(n.r(i),typeof window<"u"){var r=window.document.currentScript;{var a=n("8875");r=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a})}var c=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(n.p=c[1])}var s=function(){var O=this,G=O.$createElement,N=O._self._c||G;return N("div",{staticClass:"vue-phone-number-input flex",class:[{dark:O.dark},O.size],attrs:{id:O.id}},[O.noCountrySelector?O._e():N("div",{staticClass:"select-country-container"},[N("CountrySelector",{ref:"CountrySelector",staticClass:"input-country-selector",attrs:{id:O.uniqueId+"_country_selector",items:O.codesCountries,"countries-height":O.countriesHeight,error:O.shouldChooseCountry,hint:O.shouldChooseCountry?O.t.countrySelectorError:null,disabled:O.disabled,valid:O.isValid&&!O.noValidatorState,"preferred-countries":O.preferredCountries,"only-countries":O.onlyCountries,"ignored-countries":O.ignoredCountries,label:O.t.countrySelectorLabel,"no-flags":O.noFlags,"show-code-on-list":O.showCodeOnList,size:O.size,dark:O.dark,theme:O.theme},model:{value:O.countryCode,callback:function(re){O.countryCode=re},expression:"countryCode"}},[O._t("arrow",null,{slot:"arrow"})],2)],1),N("div",{staticClass:"flex-1"},[N("InputTel",O._b({ref:"PhoneNumberInput",staticClass:"input-phone-number",attrs:{id:O.uniqueId+"_phone_number",label:O.t.phoneNumberLabel,hint:O.hintValue,dark:O.dark,disabled:O.disabled,size:O.size,error:O.error,valid:O.isValid&&!O.noValidatorState,required:O.required,"no-country-selector":O.noCountrySelector,theme:O.theme},on:{keydown:function(re){O.lastKeyPressed=re.keyCode},focus:function(re){return O.$emit("phone-number-focused")},blur:function(re){return O.$emit("phone-number-blur")}},model:{value:O.phoneNumber,callback:function(re){O.phoneNumber=re},expression:"phoneNumber"}},"InputTel",O.$attrs,!1))],1)])},p=[];n("8e6e"),n("ac6a"),n("cadf"),n("456d"),n("6b54"),n("96cf");var _=n("795b"),b=n.n(_);function S(O,G,N,re,Re,ot,Vt){try{var Jt=O[ot](Vt),xi=Jt.value}catch(Wi){N(Wi);return}Jt.done?G(xi):b.a.resolve(xi).then(re,Re)}function E(O){return function(){var G=this,N=arguments;return new b.a(function(re,Re){var ot=O.apply(G,N);function Vt(xi){S(ot,re,Re,Vt,Jt,"next",xi)}function Jt(xi){S(ot,re,Re,Vt,Jt,"throw",xi)}Vt(void 0)})}}var I=n("85f2"),R=n.n(I);function V(O,G,N){return G in O?R()(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}n("c5f6"),n("6762"),n("2fdb");var q=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1246"],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1441"],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guernsey","gg","44",1],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan (日本)","jp","81"],["Jersey","je","44",3],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Macedonia (FYROM) (Македонија)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262",0],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Åland Islands","ax","358",1]],U=q.map(function(O){return O[1].toUpperCase()}),H=q.map(function(O){return{name:O[0],iso2:O[1].toUpperCase(),dialCode:O[2],priority:O[3]||0,areaCodes:O[4]||null}}),Z=n("d391"),ne={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:[25689]\\d|40)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-7]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["[39]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[02-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|[23]1|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[01359])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[0-79]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-26-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|6[0-289]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[89]|389)","5(?:29[89]|389)0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|389[05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[08]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[129]\\d|31|77|88)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[017]\\d|[235][1-9]|4[0-35-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","976\\d{6}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[26-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-3]|[268]2)|3(?:0[02]|22|33)|4(?:00|4[24]|65|82)|5(?:00|29|58|83)|6(?:00|66|82)|7(?:58|77)|8(?:00|42|5[25]|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"(?:210|370\\d\\d)\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[35]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|(?:370[1-9]|51[013]0)\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function ie(O,G){var N=Array.prototype.slice.call(G);return N.push(ne),O.apply(this,N)}var oe=function(O,G){O=O.split("-"),G=G.split("-");for(var N=O[0].split("."),re=G[0].split("."),Re=0;Re<3;Re++){var ot=Number(N[Re]),Vt=Number(re[Re]);if(ot>Vt)return 1;if(Vt>ot)return-1;if(!isNaN(ot)&&isNaN(Vt))return 1;if(isNaN(ot)&&!isNaN(Vt))return-1}return O[1]&&G[1]?O[1]>G[1]?1:O[1]<G[1]?-1:0:!O[1]&&G[1]?1:O[1]&&!G[1]?-1:0};function pe(O){return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},pe(O)}function de(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function fe(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function ge(O,G,N){return G&&fe(O.prototype,G),N&&fe(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var we="1.2.0",Ie="1.7.35",Oe=" ext. ",ke=/^\d+$/,Ee=function(){function O(G){de(this,O),pt(G),this.metadata=G,tt.call(this,G)}return ge(O,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(N){return N!=="001"})}},{key:"getCountryMetadata",value:function(N){return this.metadata.countries[N]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(N){return this.getCountryMetadata(N)!==void 0}},{key:"hasCallingCode",value:function(N){if(this.getCountryCodesForCallingCode(N))return!0;if(this.nonGeographic()){if(this.nonGeographic()[N])return!0}else{var re=this.countryCallingCodes()[N];if(re&&re.length===1&&re[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(N){return this.nonGeographic()?!!this.nonGeographic()[N]:!this.getCountryCodesForCallingCode(N)}},{key:"country",value:function(N){return this.selectNumberingPlan(N)}},{key:"selectNumberingPlan",value:function(N,re){if(N&&ke.test(N)&&(re=N,N=null),N&&N!=="001"){if(!this.hasCountry(N))throw new Error("Unknown country: ".concat(N));this.numberingPlan=new Qe(this.getCountryMetadata(N),this)}else if(re){if(!this.hasCallingCode(re))throw new Error("Unknown calling code: ".concat(re));this.numberingPlan=new Qe(this.getNumberingPlanMetadata(re),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(N){var re=this.countryCallingCodes()[N];if(re)return re.length===1&&re[0].length===3?void 0:re}},{key:"getCountryCodeForCallingCode",value:function(N){var re=this.getCountryCodesForCallingCode(N);if(re)return re[0]}},{key:"getNumberingPlanMetadata",value:function(N){var re=this.getCountryCodeForCallingCode(N);if(re)return this.getCountryMetadata(re);if(this.nonGeographic()){var Re=this.nonGeographic()[N];if(Re)return Re}else{var ot=this.countryCallingCodes()[N];if(ot&&ot.length===1&&ot[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(N){return this.numberingPlan.type(N)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(N){return this.selectNumberingPlan(N)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),O}(),Qe=function(){function O(G,N){de(this,O),this.globalMetadataObject=N,this.metadata=G,tt.call(this,N.metadata)}return ge(O,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(N){return N[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var N=this,re=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return re.map(function(Re){return new gt(Re,N)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(N){return N[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(N){if(this.hasTypes()&&Tt(this.types(),N))return new ft(Tt(this.types(),N),this)}},{key:"ext",value:function(){return this.v1||this.v2?Oe:this.metadata[13]||Oe}}]),O}(),gt=function(){function O(G,N){de(this,O),this._format=G,this.metadata=N}return ge(O,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!nt.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),O}(),nt=/^\(?\$1\)?$/,ft=function(){function O(G,N){de(this,O),this.type=G,this.metadata=N}return ge(O,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),O}();function Tt(O,G){switch(G){case"FIXED_LINE":return O[0];case"MOBILE":return O[1];case"TOLL_FREE":return O[2];case"PREMIUM_RATE":return O[3];case"PERSONAL_NUMBER":return O[4];case"VOICEMAIL":return O[5];case"UAN":return O[6];case"PAGER":return O[7];case"VOIP":return O[8];case"SHARED_COST":return O[9]}}function pt(O){if(!O)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!et(O)||!et(O.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(et(O)?"an object of shape: { "+Object.keys(O).join(", ")+" }":"a "+Mt(O)+": "+O,"."))}var et=function(G){return pe(G)==="object"},Mt=function(G){return pe(G)};function Qt(O,G){if(G=new Ee(G),G.hasCountry(O))return G.country(O).countryCallingCode();throw new Error("Unknown country: ".concat(O))}function Fe(O,G){return G.countries[O]!==void 0}function tt(O){var G=O.version;typeof G=="number"?(this.v1=G===1,this.v2=G===2,this.v3=G===3,this.v4=G===4):G?oe(G,we)===-1?this.v2=!0:oe(G,Ie)===-1?this.v3=!0:this.v4=!0:this.v1=!0}function Rt(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=Xt(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xt(O,G){if(O){if(typeof O=="string")return Ei(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Ei(O,G)}}function Ei(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function Ni(O,G){for(var N=O.slice(),re=Rt(G),Re;!(Re=re()).done;){var ot=Re.value;O.indexOf(ot)<0&&N.push(ot)}return N.sort(function(Vt,Jt){return Vt-Jt})}function Vi(O,G){return Ve(O,void 0,G)}function Ve(O,G,N){var re=N.type(G),Re=re&&re.possibleLengths()||N.possibleLengths();if(!Re)return"IS_POSSIBLE";if(G==="FIXED_LINE_OR_MOBILE"){if(!N.type("FIXED_LINE"))return Ve(O,"MOBILE",N);var ot=N.type("MOBILE");ot&&(Re=Ni(Re,ot.possibleLengths()))}else if(G&&!re)return"INVALID_LENGTH";var Vt=O.length,Jt=Re[0];return Jt===Vt?"IS_POSSIBLE":Jt>Vt?"TOO_SHORT":Re[Re.length-1]<Vt?"TOO_LONG":Re.indexOf(Vt,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function dt(O,G,N){if(G===void 0&&(G={}),N=new Ee(N),G.v2){if(!O.countryCallingCode)throw new Error("Invalid phone number object passed");N.selectNumberingPlan(O.countryCallingCode)}else{if(!O.phone)return!1;if(O.country){if(!N.hasCountry(O.country))throw new Error("Unknown country: ".concat(O.country));N.country(O.country)}else{if(!O.countryCallingCode)throw new Error("Invalid phone number object passed");N.selectNumberingPlan(O.countryCallingCode)}}if(N.possibleLengths())return kt(O.phone||O.nationalNumber,N);if(O.countryCallingCode&&N.isNonGeographicCallingCode(O.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function kt(O,G){switch(Vi(O,G)){case"IS_POSSIBLE":return!0;default:return!1}}function Xe(O,G){return O=O||"",new RegExp("^(?:"+G+")$").test(O)}function it(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=ct(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(O,G){if(O){if(typeof O=="string")return At(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return At(O,G)}}function At(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}var Gt=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function Bt(O,G,N){if(G=G||{},!!O.country){N=new Ee(N),N.selectNumberingPlan(O.country,O.countryCallingCode);var re=G.v2?O.nationalNumber:O.phone;if(Xe(re,N.nationalNumberPattern())){if(Yt(re,"FIXED_LINE",N))return N.type("MOBILE")&&N.type("MOBILE").pattern()===""||!N.type("MOBILE")||Yt(re,"MOBILE",N)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var Re=it(Gt),ot;!(ot=Re()).done;){var Vt=ot.value;if(Yt(re,Vt,N))return Vt}}}}function Yt(O,G,N){return G=N.type(G),!G||!G.pattern()||G.possibleLengths()&&G.possibleLengths().indexOf(O.length)<0?!1:Xe(O,G.pattern())}function gi(O,G,N){if(G=G||{},N=new Ee(N),!O.country)return!1;if(N.selectNumberingPlan(O.country,O.countryCallingCode),N.hasTypes())return Bt(O,G,N.metadata)!==void 0;var re=G.v2?O.nationalNumber:O.phone;return Xe(re,N.nationalNumberPattern())}var _i=2,zi=17,Hi=3,Zi="0-9０-９٠-٩۰-۹",Ci="-‐-―−ー－",ci="／/",Si="．.",sn="  ­​⁠　",vn="()（）［］\\[\\]",hn="~⁓∼～",Nn="".concat(Ci).concat(ci).concat(Si).concat(sn).concat(vn).concat(hn),yr="+＋";function Mr(O){return O.replace(new RegExp("[".concat(Nn,"]+"),"g")," ").trim()}var Yr=/(\$\d)/;function fr(O,G,N){var re=N.useInternationalFormat,Re=N.withNationalPrefix;N.carrierCode,N.metadata;var ot=O.replace(new RegExp(G.pattern()),re?G.internationalFormat():Re&&G.nationalPrefixFormattingRule()?G.format().replace(Yr,G.nationalPrefixFormattingRule()):G.format());return re?Mr(ot):ot}var Ko=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function An(O,G,N){var re=new Ee(N);if(re.selectNumberingPlan(O,G),re.defaultIDDPrefix())return re.defaultIDDPrefix();if(Ko.test(re.IDDPrefix()))return re.IDDPrefix()}var Is=";ext=",Xr=function(G){return"([".concat(Zi,"]{1,").concat(G,"})")};function Fo(O){var G="20",N="15",re="9",Re="6",ot="[  \\t,]*",Vt="[:\\.．]?[  \\t,-]*",Jt="#?",xi="(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)",Wi="(?:[xｘ#＃~～]|int|ｉｎｔ)",wi="[- ]+",Cs="[  \\t]*",sr="(?:,{2}|;)",Ro=Is+Xr(G),Aa=ot+xi+Vt+Xr(G)+Jt,Pl=ot+Wi+Vt+Xr(re)+Jt,lu=wi+Xr(Re)+"#",Xf=Cs+sr+Vt+Xr(N)+Jt,om=Cs+"(?:,)+"+Vt+Xr(re)+Jt;return Ro+"|"+Aa+"|"+Pl+"|"+lu+"|"+Xf+"|"+om}var za="["+Zi+"]{"+_i+"}",Hl="["+yr+"]{0,1}(?:["+Nn+"]*["+Zi+"]){3,}["+Nn+Zi+"]*",va=new RegExp("^["+yr+"]{0,1}(?:["+Nn+"]*["+Zi+"]){1,2}$","i"),ps=Hl+"(?:"+Fo()+")?",Fr=new RegExp("^"+za+"$|^"+ps+"$","i");function ms(O){return O.length>=_i&&Fr.test(O)}function Io(O){return va.test(O)}function gs(O,G){return Te(O)||_e(O,G)||De(O,G)||Ge()}function Ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e(O,G){var N=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N!=null){var re=[],Re=!0,ot=!1,Vt,Jt;try{for(N=N.call(O);!(Re=(Vt=N.next()).done)&&(re.push(Vt.value),!(G&&re.length===G));Re=!0);}catch(xi){ot=!0,Jt=xi}finally{try{!Re&&N.return!=null&&N.return()}finally{if(ot)throw Jt}}return re}}function Te(O){if(Array.isArray(O))return O}function ze(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=De(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(O,G){if(O){if(typeof O=="string")return _t(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return _t(O,G)}}function _t(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function Ct(O){var G,N;O=O.replace(/^tel:/,"tel=");for(var re=ze(O.split(";")),Re;!(Re=re()).done;){var ot=Re.value,Vt=ot.split("="),Jt=gs(Vt,2),xi=Jt[0],Wi=Jt[1];switch(xi){case"tel":G=Wi;break;case"ext":N=Wi;break;case"phone-context":Wi[0]==="+"&&(G=Wi+G);break}}if(!ms(G))return{};var wi={number:G};return N&&(wi.ext=N),wi}function St(O){var G=O.number,N=O.ext;if(!G)return"";if(G[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(G).concat(N?";ext="+N:"")}function vt(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=Pt(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(O,G){if(O){if(typeof O=="string")return jt(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return jt(O,G)}}function jt(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function Ii(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function ai(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?Ii(Object(N),!0).forEach(function(re){Ji(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):Ii(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}function Ji(O,G,N){return G in O?Object.defineProperty(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}var Qi={formatExtension:function(G,N,re){return"".concat(G).concat(re.ext()).concat(N)}};function Gi(O,G,N,re){if(N?N=ai(ai({},Qi),N):N=Qi,re=new Ee(re),O.country&&O.country!=="001"){if(!re.hasCountry(O.country))throw new Error("Unknown country: ".concat(O.country));re.country(O.country)}else if(O.countryCallingCode)re.selectNumberingPlan(O.countryCallingCode);else return O.phone||"";var Re=re.countryCallingCode(),ot=N.v2?O.nationalNumber:O.phone,Vt;switch(G){case"NATIONAL":return ot?(Vt=Bi(ot,O.carrierCode,"NATIONAL",re,N),Ln(Vt,O.ext,re,N.formatExtension)):"";case"INTERNATIONAL":return ot?(Vt=Bi(ot,null,"INTERNATIONAL",re,N),Vt="+".concat(Re," ").concat(Vt),Ln(Vt,O.ext,re,N.formatExtension)):"+".concat(Re);case"E.164":return"+".concat(Re).concat(ot);case"RFC3966":return St({number:"+".concat(Re).concat(ot),ext:O.ext});case"IDD":if(!N.fromCountry)return;var Jt=rn(ot,O.carrierCode,Re,N.fromCountry,re);return Ln(Jt,O.ext,re,N.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(G,'"'))}}function Bi(O,G,N,re,Re){var ot=yn(re.formats(),O);return ot?fr(O,ot,{useInternationalFormat:N==="INTERNATIONAL",withNationalPrefix:!(ot.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&Re&&Re.nationalPrefix===!1),carrierCode:G,metadata:re}):O}function yn(O,G){for(var N=vt(O),re;!(re=N()).done;){var Re=re.value;if(Re.leadingDigitsPatterns().length>0){var ot=Re.leadingDigitsPatterns()[Re.leadingDigitsPatterns().length-1];if(G.search(ot)!==0)continue}if(Xe(G,Re.pattern()))return Re}}function Ln(O,G,N,re){return G?re(O,G,N):O}function rn(O,G,N,re,Re){var ot=Qt(re,Re.metadata);if(ot===N){var Vt=Bi(O,G,"NATIONAL",Re);return N==="1"?N+" "+Vt:Vt}var Jt=An(re,void 0,Re.metadata);if(Jt)return"".concat(Jt," ").concat(N," ").concat(Bi(O,null,"INTERNATIONAL",Re))}function Jn(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function er(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?Jn(Object(N),!0).forEach(function(re){ya(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):Jn(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}function ya(O,G,N){return G in O?Object.defineProperty(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}function $o(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function Wt(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function Po(O,G,N){return G&&Wt(O.prototype,G),N&&Wt(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var pr=function(){function O(G,N,re){if($o(this,O),!G)throw new TypeError("`country` or `countryCallingCode` not passed");if(!N)throw new TypeError("`nationalNumber` not passed");if(!re)throw new TypeError("`metadata` not passed");var Re=new Ee(re);ba(G)&&(this.country=G,Re.country(G),G=Re.countryCallingCode()),this.countryCallingCode=G,this.nationalNumber=N,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=re}return Po(O,[{key:"setExt",value:function(N){this.ext=N}},{key:"isPossible",value:function(){return dt(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return gi(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){var N=new Ee(this.metadata);return N.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(N){return this.number===N.number&&this.ext===N.ext}},{key:"getType",value:function(){return Bt(this,{v2:!0},this.metadata)}},{key:"format",value:function(N,re){return Gi(this,N,re?er(er({},re),{},{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(N){return this.format("NATIONAL",N)}},{key:"formatInternational",value:function(N){return this.format("INTERNATIONAL",N)}},{key:"getURI",value:function(N){return this.format("RFC3966",N)}}]),O}(),ba=function(G){return/^[A-Z]{2}$/.test(G)};function Lc(O,G,N){if(G[O])return new pr(O,G[O],N)}function Qs(){return ie(Lc,arguments)}function En(O){return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},En(O)}function dr(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function Qo(O,G,N){return G&&dr(O.prototype,G),N&&dr(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}function bi(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function _n(O,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(G&&G.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),G&&Ur(O,G)}function bn(O){var G=ns();return function(){var re=In(O),Re;if(G){var ot=In(this).constructor;Re=Reflect.construct(re,arguments,ot)}else Re=re.apply(this,arguments);return fn(this,Re)}}function fn(O,G){if(G&&(En(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nr(O)}function nr(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function xn(O){var G=typeof Map=="function"?new Map:void 0;return xn=function(re){if(re===null||!Ps(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(typeof G<"u"){if(G.has(re))return G.get(re);G.set(re,Re)}function Re(){return go(re,arguments,In(this).constructor)}return Re.prototype=Object.create(re.prototype,{constructor:{value:Re,enumerable:!1,writable:!0,configurable:!0}}),Ur(Re,re)},xn(O)}function go(O,G,N){return ns()?go=Reflect.construct:go=function(Re,ot,Vt){var Jt=[null];Jt.push.apply(Jt,ot);var xi=Function.bind.apply(Re,Jt),Wi=new xi;return Vt&&Ur(Wi,Vt.prototype),Wi},go.apply(null,arguments)}function ns(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ps(O){return Function.toString.call(O).indexOf("[native code]")!==-1}function Ur(O,G){return Ur=Object.setPrototypeOf||function(re,Re){return re.__proto__=Re,re},Ur(O,G)}function In(O){return In=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},In(O)}var tr=function(O){_n(N,O);var G=bn(N);function N(re){var Re;return bi(this,N),Re=G.call(this,re),Object.setPrototypeOf(nr(Re),N.prototype),Re.name=Re.constructor.name,Re}return Qo(N)}(xn(Error)),Or=new RegExp("(?:"+Fo()+")$","i");function Ao(O){var G=O.search(Or);if(G<0)return{};for(var N=O.slice(0,G),re=O.match(Or),Re=1;Re<re.length;){if(re[Re])return{number:N,ext:re[Re]};Re++}}function _o(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=Gl(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gl(O,G){if(O){if(typeof O=="string")return No(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return No(O,G)}}function No(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}var pl={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function Jo(O){return pl[O]}function Mo(O){for(var G="",N=_o(O.split("")),re;!(re=N()).done;){var Re=re.value,ot=Jo(Re);ot&&(G+=ot)}return G}function Va(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=ws(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(O,G){if(O){if(typeof O=="string")return br(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return br(O,G)}}function br(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function ml(O){for(var G="",N=Va(O.split("")),re;!(re=N()).done;){var Re=re.value;G+=gl(Re,G)||""}return G}function gl(O,G){return O==="+"?G?void 0:"+":Jo(O)}var Vs=new RegExp("(["+Zi+"])");function ln(O,G,N,re){if(G){var Re=new Ee(re);Re.selectNumberingPlan(G,N);var ot=new RegExp(Re.IDDPrefix());if(O.search(ot)===0){O=O.slice(O.match(ot)[0].length);var Vt=O.match(Vs);if(!(Vt&&Vt[1]!=null&&Vt[1].length>0&&Vt[1]==="0"))return O}}}function As(O,G){if(O&&G.numberingPlan.nationalPrefixForParsing()){var N=new RegExp("^(?:"+G.numberingPlan.nationalPrefixForParsing()+")"),re=N.exec(O);if(re){var Re,ot,Vt=re.length-1,Jt=Vt>0&&re[Vt];if(G.nationalPrefixTransformRule()&&Jt)Re=O.replace(N,G.nationalPrefixTransformRule()),Vt>1&&(ot=re[1]);else{var xi=re[0];Re=O.slice(xi.length),Jt&&(ot=re[1])}var Wi;if(Jt){var wi=O.indexOf(re[1]),Cs=O.slice(0,wi);Cs===G.numberingPlan.nationalPrefix()&&(Wi=G.numberingPlan.nationalPrefix())}else Wi=re[0];return{nationalNumber:Re,nationalPrefix:Wi,carrierCode:ot}}}return{nationalNumber:O}}function Yn(O,G){var N=As(O,G),re=N.carrierCode,Re=N.nationalNumber;if(Re!==O){if(!jr(O,Re,G))return{nationalNumber:O};if(G.possibleLengths()&&!_l(Re,G))return{nationalNumber:O}}return{nationalNumber:Re,carrierCode:re}}function jr(O,G,N){return!(Xe(O,N.nationalNumberPattern())&&!Xe(G,N.nationalNumberPattern()))}function _l(O,G){switch(Vi(O,G)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function Wl(O,G,N,re){var Re=G?Qt(G,re):N;if(O.indexOf(Re)===0){re=new Ee(re),re.selectNumberingPlan(G,N);var ot=O.slice(Re.length),Vt=Yn(ot,re),Jt=Vt.nationalNumber,xi=Yn(O,re),Wi=xi.nationalNumber;if(!Xe(Wi,re.nationalNumberPattern())&&Xe(Jt,re.nationalNumberPattern())||Vi(Wi,re)==="TOO_LONG")return{countryCallingCode:Re,number:ot}}return{number:O}}function xa(O,G,N,re){if(!O)return{};if(O[0]!=="+"){var Re=ln(O,G,N,re);if(Re&&Re!==O)O="+"+Re;else{if(G||N){var ot=Wl(O,G,N,re),Vt=ot.countryCallingCode,Jt=ot.number;if(Vt)return{countryCallingCode:Vt,number:Jt}}return{number:O}}}if(O[1]==="0")return{};re=new Ee(re);for(var xi=2;xi-1<=Hi&&xi<=O.length;){var Wi=O.slice(1,xi);if(re.hasCallingCode(Wi))return re.selectNumberingPlan(Wi),{countryCallingCode:Wi,number:O.slice(xi)};xi++}return{}}function Lr(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=ql(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(O,G){if(O){if(typeof O=="string")return Oo(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Oo(O,G)}}function Oo(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function xr(O,G,N){var re=N.getCountryCodesForCallingCode(O);if(re)return re.length===1?re[0]:zo(re,G,N.metadata)}function zo(O,G,N){N=new Ee(N);for(var re=Lr(O),Re;!(Re=re()).done;){var ot=Re.value;if(N.country(ot),N.leadingDigits()){if(G&&G.search(N.leadingDigits())===0)return ot}else if(Bt({phone:G,country:ot},void 0,N.metadata))return ot}}var ku=250,hd=new RegExp("["+yr+Zi+"]"),Dc=new RegExp("[^"+Zi+"#]+$");function vl(O,G,N){if(G=G||{},N=new Ee(N),G.defaultCountry&&!N.hasCountry(G.defaultCountry))throw G.v2?new tr("INVALID_COUNTRY"):new Error("Unknown country: ".concat(G.defaultCountry));var re=Eu(O,G.v2,G.extract),Re=re.number,ot=re.ext,Vt=re.error;if(!Re){if(G.v2)throw Vt==="TOO_SHORT"?new tr("TOO_SHORT"):new tr("NOT_A_NUMBER");return{}}var Jt=Sn(Re,G.defaultCountry,G.defaultCallingCode,N),xi=Jt.country,Wi=Jt.nationalNumber,wi=Jt.countryCallingCode,Cs=Jt.carrierCode;if(!N.hasSelectedNumberingPlan()){if(G.v2)throw new tr("INVALID_COUNTRY");return{}}if(!Wi||Wi.length<_i){if(G.v2)throw new tr("TOO_SHORT");return{}}if(Wi.length>zi){if(G.v2)throw new tr("TOO_LONG");return{}}if(G.v2){var sr=new pr(wi,Wi,N.metadata);return xi&&(sr.country=xi),Cs&&(sr.carrierCode=Cs),ot&&(sr.ext=ot),sr}var Ro=(G.extended?N.hasSelectedNumberingPlan():xi)?Xe(Wi,N.nationalNumberPattern()):!1;return G.extended?{country:xi,countryCallingCode:wi,carrierCode:Cs,valid:Ro,possible:Ro?!0:!!(G.extended===!0&&N.possibleLengths()&&kt(Wi,N)),phone:Wi,ext:ot}:Ro?Ua(xi,Wi,ot):{}}function Zl(O,G,N){if(O){if(O.length>ku){if(N)throw new tr("TOO_LONG");return}if(G===!1)return O;var re=O.search(hd);if(!(re<0))return O.slice(re).replace(Dc,"")}}function Eu(O,G,N){if(O&&O.indexOf("tel:")===0)return Ct(O);var re=Zl(O,N,G);if(!re)return{};if(!ms(re))return Io(re)?{error:"TOO_SHORT"}:{};var Re=Ao(re);return Re.ext?Re:{number:re}}function Ua(O,G,N){var re={country:O,phone:G};return N&&(re.ext=N),re}function Sn(O,G,N,re){var Re=xa(ml(O),G,N,re.metadata),ot=Re.countryCallingCode,Vt=Re.number,Jt;if(ot)re.selectNumberingPlan(ot);else if(Vt&&(G||N))re.selectNumberingPlan(G,N),G&&(Jt=G),ot=N||Qt(G,re.metadata);else return{};if(!Vt)return{countryCallingCode:ot};var xi=Yn(ml(Vt),re),Wi=xi.nationalNumber,wi=xi.carrierCode,Cs=xr(ot,Wi,re);return Cs&&(Jt=Cs,Cs==="001"||re.country(Jt)),{country:Jt,countryCallingCode:ot,nationalNumber:Wi,carrierCode:wi}}function Iu(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function us(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?Iu(Object(N),!0).forEach(function(re){Ms(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):Iu(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}function Ms(O,G,N){return G in O?Object.defineProperty(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}function Yl(O,G,N){return vl(O,us(us({},G),{},{v2:!0}),N)}function nc(O){return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},nc(O)}function ja(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function Ha(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?ja(Object(N),!0).forEach(function(re){yl(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):ja(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}function yl(O,G,N){return G in O?Object.defineProperty(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}function Xl(O,G){return rc(O)||Js(O,G)||Os(O,G)||vo()}function vo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(O,G){if(O){if(typeof O=="string")return Kl(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Kl(O,G)}}function Kl(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function Js(O,G){var N=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N!=null){var re=[],Re=!0,ot=!1,Vt,Jt;try{for(N=N.call(O);!(Re=(Vt=N.next()).done)&&(re.push(Vt.value),!(G&&re.length===G));Re=!0);}catch(xi){ot=!0,Jt=xi}finally{try{!Re&&N.return!=null&&N.return()}finally{if(ot)throw Jt}}return re}}function rc(O){if(Array.isArray(O))return O}function sc(O){var G=Array.prototype.slice.call(O),N=Xl(G,4),re=N[0],Re=N[1],ot=N[2],Vt=N[3],Jt,xi,Wi;if(typeof re=="string")Jt=re;else throw new TypeError("A text for parsing must be a string.");if(!Re||typeof Re=="string")Vt?(xi=ot,Wi=Vt):(xi=void 0,Wi=ot),Re&&(xi=Ha({defaultCountry:Re},xi));else if(eo(Re))ot?(xi=Re,Wi=ot):Wi=Re;else throw new Error("Invalid second argument: ".concat(Re));return{text:Jt,options:xi,metadata:Wi}}var eo=function(G){return nc(G)==="object"};function Un(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function wa(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?Un(Object(N),!0).forEach(function(re){bl(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):Un(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}function bl(O,G,N){return G in O?Object.defineProperty(O,G,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[G]=N,O}function Ta(O,G,N){G&&G.defaultCountry&&!Fe(G.defaultCountry,N)&&(G=wa(wa({},G),{},{defaultCountry:void 0}));try{return Yl(O,G,N)}catch(re){if(!(re instanceof tr))throw re}}function Vo(){var O=sc(arguments),G=O.text,N=O.options,re=O.metadata;return Ta(G,N,re)}function Sa(){return ie(Vo,arguments)}function ea(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function oc(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function xl(O,G,N){return G&&oc(O.prototype,G),N&&oc(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var ac=function(){function O(G){var N=G.onCountryChange,re=G.onCallingCodeChange;ea(this,O),this.onCountryChange=N,this.onCallingCodeChange=re}return xl(O,[{key:"reset",value:function(N,re){this.international=!1,this.IDDPrefix=void 0,this.missingPlus=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(N,re)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(N){for(var re=0,Re=Object.keys(N);re<Re.length;re++){var ot=Re[re];this[ot]=N[ot]}}},{key:"initCountryAndCallingCode",value:function(N,re){this.setCountry(N),this.setCallingCode(re)}},{key:"setCountry",value:function(N){this.country=N,this.onCountryChange(N)}},{key:"setCallingCode",value:function(N){this.callingCode=N,this.onCallingCodeChange(N,this.country)}},{key:"startInternationalNumber",value:function(N,re){this.international=!0,this.initCountryAndCallingCode(N,re)}},{key:"appendDigits",value:function(N){this.digits+=N}},{key:"appendNationalSignificantNumberDigits",value:function(N){this.nationalSignificantNumber+=N}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}]),O}();function Uo(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=Ga(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ga(O,G){if(O){if(typeof O=="string")return Wa(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Wa(O,G)}}function Wa(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}var cs="x",kn=new RegExp(cs);function Lo(O,G){if(G<1)return"";for(var N="";G>1;)G&1&&(N+=O),G>>=1,O+=O;return N+O}function Us(O,G){return O[G]===")"&&G++,Rc(O.slice(0,G))}function Rc(O){for(var G=[],N=0;N<O.length;)O[N]==="("?G.push(N):O[N]===")"&&G.pop(),N++;var re=0,Re="";G.push(O.length);for(var ot=0,Vt=G;ot<Vt.length;ot++){var Jt=Vt[ot];Re+=O.slice(re,Jt),re=Jt+1}return Re}function lc(O,G,N){for(var re=Uo(N.split("")),Re;!(Re=re()).done;){var ot=Re.value;if(O.slice(G+1).search(kn)<0)return;G=O.search(kn),O=O.replace(kn,ot)}return[O,G]}function uc(O,G,N){var re=N.metadata,Re=N.shouldTryNationalPrefixFormattingRule,ot=N.getSeparatorAfterNationalPrefix,Vt=new RegExp("^(?:".concat(G.pattern(),")$"));if(Vt.test(O.nationalSignificantNumber))return cc(O,G,{metadata:re,shouldTryNationalPrefixFormattingRule:Re,getSeparatorAfterNationalPrefix:ot})}function Ql(O,G){return Vi(O,G)==="IS_POSSIBLE"}function cc(O,G,N){var re=N.metadata,Re=N.shouldTryNationalPrefixFormattingRule,ot=N.getSeparatorAfterNationalPrefix;if(O.nationalSignificantNumber,O.international,O.nationalPrefix,O.carrierCode,Re(G)){var Vt=fd(O,G,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:ot,metadata:re});if(Vt)return Vt}return fd(O,G,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:ot,metadata:re})}function fd(O,G,N){var re=N.metadata,Re=N.useNationalPrefixFormattingRule,ot=N.getSeparatorAfterNationalPrefix,Vt=fr(O.nationalSignificantNumber,G,{carrierCode:O.carrierCode,useInternationalFormat:O.international,withNationalPrefix:Re,metadata:re});if(Re||(O.nationalPrefix?Vt=O.nationalPrefix+ot(G)+Vt:O.complexPrefixBeforeNationalSignificantNumber&&(Vt=O.complexPrefixBeforeNationalSignificantNumber+" "+Vt)),dc(Vt,O))return Vt}function dc(O,G){return Mo(O)===G.getNationalDigits()}function Pu(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function Au(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function to(O,G,N){return G&&Au(O.prototype,G),N&&Au(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var qa=function(){function O(){Pu(this,O)}return to(O,[{key:"parse",value:function(N){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(N),this.context.length!==1)throw new Error("Non-finalized contexts left when pattern parse ended");var re=this.context[0],Re=re.branches,ot=re.instructions;if(Re)return{op:"|",args:Re.concat([yo(ot)])};if(ot.length===0)throw new Error("Pattern is required");return ot.length===1?ot[0]:ot}},{key:"startContext",value:function(N){this.context.push(N)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(N){if(!N)throw new Error("Pattern is required");var re=N.match(Mu);if(!re){if(ta.test(N))throw new Error("Illegal characters found in a pattern: ".concat(N));this.getContext().instructions=this.getContext().instructions.concat(N.split(""));return}var Re=re[1],ot=N.slice(0,re.index),Vt=N.slice(re.index+Re.length);switch(Re){case"(?:":ot&&this.parsePattern(ot),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(ot&&this.parsePattern(ot),this.getContext().instructions.length===0)throw new Error('No instructions found after "|" operator in an "or" group');var Jt=this.getContext(),xi=Jt.branches;xi.push(yo(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:xi});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(ot&&this.parsePattern(ot),!this.getContext().branches)if(this.context.length===1)this.getContext().branches=[];else throw new Error('"branches" not found in an "or" group context');this.getContext().branches.push(yo(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":ot&&this.parsePattern(ot),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:pd(ot)});break;default:throw new Error("Unknown operator: ".concat(Re))}Vt&&this.parsePattern(Vt)}}]),O}();function pd(O){for(var G=[],N=0;N<O.length;){if(O[N]==="-"){if(N===0||N===O.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(O));for(var re=O[N-1].charCodeAt(0)+1,Re=O[N+1].charCodeAt(0)-1,ot=re;ot<=Re;)G.push(String.fromCharCode(ot)),ot++}else G.push(O[N]);N++}return G}var ta=/[\(\)\[\]\?\:\|]/,Mu=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function yo(O){return O.length===1?O[0]:O}function wl(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=ia(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ia(O,G){if(O){if(typeof O=="string")return Ou(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Ou(O,G)}}function Ou(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function bo(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function Za(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function Ca(O,G,N){return G&&Za(O.prototype,G),N&&Za(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var Tl=function(){function O(G){bo(this,O),this.matchTree=new qa().parse(G)}return Ca(O,[{key:"match",value:function(N){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=re.allowOverflow;if(!N)throw new Error("String is required");var ot=Lu(N.split(""),this.matchTree,!0);if(ot&&ot.match&&delete ot.matchedChars,!(ot&&ot.overflow&&!Re))return ot}}]),O}();function Lu(O,G,N){if(typeof G=="string"){var re=O.join("");return G.indexOf(re)===0?O.length===G.length?{match:!0,matchedChars:O}:{partialMatch:!0}:re.indexOf(G)===0?N&&O.length>G.length?{overflow:!0}:{match:!0,matchedChars:O.slice(0,G.length)}:void 0}if(Array.isArray(G)){for(var Re=O.slice(),ot=0;ot<G.length;){var Vt=G[ot],Jt=Lu(Re,Vt,N&&ot===G.length-1);if(Jt){if(Jt.overflow)return Jt;if(Jt.match){if(Re=Re.slice(Jt.matchedChars.length),Re.length===0)return ot===G.length-1?{match:!0,matchedChars:O}:{partialMatch:!0}}else{if(Jt.partialMatch)return{partialMatch:!0};throw new Error(`Unsupported match result:
`.concat(JSON.stringify(Jt,null,2)))}}else return;ot++}return N?{overflow:!0}:{match:!0,matchedChars:O.slice(0,O.length-Re.length)}}switch(G.op){case"|":for(var xi,Wi=wl(G.args),wi;!(wi=Wi()).done;){var Cs=wi.value,sr=Lu(O,Cs,N);if(sr){if(sr.overflow)return sr;if(sr.match)return{match:!0,matchedChars:sr.matchedChars};if(sr.partialMatch)xi=!0;else throw new Error(`Unsupported match result:
`.concat(JSON.stringify(sr,null,2)))}}return xi?{partialMatch:!0}:void 0;case"[]":for(var Ro=wl(G.args),Aa;!(Aa=Ro()).done;){var Pl=Aa.value;if(O[0]===Pl)return O.length===1?{match:!0,matchedChars:O}:N?{overflow:!0}:{match:!0,matchedChars:[Pl]}}return;default:throw new Error("Unsupported instruction tree: ".concat(G))}}function Ya(O,G){var N=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N)return(N=N.call(O)).next.bind(N);if(Array.isArray(O)||(N=ih(O))||G&&O&&typeof O.length=="number"){N&&(O=N);var re=0;return function(){return re>=O.length?{done:!0}:{done:!1,value:O[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ih(O,G){if(O){if(typeof O=="string")return Do(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Do(O,G)}}function Do(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function md(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function jo(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function gd(O,G,N){return G&&jo(O.prototype,G),N&&jo(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var xo="9",hc=15,Sl=Lo(xo,hc),Cl=/[- ]/,ur=function(){return/\[([^\[\]])*\]/g},ka=function(){return/\d(?=[^,}][^,}])/g},Jl=new RegExp("["+Nn+"]*\\$1["+Nn+"]*(\\$\\d["+Nn+"]*)*$"),Xa=3,Ea=function(){function O(G){G.state;var N=G.metadata;md(this,O),this.metadata=N,this.resetFormat()}return gd(O,[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(N,re){this.resetFormat(),N?(this.isNANP=N.callingCode()==="1",this.matchingFormats=N.formats(),re.nationalSignificantNumber&&this.narrowDownMatchingFormats(re)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(N,re){var Re=this;if(Ql(re.nationalSignificantNumber,this.metadata))for(var ot=Ya(this.matchingFormats),Vt;!(Vt=ot()).done;){var Jt=Vt.value,xi=uc(re,Jt,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(wi){return Re.shouldTryNationalPrefixFormattingRule(wi,{international:re.international,nationalPrefix:re.nationalPrefix})},getSeparatorAfterNationalPrefix:function(wi){return Re.getSeparatorAfterNationalPrefix(wi)}});if(xi)return this.resetFormat(),this.chosenFormat=Jt,this.setNationalNumberTemplate(xi.replace(/\d/g,cs),re),this.populatedNationalNumberTemplate=xi,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(cs),xi}return this.formatNationalNumberWithNextDigits(N,re)}},{key:"formatNationalNumberWithNextDigits",value:function(N,re){var Re=this.chosenFormat,ot=this.chooseFormat(re);if(ot)return ot===Re?this.formatNextNationalNumberDigits(N):this.formatNextNationalNumberDigits(re.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(N){var re=this,Re=N.nationalSignificantNumber,ot=N.nationalPrefix,Vt=N.international,Jt=Re,xi=Jt.length-Xa;xi<0&&(xi=0),this.matchingFormats=this.matchingFormats.filter(function(Wi){return re.formatSuits(Wi,Vt,ot)&&re.formatMatches(Wi,Jt,xi)}),this.chosenFormat&&this.matchingFormats.indexOf(this.chosenFormat)===-1&&this.resetFormat()}},{key:"formatSuits",value:function(N,re,Re){return!(Re&&!N.usesNationalPrefix()&&!N.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!re&&!Re&&N.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(N,re,Re){var ot=N.leadingDigitsPatterns().length;if(ot===0)return!0;Re=Math.min(Re,ot-1);var Vt=N.leadingDigitsPatterns()[Re];if(re.length<Xa)try{return new Tl(Vt).match(re,{allowOverflow:!0})!==void 0}catch(Jt){return console.error(Jt),!0}return new RegExp("^(".concat(Vt,")")).test(re)}},{key:"getFormatFormat",value:function(N,re){return re?N.internationalFormat():N.format()}},{key:"chooseFormat",value:function(N){for(var re=this,Re=function(){var Wi=Vt.value;return re.chosenFormat===Wi?"break":Jl.test(re.getFormatFormat(Wi,N.international))?re.createTemplateForFormat(Wi,N)?(re.chosenFormat=Wi,"break"):(re.matchingFormats=re.matchingFormats.filter(function(wi){return wi!==Wi}),"continue"):"continue"},ot=Ya(this.matchingFormats.slice()),Vt;!(Vt=ot()).done;){var Jt=Re();if(Jt==="break")break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(N,re){if(!(N.pattern().indexOf("|")>=0)){var Re=this.getTemplateForFormat(N,re);if(Re)return this.setNationalNumberTemplate(Re,re),!0}}},{key:"getSeparatorAfterNationalPrefix",value:function(N){return this.isNANP||N&&N.nationalPrefixFormattingRule()&&Cl.test(N.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(N,re){var Re=N.IDDPrefix,ot=N.missingPlus;return Re?re&&re.spacing===!1?Re:Re+" ":ot?"":"+"}},{key:"getTemplate",value:function(N){if(this.template){for(var re=-1,Re=0,ot=N.international?this.getInternationalPrefixBeforeCountryCallingCode(N,{spacing:!1}):"";Re<ot.length+N.getDigitsWithoutInternationalPrefix().length;)re=this.template.indexOf(cs,re+1),Re++;return Us(this.template,re+1)}}},{key:"setNationalNumberTemplate",value:function(N,re){this.nationalNumberTemplate=N,this.populatedNationalNumberTemplate=N,this.populatedNationalNumberTemplatePosition=-1,re.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(re).replace(/[\d\+]/g,cs)+Lo(cs,re.callingCode.length)+" "+N:this.template=N}},{key:"getTemplateForFormat",value:function(N,re){var Re=re.nationalSignificantNumber,ot=re.international,Vt=re.nationalPrefix,Jt=re.complexPrefixBeforeNationalSignificantNumber,xi=N.pattern();xi=xi.replace(ur(),"\\d").replace(ka(),"\\d");var Wi=Sl.match(xi)[0];if(!(Re.length>Wi.length)){var wi=new RegExp("^"+xi+"$"),Cs=Re.replace(/\d/g,xo);wi.test(Cs)&&(Wi=Cs);var sr=this.getFormatFormat(N,ot),Ro;if(this.shouldTryNationalPrefixFormattingRule(N,{international:ot,nationalPrefix:Vt})){var Aa=sr.replace(Yr,N.nationalPrefixFormattingRule());if(Mo(N.nationalPrefixFormattingRule())===(Vt||"")+Mo("$1")&&(sr=Aa,Ro=!0,Vt))for(var Pl=Vt.length;Pl>0;)sr=sr.replace(/\d/,cs),Pl--}var lu=Wi.replace(new RegExp(xi),sr).replace(new RegExp(xo,"g"),cs);return Ro||(Jt?lu=Lo(cs,Jt.length)+" "+lu:Vt&&(lu=Lo(cs,Vt.length)+this.getSeparatorAfterNationalPrefix(N)+lu)),ot&&(lu=Mr(lu)),lu}}},{key:"formatNextNationalNumberDigits",value:function(N){var re=lc(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,N);if(!re){this.resetFormat();return}return this.populatedNationalNumberTemplate=re[0],this.populatedNationalNumberTemplatePosition=re[1],Us(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)}},{key:"shouldTryNationalPrefixFormattingRule",value:function(N,re){var Re=re.international,ot=re.nationalPrefix;if(N.nationalPrefixFormattingRule()){var Vt=N.usesNationalPrefix();if(Vt&&ot||!Vt&&!Re)return!0}}}]),O}();function fc(O,G){return Fc(O)||mc(O,G)||Bc(O,G)||pc()}function pc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bc(O,G){if(O){if(typeof O=="string")return kl(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return kl(O,G)}}function kl(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function mc(O,G){var N=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N!=null){var re=[],Re=!0,ot=!1,Vt,Jt;try{for(N=N.call(O);!(Re=(Vt=N.next()).done)&&(re.push(Vt.value),!(G&&re.length===G));Re=!0);}catch(xi){ot=!0,Jt=xi}finally{try{!Re&&N.return!=null&&N.return()}finally{if(ot)throw Jt}}return re}}function Fc(O){if(Array.isArray(O))return O}function Du(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function El(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function $c(O,G,N){return G&&El(O.prototype,G),N&&El(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var wo="["+Nn+Zi+"]+",eu=new RegExp("^"+wo+"$","i"),tu="(?:["+yr+"]["+Nn+Zi+"]*|["+Nn+Zi+"]+)",io=new RegExp("[^"+Nn+Zi+"]+.*$"),iu=/[^\d\[\]]/,nu=function(){function O(G){var N=G.defaultCountry,re=G.defaultCallingCode,Re=G.metadata,ot=G.onNationalSignificantNumberChange;Du(this,O),this.defaultCountry=N,this.defaultCallingCode=re,this.metadata=Re,this.onNationalSignificantNumberChange=ot}return $c(O,[{key:"input",value:function(N,re){var Re=Ia(N),ot=fc(Re,2),Vt=ot[0],Jt=ot[1],xi=Mo(Vt),Wi;return Jt&&(re.digits||(re.startInternationalNumber(),xi||(Wi=!0))),xi&&this.inputDigits(xi,re),{digits:xi,justLeadingPlus:Wi}}},{key:"inputDigits",value:function(N,re){var Re=re.digits,ot=Re.length<3&&Re.length+N.length>=3;if(re.appendDigits(N),ot&&this.extractIddPrefix(re),this.isWaitingForCountryCallingCode(re)){if(!this.extractCountryCallingCode(re))return}else re.appendNationalSignificantNumberDigits(N);re.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(re.getNationalDigits(),function(Vt){return re.update(Vt)})}},{key:"isWaitingForCountryCallingCode",value:function(N){var re=N.international,Re=N.callingCode;return re&&!Re}},{key:"extractCountryCallingCode",value:function(N){var re=xa("+"+N.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),Re=re.countryCallingCode,ot=re.number;if(Re)return N.setCallingCode(Re),N.update({nationalSignificantNumber:ot}),!0}},{key:"reset",value:function(N){if(N){this.hasSelectedNumberingPlan=!0;var re=N._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=re&&iu.test(re)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(N,re){if(this.hasSelectedNumberingPlan){var Re=As(N,this.metadata),ot=Re.nationalPrefix,Vt=Re.nationalNumber,Jt=Re.carrierCode;if(Vt!==N)return this.onExtractedNationalNumber(ot,Jt,Vt,N,re),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(N,re,Re){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(N,Re);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var ot=As(N,this.metadata),Vt=ot.nationalPrefix,Jt=ot.nationalNumber,xi=ot.carrierCode;if(Jt!==re)return this.onExtractedNationalNumber(Vt,xi,Jt,N,Re),!0}}},{key:"onExtractedNationalNumber",value:function(N,re,Re,ot,Vt){var Jt,xi,Wi=ot.lastIndexOf(Re);if(Wi>=0&&Wi===ot.length-Re.length){xi=!0;var wi=ot.slice(0,Wi);wi!==N&&(Jt=wi)}Vt({nationalPrefix:N,carrierCode:re,nationalSignificantNumber:Re,nationalSignificantNumberMatchesInput:xi,complexPrefixBeforeNationalSignificantNumber:Jt}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(N){if(this.extractAnotherNationalSignificantNumber(N.getNationalDigits(),N.nationalSignificantNumber,function(re){return N.update(re)}))return!0;if(this.extractIddPrefix(N))return this.extractCallingCodeAndNationalSignificantNumber(N),!0;if(this.fixMissingPlus(N))return this.extractCallingCodeAndNationalSignificantNumber(N),!0}},{key:"extractIddPrefix",value:function(N){var re=N.international,Re=N.IDDPrefix,ot=N.digits;if(N.nationalSignificantNumber,!(re||Re)){var Vt=ln(ot,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);if(Vt!==void 0&&Vt!==ot)return N.update({IDDPrefix:ot.slice(0,ot.length-Vt.length)}),this.startInternationalNumber(N,{country:void 0,callingCode:void 0}),!0}}},{key:"fixMissingPlus",value:function(N){if(!N.international){var re=Wl(N.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),Re=re.countryCallingCode;if(re.number,Re)return N.update({missingPlus:!0}),this.startInternationalNumber(N,{country:N.country,callingCode:Re}),!0}}},{key:"startInternationalNumber",value:function(N,re){var Re=re.country,ot=re.callingCode;N.startInternationalNumber(Re,ot),N.nationalSignificantNumber&&(N.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(N){this.extractCountryCallingCode(N)&&this.extractNationalSignificantNumber(N.getNationalDigits(),function(re){return N.update(re)})}}]),O}();function ru(O){var G=O.search(tu);if(!(G<0)){O=O.slice(G);var N;return O[0]==="+"&&(N=!0,O=O.slice(1)),O=O.replace(io,""),N&&(O="+"+O),O}}function na(O){var G=ru(O)||"";return G[0]==="+"?[G.slice(1),!0]:[G]}function Ia(O){var G=na(O),N=fc(G,2),re=N[0],Re=N[1];return eu.test(re)||(re=""),[re,Re]}function To(O){return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},To(O)}function Dn(O,G){return ra(O)||Qn(O,G)||_d(O,G)||Ru()}function Ru(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _d(O,G){if(O){if(typeof O=="string")return Ts(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Ts(O,G)}}function Ts(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function Qn(O,G){var N=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N!=null){var re=[],Re=!0,ot=!1,Vt,Jt;try{for(N=N.call(O);!(Re=(Vt=N.next()).done)&&(re.push(Vt.value),!(G&&re.length===G));Re=!0);}catch(xi){ot=!0,Jt=xi}finally{try{!Re&&N.return!=null&&N.return()}finally{if(ot)throw Jt}}return re}}function ra(O){if(Array.isArray(O))return O}function rs(O,G){if(!(O instanceof G))throw new TypeError("Cannot call a class as a function")}function no(O,G){for(var N=0;N<G.length;N++){var re=G[N];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(O,re.key,re)}}function Bu(O,G,N){return G&&no(O.prototype,G),N&&no(O,N),Object.defineProperty(O,"prototype",{writable:!1}),O}var sa=function(){function O(G,N){rs(this,O),this.metadata=new Ee(N);var re=this.getCountryAndCallingCode(G),Re=Dn(re,2),ot=Re[0],Vt=Re[1];this.defaultCountry=ot,this.defaultCallingCode=Vt,this.reset()}return Bu(O,[{key:"getCountryAndCallingCode",value:function(N){var re,Re;return N&&(To(N)==="object"?(re=N.defaultCountry,Re=N.defaultCallingCode):re=N),re&&!this.metadata.hasCountry(re)&&(re=void 0),[re,Re]}},{key:"input",value:function(N){var re=this.parser.input(N,this.state),Re=re.digits,ot=re.justLeadingPlus;if(ot)this.formattedOutput="+";else if(Re){this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state);var Vt;if(this.metadata.hasSelectedNumberingPlan()&&(Vt=this.formatter.format(Re,this.state)),Vt===void 0&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var Jt=this.state.getNationalDigits();Jt&&(Vt=this.formatter.format(Jt,this.state))}this.formattedOutput=Vt?this.getFullNumber(Vt):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var N=this;return this.state=new ac({onCountryChange:function(Re){N.country=Re},onCallingCodeChange:function(Re,ot){N.metadata.selectNumberingPlan(ot,Re),N.formatter.reset(N.metadata.numberingPlan,N.state),N.parser.reset(N.metadata.numberingPlan)}}),this.formatter=new Ea({state:this.state,metadata:this.metadata}),this.parser=new nu({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){N.determineTheCountryIfNeeded(),N.formatter.reset(N.metadata.numberingPlan,N.state)}}),this.state.reset(this.defaultCountry,this.defaultCallingCode),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var N=this.state.digits;if(N)return this._getCountry()}},{key:"_getCountry",value:function(){var N=this.state.country;return N}},{key:"determineTheCountryIfNeeded",value:function(){(!this.state.country||this.isCountryCallingCodeAmbiguous())&&this.determineTheCountry()}},{key:"getFullNumber",value:function(N){var re=this;if(this.isInternational()){var Re=function(Jt){return re.formatter.getInternationalPrefixBeforeCountryCallingCode(re.state,{spacing:!!Jt})+Jt},ot=this.state.callingCode;return Re(ot?N?"".concat(ot," ").concat(N):ot:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return N}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var N=this.state,re=N.nationalSignificantNumber,Re=N.complexPrefixBeforeNationalSignificantNumber,ot=N.nationalPrefix,Vt=re,Jt=Re||ot;return Jt&&(Vt=Jt+Vt),Vt}},{key:"getNonFormattedNumber",value:function(){var N=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(N?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var N=this.getNonFormattedNumber();if(N)return N.replace(/[\+\d]/g,cs)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var N=this.state.callingCode,re=this.metadata.getCountryCodesForCallingCode(N);return re&&re.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(xr(this.isInternational()?this.state.callingCode:this.defaultCallingCode,this.state.nationalSignificantNumber,this.metadata))}},{key:"getNumberValue",value:function(){var N=this.state,re=N.digits,Re=N.callingCode,ot=N.country,Vt=N.nationalSignificantNumber;if(re){if(this.isInternational())return Re?"+"+Re+Vt:"+"+re;if(ot||Re){var Jt=ot?this.metadata.countryCallingCode():Re;return"+"+Jt+Vt}}}},{key:"getNumber",value:function(){var N=this.state,re=N.nationalSignificantNumber,Re=N.carrierCode,ot=N.callingCode,Vt=this._getCountry();if(re&&!(!Vt&&!ot)){var Jt=new pr(Vt||ot,re,this.metadata.metadata);return Re&&(Jt.carrierCode=Re),Jt}}},{key:"isPossible",value:function(){var N=this.getNumber();return N?N.isPossible():!1}},{key:"isValid",value:function(){var N=this.getNumber();return N?N.isValid():!1}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}]),O}();function oa(O){return sa.call(this,O,ne)}oa.prototype=Object.create(sa.prototype,{}),oa.prototype.constructor=oa;var Il=function(){var O=this,G=O.$createElement,N=O._self._c||G;return N("div",{ref:"parent",staticClass:"input-tel",class:[{"is-focused":O.isFocus,"is-valid":O.valid,"has-value":O.value,"has-error":O.error,"is-disabled":O.disabled,"is-dark":O.dark,"has-hint":O.hint},O.size],on:{click:O.focusInput,mouseenter:function(re){return O.updateHoverState(!0)},mouseleave:function(re){return O.updateHoverState(!1)}}},[O.type==="checkbox"?N("input",O._b({directives:[{name:"model",rawName:"v-model",value:O.inputValue,expression:"inputValue"}],ref:"InputTel",staticClass:"input-tel__input",class:{"no-country-selector":O.noCountrySelector},style:[O.noCountrySelector?O.radiusStyle:O.radiusRightStyle,O.inputCaretStyle,O.inputBorderStyle,O.inputBoxShadowStyle,O.inputBgColor,O.textColor],attrs:{id:O.id,placeholder:O.labelValue,disabled:O.disabled,required:O.required,type:"checkbox"},domProps:{checked:Array.isArray(O.inputValue)?O._i(O.inputValue,null)>-1:O.inputValue},on:{keydown:O.keyDown,keyup:O.keyUp,focus:O.onFocus,blur:O.onBlur,click:function(re){return O.$emit("click",re)},change:function(re){var Re=O.inputValue,ot=re.target,Vt=!!ot.checked;if(Array.isArray(Re)){var Jt=null,xi=O._i(Re,Jt);ot.checked?xi<0&&(O.inputValue=Re.concat([Jt])):xi>-1&&(O.inputValue=Re.slice(0,xi).concat(Re.slice(xi+1)))}else O.inputValue=Vt}}},"input",O.$attrs,!1)):O.type==="radio"?N("input",O._b({directives:[{name:"model",rawName:"v-model",value:O.inputValue,expression:"inputValue"}],ref:"InputTel",staticClass:"input-tel__input",class:{"no-country-selector":O.noCountrySelector},style:[O.noCountrySelector?O.radiusStyle:O.radiusRightStyle,O.inputCaretStyle,O.inputBorderStyle,O.inputBoxShadowStyle,O.inputBgColor,O.textColor],attrs:{id:O.id,placeholder:O.labelValue,disabled:O.disabled,required:O.required,type:"radio"},domProps:{checked:O._q(O.inputValue,null)},on:{keydown:O.keyDown,keyup:O.keyUp,focus:O.onFocus,blur:O.onBlur,click:function(re){return O.$emit("click",re)},change:function(re){O.inputValue=null}}},"input",O.$attrs,!1)):N("input",O._b({directives:[{name:"model",rawName:"v-model",value:O.inputValue,expression:"inputValue"}],ref:"InputTel",staticClass:"input-tel__input",class:{"no-country-selector":O.noCountrySelector},style:[O.noCountrySelector?O.radiusStyle:O.radiusRightStyle,O.inputCaretStyle,O.inputBorderStyle,O.inputBoxShadowStyle,O.inputBgColor,O.textColor],attrs:{id:O.id,placeholder:O.labelValue,disabled:O.disabled,required:O.required,type:O.type},domProps:{value:O.inputValue},on:{keydown:O.keyDown,keyup:O.keyUp,focus:O.onFocus,blur:O.onBlur,click:function(re){return O.$emit("click",re)},input:function(re){re.target.composing||(O.inputValue=re.target.value)}}},"input",O.$attrs,!1)),N("label",{ref:"label",staticClass:"input-tel__label",class:O.error?"text-danger":null,style:[O.labelColorStyle],attrs:{for:O.id},on:{click:O.focusInput}},[O._v(" "+O._s(O.hintValue||O.labelValue)+" ")]),O.clearable&&O.inputValue?N("button",{staticClass:"input-tel__clear",attrs:{title:"clear",type:"button",tabindex:"-1"},on:{click:O.clear}},[N("span",{staticClass:"input-tel__clear__effect"}),N("span",[O._v(" ✕ ")])]):O._e(),O.loader?N("div",{staticClass:"input-tel__loader"},[N("div",{staticClass:"input-tel__loader__progress-bar",style:[O.loaderBgColor]})]):O._e()])},gc=[],Pa={props:{theme:{type:Object,required:!0}},computed:{labelColorStyle:function(){return this.error?this.theme.errorColor:this.valid?this.theme.validColor:this.isFocus?this.theme.color:this.dark?this.theme.textDarkColor:null},inputBorderStyle:function(){return this.error?this.theme.borderErrorColor:this.valid?this.theme.borderValidColor:this.isHover||this.isFocus?this.theme.borderColor:null},inputBoxShadowStyle:function(){return this.isFocus?this.error?this.theme.boxShadowError:this.valid?this.theme.boxShadowValid:this.theme.boxShadowColor:null},inputBgColor:function(){return this.dark?this.theme.bgDarkColor:null},textColor:function(){return this.dark?this.theme.textDarkColor:null},inputCaretStyle:function(){return{caretColor:this.theme.colorValue}},radiusStyle:function(){return this.theme.borderRadius},radiusLeftStyle:function(){return this.theme.borderLeftRadius},radiusRightStyle:function(){return this.theme.borderRightRadius},bgItemSelectedStyle:function(){return this.theme.bgColor},loaderBgColor:function(){return this.theme.bgColor}}},Ka={name:"InputTel",mixins:[Pa],props:{value:{type:[String,Number],default:null},label:{type:String,default:"Enter text"},hint:{type:String,default:null},error:{type:Boolean,default:Boolean},disabled:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},id:{type:String,default:"InputTel"},size:{type:String,default:null},type:{type:String,default:"tel"},readonly:{type:Boolean,default:!1},valid:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loader:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},noCountrySelector:{type:Boolean,default:!1}},data:function(){return{isFocus:!1,isHover:!1}},computed:{inputValue:{get:function(){return this.value},set:function(G){this.$emit("input",G)}},labelValue:function(){var G=this.label;return this.required&&G?"".concat(G," *"):G},hintValue:function(){var G=this.hint;return this.required&&G?"".concat(G," *"):G}},methods:{updateHoverState:function(G){this.isHover=G},focusInput:function(){this.$refs.InputTel.focus()},onFocus:function(){this.$emit("focus"),this.isFocus=!0},onBlur:function(){this.$emit("blur"),this.isFocus=!1},clear:function(){this.$emit("input",null),this.$emit("clear")},keyUp:function(G){this.$emit("keyup",G)},keyDown:function(G){this.$emit("keydown",G)}}},su=Ka;n("d499");function Qa(O,G,N,re,Re,ot,Vt,Jt){var xi=typeof O=="function"?O.options:O;G&&(xi.render=G,xi.staticRenderFns=N,xi._compiled=!0),re&&(xi.functional=!0),ot&&(xi._scopeId="data-v-"+ot);var Wi;if(Vt?(Wi=function(sr){sr=sr||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!sr&&typeof __VUE_SSR_CONTEXT__<"u"&&(sr=__VUE_SSR_CONTEXT__),Re&&Re.call(this,sr),sr&&sr._registeredComponents&&sr._registeredComponents.add(Vt)},xi._ssrRegister=Wi):Re&&(Wi=Jt?function(){Re.call(this,(xi.functional?this.parent:this).$root.$options.shadowRoot)}:Re),Wi)if(xi.functional){xi._injectStyles=Wi;var wi=xi.render;xi.render=function(Ro,Aa){return Wi.call(Aa),wi(Ro,Aa)}}else{var Cs=xi.beforeCreate;xi.beforeCreate=Cs?[].concat(Cs,Wi):[Wi]}return{exports:O,options:xi}}var Li=Qa(su,Il,gc,!1,null,"e59be3b4",null),F=Li.exports,K=function(){var O=this,G=O.$createElement,N=O._self._c||G;return N("div",{ref:"parent",staticClass:"country-selector",class:[{"is-focused":O.isFocus,"has-value":O.value,"has-hint":O.hint,"has-error":O.error,"is-disabled":O.disabled,"is-dark":O.dark,"no-flags":O.noFlags,"has-list-open":O.hasListOpen,"is-valid":O.valid},O.size],on:{"!blur":function(re){return O.handleBlur.apply(null,arguments)},mouseenter:function(re){return O.updateHoverState(!0)},mouseleave:function(re){return O.updateHoverState(!1)}}},[O.value&&!O.noFlags?N("div",{staticClass:"country-selector__country-flag",on:{click:function(re){return re.stopPropagation(),O.toggleList.apply(null,arguments)}}},[N("div",{class:"iti-flag-small iti-flag "+O.value.toLowerCase()})]):O._e(),N("input",{ref:"CountrySelector",staticClass:"country-selector__input",style:[O.radiusLeftStyle,O.inputBorderStyle,O.inputBoxShadowStyle,O.inputBgColor],attrs:{id:O.id,placeholder:O.label,disabled:O.disabled,readonly:""},domProps:{value:O.callingCode},on:{focus:function(re){O.isFocus=!0},keydown:O.keyboardNav,click:function(re){return re.stopPropagation(),O.toggleList.apply(null,arguments)}}}),N("div",{staticClass:"country-selector__toggle",on:{click:function(re){return re.stopPropagation(),O.toggleList.apply(null,arguments)}}},[O._t("arrow",function(){return[N("svg",{staticClass:"country-selector__toggle__arrow",attrs:{mlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[N("path",{staticClass:"arrow",attrs:{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}}),N("path",{attrs:{fill:"none",d:"M0 0h24v24H0V0z"}})])]})],2),N("label",{ref:"label",staticClass:"country-selector__label",style:[O.labelColorStyle],on:{click:function(re){return re.stopPropagation(),O.toggleList.apply(null,arguments)}}},[O._v(" "+O._s(O.hint||O.label)+" ")]),N("Transition",{attrs:{name:"slide"}},[N("div",{directives:[{name:"show",rawName:"v-show",value:O.hasListOpen,expression:"hasListOpen"}],ref:"countriesList",staticClass:"country-selector__list",class:{"has-calling-code":O.showCodeOnList},style:[O.radiusStyle,O.listHeight,O.inputBgColor]},[N("RecycleScroller",{attrs:{items:O.countriesSorted,"item-size":1,"key-field":"iso2"},scopedSlots:O._u([{key:"default",fn:function(re){var Re=re.item;return[N("button",{key:"item-"+Re.code,staticClass:"flex align-center country-selector__list__item",class:[{selected:O.value===Re.iso2},{"keyboard-selected":O.value!==Re.iso2&&O.tmpValue===Re.iso2}],style:[O.itemHeight,O.value===Re.iso2?O.bgItemSelectedStyle:null],attrs:{tabindex:"-1",type:"button"},on:{click:function(ot){return ot.stopPropagation(),O.updateValue(Re.iso2)}}},[O.noFlags?O._e():N("div",{staticClass:"country-selector__list__item__flag-container"},[N("div",{class:"iti-flag-small iti-flag "+Re.iso2.toLowerCase()})]),O.showCodeOnList?N("span",{staticClass:"country-selector__list__item__calling-code flex-fixed"},[O._v("+"+O._s(Re.dialCode))]):O._e(),N("div",{staticClass:"dots-text"},[O._v(" "+O._s(Re.name)+" ")])])]}}])})],1)])],1)},te=[];n("7f7f"),n("f559"),n("20d6");var ee=n("a745"),h=n.n(ee);function v(O,G){(G==null||G>O.length)&&(G=O.length);for(var N=0,re=new Array(G);N<G;N++)re[N]=O[N];return re}function P(O){if(h()(O))return v(O)}var z=n("774e"),X=n.n(z),ce=n("c8bb"),Se=n.n(ce),je=n("67bb"),bt=n.n(je);function wt(O){if(typeof bt.a<"u"&&Se()(Object(O)))return X()(O)}function si(O,G){if(O){if(typeof O=="string")return v(O,G);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return X()(N);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return v(O,G)}}function ki(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(O){return P(O)||wt(O)||si(O)||ki()}n("7514");function cr(){return ie(Qt,arguments)}var Cr=n("e508"),_s={name:"CountrySelector",components:{RecycleScroller:Cr.a},mixins:[Pa],props:{id:{type:String,default:"CountrySelector"},value:{type:[String,Object],default:null},label:{type:String,default:"Choose country"},hint:{type:String,default:String},size:{type:String,default:String},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},valid:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},items:{type:Array,default:Array,required:!0},preferredCountries:{type:Array,default:null},onlyCountries:{type:Array,default:null},ignoredCountries:{type:Array,default:null},noFlags:{type:Boolean,default:!1},countriesHeight:{type:Number,default:35},showCodeOnList:{type:Boolean,default:!1}},data:function(){return{isFocus:!1,hasListOpen:!1,selectedIndex:null,tmpValue:this.value,query:"",indexItemToShow:0,isHover:!1}},computed:{itemHeight:function(){return{height:"".concat(this.countriesHeight,"px")}},listHeight:function(){return{height:"".concat((this.countriesHeight+1)*7,"px"),maxHeight:"".concat((this.countriesHeight+1)*7,"px")}},countriesList:function(){var G=this;return this.items.filter(function(N){return!G.ignoredCountries.includes(N.iso2)})},countriesFiltered:function(){var G=this,N=this.onlyCountries||this.preferredCountries;return N.map(function(re){return G.countriesList.find(function(Re){return Re.iso2.includes(re)})})},otherCountries:function(){var G=this;return this.countriesList.filter(function(N){return!G.preferredCountries.includes(N.iso2)})},countriesSorted:function(){return this.preferredCountries?[].concat(on(this.countriesFiltered),on(this.otherCountries)):this.onlyCountries?this.countriesFiltered:this.countriesList},selectedValueIndex:function(){var G=this;return this.value?this.countriesSorted.findIndex(function(N){return N.iso2===G.value}):null},tmpValueIndex:function(){var G=this;return this.countriesSorted.findIndex(function(N){return N.iso2===G.tmpValue})},callingCode:function(){return this.value?"+".concat(cr(this.value)):null}},methods:{updateHoverState:function(G){this.isHover=G},handleBlur:function(G){this.$el.contains(G.relatedTarget)||(this.isFocus=!1,this.closeList())},toggleList:function(){this.$refs.countriesList.offsetParent?this.closeList():this.openList()},openList:function(){this.disabled||(this.$refs.CountrySelector.focus(),this.$emit("open"),this.isFocus=!0,this.hasListOpen=!0,this.value&&this.scrollToSelectedOnFocus(this.selectedValueIndex))},closeList:function(){this.$emit("close"),this.hasListOpen=!1},updateValue:function(){var O=E(regeneratorRuntime.mark(function N(re){return regeneratorRuntime.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return this.tmpValue=re,this.$emit("input",re||null),ot.next=4,this.$nextTick();case 4:this.closeList();case 5:case"end":return ot.stop()}},N,this)}));function G(N){return O.apply(this,arguments)}return G}(),scrollToSelectedOnFocus:function(G){var N=this;this.$nextTick(function(){N.$refs.countriesList.scrollTop=G*(N.countriesHeight+1)-(N.countriesHeight+1)*3})},keyboardNav:function(G){var N=G.keyCode;if(N===40||N===38){G.view&&G.view.event&&G.view.event.preventDefault(),this.hasListOpen||this.openList();var re=N===40?this.tmpValueIndex+1:this.tmpValueIndex-1;(re===-1||re>=this.countriesSorted.length)&&(re=re===-1?this.countriesSorted.length-1:0),this.tmpValue=this.countriesSorted[re].iso2,this.scrollToSelectedOnFocus(re)}else N===13?this.hasListOpen?this.updateValue(this.tmpValue):this.openList():N===27?this.closeList():this.searching(G)},searching:function(G){var N=this,re=G.keyCode;clearTimeout(this.queryTimer),this.queryTimer=setTimeout(function(){N.query=""},1e3);var Re=String.fromCharCode(re);if(re===8&&this.query!=="")this.query=this.query.substring(0,this.query.length-1);else if(/[a-zA-Z-e ]/.test(Re)){this.hasListOpen||this.openList(),this.query+=G.key;var ot=this.preferredCountries?this.countriesSorted.slice(this.preferredCountries.length):this.countriesSorted,Vt=ot.findIndex(function(Jt){return N.tmpValue=Jt.iso2,Jt.name.toLowerCase().startsWith(N.query)});Vt!==-1&&this.scrollToSelectedOnFocus(Vt+(this.preferredCountries?this.preferredCountries.length:0))}}}},Ss=_s;n("e71e");var Ja=Qa(Ss,K,te,!1,null,"46e105de",null),ou=Ja.exports,Nc={countrySelectorLabel:"Country code",countrySelectorError:"Choose country",phoneNumberLabel:"Phone number",example:"Example:"},wr=n("6038");function au(O,G){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(O);G&&(re=re.filter(function(Re){return Object.getOwnPropertyDescriptor(O,Re).enumerable})),N.push.apply(N,re)}return N}function js(O){for(var G=1;G<arguments.length;G++){var N=arguments[G]!=null?arguments[G]:{};G%2?au(Object(N),!0).forEach(function(re){V(O,re,N[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):au(Object(N)).forEach(function(re){Object.defineProperty(O,re,Object.getOwnPropertyDescriptor(N,re))})}return O}var Fu=function(G){return Object(wr.isColorName)(G)?Object(wr.hexToRgba)(Object(wr.colorNameToHex)(G),.7):Object(wr.hexToRgba)(G,.7)},Hr=function(){if(!window)return null;var G=window.navigator.userLanguage||window.navigator.language,N=G?G.substr(3,4).toUpperCase():null;return N===""&&(N=G.substr(0,2).toUpperCase()),N},zc=function(G){return U.includes(G)},Zh={name:"VuePhoneNumberInput",components:{InputTel:F,CountrySelector:ou},props:{value:{type:String,default:null},id:{type:String,default:"MazPhoneNumberInput"},color:{type:String,default:"dodgerblue"},validColor:{type:String,default:"yellowgreen"},errorColor:{type:String,default:"orangered"},darkColor:{type:String,default:"#424242"},disabled:{type:Boolean,default:!1},defaultCountryCode:{type:String,default:null},size:{type:String,default:null},preferredCountries:{type:Array,default:null},onlyCountries:{type:Array,default:null},ignoredCountries:{type:Array,default:Array},translations:{type:Object,default:null},noValidatorState:{type:Boolean,default:!1},noFlags:{type:Boolean,default:!1},error:{type:Boolean,default:!1},noExample:{type:Boolean,default:!1},required:{type:Boolean,default:!1},countriesHeight:{type:Number,default:30},noUseBrowserLocale:{type:Boolean,default:!1},fetchCountry:{type:Boolean,default:!1},noCountrySelector:{type:Boolean,default:!1},showCodeOnList:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},borderRadius:{type:Number,default:4}},data:function(){return{results:{},userLocale:this.defaultCountryCode,lastKeyPressed:null}},computed:{uniqueId:function(){return"".concat(this.id,"-").concat(this._uid)},t:function(){return js(js({},Nc),this.translations)},codesCountries:function(){return H},countryCode:{get:function(){return this.userLocale||this.results.countryCode},set:function(G){this.setLocale(G),this.$refs.PhoneNumberInput.$el.querySelector("input").focus()}},phoneNumber:{get:function(){return this.value},set:function(G){this.emitValues({countryCode:this.countryCode,phoneNumber:G})}},shouldChooseCountry:function(){return!this.countryCode&&!!this.phoneNumber},phoneFormatted:function(){return this.results.formatInternational},isValid:function(){return this.results.isValid},phoneNumberExample:function(){var G=this.countryCode?Qs(this.countryCode,Z):null;return G?G.formatNational():null},hasEmptyPhone:function(){return this.phoneNumber===""||this.phoneNumber===null},hintValue:function(){return this.noExample||!this.phoneNumberExample||this.hasEmptyPhone||this.isValid?null:"".concat(this.t.example," ").concat(this.phoneNumberExample)},theme:function(){return{colorValue:this.color,color:{color:this.color},textColor:{color:"#747474"},textDarkColor:{color:"rgba(255, 255, 255, 0.7)"},validColor:{color:this.validColor},errorColor:{color:this.errorColor},darkColor:{color:this.darkColor},bgColor:{backgroundColor:this.color},bgValidColor:{backgroundColor:this.validColor},bgErrorColor:{backgroundColor:this.errorColor},bgDarkColor:{backgroundColor:this.darkColor},borderColor:{borderColor:this.color},borderValidColor:{borderColor:this.validColor},borderErrorColor:{borderColor:this.errorColor},borderDarkColor:{borderColor:this.darkColor},boxShadowColor:{boxShadow:"0 0 0 0.125rem ".concat(Fu(this.color))},boxShadowValid:{boxShadow:"0 0 0 0.125rem ".concat(Fu(this.validColor))},boxShadowError:{boxShadow:"0 0 0 0.125rem ".concat(Fu(this.errorColor))},borderRadius:{borderRadius:"".concat(this.borderRadius,"px")},borderLeftRadius:{borderTopLeftRadius:"".concat(this.borderRadius,"px"),borderBottomLeftRadius:"".concat(this.borderRadius,"px")},borderRightRadius:{borderTopRightRadius:"".concat(this.borderRadius,"px"),borderBottomRightRadius:"".concat(this.borderRadius,"px")}}}},watch:{defaultCountryCode:function(G,N){G!==N&&this.setLocale(G)},phoneNumber:{handler:function(G,N){if(G&&G!==N){var re=Sa(G);re&&this.emitValues({phoneNumber:re.nationalNumber,countryCode:this.countryCode?this.countryCode:re.country})}},immediate:!0}},mounted:function(){var O=E(regeneratorRuntime.mark(function N(){return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(Re.prev=0,this.phoneNumber&&this.defaultCountryCode&&this.emitValues({countryCode:this.defaultCountryCode,phoneNumber:this.phoneNumber}),!(this.defaultCountryCode&&this.fetchCountry)){Re.next=4;break}throw new Error('MazPhoneNumberInput: Do not use "fetch-country" and "default-country-code" options in the same time');case 4:if(!(this.defaultCountryCode&&this.noUseBrowserLocale)){Re.next=6;break}throw new Error('MazPhoneNumberInput: If you use a "default-country-code", do not use "no-use-browser-locale" options');case 6:if(!this.defaultCountryCode){Re.next=8;break}return Re.abrupt("return");case 8:this.fetchCountry?this.fetchCountryCode():this.noUseBrowserLocale||this.setLocale(Hr()),Re.next=14;break;case 11:throw Re.prev=11,Re.t0=Re.catch(0),new Error(Re.t0);case 14:case"end":return Re.stop()}},N,this,[[0,11]])}));function G(){return O.apply(this,arguments)}return G}(),methods:{getAsYouTypeFormat:function(G){var N=G.countryCode,re=G.phoneNumber,Re=new oa(N);return re?Re.input(re):null},getParsePhoneNumberFromString:function(G){var N=G.phoneNumber,re=G.countryCode,Re=N&&re?Sa(N,re):null;return js(js({countryCode:re,isValid:!1},N&&N!==""?{phoneNumber:N}:null),Re?{countryCallingCode:Re.countryCallingCode,formattedNumber:Re.number,nationalNumber:Re.nationalNumber,isValid:Re.isValid(),type:Re.getType(),formatInternational:Re.formatInternational(),formatNational:Re.formatNational(),uri:Re.getURI(),e164:Re.format("E.164")}:null)},emitValues:function(G){var N=this,re=this.getAsYouTypeFormat(G),Re=this.lastKeyPressed===8;this.$nextTick(function(){var ot=N.phoneNumber?N.phoneNumber.trim().slice(-1):!1;Re&&ot&&ot.slice(-1)===")"&&(re=N.phoneNumber.slice(0,-2),G.phoneNumber=N.phoneNumber.slice(0,-2)),N.results=N.getParsePhoneNumberFromString(G),N.$emit("update",N.results),N.$emit("input",re)})},setLocale:function(G){var N=zc(G);N&&G?(this.userLocale=N?G:null,this.emitValues({countryCode:G,phoneNumber:this.phoneNumber})):!N&&G&&window.console.warn("The locale ".concat(G," is not available"))},fetchCountryCode:function(){var O=E(regeneratorRuntime.mark(function N(){var re,Re,ot;return regeneratorRuntime.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.prev=0,Jt.next=3,fetch("https://ip2c.org/s");case 3:return re=Jt.sent,Jt.next=6,re.text();case 6:Re=Jt.sent,ot=(Re||"").toString(),ot&&ot[0]==="1"&&this.setLocale(ot.substr(2,2)),Jt.next=14;break;case 11:throw Jt.prev=11,Jt.t0=Jt.catch(0),new Error(Jt.t0);case 14:case"end":return Jt.stop()}},N,this,[[0,11]])}));function G(){return O.apply(this,arguments)}return G}()}},nh=Zh;n("e214");var Yh=Qa(nh,s,p,!1,null,"19351537",null),_c=Yh.exports;i.default=_c},fdef:function(e,i){e.exports=`	
\v\f\r   ᠎             　\u2028\u2029\uFEFF`}}).default})(VX);const PB=T4(oS);const UX=[null,"default","comfortable","compact"],Yo=gn({density:{type:String,default:"default",validator:t=>UX.includes(t)}},"density");function hl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return{densityClasses:Me(()=>`${e}--density-${t.density}`)}}const Zn=gn({tag:{type:String,default:"div"}},"tag"),Ik=yi()({name:"VTable",props:{fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Yo(),...Zn(),...vr()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{densityClasses:r}=hl(t);return Pi(()=>w(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!i.top,"v-table--has-bottom":!!i.bottom,"v-table--hover":t.hover},n.value,r.value]},{default:()=>{var a,c,s;return[(a=i.top)==null?void 0:a.call(i),i.default?w("div",{class:"v-table__wrapper",style:{height:Xi(t.height)}},[w("table",null,[i.default()])]):(c=i.wrapper)==null?void 0:c.call(i),(s=i.bottom)==null?void 0:s.call(i)]}})),{}}});const Ju=gn({border:[Boolean,Number,String]},"border");function Mc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return{borderClasses:Me(()=>{const n=Bs(t)?t.value:t.border,r=[];if(n===!0||n==="")r.push(`${e}--border`);else if(typeof n=="string"||n===0)for(const a of String(n).split(" "))r.push(`border-${a}`);return r})}}const Xo=gn({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function $a(t){return{elevationClasses:Me(()=>{const i=Bs(t)?t.value:t.elevation,n=[];return i==null||n.push(`elevation-${i}`),n})}}const zs=gn({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function fo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return{roundedClasses:Me(()=>{const n=Bs(t)?t.value:t.rounded,r=[];if(n===!0||n==="")r.push(`${e}--rounded`);else if(typeof n=="string"||n===0)for(const a of String(n).split(" "))r.push(`rounded-${a}`);return r})}}function Pk(t){return gC(()=>{const e=[],i={};return t.value.background&&(r3(t.value.background)?i.backgroundColor=t.value.background:e.push(`bg-${t.value.background}`)),t.value.text&&(r3(t.value.text)?(i.color=t.value.text,i.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:i}})}function Ul(t,e){const i=Me(()=>({text:Bs(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:r}=Pk(i);return{textColorClasses:n,textColorStyles:r}}function ho(t,e){const i=Me(()=>({background:Bs(t)?t.value:e?t[e]:null})),{colorClasses:n,colorStyles:r}=Pk(i);return{backgroundColorClasses:n,backgroundColorStyles:r}}const jX=["elevated","flat","tonal","outlined","text","plain"];function em(t,e){return w(Oi,null,[t&&w("span",{key:"overlay",class:`${e}__overlay`},null),w("span",{key:"underlay",class:`${e}__underlay`},null)])}const Oc=gn({color:String,variant:{type:String,default:"elevated",validator:t=>jX.includes(t)}},"variant");function tm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();const i=Me(()=>{const{variant:a}=Da(t);return`${e}--variant-${a}`}),{colorClasses:n,colorStyles:r}=Pk(Me(()=>{const{variant:a,color:c}=Da(t);return{[["elevated","flat"].includes(a)?"background":"text"]:c}}));return{colorClasses:n,colorStyles:r,variantClasses:i}}const AB=gn({divided:Boolean,...Ju(),...Yo(),...Xo(),...zs(),...Zn(),...vr(),...Oc()},"v-btn-group"),aS=yi()({name:"VBtnGroup",props:AB(),setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{densityClasses:r}=hl(t),{borderClasses:a}=Mc(t),{elevationClasses:c}=$a(t),{roundedClasses:s}=fo(t);co({VBtn:{height:"auto",color:li(t,"color"),density:li(t,"density"),flat:!0,variant:li(t,"variant")}}),Pi(()=>w(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},n.value,a.value,r.value,c.value,s.value]},i))}}),Yg=gn({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Xg=gn({value:null,disabled:Boolean,selectedClass:String},"group-item");function Kg(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Fa("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=cl();Mn(Symbol.for(`${e.description}:id`),r);const a=qi(e,null);if(!a){if(!i)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const c=li(t,"value"),s=Me(()=>a.disabled.value||t.disabled);a.register({id:r,value:c,disabled:s},n),as(()=>{a.unregister(r)});const p=Me(()=>a.isSelected(r)),_=Me(()=>p.value&&[a.selectedClass.value,t.selectedClass]);return Fi(p,b=>{n.emit("group:selected",{value:b})}),{id:r,isSelected:p,toggle:()=>a.select(r,!p.value),select:b=>a.select(r,b),selectedClass:_,value:c,disabled:s,group:a}}function im(t,e){let i=!1;const n=Bo([]),r=Pn(t,"modelValue",[],E=>E==null?[]:MB(n,kc(E)),E=>{const I=GX(n,E);return t.multiple?I:I[0]}),a=Fa("useGroup");function c(E,I){const R=E,V=Symbol.for(`${e.description}:id`),U=kv(V,a==null?void 0:a.vnode).indexOf(I);U>-1?n.splice(U,0,R):n.push(R)}function s(E){if(i)return;p();const I=n.findIndex(R=>R.id===E);n.splice(I,1)}function p(){const E=n.find(I=>!I.disabled);E&&t.mandatory==="force"&&!r.value.length&&(r.value=[E.id])}Fn(()=>{p()}),as(()=>{i=!0});function _(E,I){const R=n.find(V=>V.id===E);if(!(I&&(R!=null&&R.disabled)))if(t.multiple){const V=r.value.slice(),q=V.findIndex(H=>H===E),U=~q;if(I=I??!U,U&&t.mandatory&&V.length<=1||!U&&t.max!=null&&V.length+1>t.max)return;q<0&&I?V.push(E):q>=0&&!I&&V.splice(q,1),r.value=V}else{const V=r.value.includes(E);if(t.mandatory&&V)return;r.value=I??!V?[E]:[]}}function b(E){if(t.multiple&&Rp('This method is not supported when using "multiple" prop'),r.value.length){const I=r.value[0],R=n.findIndex(U=>U.id===I);let V=(R+E)%n.length,q=n[V];for(;q.disabled&&V!==R;)V=(V+E)%n.length,q=n[V];if(q.disabled)return;r.value=[n[V].id]}else{const I=n.find(R=>!R.disabled);I&&(r.value=[I.id])}}const S={register:c,unregister:s,selected:r,select:_,disabled:li(t,"disabled"),prev:()=>b(n.length-1),next:()=>b(1),isSelected:E=>r.value.includes(E),selectedClass:Me(()=>t.selectedClass),items:Me(()=>n),getItemIndex:E=>HX(n,E)};return Mn(e,S),S}function HX(t,e){const i=MB(t,[e]);return i.length?t.findIndex(n=>n.id===i[0]):-1}function MB(t,e){const i=[];for(let n=0;n<t.length;n++){const r=t[n];r.value!=null?e.find(a=>Xp(a,r.value))!=null&&i.push(r.id):e.includes(n)&&i.push(r.id)}return i}function GX(t,e){const i=[];for(let n=0;n<t.length;n++){const r=t[n];e.includes(r.id)&&i.push(r.value!=null?r.value:n)}return i}const Ak=Symbol.for("vuetify:v-btn-toggle"),WX=yi()({name:"VBtnToggle",props:{...AB(),...Yg()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{isSelected:n,next:r,prev:a,select:c,selected:s}=im(t,Ak);return Pi(()=>{const[p]=aS.filterProps(t);return w(aS,Mi({class:"v-btn-toggle"},p),{default:()=>{var _;return[(_=i.default)==null?void 0:_.call(i,{isSelected:n,next:r,prev:a,select:c,selected:s})]}})}),{next:r,prev:a,select:c}}}),es=yi(!1)({name:"VDefaultsProvider",props:{defaults:Object,disabled:Boolean,reset:[Number,String],root:Boolean,scoped:Boolean},setup(t,e){let{slots:i}=e;const{defaults:n,disabled:r,reset:a,root:c,scoped:s}=zb(t);return co(n,{reset:a,root:c,scoped:s,disabled:r}),()=>{var p;return(p=i.default)==null?void 0:p.call(i)}}});const qX=["x-small","small","default","large","x-large"],Uh=gn({size:{type:[String,Number],default:"default"}},"size");function Qg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return gC(()=>{let i,n;return U1(qX,t.size)?i=`${e}--size-${t.size}`:t.size&&(n={width:Xi(t.size),height:Xi(t.size)}),{sizeClasses:i,sizeStyles:n}})}const ZX=gn({color:String,start:Boolean,end:Boolean,icon:On,...Uh(),...Zn({tag:"i"}),...vr()},"v-icon"),lo=yi()({name:"VIcon",props:ZX(),setup(t,e){let{attrs:i,slots:n}=e,r;n.default&&(r=Me(()=>{var S,E;const b=(S=n.default)==null?void 0:S.call(n);if(b)return(E=b.filter(I=>I.type===If&&I.children&&typeof I.children=="string")[0])==null?void 0:E.children}));const{themeClasses:a}=Vr(t),{iconData:c}=_j(r||t),{sizeClasses:s}=Qg(t),{textColorClasses:p,textColorStyles:_}=Ul(li(t,"color"));return Pi(()=>w(c.value.component,{tag:t.tag,icon:c.value.icon,class:["v-icon","notranslate",a.value,s.value,p.value,{"v-icon--clickable":!!i.onClick,"v-icon--start":t.start,"v-icon--end":t.end}],style:[s.value?void 0:{fontSize:Xi(t.size),height:Xi(t.size),width:Xi(t.size)},_.value],role:i.onClick?"button":void 0,"aria-hidden":!i.onClick},{default:()=>{var b;return[(b=n.default)==null?void 0:b.call(n)]}})),{}}});function Mk(t){const e=lt(),i=lt(!1);if(xC){const n=new IntersectionObserver(r=>{t==null||t(r,n),i.value=!!r.find(a=>a.isIntersecting)});as(()=>{n.disconnect()}),Fi(e,(r,a)=>{a&&(n.unobserve(a),i.value=!1),r&&n.observe(r)},{flush:"post"})}return{intersectionRef:e,isIntersecting:i}}const Ok=yi()({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Uh(),...Zn({tag:"div"}),...vr()},setup(t,e){let{slots:i}=e;const n=20,r=2*Math.PI*n,a=lt(),{themeClasses:c}=Vr(t),{sizeClasses:s,sizeStyles:p}=Qg(t),{textColorClasses:_,textColorStyles:b}=Ul(li(t,"color")),{textColorClasses:S,textColorStyles:E}=Ul(li(t,"bgColor")),{intersectionRef:I,isIntersecting:R}=Mk(),{resizeRef:V,contentRect:q}=Mf(),U=Me(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),H=Me(()=>Number(t.width)),Z=Me(()=>p.value?Number(t.size):q.value?q.value.width:Math.max(H.value,32)),ne=Me(()=>n/(1-H.value/Z.value)*2),ie=Me(()=>H.value/Z.value*ne.value),oe=Me(()=>Xi((100-U.value)/100*r));return Xs(()=>{I.value=a.value,V.value=a.value}),Pi(()=>w(t.tag,{ref:a,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":R.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},c.value,s.value,_.value],style:[p.value,b.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:U.value},{default:()=>[w("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${ne.value} ${ne.value}`},[w("circle",{class:["v-progress-circular__underlay",S.value],style:E.value,fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":ie.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),w("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:n,"stroke-width":ie.value,"stroke-dasharray":r,"stroke-dashoffset":oe.value},null)]),i.default&&w("div",{class:"v-progress-circular__content"},[i.default({value:U.value})])]})),{}}});const lS=Symbol("rippleStop"),YX=80;function KM(t,e){t.style.transform=e,t.style.webkitTransform=e}function uS(t){return t.constructor.name==="TouchEvent"}function OB(t){return t.constructor.name==="KeyboardEvent"}const XX=function(t,e){var S;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=0,r=0;if(!OB(t)){const E=e.getBoundingClientRect(),I=uS(t)?t.touches[t.touches.length-1]:t;n=I.clientX-E.left,r=I.clientY-E.top}let a=0,c=.3;(S=e._ripple)!=null&&S.circle?(c=.15,a=e.clientWidth/2,a=i.center?a:a+Math.sqrt((n-a)**2+(r-a)**2)/4):a=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const s=`${(e.clientWidth-a*2)/2}px`,p=`${(e.clientHeight-a*2)/2}px`,_=i.center?s:`${n-a}px`,b=i.center?p:`${r-a}px`;return{radius:a,scale:c,x:_,y:b,centerX:s,centerY:p}},xb={show(t,e){var I;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((I=e==null?void 0:e._ripple)!=null&&I.enabled))return;const n=document.createElement("span"),r=document.createElement("span");n.appendChild(r),n.className="v-ripple__container",i.class&&(n.className+=` ${i.class}`);const{radius:a,scale:c,x:s,y:p,centerX:_,centerY:b}=XX(t,e,i),S=`${a*2}px`;r.className="v-ripple__animation",r.style.width=S,r.style.height=S,e.appendChild(n);const E=window.getComputedStyle(e);E&&E.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),KM(r,`translate(${s}, ${p}) scale3d(${c},${c},${c})`),r.dataset.activated=String(performance.now()),setTimeout(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),KM(r,`translate(${_}, ${b}) scale3d(1,1,1)`)},0)},hide(t){var a;if(!((a=t==null?void 0:t._ripple)!=null&&a.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const i=e[e.length-1];if(i.dataset.isHiding)return;i.dataset.isHiding="true";const n=performance.now()-Number(i.dataset.activated),r=Math.max(250-n,0);setTimeout(()=>{i.classList.remove("v-ripple__animation--in"),i.classList.add("v-ripple__animation--out"),setTimeout(()=>{var s;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((s=i.parentNode)==null?void 0:s.parentNode)===t&&t.removeChild(i.parentNode)},300)},r)}};function LB(t){return typeof t>"u"||!!t}function ry(t){const e={},i=t.currentTarget;if(!(!(i!=null&&i._ripple)||i._ripple.touched||t[lS])){if(t[lS]=!0,uS(t))i._ripple.touched=!0,i._ripple.isTouch=!0;else if(i._ripple.isTouch)return;if(e.center=i._ripple.centered||OB(t),i._ripple.class&&(e.class=i._ripple.class),uS(t)){if(i._ripple.showTimerCommit)return;i._ripple.showTimerCommit=()=>{xb.show(t,i,e)},i._ripple.showTimer=window.setTimeout(()=>{var n;(n=i==null?void 0:i._ripple)!=null&&n.showTimerCommit&&(i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null)},YX)}else xb.show(t,i,e)}}function QM(t){t[lS]=!0}function Zu(t){const e=t.currentTarget;if(e!=null&&e._ripple){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Zu(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),xb.hide(e)}}function DB(t){const e=t.currentTarget;e!=null&&e._ripple&&(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let sy=!1;function RB(t){!sy&&(t.keyCode===XA.enter||t.keyCode===XA.space)&&(sy=!0,ry(t))}function BB(t){sy=!1,Zu(t)}function FB(t){sy&&(sy=!1,Zu(t))}function $B(t,e,i){const{value:n,modifiers:r}=e,a=LB(n);if(a||xb.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=a,t._ripple.centered=r.center,t._ripple.circle=r.circle,w2(n)&&n.class&&(t._ripple.class=n.class),a&&!i){if(r.stop){t.addEventListener("touchstart",QM,{passive:!0}),t.addEventListener("mousedown",QM);return}t.addEventListener("touchstart",ry,{passive:!0}),t.addEventListener("touchend",Zu,{passive:!0}),t.addEventListener("touchmove",DB,{passive:!0}),t.addEventListener("touchcancel",Zu),t.addEventListener("mousedown",ry),t.addEventListener("mouseup",Zu),t.addEventListener("mouseleave",Zu),t.addEventListener("keydown",RB),t.addEventListener("keyup",BB),t.addEventListener("blur",FB),t.addEventListener("dragstart",Zu,{passive:!0})}else!a&&i&&NB(t)}function NB(t){t.removeEventListener("mousedown",ry),t.removeEventListener("touchstart",ry),t.removeEventListener("touchend",Zu),t.removeEventListener("touchmove",DB),t.removeEventListener("touchcancel",Zu),t.removeEventListener("mouseup",Zu),t.removeEventListener("mouseleave",Zu),t.removeEventListener("keydown",RB),t.removeEventListener("keyup",BB),t.removeEventListener("dragstart",Zu),t.removeEventListener("blur",FB)}function KX(t,e){$B(t,e,!1)}function QX(t){delete t._ripple,NB(t)}function JX(t,e){if(e.value===e.oldValue)return;const i=LB(e.oldValue);$B(t,e,i)}const Uf={mounted:KX,unmounted:QX,updated:JX},ud=gn({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function cd(t){return{dimensionStyles:Me(()=>({height:Xi(t.height),maxHeight:Xi(t.maxHeight),maxWidth:Xi(t.maxWidth),minHeight:Xi(t.minHeight),minWidth:Xi(t.minWidth),width:Xi(t.width)}))}}const JM={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},jf=gn({location:String},"location");function Hf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;const{isRtl:n}=zh();return{locationStyles:Me(()=>{if(!t.location)return{};const{side:a,align:c}=S2(t.location.split(" ").length>1?t.location:`${t.location} center`,n.value);function s(_){return i?i(_):0}const p={};return a!=="center"&&(e?p[JM[a]]=`calc(100% - ${s(a)}px)`:p[a]=0),c!=="center"?e?p[JM[c]]=`calc(100% - ${s(c)}px)`:p[c]=0:(a==="center"?p.top=p.left="50%":p[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",p.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),p})}}const Lk=yi()({name:"VProgressLinear",props:{absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...jf({location:"top"}),...zs(),...Zn(),...vr()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{isRtl:r}=zh(),{themeClasses:a}=Vr(t),{locationStyles:c}=Hf(t),{textColorClasses:s,textColorStyles:p}=Ul(t,"color"),{backgroundColorClasses:_,backgroundColorStyles:b}=ho(Me(()=>t.bgColor||t.color)),{backgroundColorClasses:S,backgroundColorStyles:E}=ho(t,"color"),{roundedClasses:I}=fo(t),{intersectionRef:R,isIntersecting:V}=Mk(),q=Me(()=>parseInt(t.max,10)),U=Me(()=>parseInt(t.height,10)),H=Me(()=>parseFloat(t.bufferValue)/q.value*100),Z=Me(()=>parseFloat(n.value)/q.value*100),ne=Me(()=>r.value!==t.reverse),ie=Me(()=>t.indeterminate?"fade-transition":"slide-x-transition"),oe=Me(()=>t.bgOpacity==null?t.bgOpacity:parseFloat(t.bgOpacity));function pe(de){if(!R.value)return;const{left:fe,right:ge,width:we}=R.value.getBoundingClientRect(),Ie=ne.value?we-de.clientX+(ge-we):de.clientX-fe;n.value=Math.round(Ie/we*q.value)}return Pi(()=>w(t.tag,{ref:R,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&V.value,"v-progress-linear--reverse":ne.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},I.value,a.value],style:{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?Xi(U.value):0,"--v-progress-linear-height":Xi(U.value),...c.value},role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Z.value,onClick:t.clickable&&pe},{default:()=>[t.stream&&w("div",{key:"stream",class:["v-progress-linear__stream",s.value],style:{...p.value,[ne.value?"left":"right"]:Xi(-U.value),borderTop:`${Xi(U.value/2)} dotted`,opacity:oe.value,top:`calc(50% - ${Xi(U.value/4)})`,width:Xi(100-H.value,"%"),"--v-progress-linear-stream-to":Xi(U.value*(ne.value?1:-1))}},null),w("div",{class:["v-progress-linear__background",_.value],style:[b.value,{opacity:oe.value,width:Xi(t.stream?H.value:100,"%")}]},null),w(Nl,{name:ie.value},{default:()=>[t.indeterminate?w("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(de=>w("div",{key:de,class:["v-progress-linear__indeterminate",de,S.value],style:E.value},null))]):w("div",{class:["v-progress-linear__determinate",S.value],style:[E.value,{width:Xi(Z.value,"%")}]},null)]}),i.default&&w("div",{class:"v-progress-linear__content"},[i.default({value:Z.value,buffer:H.value})])]})),{}}}),Sx=gn({loading:[Boolean,String]},"loader");function Iy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return{loaderClasses:Me(()=>({[`${e}--loading`]:t.loading}))}}function Cx(t,e){var n;let{slots:i}=e;return w("div",{class:`${t.name}__loader`},[((n=i.default)==null?void 0:n.call(i,{color:t.color,isActive:t.active}))||w(Lk,{active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const eK=["static","relative","fixed","absolute","sticky"],Jg=gn({position:{type:String,validator:t=>eK.includes(t)}},"position");function e_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();return{positionClasses:Me(()=>t.position?`${e}--${t.position}`:void 0)}}function zB(){var t,e;return(e=(t=Fa("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function Py(t,e){const i=nD("RouterLink"),n=Me(()=>!!(t.href||t.to)),r=Me(()=>(n==null?void 0:n.value)||e3(e,"click")||e3(t,"click"));if(typeof i=="string")return{isLink:n,isClickable:r,href:li(t,"href")};const a=t.to?i.useLink(t):void 0;return{isLink:n,isClickable:r,route:a==null?void 0:a.route,navigate:a==null?void 0:a.navigate,isActive:a&&Me(()=>{var c,s;return t.exact?(c=a.isExactActive)==null?void 0:c.value:(s=a.isActive)==null?void 0:s.value}),href:Me(()=>t.to?a==null?void 0:a.route.value.href:t.href)}}const Ay=gn({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let VT=!1;function tK(t,e){let i=!1,n,r;Eo&&(Cn(()=>{window.addEventListener("popstate",a),n=t==null?void 0:t.beforeEach((c,s,p)=>{VT?i?e(p):p():setTimeout(()=>i?e(p):p()),VT=!0}),r=t==null?void 0:t.afterEach(()=>{VT=!1})}),bu(()=>{window.removeEventListener("popstate",a),n==null||n(),r==null||r()}));function a(c){var s;(s=c.state)!=null&&s.replaced||(i=!0,setTimeout(()=>i=!1))}}function iK(t,e){Fi(()=>{var i;return(i=t.isActive)==null?void 0:i.value},i=>{t.isLink.value&&i&&e&&Cn(()=>{e(!0)})},{immediate:!0})}const VB=gn({active:{type:Boolean,default:void 0},symbol:{type:null,default:Ak},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:On,appendIcon:On,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},...Ju(),...zs(),...Yo(),...ud(),...Xo(),...Xg(),...Sx(),...jf(),...Jg(),...Ay(),...Uh(),...Zn({tag:"button"}),...vr(),...Oc({variant:"elevated"})},"VBtn"),ko=yi()({name:"VBtn",directives:{Ripple:Uf},props:VB(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:i,slots:n}=e;const{themeClasses:r}=Vr(t),{borderClasses:a}=Mc(t),{colorClasses:c,colorStyles:s,variantClasses:p}=tm(t),{densityClasses:_}=hl(t),{dimensionStyles:b}=cd(t),{elevationClasses:S}=$a(t),{loaderClasses:E}=Iy(t),{locationStyles:I}=Hf(t),{positionClasses:R}=e_(t),{roundedClasses:V}=fo(t),{sizeClasses:q,sizeStyles:U}=Qg(t),H=Kg(t,t.symbol,!1),Z=Py(t,i),ne=Me(()=>{var de;return t.active!==void 0?t.active:Z.isLink.value?(de=Z.isActive)==null?void 0:de.value:H==null?void 0:H.isSelected.value}),ie=Me(()=>(H==null?void 0:H.disabled.value)||t.disabled),oe=Me(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),pe=Me(()=>{if(t.value!==void 0)return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});return iK(Z,H==null?void 0:H.select),Pi(()=>{var Oe,ke;const de=Z.isLink.value?"a":t.tag,fe=!!(t.prependIcon||n.prepend),ge=!!(t.appendIcon||n.append),we=!!(t.icon&&t.icon!==!0),Ie=(H==null?void 0:H.isSelected.value)&&(!Z.isLink.value||((Oe=Z.isActive)==null?void 0:Oe.value))||!H||((ke=Z.isActive)==null?void 0:ke.value);return Br(w(de,{type:de==="a"?void 0:"button",class:["v-btn",H==null?void 0:H.selectedClass.value,{"v-btn--active":ne.value,"v-btn--block":t.block,"v-btn--disabled":ie.value,"v-btn--elevated":oe.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--stacked":t.stacked},r.value,a.value,Ie?c.value:void 0,_.value,S.value,E.value,R.value,V.value,q.value,p.value],style:[Ie?s.value:void 0,b.value,I.value,U.value],disabled:ie.value||void 0,href:Z.href.value,onClick:Ee=>{var Qe;ie.value||((Qe=Z.navigate)==null||Qe.call(Z,Ee),H==null||H.toggle())},value:pe.value},{default:()=>{var Ee;return[em(!0,"v-btn"),!t.icon&&fe&&w("span",{key:"prepend",class:"v-btn__prepend"},[n.prepend?w(es,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},n.prepend):w(lo,{key:"prepend-icon",icon:t.prependIcon},null)]),w("span",{class:"v-btn__content","data-no-activator":""},[!n.default&&we?w(lo,{key:"content-icon",icon:t.icon},null):w(es,{key:"content-defaults",disabled:!we,defaults:{VIcon:{icon:t.icon}}},n.default)]),!t.icon&&ge&&w("span",{key:"append",class:"v-btn__append"},[n.append?w(es,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},n.append):w(lo,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&w("span",{key:"loader",class:"v-btn__loader"},[((Ee=n.loader)==null?void 0:Ee.call(n))??w(Ok,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[Ba("ripple"),!ie.value&&t.ripple,null]])}),{}}});function ec(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center center",i=arguments.length>2?arguments[2]:void 0;return yi()({name:t,props:{disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:i},origin:{type:String,default:e}},setup(n,r){let{slots:a}=r;const c={onBeforeEnter(s){s.style.transformOrigin=n.origin},onLeave(s){if(n.leaveAbsolute){const{offsetTop:p,offsetLeft:_,offsetWidth:b,offsetHeight:S}=s;s._transitionInitialStyles={position:s.style.position,top:s.style.top,left:s.style.left,width:s.style.width,height:s.style.height},s.style.position="absolute",s.style.top=`${p}px`,s.style.left=`${_}px`,s.style.width=`${b}px`,s.style.height=`${S}px`}n.hideOnLeave&&s.style.setProperty("display","none","important")},onAfterLeave(s){if(n.leaveAbsolute&&(s!=null&&s._transitionInitialStyles)){const{position:p,top:_,left:b,width:S,height:E}=s._transitionInitialStyles;delete s._transitionInitialStyles,s.style.position=p||"",s.style.top=_||"",s.style.left=b||"",s.style.width=S||"",s.style.height=E||""}}};return()=>{const s=n.group?FD:Nl;return Ns(s,{name:n.disabled?"":t,css:!n.disabled,...n.group?void 0:{mode:n.mode},...n.disabled?{}:c},a.default)}}})}function UB(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return yi()({name:t,props:{mode:{type:String,default:i},disabled:Boolean},setup(n,r){let{slots:a}=r;return()=>Ns(Nl,{name:n.disabled?"":t,css:!n.disabled,...n.disabled?{}:e},a.default)}})}function jB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",n=ll(`offset-${i}`);return{onBeforeEnter(c){c._parent=c.parentNode,c._initialStyle={transition:c.style.transition,overflow:c.style.overflow,[i]:c.style[i]}},onEnter(c){const s=c._initialStyle;c.style.setProperty("transition","none","important"),c.style.overflow="hidden";const p=`${c[n]}px`;c.style[i]="0",c.offsetHeight,c.style.transition=s.transition,t&&c._parent&&c._parent.classList.add(t),requestAnimationFrame(()=>{c.style[i]=p})},onAfterEnter:a,onEnterCancelled:a,onLeave(c){c._initialStyle={transition:"",overflow:c.style.overflow,[i]:c.style[i]},c.style.overflow="hidden",c.style[i]=`${c[n]}px`,c.offsetHeight,requestAnimationFrame(()=>c.style[i]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(c){t&&c._parent&&c._parent.classList.remove(t),a(c)}function a(c){const s=c._initialStyle[i];c.style.overflow=c._initialStyle.overflow,s!=null&&(c.style[i]=s),delete c._initialStyle}}const kx=yi()({name:"VDialogTransition",props:{target:Object},setup(t,e){let{slots:i}=e;const n={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,a){var E;await new Promise(I=>requestAnimationFrame(I)),await new Promise(I=>requestAnimationFrame(I)),r.style.visibility="";const{x:c,y:s,sx:p,sy:_,speed:b}=tO(t.target,r),S=Sp(r,[{transform:`translate(${c}px, ${s}px) scale(${p}, ${_})`,opacity:0},{}],{duration:225*b,easing:sj});(E=eO(r))==null||E.forEach(I=>{Sp(I,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*b,easing:Gv})}),S.finished.then(()=>a())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,a){var E;await new Promise(I=>requestAnimationFrame(I));const{x:c,y:s,sx:p,sy:_,speed:b}=tO(t.target,r);Sp(r,[{},{transform:`translate(${c}px, ${s}px) scale(${p}, ${_})`,opacity:0}],{duration:125*b,easing:oj}).finished.then(()=>a()),(E=eO(r))==null||E.forEach(I=>{Sp(I,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*b,easing:Gv})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>t.target?w(Nl,Mi({name:"dialog-transition"},n,{css:!1}),i):w(Nl,{name:"dialog-transition"},i)}});function eO(t){var i;const e=(i=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:i.children;return e&&[...e]}function tO(t,e){const i=t.getBoundingClientRect(),n=_C(e),[r,a]=getComputedStyle(e).transformOrigin.split(" ").map(U=>parseFloat(U)),[c,s]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let p=i.left+i.width/2;c==="left"||s==="left"?p-=i.width/2:(c==="right"||s==="right")&&(p+=i.width/2);let _=i.top+i.height/2;c==="top"||s==="top"?_-=i.height/2:(c==="bottom"||s==="bottom")&&(_+=i.height/2);const b=i.width/n.width,S=i.height/n.height,E=Math.max(1,b,S),I=b/E||0,R=S/E||0,V=n.width*n.height/(window.innerWidth*window.innerHeight),q=V>.12?Math.min(1.5,(V-.12)*10+1):1;return{x:p-(r+n.left),y:_-(a+n.top),sx:I,sy:R,speed:q}}const nK=ec("fab-transition","center center","out-in"),rK=ec("dialog-bottom-transition"),sK=ec("dialog-top-transition"),cS=ec("fade-transition"),HB=ec("scale-transition"),oK=ec("scroll-x-transition"),aK=ec("scroll-x-reverse-transition"),lK=ec("scroll-y-transition"),uK=ec("scroll-y-reverse-transition"),cK=ec("slide-x-transition"),dK=ec("slide-x-reverse-transition"),Dk=ec("slide-y-transition"),hK=ec("slide-y-reverse-transition"),Ex=UB("expand-transition",jB()),Rk=UB("expand-x-transition",jB("",!0));function GB(t){const{t:e}=Tu();function i(n){let{name:r}=n;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=t[`onClick:${r}`],s=c&&a?e(`$vuetify.input.${a}`,t.label??""):void 0;return w(lo,{icon:t[`${r}Icon`],"aria-label":s,onClick:c},null)}return{InputIcon:i}}const t_=yi()({name:"VLabel",props:{text:String,clickable:Boolean,...vr()},setup(t,e){let{slots:i}=e;return Pi(()=>{var n;return w("label",{class:["v-label",{"v-label--clickable":t.clickable}]},[t.text,(n=i.default)==null?void 0:n.call(i)])}),{}}}),_v=yi()({name:"VFieldLabel",props:{floating:Boolean},setup(t,e){let{slots:i}=e;return Pi(()=>w(t_,{class:["v-field-label",{"v-field-label--floating":t.floating}],"aria-hidden":t.floating||void 0},i)),{}}}),Ix=gn({focused:Boolean},"focus");function nm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh();const i=Pn(t,"focused"),n=Me(()=>({[`${e}--focused`]:i.value}));function r(){i.value=!0}function a(){i.value=!1}return{focusClasses:n,isFocused:i,focus:r,blur:a}}const fK=["underlined","outlined","filled","solo","plain"],Px=gn({appendInnerIcon:On,bgColor:String,clearable:Boolean,clearIcon:{type:On,default:"$clear"},active:Boolean,color:String,dirty:Boolean,disabled:Boolean,error:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:On,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>fK.includes(t)},"onClick:clear":xh(),"onClick:appendInner":xh(),"onClick:prependInner":xh(),...vr(),...Sx()},"v-field"),My=yi()({name:"VField",inheritAttrs:!1,props:{id:String,...Ix(),...Px()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const{themeClasses:a}=Vr(t),{loaderClasses:c}=Iy(t),{focusClasses:s,isFocused:p,focus:_,blur:b}=nm(t),{InputIcon:S}=GB(t),E=Me(()=>t.dirty||t.active),I=Me(()=>!t.singleLine&&!!(t.label||r.label)),R=cl(),V=Me(()=>t.id||`input-${R}`),q=Me(()=>`${V.value}-messages`),U=lt(),H=lt(),Z=lt(),{backgroundColorClasses:ne,backgroundColorStyles:ie}=ho(li(t,"bgColor")),{textColorClasses:oe,textColorStyles:pe}=Ul(Me(()=>E.value&&p.value&&!t.error&&!t.disabled?t.color:void 0));Fi(E,ge=>{if(I.value){const we=U.value.$el,Ie=H.value.$el;requestAnimationFrame(()=>{const Oe=_C(we),ke=Ie.getBoundingClientRect(),Ee=ke.x-Oe.x,Qe=ke.y-Oe.y-(Oe.height/2-ke.height/2),gt=ke.width/.75,nt=Math.abs(gt-Oe.width)>1?{maxWidth:Xi(gt)}:void 0,ft=getComputedStyle(we),Tt=getComputedStyle(Ie),pt=parseFloat(ft.transitionDuration)*1e3||150,et=parseFloat(Tt.getPropertyValue("--v-field-label-scale")),Mt=Tt.getPropertyValue("color");we.style.visibility="visible",Ie.style.visibility="hidden",Sp(we,{transform:`translate(${Ee}px, ${Qe}px) scale(${et})`,color:Mt,...nt},{duration:pt,easing:Gv,direction:ge?"normal":"reverse"}).finished.then(()=>{we.style.removeProperty("visibility"),Ie.style.removeProperty("visibility")})})}},{flush:"post"});const de=Me(()=>({isActive:E,isFocused:p,controlRef:Z,blur:b,focus:_}));function fe(ge){ge.target!==document.activeElement&&ge.preventDefault()}return Pi(()=>{var Ee,Qe,gt;const ge=t.variant==="outlined",we=r["prepend-inner"]||t.prependInnerIcon,Ie=!!(t.clearable||r.clear),Oe=!!(r["append-inner"]||t.appendInnerIcon||Ie),ke=r.label?r.label({label:t.label,props:{for:V.value}}):t.label;return w("div",Mi({class:["v-field",{"v-field--active":E.value,"v-field--appended":Oe,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":we,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!ke,[`v-field--variant-${t.variant}`]:!0},a.value,ne.value,s.value,c.value],style:[ie.value,pe.value],onClick:fe},i),[w("div",{class:"v-field__overlay"},null),w(Cx,{name:"v-field",active:!!t.loading,color:t.error?"error":t.color},{default:r.loader}),we&&w("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&w(S,{key:"prepend-icon",name:"prependInner"},null),(Ee=r["prepend-inner"])==null?void 0:Ee.call(r,de.value)]),w("div",{class:"v-field__field","data-no-activator":""},[["solo","filled"].includes(t.variant)&&I.value&&w(_v,{key:"floating-label",ref:H,class:[oe.value],floating:!0,for:V.value},{default:()=>[ke]}),w(_v,{ref:U,for:V.value},{default:()=>[ke]}),(Qe=r.default)==null?void 0:Qe.call(r,{...de.value,props:{id:V.value,class:"v-field__input","aria-describedby":q.value},focus:_,blur:b})]),Ie&&w(Rk,{key:"clear"},{default:()=>[Br(w("div",{class:"v-field__clearable",onMousedown:nt=>{nt.preventDefault(),nt.stopPropagation()}},[r.clear?r.clear():w(S,{name:"clear"},null)]),[[Qu,t.dirty]])]}),Oe&&w("div",{key:"append",class:"v-field__append-inner"},[(gt=r["append-inner"])==null?void 0:gt.call(r,de.value),t.appendInnerIcon&&w(S,{key:"append-icon",name:"appendInner"},null)]),w("div",{class:["v-field__outline",oe.value]},[ge&&w(Oi,null,[w("div",{class:"v-field__outline__start"},null),I.value&&w("div",{class:"v-field__outline__notch"},[w(_v,{ref:H,floating:!0,for:V.value},{default:()=>[ke]})]),w("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(t.variant)&&I.value&&w(_v,{ref:H,floating:!0,for:V.value},{default:()=>[ke]})])])}),{controlRef:Z}}});function Bk(t){const e=Object.keys(My.props).filter(i=>!XD(i));return Kp(t,e)}const jh=gn({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),Jc=(t,e)=>{let{slots:i}=e;const{transition:n,...r}=t,{component:a=Nl,...c}=typeof n=="object"?n:{};return Ns(a,Mi(typeof n=="string"?{name:n}:c,r),i)},WB=yi()({name:"VMessages",props:{active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...jh({transition:{component:Dk,leaveAbsolute:!0,group:!0}})},setup(t,e){let{slots:i}=e;const n=Me(()=>kc(t.messages)),{textColorClasses:r,textColorStyles:a}=Ul(Me(()=>t.color));return Pi(()=>w(Jc,{transition:t.transition,tag:"div",class:["v-messages",r.value],style:a.value,role:"alert","aria-live":"polite"},{default:()=>[t.active&&n.value.map((c,s)=>w("div",{class:"v-messages__message",key:`${s}-${n.value}`},[i.message?i.message({message:c}):c]))]})),{}}}),qB=Symbol.for("vuetify:form"),pK=gn({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function mK(t){const e=Pn(t,"modelValue"),i=Me(()=>t.disabled),n=Me(()=>t.readonly),r=lt(!1),a=lt([]),c=lt([]);async function s(){const b=[];let S=!0;c.value=[],r.value=!0;for(const E of a.value){const I=await E.validate();if(I.length>0&&(S=!1,b.push({id:E.id,errorMessages:I})),!S&&t.fastFail)break}return c.value=b,r.value=!1,{valid:S,errors:c.value}}function p(){a.value.forEach(b=>b.reset()),e.value=null}function _(){a.value.forEach(b=>b.resetValidation()),c.value=[],e.value=null}return Fi(a,()=>{let b=0,S=0;const E=[];for(const I of a.value)I.isValid===!1?(S++,E.push({id:I.id,errorMessages:I.errorMessages})):I.isValid===!0&&b++;c.value=E,e.value=S>0?!1:b===a.value.length?!0:null},{deep:!0}),Mn(qB,{register:b=>{let{id:S,validate:E,reset:I,resetValidation:R}=b;a.value.some(V=>V.id===S)&&Rp(`Duplicate input name "${S}"`),a.value.push({id:S,validate:E,reset:I,resetValidation:R,isValid:null,errorMessages:[]})},unregister:b=>{a.value=a.value.filter(S=>S.id!==b)},update:(b,S,E)=>{const I=a.value.find(R=>R.id===b);I&&(I.isValid=S,I.errorMessages=E)},isDisabled:i,isReadonly:n,isValidating:r,items:a,validateOn:li(t,"validateOn")}),{errors:c,isDisabled:i,isReadonly:n,isValidating:r,items:a,validate:s,reset:p,resetValidation:_}}function Ax(){return qi(qB,null)}const ZB=gn({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Ix()},"validation");function YB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nh(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cl();const n=Pn(t,"modelValue"),r=Me(()=>t.validationValue===void 0?n.value:t.validationValue),a=Ax(),c=lt([]),s=lt(!0),p=Me(()=>!!(kc(n.value===""?null:n.value).length||kc(r.value===""?null:r.value).length)),_=Me(()=>!!(t.disabled||a!=null&&a.isDisabled.value)),b=Me(()=>!!(t.readonly||a!=null&&a.isReadonly.value)),S=Me(()=>t.errorMessages.length?kc(t.errorMessages).slice(0,Math.max(0,+t.maxErrors)):c.value),E=Me(()=>t.error||S.value.length?!1:t.rules.length&&s.value?null:!0),I=lt(!1),R=Me(()=>({[`${e}--error`]:E.value===!1,[`${e}--dirty`]:p.value,[`${e}--disabled`]:_.value,[`${e}--readonly`]:b.value})),V=Me(()=>t.name??Da(i));_y(()=>{a==null||a.register({id:V.value,validate:Z,reset:U,resetValidation:H})}),as(()=>{a==null||a.unregister(V.value)});const q=Me(()=>t.validateOn||(a==null?void 0:a.validateOn.value)||"input");Fn(()=>a==null?void 0:a.update(V.value,E.value,S.value)),jp(()=>q.value==="input",()=>{Fi(r,()=>{if(r.value!=null)Z();else if(t.focused){const ne=Fi(()=>t.focused,ie=>{ie||Z(),ne()})}})}),jp(()=>q.value==="blur",()=>{Fi(()=>t.focused,ne=>{ne||Z()})}),Fi(E,()=>{a==null||a.update(V.value,E.value,S.value)});function U(){H(),n.value=null}function H(){s.value=!0,c.value=[]}async function Z(){const ne=[];I.value=!0;for(const ie of t.rules){if(ne.length>=+(t.maxErrors??1))break;const pe=await(typeof ie=="function"?ie:()=>ie)(r.value);if(pe!==!0){if(typeof pe!="string"){console.warn(`${pe} is not a valid value. Rule functions must return boolean true or a string.`);continue}ne.push(pe)}}return c.value=ne,I.value=!1,s.value=!1,c.value}return{errorMessages:S,isDirty:p,isDisabled:_,isReadonly:b,isPristine:s,isValid:E,isValidating:I,reset:U,resetValidation:H,validate:Z,validationClasses:R}}const Hh=gn({id:String,appendIcon:On,prependIcon:On,hideDetails:[Boolean,String],messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":xh(),"onClick:append":xh(),...Yo(),...ZB()},"v-input"),Jd=yi()({name:"VInput",props:{...Hh()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:i,slots:n,emit:r}=e;const{densityClasses:a}=hl(t),{InputIcon:c}=GB(t),s=cl(),p=Me(()=>t.id||`input-${s}`),_=Me(()=>`${p.value}-messages`),{errorMessages:b,isDirty:S,isDisabled:E,isReadonly:I,isPristine:R,isValid:V,isValidating:q,reset:U,resetValidation:H,validate:Z,validationClasses:ne}=YB(t,"v-input",p),ie=Me(()=>({id:p,messagesId:_,isDirty:S,isDisabled:E,isReadonly:I,isPristine:R,isValid:V,isValidating:q,reset:U,resetValidation:H,validate:Z}));return Pi(()=>{var ge,we,Ie,Oe,ke;const oe=!!(n.prepend||t.prependIcon),pe=!!(n.append||t.appendIcon),de=!!((ge=t.messages)!=null&&ge.length||b.value.length),fe=!t.hideDetails||t.hideDetails==="auto"&&(de||!!n.details);return w("div",{class:["v-input",`v-input--${t.direction}`,a.value,ne.value]},[oe&&w("div",{key:"prepend",class:"v-input__prepend"},[(we=n.prepend)==null?void 0:we.call(n,ie.value),t.prependIcon&&w(c,{key:"prepend-icon",name:"prepend"},null)]),n.default&&w("div",{class:"v-input__control"},[(Ie=n.default)==null?void 0:Ie.call(n,ie.value)]),pe&&w("div",{key:"append",class:"v-input__append"},[t.appendIcon&&w(c,{key:"append-icon",name:"append"},null),(Oe=n.append)==null?void 0:Oe.call(n,ie.value)]),fe&&w("div",{class:"v-input__details"},[w(WB,{id:_.value,active:de,messages:b.value.length>0?b.value:t.messages},{message:n.message}),(ke=n.details)==null?void 0:ke.call(n,ie.value)])])}),{reset:U,resetValidation:H,validate:Z}}});function Gf(t){const e=Object.keys(Jd.props).filter(i=>!XD(i));return Kp(t,e)}const Mx=yi()({name:"VCounter",functional:!0,props:{active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...jh({transition:{component:Dk}})},setup(t,e){let{slots:i}=e;const n=Me(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return Pi(()=>w(Jc,{transition:t.transition},{default:()=>[Br(w("div",{class:"v-counter"},[i.default?i.default({counter:n.value,max:t.max,value:t.value}):n.value]),[[Qu,t.active]])]})),{}}});function gK(t,e){if(!xC)return;const i=e.modifiers||{},n=e.value,{handler:r,options:a}=typeof n=="object"?n:{handler:n,options:{}},c=new IntersectionObserver(function(){var S;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=arguments.length>1?arguments[1]:void 0;const _=(S=t._observe)==null?void 0:S[e.instance.$.uid];if(!_)return;const b=s.some(E=>E.isIntersecting);r&&(!i.quiet||_.init)&&(!i.once||b||_.init)&&r(b,s,p),b&&i.once?XB(t,e):_.init=!0},a);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:c},c.observe(t)}function XB(t,e){var n;const i=(n=t._observe)==null?void 0:n[e.instance.$.uid];i&&(i.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Oy={mounted:gK,unmounted:XB},UT=Symbol("Forwarded refs");function jT(t,e){let i=t;for(;i;){const n=Reflect.getOwnPropertyDescriptor(i,e);if(n)return n;i=Object.getPrototypeOf(i)}}function dd(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t[UT]=i,new Proxy(t,{get(r,a){if(Reflect.has(r,a))return Reflect.get(r,a);if(!(typeof a=="symbol"||a.startsWith("__"))){for(const c of i)if(c.value&&Reflect.has(c.value,a)){const s=Reflect.get(c.value,a);return typeof s=="function"?s.bind(c.value):s}}},has(r,a){if(Reflect.has(r,a))return!0;if(typeof a=="symbol"||a.startsWith("__"))return!1;for(const c of i)if(c.value&&Reflect.has(c.value,a))return!0;return!1},getOwnPropertyDescriptor(r,a){var s;const c=Reflect.getOwnPropertyDescriptor(r,a);if(c)return c;if(!(typeof a=="symbol"||a.startsWith("__"))){for(const p of i){if(!p.value)continue;const _=jT(p.value,a)??("_"in p.value?jT((s=p.value._)==null?void 0:s.setupState,a):void 0);if(_)return _}for(const p of i){const _=p.value&&p.value[UT];if(!_)continue;const b=_.slice();for(;b.length;){const S=b.shift(),E=jT(S.value,a);if(E)return E;const I=S.value&&S.value[UT];I&&b.push(...I)}}}}})}const _K=["color","file","time","date","datetime-local","week","month"],Ox=gn({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...Hh(),...Px()},"v-text-field"),Wp=yi()({name:"VTextField",directives:{Intersect:Oy},inheritAttrs:!1,props:Ox(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const a=Pn(t,"modelValue"),{isFocused:c,focus:s,blur:p}=nm(t),_=Me(()=>typeof t.counterValue=="function"?t.counterValue(a.value):(a.value??"").toString().length),b=Me(()=>{if(i.maxlength)return i.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function S(oe,pe){var de,fe;!t.autofocus||!oe||(fe=(de=pe[0].target)==null?void 0:de.focus)==null||fe.call(de)}const E=lt(),I=lt(),R=lt(),V=Me(()=>_K.includes(t.type)||t.persistentPlaceholder||c.value),q=Me(()=>t.messages.length?t.messages:c.value||t.persistentHint?t.hint:"");function U(){var oe;R.value!==document.activeElement&&((oe=R.value)==null||oe.focus()),c.value||s()}function H(oe){n("mousedown:control",oe),oe.target!==R.value&&(U(),oe.preventDefault())}function Z(oe){U(),n("click:control",oe)}function ne(oe){oe.stopPropagation(),U(),Cn(()=>{a.value=null,j1(t["onClick:clear"],oe)})}function ie(oe){var de;const pe=oe.target;if(a.value=pe.value,(de=t.modelModifiers)!=null&&de.trim&&["text","search","password","tel","url"].includes(t.type)){const fe=[pe.selectionStart,pe.selectionEnd];Cn(()=>{pe.selectionStart=fe[0],pe.selectionEnd=fe[1]})}}return Pi(()=>{const oe=!!(r.counter||t.counter||t.counterValue),pe=!!(oe||r.details),[de,fe]=Qp(i),[{modelValue:ge,...we}]=Gf(t),[Ie]=Bk(t);return w(Jd,Mi({ref:E,modelValue:a.value,"onUpdate:modelValue":Oe=>a.value=Oe,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)}],"onClick:prepend":t["onClick:prepend"],"onClick:append":t["onClick:append"]},de,we,{focused:c.value,messages:q.value}),{...r,default:Oe=>{let{id:ke,isDisabled:Ee,isDirty:Qe,isReadonly:gt,isValid:nt}=Oe;return w(My,Mi({ref:I,onMousedown:H,onClick:Z,"onClick:clear":ne,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:"textbox"},Ie,{id:ke.value,active:V.value||Qe.value,dirty:Qe.value||t.dirty,disabled:Ee.value,focused:c.value,error:nt.value===!1}),{...r,default:ft=>{let{props:{class:Tt,...pt}}=ft;const et=Br(w("input",Mi({ref:R,value:a.value,onInput:ie,autofocus:t.autofocus,readonly:gt.value,disabled:Ee.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:U,onBlur:p},pt,fe),null),[[Ba("intersect"),{handler:S},null,{once:!0}]]);return w(Oi,null,[t.prefix&&w("span",{class:"v-text-field__prefix"},[t.prefix]),r.default?w("div",{class:Tt,"data-no-activator":""},[r.default(),et]):nd(et,{class:Tt}),t.suffix&&w("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:pe?Oe=>{var ke;return w(Oi,null,[(ke=r.details)==null?void 0:ke.call(r,Oe),oe&&w(Oi,null,[w("span",null,null),w(Mx,{active:t.persistentCounter||c.value,value:_.value,max:b.value},r.counter)])])}:void 0})}),dd({},E,I,R)}});const KB=Symbol.for("vuetify:selection-control-group"),Fk=gn({color:String,disabled:Boolean,error:Boolean,id:String,inline:Boolean,falseIcon:On,trueIcon:On,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:Xp},...vr(),...Yo()},"v-selection-control-group"),QB=yi()({name:"VSelectionControlGroup",props:{defaultsTarget:{type:String,default:"VSelectionControl"},...Fk()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),r=cl(),a=Me(()=>t.id||`v-selection-control-group-${r}`),c=Me(()=>t.name||a.value),s=new Set;return Mn(KB,{modelValue:n,forceUpdate:()=>{s.forEach(p=>p())},onForceUpdate:p=>{s.add(p),bu(()=>{s.delete(p)})}}),co({[t.defaultsTarget]:{color:li(t,"color"),disabled:li(t,"disabled"),density:li(t,"density"),error:li(t,"error"),inline:li(t,"inline"),modelValue:n,multiple:Me(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),name:c,falseIcon:li(t,"falseIcon"),trueIcon:li(t,"trueIcon"),readonly:li(t,"readonly"),ripple:li(t,"ripple"),type:li(t,"type"),valueComparator:li(t,"valueComparator")}}),Pi(()=>{var p;return w("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline}],role:t.type==="radio"?"radiogroup":void 0},[(p=i.default)==null?void 0:p.call(i)])}),{}}}),Lx=gn({label:String,trueValue:null,falseValue:null,value:null,...Fk()},"v-selection-control");function vK(t){const e=qi(KB,void 0),{densityClasses:i}=hl(t),n=Pn(t,"modelValue"),r=Me(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),a=Me(()=>t.falseValue!==void 0?t.falseValue:!1),c=Me(()=>!!t.multiple||t.multiple==null&&Array.isArray(n.value)),s=Me({get(){const S=e?e.modelValue.value:n.value;return c.value?S.some(E=>t.valueComparator(E,r.value)):t.valueComparator(S,r.value)},set(S){if(t.readonly)return;const E=S?r.value:a.value;let I=E;c.value&&(I=S?[...kc(n.value),E]:kc(n.value).filter(R=>!t.valueComparator(R,r.value))),e?e.modelValue.value=I:n.value=I}}),{textColorClasses:p,textColorStyles:_}=Ul(Me(()=>s.value&&!t.error&&!t.disabled?t.color:void 0)),b=Me(()=>s.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:i,trueValue:r,falseValue:a,model:s,textColorClasses:p,textColorStyles:_,icon:b}}const Ag=yi()({name:"VSelectionControl",directives:{Ripple:Uf},inheritAttrs:!1,props:Lx(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:i,slots:n}=e;const{group:r,densityClasses:a,icon:c,model:s,textColorClasses:p,textColorStyles:_,trueValue:b}=vK(t),S=cl(),E=Me(()=>t.id||`input-${S}`),I=lt(!1),R=lt(!1),V=lt();r==null||r.onForceUpdate(()=>{V.value&&(V.value.checked=s.value)});function q(Z){I.value=!0,(!I2||I2&&Z.target.matches(":focus-visible"))&&(R.value=!0)}function U(){I.value=!1,R.value=!1}function H(Z){t.readonly&&r&&Cn(()=>r.forceUpdate()),s.value=Z.target.checked}return Pi(()=>{var oe,pe;const Z=n.label?n.label({label:t.label,props:{for:E.value}}):t.label,[ne,ie]=Qp(i);return w("div",Mi({class:["v-selection-control",{"v-selection-control--dirty":s.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":I.value,"v-selection-control--focus-visible":R.value,"v-selection-control--inline":t.inline},a.value]},ne),[w("div",{class:["v-selection-control__wrapper",p.value],style:_.value},[(oe=n.default)==null?void 0:oe.call(n),Br(w("div",{class:["v-selection-control__input"]},[c.value&&w(lo,{key:"icon",icon:c.value},null),w("input",Mi({ref:V,checked:s.value,disabled:t.disabled,id:E.value,onBlur:U,onFocus:q,onInput:H,"aria-disabled":t.readonly,type:t.type,value:b.value,name:t.name,"aria-checked":t.type==="checkbox"?s.value:void 0},ie),null),(pe=n.input)==null?void 0:pe.call(n,{model:s,textColorClasses:p,textColorStyles:_,props:{onFocus:q,onBlur:U,id:E.value}})]),[[Ba("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),Z&&w(t_,{for:E.value,clickable:!0},{default:()=>[Z]})])}),{isFocused:I,input:V}}}),JB=gn({indeterminate:Boolean,indeterminateIcon:{type:On,default:"$checkboxIndeterminate"},...Lx({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"v-checkbox-btn"),Dh=yi()({name:"VCheckboxBtn",props:JB(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"indeterminate"),r=Pn(t,"modelValue");function a(p){n.value&&(n.value=!1)}const c=Me(()=>t.indeterminate?t.indeterminateIcon:t.falseIcon),s=Me(()=>t.indeterminate?t.indeterminateIcon:t.trueIcon);return Pi(()=>w(Ag,Mi(t,{modelValue:r.value,"onUpdate:modelValue":[p=>r.value=p,a],class:"v-checkbox-btn",type:"checkbox",inline:!0,falseIcon:c.value,trueIcon:s.value,"aria-checked":t.indeterminate?"mixed":void 0}),i)),{}}}),yK=yi()({name:"VCheckbox",inheritAttrs:!1,props:{...Hh(),...Qd(JB(),["inline"])},emits:{"update:focused":t=>!0},setup(t,e){let{attrs:i,slots:n}=e;const{isFocused:r,focus:a,blur:c}=nm(t),s=cl(),p=Me(()=>t.id||`checkbox-${s}`);return Pi(()=>{const[_,b]=Qp(i),[S,E]=Gf(t),[I,R]=Dh.filterProps(t);return w(Jd,Mi({class:"v-checkbox"},_,S,{id:p.value,focused:r.value}),{...n,default:V=>{let{id:q,messagesId:U,isDisabled:H,isReadonly:Z}=V;return w(Dh,Mi(I,{id:q.value,"aria-describedby":U.value,disabled:H.value,readonly:Z.value},b,{onFocus:a,onBlur:c}),n)}})}),{}}});function bK(t){return{aspectStyles:Me(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const e8=yi()({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...ud()},setup(t,e){let{slots:i}=e;const{aspectStyles:n}=bK(t),{dimensionStyles:r}=cd(t);return Pi(()=>{var a;return w("div",{class:"v-responsive",style:r.value},[w("div",{class:"v-responsive__sizer",style:n.value},null),(a=i.additional)==null?void 0:a.call(i),i.default&&w("div",{class:["v-responsive__content",t.contentClass]},[i.default()])])}),{}}}),i_=yi()({name:"VImg",directives:{intersect:Oy},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...jh()},emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:i,slots:n}=e;const r=lt(""),a=lt(),c=lt(t.eager?"loading":"idle"),s=lt(),p=lt(),_=Me(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),b=Me(()=>_.value.aspect||s.value/p.value||0);Fi(()=>t.src,()=>{S(c.value!=="idle")}),Fi(b,(de,fe)=>{!de&&fe&&a.value&&q(a.value)}),_y(()=>S());function S(de){if(!(t.eager&&de)&&!(xC&&!de&&!t.eager)){if(c.value="loading",_.value.lazySrc){const fe=new Image;fe.src=_.value.lazySrc,q(fe,null)}_.value.src&&Cn(()=>{var fe,ge;if(i("loadstart",((fe=a.value)==null?void 0:fe.currentSrc)||_.value.src),(ge=a.value)!=null&&ge.complete){if(a.value.naturalWidth||I(),c.value==="error")return;b.value||q(a.value,null),E()}else b.value||q(a.value),R()})}}function E(){var de;R(),c.value="loaded",i("load",((de=a.value)==null?void 0:de.currentSrc)||_.value.src)}function I(){var de;c.value="error",i("error",((de=a.value)==null?void 0:de.currentSrc)||_.value.src)}function R(){const de=a.value;de&&(r.value=de.currentSrc||de.src)}let V=-1;function q(de){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ge=()=>{clearTimeout(V);const{naturalHeight:we,naturalWidth:Ie}=de;we||Ie?(s.value=Ie,p.value=we):!de.complete&&c.value==="loading"&&fe!=null?V=window.setTimeout(ge,fe):(de.currentSrc.endsWith(".svg")||de.currentSrc.startsWith("data:image/svg+xml"))&&(s.value=1,p.value=1)};ge()}const U=Me(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),H=()=>{var ge;if(!_.value.src||c.value==="idle")return null;const de=w("img",{class:["v-img__img",U.value],src:_.value.src,srcset:_.value.srcset,alt:t.alt,sizes:t.sizes,ref:a,onLoad:E,onError:I},null),fe=(ge=n.sources)==null?void 0:ge.call(n);return w(Jc,{transition:t.transition,appear:!0},{default:()=>[Br(fe?w("picture",{class:"v-img__picture"},[fe,de]):de,[[Qu,c.value==="loaded"]])]})},Z=()=>w(Jc,{transition:t.transition},{default:()=>[_.value.lazySrc&&c.value!=="loaded"&&w("img",{class:["v-img__img","v-img__img--preload",U.value],src:_.value.lazySrc,alt:t.alt},null)]}),ne=()=>n.placeholder?w(Jc,{transition:t.transition,appear:!0},{default:()=>[(c.value==="loading"||c.value==="error"&&!n.error)&&w("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,ie=()=>n.error?w(Jc,{transition:t.transition,appear:!0},{default:()=>[c.value==="error"&&w("div",{class:"v-img__error"},[n.error()])]}):null,oe=()=>t.gradient?w("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,pe=lt(!1);{const de=Fi(b,fe=>{fe&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{pe.value=!0})}),de())})}return Pi(()=>Br(w(e8,{class:["v-img",{"v-img--booting":!pe.value}],style:{width:Xi(t.width==="auto"?s.value:t.width)},aspectRatio:b.value,"aria-label":t.alt,role:t.alt?"img":void 0},{additional:()=>w(Oi,null,[w(H,null,null),w(Z,null,null),w(oe,null,null),w(ne,null,null),w(ie,null,null)]),default:n.default}),[[Ba("intersect"),{handler:S,options:t.options},null,{once:!0}]])),{currentSrc:r,image:a,state:c,naturalWidth:s,naturalHeight:p}}}),xK=gn({start:Boolean,end:Boolean,icon:On,image:String,...Yo(),...zs(),...Uh(),...Zn(),...vr(),...Oc({variant:"flat"})},"v-avatar"),Rf=yi()({name:"VAvatar",props:xK(),setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{colorClasses:r,colorStyles:a,variantClasses:c}=tm(t),{densityClasses:s}=hl(t),{roundedClasses:p}=fo(t),{sizeClasses:_,sizeStyles:b}=Qg(t);return Pi(()=>w(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},n.value,r.value,s.value,p.value,_.value,c.value],style:[a.value,b.value]},{default:()=>{var S;return[t.image?w(i_,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?w(lo,{key:"icon",icon:t.icon},null):(S=i.default)==null?void 0:S.call(i),em(!1,"v-avatar")]}})),{}}});const t8=Symbol.for("vuetify:v-chip-group"),wK=yi()({name:"VChipGroup",props:{column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Xp},...Yg({selectedClass:"v-chip--selected"}),...Zn(),...vr(),...Oc({variant:"tonal"})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{isSelected:r,select:a,next:c,prev:s,selected:p}=im(t,t8);return co({VChip:{color:li(t,"color"),disabled:li(t,"disabled"),filter:li(t,"filter"),variant:li(t,"variant")}}),Pi(()=>w(t.tag,{class:["v-chip-group",{"v-chip-group--column":t.column},n.value]},{default:()=>{var _;return[(_=i.default)==null?void 0:_.call(i,{isSelected:r,select:a,next:c,prev:s,selected:p.value})]}})),{}}}),Ly=yi()({name:"VChip",directives:{Ripple:Uf},props:{activeClass:String,appendAvatar:String,appendIcon:On,closable:Boolean,closeIcon:{type:On,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:On,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:xh(),onClickOnce:xh(),...Ju(),...Yo(),...Xo(),...Xg(),...zs(),...Ay(),...Uh(),...Zn({tag:"span"}),...vr(),...Oc({variant:"tonal"})},emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const{t:a}=Tu(),{borderClasses:c}=Mc(t),{colorClasses:s,colorStyles:p,variantClasses:_}=tm(t),{densityClasses:b}=hl(t),{elevationClasses:S}=$a(t),{roundedClasses:E}=fo(t),{sizeClasses:I}=Qg(t),{themeClasses:R}=Vr(t),V=Pn(t,"modelValue"),q=Kg(t,t8,!1),U=Py(t,i),H=Me(()=>t.link!==!1&&U.isLink.value),Z=Me(()=>!t.disabled&&t.link!==!1&&(!!q||t.link||U.isClickable.value)),ne=Me(()=>({"aria-label":a(t.closeLabel),onClick(pe){V.value=!1,n("click:close",pe)}}));function ie(pe){var de;n("click",pe),Z.value&&((de=U.navigate)==null||de.call(U,pe),q==null||q.toggle())}function oe(pe){(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),ie(pe))}return()=>{const pe=U.isLink.value?"a":t.tag,de=!!(t.appendIcon||t.appendAvatar),fe=!!(de||r.append),ge=!!(r.close||t.closable),we=!!(r.filter||t.filter)&&q,Ie=!!(t.prependIcon||t.prependAvatar),Oe=!!(Ie||r.prepend),ke=!q||q.isSelected.value;return V.value&&Br(w(pe,{class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":Z.value,"v-chip--filter":we,"v-chip--pill":t.pill},R.value,c.value,ke?s.value:void 0,b.value,S.value,E.value,I.value,_.value,q==null?void 0:q.selectedClass.value],style:[ke?p.value:void 0],disabled:t.disabled||void 0,draggable:t.draggable,href:U.href.value,tabindex:Z.value?0:void 0,onClick:ie,onKeydown:Z.value&&!H.value&&oe},{default:()=>{var Ee;return[em(Z.value,"v-chip"),we&&w(Rk,{key:"filter"},{default:()=>[Br(w("div",{class:"v-chip__filter"},[r.filter?Br(w(es,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},null),[[Ba("slot"),r.filter,"default"]]):w(lo,{key:"filter-icon",icon:t.filterIcon},null)]),[[Qu,q.isSelected.value]])]}),Oe&&w("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?w(es,{key:"prepend-defaults",disabled:!Ie,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},r.prepend):w(Oi,null,[t.prependIcon&&w(lo,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&w(Rf,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),((Ee=r.default)==null?void 0:Ee.call(r,{isSelected:q==null?void 0:q.isSelected.value,selectedClass:q==null?void 0:q.selectedClass.value,select:q==null?void 0:q.select,toggle:q==null?void 0:q.toggle,value:q==null?void 0:q.value.value,disabled:t.disabled}))??t.text,fe&&w("div",{key:"append",class:"v-chip__append"},[r.append?w(es,{key:"append-defaults",disabled:!de,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},r.append):w(Oi,null,[t.appendIcon&&w(lo,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&w(Rf,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),ge&&w("div",Mi({key:"close",class:"v-chip__close"},ne.value),[r.close?w(es,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},r.close):w(lo,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[Ba("ripple"),Z.value&&t.ripple,null]])}}});const i8=yi()({name:"VDivider",props:{color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...vr()},setup(t,e){let{attrs:i}=e;const{themeClasses:n}=Vr(t),{textColorClasses:r,textColorStyles:a}=Ul(li(t,"color")),c=Me(()=>{const s={};return t.length&&(s[t.vertical?"maxHeight":"maxWidth"]=Xi(t.length)),t.thickness&&(s[t.vertical?"borderRightWidth":"borderTopWidth"]=Xi(t.thickness)),s});return Pi(()=>w("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},n.value,r.value],style:[c.value,a.value],"aria-orientation":!i.role||i.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${i.role||"separator"}`},null)),{}}}),dS=Symbol.for("vuetify:list");function n8(){const t=qi(dS,{hasPrepend:lt(!1),updateHasPrepend:()=>null}),e={hasPrepend:lt(!1),updateHasPrepend:i=>{i&&(e.hasPrepend.value=i)}};return Mn(dS,e),t}function r8(){return qi(dS,null)}const TK={open:t=>{let{id:e,value:i,opened:n,parents:r}=t;if(i){const a=new Set;a.add(e);let c=r.get(e);for(;c!=null;)a.add(c),c=r.get(c);return a}else return n.delete(e),n},select:()=>null},s8={open:t=>{let{id:e,value:i,opened:n,parents:r}=t;if(i){let a=r.get(e);for(n.add(e);a!=null&&a!==e;)n.add(a),a=r.get(a);return n}else n.delete(e);return n},select:()=>null},SK={open:s8.open,select:t=>{let{id:e,value:i,opened:n,parents:r}=t;if(!i)return n;const a=[];let c=r.get(e);for(;c!=null;)a.push(c),c=r.get(c);return new Set(a)}},$k=t=>{const e={select:i=>{let{id:n,value:r,selected:a}=i;if(n=Wn(n),t&&!r){const c=Array.from(a.entries()).reduce((s,p)=>{let[_,b]=p;return b==="on"?[...s,_]:s},[]);if(c.length===1&&c[0]===n)return a}return a.set(n,r?"on":"off"),a},in:(i,n,r)=>{let a=new Map;for(const c of i||[])a=e.select({id:c,value:!0,selected:new Map(a),children:n,parents:r});return a},out:i=>{const n=[];for(const[r,a]of i.entries())a==="on"&&n.push(r);return n}};return e},o8=t=>{const e=$k(t);return{select:n=>{let{selected:r,id:a,...c}=n;a=Wn(a);const s=r.has(a)?new Map([[a,r.get(a)]]):new Map;return e.select({...c,id:a,selected:s})},in:(n,r,a)=>{let c=new Map;return n!=null&&n.length&&(c=e.in(n.slice(0,1),r,a)),c},out:(n,r,a)=>e.out(n,r,a)}},CK=t=>{const e=$k(t);return{select:n=>{let{id:r,selected:a,children:c,...s}=n;return r=Wn(r),c.has(r)?a:e.select({id:r,selected:a,children:c,...s})},in:e.in,out:e.out}},kK=t=>{const e=o8(t);return{select:n=>{let{id:r,selected:a,children:c,...s}=n;return r=Wn(r),c.has(r)?a:e.select({id:r,selected:a,children:c,...s})},in:e.in,out:e.out}},EK=t=>{const e={select:i=>{let{id:n,value:r,selected:a,children:c,parents:s}=i;n=Wn(n);const p=new Map(a),_=[n];for(;_.length;){const S=_.shift();a.set(S,r?"on":"off"),c.has(S)&&_.push(...c.get(S))}let b=s.get(n);for(;b;){const S=c.get(b),E=S.every(R=>a.get(R)==="on"),I=S.every(R=>!a.has(R)||a.get(R)==="off");a.set(b,E?"on":I?"off":"indeterminate"),b=s.get(b)}return t&&!r&&Array.from(a.entries()).reduce((E,I)=>{let[R,V]=I;return V==="on"?[...E,R]:E},[]).length===0?p:a},in:(i,n,r)=>{let a=new Map;for(const c of i||[])a=e.select({id:c,value:!0,selected:new Map(a),children:n,parents:r});return a},out:(i,n)=>{const r=[];for(const[a,c]of i.entries())c==="on"&&!n.has(a)&&r.push(a);return r}};return e},oy=Symbol.for("vuetify:nested"),a8={id:lt(),root:{register:()=>null,unregister:()=>null,parents:lt(new Map),children:lt(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:lt(new Set),selected:lt(new Map),selectedValues:lt([])}},IK=gn({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),PK=t=>{let e=!1;const i=lt(new Map),n=lt(new Map),r=Pn(t,"opened",t.opened,S=>new Set(S),S=>[...S.values()]),a=Me(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return kK(t.mandatory);case"leaf":return CK(t.mandatory);case"independent":return $k(t.mandatory);case"single-independent":return o8(t.mandatory);case"classic":default:return EK(t.mandatory)}}),c=Me(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return SK;case"single":return TK;case"multiple":default:return s8}}),s=Pn(t,"selected",t.selected,S=>a.value.in(S,i.value,n.value),S=>a.value.out(S,i.value,n.value));as(()=>{e=!0});function p(S){const E=[];let I=S;for(;I!=null;)E.unshift(I),I=n.value.get(I);return E}const _=Fa("nested"),b={id:lt(),root:{opened:r,selected:s,selectedValues:Me(()=>{const S=[];for(const[E,I]of s.value.entries())I==="on"&&S.push(E);return S}),register:(S,E,I)=>{E&&S!==E&&n.value.set(S,E),I&&i.value.set(S,[]),E!=null&&i.value.set(E,[...i.value.get(E)||[],S])},unregister:S=>{if(e)return;i.value.delete(S);const E=n.value.get(S);if(E){const I=i.value.get(E)??[];i.value.set(E,I.filter(R=>R!==S))}n.value.delete(S),r.value.delete(S)},open:(S,E,I)=>{_.emit("click:open",{id:S,value:E,path:p(S),event:I});const R=c.value.open({id:S,value:E,opened:new Set(r.value),children:i.value,parents:n.value,event:I});R&&(r.value=R)},openOnSelect:(S,E,I)=>{const R=c.value.select({id:S,value:E,selected:new Map(s.value),opened:new Set(r.value),children:i.value,parents:n.value,event:I});R&&(r.value=R)},select:(S,E,I)=>{_.emit("click:select",{id:S,value:E,path:p(S),event:I});const R=a.value.select({id:S,value:E,selected:new Map(s.value),children:i.value,parents:n.value,event:I});R&&(s.value=R),b.root.openOnSelect(S,E,I)},children:i,parents:n}};return Mn(oy,b),b.root},l8=(t,e)=>{const i=qi(oy,a8),n=Symbol(cl()),r=Me(()=>t.value??n),a={...i,id:r,open:(c,s)=>i.root.open(r.value,c,s),openOnSelect:(c,s)=>i.root.openOnSelect(r.value,c,s),isOpen:Me(()=>i.root.opened.value.has(r.value)),parent:Me(()=>i.root.parents.value.get(r.value)),select:(c,s)=>i.root.select(r.value,c,s),isSelected:Me(()=>i.root.selected.value.get(Wn(r.value))==="on"),isIndeterminate:Me(()=>i.root.selected.value.get(r.value)==="indeterminate"),isLeaf:Me(()=>!i.root.children.value.get(r.value)),isGroupActivator:i.isGroupActivator};return!i.isGroupActivator&&i.root.register(r.value,i.id.value,e),as(()=>{!i.isGroupActivator&&i.root.unregister(r.value)}),e&&Mn(oy,a),a},AK=()=>{const t=qi(oy,a8);Mn(oy,{...t,isGroupActivator:!0})};function rm(){const t=lt(!1);return Fn(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:Me(()=>t.value?void 0:{transition:"none !important"}),isBooted:Zp(t)}}const MK=wu({name:"VListGroupActivator",setup(t,e){let{slots:i}=e;return AK(),()=>{var n;return(n=i.default)==null?void 0:n.call(i)}}}),OK=gn({activeColor:String,color:String,collapseIcon:{type:On,default:"$collapse"},expandIcon:{type:On,default:"$expand"},prependIcon:On,appendIcon:On,fluid:Boolean,subgroup:Boolean,value:null,...Zn()},"v-list-group"),hS=yi()({name:"VListGroup",props:{title:String,...OK()},setup(t,e){let{slots:i}=e;const{isOpen:n,open:r,id:a}=l8(li(t,"value"),!0),c=Me(()=>`v-list-group--id-${String(a.value)}`),s=r8(),{isBooted:p}=rm();function _(I){r(!n.value,I)}const b=Me(()=>({onClick:_,class:"v-list-group__header",id:c.value})),S=Me(()=>n.value?t.collapseIcon:t.expandIcon),E=Me(()=>({VListItem:{active:n.value,activeColor:t.activeColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&S.value,appendIcon:t.appendIcon||!t.subgroup&&S.value,title:t.title,value:t.value}}));return Pi(()=>w(t.tag,{class:["v-list-group",{"v-list-group--prepend":s==null?void 0:s.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":n.value}]},{default:()=>[i.activator&&w(es,{defaults:E.value},{default:()=>[w(MK,null,{default:()=>[i.activator({props:b.value,isOpen:n.value})]})]}),w(Jc,{transition:{component:Ex},disabled:!p.value},{default:()=>{var I;return[Br(w("div",{class:"v-list-group__items",role:"group","aria-labelledby":c.value},[(I=i.default)==null?void 0:I.call(i)]),[[Qu,n.value]])]}})]})),{}}});const u8=od("v-list-item-subtitle"),c8=od("v-list-item-title"),Rh=yi()({name:"VListItem",directives:{Ripple:Uf},props:{active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:On,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:On,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:xh(),onClickOnce:xh(),...Ju(),...Yo(),...ud(),...Xo(),...zs(),...Ay(),...Zn(),...vr(),...Oc({variant:"text"})},emits:{click:t=>!0},setup(t,e){let{attrs:i,slots:n,emit:r}=e;const a=Py(t,i),c=Me(()=>t.value??a.href.value),{select:s,isSelected:p,isIndeterminate:_,isGroupActivator:b,root:S,parent:E,openOnSelect:I}=l8(c,!1),R=r8(),V=Me(()=>{var gt;return t.active!==!1&&(t.active||((gt=a.isActive)==null?void 0:gt.value)||p.value)}),q=Me(()=>t.link!==!1&&a.isLink.value),U=Me(()=>!t.disabled&&t.link!==!1&&(t.link||a.isClickable.value||t.value!=null&&!!R)),H=Me(()=>t.rounded||t.nav),Z=Me(()=>({color:V.value?t.activeColor??t.color:t.color,variant:t.variant}));Fi(()=>{var gt;return(gt=a.isActive)==null?void 0:gt.value},gt=>{gt&&E.value!=null&&S.open(E.value,!0),gt&&I(gt)},{immediate:!0});const{themeClasses:ne}=Vr(t),{borderClasses:ie}=Mc(t),{colorClasses:oe,colorStyles:pe,variantClasses:de}=tm(Z),{densityClasses:fe}=hl(t),{dimensionStyles:ge}=cd(t),{elevationClasses:we}=$a(t),{roundedClasses:Ie}=fo(H),Oe=Me(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),ke=Me(()=>({isActive:V.value,select:s,isSelected:p.value,isIndeterminate:_.value}));function Ee(gt){var nt;r("click",gt),!(b||!U.value)&&((nt=a.navigate)==null||nt.call(a,gt),t.value!=null&&s(!p.value,gt))}function Qe(gt){(gt.key==="Enter"||gt.key===" ")&&(gt.preventDefault(),Ee(gt))}return Pi(()=>{const gt=q.value?"a":t.tag,nt=!R||p.value||V.value,ft=n.title||t.title,Tt=n.subtitle||t.subtitle,pt=!!(t.appendAvatar||t.appendIcon),et=!!(pt||n.append),Mt=!!(t.prependAvatar||t.prependIcon),Qt=!!(Mt||n.prepend);return R==null||R.updateHasPrepend(Qt),Br(w(gt,{class:["v-list-item",{"v-list-item--active":V.value,"v-list-item--disabled":t.disabled,"v-list-item--link":U.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!Qt&&(R==null?void 0:R.hasPrepend.value),[`${t.activeClass}`]:t.activeClass&&V.value},ne.value,ie.value,nt?oe.value:void 0,fe.value,we.value,Oe.value,Ie.value,de.value],style:[nt?pe.value:void 0,ge.value],href:a.href.value,tabindex:U.value?0:void 0,onClick:Ee,onKeydown:U.value&&!q.value&&Qe},{default:()=>{var Fe;return[em(U.value||V.value,"v-list-item"),Qt&&w("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?w(es,{key:"prepend-defaults",disabled:!Mt,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var tt;return[(tt=n.prepend)==null?void 0:tt.call(n,ke.value)]}}):w(Oi,null,[t.prependAvatar&&w(Rf,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&w(lo,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),w("div",{class:"v-list-item__content","data-no-activator":""},[ft&&w(c8,{key:"title"},{default:()=>{var tt;return[((tt=n.title)==null?void 0:tt.call(n,{title:t.title}))??t.title]}}),Tt&&w(u8,{key:"subtitle"},{default:()=>{var tt;return[((tt=n.subtitle)==null?void 0:tt.call(n,{subtitle:t.subtitle}))??t.subtitle]}}),(Fe=n.default)==null?void 0:Fe.call(n,ke.value)]),et&&w("div",{key:"append",class:"v-list-item__append"},[n.append?w(es,{key:"append-defaults",disabled:!pt,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var tt;return[(tt=n.append)==null?void 0:tt.call(n,ke.value)]}}):w(Oi,null,[t.appendIcon&&w(lo,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&w(Rf,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])]}}),[[Ba("ripple"),U.value&&t.ripple]])}),{}}}),d8=yi()({name:"VListSubheader",props:{color:String,inset:Boolean,sticky:Boolean,title:String,...Zn()},setup(t,e){let{slots:i}=e;const{textColorClasses:n,textColorStyles:r}=Ul(li(t,"color"));return Pi(()=>{const a=!!(i.default||t.title);return w(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},n.value],style:{textColorStyles:r}},{default:()=>{var c;return[a&&w("div",{class:"v-list-subheader__text"},[((c=i.default)==null?void 0:c.call(i))??t.title])]}})}),{}}}),h8=yi()({name:"VListChildren",props:{items:Array},setup(t,e){let{slots:i}=e;return n8(),()=>{var n,r;return((n=i.default)==null?void 0:n.call(i))??((r=t.items)==null?void 0:r.map(a=>{var I,R;let{children:c,props:s,type:p,raw:_}=a;if(p==="divider")return((I=i.divider)==null?void 0:I.call(i,{props:s}))??w(i8,s,null);if(p==="subheader")return((R=i.subheader)==null?void 0:R.call(i,{props:s}))??w(d8,s,{default:i.subheader});const b={subtitle:i.subtitle?V=>{var q;return(q=i.subtitle)==null?void 0:q.call(i,{...V,item:_})}:void 0,prepend:i.prepend?V=>{var q;return(q=i.prepend)==null?void 0:q.call(i,{...V,item:_})}:void 0,append:i.append?V=>{var q;return(q=i.append)==null?void 0:q.call(i,{...V,item:_})}:void 0,default:i.default?V=>{var q;return(q=i.default)==null?void 0:q.call(i,{...V,item:_})}:void 0,title:i.title?V=>{var q;return(q=i.title)==null?void 0:q.call(i,{...V,item:_})}:void 0},[S,E]=hS.filterProps(s);return c?w(hS,Mi({value:s==null?void 0:s.value},S),{activator:V=>{let{props:q}=V;return i.header?i.header({props:{...s,...q}}):w(Rh,Mi(s,q),b)},default:()=>w(h8,{items:c},i)}):i.item?i.item(s):w(Rh,s,b)}))}}}),Nk=gn({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function Xm(t,e){const i=Cc(e,t.itemTitle,e),n=t.returnObject?e:Cc(e,t.itemValue,i),r=Cc(e,t.itemChildren),a=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?Kp(e,["children"])[1]:e:void 0:Cc(e,t.itemProps),c={title:i,value:n,...a};return{title:String(c.title??""),value:c.value,props:c,children:Array.isArray(r)?f8(t,r):void 0,raw:e}}function f8(t,e){const i=[];for(const n of e)i.push(Xm(t,n));return i}function Dx(t){const e=Me(()=>f8(t,t.items));function i(r){return r.map(a=>Xm(t,a))}function n(r){return r.map(a=>{let{props:c}=a;return c.value})}return{items:e,transformIn:i,transformOut:n}}function LK(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function DK(t,e){const i=Cc(e,t.itemType,"item"),n=LK(e)?e:Cc(e,t.itemTitle),r=Cc(e,t.itemValue,void 0),a=Cc(e,t.itemChildren),c=t.itemProps===!0?Kp(e,["children"])[1]:Cc(e,t.itemProps),s={title:n,value:r,...c};return{type:i,title:s.title,value:s.value,props:s,children:i==="item"&&a?p8(t,a):void 0,raw:e}}function p8(t,e){const i=[];for(const n of e)i.push(DK(t,n));return i}function RK(t){return{items:Me(()=>p8(t,t.items))}}const Rx=yi()({name:"VList",props:{activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...IK({selectStrategy:"single-leaf",openStrategy:"list"}),...Ju(),...Yo(),...ud(),...Xo(),itemType:{type:String,default:"type"},...Nk(),...zs(),...Zn(),...vr(),...Oc({variant:"text"})},emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:i}=e;const{items:n}=RK(t),{themeClasses:r}=Vr(t),{backgroundColorClasses:a,backgroundColorStyles:c}=ho(li(t,"bgColor")),{borderClasses:s}=Mc(t),{densityClasses:p}=hl(t),{dimensionStyles:_}=cd(t),{elevationClasses:b}=$a(t),{roundedClasses:S}=fo(t),{open:E,select:I}=PK(t),R=Me(()=>t.lines?`v-list--${t.lines}-line`:void 0),V=li(t,"activeColor"),q=li(t,"color");n8(),co({VListGroup:{activeColor:V,color:q},VListItem:{activeClass:li(t,"activeClass"),activeColor:V,color:q,density:li(t,"density"),disabled:li(t,"disabled"),lines:li(t,"lines"),nav:li(t,"nav"),variant:li(t,"variant")}});const U=lt(!1),H=lt();function Z(de){U.value=!0}function ne(de){U.value=!1}function ie(de){var fe;!U.value&&!(de.relatedTarget&&((fe=H.value)!=null&&fe.contains(de.relatedTarget)))&&pe()}function oe(de){if(H.value){if(de.key==="ArrowDown")pe("next");else if(de.key==="ArrowUp")pe("prev");else if(de.key==="Home")pe("first");else if(de.key==="End")pe("last");else return;de.preventDefault()}}function pe(de){var Ie,Oe,ke;if(!H.value)return;const fe=["button","[href]","input","select","textarea","[tabindex]"].map(Ee=>`${Ee}:not([tabindex="-1"])`).join(", "),ge=[...H.value.querySelectorAll(fe)].filter(Ee=>!Ee.hasAttribute("disabled")),we=ge.indexOf(document.activeElement);if(!de)H.value.contains(document.activeElement)||(Ie=ge[0])==null||Ie.focus();else if(de==="first")(Oe=ge[0])==null||Oe.focus();else if(de==="last")(ke=ge.at(-1))==null||ke.focus();else{let Ee,Qe=we;const gt=de==="next"?1:-1;do Qe+=gt,Ee=ge[Qe];while((!Ee||Ee.offsetParent==null)&&Qe<ge.length&&Qe>=0);Ee?Ee.focus():pe(de==="next"?"first":"last")}}return Pi(()=>w(t.tag,{ref:H,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},r.value,a.value,s.value,p.value,b.value,R.value,S.value],style:[c.value,_.value],role:"listbox","aria-activedescendant":void 0,onFocusin:Z,onFocusout:ne,onFocus:ie,onKeydown:oe},{default:()=>[w(h8,{items:n.value},i)]})),{open:E,select:I,focus:pe}}}),BK=od("v-list-img"),FK=yi()({name:"VListItemAction",props:{start:Boolean,end:Boolean,...Zn()},setup(t,e){let{slots:i}=e;return Pi(()=>w(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end}]},i)),{}}}),$K=yi()({name:"VListItemMedia",props:{start:Boolean,end:Boolean,...Zn()},setup(t,e){let{slots:i}=e;return Pi(()=>w(t.tag,{class:["v-list-item-media",{"v-list-item-media--start":t.start,"v-list-item-media--end":t.end}]},i)),{}}});const m8=gn({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function g8(t,e){const i={},n=r=>()=>{if(!Eo)return Promise.resolve(!0);const a=r==="openDelay";return i.closeDelay&&window.clearTimeout(i.closeDelay),delete i.closeDelay,i.openDelay&&window.clearTimeout(i.openDelay),delete i.openDelay,new Promise(c=>{const s=parseInt(t[r]??0,10);i[r]=window.setTimeout(()=>{e==null||e(a),c(a)},s)})};return{runCloseDelay:n("closeDelay"),runOpenDelay:n("openDelay")}}const fS=Symbol.for("vuetify:v-menu"),NK=gn({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...m8()},"v-overlay-activator");function zK(t,e){let{isActive:i,isTop:n}=e;const r=lt();let a=!1,c=!1,s=!0;const p=Me(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),_=Me(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!p.value),{runOpenDelay:b,runCloseDelay:S}=g8(t,Z=>{Z===(t.openOnHover&&a||p.value&&c)&&!(t.openOnHover&&i.value&&!n.value)&&(i.value!==Z&&(s=!0),i.value=Z)}),E={click:Z=>{Z.stopPropagation(),r.value=Z.currentTarget||Z.target,i.value=!i.value},mouseenter:Z=>{var ne;(ne=Z.sourceCapabilities)!=null&&ne.firesTouchEvents||(a=!0,r.value=Z.currentTarget||Z.target,b())},mouseleave:Z=>{a=!1,S()},focus:Z=>{I2&&!Z.target.matches(":focus-visible")||(c=!0,Z.stopPropagation(),r.value=Z.currentTarget||Z.target,b())},blur:Z=>{c=!1,Z.stopPropagation(),S()}},I=Me(()=>{const Z={};return _.value&&(Z.click=E.click),t.openOnHover&&(Z.mouseenter=E.mouseenter,Z.mouseleave=E.mouseleave),p.value&&(Z.focus=E.focus,Z.blur=E.blur),Z}),R=Me(()=>{const Z={};if(t.openOnHover&&(Z.mouseenter=()=>{a=!0,b()},Z.mouseleave=()=>{a=!1,S()}),t.closeOnContentClick){const ne=qi(fS,null);Z.click=()=>{i.value=!1,ne==null||ne.closeParents()}}return Z}),V=Me(()=>{const Z={};return t.openOnHover&&(Z.mouseenter=()=>{s&&(a=!0,s=!1,b())},Z.mouseleave=()=>{a=!1,S()}),Z});Fi(n,Z=>{Z&&(t.openOnHover&&!a&&(!p.value||!c)||p.value&&!c&&(!t.openOnHover||!a))&&(i.value=!1)});const q=lt();Xs(()=>{q.value&&Cn(()=>{const Z=q.value;r.value=FU(Z)?Z.$el:Z})});const U=Fa("useActivator");let H;return Fi(()=>!!t.activator,Z=>{Z&&Eo?(H=fy(),H.run(()=>{VK(t,U,{activatorEl:r,activatorEvents:I})})):H&&H.stop()},{flush:"post",immediate:!0}),bu(()=>{H==null||H.stop()}),{activatorEl:r,activatorRef:q,activatorEvents:I,contentEvents:R,scrimEvents:V}}function VK(t,e,i){let{activatorEl:n,activatorEvents:r}=i;Fi(()=>t.activator,(p,_)=>{if(_&&p!==_){const b=s(_);b&&c(b)}p&&Cn(()=>a())},{immediate:!0}),Fi(()=>t.activatorProps,()=>{a()}),bu(()=>{c()});function a(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;p&&(Object.entries(r.value).forEach(b=>{let[S,E]=b;p.addEventListener(S,E)}),Object.keys(_).forEach(b=>{_[b]==null?p.removeAttribute(b):p.setAttribute(b,_[b])}))}function c(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;p&&(Object.entries(r.value).forEach(b=>{let[S,E]=b;p.removeEventListener(S,E)}),Object.keys(_).forEach(b=>{p.removeAttribute(b)}))}function s(){var b,S;let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,_;if(p)if(p==="parent"){let E=(S=(b=e==null?void 0:e.proxy)==null?void 0:b.$el)==null?void 0:S.parentNode;for(;E.hasAttribute("data-no-activator");)E=E.parentNode;_=E}else typeof p=="string"?_=document.querySelector(p):"$el"in p?_=p.$el:_=p;return n.value=(_==null?void 0:_.nodeType)===Node.ELEMENT_NODE?_:null,n.value}}const Bx=gn({eager:Boolean},"lazy");function zk(t,e){const i=lt(!1),n=Me(()=>i.value||t.eager||e.value);Fi(e,()=>i.value=!0);function r(){t.eager||(i.value=!1)}return{isBooted:i,hasContent:n,onAfterLeave:r}}function HT(t,e){return{x:t.x+e.x,y:t.y+e.y}}function UK(t,e){return{x:t.x-e.x,y:t.y-e.y}}function iO(t,e){if(t.side==="top"||t.side==="bottom"){const{side:i,align:n}=t,r=n==="left"?0:n==="center"?e.width/2:n==="right"?e.width:n,a=i==="top"?0:i==="bottom"?e.height:i;return HT({x:r,y:a},e)}else if(t.side==="left"||t.side==="right"){const{side:i,align:n}=t,r=i==="left"?0:i==="right"?e.width:i,a=n==="top"?0:n==="center"?e.height/2:n==="bottom"?e.height:n;return HT({x:r,y:a},e)}return HT({x:e.width/2,y:e.height/2},e)}const _8={static:GK,connected:qK},jK=gn({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in _8},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"v-overlay-location-strategies");function HK(t,e){const i=lt({}),n=lt();Eo&&(jp(()=>!!(e.isActive.value&&t.locationStrategy),a=>{var c,s;Fi(()=>t.locationStrategy,a),bu(()=>{n.value=void 0}),typeof t.locationStrategy=="function"?n.value=(c=t.locationStrategy(e,t,i))==null?void 0:c.updateLocation:n.value=(s=_8[t.locationStrategy](e,t,i))==null?void 0:s.updateLocation}),window.addEventListener("resize",r,{passive:!0}),bu(()=>{window.removeEventListener("resize",r),n.value=void 0}));function r(a){var c;(c=n.value)==null||c.call(n,a)}return{contentStyles:i,updateLocation:n}}function GK(){}function WK(t){const e=_C(t);return e.x-=parseFloat(t.style.left||0),e.y-=parseFloat(t.style.top||0),e}function qK(t,e,i){lj(t.activatorEl.value)&&Object.assign(i.value,{position:"fixed"});const{preferredAnchor:r,preferredOrigin:a}=gC(()=>{const R=S2(e.location,t.isRtl.value),V=e.origin==="overlap"?R:e.origin==="auto"?fT(R):S2(e.origin,t.isRtl.value);return R.side===V.side&&R.align===pT(V).align?{preferredAnchor:t3(R),preferredOrigin:t3(V)}:{preferredAnchor:R,preferredOrigin:V}}),[c,s,p,_]=["minWidth","minHeight","maxWidth","maxHeight"].map(R=>Me(()=>{const V=parseFloat(e[R]);return isNaN(V)?1/0:V})),b=Me(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const R=e.offset.split(" ").map(parseFloat);return R.length<2&&R.push(0),R}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let S=!1;const E=new ResizeObserver(()=>{S&&I()});Fi([t.activatorEl,t.contentEl],(R,V)=>{let[q,U]=R,[H,Z]=V;H&&E.unobserve(H),q&&E.observe(q),Z&&E.unobserve(Z),U&&E.observe(U)},{immediate:!0}),bu(()=>{E.disconnect()});function I(){if(S=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>S=!0)}),!t.activatorEl.value||!t.contentEl.value)return;const R=t.activatorEl.value.getBoundingClientRect(),V=WK(t.contentEl.value),q=G1(t.contentEl.value),U=12;q.length||(q.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(V.x+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),V.y+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const H=q.reduce((we,Ie)=>{const Oe=Ie.getBoundingClientRect(),ke=new ng({x:Ie===document.documentElement?0:Oe.x,y:Ie===document.documentElement?0:Oe.y,width:Ie.clientWidth,height:Ie.clientHeight});return we?new ng({x:Math.max(we.left,ke.left),y:Math.max(we.top,ke.top),width:Math.min(we.right,ke.right)-Math.max(we.left,ke.left),height:Math.min(we.bottom,ke.bottom)-Math.max(we.top,ke.top)}):ke},void 0);H.x+=U,H.y+=U,H.width-=U*2,H.height-=U*2;let Z={anchor:r.value,origin:a.value};function ne(we){const Ie=new ng(V),Oe=iO(we.anchor,R),ke=iO(we.origin,Ie);let{x:Ee,y:Qe}=UK(Oe,ke);switch(we.anchor.side){case"top":Qe-=b.value[0];break;case"bottom":Qe+=b.value[0];break;case"left":Ee-=b.value[0];break;case"right":Ee+=b.value[0];break}switch(we.anchor.align){case"top":Qe-=b.value[1];break;case"bottom":Qe+=b.value[1];break;case"left":Ee-=b.value[1];break;case"right":Ee+=b.value[1];break}return Ie.x+=Ee,Ie.y+=Qe,Ie.width=Math.min(Ie.width,p.value),Ie.height=Math.min(Ie.height,_.value),{overflows:n3(Ie,H),x:Ee,y:Qe}}let ie=0,oe=0;const pe={x:0,y:0},de={x:!1,y:!1};let fe=-1;for(;;){if(fe++>10){k2("Infinite loop detected in connectedLocationStrategy");break}const{x:we,y:Ie,overflows:Oe}=ne(Z);ie+=we,oe+=Ie,V.x+=we,V.y+=Ie;{const ke=i3(Z.anchor),Ee=Oe.x.before||Oe.x.after,Qe=Oe.y.before||Oe.y.after;let gt=!1;if(["x","y"].forEach(nt=>{if(nt==="x"&&Ee&&!de.x||nt==="y"&&Qe&&!de.y){const ft={anchor:{...Z.anchor},origin:{...Z.origin}},Tt=nt==="x"?ke==="y"?pT:fT:ke==="y"?fT:pT;ft.anchor=Tt(ft.anchor),ft.origin=Tt(ft.origin);const{overflows:pt}=ne(ft);(pt[nt].before<=Oe[nt].before&&pt[nt].after<=Oe[nt].after||pt[nt].before+pt[nt].after<(Oe[nt].before+Oe[nt].after)/2)&&(Z=ft,gt=de[nt]=!0)}}),gt)continue}Oe.x.before&&(ie+=Oe.x.before,V.x+=Oe.x.before),Oe.x.after&&(ie-=Oe.x.after,V.x-=Oe.x.after),Oe.y.before&&(oe+=Oe.y.before,V.y+=Oe.y.before),Oe.y.after&&(oe-=Oe.y.after,V.y-=Oe.y.after);{const ke=n3(V,H);pe.x=H.width-ke.x.before-ke.x.after,pe.y=H.height-ke.y.before-ke.y.after,ie+=ke.x.before,V.x+=ke.x.before,oe+=ke.y.before,V.y+=ke.y.before}break}const ge=i3(Z.anchor);return Object.assign(i.value,{"--v-overlay-anchor-origin":`${Z.anchor.side} ${Z.anchor.align}`,transformOrigin:`${Z.origin.side} ${Z.origin.align}`,top:Xi(nO(oe)),left:Xi(nO(ie)),minWidth:Xi(ge==="y"?Math.min(c.value,R.width):c.value),maxWidth:Xi(rO(Yu(pe.x,c.value===1/0?0:c.value,p.value))),maxHeight:Xi(rO(Yu(pe.y,s.value===1/0?0:s.value,_.value)))}),{available:pe,contentBox:V}}return Fi(()=>[r.value,a.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>I()),Cn(()=>{const R=I();if(!R)return;const{available:V,contentBox:q}=R;q.height>V.y&&requestAnimationFrame(()=>{I(),requestAnimationFrame(()=>{I()})})}),{updateLocation:I}}function nO(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function rO(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let pS=!0;const wb=[];function ZK(t){!pS||wb.length?(wb.push(t),mS()):(pS=!1,t(),mS())}let sO=-1;function mS(){cancelAnimationFrame(sO),sO=requestAnimationFrame(()=>{const t=wb.shift();t&&t(),wb.length?mS():pS=!0})}const k1={none:null,close:KK,block:QK,reposition:JK},YK=gn({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in k1}},"v-overlay-scroll-strategies");function XK(t,e){if(!Eo)return;let i;Xs(async()=>{i==null||i.stop(),e.isActive.value&&t.scrollStrategy&&(i=fy(),await Cn(),i.active&&i.run(()=>{var n;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,i):(n=k1[t.scrollStrategy])==null||n.call(k1,e,t,i)}))}),bu(()=>{i==null||i.stop()})}function KK(t){function e(i){t.isActive.value=!1}v8(t.activatorEl.value??t.contentEl.value,e)}function QK(t,e){var c;const i=(c=t.root.value)==null?void 0:c.offsetParent,n=[...new Set([...G1(t.activatorEl.value,e.contained?i:void 0),...G1(t.contentEl.value,e.contained?i:void 0)])].filter(s=>!s.classList.contains("v-overlay-scroll-blocked")),r=window.innerWidth-document.documentElement.offsetWidth,a=(s=>bC(s)&&s)(i||document.documentElement);a&&t.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((s,p)=>{s.style.setProperty("--v-body-scroll-x",Xi(-s.scrollLeft)),s.style.setProperty("--v-body-scroll-y",Xi(-s.scrollTop)),s.style.setProperty("--v-scrollbar-offset",Xi(r)),s.classList.add("v-overlay-scroll-blocked")}),bu(()=>{n.forEach((s,p)=>{const _=parseFloat(s.style.getPropertyValue("--v-body-scroll-x")),b=parseFloat(s.style.getPropertyValue("--v-body-scroll-y"));s.style.removeProperty("--v-body-scroll-x"),s.style.removeProperty("--v-body-scroll-y"),s.style.removeProperty("--v-scrollbar-offset"),s.classList.remove("v-overlay-scroll-blocked"),s.scrollLeft=-_,s.scrollTop=-b}),a&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function JK(t,e,i){let n=!1,r=-1,a=-1;function c(s){ZK(()=>{var b,S;const p=performance.now();(S=(b=t.updateLocation).value)==null||S.call(b,s),n=(performance.now()-p)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?s=>s():requestIdleCallback)(()=>{i.run(()=>{v8(t.activatorEl.value??t.contentEl.value,s=>{n?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{c(s)})})):c(s)})})}),bu(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function v8(t,e){const i=[document,...G1(t)];i.forEach(n=>{n.addEventListener("scroll",e,{passive:!0})}),bu(()=>{i.forEach(n=>{n.removeEventListener("scroll",e)})})}function y8(){if(!Eo)return lt(!1);const{ssr:t}=Ng();if(t){const e=lt(!1);return Fn(()=>{e.value=!0}),e}else return lt(!0)}function Dy(){const e=Fa("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const oO=Symbol.for("vuetify:stack"),sv=Bo([]);function eQ(t,e,i){const n=Fa("useStack"),r=!i,a=qi(oO,void 0),c=Bo({activeChildren:new Set});Mn(oO,c);const s=lt(+e.value);jp(t,()=>{var S;const b=(S=sv.at(-1))==null?void 0:S[1];s.value=b?b+10:+e.value,r&&sv.push([n.uid,s.value]),a==null||a.activeChildren.add(n.uid),bu(()=>{if(r){const E=Wn(sv).findIndex(I=>I[0]===n.uid);sv.splice(E,1)}a==null||a.activeChildren.delete(n.uid)})});const p=lt(!0);r&&Xs(()=>{var S;const b=((S=sv.at(-1))==null?void 0:S[0])===n.uid;setTimeout(()=>p.value=b)});const _=Me(()=>!c.activeChildren.size);return{globalTop:Zp(p),localTop:_,stackStyles:Me(()=>({zIndex:s.value}))}}function tQ(t){return{teleportTarget:Me(()=>{const i=t.value;if(i===!0||!Eo)return;const n=i===!1?document.body:typeof i=="string"?document.querySelector(i):i;if(n==null)return;let r=n.querySelector(":scope > .v-overlay-container");return r||(r=document.createElement("div"),r.className="v-overlay-container",n.appendChild(r)),r})}}function iQ(){return!0}function b8(t,e,i){if(!t||x8(t,i)===!1)return!1;const n=d4(e);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===t.target)return!1;const r=(typeof i.value=="object"&&i.value.include||(()=>[]))();return r.push(e),!r.some(a=>a==null?void 0:a.contains(t.target))}function x8(t,e){return(typeof e.value=="object"&&e.value.closeConditional||iQ)(t)}function nQ(t,e,i){const n=typeof i.value=="function"?i.value:i.value.handler;e._clickOutside.lastMousedownWasOutside&&b8(t,e,i)&&setTimeout(()=>{x8(t,i)&&n&&n(t)},0)}function aO(t,e){const i=d4(t);e(document),typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&e(i)}const w8={mounted(t,e){const i=r=>nQ(r,t,e),n=r=>{t._clickOutside.lastMousedownWasOutside=b8(r,t,e)};aO(t,r=>{r.addEventListener("click",i,!0),r.addEventListener("mousedown",n,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!0}),t._clickOutside[e.instance.$.uid]={onClick:i,onMousedown:n}},unmounted(t,e){t._clickOutside&&(aO(t,i=>{var a;if(!i||!((a=t._clickOutside)!=null&&a[e.instance.$.uid]))return;const{onClick:n,onMousedown:r}=t._clickOutside[e.instance.$.uid];i.removeEventListener("click",n,!0),i.removeEventListener("mousedown",r,!0)}),delete t._clickOutside[e.instance.$.uid])}};function rQ(t){const{modelValue:e,color:i,...n}=t;return w(Nl,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&w("div",Mi({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},n),null)]})}const Ry=gn({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3},...NK(),...ud(),...Bx(),...jK(),...YK(),...vr(),...jh()},"v-overlay"),Bh=yi()({name:"VOverlay",directives:{ClickOutside:w8},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Ry()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:i,attrs:n,emit:r}=e;const a=Pn(t,"modelValue"),c=Me({get:()=>a.value,set:ft=>{ft&&t.disabled||(a.value=ft)}}),{teleportTarget:s}=tQ(Me(()=>t.attach||t.contained)),{themeClasses:p}=Vr(t),{rtlClasses:_,isRtl:b}=zh(),{hasContent:S,onAfterLeave:E}=zk(t,c),I=ho(Me(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:R,localTop:V,stackStyles:q}=eQ(c,li(t,"zIndex"),t._disableGlobalStack),{activatorEl:U,activatorRef:H,activatorEvents:Z,contentEvents:ne,scrimEvents:ie}=zK(t,{isActive:c,isTop:V}),{dimensionStyles:oe}=cd(t),pe=y8(),{scopeId:de}=Dy();Fi(()=>t.disabled,ft=>{ft&&(c.value=!1)});const fe=lt(),ge=lt(),{contentStyles:we,updateLocation:Ie}=HK(t,{isRtl:b,contentEl:ge,activatorEl:U,isActive:c});XK(t,{root:fe,contentEl:ge,activatorEl:U,isActive:c,updateLocation:Ie});function Oe(ft){r("click:outside",ft),t.persistent?nt():c.value=!1}function ke(){return c.value&&R.value}Eo&&Fi(c,ft=>{ft?window.addEventListener("keydown",Ee):window.removeEventListener("keydown",Ee)},{immediate:!0});function Ee(ft){ft.key==="Escape"&&R.value&&(t.persistent?nt():c.value=!1)}const Qe=zB();jp(()=>t.closeOnBack,()=>{tK(Qe,ft=>{R.value&&c.value?(ft(!1),t.persistent?nt():c.value=!1):ft()})});const gt=lt();Fi(()=>c.value&&(t.absolute||t.contained)&&s.value==null,ft=>{if(ft){const Tt=h4(fe.value);Tt&&Tt!==document.scrollingElement&&(gt.value=Tt.scrollTop)}});function nt(){t.noClickAnimation||ge.value&&Sp(ge.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Gv})}return Pi(()=>{var ft;return w(Oi,null,[(ft=i.activator)==null?void 0:ft.call(i,{isActive:c.value,props:Mi({ref:H},m1(Z.value),t.activatorProps)}),pe.value&&w(dC,{disabled:!s.value,to:s.value},{default:()=>[S.value&&w("div",Mi({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":c.value,"v-overlay--contained":t.contained},p.value,_.value],style:[q.value,{top:Xi(gt.value)}],ref:fe},de,n),[w(rQ,Mi({color:I,modelValue:c.value&&!!t.scrim},m1(ie.value)),null),w(Jc,{appear:!0,persisted:!0,transition:t.transition,target:U.value,onAfterLeave:()=>{E(),r("afterLeave")}},{default:()=>{var Tt;return[Br(w("div",Mi({ref:ge,class:["v-overlay__content",t.contentClass],style:[oe.value,we.value]},m1(ne.value),t.contentProps),[(Tt=i.default)==null?void 0:Tt.call(i,{isActive:c})]),[[Qu,c.value],[Ba("click-outside"),{handler:Oe,closeConditional:ke,include:()=>[U.value]}]])]}})])]})])}),{activatorEl:U,animateClick:nt,contentEl:ge,globalTop:R,localTop:V,updateLocation:Ie}}}),Fx=yi()({name:"VMenu",props:{id:String,...Qd(Ry({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:kx}}),["absolute"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{scopeId:r}=Dy(),a=cl(),c=Me(()=>t.id||`v-menu-${a}`),s=lt(),p=qi(fS,null),_=lt(0);Mn(fS,{register(){++_.value},unregister(){--_.value},closeParents(){setTimeout(()=>{_.value||(n.value=!1,p==null||p.closeParents())},40)}}),Fi(n,E=>{E?p==null||p.register():p==null||p.unregister()});function b(){p==null||p.closeParents()}const S=Me(()=>Mi({"aria-haspopup":"menu","aria-expanded":String(n.value),"aria-owns":c.value},t.activatorProps));return Pi(()=>{const[E]=Bh.filterProps(t);return w(Bh,Mi({ref:s,class:["v-menu"]},E,{modelValue:n.value,"onUpdate:modelValue":I=>n.value=I,absolute:!0,activatorProps:S.value,"onClick:outside":b},r),{activator:i.activator,default:function(){for(var I=arguments.length,R=new Array(I),V=0;V<I;V++)R[V]=arguments[V];return w(es,{root:!0},{default:()=>{var q;return[(q=i.default)==null?void 0:q.call(i,...R)]}})}})}),dd({id:c,ΨopenChildren:_},s)}}),Vk=gn({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:On,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:Xp},...Nk({itemChildren:!1})},"v-select"),T8=yi()({name:"VSelect",props:{...Vk(),...Qd(Ox({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...jh({transition:{component:kx}})},emits:{"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:i}=e;const{t:n}=Tu(),r=lt(),a=lt(),c=Pn(t,"menu"),s=Me({get:()=>c.value,set:ge=>{var we;c.value&&!ge&&((we=a.value)!=null&&we.ΨopenChildren)||(c.value=ge)}}),{items:p,transformIn:_,transformOut:b}=Dx(t),S=Pn(t,"modelValue",[],ge=>_(kc(ge)),ge=>{const we=b(ge);return t.multiple?we:we[0]??null}),E=Ax(),I=Me(()=>S.value.map(ge=>p.value.find(we=>t.valueComparator(we.value,ge.value))||ge)),R=Me(()=>I.value.map(ge=>ge.props.value)),V=lt(!1);let q="",U;const H=Me(()=>t.hideSelected?p.value.filter(ge=>!I.value.some(we=>we===ge)):p.value),Z=lt();function ne(ge){t.openOnClear&&(s.value=!0)}function ie(){t.hideNoData&&!p.value.length||t.readonly||E!=null&&E.isReadonly.value||(s.value=!s.value)}function oe(ge){var Ee,Qe,gt,nt;if(t.readonly||E!=null&&E.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ge.key)&&ge.preventDefault(),["Enter","ArrowDown"," "].includes(ge.key)&&(s.value=!0),["Escape","Tab"].includes(ge.key)&&(s.value=!1),ge.key==="ArrowDown"?(Ee=Z.value)==null||Ee.focus("next"):ge.key==="ArrowUp"?(Qe=Z.value)==null||Qe.focus("prev"):ge.key==="Home"?(gt=Z.value)==null||gt.focus("first"):ge.key==="End"&&((nt=Z.value)==null||nt.focus("last"));const we=1e3;function Ie(ft){const Tt=ft.key.length===1,pt=!ft.ctrlKey&&!ft.metaKey&&!ft.altKey;return Tt&&pt}if(t.multiple||!Ie(ge))return;const Oe=performance.now();Oe-U>we&&(q=""),q+=ge.key.toLowerCase(),U=Oe;const ke=p.value.find(ft=>ft.title.toLowerCase().startsWith(q));ke!==void 0&&(S.value=[ke])}function pe(ge){if(t.multiple){const we=R.value.findIndex(Ie=>t.valueComparator(Ie,ge.value));if(we===-1)S.value=[...S.value,ge];else{const Ie=[...S.value];Ie.splice(we,1),S.value=Ie}}else S.value=[ge],s.value=!1}function de(ge){var we;(we=Z.value)!=null&&we.$el.contains(ge.relatedTarget)||(s.value=!1)}function fe(ge){var we;ge.relatedTarget==null&&((we=r.value)==null||we.focus())}return Pi(()=>{const ge=!!(t.chips||i.chip),we=!!(!t.hideNoData||H.value.length||i.prepend||i.append||i["no-data"]),Ie=S.value.length>0,[Oe]=Wp.filterProps(t),ke=Ie||!V.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return w(Wp,Mi({ref:r},Oe,{modelValue:S.value.map(Ee=>Ee.props.value).join(", "),"onUpdate:modelValue":Ee=>{Ee==null&&(S.value=[])},focused:V.value,"onUpdate:focused":Ee=>V.value=Ee,validationValue:S.externalValue,dirty:Ie,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":S.value.length}],appendInnerIcon:t.menuIcon,readonly:!0,placeholder:ke,"onClick:clear":ne,"onMousedown:control":ie,onBlur:de,onKeydown:oe}),{...i,default:()=>w(Oi,null,[w(Fx,Mi({ref:a,modelValue:s.value,"onUpdate:modelValue":Ee=>s.value=Ee,activator:"parent",contentClass:"v-select__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition},t.menuProps),{default:()=>[we&&w(Rx,{ref:Z,selected:R.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:Ee=>Ee.preventDefault(),onFocusout:fe},{default:()=>{var Ee,Qe,gt;return[!H.value.length&&!t.hideNoData&&(((Ee=i["no-data"])==null?void 0:Ee.call(i))??w(Rh,{title:n(t.noDataText)},null)),(Qe=i["prepend-item"])==null?void 0:Qe.call(i),H.value.map((nt,ft)=>{var Tt;return i.item?(Tt=i.item)==null?void 0:Tt.call(i,{item:nt,index:ft,props:Mi(nt.props,{onClick:()=>pe(nt)})}):w(Rh,Mi({key:ft},nt.props,{onClick:()=>pe(nt)}),{prepend:pt=>{let{isSelected:et}=pt;return t.multiple&&!t.hideSelected?w(Dh,{modelValue:et,ripple:!1,tabindex:"-1"},null):void 0}})}),(gt=i["append-item"])==null?void 0:gt.call(i)]}})]}),I.value.map((Ee,Qe)=>{var ft;function gt(Tt){Tt.stopPropagation(),Tt.preventDefault(),pe(Ee)}const nt={"onClick:close":gt,modelValue:!0,"onUpdate:modelValue":void 0};return w("div",{key:Ee.value,class:"v-select__selection"},[ge?i.chip?w(es,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:Ee.title}}},{default:()=>{var Tt;return[(Tt=i.chip)==null?void 0:Tt.call(i,{item:Ee,index:Qe,props:nt})]}}):w(Ly,Mi({key:"chip",closable:t.closableChips,size:"small",text:Ee.title},nt),null):((ft=i.selection)==null?void 0:ft.call(i,{item:Ee,index:Qe}))??w("span",{class:"v-select__selection-text"},[Ee.title,t.multiple&&Qe<I.value.length-1&&w("span",{class:"v-select__selection-comma"},[ye(",")])])])})])})}),dd({menu:s,select:pe},r)}}),S8=gn({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"v-data-table-paginate"),C8=Symbol.for("vuetify:data-table-pagination");function k8(t){const e=Pn(t,"page",void 0,n=>+(n??1)),i=Pn(t,"itemsPerPage",void 0,n=>+(n??10));return{page:e,itemsPerPage:i}}function E8(t){const{page:e,itemsPerPage:i,itemsLength:n}=t,r=Me(()=>i.value===-1?0:i.value*(e.value-1)),a=Me(()=>i.value===-1?n.value:Math.min(n.value,r.value+i.value)),c=Me(()=>i.value===-1||n.value===0?1:Math.ceil(n.value/i.value));function s(_){i.value=_,e.value=1}const p={page:e,itemsPerPage:i,itemsLength:n,startIndex:r,stopIndex:a,pageCount:c,setItemsPerPage:s};return Mn(C8,p),p}function sQ(){const t=qi(C8);if(!t)throw new Error("Missing pagination!");return t}function oQ(t){const{items:e,startIndex:i,stopIndex:n,itemsPerPage:r}=t;return{paginatedItems:Me(()=>r.value<=0?e.value:e.value.slice(i.value,n.value))}}const I8=yi()({name:"VDataTableFooter",props:{prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},setup(t,e){let{slots:i}=e;const{t:n}=Tu(),{page:r,pageCount:a,startIndex:c,stopIndex:s,itemsLength:p,itemsPerPage:_,setItemsPerPage:b}=sQ(),S=Me(()=>t.itemsPerPageOptions.map(E=>({...E,title:n(E.title)})));return()=>{var E;return w("div",{class:"v-data-table-footer"},[(E=i.prepend)==null?void 0:E.call(i),w("div",{class:"v-data-table-footer__items-per-page"},[w("span",null,[n(t.itemsPerPageText)]),w(T8,{items:S.value,modelValue:_.value,"onUpdate:modelValue":I=>b(Number(I)),density:"compact",variant:"outlined","hide-details":!0},null)]),w("div",{class:"v-data-table-footer__info"},[w("div",null,[n(t.pageText,p.value?c.value+1:0,s.value,p.value)])]),w("div",{class:"v-data-table-footer__pagination"},[w(ko,{icon:t.firstIcon,variant:"plain",onClick:()=>r.value=1,disabled:r.value===1,"aria-label":n(t.firstPageLabel)},null),w(ko,{icon:t.prevIcon,variant:"plain",onClick:()=>r.value=Math.max(1,r.value-1),disabled:r.value===1,"aria-label":n(t.prevPageLabel)},null),t.showCurrentPage&&w("span",{key:"page",class:"v-data-table-footer__page"},[r.value]),w(ko,{icon:t.nextIcon,variant:"plain",onClick:()=>r.value=Math.min(a.value,r.value+1),disabled:r.value===a.value,"aria-label":n(t.nextPageLabel)},null),w(ko,{icon:t.lastIcon,variant:"plain",onClick:()=>r.value=a.value,disabled:r.value===a.value,"aria-label":n(t.lastPageLabel)},null)])])}}}),Tb=rj({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(t,e)=>{let{slots:i,attrs:n}=e;const r=t.tag??"td";return w(r,Mi({class:["v-data-table__td",{"v-data-table-column--fixed":t.fixed,"v-data-table-column--last-fixed":t.lastFixed,"v-data-table-column--no-padding":t.noPadding},`v-data-table-column--align-${t.align}`],style:{height:Xi(t.height),width:Xi(t.width),left:Xi(t.fixedOffset||null)}},n),{default:()=>{var a;return[(a=i.default)==null?void 0:a.call(i)]}})}),P8=gn({headers:{type:Array,default:()=>[]}},"v-data-table-header"),A8=Symbol.for("vuetify:data-table-headers");function M8(t,e){const i=lt([]),n=lt([]);Fi(()=>t.headers,()=>{var R,V,q;const a=t.headers.length?Array.isArray(t.headers[0])?t.headers:[t.headers]:[],c=a.flatMap((U,H)=>U.map(Z=>({column:Z,row:H}))),s=a.length,p={title:"",sortable:!1},_={...p,width:48};if((R=e==null?void 0:e.groupBy)!=null&&R.value.length){const U=c.findIndex(H=>{let{column:Z}=H;return Z.key==="data-table-group"});U<0?c.unshift({column:{...p,key:"data-table-group",title:"Group",rowspan:s},row:0}):c.splice(U,1,{column:{...p,...c[U].column},row:c[U].row})}if((V=e==null?void 0:e.showSelect)!=null&&V.value){const U=c.findIndex(H=>{let{column:Z}=H;return Z.key==="data-table-select"});U<0?c.unshift({column:{..._,key:"data-table-select",rowspan:s},row:0}):c.splice(U,1,{column:{..._,...c[U].column},row:c[U].row})}if((q=e==null?void 0:e.showExpand)!=null&&q.value){const U=c.findIndex(H=>{let{column:Z}=H;return Z.key==="data-table-expand"});U<0?c.push({column:{..._,key:"data-table-expand",rowspan:s},row:0}):c.splice(U,1,{column:{..._,...c[U].column},row:c[U].row})}const b=yh(s).map(()=>[]),S=yh(s).fill(0);let E=0;c.forEach(U=>{let{column:H,row:Z}=U;const ne=H.key??`data-table-column-${E++}`;for(let ie=Z;ie<=Z+(H.rowspan??1)-1;ie++)b[ie].push({...H,key:ne,fixedOffset:S[ie],sortable:H.sortable??!!H.key}),S[ie]+=H.width??0}),b.forEach(U=>{for(let H=U.length;H--;H>=0)if(U[H].fixed){U[H].lastFixed=!0;return}});const I=new Set;i.value=b.map(U=>{const H=[];for(const Z of U)I.has(Z.key)||(I.add(Z.key),H.push(Z));return H}),n.value=b.at(-1)??[]},{deep:!0,immediate:!0});const r={headers:i,columns:n};return Mn(A8,r),r}function $x(){const t=qi(A8);if(!t)throw new Error("Missing headers!");return t}const O8=gn({showSelect:Boolean,modelValue:{type:Array,default:()=>[]}},"v-data-table-select"),L8=Symbol.for("vuetify:data-table-selection");function D8(t,e){const i=Pn(t,"modelValue",t.modelValue,S=>new Set(S),S=>[...S.values()]);function n(S){return S.every(E=>i.value.has(E.value))}function r(S){return S.some(E=>i.value.has(E.value))}function a(S,E){const I=new Set(i.value);for(const R of S)E?I.add(R.value):I.delete(R.value);i.value=I}function c(S){a([S],!n([S]))}function s(S){a(e.value,S)}const p=Me(()=>i.value.size>0),_=Me(()=>n(e.value)),b={toggleSelect:c,select:a,selectAll:s,isSelected:n,isSomeSelected:r,someSelected:p,allSelected:_};return Mn(L8,b),b}function Nx(){const t=qi(L8);if(!t)throw new Error("Missing selection!");return t}const R8=gn({sortBy:{type:Array,default:()=>[]},multiSort:Boolean,mustSort:Boolean},"v-data-table-sort"),B8=Symbol.for("vuetify:data-table-sort");function F8(t){const e=Pn(t,"sortBy"),i=li(t,"mustSort"),n=li(t,"multiSort");return{sortBy:e,mustSort:i,multiSort:n}}function $8(t){const{sortBy:e,mustSort:i,multiSort:n,page:r}=t,c={sortBy:e,toggleSort:s=>{let p=e.value.map(b=>({...b}))??[];const _=p.find(b=>b.key===s);_?_.order==="desc"?i.value?_.order="asc":p=p.filter(b=>b.key!==s):_.order="desc":n.value?p=[...p,{key:s,order:"asc"}]:p=[{key:s,order:"asc"}],e.value=p,r&&(r.value=1)}};return Mn(B8,c),c}function aQ(){const t=qi(B8);if(!t)throw new Error("Missing sort!");return t}function lQ(t,e,i){const n=Me(()=>i.value.reduce((a,c)=>(c.sort&&(a[c.key]=c.sort),a),{}));return{sortedItems:Me(()=>e.value.length?uQ(t.value,e.value,"en",n.value):t.value)}}function uQ(t,e,i,n){const r=new Intl.Collator(i,{sensitivity:"accent",usage:"sort"});return[...t].sort((a,c)=>{for(let s=0;s<e.length;s++){const p=e[s].key,_=e[s].order;if(_===!1)continue;let b=mg(a.raw,p),S=mg(c.raw,p);if(_==="desc"&&([b,S]=[S,b]),n!=null&&n[p]){const E=n[p](b,S);if(!E)continue;return E}if(!(b==null||S==null)){if(b instanceof Date&&S instanceof Date)return b.getTime()-S.getTime();if([b,S]=[b,S].map(E=>(E||"").toString().toLocaleLowerCase()),b!==S)return!isNaN(b)&&!isNaN(S)?Number(b)-Number(S):r.compare(b,S)}}return 0})}const N8=yi()({name:"VDataTableHeaders",props:{color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:On,default:"$sortAsc"},sortDescIcon:{type:On,default:"$sortDesc"},...Sx()},setup(t,e){let{slots:i,emit:n}=e;const{toggleSort:r,sortBy:a}=aQ(),{someSelected:c,allSelected:s,selectAll:p}=Nx(),{columns:_,headers:b}=$x(),{loaderClasses:S}=Iy(t),E=(U,H)=>!t.sticky&&!U.fixed?null:{position:"sticky",zIndex:U.fixed?4:t.sticky?3:void 0,left:U.fixed?Xi(U.fixedOffset):void 0,top:t.sticky?`calc(var(--v-table-header-height) * ${H})`:void 0};function I(U){const H=a.value.find(Z=>Z.key===U);return H?H.order==="asc"?t.sortAscIcon:t.sortDescIcon:t.sortAscIcon}const{backgroundColorClasses:R,backgroundColorStyles:V}=ho(t,"color"),q=U=>{let{column:H,x:Z,y:ne}=U;const ie=!!a.value.find(pe=>pe.key===H.key),oe=H.key==="data-table-select"||H.key==="data-table-expand";return w(Tb,{tag:"th",align:H.align,class:["v-data-table__th",{"v-data-table__th--sortable":H.sortable,"v-data-table__th--sorted":ie},S.value],style:{width:Xi(H.width),minWidth:Xi(H.width),...E(H,ne)},colspan:H.colspan,rowspan:H.rowspan,onClick:H.sortable?()=>r(H.key):void 0,lastFixed:H.lastFixed,noPadding:oe},{default:()=>{var fe;const pe=`column.${H.key}`,de={column:H,selectAll:p};return i[pe]?i[pe](de):H.key==="data-table-select"?((fe=i["column.data-table-select"])==null?void 0:fe.call(i,de))??w(Dh,{modelValue:s.value,indeterminate:c.value&&!s.value,"onUpdate:modelValue":p},null):w("div",{class:"v-data-table-header__content"},[w("span",null,[H.title]),H.sortable&&w(lo,{key:"icon",class:"v-data-table-header__sort-icon",icon:I(H.key)},null),t.multiSort&&ie&&w("div",{key:"badge",class:["v-data-table-header__sort-badge",...R.value],style:V.value},[a.value.findIndex(ge=>ge.key===H.key)+1])])}})};Pi(()=>w(Oi,null,[b.value.map((U,H)=>w("tr",null,[U.map((Z,ne)=>w(q,{column:Z,x:ne,y:H},null))])),t.loading&&w("tr",{class:"v-data-table__progress"},[w("th",{colspan:_.value.length},[w(Cx,{name:"v-data-table-headers",active:!0,color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0},{default:i.loader})])])]))}}),z8=gn({groupBy:{type:Array,default:()=>[]}},"data-table-group"),V8=Symbol.for("vuetify:data-table-group");function U8(t){return{groupBy:Pn(t,"groupBy")}}function j8(t){const{groupBy:e,sortBy:i}=t,n=lt(new Set),r=Me(()=>e.value.map(_=>({..._,order:_.order??!1})).concat(i.value));function a(_){return n.value.has(_.id)}function c(_){const b=new Set(n.value);a(_)?b.delete(_.id):b.add(_.id),n.value=b}function s(_){function b(S){const E=[];for(const I of S.items)I.type==="item"?E.push(I):E.push(...b(I));return E}return b({type:"group-header",items:_,id:"dummy",key:"dummy",value:"dummy",depth:0})}const p={sortByWithGroups:r,toggleGroup:c,opened:n,groupBy:e,extractRows:s,isGroupOpen:a};return Mn(V8,p),p}function H8(){const t=qi(V8);if(!t)throw new Error("Missing group!");return t}function cQ(t,e){if(!t.length)return[];const i=new Map;for(const n of t){const r=mg(n.raw,e);i.has(r)||i.set(r,[]),i.get(r).push(n)}return i}function G8(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!e.length)return[];const r=cQ(t,e[0]),a=[],c=e.slice(1);return r.forEach((s,p)=>{const _=e[0],b=`${n}_${_}_${p}`;a.push({depth:i,id:b,key:_,value:p,items:c.length?G8(s,c,i+1,b):s,type:"group-header"})}),a}function W8(t,e){const i=[];for(const n of t)n.type==="group-header"?(n.value!=null&&i.push(n),(e.has(n.id)||n.value==null)&&i.push(...W8(n.items,e))):i.push(n);return i}function q8(t,e,i){return{flatItems:Me(()=>{if(!e.value.length)return t.value;const r=G8(t.value,e.value.map(a=>a.key));return W8(r,i.value)})}}const dQ=yi()({name:"VDataTableGroupHeaderRow",props:{item:{type:Object,required:!0}},setup(t,e){let{slots:i}=e;const{isGroupOpen:n,toggleGroup:r,extractRows:a}=H8(),{isSelected:c,isSomeSelected:s,select:p}=Nx(),{columns:_}=$x(),b=Me(()=>a([t.item]));return()=>w("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":t.item.depth}},[_.value.map(S=>{var E,I;if(S.key==="data-table-group"){const R=n(t.item)?"$expand":"$next",V=()=>r(t.item);return((E=i["data-table-group"])==null?void 0:E.call(i,{item:t.item,count:b.value.length,props:{icon:R,onClick:V}}))??w(Tb,{class:"v-data-table-group-header-row__column"},{default:()=>[w(ko,{size:"small",variant:"text",icon:R,onClick:V},null),w("span",null,[t.item.value]),w("span",null,[ye("("),b.value.length,ye(")")])]})}if(S.key==="data-table-select"){const R=c(b.value),V=s(b.value)&&!R,q=U=>p(b.value,U);return((I=i["data-table-select"])==null?void 0:I.call(i,{props:{modelValue:R,indeterminate:V,"onUpdate:modelValue":q}}))??w("td",null,[w(Dh,{modelValue:R,indeterminate:V,"onUpdate:modelValue":q},null)])}return w("td",null,null)})])}}),Z8=gn({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"v-data-table-expand"),Y8=Symbol.for("vuetify:datatable:expanded");function X8(t){const e=li(t,"expandOnClick"),i=Pn(t,"expanded",t.expanded,s=>new Set(s),s=>[...s.values()]);function n(s,p){const _=new Set(i.value);p?_.add(s.value):_.delete(s.value),i.value=_}function r(s){return i.value.has(s.value)}function a(s){n(s,!r(s))}const c={expand:n,expanded:i,expandOnClick:e,isExpanded:r,toggleExpand:a};return Mn(Y8,c),c}function K8(){const t=qi(Y8);if(!t)throw new Error("foo");return t}const GT=wu({name:"VDataTableRow",props:{index:Number,item:Object,onClick:Function},setup(t,e){let{slots:i}=e;const{isSelected:n,toggleSelect:r}=Nx(),{isExpanded:a,toggleExpand:c}=K8(),{columns:s}=$x();Pi(()=>w("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!t.onClick}],onClick:t.onClick},[!s.value.length&&w(Tb,{key:"no-data"},i),t.item&&s.value.map((p,_)=>w(Tb,{align:p.align,fixed:p.fixed,fixedOffset:p.fixedOffset,lastFixed:p.lastFixed,noPadding:p.key==="data-table-select"||p.key==="data-table-expand",width:p.width},{default:()=>{var I,R;const b=t.item,S=`item.${p.key}`,E={index:t.index,item:t.item,columns:s.value,isSelected:n,toggleSelect:r,isExpanded:a,toggleExpand:c};return i[S]?i[S](E):p.key==="data-table-select"?((I=i["item.data-table-select"])==null?void 0:I.call(i,E))??w(Dh,{modelValue:n([b]),onClick:zl(()=>r(b),["stop"])},null):p.key==="data-table-expand"?((R=i["item.data-table-expand"])==null?void 0:R.call(i,E))??w(ko,{icon:a(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:zl(()=>c(b),["stop"])},null):Cc(b.columns,p.key)}}))]))}}),Q8=yi()({name:"VDataTableRows",props:{loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},setup(t,e){let{emit:i,slots:n}=e;const{columns:r}=$x(),{expandOnClick:a,toggleExpand:c,isExpanded:s}=K8(),{isSelected:p,toggleSelect:_}=Nx(),{toggleGroup:b,isGroupOpen:S}=H8(),{t:E}=Tu();return Pi(()=>{var I,R;return w(Oi,null,[t.loading?((I=n.loading)==null?void 0:I.call(n))??w(GT,{class:"v-data-table-rows-no-data",key:"loading"},{default:()=>[E(t.loadingText)]}):void 0,!t.loading&&!t.items.length&&!t.hideNoData&&(((R=n["no-data"])==null?void 0:R.call(n))??w(GT,{class:"v-data-table-rows-no-data",key:"no-data"},{default:()=>[E(t.noDataText)]})),t.items.map((V,q)=>{var H;if(V.type==="group-header")return n["group-header"]?n["group-header"]({index:q,item:V,columns:r.value,isExpanded:s,toggleExpand:c,isSelected:p,toggleSelect:_,toggleGroup:b,isGroupOpen:S}):w(dQ,{key:`group-header_${V.id}`,item:V},n);const U={index:q,item:V,columns:r.value,isExpanded:s,toggleExpand:c,isSelected:p,toggleSelect:_};return w(Oi,null,[n.item?n.item(U):w(GT,{key:`item_${V.value}`,onClick:a.value||t["onClick:row"]?Z=>{var ne;a.value&&c(V),(ne=t["onClick:row"])==null||ne.call(t,Z,{item:V})}:void 0,index:q,item:V},n),s(V)&&((H=n["expanded-row"])==null?void 0:H.call(n,U))])})])}),{}}}),J8=gn({...Nk({itemValue:"id"})},"v-data-table-item");function hQ(t,e,i){const n=e.split(".");for(;n.length>1;){const r=n.shift();t[r]==null&&(t[r]={}),typeof t[r]=="object"&&(t=t[r])}t[n[0]]=i}function eF(t,e){const{items:i}=Dx(t);return{items:Me(()=>i.value.map(r=>({...r,type:"item",columns:e.value.reduce((a,c)=>(hQ(a,c.key,Cc(r.raw,c.value??c.key)),a),{})})))}}function tF(t){let{page:e,itemsPerPage:i,sortBy:n,groupBy:r,search:a}=t;const c=Fa("VDataTable"),s=Me(()=>({page:e.value,itemsPerPage:i.value,sortBy:n.value,groupBy:r.value}));Fi(()=>a==null?void 0:a.value,()=>{e.value=1});let p=null;Fi(s,()=>{Xp(p,s.value)||(c.emit("update:options",s.value),p=s.value)},{deep:!0,immediate:!0})}const fQ=(t,e,i)=>t==null||e==null?-1:t.toString().toLocaleLowerCase().indexOf(e.toString().toLocaleLowerCase()),Uk=gn({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function pQ(t,e,i){var s;const n=[],r=(i==null?void 0:i.default)??fQ,a=i!=null&&i.filterKeys?kc(i.filterKeys):!1,c=Object.keys((i==null?void 0:i.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return n;e:for(let p=0;p<t.length;p++){const _=t[p],b={},S={};let E=-1;if(e&&!(i!=null&&i.noFilter)){if(typeof _=="object"){const V=a||Object.keys(_);for(const q of V){const U=Cc(_,q,_),H=(s=i==null?void 0:i.customKeyFilter)==null?void 0:s[q];if(E=H?H(U,e,_):r(U,e,_),E!==-1&&E!==!1)H?b[q]=E:S[q]=E;else if((i==null?void 0:i.filterMode)==="every")continue e}}else E=r(_,e,_),E!==-1&&E!==!1&&(S.title=E);const I=Object.keys(S).length,R=Object.keys(b).length;if(!I&&!R||(i==null?void 0:i.filterMode)==="union"&&R!==c&&!I||(i==null?void 0:i.filterMode)==="intersection"&&(R!==c||!I))continue}n.push({index:p,matches:{...S,...b}})}return n}function jk(t,e,i,n){const r=Me(()=>typeof(i==null?void 0:i.value)!="string"&&typeof(i==null?void 0:i.value)!="number"?"":String(i.value)),a=lt([]),c=lt(new Map);Xs(()=>{a.value=[],c.value=new Map;const p=Da(e);pQ(p,r.value,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:Da(n==null?void 0:n.filterKeys)??t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}).forEach(b=>{let{index:S,matches:E}=b;const I=p[S];a.value.push(I),c.value.set(I.value,E)})});function s(p){return c.value.get(p.value)}return{filteredItems:a,filteredMatches:c,getMatches:s}}const iF=gn({...J8(),...P8(),hideNoData:Boolean,hover:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},height:[String,Number],width:[String,Number],fixedHeader:Boolean,fixedFooter:Boolean,"onClick:row":Function},"v-data-table");yi()({name:"VDataTable",props:{search:String,...iF(),...Z8(),...z8(),...O8(),...R8(),...S8(),...Uk()},emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0},setup(t,e){let{emit:i,slots:n}=e;const{groupBy:r}=U8(t),{sortBy:a,multiSort:c,mustSort:s}=F8(t),{page:p,itemsPerPage:_}=k8(t),{columns:b}=M8(t,{groupBy:r,showSelect:li(t,"showSelect"),showExpand:li(t,"showExpand")}),{items:S}=eF(t,b),E=Me(()=>b.value.map(fe=>"columns."+fe.key)),I=li(t,"search"),{filteredItems:R}=jk(t,S,I,{filterKeys:E});$8({sortBy:a,multiSort:c,mustSort:s,page:p});const{sortByWithGroups:V,opened:q,extractRows:U}=j8({groupBy:r,sortBy:a}),{sortedItems:H}=lQ(R,V,b),{flatItems:Z}=q8(H,r,q),ne=Me(()=>Z.value.length),{startIndex:ie,stopIndex:oe}=E8({page:p,itemsPerPage:_,itemsLength:ne}),{paginatedItems:pe}=oQ({items:Z,startIndex:ie,stopIndex:oe,itemsPerPage:_}),de=Me(()=>U(pe.value));return D8(t,de),X8(t),tF({page:p,itemsPerPage:_,sortBy:a,groupBy:r,search:I}),co({VDataTableRows:{hideNoData:li(t,"hideNoData"),noDataText:li(t,"noDataText")}}),Pi(()=>w(Ik,{class:["v-data-table",{"v-data-table--show-select":t.showSelect}],fixedHeader:t.fixedHeader,fixedFooter:t.fixedFooter,height:t.height,hover:t.hover},{top:n.top,default:n.default??(()=>{var fe,ge,we,Ie;return w(Oi,null,[(fe=n.colgroup)==null?void 0:fe.call(n,{columns:b}),w("thead",null,[n.headers?n.headers():w(N8,{sticky:t.fixedHeader,multiSort:t.multiSort},n)]),(ge=n.thead)==null?void 0:ge.call(n),w("tbody",null,[n.body?n.body():w(Q8,{items:pe.value,"onClick:row":t["onClick:row"]},n)]),(we=n.tbody)==null?void 0:we.call(n),(Ie=n.tfoot)==null?void 0:Ie.call(n)])}),bottom:n.bottom??(()=>w(I8,null,{prepend:n["footer.prepend"]}))})),{}}});const mQ=yi()({name:"VDataTableServer",props:{color:String,loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},itemsLength:{type:[Number,String],required:!0},...iF(),...Z8(),...P8(),...J8(),...O8(),...R8(),...S8(),...z8()},emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:expanded":t=>!0,"update:groupBy":t=>!0,"click:row":(t,e)=>!0},setup(t,e){let{emit:i,slots:n}=e;const{groupBy:r}=U8(t),{sortBy:a,multiSort:c,mustSort:s}=F8(t),{page:p,itemsPerPage:_}=k8(t),b=Me(()=>parseInt(t.itemsLength,10));X8(t);const{columns:S}=M8(t,{groupBy:r,showSelect:li(t,"showSelect"),showExpand:li(t,"showExpand")}),{items:E}=eF(t,S),{toggleSort:I}=$8({sortBy:a,multiSort:c,mustSort:s,page:p}),{opened:R}=j8({groupBy:r,sortBy:a});E8({page:p,itemsPerPage:_,itemsLength:b});const{flatItems:V}=q8(E,r,R);D8(t,E),tF({page:p,itemsPerPage:_,sortBy:a,groupBy:r}),Mn("v-data-table",{toggleSort:I,sortBy:a}),co({VDataTableRows:{hideNoData:li(t,"hideNoData"),noDataText:li(t,"noDataText"),loading:li(t,"loading"),loadingText:li(t,"loadingText")}}),Pi(()=>w(Ik,{class:["v-data-table",{"v-data-table--loading":t.loading}],fixedHeader:t.fixedHeader,fixedFooter:t.fixedFooter,height:t.height,hover:t.hover},{top:n.top,default:n.default??(()=>{var q,U,H,Z;return w(Oi,null,[(q=n.colgroup)==null?void 0:q.call(n,{columns:S}),w("thead",{class:"v-data-table__thead",role:"rowgroup"},[n.headers?n.headers():w(N8,{sticky:t.fixedHeader,loading:t.loading,color:t.color},n)]),(U=n.thead)==null?void 0:U.call(n),w("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[n.body?n.body():w(Q8,{items:V.value,"onClick:row":t["onClick:row"]},n)]),(H=n.tbody)==null?void 0:H.call(n),(Z=n.tfoot)==null?void 0:Z.call(n)])}),bottom:n.bottom??(()=>w(I8,null,{prepend:n["footer.prepend"]}))}))}});var gS={},gQ={get exports(){return gS},set exports(t){gS=t}};(function(t,e){(function(i,n){t.exports=n()})(_g,function(){var i,n,r;function a(s,p){if(!i)i=p;else if(!n)n=p;else{var _="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",b={};i(b),r=p(b),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}a(["exports"],function(s){var p=typeof self<"u"?self:{},_="2.14.1";let b;const S={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(b==null){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{b={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):l}catch{b=l}}return b},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!S.API_URL)return null;try{const l=new URL(S.API_URL);return l.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":l.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},E={supported:!1,testSupport:function(l){!V&&R&&(q?U(l):I=l)}};let I,R,V=!1,q=!1;function U(l){const o=l.createTexture();l.bindTexture(l.TEXTURE_2D,o);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,R),l.isContextLost())return;E.supported=!0}catch{}l.deleteTexture(o),V=!0}p.document&&(R=p.document.createElement("img"),R.onload=function(){I&&U(I),I=null,q=!0},R.onerror=function(){V=!0,I=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const H="01";var Z=ne;function ne(l,o,u,f){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=u,this.p2y=f}ne.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(o===void 0&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,f=0;f<8;f++){var g=this.sampleCurveX(u)-l;if(Math.abs(g)<o)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=g/x}var C=0,A=1;for(u=l,f=0;f<20&&(g=this.sampleCurveX(u),!(Math.abs(g-l)<o));f++)l>g?C=u:A=u,u=.5*(A-C)+C;return u},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var ie=oe;function oe(l,o){this.x=l,this.y=o}oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,u=l.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),u=Math.sin(l),f=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=f,this},_rotateAround:function(l,o){var u=Math.cos(l),f=Math.sin(l),g=o.y+f*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oe.convert=function(l){return l instanceof oe?l:Array.isArray(l)?new oe(l[0],l[1]):l};const pe=Math.PI/180,de=180/Math.PI;function fe(l){return l*pe}function ge(l){return l*de}const we=[[0,0],[1,0],[1,1],[0,1]];function Ie(l){if(l<=0)return 0;if(l>=1)return 1;const o=l*l,u=o*l;return 4*(l<.5?u:3*(l-o)+u-.75)}function Oe(l,o,u,f){const g=new Z(l,o,u,f);return function(x){return g.solve(x)}}const ke=Oe(.25,.1,.25,1);function Ee(l,o,u){return Math.min(u,Math.max(o,l))}function Qe(l,o,u){return(u=Ee((u-l)/(o-l),0,1))*u*(3-2*u)}function gt(l,o,u){const f=u-o,g=((l-o)%f+f)%f+o;return g===o?u:g}function nt(l,o,u){if(!l.length)return u(null,[]);let f=l.length;const g=new Array(l.length);let x=null;l.forEach((C,A)=>{o(C,(B,$)=>{B&&(x=B),g[A]=$,--f==0&&u(x,g)})})}function ft(l){const o=[];for(const u in l)o.push(l[u]);return o}function Tt(l,...o){for(const u of o)for(const f in u)l[f]=u[f];return l}let pt=1;function et(){return pt++}function Mt(){return function l(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function Qt(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function Fe(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function tt(l,o){l.forEach(u=>{o[u]&&(o[u]=o[u].bind(o))})}function Rt(l,o){return l.indexOf(o,l.length-o.length)!==-1}function Xt(l,o,u){const f={};for(const g in l)f[g]=o.call(u||this,l[g],g,l);return f}function Ei(l,o,u){const f={};for(const g in l)o.call(u||this,l[g],g,l)&&(f[g]=l[g]);return f}function Ni(l){return Array.isArray(l)?l.map(Ni):typeof l=="object"&&l?Xt(l,Ni):l}const Vi={};function Ve(l){Vi[l]||(typeof console<"u"&&console.warn(l),Vi[l]=!0)}function dt(l,o,u){return(u.y-l.y)*(o.x-l.x)>(o.y-l.y)*(u.x-l.x)}function kt(l){let o=0;for(let u,f,g=0,x=l.length,C=x-1;g<x;C=g++)u=l[g],f=l[C],o+=(f.x-u.x)*(u.y+f.y);return o}function Xe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function it(l){const o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,x)=>{const C=g||x;return o[f]=!C||C.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}let ct=null;function At(l){if(ct==null){const o=l.navigator?l.navigator.userAgent:null;ct=!!l.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return ct}function Gt(l){try{const o=p[l];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Bt(l,o){return[l[4*o],l[4*o+1],l[4*o+2],l[4*o+3]]}const Yt="mapbox-tiles";let gi,_i,zi=500,Hi=50;function Zi(){try{return p.caches}catch{}}function Ci(){Zi()&&!gi&&(gi=p.caches.open(Yt))}function ci(l){const o=l.indexOf("?");if(o<0)return l;const u=function(g){const x=g.indexOf("?");return x>0?g.slice(x+1).split("&"):[]}(l),f=u.filter(g=>{const x=g.split("=");return x[0]==="language"||x[0]==="worldview"});return f.length?`${l.slice(0,o)}?${f.join("&")}`:l.slice(0,o)}let Si=1/0;const sn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(sn);class vn extends Error{constructor(o,u,f){u===401&&Fo(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const hn=Xe()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,Nn=function(l,o){if(!(/^file:/.test(u=l.url)||/^file:/.test(hn())&&!/^\w+:/.test(u))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return function(f,g){const x=new p.AbortController,C=new p.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:hn(),referrerPolicy:f.referrerPolicy,signal:x.signal});let A=!1,B=!1;const $=(Y=C.url).indexOf("sku=")>0&&Fo(Y);var Y;f.type==="json"&&C.headers.set("Accept","application/json");const J=(he,me,xe)=>{if(B)return;if(he&&he.message!=="SecurityError"&&Ve(he),me&&xe)return se(me);const Le=Date.now();p.fetch(C).then(Ze=>{if(Ze.ok){const st=$?Ze.clone():null;return se(Ze,st,Le)}return g(new vn(Ze.statusText,Ze.status,f.url))}).catch(Ze=>{Ze.name!=="AbortError"&&g(new Error(`${Ze.message} ${f.url}`))})},se=(he,me,xe)=>{(f.type==="arrayBuffer"?he.arrayBuffer():f.type==="json"?he.json():he.text()).then(Le=>{B||(me&&xe&&function(Ze,st,qe){if(Ci(),!gi)return;const rt={status:st.status,statusText:st.statusText,headers:new p.Headers};st.headers.forEach(($t,Lt)=>rt.headers.set(Lt,$t));const ht=it(st.headers.get("Cache-Control")||"");if(ht["no-store"])return;ht["max-age"]&&rt.headers.set("Expires",new Date(qe+1e3*ht["max-age"]).toUTCString());const at=rt.headers.get("Expires");at&&(new Date(at).getTime()-qe<42e4||function($t,Lt){if(_i===void 0)try{new Response(new ReadableStream),_i=!0}catch{_i=!1}_i?Lt($t.body):$t.blob().then(Lt)}(st,$t=>{const Lt=new p.Response($t,rt);Ci(),gi&&gi.then(Kt=>Kt.put(ci(Ze.url),Lt)).catch(Kt=>Ve(Kt.message))}))}(C,me,xe),A=!0,g(null,Le,he.headers.get("Cache-Control"),he.headers.get("Expires")))}).catch(Le=>{B||g(new Error(Le.message))})};return $?function(he,me){if(Ci(),!gi)return me(null);const xe=ci(he.url);gi.then(Le=>{Le.match(xe).then(Ze=>{const st=function(qe){if(!qe)return!1;const rt=new Date(qe.headers.get("Expires")||0),ht=it(qe.headers.get("Cache-Control")||"");return rt>Date.now()&&!ht["no-cache"]}(Ze);Le.delete(xe),st&&Le.put(xe,Ze.clone()),me(null,Ze,st)}).catch(me)}).catch(me)}(C,J):J(null,null),{cancel:()=>{B=!0,A||x.abort()}}}(l,o);if(Xe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o,void 0,!0)}var u;return function(f,g){const x=new p.XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(x.responseType="arraybuffer");for(const C in f.headers)x.setRequestHeader(C,f.headers[C]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let C=x.response;if(f.type==="json")try{C=JSON.parse(x.response)}catch(A){return g(A)}g(null,C,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else g(new vn(x.statusText,x.status,f.url))},x.send(f.body),{cancel:()=>x.abort()}}(l,o)},yr=function(l,o){return Nn(Tt(l,{type:"arrayBuffer"}),o)};function Mr(l){const o=p.document.createElement("a");return o.href=l,o.protocol===p.document.location.protocol&&o.host===p.document.location.host}const Yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let fr,Ko;fr=[],Ko=0;const An=function(l,o){if(E.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),Ko>=S.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:l,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return fr.push(x),x}Ko++;let u=!1;const f=()=>{if(!u)for(u=!0,Ko--;fr.length&&Ko<S.MAX_PARALLEL_IMAGE_REQUESTS;){const x=fr.shift(),{requestParameters:C,callback:A,cancelled:B}=x;B||(x.cancel=An(C,A).cancel)}},g=yr(l,(x,C,A,B)=>{f(),x?o(x):C&&(p.createImageBitmap?function($,Y){const J=new p.Blob([new Uint8Array($)],{type:"image/png"});p.createImageBitmap(J).then(se=>{Y(null,se)}).catch(se=>{Y(new Error(`Could not load image because of ${se.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(C,($,Y)=>o($,Y,A,B)):function($,Y){const J=new p.Image,se=p.URL;J.onload=()=>{Y(null,J),se.revokeObjectURL(J.src),J.onload=null,p.requestAnimationFrame(()=>{J.src=Yr})},J.onerror=()=>Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const he=new p.Blob([new Uint8Array($)],{type:"image/png"});J.src=$.byteLength?se.createObjectURL(he):Yr}(C,($,Y)=>o($,Y,A,B)))});return{cancel:()=>{g.cancel(),f()}}},Is="NO_ACCESS_TOKEN";function Xr(l){return l.indexOf("mapbox:")===0}function Fo(l){return S.API_URL_REGEX.test(l)}function za(l){return S.API_CDN_URL_REGEX.test(l)}function Hl(l){return S.API_STYLE_REGEX.test(l)&&!va(l)}function va(l){return S.API_SPRITE_REGEX.test(l)}const ps=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fr(l){const o=l.match(ps);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function ms(l){const o=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${o}`}function Io(l){if(!l)return null;const o=l.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(o[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class gs{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const u=Io(S.ACCESS_TOKEN);let f="";return f=u&&u.u?p.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(g,x)=>String.fromCharCode(+("0x"+x)))):S.ACCESS_TOKEN||"",o?`mapbox.eventData.${o}:${f}`:`mapbox.eventData:${f}`}fetchEventData(){const o=Gt("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=p.localStorage.getItem(u);g&&(this.eventData=JSON.parse(g));const x=p.localStorage.getItem(f);x&&(this.anonId=x)}catch{Ve("Unable to read from LocalStorage")}}saveEventData(){const o=Gt("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{p.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{Ve("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,u,f,g){if(!S.EVENTS_URL)return;const x=Fr(S.EVENTS_URL);x.params.push(`access_token=${g||S.ACCESS_TOKEN||""}`);const C={event:this.type,created:new Date(o).toISOString()},A=u?Tt(C,u):C,B={url:ms(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([A])};this.pendingRequest=function($,Y){return Nn(Tt($,{method:"POST"}),Y)}(B,$=>{this.pendingRequest=null,f($),this.saveEventData(),this.processRequests(g)})}queueRequest(o,u){this.queue.push(o),this.processRequests(u)}}const Ge=new class extends gs{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,o){S.EVENTS_URL&&S.ACCESS_TOKEN&&Array.isArray(l)&&l.some(u=>Xr(u)||Fo(u))&&this.queueRequest(Date.now(),o)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Io(S.ACCESS_TOKEN),u=o?o.u:S.ACCESS_TOKEN;let f=u!==this.eventData.tokenU;Fe(this.anonId)||(this.anonId=Mt(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const x=new Date(this.eventData.lastSuccess),C=new Date(g),A=(g-this.eventData.lastSuccess)/864e5;f=f||A>=1||A<-1||x.getDate()!==C.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:H,"enabled.telemetry":!1,userId:this.anonId},x=>{x||(this.eventData.lastSuccess=g,this.eventData.tokenU=u)},l):this.processRequests()}},_e=Ge.postTurnstileEvent.bind(Ge),Te=new class extends gs{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,o,u,f){this.skuToken=o,this.errorCb=f,S.EVENTS_URL&&(u||S.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(Is)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:u}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Fe(this.anonId)||(this.anonId=Mt()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:H,skuToken:this.skuToken,userId:this.anonId},f=>{f?this.errorCb(f):o&&(this.success[o]=!0)},l))}},ze=Te.postMapLoadEvent.bind(Te),De=new class extends gs{constructor(){super("gljs.performance")}postPerformanceEvent(l,o){S.EVENTS_URL&&(l||S.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},l)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:u}=this.queue.shift(),f=function(g){const x=p.performance.getEntriesByType("resource"),C=p.performance.getEntriesByType("mark"),A=function(se){const he={};if(se){for(const me in se)if(me!=="other")for(const xe of se[me]){const Le=`${me}ResolveRangeMin`,Ze=`${me}ResolveRangeMax`,st=`${me}RequestCount`,qe=`${me}RequestCachedCount`;he[Le]=Math.min(he[Le]||1/0,xe.startTime),he[Ze]=Math.max(he[Ze]||-1/0,xe.responseEnd);const rt=ht=>{he[ht]===void 0&&(he[ht]=0),++he[ht]};xe.transferSize!==void 0&&xe.transferSize===0&&rt(qe),rt(st)}}return he}(function(se,he){const me={};if(se)for(const xe of se){const Le=he(xe);me[Le]===void 0&&(me[Le]=[]),me[Le].push(xe)}return me}(x,Ii)),B=p.devicePixelRatio,$=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,Y={counters:[],metadata:[],attributes:[]},J=(se,he,me)=>{me!=null&&se.push({name:he,value:me.toString()})};for(const se in A)J(Y.counters,se,A[se]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(J(Y.counters,"interactionRangeMin",g.interactionRange[0]),J(Y.counters,"interactionRangeMax",g.interactionRange[1])),C)for(const se of Object.keys(Pt)){const he=Pt[se],me=C.find(xe=>xe.name===he);me&&J(Y.counters,he,me.startTime)}return J(Y.counters,"visibilityHidden",g.visibilityHidden),J(Y.attributes,"style",function(se){if(se)for(const he of se){const me=he.name.split("?")[0];if(Hl(me)){const xe=me.split("/").slice(-2);if(xe.length===2)return`mapbox://styles/${xe[0]}/${xe[1]}`}}}(x)),J(Y.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),J(Y.attributes,"fogEnabled",g.fogEnabled?"true":"false"),J(Y.attributes,"projection",g.projection),J(Y.attributes,"zoom",g.zoom),J(Y.metadata,"devicePixelRatio",B),J(Y.metadata,"connectionEffectiveType",$?$.effectiveType:void 0),J(Y.metadata,"navigatorUserAgent",p.navigator.userAgent),J(Y.metadata,"screenWidth",p.screen.width),J(Y.metadata,"screenHeight",p.screen.height),J(Y.metadata,"windowWidth",p.innerWidth),J(Y.metadata,"windowHeight",p.innerHeight),J(Y.metadata,"mapWidth",g.width/B),J(Y.metadata,"mapHeight",g.height/B),J(Y.metadata,"webglRenderer",g.renderer),J(Y.metadata,"webglVendor",g.vendor),J(Y.metadata,"sdkVersion",_),J(Y.metadata,"sdkIdentifier","mapbox-gl-js"),Y}(u);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,()=>{},l)}},_t=De.postPerformanceEvent.bind(De),Ct=new class extends gs{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,o,u,f){if(!S.API_URL||!S.SESSION_PATH)return;const g=Fr(S.API_URL+S.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||S.ACCESS_TOKEN||""}`);const x={url:ms(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(C,A){return Nn(Tt(C,{method:"GET"}),A)}(x,C=>{this.pendingRequest=null,u(C),this.saveEventData(),this.processRequests(f)})}getSessionAPI(l,o,u,f){this.skuToken=o,this.errorCb=f,S.SESSION_PATH&&S.API_URL&&(u||S.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(Is)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:u}=this.queue.shift();o&&this.success[o]||this.getSession(u,this.skuToken,f=>{f?this.errorCb(f):o&&(this.success[o]=!0)},l)}},St=Ct.getSessionAPI.bind(Ct),vt=new Set,Pt={create:"create",load:"load",fullLoad:"fullLoad"},jt={mark(l){p.performance.mark(l)},measure(l,o,u){p.performance.measure(l,o,u)}};function Ii(l){const o=l.name.split("?")[0];return za(o)&&o.includes("mapbox-gl.js")?"javascript":za(o)&&o.includes("mapbox-gl.css")?"css":function(u){return S.API_FONTS_REGEX.test(u)}(o)?"fontRange":va(o)?"sprite":Hl(o)?"style":function(u){return S.API_TILEJSON_REGEX.test(u)}(o)?"tilejson":"other"}const ai=p.performance;function Ji(l){const o=l?l.url.toString():void 0;return ai.getEntriesByName(o)}let Qi,Gi,Bi,yn;const Ln={now:()=>Bi!==void 0?Bi:p.performance.now(),setNow(l){Bi=l},restoreNow(){Bi=void 0},frame(l){const o=p.requestAnimationFrame(l);return{cancel:()=>p.cancelAnimationFrame(o)}},getImageData(l,o=0){const{width:u,height:f}=l;yn||(yn=p.document.createElement("canvas"));const g=yn.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>yn.width||f>yn.height)&&(yn.width=u,yn.height=f),g.clearRect(-o,-o,u+2*o,f+2*o),g.drawImage(l,0,0,u,f),g.getImageData(-o,-o,u+2*o,f+2*o)},resolveURL:l=>(Qi||(Qi=p.document.createElement("a")),Qi.href=l,Qi.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&(Gi==null&&(Gi=p.matchMedia("(prefers-reduced-motion: reduce)")),Gi.matches)}};function rn(l,o,u){u[l]&&u[l].indexOf(o)!==-1||(u[l]=u[l]||[],u[l].push(o))}function Jn(l,o,u){if(u&&u[l]){const f=u[l].indexOf(o);f!==-1&&u[l].splice(f,1)}}class er{constructor(o,u={}){Tt(this,u),this.type=o}}class ya extends er{constructor(o,u={}){super("error",Tt({error:o},u))}}class $o{on(o,u){return this._listeners=this._listeners||{},rn(o,u,this._listeners),this}off(o,u){return Jn(o,u,this._listeners),Jn(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},rn(o,u,this._oneTimeListeners),this):new Promise(f=>this.once(o,f))}fire(o,u){typeof o=="string"&&(o=new er(o,u||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const A of g)A.call(this,o);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const A of x)Jn(f,A,this._oneTimeListeners),A.call(this,o);const C=this._eventedParent;C&&(Tt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(o))}else o instanceof ya&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var Wt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Po(l,...o){for(const u of o)for(const f in u)l[f]=u[f];return l}function pr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function ba(l){if(Array.isArray(l))return l.map(ba);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const o={};for(const u in l)o[u]=ba(l[u]);return o}return pr(l)}class Lc extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}var Qs=Lc;class En{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(o){return new En(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var dr=En;const Qo={kind:"null"},bi={kind:"number"},_n={kind:"string"},bn={kind:"boolean"},fn={kind:"color"},nr={kind:"object"},xn={kind:"value"},go={kind:"collator"},ns={kind:"formatted"},Ps={kind:"resolvedImage"};function Ur(l,o){return{kind:"array",itemType:l,N:o}}function In(l){if(l.kind==="array"){const o=In(l.itemType);return typeof l.N=="number"?`array<${o}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${o}>`}return l.kind}const tr=[Qo,bi,_n,bn,fn,ns,nr,Ur(xn),Ps];function Or(l,o){if(o.kind==="error")return null;if(l.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Or(l.itemType,o.itemType))&&(typeof l.N!="number"||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if(l.kind==="value"){for(const u of tr)if(!Or(u,o))return null}}return`Expected ${In(l)} but found ${In(o)} instead.`}function Ao(l,o){return o.some(u=>u.kind===l.kind)}function _o(l,o){return o.some(u=>u==="null"?l===null:u==="array"?Array.isArray(l):u==="object"?l&&!Array.isArray(l)&&typeof l=="object":u===typeof l)}var Gl,No={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function pl(l){return(l=Math.round(l))<0?0:l>255?255:l}function Jo(l){return pl(l[l.length-1]==="%"?parseFloat(l)/100*255:parseInt(l))}function Mo(l){return(o=l[l.length-1]==="%"?parseFloat(l)/100:parseFloat(l))<0?0:o>1?1:o;var o}function Va(l,o,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?l+(o-l)*u*6:2*u<1?o:3*u<2?l+(o-l)*(2/3-u)*6:l}try{Gl={}.parseCSSColor=function(l){var o,u=l.replace(/ /g,"").toLowerCase();if(u in No)return No[u].slice();if(u[0]==="#")return u.length===4?(o=parseInt(u.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:u.length===7&&(o=parseInt(u.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=u.indexOf("("),g=u.indexOf(")");if(f!==-1&&g+1===u.length){var x=u.substr(0,f),C=u.substr(f+1,g-(f+1)).split(","),A=1;switch(x){case"rgba":if(C.length!==4)return null;A=Mo(C.pop());case"rgb":return C.length!==3?null:[Jo(C[0]),Jo(C[1]),Jo(C[2]),A];case"hsla":if(C.length!==4)return null;A=Mo(C.pop());case"hsl":if(C.length!==3)return null;var B=(parseFloat(C[0])%360+360)%360/360,$=Mo(C[1]),Y=Mo(C[2]),J=Y<=.5?Y*($+1):Y+$-Y*$,se=2*Y-J;return[pl(255*Va(se,J,B+1/3)),pl(255*Va(se,J,B)),pl(255*Va(se,J,B-1/3)),A];default:return null}}return null}}catch{}class ws{constructor(o,u,f,g=1){this.r=o,this.g=u,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof ws)return o;if(typeof o!="string")return;const u=Gl(o);return u?new ws(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[o,u,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(u)},${Math.round(f)},${g})`}toArray(){const{r:o,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*u/g,255*f/g,g]}toArray01(){const{r:o,g:u,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,u/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:u,b:f,a:g}=this;return[o,u,f,g]}}ws.black=new ws(0,0,0,1),ws.white=new ws(1,1,1,1),ws.transparent=new ws(0,0,0,0),ws.red=new ws(1,0,0,1),ws.blue=new ws(0,0,1,1);var br=ws;class ml{constructor(o,u,f){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class gl{constructor(o,u,f,g,x){this.text=o.normalize?o.normalize():o,this.image=u,this.scale=f,this.fontStack=g,this.textColor=x}}class Vs{constructor(o){this.sections=o}static fromString(o){return new Vs([new gl(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Vs?o:Vs.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const u of this.sections){if(u.image){o.push(["image",u.image.name]);continue}o.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toArray())),o.push(f)}return o}}class ln{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new ln({name:o,available:!1}):null}serialize(){return["image",this.name]}}function As(l,o,u,f){return typeof l=="number"&&l>=0&&l<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,o,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,o,u,f]:[l,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Yn(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof br||l instanceof ml||l instanceof Vs||l instanceof ln)return!0;if(Array.isArray(l)){for(const o of l)if(!Yn(o))return!1;return!0}if(typeof l=="object"){for(const o in l)if(!Yn(l[o]))return!1;return!0}return!1}function jr(l){if(l===null)return Qo;if(typeof l=="string")return _n;if(typeof l=="boolean")return bn;if(typeof l=="number")return bi;if(l instanceof br)return fn;if(l instanceof ml)return go;if(l instanceof Vs)return ns;if(l instanceof ln)return Ps;if(Array.isArray(l)){const o=l.length;let u;for(const f of l){const g=jr(f);if(u){if(u===g)continue;u=xn;break}u=g}return Ur(u||xn,o)}return nr}function _l(l){const o=typeof l;return l===null?"":o==="string"||o==="number"||o==="boolean"?String(l):l instanceof br||l instanceof Vs||l instanceof ln?l.toString():JSON.stringify(l)}class Wl{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Yn(o[1]))return u.error("invalid value");const f=o[1];let g=jr(f);const x=u.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new Wl(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof br?["rgba"].concat(this.value.toArray()):this.value instanceof Vs?this.value.serialize():this.value}}var xa=Wl,Lr=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const ql={string:_n,number:bi,boolean:bn,object:nr};class Oo{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let f,g=1;const x=o[0];if(x==="array"){let A,B;if(o.length>2){const $=o[1];if(typeof $!="string"||!($ in ql)||$==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);A=ql[$],g++}else A=xn;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);B=o[2],g++}f=Ur(A,B)}else f=ql[x];const C=[];for(;g<o.length;g++){const A=u.parse(o[g],g,xn);if(!A)return null;C.push(A)}return new Oo(f,C)}evaluate(o){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(o);if(!Or(this.type,jr(f)))return f;if(u===this.args.length-1)throw new Lr(`Expected value to be of type ${In(this.type)}, but found ${In(jr(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,u=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(f=>f.serialize()))}}var xr=Oo;class zo{constructor(o){this.type=ns,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const g=[];let x=!1;for(let C=1;C<=o.length-1;++C){const A=o[C];if(x&&typeof A=="object"&&!Array.isArray(A)){x=!1;let B=null;if(A["font-scale"]&&(B=u.parse(A["font-scale"],1,bi),!B))return null;let $=null;if(A["text-font"]&&($=u.parse(A["text-font"],1,Ur(_n)),!$))return null;let Y=null;if(A["text-color"]&&(Y=u.parse(A["text-color"],1,fn),!Y))return null;const J=g[g.length-1];J.scale=B,J.font=$,J.textColor=Y}else{const B=u.parse(o[C],1,xn);if(!B)return null;const $=B.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:B,scale:null,font:null,textColor:null})}}return new zo(g)}evaluate(o){return new Vs(this.sections.map(u=>{const f=u.content.evaluate(o);return jr(f)===Ps?new gl("",f,null,null,null):new gl(_l(f),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const u of this.sections){o.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),o.push(f)}return o}}class ku{constructor(o){this.type=Ps,this.input=o}static parse(o,u){if(o.length!==2)return u.error("Expected two arguments.");const f=u.parse(o[1],1,_n);return f?new ku(f):u.error("No image name provided.")}evaluate(o){const u=this.input.evaluate(o),f=ln.fromString(u);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(u)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const hd={"to-boolean":bn,"to-color":fn,"to-number":bi,"to-string":_n};class Dc{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[0];if((f==="to-boolean"||f==="to-string")&&o.length!==2)return u.error("Expected one argument.");const g=hd[f],x=[];for(let C=1;C<o.length;C++){const A=u.parse(o[C],C,xn);if(!A)return null;x.push(A)}return new Dc(g,x)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let u,f;for(const g of this.args){if(u=g.evaluate(o),f=null,u instanceof br)return u;if(typeof u=="string"){const x=o.parseColor(u);if(x)return x}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:As(u[0],u[1],u[2],u[3]),!f))return new br(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Lr(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(o),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new Lr(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?Vs.fromString(_l(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?ln.fromString(_l(this.args[0].evaluate(o))):_l(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new zo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ku(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild(u=>{o.push(u.serialize())}),o}}var vl=Dc;const Zl=["Unknown","Point","LineString","Polygon"];var Eu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:u,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*o-l[0])+this.featureDistanceData.bearing[1]*(f*o-l[1])}return 0}parseColor(l){let o=this._parseColorCache[l];return o||(o=this._parseColorCache[l]=br.parse(l)),o}};class Ua{constructor(o,u,f,g){this.name=o,this.type=u,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,u){const f=o[0],g=Ua.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,C=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=C.filter(([$])=>!Array.isArray($)||$.length===o.length-1);let B=null;for(const[$,Y]of A){B=new ac(u.registry,u.path,null,u.scope);const J=[];let se=!1;for(let he=1;he<o.length;he++){const me=o[he],xe=Array.isArray($)?$[he-1]:$.type,Le=B.parse(me,1+J.length,xe);if(!Le){se=!0;break}J.push(Le)}if(!se)if(Array.isArray($)&&$.length!==J.length)B.error(`Expected ${$.length} arguments, but found ${J.length} instead.`);else{for(let he=0;he<J.length;he++){const me=Array.isArray($)?$[he]:$.type,xe=J[he];B.concat(he+1).checkSubtype(me,xe.type)}if(B.errors.length===0)return new Ua(f,x,Y,J)}}if(A.length===1)u.errors.push(...B.errors);else{const $=(A.length?A:C).map(([J])=>{return se=J,Array.isArray(se)?`(${se.map(In).join(", ")})`:`(${In(se.type)}...)`;var se}).join(" | "),Y=[];for(let J=1;J<o.length;J++){const se=u.parse(o[J],1+Y.length);if(!se)return null;Y.push(In(se.type))}u.error(`Expected arguments of type ${$}, but found (${Y.join(", ")}) instead.`)}return null}static register(o,u){Ua.definitions=u;for(const f in u)o[f]=Ua}}var Sn=Ua;class Iu{constructor(o,u,f){this.type=go,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,bn);if(!g)return null;const x=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,bn);if(!x)return null;let C=null;return f.locale&&(C=u.parse(f.locale,1,_n),!C)?null:new Iu(g,x,C)}evaluate(o){return new ml(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const us=8192;function Ms(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function Yl(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function nc(l,o){const u=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*us),Math.round(f*g*us)]}function ja(l,o,u){const f=l[0]-o[0],g=l[1]-o[1],x=l[0]-u[0],C=l[1]-u[1];return f*C-x*g==0&&f*x<=0&&g*C<=0}function Ha(l,o){let u=!1;for(let C=0,A=o.length;C<A;C++){const B=o[C];for(let $=0,Y=B.length;$<Y-1;$++){if(ja(l,B[$],B[$+1]))return!1;(g=B[$])[1]>(f=l)[1]!=(x=B[$+1])[1]>f[1]&&f[0]<(x[0]-g[0])*(f[1]-g[1])/(x[1]-g[1])+g[0]&&(u=!u)}}var f,g,x;return u}function yl(l,o){for(let u=0;u<o.length;u++)if(Ha(l,o[u]))return!0;return!1}function Xl(l,o,u,f){const g=f[0]-u[0],x=f[1]-u[1],C=(l[0]-u[0])*x-g*(l[1]-u[1]),A=(o[0]-u[0])*x-g*(o[1]-u[1]);return C>0&&A<0||C<0&&A>0}function vo(l,o,u){for(const $ of u)for(let Y=0;Y<$.length-1;++Y)if((A=[(C=$[Y+1])[0]-(x=$[Y])[0],C[1]-x[1]])[0]*(B=[(g=o)[0]-(f=l)[0],g[1]-f[1]])[1]-A[1]*B[0]!=0&&Xl(f,g,x,C)&&Xl(x,C,f,g))return!0;var f,g,x,C,A,B;return!1}function Os(l,o){for(let u=0;u<l.length;++u)if(!Ha(l[u],o))return!1;for(let u=0;u<l.length-1;++u)if(vo(l[u],l[u+1],o))return!1;return!0}function Kl(l,o){for(let u=0;u<o.length;u++)if(Os(l,o[u]))return!0;return!1}function Js(l,o,u){const f=[];for(let g=0;g<l.length;g++){const x=[];for(let C=0;C<l[g].length;C++){const A=nc(l[g][C],u);Ms(o,A),x.push(A)}f.push(x)}return f}function rc(l,o,u){const f=[];for(let g=0;g<l.length;g++){const x=Js(l[g],o,u);f.push(x)}return f}function sc(l,o,u,f){if(l[0]<u[0]||l[0]>u[2]){const g=.5*f;let x=l[0]-u[0]>g?-f:u[0]-l[0]>g?f:0;x===0&&(x=l[0]-u[2]>g?-f:u[2]-l[0]>g?f:0),l[0]+=x}Ms(o,l)}function eo(l,o,u,f){const g=Math.pow(2,f.z)*us,x=[f.x*us,f.y*us],C=[];if(!l)return C;for(const A of l)for(const B of A){const $=[B.x+x[0],B.y+x[1]];sc($,o,u,g),C.push($)}return C}function Un(l,o,u,f){const g=Math.pow(2,f.z)*us,x=[f.x*us,f.y*us],C=[];if(!l)return C;for(const B of l){const $=[];for(const Y of B){const J=[Y.x+x[0],Y.y+x[1]];Ms(o,J),$.push(J)}C.push($)}if(o[2]-o[0]<=g/2){(A=o)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const B of C)for(const $ of B)sc($,o,u,g)}var A;return C}class wa{constructor(o,u){this.type=bn,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Yn(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const x=f.features[g].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new wa(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new wa(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new wa(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(!C)return!1;if(f.type==="Polygon"){const A=Js(f.coordinates,x,C),B=eo(u.geometry(),g,x,C);if(!Yl(g,x))return!1;for(const $ of B)if(!Ha($,A))return!1}if(f.type==="MultiPolygon"){const A=rc(f.coordinates,x,C),B=eo(u.geometry(),g,x,C);if(!Yl(g,x))return!1;for(const $ of B)if(!yl($,A))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],C=u.canonicalID();if(!C)return!1;if(f.type==="Polygon"){const A=Js(f.coordinates,x,C),B=Un(u.geometry(),g,x,C);if(!Yl(g,x))return!1;for(const $ of B)if(!Os($,A))return!1}if(f.type==="MultiPolygon"){const A=rc(f.coordinates,x,C),B=Un(u.geometry(),g,x,C);if(!Yl(g,x))return!1;for(const $ of B)if(!Kl($,A))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var bl=wa;function Ta(l){if(l instanceof Sn&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof bl)return!1;let o=!0;return l.eachChild(u=>{o&&!Ta(u)&&(o=!1)}),o}function Vo(l){if(l instanceof Sn&&l.name==="feature-state")return!1;let o=!0;return l.eachChild(u=>{o&&!Vo(u)&&(o=!1)}),o}function Sa(l,o){if(l instanceof Sn&&o.indexOf(l.name)>=0)return!1;let u=!0;return l.eachChild(f=>{u&&!Sa(f,o)&&(u=!1)}),u}class ea{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=o[1];return u.scope.has(f)?new ea(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var oc=ea;class xl{constructor(o,u=[],f,g=new dr,x=[]){this.registry=o,this.path=u,this.key=u.map(C=>`[${C}]`).join(""),this.scope=g,this.errors=x,this.expectedType=f}parse(o,u,f,g,x={}){return u?this.concat(u,f,g)._parse(o,x):this._parse(o,x)}_parse(o,u){function f(g,x,C){return C==="assert"?new xr(x,[g]):C==="coerce"?new vl(x,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let C=x.parse(o,this);if(!C)return null;if(this.expectedType){const A=this.expectedType,B=C.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||B.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string"){if(this.checkSubtype(A,B))return null}else C=f(C,A,u.typeAnnotation||"coerce");else C=f(C,A,u.typeAnnotation||"assert")}if(!(C instanceof xa)&&C.type.kind!=="resolvedImage"&&Uo(C)){const A=new Eu;try{C=new xa(C.type,C.evaluate(A))}catch(B){return this.error(B.message),null}}return C}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,f){const g=typeof o=="number"?this.path.concat(o):this.path,x=f?this.scope.concat(f):this.scope;return new xl(this.registry,g,u||null,x,this.errors)}error(o,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Qs(f,o))}checkSubtype(o,u){const f=Or(o,u);return f&&this.error(f),f}}var ac=xl;function Uo(l){if(l instanceof oc)return Uo(l.boundExpression);if(l instanceof Sn&&l.name==="error"||l instanceof Iu||l instanceof bl)return!1;const o=l instanceof vl||l instanceof xr;let u=!0;return l.eachChild(f=>{u=o?u&&Uo(f):u&&f instanceof xa}),!!u&&Ta(l)&&Sa(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ga(l,o){const u=l.length-1;let f,g,x=0,C=u,A=0;for(;x<=C;)if(A=Math.floor((x+C)/2),f=l[A],g=l[A+1],f<=o){if(A===u||o<g)return A;x=A+1}else{if(!(f>o))throw new Lr("Input is not a number.");C=A-1}return 0}class Wa{constructor(o,u,f){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(o[1],1,bi);if(!f)return null;const g=[];let x=null;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);for(let C=1;C<o.length;C+=2){const A=C===1?-1/0:o[C],B=o[C+1],$=C,Y=C+1;if(typeof A!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(g.length&&g[g.length-1][0]>=A)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const J=u.parse(B,Y,x);if(!J)return null;x=x||J.type,g.push([A,J])}return new Wa(x,f,g)}evaluate(o){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;return g>=u[x-1]?f[x-1].evaluate(o):f[Ga(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o}}var cs=Wa;function kn(l,o,u){return l*(1-u)+o*u}var Lo=Object.freeze({__proto__:null,number:kn,color:function(l,o,u){return new br(kn(l.r,o.r,u),kn(l.g,o.g,u),kn(l.b,o.b,u),kn(l.a,o.a,u))},array:function(l,o,u){return l.map((f,g)=>kn(f,o[g],u))}});const Us=.95047,Rc=1.08883,lc=4/29,uc=6/29,Ql=3*uc*uc,cc=Math.PI/180,fd=180/Math.PI;function dc(l){return l>.008856451679035631?Math.pow(l,1/3):l/Ql+lc}function Pu(l){return l>uc?l*l*l:Ql*(l-lc)}function Au(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function to(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function qa(l){const o=to(l.r),u=to(l.g),f=to(l.b),g=dc((.4124564*o+.3575761*u+.1804375*f)/Us),x=dc((.2126729*o+.7151522*u+.072175*f)/1);return{l:116*x-16,a:500*(g-x),b:200*(x-dc((.0193339*o+.119192*u+.9503041*f)/Rc)),alpha:l.a}}function pd(l){let o=(l.l+16)/116,u=isNaN(l.a)?o:o+l.a/500,f=isNaN(l.b)?o:o-l.b/200;return o=1*Pu(o),u=Us*Pu(u),f=Rc*Pu(f),new br(Au(3.2404542*u-1.5371385*o-.4985314*f),Au(-.969266*u+1.8760108*o+.041556*f),Au(.0556434*u-.2040259*o+1.0572252*f),l.alpha)}function ta(l,o,u){const f=o-l;return l+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Mu={forward:qa,reverse:pd,interpolate:function(l,o,u){return{l:kn(l.l,o.l,u),a:kn(l.a,o.a,u),b:kn(l.b,o.b,u),alpha:kn(l.alpha,o.alpha,u)}}},yo={forward:function(l){const{l:o,a:u,b:f}=qa(l),g=Math.atan2(f,u)*fd;return{h:g<0?g+360:g,c:Math.sqrt(u*u+f*f),l:o,alpha:l.a}},reverse:function(l){const o=l.h*cc,u=l.c;return pd({l:l.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:l.alpha})},interpolate:function(l,o,u){return{h:ta(l.h,o.h,u),c:kn(l.c,o.c,u),l:kn(l.l,o.l,u),alpha:kn(l.alpha,o.alpha,u)}}};var wl=Object.freeze({__proto__:null,lab:Mu,hcl:yo});class ia{constructor(o,u,f,g,x){this.type=o,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[C,A]of x)this.labels.push(C),this.outputs.push(A)}static interpolationFactor(o,u,f,g){let x=0;if(o.name==="exponential")x=Ou(u,o.base,f,g);else if(o.name==="linear")x=Ou(u,1,f,g);else if(o.name==="cubic-bezier"){const C=o.controlPoints;x=new Z(C[0],C[1],C[2],C[3]).solve(Ou(u,1,f,g))}return x}static parse(o,u){let[f,g,x,...C]=o;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const $=g[1];if(typeof $!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:$}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const $=g.slice(1);if($.length!==4||$.some(Y=>typeof Y!="number"||Y<0||Y>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:$}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(x=u.parse(x,2,bi),!x)return null;const A=[];let B=null;f==="interpolate-hcl"||f==="interpolate-lab"?B=fn:u.expectedType&&u.expectedType.kind!=="value"&&(B=u.expectedType);for(let $=0;$<C.length;$+=2){const Y=C[$],J=C[$+1],se=$+3,he=$+4;if(typeof Y!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(A.length&&A[A.length-1][0]>=Y)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const me=u.parse(J,he,B);if(!me)return null;B=B||me.type,A.push([Y,me])}return B.kind==="number"||B.kind==="color"||B.kind==="array"&&B.itemType.kind==="number"&&typeof B.N=="number"?new ia(B,f,g,x,A):u.error(`Type ${In(B)} is not interpolatable.`)}evaluate(o){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;if(g>=u[x-1])return f[x-1].evaluate(o);const C=Ga(u,g),A=ia.interpolationFactor(this.interpolation,g,u[C],u[C+1]),B=f[C].evaluate(o),$=f[C+1].evaluate(o);return this.operator==="interpolate"?Lo[this.type.kind.toLowerCase()](B,$,A):this.operator==="interpolate-hcl"?yo.reverse(yo.interpolate(yo.forward(B),yo.forward($),A)):Mu.reverse(Mu.interpolate(Mu.forward(B),Mu.forward($),A))}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function Ou(l,o,u,f){const g=f-u,x=l-u;return g===0?0:o===1?x/g:(Math.pow(o,x)-1)/(Math.pow(o,g)-1)}var bo=ia;class Za{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&g.kind!=="value"&&(f=g);const x=[];for(const A of o.slice(1)){const B=u.parse(A,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!B)return null;f=f||B.type,x.push(B)}const C=g&&x.some(A=>Or(g,A.type));return new Za(C?xn:f,x)}evaluate(o){let u,f=null,g=0;for(const x of this.args){if(g++,f=x.evaluate(o),f&&f instanceof ln&&!f.available&&(u||(u=f),f=null,g===this.args.length))return u;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(u=>{o.push(u.serialize())}),o}}var Ca=Za;class Tl{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let x=1;x<o.length-1;x+=2){const C=o[x];if(typeof C!="string")return u.error(`Expected string, but found ${typeof C} instead.`,x);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",x);const A=u.parse(o[x+1],x+1);if(!A)return null;f.push([C,A])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,f);return g?new Tl(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[u,f]of this.bindings)o.push(u,f.serialize());return o.push(this.result.serialize()),o}}var Lu=Tl;class Ya{constructor(o,u,f){this.type=o,this.index=u,this.input=f}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,bi),g=u.parse(o[2],2,Ur(u.expectedType||xn));return f&&g?new Ya(g.type.itemType,f,g):null}evaluate(o){const u=this.index.evaluate(o),f=this.input.evaluate(o);if(u<0)throw new Lr(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new Lr(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new Lr(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ih=Ya;class Do{constructor(o,u){this.type=bn,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,xn),g=u.parse(o[2],2,xn);return f&&g?Ao(f.type,[bn,_n,bi,Qo,xn])?new Do(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${In(f.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!_o(u,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${In(jr(u))} instead.`);if(!_o(f,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${In(jr(f))} instead.`);return f.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var md=Do;class jo{constructor(o,u,f){this.type=bi,this.needle=o,this.haystack=u,this.fromIndex=f}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,xn),g=u.parse(o[2],2,xn);if(!f||!g)return null;if(!Ao(f.type,[bn,_n,bi,Qo,xn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${In(f.type)} instead`);if(o.length===4){const x=u.parse(o[3],3,bi);return x?new jo(f,g,x):null}return new jo(f,g)}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!_o(u,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${In(jr(u))} instead.`);if(!_o(f,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${In(jr(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var gd=jo;class xo{constructor(o,u,f,g,x,C){this.inputType=o,this.type=u,this.input=f,this.cases=g,this.outputs=x,this.otherwise=C}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const x={},C=[];for(let $=2;$<o.length-1;$+=2){let Y=o[$];const J=o[$+1];Array.isArray(Y)||(Y=[Y]);const se=u.concat($);if(Y.length===0)return se.error("Expected at least one branch label.");for(const me of Y){if(typeof me!="number"&&typeof me!="string")return se.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return se.error("Numeric branch labels must be integer values.");if(f){if(se.checkSubtype(f,jr(me)))return null}else f=jr(me);if(x[String(me)]!==void 0)return se.error("Branch labels must be unique.");x[String(me)]=C.length}const he=u.parse(J,$,g);if(!he)return null;g=g||he.type,C.push(he)}const A=u.parse(o[1],1,xn);if(!A)return null;const B=u.parse(o[o.length-1],o.length-1,g);return B?A.type.kind!=="value"&&u.concat(1).checkSubtype(f,A.type)?null:new xo(f,g,A,x,C,B):null}evaluate(o){const u=this.input.evaluate(o);return(jr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],g={};for(const C of u){const A=g[this.cases[C]];A===void 0?(g[this.cases[C]]=f.length,f.push([this.cases[C],[C]])):f[A][1].push(C)}const x=C=>this.inputType.kind==="number"?Number(C):C;for(const[C,A]of f)o.push(A.length===1?x(A[0]):A.map(x)),o.push(this.outputs[C].serialize());return o.push(this.otherwise.serialize()),o}}var hc=xo;class Sl{constructor(o,u,f){this.type=o,this.branches=u,this.otherwise=f}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const g=[];for(let C=1;C<o.length-1;C+=2){const A=u.parse(o[C],C,bn);if(!A)return null;const B=u.parse(o[C+1],C+1,f);if(!B)return null;g.push([A,B]),f=f||B.type}const x=u.parse(o[o.length-1],o.length-1,f);return x?new Sl(f,g,x):null}evaluate(o){for(const[u,f]of this.branches)if(u.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,f]of this.branches)o(u),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(u=>{o.push(u.serialize())}),o}}var Cl=Sl;class ur{constructor(o,u,f,g){this.type=o,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,xn),g=u.parse(o[2],2,bi);if(!f||!g)return null;if(!Ao(f.type,[Ur(xn),_n,xn]))return u.error(`Expected first argument to be of type array or string, but found ${In(f.type)} instead`);if(o.length===4){const x=u.parse(o[3],3,bi);return x?new ur(f.type,f,g,x):null}return new ur(f.type,f,g)}evaluate(o){const u=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!_o(u,["string","array"]))throw new Lr(`Expected first argument to be of type array or string, but found ${In(jr(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return u.slice(f,g)}return u.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ka=ur;function Jl(l,o){return l==="=="||l==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Xa(l,o,u,f){return f.compare(o,u)===0}function Ea(l,o,u){const f=l!=="=="&&l!=="!=";return class nF{constructor(x,C,A){this.type=bn,this.lhs=x,this.rhs=C,this.collator=A,this.hasUntypedArgument=x.type.kind==="value"||C.type.kind==="value"}static parse(x,C){if(x.length!==3&&x.length!==4)return C.error("Expected two or three arguments.");const A=x[0];let B=C.parse(x[1],1,xn);if(!B)return null;if(!Jl(A,B.type))return C.concat(1).error(`"${A}" comparisons are not supported for type '${In(B.type)}'.`);let $=C.parse(x[2],2,xn);if(!$)return null;if(!Jl(A,$.type))return C.concat(2).error(`"${A}" comparisons are not supported for type '${In($.type)}'.`);if(B.type.kind!==$.type.kind&&B.type.kind!=="value"&&$.type.kind!=="value")return C.error(`Cannot compare types '${In(B.type)}' and '${In($.type)}'.`);f&&(B.type.kind==="value"&&$.type.kind!=="value"?B=new xr($.type,[B]):B.type.kind!=="value"&&$.type.kind==="value"&&($=new xr(B.type,[$])));let Y=null;if(x.length===4){if(B.type.kind!=="string"&&$.type.kind!=="string"&&B.type.kind!=="value"&&$.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(Y=C.parse(x[3],3,go),!Y)return null}return new nF(B,$,Y)}evaluate(x){const C=this.lhs.evaluate(x),A=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const B=jr(C),$=jr(A);if(B.kind!==$.kind||B.kind!=="string"&&B.kind!=="number")throw new Lr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${B.kind}, ${$.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const B=jr(C),$=jr(A);if(B.kind!=="string"||$.kind!=="string")return o(x,C,A)}return this.collator?u(x,C,A,this.collator.evaluate(x)):o(x,C,A)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[l];return this.eachChild(C=>{x.push(C.serialize())}),x}}}const fc=Ea("==",function(l,o,u){return o===u},Xa),pc=Ea("!=",function(l,o,u){return o!==u},function(l,o,u,f){return!Xa(0,o,u,f)}),Bc=Ea("<",function(l,o,u){return o<u},function(l,o,u,f){return f.compare(o,u)<0}),kl=Ea(">",function(l,o,u){return o>u},function(l,o,u,f){return f.compare(o,u)>0}),mc=Ea("<=",function(l,o,u){return o<=u},function(l,o,u,f){return f.compare(o,u)<=0}),Fc=Ea(">=",function(l,o,u){return o>=u},function(l,o,u,f){return f.compare(o,u)>=0});class Du{constructor(o,u,f,g,x,C){this.type=_n,this.number=o,this.locale=u,this.currency=f,this.unit=g,this.minFractionDigits=x,this.maxFractionDigits=C}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const f=u.parse(o[1],1,bi);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=u.parse(g.locale,1,_n),!x))return null;let C=null;if(g.currency&&(C=u.parse(g.currency,1,_n),!C))return null;let A=null;if(g.unit&&(A=u.parse(g.unit,1,_n),!A))return null;let B=null;if(g["min-fraction-digits"]&&(B=u.parse(g["min-fraction-digits"],1,bi),!B))return null;let $=null;return g["max-fraction-digits"]&&($=u.parse(g["max-fraction-digits"],1,bi),!$)?null:new Du(f,x,C,A,B,$)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class El{constructor(o){this.type=bi,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=u.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${In(f.type)} instead.`):new El(f):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Lr(`Expected value to be of type string or array, but found ${In(jr(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(u=>{o.push(u.serialize())}),o}}const $c={"==":fc,"!=":pc,">":kl,"<":Bc,">=":Fc,"<=":mc,array:xr,at:ih,boolean:xr,case:Cl,coalesce:Ca,collator:Iu,format:zo,image:ku,in:md,"index-of":gd,interpolate:bo,"interpolate-hcl":bo,"interpolate-lab":bo,length:El,let:Lu,literal:xa,match:hc,number:xr,"number-format":Du,object:xr,slice:ka,step:cs,string:xr,"to-boolean":vl,"to-color":vl,"to-number":vl,"to-string":vl,var:oc,within:bl};function wo(l,[o,u,f,g]){o=o.evaluate(l),u=u.evaluate(l),f=f.evaluate(l);const x=g?g.evaluate(l):1,C=As(o,u,f,x);if(C)throw new Lr(C);return new br(o/255*x,u/255*x,f/255*x,x)}function eu(l,o){return l in o}function tu(l,o){const u=o[l];return u===void 0?null:u}function io(l){return{type:l}}Sn.register($c,{error:[{kind:"error"},[_n],(l,[o])=>{throw new Lr(o.evaluate(l))}],typeof:[_n,[xn],(l,[o])=>In(jr(o.evaluate(l)))],"to-rgba":[Ur(bi,4),[fn],(l,[o])=>o.evaluate(l).toArray()],rgb:[fn,[bi,bi,bi],wo],rgba:[fn,[bi,bi,bi,bi],wo],has:{type:bn,overloads:[[[_n],(l,[o])=>eu(o.evaluate(l),l.properties())],[[_n,nr],(l,[o,u])=>eu(o.evaluate(l),u.evaluate(l))]]},get:{type:xn,overloads:[[[_n],(l,[o])=>tu(o.evaluate(l),l.properties())],[[_n,nr],(l,[o,u])=>tu(o.evaluate(l),u.evaluate(l))]]},"feature-state":[xn,[_n],(l,[o])=>tu(o.evaluate(l),l.featureState||{})],properties:[nr,[],l=>l.properties()],"geometry-type":[_n,[],l=>l.geometryType()],id:[xn,[],l=>l.id()],zoom:[bi,[],l=>l.globals.zoom],pitch:[bi,[],l=>l.globals.pitch||0],"distance-from-center":[bi,[],l=>l.distanceFromCenter()],"heatmap-density":[bi,[],l=>l.globals.heatmapDensity||0],"line-progress":[bi,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[bi,[],l=>l.globals.skyRadialProgress||0],accumulated:[xn,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[bi,io(bi),(l,o)=>{let u=0;for(const f of o)u+=f.evaluate(l);return u}],"*":[bi,io(bi),(l,o)=>{let u=1;for(const f of o)u*=f.evaluate(l);return u}],"-":{type:bi,overloads:[[[bi,bi],(l,[o,u])=>o.evaluate(l)-u.evaluate(l)],[[bi],(l,[o])=>-o.evaluate(l)]]},"/":[bi,[bi,bi],(l,[o,u])=>o.evaluate(l)/u.evaluate(l)],"%":[bi,[bi,bi],(l,[o,u])=>o.evaluate(l)%u.evaluate(l)],ln2:[bi,[],()=>Math.LN2],pi:[bi,[],()=>Math.PI],e:[bi,[],()=>Math.E],"^":[bi,[bi,bi],(l,[o,u])=>Math.pow(o.evaluate(l),u.evaluate(l))],sqrt:[bi,[bi],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[bi,[bi],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[bi,[bi],(l,[o])=>Math.log(o.evaluate(l))],log2:[bi,[bi],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[bi,[bi],(l,[o])=>Math.sin(o.evaluate(l))],cos:[bi,[bi],(l,[o])=>Math.cos(o.evaluate(l))],tan:[bi,[bi],(l,[o])=>Math.tan(o.evaluate(l))],asin:[bi,[bi],(l,[o])=>Math.asin(o.evaluate(l))],acos:[bi,[bi],(l,[o])=>Math.acos(o.evaluate(l))],atan:[bi,[bi],(l,[o])=>Math.atan(o.evaluate(l))],min:[bi,io(bi),(l,o)=>Math.min(...o.map(u=>u.evaluate(l)))],max:[bi,io(bi),(l,o)=>Math.max(...o.map(u=>u.evaluate(l)))],abs:[bi,[bi],(l,[o])=>Math.abs(o.evaluate(l))],round:[bi,[bi],(l,[o])=>{const u=o.evaluate(l);return u<0?-Math.round(-u):Math.round(u)}],floor:[bi,[bi],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[bi,[bi],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[bn,[_n,xn],(l,[o,u])=>l.properties()[o.value]===u.value],"filter-id-==":[bn,[xn],(l,[o])=>l.id()===o.value],"filter-type-==":[bn,[_n],(l,[o])=>l.geometryType()===o.value],"filter-<":[bn,[_n,xn],(l,[o,u])=>{const f=l.properties()[o.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[bn,[xn],(l,[o])=>{const u=l.id(),f=o.value;return typeof u==typeof f&&u<f}],"filter->":[bn,[_n,xn],(l,[o,u])=>{const f=l.properties()[o.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[bn,[xn],(l,[o])=>{const u=l.id(),f=o.value;return typeof u==typeof f&&u>f}],"filter-<=":[bn,[_n,xn],(l,[o,u])=>{const f=l.properties()[o.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[bn,[xn],(l,[o])=>{const u=l.id(),f=o.value;return typeof u==typeof f&&u<=f}],"filter->=":[bn,[_n,xn],(l,[o,u])=>{const f=l.properties()[o.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[bn,[xn],(l,[o])=>{const u=l.id(),f=o.value;return typeof u==typeof f&&u>=f}],"filter-has":[bn,[xn],(l,[o])=>o.value in l.properties()],"filter-has-id":[bn,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[bn,[Ur(_n)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[bn,[Ur(xn)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[bn,[_n,Ur(xn)],(l,[o,u])=>u.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[bn,[_n,Ur(xn)],(l,[o,u])=>function(f,g,x,C){for(;x<=C;){const A=x+C>>1;if(g[A]===f)return!0;g[A]>f?C=A-1:x=A+1}return!1}(l.properties()[o.value],u.value,0,u.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(l,[o,u])=>o.evaluate(l)&&u.evaluate(l)],[io(bn),(l,o)=>{for(const u of o)if(!u.evaluate(l))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(l,[o,u])=>o.evaluate(l)||u.evaluate(l)],[io(bn),(l,o)=>{for(const u of o)if(u.evaluate(l))return!0;return!1}]]},"!":[bn,[bn],(l,[o])=>!o.evaluate(l)],"is-supported-script":[bn,[_n],(l,[o])=>{const u=l.globals&&l.globals.isSupportedScript;return!u||u(o.evaluate(l))}],upcase:[_n,[_n],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[_n,[_n],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[_n,io(xn),(l,o)=>o.map(u=>_l(u.evaluate(l))).join("")],"resolved-locale":[_n,[go],(l,[o])=>o.evaluate(l).resolvedLocale()]});var iu=$c;function nu(l){return{result:"success",value:l}}function ru(l){return{result:"error",value:l}}function na(l){return l["property-type"]==="data-driven"}function Ia(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function To(l){return!!l.expression&&l.expression.interpolated}function Dn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Ru(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function _d(l){return l}function Ts(l,o){const u=o.type==="color",f=l.stops&&typeof l.stops[0][0]=="object",g=f||!(f||l.property!==void 0),x=l.type||(To(o)?"exponential":"interval");if(u&&((l=Po({},l)).stops&&(l.stops=l.stops.map($=>[$[0],br.parse($[1])])),l.default=br.parse(l.default?l.default:o.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!wl[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let C,A,B;if(x==="exponential")C=no;else if(x==="interval")C=rs;else if(x==="categorical"){C=ra,A=Object.create(null);for(const $ of l.stops)A[$[0]]=$[1];B=typeof l.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);C=Bu}if(f){const $={},Y=[];for(let he=0;he<l.stops.length;he++){const me=l.stops[he],xe=me[0].zoom;$[xe]===void 0&&($[xe]={zoom:xe,type:l.type,property:l.property,default:l.default,stops:[]},Y.push(xe)),$[xe].stops.push([me[0].value,me[1]])}const J=[];for(const he of Y)J.push([$[he].zoom,Ts($[he],o)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:bo.interpolationFactor.bind(void 0,se),zoomStops:J.map(he=>he[0]),evaluate:({zoom:he},me)=>no({stops:J,base:l.base},o,he).evaluate(he,me)}}if(g){const $=x==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:bo.interpolationFactor.bind(void 0,$),zoomStops:l.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>C(l,o,Y,A,B)}}return{kind:"source",evaluate($,Y){const J=Y&&Y.properties?Y.properties[l.property]:void 0;return J===void 0?Qn(l.default,o.default):C(l,o,J,A,B)}}}function Qn(l,o,u){return l!==void 0?l:o!==void 0?o:u!==void 0?u:void 0}function ra(l,o,u,f,g){return Qn(typeof u===g?f[u]:void 0,l.default,o.default)}function rs(l,o,u){if(Dn(u)!=="number")return Qn(l.default,o.default);const f=l.stops.length;if(f===1||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[f-1][0])return l.stops[f-1][1];const g=Ga(l.stops.map(x=>x[0]),u);return l.stops[g][1]}function no(l,o,u){const f=l.base!==void 0?l.base:1;if(Dn(u)!=="number")return Qn(l.default,o.default);const g=l.stops.length;if(g===1||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[g-1][0])return l.stops[g-1][1];const x=Ga(l.stops.map(Y=>Y[0]),u),C=function(Y,J,se,he){const me=he-se,xe=Y-se;return me===0?0:J===1?xe/me:(Math.pow(J,xe)-1)/(Math.pow(J,me)-1)}(u,f,l.stops[x][0],l.stops[x+1][0]),A=l.stops[x][1],B=l.stops[x+1][1];let $=Lo[o.type]||_d;if(l.colorSpace&&l.colorSpace!=="rgb"){const Y=wl[l.colorSpace];$=(J,se)=>Y.reverse(Y.interpolate(Y.forward(J),Y.forward(se),C))}return typeof A.evaluate=="function"?{evaluate(...Y){const J=A.evaluate.apply(void 0,Y),se=B.evaluate.apply(void 0,Y);if(J!==void 0&&se!==void 0)return $(J,se,C)}}:$(A,B,C)}function Bu(l,o,u){return o.type==="color"?u=br.parse(u):o.type==="formatted"?u=Vs.fromString(u.toString()):o.type==="resolvedImage"?u=ln.fromString(u.toString()):Dn(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),Qn(u,l.default,o.default)}class sa{constructor(o,u){this.expression=o,this._warningHistory={},this._evaluator=new Eu,this._defaultValue=u?function(f){return f.type==="color"&&(Ru(f.default)||Array.isArray(f.default))?new br(0,0,0,0):f.type==="color"?br.parse(f.default)||null:f.default===void 0?null:f.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(o,u,f,g,x,C,A,B){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=C,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=B||null,this.expression.evaluate(this._evaluator)}evaluate(o,u,f,g,x,C,A,B){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=C||null,this._evaluator.featureTileCoord=A||null,this._evaluator.featureDistanceData=B||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new Lr(`Expected value to be one of ${Object.keys(this._enumValues).map(Y=>JSON.stringify(Y)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function oa(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in iu}function Il(l,o){const u=new ac(iu,[],o?function(g){const x={color:fn,string:_n,number:bi,enum:_n,boolean:bn,formatted:ns,resolvedImage:Ps};return g.type==="array"?Ur(x[g.value]||xn,g.length):x[g.type]}(o):void 0),f=u.parse(l,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?nu(new sa(f,o)):ru(u.errors)}class gc{constructor(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!Vo(u.expression)}evaluateWithoutErrorHandling(o,u,f,g,x,C){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,C)}evaluate(o,u,f,g,x,C){return this._styleExpression.evaluate(o,u,f,g,x,C)}}class Pa{constructor(o,u,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!Vo(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,f,g,x,C){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,C)}evaluate(o,u,f,g,x,C){return this._styleExpression.evaluate(o,u,f,g,x,C)}interpolationFactor(o,u,f){return this.interpolationType?bo.interpolationFactor(this.interpolationType,o,u,f):0}}function Ka(l,o){if((l=Il(l,o)).result==="error")return l;const u=l.value.expression,f=Ta(u);if(!f&&!na(o))return ru([new Qs("","data expressions not supported")]);const g=Sa(u,["zoom","pitch","distance-from-center"]);if(!g&&!Ia(o))return ru([new Qs("","zoom expressions not supported")]);const x=Qa(u);return x||g?x instanceof Qs?ru([x]):x instanceof bo&&!To(o)?ru([new Qs("",'"interpolate" expressions cannot be used with this property')]):nu(x?new Pa(f?"camera":"composite",l.value,x.labels,x instanceof bo?x.interpolation:void 0):new gc(f?"constant":"source",l.value)):ru([new Qs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class su{constructor(o,u){this._parameters=o,this._specification=u,Po(this,Ts(this._parameters,this._specification))}static deserialize(o){return new su(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Qa(l){let o=null;if(l instanceof Lu)o=Qa(l.result);else if(l instanceof Ca){for(const u of l.args)if(o=Qa(u),o)break}else(l instanceof cs||l instanceof bo)&&l.input instanceof Sn&&l.input.name==="zoom"&&(o=l);return o instanceof Qs||l.eachChild(u=>{const f=Qa(u);f instanceof Qs?o=f:!o&&f?o=new Qs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new Qs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}class Li{constructor(o,u,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function F(l){const o=l.key,u=l.value,f=l.valueSpec||{},g=l.objectElementValidators||{},x=l.style,C=l.styleSpec;let A=[];const B=Dn(u);if(B!=="object")return[new Li(o,u,`object expected, ${B} found`)];for(const $ in u){const Y=$.split(".")[0],J=f[Y]||f["*"];let se;g[Y]?se=g[Y]:f[Y]?se=O:g["*"]?se=g["*"]:f["*"]&&(se=O),se?A=A.concat(se({key:(o&&`${o}.`)+$,value:u[$],valueSpec:J,style:x,styleSpec:C,object:u,objectKey:$},u)):A.push(new Li(o,u[$],`unknown property "${$}"`))}for(const $ in f)g[$]||f[$].required&&f[$].default===void 0&&u[$]===void 0&&A.push(new Li(o,u,`missing required property "${$}"`));return A}function K(l){const o=l.value,u=l.valueSpec,f=l.style,g=l.styleSpec,x=l.key,C=l.arrayElementValidator||O;if(Dn(o)!=="array")return[new Li(x,o,`array expected, ${Dn(o)} found`)];if(u.length&&o.length!==u.length)return[new Li(x,o,`array length ${u.length} expected, length ${o.length} found`)];if(u["min-length"]&&o.length<u["min-length"])return[new Li(x,o,`array length at least ${u["min-length"]} expected, length ${o.length} found`)];let A={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};g.$version<7&&(A.function=u.function),Dn(u.value)==="object"&&(A=u.value);let B=[];for(let $=0;$<o.length;$++)B=B.concat(C({array:o,arrayIndex:$,value:o[$],valueSpec:A,style:f,styleSpec:g,key:`${x}[${$}]`}));return B}function te(l){const o=l.key,u=l.value,f=l.valueSpec;let g=Dn(u);if(g==="number"&&u!=u&&(g="NaN"),g!=="number")return[new Li(o,u,`number expected, ${g} found`)];if("minimum"in f){let x=f.minimum;if(Dn(f.minimum)==="array"&&(x=f.minimum[l.arrayIndex]),u<x)return[new Li(o,u,`${u} is less than the minimum value ${x}`)]}if("maximum"in f){let x=f.maximum;if(Dn(f.maximum)==="array"&&(x=f.maximum[l.arrayIndex]),u>x)return[new Li(o,u,`${u} is greater than the maximum value ${x}`)]}return[]}function ee(l){const o=l.valueSpec,u=pr(l.value.type);let f,g,x,C={};const A=u!=="categorical"&&l.value.property===void 0,B=!A,$=Dn(l.value.stops)==="array"&&Dn(l.value.stops[0])==="array"&&Dn(l.value.stops[0][0])==="object",Y=F({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(he){if(u==="identity")return[new Li(he.key,he.value,'identity function may not have a "stops" property')];let me=[];const xe=he.value;return me=me.concat(K({key:he.key,value:xe,valueSpec:he.valueSpec,style:he.style,styleSpec:he.styleSpec,arrayElementValidator:J})),Dn(xe)==="array"&&xe.length===0&&me.push(new Li(he.key,xe,"array must have at least one stop")),me},default:function(he){return O({key:he.key,value:he.value,valueSpec:o,style:he.style,styleSpec:he.styleSpec})}}});return u==="identity"&&A&&Y.push(new Li(l.key,l.value,'missing required property "property"')),u==="identity"||l.value.stops||Y.push(new Li(l.key,l.value,'missing required property "stops"')),u==="exponential"&&l.valueSpec.expression&&!To(l.valueSpec)&&Y.push(new Li(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(B&&!na(l.valueSpec)?Y.push(new Li(l.key,l.value,"property functions not supported")):A&&!Ia(l.valueSpec)&&Y.push(new Li(l.key,l.value,"zoom functions not supported"))),u!=="categorical"&&!$||l.value.property!==void 0||Y.push(new Li(l.key,l.value,'"property" property is required')),Y;function J(he){let me=[];const xe=he.value,Le=he.key;if(Dn(xe)!=="array")return[new Li(Le,xe,`array expected, ${Dn(xe)} found`)];if(xe.length!==2)return[new Li(Le,xe,`array length 2 expected, length ${xe.length} found`)];if($){if(Dn(xe[0])!=="object")return[new Li(Le,xe,`object expected, ${Dn(xe[0])} found`)];if(xe[0].zoom===void 0)return[new Li(Le,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new Li(Le,xe,"object stop key must have value")];const Ze=pr(xe[0].zoom);if(typeof Ze!="number")return[new Li(Le,xe[0].zoom,"stop zoom values must be numbers")];if(x&&x>Ze)return[new Li(Le,xe[0].zoom,"stop zoom values must appear in ascending order")];Ze!==x&&(x=Ze,g=void 0,C={}),me=me.concat(F({key:`${Le}[0]`,value:xe[0],valueSpec:{zoom:{}},style:he.style,styleSpec:he.styleSpec,objectElementValidators:{zoom:te,value:se}}))}else me=me.concat(se({key:`${Le}[0]`,value:xe[0],valueSpec:{},style:he.style,styleSpec:he.styleSpec},xe));return oa(ba(xe[1]))?me.concat([new Li(`${Le}[1]`,xe[1],"expressions are not allowed in function stops.")]):me.concat(O({key:`${Le}[1]`,value:xe[1],valueSpec:o,style:he.style,styleSpec:he.styleSpec}))}function se(he,me){const xe=Dn(he.value),Le=pr(he.value),Ze=he.value!==null?he.value:me;if(f){if(xe!==f)return[new Li(he.key,Ze,`${xe} stop domain type must match previous stop domain type ${f}`)]}else f=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean"&&typeof Le!="number"&&typeof Le!="string"&&typeof Le!="boolean")return[new Li(he.key,Ze,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&u!=="categorical"){let st=`number expected, ${xe} found`;return na(o)&&u===void 0&&(st+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Li(he.key,Ze,st)]}return u!=="categorical"||xe!=="number"||typeof Le=="number"&&isFinite(Le)&&Math.floor(Le)===Le?u!=="categorical"&&xe==="number"&&typeof Le=="number"&&typeof g=="number"&&g!==void 0&&Le<g?[new Li(he.key,Ze,"stop domain values must appear in ascending order")]:(g=Le,u==="categorical"&&Le in C?[new Li(he.key,Ze,"stop domain values must be unique")]:(C[Le]=!0,[])):[new Li(he.key,Ze,`integer expected, found ${String(Le)}`)]}}function h(l){const o=(l.expressionContext==="property"?Ka:Il)(ba(l.value),l.valueSpec);if(o.result==="error")return o.value.map(f=>new Li(`${l.key}${f.key}`,l.value,f.message));const u=o.value.expression||o.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!u.outputDefined())return[new Li(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Vo(u))return[new Li(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter")return v(u,l);if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Sa(u,["zoom","feature-state"]))return[new Li(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Ta(u))return[new Li(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function v(l,o){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)u.delete(g);if(u.size===0)return[];const f=[];return l instanceof Sn&&u.has(l.name)?[new Li(o.key,o.value,`["${l.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(l.eachChild(g=>{f.push(...v(g,o))}),f)}function P(l){const o=l.key,u=l.value,f=l.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(pr(u))===-1&&g.push(new Li(o,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(pr(u))===-1&&g.push(new Li(o,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function z(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const o of l.slice(1))if(!z(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function X(l,o="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};z(l)||(l=ki(l));const u=l;let f=!0;try{f=function($){if(!je($))return $;let Y=ba($);return Se(Y),Y=ce(Y),Y}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(u,null,2)}
        `)}const g=Wt[`filter_${o}`],x=Il(f,g);let C=null;if(x.result==="error")throw new Error(x.value.map($=>`${$.key}: ${$.message}`).join(", "));C=($,Y,J)=>x.value.evaluate($,Y,{},J);let A=null,B=null;if(f!==u){const $=Il(u,g);if($.result==="error")throw new Error($.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));A=(Y,J,se,he,me)=>$.value.evaluate(Y,J,{},se,void 0,void 0,he,me),B=!Ta($.value.expression)}return{filter:C,dynamicFilter:A||void 0,needGeometry:si(f),needFeature:!!B}}function ce(l){if(!Array.isArray(l))return l;const o=function(u){if(bt.has(u[0])){for(let f=1;f<u.length;f++)if(je(u[f]))return!0}return u}(l);return o===!0?o:o.map(u=>ce(u))}function Se(l){let o=!1;const u=[];if(l[0]==="case"){for(let f=1;f<l.length-1;f+=2)o=o||je(l[f]),u.push(l[f+1]);u.push(l[l.length-1])}else if(l[0]==="match"){o=o||je(l[1]);for(let f=2;f<l.length-1;f+=2)u.push(l[f+1]);u.push(l[l.length-1])}else if(l[0]==="step"){o=o||je(l[1]);for(let f=1;f<l.length-1;f+=2)u.push(l[f+1])}o&&(l.length=0,l.push("any",...u));for(let f=1;f<l.length;f++)Se(l[f])}function je(l){if(!Array.isArray(l))return!1;if((o=l[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let u=1;u<l.length;u++)if(je(l[u]))return!0;return!1}const bt=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function wt(l,o){return l<o?-1:l>o?1:0}function si(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(let o=1;o<l.length;o++)if(si(l[o]))return!0;return!1}function ki(l){if(!l)return!0;const o=l[0];return l.length<=1?o!=="any":o==="=="?on(l[1],l[2],"=="):o==="!="?_s(on(l[1],l[2],"==")):o==="<"||o===">"||o==="<="||o===">="?on(l[1],l[2],o):o==="any"?(u=l.slice(1),["any"].concat(u.map(ki))):o==="all"?["all"].concat(l.slice(1).map(ki)):o==="none"?["all"].concat(l.slice(1).map(ki).map(_s)):o==="in"?cr(l[1],l.slice(2)):o==="!in"?_s(cr(l[1],l.slice(2))):o==="has"?Cr(l[1]):o==="!has"?_s(Cr(l[1])):o!=="within"||l;var u}function on(l,o,u){switch(l){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,l,o]}}function cr(l,o){if(o.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",l,["literal",o.sort(wt)]]:["filter-in-small",l,["literal",o]]}}function Cr(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function _s(l){return["!",l]}function Ss(l){return z(ba(l.value))?h(Po({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):Ja(l)}function Ja(l){const o=l.value,u=l.key;if(Dn(o)!=="array")return[new Li(u,o,`array expected, ${Dn(o)} found`)];const f=l.styleSpec;let g,x=[];if(o.length<1)return[new Li(u,o,"filter array must have at least 1 element")];switch(x=x.concat(P({key:`${u}[0]`,value:o[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),pr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&pr(o[1])==="$type"&&x.push(new Li(u,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&x.push(new Li(u,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Dn(o[1]),g!=="string"&&x.push(new Li(`${u}[1]`,o[1],`string expected, ${g} found`)));for(let C=2;C<o.length;C++)g=Dn(o[C]),pr(o[1])==="$type"?x=x.concat(P({key:`${u}[${C}]`,value:o[C],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new Li(`${u}[${C}]`,o[C],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let C=1;C<o.length;C++)x=x.concat(Ja({key:`${u}[${C}]`,value:o[C],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=Dn(o[1]),o.length!==2?x.push(new Li(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new Li(`${u}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Dn(o[1]),o.length!==2?x.push(new Li(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&x.push(new Li(`${u}[1]`,o[1],`object expected, ${g} found`))}return x}function ou(l,o){const u=l.key,f=l.style,g=l.styleSpec,x=l.value,C=l.objectKey,A=g[`${o}_${l.layerType}`];if(!A)return[];const B=C.match(/^(.*)-transition$/);if(o==="paint"&&B&&A[B[1]]&&A[B[1]].transition)return O({key:u,value:x,valueSpec:g.transition,style:f,styleSpec:g});const $=l.valueSpec||A[C];if(!$)return[new Li(u,x,`unknown property "${C}"`)];let Y;if(Dn(x)==="string"&&na($)&&!$.tokens&&(Y=/^{([^}]+)}$/.exec(x))){const se=`\`{ "type": "identity", "property": ${Y?JSON.stringify(Y[1]):'"_"'} }\``;return[new Li(u,x,`"${C}" does not support interpolation syntax
Use an identity property function instead: ${se}.`)]}const J=[];return l.layerType==="symbol"&&(C==="text-field"&&f&&!f.glyphs&&J.push(new Li(u,x,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Ru(ba(x))&&pr(x.type)==="identity"&&J.push(new Li(u,x,'"text-font" does not support identity functions'))),J.concat(O({key:l.key,value:x,valueSpec:$,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:C}))}function Nc(l){return ou(l,"paint")}function wr(l){return ou(l,"layout")}function au(l){let o=[];const u=l.value,f=l.key,g=l.style,x=l.styleSpec;u.type||u.ref||o.push(new Li(f,u,'either "type" or "ref" is required'));let C=pr(u.type);const A=pr(u.ref);if(u.id){const B=pr(u.id);for(let $=0;$<l.arrayIndex;$++){const Y=g.layers[$];pr(Y.id)===B&&o.push(new Li(f,u.id,`duplicate layer id "${u.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in u){let B;["type","source","source-layer","filter","layout"].forEach($=>{$ in u&&o.push(new Li(f,u[$],`"${$}" is prohibited for ref layers`))}),g.layers.forEach($=>{pr($.id)===A&&(B=$)}),B?B.ref?o.push(new Li(f,u.ref,"ref cannot reference another ref layer")):C=pr(B.type):typeof A=="string"&&o.push(new Li(f,u.ref,`ref layer "${A}" not found`))}else if(C!=="background"&&C!=="sky")if(u.source){const B=g.sources&&g.sources[u.source],$=B&&pr(B.type);B?$==="vector"&&C==="raster"?o.push(new Li(f,u.source,`layer "${u.id}" requires a raster source`)):$==="raster"&&C!=="raster"?o.push(new Li(f,u.source,`layer "${u.id}" requires a vector source`)):$!=="vector"||u["source-layer"]?$==="raster-dem"&&C!=="hillshade"?o.push(new Li(f,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||$==="geojson"&&B.lineMetrics||o.push(new Li(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Li(f,u,`layer "${u.id}" must specify a "source-layer"`)):o.push(new Li(f,u.source,`source "${u.source}" not found`))}else o.push(new Li(f,u,'missing required property "source"'));return o=o.concat(F({key:f,value:u,valueSpec:x.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>O({key:`${f}.type`,value:u.type,valueSpec:x.layer.type,style:l.style,styleSpec:l.styleSpec,object:u,objectKey:"type"}),filter:B=>Ss(Po({layerType:C},B)),layout:B=>F({layer:u,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":$=>wr(Po({layerType:C},$))}}),paint:B=>F({layer:u,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":$=>Nc(Po({layerType:C},$))}})}})),o}function js(l){const o=l.value,u=l.key,f=Dn(o);return f!=="string"?[new Li(u,o,`string expected, ${f} found`)]:[]}const Fu={promoteId:function({key:l,value:o}){if(Dn(o)==="string")return js({key:l,value:o});{const u=[];for(const f in o)u.push(...js({key:`${l}.${f}`,value:o[f]}));return u}}};function Hr(l){const o=l.value,u=l.key,f=l.styleSpec,g=l.style;if(!o.type)return[new Li(u,o,'"type" is required')];const x=pr(o.type);let C;switch(x){case"vector":case"raster":case"raster-dem":return C=F({key:u,value:o,valueSpec:f[`source_${x.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:Fu}),C;case"geojson":if(C=F({key:u,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:Fu}),o.cluster)for(const A in o.clusterProperties){const[B,$]=o.clusterProperties[A],Y=typeof B=="string"?[B,["accumulated"],["get",A]]:B;C.push(...h({key:`${u}.${A}.map`,value:$,expressionContext:"cluster-map"})),C.push(...h({key:`${u}.${A}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return C;case"video":return F({key:u,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return F({key:u,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new Li(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return P({key:`${u}.type`,value:o.type,valueSpec:{values:zc(f)},style:g,styleSpec:f})}}function zc(l){return l.source.reduce((o,u)=>{const f=l[u];return f.type.type==="enum"&&(o=o.concat(Object.keys(f.type.values))),o},[])}function Zh(l){const o=l.value,u=l.styleSpec,f=u.light,g=l.style;let x=[];const C=Dn(o);if(o===void 0)return x;if(C!=="object")return x=x.concat([new Li("light",o,`object expected, ${C} found`)]),x;for(const A in o){const B=A.match(/^(.*)-transition$/);x=x.concat(B&&f[B[1]]&&f[B[1]].transition?O({key:A,value:o[A],valueSpec:u.transition,style:g,styleSpec:u}):f[A]?O({key:A,value:o[A],valueSpec:f[A],style:g,styleSpec:u}):[new Li(A,o[A],`unknown property "${A}"`)])}return x}function nh(l){const o=l.value,u=l.key,f=l.style,g=l.styleSpec,x=g.terrain;let C=[];const A=Dn(o);if(o===void 0)return C;if(A!=="object")return C=C.concat([new Li("terrain",o,`object expected, ${A} found`)]),C;for(const B in o){const $=B.match(/^(.*)-transition$/);C=C.concat($&&x[$[1]]&&x[$[1]].transition?O({key:B,value:o[B],valueSpec:g.transition,style:f,styleSpec:g}):x[B]?O({key:B,value:o[B],valueSpec:x[B],style:f,styleSpec:g}):[new Li(B,o[B],`unknown property "${B}"`)])}if(o.source){const B=f.sources&&f.sources[o.source],$=B&&pr(B.type);B?$!=="raster-dem"&&C.push(new Li(u,o.source,`terrain cannot be used with a source of type ${String($)}, it only be used with a "raster-dem" source type`)):C.push(new Li(u,o.source,`source "${o.source}" not found`))}else C.push(new Li(u,o,'terrain is missing required property "source"'));return C}function Yh(l){const o=l.value,u=l.style,f=l.styleSpec,g=f.fog;let x=[];const C=Dn(o);if(o===void 0)return x;if(C!=="object")return x=x.concat([new Li("fog",o,`object expected, ${C} found`)]),x;for(const A in o){const B=A.match(/^(.*)-transition$/);x=x.concat(B&&g[B[1]]&&g[B[1]].transition?O({key:A,value:o[A],valueSpec:f.transition,style:u,styleSpec:f}):g[A]?O({key:A,value:o[A],valueSpec:g[A],style:u,styleSpec:f}):[new Li(A,o[A],`unknown property "${A}"`)])}return x}const _c={"*":()=>[],array:K,boolean:function(l){const o=l.value,u=l.key,f=Dn(o);return f!=="boolean"?[new Li(u,o,`boolean expected, ${f} found`)]:[]},number:te,color:function(l){const o=l.key,u=l.value,f=Dn(u);return f!=="string"?[new Li(o,u,`color expected, ${f} found`)]:Gl(u)===null?[new Li(o,u,`color expected, "${u}" found`)]:[]},enum:P,filter:Ss,function:ee,layer:au,object:F,source:Hr,light:Zh,terrain:nh,fog:Yh,string:js,formatted:function(l){return js(l).length===0?[]:h(l)},resolvedImage:function(l){return js(l).length===0?[]:h(l)},projection:function(l){const o=l.value,u=l.styleSpec,f=u.projection,g=l.style;let x=[];const C=Dn(o);if(C==="object")for(const A in o)x=x.concat(O({key:A,value:o[A],valueSpec:f[A],style:g,styleSpec:u}));else C!=="string"&&(x=x.concat([new Li("projection",o,`object or string expected, ${C} found`)]));return x}};function O(l){const o=l.value,u=l.valueSpec,f=l.styleSpec;return u.expression&&Ru(pr(o))?ee(l):u.expression&&oa(ba(o))?h(l):u.type&&_c[u.type]?_c[u.type](l):F(Po({},l,{valueSpec:u.type?f[u.type]:u}))}function G(l){const o=l.value,u=l.key,f=js(l);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new Li(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new Li(u,o,'"glyphs" url must include a "{range}" token'))),f}function N(l,o=Wt){return ot(O({key:"",value:l,valueSpec:o.$root,styleSpec:o,style:l,objectElementValidators:{glyphs:G,"*":()=>[]}}))}const re=l=>ot(Nc(l)),Re=l=>ot(wr(l));function ot(l){return l.slice().sort((o,u)=>o.line&&u.line?o.line-u.line:0)}function Vt(l,o){let u=!1;if(o&&o.length)for(const f of o)l.fire(new ya(new Error(f.message))),u=!0;return u}var Jt=xi;function xi(l,o,u){var f=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var g=new Int32Array(this.arrayBuffer);l=g[0],this.d=(o=g[1])+2*(u=g[2]);for(var x=0;x<this.d*this.d;x++){var C=g[3+x],A=g[3+x+1];f.push(C===A?null:g.subarray(C,A))}var B=g[3+f.length+1];this.keys=g.subarray(g[3+f.length],B),this.bboxes=g.subarray(B),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var $=0;$<this.d*this.d;$++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=l,this.padding=u,this.scale=o/l,this.uid=0;var Y=u/o*l;this.min=-Y,this.max=l+Y}xi.prototype.insert=function(l,o,u,f,g){this._forEachCell(o,u,f,g,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g)},xi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xi.prototype._insertCell=function(l,o,u,f,g,x){this.cells[g].push(x)},xi.prototype.query=function(l,o,u,f,g){var x=this.min,C=this.max;if(l<=x&&o<=x&&C<=u&&C<=f&&!g)return Array.prototype.slice.call(this.keys);var A=[];return this._forEachCell(l,o,u,f,this._queryCell,A,{},g),A},xi.prototype._queryCell=function(l,o,u,f,g,x,C,A){var B=this.cells[g];if(B!==null)for(var $=this.keys,Y=this.bboxes,J=0;J<B.length;J++){var se=B[J];if(C[se]===void 0){var he=4*se;(A?A(Y[he+0],Y[he+1],Y[he+2],Y[he+3]):l<=Y[he+2]&&o<=Y[he+3]&&u>=Y[he+0]&&f>=Y[he+1])?(C[se]=!0,x.push($[se])):C[se]=!1}}},xi.prototype._forEachCell=function(l,o,u,f,g,x,C,A){for(var B=this._convertToCellCoord(l),$=this._convertToCellCoord(o),Y=this._convertToCellCoord(u),J=this._convertToCellCoord(f),se=B;se<=Y;se++)for(var he=$;he<=J;he++){var me=this.d*he+se;if((!A||A(this._convertFromCellCoord(se),this._convertFromCellCoord(he),this._convertFromCellCoord(se+1),this._convertFromCellCoord(he+1)))&&g.call(this,l,o,u,f,me,x,C,A))return}},xi.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},xi.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},xi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,o=3+this.cells.length+1+1,u=0,f=0;f<this.cells.length;f++)u+=this.cells[f].length;var g=new Int32Array(o+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var x=o,C=0;C<l.length;C++){var A=l[C];g[3+C]=x,g.set(A,x),x+=A.length}return g[3+l.length]=x,g.set(this.keys,x),g[3+l.length+1]=x+=this.keys.length,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer};const Wi={};function wi(l,o,u={}){Object.defineProperty(l,"_classRegistryKey",{value:o,writeable:!1}),Wi[o]={klass:l,omit:u.omit||[]}}wi(Object,"Object"),Jt.serialize=function(l,o){const u=l.toArrayBuffer();return o&&o.push(u),{buffer:u}},Jt.deserialize=function(l){return new Jt(l.buffer)},Object.defineProperty(Jt,"name",{value:"Grid"}),wi(Jt,"Grid"),wi(br,"Color"),wi(Error,"Error"),wi(vn,"AJAXError"),wi(ln,"ResolvedImage"),wi(su,"StylePropertyFunction"),wi(sa,"StyleExpression",{omit:["_evaluator"]}),wi(Pa,"ZoomDependentExpression"),wi(gc,"ZoomConstantExpression"),wi(Sn,"CompoundExpression",{omit:["_evaluate"]});for(const l in iu)Wi[iu[l]._classRegistryKey]||wi(iu[l],`Expression${l}`);function Cs(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function sr(l){return p.ImageBitmap&&l instanceof p.ImageBitmap}function Ro(l,o){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(Cs(l)||sr(l))return o&&o.push(l),l;if(ArrayBuffer.isView(l)){const u=l;return o&&o.push(u.buffer),u}if(l instanceof p.ImageData)return o&&o.push(l.data.buffer),l;if(Array.isArray(l)){const u=[];for(const f of l)u.push(Ro(f,o));return u}if(typeof l=="object"){const u=l.constructor,f=u._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=u.serialize?u.serialize(l,o):{};if(!u.serialize){for(const x in l)l.hasOwnProperty(x)&&(Wi[f].omit.indexOf(x)>=0||(g[x]=Ro(l[x],o)));l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof l)}function Aa(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||Cs(l)||sr(l)||ArrayBuffer.isView(l)||l instanceof p.ImageData)return l;if(Array.isArray(l))return l.map(Aa);if(typeof l=="object"){const o=l.$name||"Object",{klass:u}=Wi[o];if(!u)throw new Error(`can't deserialize unregistered class ${o}`);if(u.deserialize)return u.deserialize(l);const f=Object.create(u.prototype);for(const g of Object.keys(l))g!=="$name"&&(f[g]=Aa(l[g]));return f}throw new Error("can't deserialize object of type "+typeof l)}const Pl=l=>l>=1536&&l<=1791,lu=l=>l>=1872&&l<=1919,Xf=l=>l>=2208&&l<=2303,om=l=>l>=11904&&l<=12031,c_=l=>l>=12032&&l<=12255,d_=l=>l>=12272&&l<=12287,Kf=l=>l>=12288&&l<=12351,am=l=>l>=12352&&l<=12447,Xh=l=>l>=12448&&l<=12543,lm=l=>l>=12544&&l<=12591,qy=l=>l>=12704&&l<=12735,Zy=l=>l>=12736&&l<=12783,h_=l=>l>=12784&&l<=12799,Yy=l=>l>=12800&&l<=13055,Xy=l=>l>=13056&&l<=13311,Ky=l=>l>=13312&&l<=19903,f_=l=>l>=19968&&l<=40959,Qy=l=>l>=40960&&l<=42127,Jy=l=>l>=42128&&l<=42191,e0=l=>l>=44032&&l<=55215,t0=l=>l>=63744&&l<=64255,um=l=>l>=64336&&l<=65023,Qf=l=>l>=65040&&l<=65055,y=l=>l>=65072&&l<=65103,d=l=>l>=65104&&l<=65135,m=l=>l>=65136&&l<=65279,T=l=>l>=65280&&l<=65519;function k(l){for(const o of l)if(W(o.charCodeAt(0)))return!0;return!1}function M(l){for(const o of l)if(!j(o.charCodeAt(0)))return!1;return!0}function j(l){return!(Pl(l)||lu(l)||Xf(l)||um(l)||m(l))}function W(l){return!(l!==746&&l!==747&&(l<4352||!(qy(l)||lm(l)||y(l)&&!(l>=65097&&l<=65103)||t0(l)||Xy(l)||om(l)||Zy(l)||!(!Kf(l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Ky(l)||f_(l)||Yy(l)||(o=>o>=12592&&o<=12687)(l)||(o=>o>=43360&&o<=43391)(l)||(o=>o>=55216&&o<=55295)(l)||(o=>o>=4352&&o<=4607)(l)||e0(l)||am(l)||d_(l)||(o=>o>=12688&&o<=12703)(l)||c_(l)||h_(l)||Xh(l)&&l!==12540||!(!T(l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!d(l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||(o=>o>=5120&&o<=5759)(l)||(o=>o>=6320&&o<=6399)(l)||Qf(l)||(o=>o>=19904&&o<=19967)(l)||Qy(l)||Jy(l))))}function Q(l){return!(W(l)||function(o){return!!((u=>u>=128&&u<=255)(o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||(u=>u>=8192&&u<=8303)(o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||(u=>u>=8448&&u<=8527)(o)||(u=>u>=8528&&u<=8591)(o)||(u=>u>=8960&&u<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||(u=>u>=9216&&u<=9279)(o)&&o!==9251||(u=>u>=9280&&u<=9311)(o)||(u=>u>=9312&&u<=9471)(o)||(u=>u>=9632&&u<=9727)(o)||(u=>u>=9728&&u<=9983)(o)&&!(o>=9754&&o<=9759)||(u=>u>=11008&&u<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Kf(o)||Xh(o)||(u=>u>=57344&&u<=63743)(o)||y(o)||d(o)||T(o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(l))}function le(l){return l>=1424&&l<=2303||um(l)||m(l)}function ae(l,o){return!(!o&&le(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||(u=>u>=6016&&u<=6143)(l))}function ve(l){for(const o of l)if(le(o.charCodeAt(0)))return!0;return!1}const Ae="deferred",Be="loading",$e="loaded";let Ne=null,Ue="unavailable",Ce=null;const Ke=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(Ue="error"),Ne&&Ne(l)};function Ye(){Je.fire(new er("pluginStateChange",{pluginStatus:Ue,pluginURL:Ce}))}const Je=new $o,mt=function(){return Ue},ut=function(){if(Ue!==Ae||!Ce)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ue=Be,Ye(),Ce&&yr({url:Ce},l=>{l?Ke(l):(Ue=$e,Ye())})},xt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ue===$e||xt.applyArabicShaping!=null,isLoading:()=>Ue===Be,setState(l){Ue=l.pluginStatus,Ce=l.pluginURL},isParsed:()=>xt.applyArabicShaping!=null&&xt.processBidirectionalText!=null&&xt.processStyledBidirectionalText!=null,getPluginURL:()=>Ce};class It{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return function(u,f){for(const g of u)if(!ae(g.charCodeAt(0),f))return!1;return!0}(o,xt.isLoaded())}}class Dt{constructor(o,u){this.property=o,this.value=u,this.expression=function(f,g){if(Ru(f))return new su(f,g);if(oa(f)){const x=Ka(f,g);if(x.result==="error")throw new Error(x.value.map(C=>`${C.key}: ${C.message}`).join(", "));return x.value}{let x=f;return typeof f=="string"&&g.type==="color"&&(x=br.parse(f)),{kind:"constant",evaluate:()=>x}}}(u===void 0?o.specification.default:u,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,f){return this.property.possiblyEvaluate(this,o,u,f)}}class Nt{constructor(o){this.property=o,this.value=new Dt(o,void 0)}transitioned(o,u){return new Ot(this.property,this.value,u,Tt({},o.transition,this.transition),o.now)}untransitioned(){return new Ot(this.property,this.value,null,{},0)}}class Ti{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ni(this._values[o].value.value)}setValue(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Nt(this._values[o].property)),this._values[o].value=new Dt(this._values[o].property,u===null?void 0:Ni(u))}getTransition(o){return Ni(this._values[o].transition)}setTransition(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Nt(this._values[o].property)),this._values[o].transition=Ni(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(o[u]=f);const g=this.getTransition(u);g!==void 0&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const f=new ni(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,u._values[g]);return f}untransitioned(){const o=new ni(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class Ot{constructor(o,u,f,g,x){const C=g.delay||0,A=g.duration||0;x=x||0,this.property=o,this.value=u,this.begin=x+C,this.end=this.begin+A,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,u,f){const g=o.now||0,x=this.value.possiblyEvaluate(o,u,f),C=this.prior;if(C){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return C.possiblyEvaluate(o,u,f);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(o,u,f),x,Ie(A))}}return x}}class ni{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,f){const g=new Ft(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class qt{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return Ni(this._values[o].value)}setValue(o,u){this._values[o]=new Dt(this._values[o].property,u===null?void 0:Ni(u))}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(o[u]=f)}return o}possiblyEvaluate(o,u,f){const g=new Ft(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}}class ui{constructor(o,u,f){this.property=o,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,f,g){return this.property.evaluate(this.value,this.parameters,o,u,f,g)}}class Ft{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Et{constructor(o){this.specification=o}possiblyEvaluate(o,u){return o.expression.evaluate(u)}interpolate(o,u,f){const g=Lo[this.specification.type];return g?g(o,u,f):o}}class zt{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,f,g){return new ui(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},f,g)}:o.expression,u)}interpolate(o,u,f){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new ui(this,{kind:"constant",value:void 0},o.parameters);const g=Lo[this.specification.type];return g?new ui(this,{kind:"constant",value:g(o.value.value,u.value.value,f)},o.parameters):o}evaluate(o,u,f,g,x,C){return o.kind==="constant"?o.value:o.evaluate(u,f,g,x,C)}}class oi{constructor(o){this.specification=o}possiblyEvaluate(o,u,f,g){return!!o.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class hi{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new It(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const x=this.defaultPropertyValues[f]=new Dt(g,void 0),C=this.defaultTransitionablePropertyValues[f]=new Nt(g);this.defaultTransitioningPropertyValues[f]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate(u)}}}function en(l,o){return 256*(l=Ee(Math.floor(l),0,255))+Ee(Math.floor(o),0,255)}wi(zt,"DataDrivenProperty"),wi(Et,"DataConstantProperty"),wi(oi,"ColorRampProperty");const Rn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Yi{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ui{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function tn(l,o=1){let u=0,f=0;return{members:l.map(g=>{const x=Rn[g.type].BYTES_PER_ELEMENT,C=u=jn(u,Math.max(o,x)),A=g.components||1;return f=Math.max(f,x),u+=x*A,{name:g.name,type:g.type,components:A,offset:C}}),size:jn(u,Math.max(f,o)),alignment:o}}function jn(l,o){return Math.ceil(l/o)*o}class an extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=f,o}}an.prototype.bytesPerElement=4,wi(an,"StructArrayLayout2i4");class hr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=g,o}}hr.prototype.bytesPerElement=6,wi(hr,"StructArrayLayout3i6");class mr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const C=4*o;return this.int16[C+0]=u,this.int16[C+1]=f,this.int16[C+2]=g,this.int16[C+3]=x,o}}mr.prototype.bytesPerElement=8,wi(mr,"StructArrayLayout4i8");class $r extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A){const B=this.length;return this.resize(B+1),this.emplace(B,o,u,f,g,x,C,A)}emplace(o,u,f,g,x,C,A,B){const $=6*o,Y=12*o,J=3*o;return this.int16[$+0]=u,this.int16[$+1]=f,this.uint8[Y+4]=g,this.uint8[Y+5]=x,this.uint8[Y+6]=C,this.uint8[Y+7]=A,this.float32[J+2]=B,o}}$r.prototype.bytesPerElement=12,wi($r,"StructArrayLayout2i4ub1f12");class Dr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const C=4*o;return this.float32[C+0]=u,this.float32[C+1]=f,this.float32[C+2]=g,this.float32[C+3]=x,o}}Dr.prototype.bytesPerElement=16,wi(Dr,"StructArrayLayout4f16");class Hs extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x)}emplace(o,u,f,g,x,C){const A=6*o,B=3*o;return this.uint16[A+0]=u,this.uint16[A+1]=f,this.uint16[A+2]=g,this.uint16[A+3]=x,this.float32[B+2]=C,o}}Hs.prototype.bytesPerElement=12,wi(Hs,"StructArrayLayout4ui1f12");class el extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const C=4*o;return this.uint16[C+0]=u,this.uint16[C+1]=f,this.uint16[C+2]=g,this.uint16[C+3]=x,o}}el.prototype.bytesPerElement=8,wi(el,"StructArrayLayout4ui8");class $u extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,f,g,x,C)}emplace(o,u,f,g,x,C,A){const B=6*o;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=g,this.int16[B+3]=x,this.int16[B+4]=C,this.int16[B+5]=A,o}}$u.prototype.bytesPerElement=12,wi($u,"StructArrayLayout6i12");class Vc extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A,B,$,Y,J,se){const he=this.length;return this.resize(he+1),this.emplace(he,o,u,f,g,x,C,A,B,$,Y,J,se)}emplace(o,u,f,g,x,C,A,B,$,Y,J,se,he){const me=12*o;return this.int16[me+0]=u,this.int16[me+1]=f,this.int16[me+2]=g,this.int16[me+3]=x,this.uint16[me+4]=C,this.uint16[me+5]=A,this.uint16[me+6]=B,this.uint16[me+7]=$,this.int16[me+8]=Y,this.int16[me+9]=J,this.int16[me+10]=se,this.int16[me+11]=he,o}}Vc.prototype.bytesPerElement=24,wi(Vc,"StructArrayLayout4i4ui4i24");class Kr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C){const A=this.length;return this.resize(A+1),this.emplace(A,o,u,f,g,x,C)}emplace(o,u,f,g,x,C,A){const B=10*o,$=5*o;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=g,this.float32[$+2]=x,this.float32[$+3]=C,this.float32[$+4]=A,o}}Kr.prototype.bytesPerElement=20,wi(Kr,"StructArrayLayout3i3f20");class Rr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}Rr.prototype.bytesPerElement=4,wi(Rr,"StructArrayLayout1ul4");class or extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A,B,$,Y,J,se,he){const me=this.length;return this.resize(me+1),this.emplace(me,o,u,f,g,x,C,A,B,$,Y,J,se,he)}emplace(o,u,f,g,x,C,A,B,$,Y,J,se,he,me){const xe=20*o,Le=10*o;return this.int16[xe+0]=u,this.int16[xe+1]=f,this.int16[xe+2]=g,this.int16[xe+3]=x,this.int16[xe+4]=C,this.float32[Le+3]=A,this.float32[Le+4]=B,this.float32[Le+5]=$,this.float32[Le+6]=Y,this.int16[xe+14]=J,this.uint32[Le+8]=se,this.uint16[xe+18]=he,this.uint16[xe+19]=me,o}}or.prototype.bytesPerElement=40,wi(or,"StructArrayLayout5i4f1i1ul2ui40");class ks extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A){const B=this.length;return this.resize(B+1),this.emplace(B,o,u,f,g,x,C,A)}emplace(o,u,f,g,x,C,A,B){const $=8*o;return this.int16[$+0]=u,this.int16[$+1]=f,this.int16[$+2]=g,this.int16[$+4]=x,this.int16[$+5]=C,this.int16[$+6]=A,this.int16[$+7]=B,o}}ks.prototype.bytesPerElement=16,wi(ks,"StructArrayLayout3i2i2i16");class aa extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x)}emplace(o,u,f,g,x,C){const A=4*o,B=8*o;return this.float32[A+0]=u,this.float32[A+1]=f,this.float32[A+2]=g,this.int16[B+6]=x,this.int16[B+7]=C,o}}aa.prototype.bytesPerElement=16,wi(aa,"StructArrayLayout2f1f2i16");class Gr extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const C=12*o,A=3*o;return this.uint8[C+0]=u,this.uint8[C+1]=f,this.float32[A+1]=g,this.float32[A+2]=x,o}}Gr.prototype.bytesPerElement=12,wi(Gr,"StructArrayLayout2ub2f12");class la extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=g,o}}la.prototype.bytesPerElement=12,wi(la,"StructArrayLayout3f12");class ua extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=g,o}}ua.prototype.bytesPerElement=6,wi(ua,"StructArrayLayout3ui6");class vd extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht){const at=this.length;return this.resize(at+1),this.emplace(at,o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht)}emplace(o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht,at){const $t=30*o,Lt=15*o,Kt=60*o;return this.int16[$t+0]=u,this.int16[$t+1]=f,this.int16[$t+2]=g,this.float32[Lt+2]=x,this.float32[Lt+3]=C,this.uint16[$t+8]=A,this.uint16[$t+9]=B,this.uint32[Lt+5]=$,this.uint32[Lt+6]=Y,this.uint32[Lt+7]=J,this.uint16[$t+16]=se,this.uint16[$t+17]=he,this.uint16[$t+18]=me,this.float32[Lt+10]=xe,this.float32[Lt+11]=Le,this.uint8[Kt+48]=Ze,this.uint8[Kt+49]=st,this.uint8[Kt+50]=qe,this.uint32[Lt+13]=rt,this.int16[$t+28]=ht,this.uint8[Kt+58]=at,o}}vd.prototype.bytesPerElement=60,wi(vd,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Kh extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht,at,$t,Lt,Kt,mi,Ut,ii,ri,di){const vi=this.length;return this.resize(vi+1),this.emplace(vi,o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht,at,$t,Lt,Kt,mi,Ut,ii,ri,di)}emplace(o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le,Ze,st,qe,rt,ht,at,$t,Lt,Kt,mi,Ut,ii,ri,di,vi){const Ht=38*o,Di=19*o;return this.int16[Ht+0]=u,this.int16[Ht+1]=f,this.int16[Ht+2]=g,this.float32[Di+2]=x,this.float32[Di+3]=C,this.int16[Ht+8]=A,this.int16[Ht+9]=B,this.int16[Ht+10]=$,this.int16[Ht+11]=Y,this.int16[Ht+12]=J,this.int16[Ht+13]=se,this.uint16[Ht+14]=he,this.uint16[Ht+15]=me,this.uint16[Ht+16]=xe,this.uint16[Ht+17]=Le,this.uint16[Ht+18]=Ze,this.uint16[Ht+19]=st,this.uint16[Ht+20]=qe,this.uint16[Ht+21]=rt,this.uint16[Ht+22]=ht,this.uint16[Ht+23]=at,this.uint16[Ht+24]=$t,this.uint16[Ht+25]=Lt,this.uint16[Ht+26]=Kt,this.uint16[Ht+27]=mi,this.uint16[Ht+28]=Ut,this.uint32[Di+15]=ii,this.float32[Di+16]=ri,this.float32[Di+17]=di,this.float32[Di+18]=vi,o}}Kh.prototype.bytesPerElement=76,wi(Kh,"StructArrayLayout3i2f6i15ui1ul3f76");class Al extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}Al.prototype.bytesPerElement=4,wi(Al,"StructArrayLayout1f4");class uu extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x)}emplace(o,u,f,g,x,C){const A=5*o;return this.float32[A+0]=u,this.float32[A+1]=f,this.float32[A+2]=g,this.float32[A+3]=x,this.float32[A+4]=C,o}}uu.prototype.bytesPerElement=20,wi(uu,"StructArrayLayout5f20");class Uc extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const C=6*o;return this.uint32[3*o+0]=u,this.uint16[C+2]=f,this.uint16[C+3]=g,this.uint16[C+4]=x,o}}Uc.prototype.bytesPerElement=12,wi(Uc,"StructArrayLayout1ul3ui12");class yd extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=f,o}}yd.prototype.bytesPerElement=4,wi(yd,"StructArrayLayout2ui4");class bd extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}bd.prototype.bytesPerElement=2,wi(bd,"StructArrayLayout1ui2");class Qh extends Ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=f,o}}Qh.prototype.bytesPerElement=8,wi(Qh,"StructArrayLayout2f8");class BE extends Yi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}BE.prototype.size=40;class ew extends or{get(o){return new BE(this,o)}}wi(ew,"CollisionBoxArray");class FE extends Yi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}FE.prototype.size=60;class $E extends vd{get(o){return new FE(this,o)}}wi($E,"PlacedSymbolArray");class NE extends Yi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}NE.prototype.size=76;class zE extends Kh{get(o){return new NE(this,o)}}wi(zE,"SymbolInstanceArray");class VE extends Al{getoffsetX(o){return this.float32[1*o+0]}}wi(VE,"GlyphOffsetArray");class UE extends an{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}wi(UE,"SymbolLineVertexArray");class jE extends Yi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}jE.prototype.size=12;class HE extends Uc{get(o){return new jE(this,o)}}wi(HE,"FeatureIndexArray");class GE extends yd{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}wi(GE,"FillExtrusionCentroidArray");const J$=tn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),eN=tn([{name:"a_dash",components:4,type:"Uint16"}]);var Jf={},tN={get exports(){return Jf},set exports(l){Jf=l}},tw={};({get exports(){return tw},set exports(l){tw=l}}).exports=function(l,o){var u,f,g,x,C,A,B,$;for(f=l.length-(u=3&l.length),g=o,C=3432918353,A=461845907,$=0;$<f;)B=255&l.charCodeAt($)|(255&l.charCodeAt(++$))<<8|(255&l.charCodeAt(++$))<<16|(255&l.charCodeAt(++$))<<24,++$,g=27492+(65535&(x=5*(65535&(g=(g^=B=(65535&(B=(B=(65535&B)*C+(((B>>>16)*C&65535)<<16)&4294967295)<<15|B>>>17))*A+(((B>>>16)*A&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(B=0,u){case 3:B^=(255&l.charCodeAt($+2))<<16;case 2:B^=(255&l.charCodeAt($+1))<<8;case 1:g^=B=(65535&(B=(B=(65535&(B^=255&l.charCodeAt($)))*C+(((B>>>16)*C&65535)<<16)&4294967295)<<15|B>>>17))*A+(((B>>>16)*A&65535)<<16)&4294967295}return g^=l.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var iw={};({get exports(){return iw},set exports(l){iw=l}}).exports=function(l,o){for(var u,f=l.length,g=o^f,x=0;f>=4;)u=1540483477*(65535&(u=255&l.charCodeAt(x)|(255&l.charCodeAt(++x))<<8|(255&l.charCodeAt(++x))<<16|(255&l.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:g^=(255&l.charCodeAt(x+2))<<16;case 2:g^=(255&l.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&l.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var WE=tw,iN=iw;tN.exports=WE,Jf.murmur3=WE,Jf.murmur2=iN;class i0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,u,f,g){this.ids.push(qE(o)),this.positions.push(u,f,g)}getPositions(o){const u=qE(o);let f=0,g=this.ids.length-1;for(;f<g;){const C=f+g>>1;this.ids[C]>=u?g=C:f=C+1}const x=[];for(;this.ids[f]===u;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(o,u){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return nw(f,g,0,f.length-1),u&&u.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const u=new i0;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u}}function qE(l){const o=+l;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:Jf(String(l))}function nw(l,o,u,f){for(;u<f;){const g=l[u+f>>1];let x=u-1,C=f+1;for(;;){do x++;while(l[x]<g);do C--;while(l[C]>g);if(x>=C)break;n0(l,x,C),n0(o,3*x,3*C),n0(o,3*x+1,3*C+1),n0(o,3*x+2,3*C+2)}C-u<f-C?(nw(l,o,u,C),u=C+1):(nw(l,o,C+1,f),f=C)}}function n0(l,o,u){const f=l[o];l[o]=l[u],l[u]=f}wi(i0,"FeaturePositionMap");class rh{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,u),this.initialized=!0),!!this.location}}class r0 extends rh{constructor(o){super(o),this.current=0}set(o,u,f){this.fetchUniformLocation(o,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ZE extends rh{constructor(o){super(o),this.current=[0,0,0,0]}set(o,u,f){this.fetchUniformLocation(o,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class YE extends rh{constructor(o){super(o),this.current=br.transparent}set(o,u,f){this.fetchUniformLocation(o,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const nN=new Float32Array(16),rN=new Float32Array(9),sN=new Float32Array(4);function rw(l){return[en(255*l.r,255*l.g),en(255*l.b,255*l.a)]}class p_{constructor(o,u,f){this.value=o,this.uniformNames=u.map(g=>`u_${g}`),this.type=f}setUniform(o,u,f,g,x){u.set(o,x,g.constantOr(this.value))}getBinding(o,u){return this.type==="color"?new YE(o):new r0(o)}}class cm{constructor(o,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,u,f,g,x){const C=x==="u_pattern"||x==="u_dash"?this.pattern:x==="u_pixel_ratio"?this.pixelRatio:null;C&&u.set(o,x,C)}getBinding(o,u){return u==="u_pattern"||u==="u_dash"?new ZE(o):new r0(o)}}class sh{constructor(o,u,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,f,g,x,C){const A=this.paintVertexArray.length,B=this.expression.evaluate(new It(0),u,{},x,g,C);this.paintVertexArray.resize(o),this._setPaintValue(A,o,B)}updatePaintArray(o,u,f,g,x){const C=this.expression.evaluate({zoom:0},f,g,void 0,x);this._setPaintValue(o,u,C)}_setPaintValue(o,u,f){if(this.type==="color"){const g=rw(f);for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=o;g<u;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jc{constructor(o,u,f,g,x,C){this.expression=o,this.uniformNames=u.map(A=>`u_${A}_t`),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=u.map(A=>({name:`a_${A}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(o,u,f,g,x,C){const A=this.expression.evaluate(new It(this.zoom),u,{},x,g,C),B=this.expression.evaluate(new It(this.zoom+1),u,{},x,g,C),$=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue($,o,A,B)}updatePaintArray(o,u,f,g,x){const C=this.expression.evaluate({zoom:this.zoom},f,g,void 0,x),A=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,x);this._setPaintValue(o,u,C,A)}_setPaintValue(o,u,f,g){if(this.type==="color"){const x=rw(f),C=rw(g);for(let A=o;A<u;A++)this.paintVertexArray.emplace(A,x[0],x[1],C[0],C[1])}else{for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u,f,g,x){const C=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,A=Ee(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);u.set(o,x,A)}getBinding(o,u){return new r0(o)}}class Jh{constructor(o,u,f,g,x){this.expression=o,this.layerId=x,this.paintVertexAttributes=(f==="array"?eN:J$).members;for(let C=0;C<u.length;++C);this.paintVertexArray=new g}populatePaintArray(o,u,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(o,u,f,g,x,C){this._setPaintValues(o,u,f.patterns&&f.patterns[this.layerId],C)}_setPaintValues(o,u,f,g){if(!g||!f)return;const x=g[f];if(!x)return;const{tl:C,br:A,pixelRatio:B}=x;for(let $=o;$<u;$++)this.paintVertexArray.emplace($,C[0],C[1],A[0],A[1],B)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ef{constructor(o,u,f=()=>!0){this.binders={},this._buffers=[];const g=[];for(const x in o.paint._values){if(!f(x))continue;const C=o.paint.get(x);if(!(C instanceof ui&&na(C.property.specification)))continue;const A=aN(x,o.type),B=C.value,$=C.property.specification.type,Y=!!C.property.useIntegerZoom,J=x==="line-dasharray"||x.endsWith("pattern"),se=x==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(B.kind!=="constant"||se)if(B.kind==="source"||se||J){const he=XE(x,$,"source");this.binders[x]=J?new Jh(B,A,$,he,o.id):new sh(B,A,$,he),g.push(`/a_${x}`)}else{const he=XE(x,$,"composite");this.binders[x]=new jc(B,A,$,Y,u,he),g.push(`/z_${x}`)}else this.binders[x]=J?new cm(B.value,A):new p_(B.value,A,$),g.push(`/u_${x}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof sh||u instanceof jc?u.maxValue:0}populatePaintArrays(o,u,f,g,x,C){for(const A in this.binders){const B=this.binders[A];(B instanceof sh||B instanceof jc||B instanceof Jh)&&B.populatePaintArray(o,u,f,g,x,C)}}setConstantPatternPositions(o){for(const u in this.binders){const f=this.binders[u];f instanceof cm&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,u,f,g,x,C){let A=!1;for(const B in o){const $=u.getPositions(B);for(const Y of $){const J=f.feature(Y.index);for(const se in this.binders){const he=this.binders[se];if((he instanceof sh||he instanceof jc||he instanceof Jh)&&he.expression.isStateDependent===!0){const me=g.paint.get(se);he.expression=me.value,he.updatePaintArray(Y.start,Y.end,J,o[B],x,C),A=!0}}}}return A}defines(){const o=[];for(const u in this.binders){const f=this.binders[u];(f instanceof p_||f instanceof cm)&&o.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof sh||f instanceof jc||f instanceof Jh)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof p_||f instanceof cm||f instanceof jc)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof p_||g instanceof cm||g instanceof jc)for(const x of g.uniformNames)u.push({name:x,property:f,binding:g.getBinding(o,x)})}return u}setUniforms(o,u,f,g,x){for(const{name:C,property:A,binding:B}of f)this.binders[A].setUniform(o,B,x,g.get(A),C)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const u=this.binders[o];(u instanceof sh||u instanceof jc||u instanceof Jh)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(o){for(const u in this.binders){const f=this.binders[u];(f instanceof sh||f instanceof jc||f instanceof Jh)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof sh||u instanceof jc||u instanceof Jh)&&u.destroy()}}}class ep{constructor(o,u,f=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new ef(g,u,f);this.needsUpload=!1,this._featureMap=new i0,this._bufferOffset=0}populatePaintArrays(o,u,f,g,x,C,A){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(o,u,g,x,C,A);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,f,g,x){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(o,this._featureMap,u,C,g,x)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const oN={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function aN(l,o){return oN[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}const lN={"line-pattern":{source:Hs,composite:Hs},"fill-pattern":{source:Hs,composite:Hs},"fill-extrusion-pattern":{source:Hs,composite:Hs},"line-dasharray":{source:el,composite:el}},uN={color:{source:Qh,composite:Dr},number:{source:Al,composite:Qh}};function XE(l,o,u){const f=lN[l];return f&&f[u]||uN[o][u]}wi(p_,"ConstantBinder"),wi(cm,"PatternConstantBinder"),wi(sh,"SourceExpressionBinder"),wi(Jh,"PatternCompositeBinder"),wi(jc,"CompositeExpressionBinder"),wi(ef,"ProgramConfiguration",{omit:["_buffers"]}),wi(ep,"ProgramConfigurationSet");const s0="-transition";class Hc extends $o{constructor(o,u){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),u.layout&&(this._unevaluatedLayout=new qt(u.layout)),u.paint)){this._transitionablePaint=new Ti(u.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ft(u.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u,f={}){u!=null&&this._validate(Re,`layers.${this.id}.layout.${o}`,o,u,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,u):this.visibility=u)}getPaintProperty(o){return Rt(o,s0)?this._transitionablePaint.getTransition(o.slice(0,-s0.length)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u,f={}){if(u!=null&&this._validate(re,`layers.${this.id}.paint.${o}`,o,u,f))return!1;if(Rt(o,s0))return this._transitionablePaint.setTransition(o.slice(0,-s0.length),u||void 0),!1;{const g=this._transitionablePaint._values[o],x=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(o,u),this._handleSpecialPaintPropertyUpdate(o);const A=this._transitionablePaint._values[o].value,B=A.isDataDriven(),$=Rt(o,"pattern")||o==="line-dasharray";return B||x||$||this._handleOverridablePaintPropertyUpdate(o,C,A)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,u,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Ei(o,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(o,u,f,g,x={}){return(!x||x.validate!==!1)&&Vt(this,o.call(N,{key:u,layerType:this.type,objectKey:f,value:g,styleSpec:Wt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof ui&&na(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=X(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const cN=tn([{name:"a_pos",components:2,type:"Int16"}],4),dN=tn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Gs{constructor(o=[]){this.segments=o}prepareSegment(o,u,f,g){let x=this.segments[this.segments.length-1];return o>Gs.MAX_VERTEX_ARRAY_LENGTH&&Ve(`Max vertices per segment is ${Gs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!x||x.vertexLength+o>Gs.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g)&&(x={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(x.sortKey=g),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,f,g){return new Gs([{vertexOffset:o,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}Gs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wi(Gs,"SegmentVector");var mn=8192;class tf{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof rr?new rr(o.lng,o.lat):rr.convert(o),this}setSouthWest(o){return this._sw=o instanceof rr?new rr(o.lng,o.lat):rr.convert(o),this}extend(o){const u=this._sw,f=this._ne;let g,x;if(o instanceof rr)g=o,x=o;else{if(!(o instanceof tf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(tf.convert(o)):this.extend(rr.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(rr.convert(o)):this;if(g=o._sw,x=o._ne,!g||!x)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new rr(g.lng,g.lat),this._ne=new rr(x.lng,x.lat)),this}getCenter(){return new rr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new rr(this.getWest(),this.getNorth())}getSouthEast(){return new rr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:f}=rr.convert(o);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof tf?o:new tf(o)}}var o0=1e-6,cu=typeof Float32Array<"u"?Float32Array:Array;function KE(){var l=new cu(9);return cu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function QE(l,o,u){var f=o[0],g=o[1],x=o[2],C=o[3],A=o[4],B=o[5],$=o[6],Y=o[7],J=o[8],se=u[0],he=u[1],me=u[2],xe=u[3],Le=u[4],Ze=u[5],st=u[6],qe=u[7],rt=u[8];return l[0]=se*f+he*C+me*$,l[1]=se*g+he*A+me*Y,l[2]=se*x+he*B+me*J,l[3]=xe*f+Le*C+Ze*$,l[4]=xe*g+Le*A+Ze*Y,l[5]=xe*x+Le*B+Ze*J,l[6]=st*f+qe*C+rt*$,l[7]=st*g+qe*A+rt*Y,l[8]=st*x+qe*B+rt*J,l}function Gc(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function sw(l,o){var u=o[0],f=o[1],g=o[2],x=o[3],C=o[4],A=o[5],B=o[6],$=o[7],Y=o[8],J=o[9],se=o[10],he=o[11],me=o[12],xe=o[13],Le=o[14],Ze=o[15],st=u*A-f*C,qe=u*B-g*C,rt=u*$-x*C,ht=f*B-g*A,at=f*$-x*A,$t=g*$-x*B,Lt=Y*xe-J*me,Kt=Y*Le-se*me,mi=Y*Ze-he*me,Ut=J*Le-se*xe,ii=J*Ze-he*xe,ri=se*Ze-he*Le,di=st*ri-qe*ii+rt*Ut+ht*mi-at*Kt+$t*Lt;return di?(l[0]=(A*ri-B*ii+$*Ut)*(di=1/di),l[1]=(g*ii-f*ri-x*Ut)*di,l[2]=(xe*$t-Le*at+Ze*ht)*di,l[3]=(se*at-J*$t-he*ht)*di,l[4]=(B*mi-C*ri-$*Kt)*di,l[5]=(u*ri-g*mi+x*Kt)*di,l[6]=(Le*rt-me*$t-Ze*qe)*di,l[7]=(Y*$t-se*rt+he*qe)*di,l[8]=(C*ii-A*mi+$*Lt)*di,l[9]=(f*mi-u*ii-x*Lt)*di,l[10]=(me*at-xe*rt+Ze*st)*di,l[11]=(J*rt-Y*at-he*st)*di,l[12]=(A*Kt-C*Ut-B*Lt)*di,l[13]=(u*Ut-f*Kt+g*Lt)*di,l[14]=(xe*qe-me*ht-Le*st)*di,l[15]=(Y*ht-J*qe+se*st)*di,l):null}function tp(l,o,u){var f=o[0],g=o[1],x=o[2],C=o[3],A=o[4],B=o[5],$=o[6],Y=o[7],J=o[8],se=o[9],he=o[10],me=o[11],xe=o[12],Le=o[13],Ze=o[14],st=o[15],qe=u[0],rt=u[1],ht=u[2],at=u[3];return l[0]=qe*f+rt*A+ht*J+at*xe,l[1]=qe*g+rt*B+ht*se+at*Le,l[2]=qe*x+rt*$+ht*he+at*Ze,l[3]=qe*C+rt*Y+ht*me+at*st,l[4]=(qe=u[4])*f+(rt=u[5])*A+(ht=u[6])*J+(at=u[7])*xe,l[5]=qe*g+rt*B+ht*se+at*Le,l[6]=qe*x+rt*$+ht*he+at*Ze,l[7]=qe*C+rt*Y+ht*me+at*st,l[8]=(qe=u[8])*f+(rt=u[9])*A+(ht=u[10])*J+(at=u[11])*xe,l[9]=qe*g+rt*B+ht*se+at*Le,l[10]=qe*x+rt*$+ht*he+at*Ze,l[11]=qe*C+rt*Y+ht*me+at*st,l[12]=(qe=u[12])*f+(rt=u[13])*A+(ht=u[14])*J+(at=u[15])*xe,l[13]=qe*g+rt*B+ht*se+at*Le,l[14]=qe*x+rt*$+ht*he+at*Ze,l[15]=qe*C+rt*Y+ht*me+at*st,l}function m_(l,o,u){var f,g,x,C,A,B,$,Y,J,se,he,me,xe=u[0],Le=u[1],Ze=u[2];return o===l?(l[12]=o[0]*xe+o[4]*Le+o[8]*Ze+o[12],l[13]=o[1]*xe+o[5]*Le+o[9]*Ze+o[13],l[14]=o[2]*xe+o[6]*Le+o[10]*Ze+o[14],l[15]=o[3]*xe+o[7]*Le+o[11]*Ze+o[15]):(g=o[1],x=o[2],C=o[3],A=o[4],B=o[5],$=o[6],Y=o[7],J=o[8],se=o[9],he=o[10],me=o[11],l[0]=f=o[0],l[1]=g,l[2]=x,l[3]=C,l[4]=A,l[5]=B,l[6]=$,l[7]=Y,l[8]=J,l[9]=se,l[10]=he,l[11]=me,l[12]=f*xe+A*Le+J*Ze+o[12],l[13]=g*xe+B*Le+se*Ze+o[13],l[14]=x*xe+$*Le+he*Ze+o[14],l[15]=C*xe+Y*Le+me*Ze+o[15]),l}function ip(l,o,u){var f=u[0],g=u[1],x=u[2];return l[0]=o[0]*f,l[1]=o[1]*f,l[2]=o[2]*f,l[3]=o[3]*f,l[4]=o[4]*g,l[5]=o[5]*g,l[6]=o[6]*g,l[7]=o[7]*g,l[8]=o[8]*x,l[9]=o[9]*x,l[10]=o[10]*x,l[11]=o[11]*x,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l}function ow(l,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[4],C=o[5],A=o[6],B=o[7],$=o[8],Y=o[9],J=o[10],se=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=x*g+$*f,l[5]=C*g+Y*f,l[6]=A*g+J*f,l[7]=B*g+se*f,l[8]=$*g-x*f,l[9]=Y*g-C*f,l[10]=J*g-A*f,l[11]=se*g-B*f,l}function a0(l,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[0],C=o[1],A=o[2],B=o[3],$=o[8],Y=o[9],J=o[10],se=o[11];return o!==l&&(l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=x*g-$*f,l[1]=C*g-Y*f,l[2]=A*g-J*f,l[3]=B*g-se*f,l[8]=x*f+$*g,l[9]=C*f+Y*g,l[10]=A*f+J*g,l[11]=B*f+se*g,l}function JE(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function eI(l,o,u){var f,g,x,C=u[0],A=u[1],B=u[2],$=Math.hypot(C,A,B);return $<o0?null:(C*=$=1/$,A*=$,B*=$,f=Math.sin(o),g=Math.cos(o),l[0]=C*C*(x=1-g)+g,l[1]=A*C*x+B*f,l[2]=B*C*x-A*f,l[3]=0,l[4]=C*A*x-B*f,l[5]=A*A*x+g,l[6]=B*A*x+C*f,l[7]=0,l[8]=C*B*x+A*f,l[9]=A*B*x-C*f,l[10]=B*B*x+g,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var hN=tp;function aw(){var l=new cu(3);return cu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function tI(l){var o=new cu(3);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o}function g_(l){return Math.hypot(l[0],l[1],l[2])}function dm(l,o,u){var f=new cu(3);return f[0]=l,f[1]=o,f[2]=u,f}function oh(l,o,u){return l[0]=o[0]+u[0],l[1]=o[1]+u[1],l[2]=o[2]+u[2],l}function lw(l,o,u){return l[0]=o[0]-u[0],l[1]=o[1]-u[1],l[2]=o[2]-u[2],l}function iI(l,o,u){return l[0]=o[0]*u[0],l[1]=o[1]*u[1],l[2]=o[2]*u[2],l}function __(l,o,u){return l[0]=Math.min(o[0],u[0]),l[1]=Math.min(o[1],u[1]),l[2]=Math.min(o[2],u[2]),l}function v_(l,o,u){return l[0]=Math.max(o[0],u[0]),l[1]=Math.max(o[1],u[1]),l[2]=Math.max(o[2],u[2]),l}function Nu(l,o,u){return l[0]=o[0]*u,l[1]=o[1]*u,l[2]=o[2]*u,l}function y_(l,o,u,f){return l[0]=o[0]+u[0]*f,l[1]=o[1]+u[1]*f,l[2]=o[2]+u[2]*f,l}function tl(l,o){var u=o[0],f=o[1],g=o[2],x=u*u+f*f+g*g;return x>0&&(x=1/Math.sqrt(x)),l[0]=o[0]*x,l[1]=o[1]*x,l[2]=o[2]*x,l}function vc(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]}function uw(l,o,u){var f=o[0],g=o[1],x=o[2],C=u[0],A=u[1],B=u[2];return l[0]=g*B-x*A,l[1]=x*C-f*B,l[2]=f*A-g*C,l}function Ls(l,o,u){var f=o[0],g=o[1],x=o[2],C=u[3]*f+u[7]*g+u[11]*x+u[15];return l[0]=(u[0]*f+u[4]*g+u[8]*x+u[12])/(C=C||1),l[1]=(u[1]*f+u[5]*g+u[9]*x+u[13])/C,l[2]=(u[2]*f+u[6]*g+u[10]*x+u[14])/C,l}function nI(l,o,u){var f=u[0],g=u[1],x=u[2],C=o[0],A=o[1],B=o[2],$=g*B-x*A,Y=x*C-f*B,J=f*A-g*C,se=g*J-x*Y,he=x*$-f*J,me=f*Y-g*$,xe=2*u[3];return Y*=xe,J*=xe,he*=2,me*=2,l[0]=C+($*=xe)+(se*=2),l[1]=A+Y+he,l[2]=B+J+me,l}var b_,Wc=lw,fN=iI,pN=g_;function rI(l,o,u){return l[0]=o[0]*u,l[1]=o[1]*u,l[2]=o[2]*u,l[3]=o[3]*u,l}function sI(l,o){var u=o[0],f=o[1],g=o[2],x=o[3],C=u*u+f*f+g*g+x*x;return C>0&&(C=1/Math.sqrt(C)),l[0]=u*C,l[1]=f*C,l[2]=g*C,l[3]=x*C,l}function np(l,o,u){var f=o[0],g=o[1],x=o[2],C=o[3];return l[0]=u[0]*f+u[4]*g+u[8]*x+u[12]*C,l[1]=u[1]*f+u[5]*g+u[9]*x+u[13]*C,l[2]=u[2]*f+u[6]*g+u[10]*x+u[14]*C,l[3]=u[3]*f+u[7]*g+u[11]*x+u[15]*C,l}function oI(){var l=new cu(4);return cu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function aI(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function lI(l,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],C=o[3],A=Math.sin(u),B=Math.cos(u);return l[0]=f*B+C*A,l[1]=g*B+x*A,l[2]=x*B-g*A,l[3]=C*B-f*A,l}function uI(l,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],C=o[3],A=Math.sin(u),B=Math.cos(u);return l[0]=f*B-x*A,l[1]=g*B+C*A,l[2]=x*B+f*A,l[3]=C*B-g*A,l}aw(),b_=new cu(4),cu!=Float32Array&&(b_[0]=0,b_[1]=0,b_[2]=0,b_[3]=0);var mN=sI;aw(),dm(1,0,0),dm(0,1,0),oI(),oI(),KE();const gN=tn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:cI}=gN,dI=tn([{name:"a_pos_3",components:3,type:"Int16"}]);var x_=tn([{name:"a_pos",type:"Int16",components:2}]);class cw{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,f){const g=vc(u,this.dir);if(Math.abs(g)<1e-6)return!1;const x=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1]+(o[2]-this.pos[2])*u[2])/g;return f[0]=this.pos[0]+this.dir[0]*x,f[1]=this.pos[1]+this.dir[1]*x,f[2]=this.pos[2]+this.dir[2]*x,!0}closestPointOnSphere(o,u,f){if(function(he,me){var xe=he[0],Le=he[1],Ze=he[2],st=me[0],qe=me[1],rt=me[2];return Math.abs(xe-st)<=o0*Math.max(1,Math.abs(xe),Math.abs(st))&&Math.abs(Le-qe)<=o0*Math.max(1,Math.abs(Le),Math.abs(qe))&&Math.abs(Ze-rt)<=o0*Math.max(1,Math.abs(Ze),Math.abs(rt))}(this.pos,o)||u===0)return f[0]=f[1]=f[2]=0,!1;const[g,x,C]=this.dir,A=this.pos[0]-o[0],B=this.pos[1]-o[1],$=this.pos[2]-o[2],Y=g*g+x*x+C*C,J=2*(A*g+B*x+$*C),se=J*J-4*Y*(A*A+B*B+$*$-u*u);if(se<0){const he=Math.max(-J/2,0),me=A+g*he,xe=B+x*he,Le=$+C*he,Ze=Math.hypot(me,xe,Le);return f[0]=me*u/Ze,f[1]=xe*u/Ze,f[2]=Le*u/Ze,!1}{const he=(-J-Math.sqrt(se))/(2*Y);if(he<0){const me=Math.hypot(A,B,$);return f[0]=A*u/me,f[1]=B*u/me,f[2]=$*u/me,!1}return f[0]=A+g*he,f[1]=B+x*he,f[2]=$+C*he,!0}}}class dw{constructor(o,u,f,g,x){this.TL=o,this.TR=u,this.BR=f,this.BL=g,this.horizon=x}static fromInvProjectionMatrix(o,u,f){const g=[-1,1,1],x=[1,1,1],C=[1,-1,1],A=[-1,-1,1],B=Ls(g,g,o),$=Ls(x,x,o),Y=Ls(C,C,o),J=Ls(A,A,o);return new dw(B,$,Y,J,u/f)}}class hw{constructor(o,u){this.points=o,this.planes=u}static fromInvProjectionMatrix(o,u,f,g){const x=Math.pow(2,f),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const $=np([],B,o),Y=1/$[3]/u*x;return function(J,se,he){return J[0]=se[0]*he[0],J[1]=se[1]*he[1],J[2]=se[2]*he[2],J[3]=se[3]*he[3],J}($,$,[Y,Y,g?1/$[3]:Y,Y])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const $=tl([],uw([],Wc([],C[B[0]],C[B[1]]),Wc([],C[B[2]],C[B[1]]))),Y=-vc($,C[B[1]]);return $.concat(Y)});return new hw(C,A)}}class il{static fromPoints(o){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)__(u,u,g),v_(f,f,g);return new il(u,f)}static applyTransform(o,u){const f=o.getCorners();for(let g=0;g<f.length;++g)Ls(f[g],f[g],u);return il.fromPoints(f)}constructor(o,u){this.min=o,this.max=u,this.center=Nu([],oh([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],f=tI(this.min),g=tI(this.max);for(let x=0;x<u.length;x++)f[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new il(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,u=this.max;return[[o[0],o[1],o[2]],[u[0],o[1],o[2]],[u[0],u[1],o[2]],[o[0],u[1],o[2]],[o[0],o[1],u[2]],[u[0],o[1],u[2]],[u[0],u[1],u[2]],[o[0],u[1],u[2]]]}intersects(o){const u=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const x=o.planes[g];let C=0;for(let A=0;A<u.length;A++)C+=vc(x,u[A])+x[3]>=0;if(C===0)return 0;C!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let A=0;A<o.points.length;A++){const B=o.points[A][g]-this.min[g];x=Math.min(x,B),C=Math.max(C,B)}if(C<0||x>this.max[g]-this.min[g])return 0}return 1}}const xd=mn/Math.PI/2,rp=64,w_=[rp,32,16],yc=-xd,bc=xd,_N=[new il([yc,yc,yc],[bc,bc,bc]),new il([yc,yc,yc],[0,0,bc]),new il([0,yc,yc],[bc,0,bc]),new il([yc,0,yc],[0,bc,bc]),new il([0,0,yc],[bc,bc,bc])];function l0(l){return l*xd/C_}function hI(l,o,u,f=!0){const g=Nu([],l._camera.position,l.worldSize),x=[o,u,1,1];np(x,x,l.pixelMatrixInverse),rI(x,x,1/x[3]);const C=tl([],Wc([],x,g)),A=l.globeMatrix,B=[A[12],A[13],A[14]],$=Wc([],B,g),Y=g_($),J=tl([],$),se=l.worldSize/(2*Math.PI),he=vc(J,C),me=Math.asin(se/Y);if(me<Math.acos(he)){if(!f)return null;const mi=[],Ut=[];Nu(mi,C,Y/he),tl(Ut,Wc(Ut,mi,$)),tl(C,oh(C,$,Nu(C,Ut,Math.tan(me)*Y)))}const xe=[];new cw(g,C).closestPointOnSphere(B,se,xe);const Le=tl([],Bt(A,0)),Ze=tl([],Bt(A,1)),st=tl([],Bt(A,2)),qe=vc(Le,xe),rt=vc(Ze,xe),ht=vc(st,xe),at=ge(Math.asin(-rt/se));let $t=ge(Math.atan2(qe,ht));$t=l.center.lng+function(mi,Ut){const ii=(Ut-mi+180)%360-180;return ii<-180?ii+360:ii}(l.center.lng,$t);const Lt=Td($t),Kt=Ee(Sd(at),0,1);return new mm(Lt,Kt)}class vN{constructor(o,u,f){this.a=Wc([],o,f),this.b=Wc([],u,f),this.center=f;const g=tl([],this.a),x=tl([],this.b);this.angle=Math.acos(vc(g,x))}}function fw(l,o){if(l.angle===0)return null;let u;return u=l.a[o]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[o]/l.a[o]/Math.sin(l.angle)-1/Math.tan(l.angle)),u<0||u>1?null:function(f,g,x,C){const A=Math.sin(x);return f*(Math.sin((1-C)*x)/A)+g*(Math.sin(C*x)/A)}(l.a[o],l.b[o],l.angle,Ee(u,0,1))+l.center[o]}function wd(l){if(l.z<=1)return _N[l.z+2*l.y+l.x];const o=pw(u0(l));return il.fromPoints(o)}function sp(l,o,u){return Nu(l,l,1-u),y_(l,l,o,u)}function fI(l,o){const u=pm(o.zoom);if(u===0)return wd(l);const f=u0(l),g=pw(f),x=Td(f.getWest())*o.worldSize,C=Td(f.getEast())*o.worldSize,A=Sd(f.getNorth())*o.worldSize,B=Sd(f.getSouth())*o.worldSize,$=[x,A,0],Y=[C,A,0],J=[x,B,0],se=[C,B,0],he=sw([],o.globeMatrix);return Ls($,$,he),Ls(Y,Y,he),Ls(J,J,he),Ls(se,se,he),g[0]=sp(g[0],J,u),g[1]=sp(g[1],se,u),g[2]=sp(g[2],Y,u),g[3]=sp(g[3],$,u),il.fromPoints(g)}function pI(l,o,u){for(const f of l)Ls(f,f,o),Nu(f,f,u)}function yN(l,o,u){const f=o/l.worldSize,g=l.globeMatrix;if(u.z<=1){const Lt=wd(u).getCorners();return pI(Lt,g,f),il.fromPoints(Lt)}const x=u0(u),C=pw(x);pI(C,g,f);const A=Number.MAX_VALUE,B=[-A,-A,-A],$=[A,A,A];if(x.contains(l.center)){for(const mi of C)__($,$,mi),v_(B,B,mi);B[2]=0;const Lt=l.point,Kt=[Lt.x*f,Lt.y*f,0];return __($,$,Kt),v_(B,B,Kt),new il($,B)}const Y=[g[12]*f,g[13]*f,g[14]*f],J=x.getCenter(),se=Ee(l.center.lat,-da,da),he=Ee(J.lat,-da,da),me=Td(l.center.lng),xe=Sd(se);let Le=me-Td(J.lng);const Ze=xe-Sd(he);Le>.5?Le-=1:Le<-.5&&(Le+=1);let st=0;Math.abs(Le)>Math.abs(Ze)?st=Le>=0?1:3:(st=Ze>=0?0:2,y_(Y,Y,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(fe(Ze>=0?x.getSouth():x.getNorth()))*xd));const qe=C[st],rt=C[(st+1)%4],ht=new vN(qe,rt,Y),at=[fw(ht,0)||qe[0],fw(ht,1)||qe[1],fw(ht,2)||qe[2]],$t=pm(l.zoom);if($t>0){const Lt=function({x:mi,y:Ut,z:ii},ri,di,vi,Ht){const Di=1/(1<<ii);let un=mi*Di,$i=un+Di,Ki=Ut*Di,Ri=Ki+Di,cn=0;const Hn=(un+$i)/2-vi;return Hn>.5?cn=-1:Hn<-.5&&(cn=1),un=((un+cn)*ri-(vi*=ri))*di+vi,$i=(($i+cn)*ri-vi)*di+vi,Ki=(Ki*ri-(Ht*=ri))*di+Ht,Ri=(Ri*ri-Ht)*di+Ht,[[un,Ri,0],[$i,Ri,0],[$i,Ki,0],[un,Ki,0]]}(u,o,l._pixelsPerMercatorPixel,me,xe);for(let mi=0;mi<C.length;mi++)sp(C[mi],Lt[mi],$t);const Kt=oh([],Lt[st],Lt[(st+1)%4]);Nu(Kt,Kt,.5),sp(at,Kt,$t)}for(const Lt of C)__($,$,Lt),v_(B,B,Lt);return $[2]=Math.min(qe[2],rt[2]),__($,$,at),v_(B,B,at),new il($,B)}function u0({x:l,y:o,z:u}){const f=1/(1<<u),g=new rr(zu(l*f),ca((o+1)*f)),x=new rr(zu((l+1)*f),ca(o*f));return new tf(g,x)}function pw(l){const o=fe(l.getNorth()),u=fe(l.getSouth()),f=Math.cos(o),g=Math.cos(u),x=Math.sin(o),C=Math.sin(u),A=l.getWest(),B=l.getEast();return[hm(g,C,A),hm(g,C,B),hm(f,x,B),hm(f,x,A)]}function hm(l,o,u,f=xd){return u=fe(u),[l*Math.sin(u)*f,-o*f,l*Math.cos(u)*f]}function fm(l,o,u){return hm(Math.cos(fe(l)),Math.sin(fe(l)),o,u)}function T_(l,o,u,f){const g=1<<u.z,x=(l/mn+u.x)/g;return fm(ca((o/mn+u.y)/g),zu(x),f)}function c0({min:l,max:o}){return 16383/Math.max(o[0]-l[0],o[1]-l[1],o[2]-l[2])}const mI=new Float64Array(16);function S_(l){const o=c0(l),u=JE(mI,[o,o,o]);return m_(u,u,((f=[])[0]=-(g=l.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function mw(l){const o=(f=l.min,(u=mI)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=f[0],u[13]=f[1],u[14]=f[2],u[15]=1,u);var u,f;const g=1/c0(l);return ip(o,o,[g,g,g])}function gI(l,o,u,f,g){const x=function(B){const $=mn/(2*Math.PI);return B/(2*Math.PI)/$}(u),C=[l,o,-u/(2*Math.PI)],A=Gc(new Float64Array(16));return m_(A,A,C),ip(A,A,[x,x,x]),ow(A,A,fe(-g)),a0(A,A,fe(-f)),A}function pm(l){return Qe(5,6,l)}function _I(l,o){const u=fm(o.lat,o.lng),f=function(me){const xe=fm(me._center.lat,me._center.lng);let Le=uw([],dm(0,1,0),xe);const Ze=eI([],-me.angle,xe);Le=Ls(Le,Le,Ze),eI(Ze,-me._pitch,Le);const st=tl([],xe);return Nu(st,st,l0(me.cameraToCenterDistance/me.pixelsPerMeter)),Ls(st,st,Ze),oh([],xe,st)}(l);return C=(g=lw([],f,u))[0],A=g[1],B=g[2],$=(x=u)[0],Y=x[1],J=x[2],he=(se=Math.sqrt(C*C+A*A+B*B)*Math.sqrt($*$+Y*Y+J*J))&&vc(g,x)/se,Math.acos(Math.min(Math.max(he,-1),1));var g,x,C,A,B,$,Y,J,se,he}function gw(l,o){return _I(l,o)>Math.PI/2*1.01}const vI=fe(85),bN=Math.cos(vI),xN=Math.sin(vI),C_=63710088e-1,yI=2*Math.PI*C_;class rr{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new rr(gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,f=this.lat*u,g=o.lat*u,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return C_*Math.acos(Math.min(x,1))}toBounds(o=0){const u=360*o/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new tf(new rr(this.lng-f,this.lat-u),new rr(this.lng+f,this.lat+u))}toEcef(o){const u=l0(o);return fm(this.lat,this.lng,xd+u)}static convert(o){if(o instanceof rr)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new rr(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new rr(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function _w(l){return yI*Math.cos(l*Math.PI/180)}function Td(l){return(180+l)/360}function Sd(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function qc(l,o){return l/_w(o)}function zu(l){return 360*l-180}function ca(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function bI(l,o){return l*_w(ca(o))}const da=85.051129;function xI(l){return 1/Math.cos(l*Math.PI/180)}class mm{constructor(o,u,f=0){this.x=+o,this.y=+u,this.z=+f}static fromLngLat(o,u=0){const f=rr.convert(o);return new mm(Td(f.lng),Sd(f.lat),qc(u,f.lat))}toLngLat(){return new rr(zu(this.x),ca(this.y))}toAltitude(){return bI(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/yI*xI(ca(this.y))}}function vw(l,o,u,f,g,x,C,A,B){const $=(o+f)/2,Y=(u+g)/2,J=new ie($,Y);A(J),function(se,he,me,xe,Le,Ze){const st=me-Le,qe=xe-Ze;return Math.abs((xe-he)*st-(me-se)*qe)/Math.hypot(st,qe)}(J.x,J.y,x.x,x.y,C.x,C.y)>=B?(vw(l,o,u,$,Y,x,J,A,B),vw(l,$,Y,f,g,J,C,A,B)):l.push(C)}function wI(l,o,u){let f=l[0],g=f.x,x=f.y;o(f);const C=[f];for(let A=1;A<l.length;A++){const B=l[A],{x:$,y:Y}=B;o(B),vw(C,g,x,$,Y,f,B,o,u),g=$,x=Y,f=B}return C}function yw(l,o,u,f){if(f(o,u)){const g=o.add(u)._mult(.5);yw(l,o,g,f),yw(l,g,u,f)}else l.push(u)}function wN(l,o){let u=l[0];const f=[u];for(let g=1;g<l.length;g++){const x=l[g];yw(f,u,x,o),u=x}return f}const bw=Math.pow(2,14)-1,TI=-bw-1;function TN(l,o){const u=Math.round(l.x*o),f=Math.round(l.y*o);return l.x=Ee(u,TI,bw),l.y=Ee(f,TI,bw),(u<l.x||u>l.x+1||f<l.y||f>l.y+1)&&Ve("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function ah(l,o,u){const f=l.loadGeometry(),g=l.extent,x=mn/g;if(o&&u&&u.projection.isReprojectedInTileSpace){const C=1<<o.z,{scale:A,x:B,y:$,projection:Y}=u,J=se=>{const he=zu((o.x+se.x/g)/C),me=ca((o.y+se.y/g)/C),xe=Y.project(he,me);se.x=(xe.x*A-B)*g,se.y=(xe.y*A-$)*g};for(let se=0;se<f.length;se++)if(l.type!==1)f[se]=wI(f[se],J,1);else{const he=[];for(const me of f[se])me.x<0||me.x>=g||me.y<0||me.y>=g||(J(me),he.push(me));f[se]=he}}for(const C of f)for(const A of C)TN(A,x);return f}function op(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?ah(l):[]}}function d0(l,o,u,f,g){l.emplaceBack(2*o+(f+1)/2,2*u+(g+1)/2)}function h0(l,o,u){l.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class xw{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new an,this.indexArray=new ua,this.segments=new Gs,this.programConfigurations=new ep(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f,g){const x=this.layers[0],C=[];let A=null;x.type==="circle"&&(A=x.layout.get("circle-sort-key"));for(const{feature:$,id:Y,index:J,sourceLayerIndex:se}of o){const he=this.layers[0]._featureFilter.needGeometry,me=op($,he);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),me,f))continue;const xe=A?A.evaluate(me,{},f):void 0,Le={id:Y,properties:$.properties,type:$.type,sourceLayerIndex:se,index:J,geometry:he?me.geometry:ah($,f,g),patterns:{},sortKey:xe};C.push(Le)}A&&C.sort(($,Y)=>$.sortKey-Y.sortKey);let B=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new $u,B=g.projection);for(const $ of C){const{geometry:Y,index:J,sourceLayerIndex:se}=$,he=o[J].feature;this.addFeature($,Y,J,u.availableImages,f,B),u.featureIndex.insert(he,Y,J,se,this.index)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,cN.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,dN.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,u,f,g,x,C){for(const A of u)for(const B of A){const $=B.x,Y=B.y;if($<0||$>=mn||Y<0||Y>=mn)continue;if(C){const he=C.projectTilePoint($,Y,x),me=C.upVector(x,$,Y),xe=this.globeExtVertexArray;h0(xe,he,me),h0(xe,he,me),h0(xe,he,me),h0(xe,he,me)}const J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),se=J.vertexLength;d0(this.layoutVertexArray,$,Y,-1,-1),d0(this.layoutVertexArray,$,Y,1,-1),d0(this.layoutVertexArray,$,Y,1,1),d0(this.layoutVertexArray,$,Y,-1,1),this.indexArray.emplaceBack(se,se+1,se+2),this.indexArray.emplaceBack(se,se+2,se+3),J.vertexLength+=4,J.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,x)}}function SI(l,o){for(let u=0;u<l.length;u++)if(ap(o,l[u]))return!0;for(let u=0;u<o.length;u++)if(ap(l,o[u]))return!0;return!!ww(l,o)}function SN(l,o,u){return!!ap(l,o)||!!Tw(o,l,u)}function CI(l,o){if(l.length===1)return EI(o,l[0]);for(let u=0;u<o.length;u++){const f=o[u];for(let g=0;g<f.length;g++)if(ap(l,f[g]))return!0}for(let u=0;u<l.length;u++)if(EI(o,l[u]))return!0;for(let u=0;u<o.length;u++)if(ww(l,o[u]))return!0;return!1}function CN(l,o,u){if(l.length>1){if(ww(l,o))return!0;for(let f=0;f<o.length;f++)if(Tw(o[f],l,u))return!0}for(let f=0;f<l.length;f++)if(Tw(l[f],o,u))return!0;return!1}function ww(l,o){if(l.length===0||o.length===0)return!1;for(let u=0;u<l.length-1;u++){const f=l[u],g=l[u+1];for(let x=0;x<o.length-1;x++)if(kN(f,g,o[x],o[x+1]))return!0}return!1}function kN(l,o,u,f){return dt(l,u,f)!==dt(o,u,f)&&dt(l,o,u)!==dt(l,o,f)}function Tw(l,o,u){const f=u*u;if(o.length===1)return l.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(kI(l,o[g-1],o[g])<f)return!0;return!1}function kI(l,o,u){const f=o.distSqr(u);if(f===0)return l.distSqr(o);const g=((l.x-o.x)*(u.x-o.x)+(l.y-o.y)*(u.y-o.y))/f;return l.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function EI(l,o){let u,f,g,x=!1;for(let C=0;C<l.length;C++){u=l[C];for(let A=0,B=u.length-1;A<u.length;B=A++)f=u[A],g=u[B],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function ap(l,o){let u=!1;for(let f=0,g=l.length-1;f<l.length;g=f++){const x=l[f],C=l[g];x.y>o.y!=C.y>o.y&&o.x<(C.x-x.x)*(o.y-x.y)/(C.y-x.y)+x.x&&(u=!u)}return u}function II(l,o,u,f,g){for(const C of l)if(o<=C.x&&u<=C.y&&f>=C.x&&g>=C.y)return!0;const x=[new ie(o,u),new ie(o,g),new ie(f,g),new ie(f,u)];if(l.length>2){for(const C of x)if(ap(l,C))return!0}for(let C=0;C<l.length-1;C++)if(EN(l[C],l[C+1],x))return!0;return!1}function EN(l,o,u){const f=u[0],g=u[2];if(l.x<f.x&&o.x<f.x||l.x>g.x&&o.x>g.x||l.y<f.y&&o.y<f.y||l.y>g.y&&o.y>g.y)return!1;const x=dt(l,o,u[0]);return x!==dt(l,o,u[1])||x!==dt(l,o,u[2])||x!==dt(l,o,u[3])}function gm(l,o,u){const f=o.paint.get(l).value;return f.kind==="constant"?f.value:u.programConfigurations.get(o.id).getMaxValue(l)}function f0(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function PI(l,o,u,f,g){if(!o[0]&&!o[1])return l;const x=ie.convert(o)._mult(g);u==="viewport"&&x._rotate(-f);const C=[];for(let A=0;A<l.length;A++)C.push(l[A].sub(x));return C}function AI(l,o,u,f){const g=ie.convert(l)._mult(f);return o==="viewport"&&g._rotate(-u),g}wi(xw,"CircleBucket",{omit:["layers"]});const IN=new hi({"circle-sort-key":new zt(Wt.layout_circle["circle-sort-key"])});var PN={paint:new hi({"circle-radius":new zt(Wt.paint_circle["circle-radius"]),"circle-color":new zt(Wt.paint_circle["circle-color"]),"circle-blur":new zt(Wt.paint_circle["circle-blur"]),"circle-opacity":new zt(Wt.paint_circle["circle-opacity"]),"circle-translate":new Et(Wt.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(Wt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(Wt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(Wt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zt(Wt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zt(Wt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zt(Wt.paint_circle["circle-stroke-opacity"])}),layout:IN};function MI(l,o,u,f,g,x,C,A,B){if(x&&l.queryGeometry.isAboveHorizon)return!1;x&&(B*=l.pixelToTileUnitsFactor);const $=l.tileID.canonical,Y=u.projection.upVectorScale($,u.center.lat,u.worldSize).metersToTile;for(const J of o)for(const se of J){const he=se.add(A),me=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(he.x,he.y,!0):0,xe=u.projection.projectTilePoint(he.x,he.y,$);if(me>0){const qe=u.projection.upVector($,he.x,he.y);xe.x+=qe[0]*Y*me,xe.y+=qe[1]*Y*me,xe.z+=qe[2]*Y*me}const Le=x?he:AN(xe.x,xe.y,xe.z,f),Ze=x?l.tilespaceRays.map(qe=>ON(qe,me)):l.queryGeometry.screenGeometry,st=np([],[xe.x,xe.y,xe.z,1],f);if(!C&&x?B*=st[3]/u.cameraToCenterDistance:C&&!x&&(B*=u.cameraToCenterDistance/st[3]),x){const qe=ca((se.y/mn+$.y)/(1<<$.z));B/=u.projection.pixelsPerMeter(qe,1)/qc(1,qe)}if(SN(Ze,Le,B))return!0}return!1}function AN(l,o,u,f){const g=np([],[l,o,u,1],f);return new ie(g[0]/g[3],g[1]/g[3])}const OI=dm(0,0,0),MN=dm(0,0,1);function ON(l,o){const u=aw();return OI[2]=o,l.intersectsPlane(OI,MN,u),new ie(u[0],u[1])}class LI extends xw{}function DI(l,{width:o,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*u*f);return l.width=o,l.height=u,l.data=g,l}function RI(l,o,u){const{width:f,height:g}=o;f===l.width&&g===l.height||(Sw(l,o,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,f),height:Math.min(l.height,g)},u),l.width=f,l.height=g,l.data=o.data)}function Sw(l,o,u,f,g,x){if(g.width===0||g.height===0)return o;if(g.width>l.width||g.height>l.height||u.x>l.width-g.width||u.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const C=l.data,A=o.data;for(let B=0;B<g.height;B++){const $=((u.y+B)*l.width+u.x)*x,Y=((f.y+B)*o.width+f.x)*x;for(let J=0;J<g.width*x;J++)A[Y+J]=C[$+J]}return o}wi(LI,"HeatmapBucket",{omit:["layers"]});class lh{constructor(o,u){DI(this,o,1,u)}resize(o){RI(this,new lh(o),1)}clone(){return new lh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){Sw(o,u,f,g,x,1)}}class du{constructor(o,u){DI(this,o,4,u)}resize(o){RI(this,new du(o),4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){Sw(o,u,f,g,x,4)}}wi(lh,"AlphaImage"),wi(du,"RGBAImage");var LN={paint:new hi({"heatmap-radius":new zt(Wt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zt(Wt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(Wt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oi(Wt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(Wt.paint_heatmap["heatmap-opacity"])})};function Cw(l){const o={},u=l.resolution||256,f=l.clips?l.clips.length:1,g=l.image||new du({width:u,height:f}),x=(C,A,B)=>{o[l.evaluationKey]=B;const $=l.expression.evaluate(o);g.data[C+A+0]=Math.floor(255*$.r/$.a),g.data[C+A+1]=Math.floor(255*$.g/$.a),g.data[C+A+2]=Math.floor(255*$.b/$.a),g.data[C+A+3]=Math.floor(255*$.a)};if(l.clips)for(let C=0,A=0;C<f;++C,A+=4*u)for(let B=0,$=0;B<u;B++,$+=4){const Y=B/(u-1),{start:J,end:se}=l.clips[C];x(A,$,J*(1-Y)+se*Y)}else for(let C=0,A=0;C<u;C++,A+=4)x(0,A,C/(u-1));return g}var DN={paint:new hi({"hillshade-illumination-direction":new Et(Wt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(Wt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(Wt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(Wt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(Wt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(Wt.paint_hillshade["hillshade-accent-color"])})};const RN=tn([{name:"a_pos",components:2,type:"Int16"}],4),{members:BN}=RN;var _m={};function p0(l,o,u){u=u||2;var f,g,x,C,A,B,$,Y=o&&o.length,J=Y?o[0]*u:l.length,se=BI(l,0,J,u,!0),he=[];if(!se||se.next===se.prev)return he;if(Y&&(se=function(xe,Le,Ze,st){var qe,rt,ht,at=[];for(qe=0,rt=Le.length;qe<rt;qe++)(ht=BI(xe,Le[qe]*st,qe<rt-1?Le[qe+1]*st:xe.length,st,!1))===ht.next&&(ht.steiner=!0),at.push(HN(ht));for(at.sort(VN),qe=0;qe<at.length;qe++)Ze=UN(at[qe],Ze);return Ze}(l,o,se,u)),l.length>80*u){f=x=l[0],g=C=l[1];for(var me=u;me<J;me+=u)(A=l[me])<f&&(f=A),(B=l[me+1])<g&&(g=B),A>x&&(x=A),B>C&&(C=B);$=($=Math.max(x-f,C-g))!==0?32767/$:0}return k_(se,he,u,f,g,$,0),he}function BI(l,o,u,f,g){var x,C;if(g===Iw(l,o,u,f)>0)for(x=o;x<u;x+=f)C=NI(x,l[x],l[x+1],C);else for(x=u-f;x>=o;x-=f)C=NI(x,l[x],l[x+1],C);return C&&m0(C,C.next)&&(I_(C),C=C.next),C}function lp(l,o){if(!l)return l;o||(o=l);var u,f=l;do if(u=!1,f.steiner||!m0(f,f.next)&&Ws(f.prev,f,f.next)!==0)f=f.next;else{if(I_(f),(f=o=f.prev)===f.next)break;u=!0}while(u||f!==o);return o}function k_(l,o,u,f,g,x,C){if(l){!C&&x&&function(Y,J,se,he){var me=Y;do me.z===0&&(me.z=kw(me.x,me.y,J,se,he)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==Y);me.prevZ.nextZ=null,me.prevZ=null,function(xe){var Le,Ze,st,qe,rt,ht,at,$t,Lt=1;do{for(Ze=xe,xe=null,rt=null,ht=0;Ze;){for(ht++,st=Ze,at=0,Le=0;Le<Lt&&(at++,st=st.nextZ);Le++);for($t=Lt;at>0||$t>0&&st;)at!==0&&($t===0||!st||Ze.z<=st.z)?(qe=Ze,Ze=Ze.nextZ,at--):(qe=st,st=st.nextZ,$t--),rt?rt.nextZ=qe:xe=qe,qe.prevZ=rt,rt=qe;Ze=st}rt.nextZ=null,Lt*=2}while(ht>1)}(me)}(l,f,g,x);for(var A,B,$=l;l.prev!==l.next;)if(A=l.prev,B=l.next,x?$N(l,f,g,x):FN(l))o.push(A.i/u|0),o.push(l.i/u|0),o.push(B.i/u|0),I_(l),l=B.next,$=B.next;else if((l=B)===$){C?C===1?k_(l=NN(lp(l),o,u),o,u,f,g,x,2):C===2&&zN(l,o,u,f,g,x):k_(lp(l),o,u,f,g,x,1);break}}}function FN(l){var o=l.prev,u=l,f=l.next;if(Ws(o,u,f)>=0)return!1;for(var g=o.x,x=u.x,C=f.x,A=o.y,B=u.y,$=f.y,Y=g<x?g<C?g:C:x<C?x:C,J=A<B?A<$?A:$:B<$?B:$,se=g>x?g>C?g:C:x>C?x:C,he=A>B?A>$?A:$:B>$?B:$,me=f.next;me!==o;){if(me.x>=Y&&me.x<=se&&me.y>=J&&me.y<=he&&vm(g,A,x,B,C,$,me.x,me.y)&&Ws(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function $N(l,o,u,f){var g=l.prev,x=l,C=l.next;if(Ws(g,x,C)>=0)return!1;for(var A=g.x,B=x.x,$=C.x,Y=g.y,J=x.y,se=C.y,he=A<B?A<$?A:$:B<$?B:$,me=Y<J?Y<se?Y:se:J<se?J:se,xe=A>B?A>$?A:$:B>$?B:$,Le=Y>J?Y>se?Y:se:J>se?J:se,Ze=kw(he,me,o,u,f),st=kw(xe,Le,o,u,f),qe=l.prevZ,rt=l.nextZ;qe&&qe.z>=Ze&&rt&&rt.z<=st;){if(qe.x>=he&&qe.x<=xe&&qe.y>=me&&qe.y<=Le&&qe!==g&&qe!==C&&vm(A,Y,B,J,$,se,qe.x,qe.y)&&Ws(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,rt.x>=he&&rt.x<=xe&&rt.y>=me&&rt.y<=Le&&rt!==g&&rt!==C&&vm(A,Y,B,J,$,se,rt.x,rt.y)&&Ws(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;qe&&qe.z>=Ze;){if(qe.x>=he&&qe.x<=xe&&qe.y>=me&&qe.y<=Le&&qe!==g&&qe!==C&&vm(A,Y,B,J,$,se,qe.x,qe.y)&&Ws(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;rt&&rt.z<=st;){if(rt.x>=he&&rt.x<=xe&&rt.y>=me&&rt.y<=Le&&rt!==g&&rt!==C&&vm(A,Y,B,J,$,se,rt.x,rt.y)&&Ws(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function NN(l,o,u){var f=l;do{var g=f.prev,x=f.next.next;!m0(g,x)&&FI(g,f,f.next,x)&&E_(g,x)&&E_(x,g)&&(o.push(g.i/u|0),o.push(f.i/u|0),o.push(x.i/u|0),I_(f),I_(f.next),f=l=x),f=f.next}while(f!==l);return lp(f)}function zN(l,o,u,f,g,x){var C=l;do{for(var A=C.next.next;A!==C.prev;){if(C.i!==A.i&&GN(C,A)){var B=$I(C,A);return C=lp(C,C.next),B=lp(B,B.next),k_(C,o,u,f,g,x,0),void k_(B,o,u,f,g,x,0)}A=A.next}C=C.next}while(C!==l)}function VN(l,o){return l.x-o.x}function UN(l,o){var u=function(g,x){var C,A=x,B=g.x,$=g.y,Y=-1/0;do{if($<=A.y&&$>=A.next.y&&A.next.y!==A.y){var J=A.x+($-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(J<=B&&J>Y&&(Y=J,C=A.x<A.next.x?A:A.next,J===B))return C}A=A.next}while(A!==x);if(!C)return null;var se,he=C,me=C.x,xe=C.y,Le=1/0;A=C;do B>=A.x&&A.x>=me&&B!==A.x&&vm($<xe?B:Y,$,me,xe,$<xe?Y:B,$,A.x,A.y)&&(se=Math.abs($-A.y)/(B-A.x),E_(A,g)&&(se<Le||se===Le&&(A.x>C.x||A.x===C.x&&jN(C,A)))&&(C=A,Le=se)),A=A.next;while(A!==he);return C}(l,o);if(!u)return o;var f=$I(u,l);return lp(f,f.next),lp(u,u.next)}function jN(l,o){return Ws(l.prev,l,o.prev)<0&&Ws(o.next,l,l.next)<0}function kw(l,o,u,f,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-u)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function HN(l){var o=l,u=l;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==l);return u}function vm(l,o,u,f,g,x,C,A){return(g-C)*(o-A)>=(l-C)*(x-A)&&(l-C)*(f-A)>=(u-C)*(o-A)&&(u-C)*(x-A)>=(g-C)*(f-A)}function GN(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(u,f){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&FI(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(l,o)&&(E_(l,o)&&E_(o,l)&&function(u,f){var g=u,x=!1,C=(u.x+f.x)/2,A=(u.y+f.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&C<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==u);return x}(l,o)&&(Ws(l.prev,l,o.prev)||Ws(l,o.prev,o))||m0(l,o)&&Ws(l.prev,l,l.next)>0&&Ws(o.prev,o,o.next)>0)}function Ws(l,o,u){return(o.y-l.y)*(u.x-o.x)-(o.x-l.x)*(u.y-o.y)}function m0(l,o){return l.x===o.x&&l.y===o.y}function FI(l,o,u,f){var g=_0(Ws(l,o,u)),x=_0(Ws(l,o,f)),C=_0(Ws(u,f,l)),A=_0(Ws(u,f,o));return g!==x&&C!==A||!(g!==0||!g0(l,u,o))||!(x!==0||!g0(l,f,o))||!(C!==0||!g0(u,l,f))||!(A!==0||!g0(u,o,f))}function g0(l,o,u){return o.x<=Math.max(l.x,u.x)&&o.x>=Math.min(l.x,u.x)&&o.y<=Math.max(l.y,u.y)&&o.y>=Math.min(l.y,u.y)}function _0(l){return l>0?1:l<0?-1:0}function E_(l,o){return Ws(l.prev,l,l.next)<0?Ws(l,o,l.next)>=0&&Ws(l,l.prev,o)>=0:Ws(l,o,l.prev)<0||Ws(l,l.next,o)<0}function $I(l,o){var u=new Ew(l.i,l.x,l.y),f=new Ew(o.i,o.x,o.y),g=l.next,x=o.prev;return l.next=o,o.prev=l,u.next=g,g.prev=u,f.next=u,u.prev=f,x.next=f,f.prev=x,f}function NI(l,o,u,f){var g=new Ew(l,o,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function I_(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Ew(l,o,u){this.i=l,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Iw(l,o,u,f){for(var g=0,x=o,C=u-f;x<u;x+=f)g+=(l[C]-l[x])*(l[x+1]+l[C+1]),C=x;return g}function WN(l,o,u,f,g){zI(l,o,u||0,f||l.length-1,g||qN)}function zI(l,o,u,f,g){for(;f>u;){if(f-u>600){var x=f-u+1,C=o-u+1,A=Math.log(x),B=.5*Math.exp(2*A/3),$=.5*Math.sqrt(A*B*(x-B)/x)*(C-x/2<0?-1:1);zI(l,o,Math.max(u,Math.floor(o-C*B/x+$)),Math.min(f,Math.floor(o+(x-C)*B/x+$)),g)}var Y=l[o],J=u,se=f;for(P_(l,u,o),g(l[f],Y)>0&&P_(l,u,f);J<se;){for(P_(l,J,se),J++,se--;g(l[J],Y)<0;)J++;for(;g(l[se],Y)>0;)se--}g(l[u],Y)===0?P_(l,u,se):P_(l,++se,f),se<=o&&(u=se+1),o<=se&&(f=se-1)}}function P_(l,o,u){var f=l[o];l[o]=l[u],l[u]=f}function qN(l,o){return l<o?-1:l>o?1:0}function Pw(l,o){const u=l.length;if(u<=1)return[l];const f=[];let g,x;for(let C=0;C<u;C++){const A=kt(l[C]);A!==0&&(l[C].area=Math.abs(A),x===void 0&&(x=A<0),x===A<0?(g&&f.push(g),g=[l[C]]):g.push(l[C]))}if(g&&f.push(g),o>1)for(let C=0;C<f.length;C++)f[C].length<=o||(WN(f[C],o,1,f[C].length-1,ZN),f[C]=f[C].slice(0,o));return f}function ZN(l,o){return o.area-l.area}function Aw(l,o,u){const f=u.patternDependencies;let g=!1;for(const x of o){const C=x.paint.get(`${l}-pattern`);C.isConstant()||(g=!0);const A=C.constantOr(null);A&&(g=!0,f[A]=!0)}return g}function Mw(l,o,u,f,g){const x=g.patternDependencies;for(const C of o){const A=C.paint.get(`${l}-pattern`).value;if(A.kind!=="constant"){let B=A.evaluate({zoom:f},u,{},g.availableImages);B=B&&B.name?B.name:B,x[B]=!0,u.patterns[C.id]=B}}return u}({get exports(){return _m},set exports(l){_m=l}}).exports=p0,_m.default=p0,p0.deviation=function(l,o,u,f){var g=o&&o.length,x=Math.abs(Iw(l,0,g?o[0]*u:l.length,u));if(g)for(var C=0,A=o.length;C<A;C++)x-=Math.abs(Iw(l,o[C]*u,C<A-1?o[C+1]*u:l.length,u));var B=0;for(C=0;C<f.length;C+=3){var $=f[C]*u,Y=f[C+1]*u,J=f[C+2]*u;B+=Math.abs((l[$]-l[J])*(l[Y+1]-l[$+1])-(l[$]-l[Y])*(l[J+1]-l[$+1]))}return x===0&&B===0?0:Math.abs((B-x)/x)},p0.flatten=function(l){for(var o=l[0][0].length,u={vertices:[],holes:[],dimensions:o},f=0,g=0;g<l.length;g++){for(var x=0;x<l[g].length;x++)for(var C=0;C<o;C++)u.vertices.push(l[g][x][C]);g>0&&u.holes.push(f+=l[g-1].length)}return u};class v0{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new an,this.indexArray=new ua,this.indexArray2=new yd,this.programConfigurations=new ep(o.layers,o.zoom),this.segments=new Gs,this.segments2=new Gs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection}populate(o,u,f,g){this.hasPattern=Aw("fill",this.layers,u);const x=this.layers[0].layout.get("fill-sort-key"),C=[];for(const{feature:A,id:B,index:$,sourceLayerIndex:Y}of o){const J=this.layers[0]._featureFilter.needGeometry,se=op(A,J);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),se,f))continue;const he=x?x.evaluate(se,{},f,u.availableImages):void 0,me={id:B,properties:A.properties,type:A.type,sourceLayerIndex:Y,index:$,geometry:J?se.geometry:ah(A,f,g),patterns:{},sortKey:he};C.push(me)}x&&C.sort((A,B)=>A.sortKey-B.sortKey);for(const A of C){const{geometry:B,index:$,sourceLayerIndex:Y}=A;if(this.hasPattern){const J=Mw("fill",this.layers,A,this.zoom,u);this.patternFeatures.push(J)}else this.addFeature(A,B,$,f,{},u.availableImages);u.featureIndex.insert(o[$].feature,B,$,Y,this.index)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}addFeatures(o,u,f,g,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,u,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,BN),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,f,g,x,C=[]){for(const A of Pw(u,500)){let B=0;for(const me of A)B+=me.length;const $=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray),Y=$.vertexLength,J=[],se=[];for(const me of A){if(me.length===0)continue;me!==A[0]&&se.push(J.length/2);const xe=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Le=xe.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Le+me.length-1,Le),J.push(me[0].x),J.push(me[0].y);for(let Ze=1;Ze<me.length;Ze++)this.layoutVertexArray.emplaceBack(me[Ze].x,me[Ze].y),this.indexArray2.emplaceBack(Le+Ze-1,Le+Ze),J.push(me[Ze].x),J.push(me[Ze].y);xe.vertexLength+=me.length,xe.primitiveLength+=me.length}const he=_m(J,se);for(let me=0;me<he.length;me+=3)this.indexArray.emplaceBack(Y+he[me],Y+he[me+1],Y+he[me+2]);$.vertexLength+=B,$.primitiveLength+=he.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,C,g)}}wi(v0,"FillBucket",{omit:["layers","patternFeatures"]});const YN=new hi({"fill-sort-key":new zt(Wt.layout_fill["fill-sort-key"])});var XN={paint:new hi({"fill-antialias":new Et(Wt.paint_fill["fill-antialias"]),"fill-opacity":new zt(Wt.paint_fill["fill-opacity"]),"fill-color":new zt(Wt.paint_fill["fill-color"]),"fill-outline-color":new zt(Wt.paint_fill["fill-outline-color"]),"fill-translate":new Et(Wt.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(Wt.paint_fill["fill-translate-anchor"]),"fill-pattern":new zt(Wt.paint_fill["fill-pattern"])}),layout:YN};const KN=tn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),QN=tn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),JN=tn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ez}=KN;var y0={},tz=ie,VI=ym;function ym(l,o,u,f,g){this.properties={},this.extent=u,this.type=0,this._pbf=l,this._geometry=-1,this._keys=f,this._values=g,l.readFields(iz,this,o)}function iz(l,o,u){l==1?o.id=u.readVarint():l==2?function(f,g){for(var x=f.readVarint()+f.pos;f.pos<x;){var C=g._keys[f.readVarint()],A=g._values[f.readVarint()];g.properties[C]=A}}(u,o):l==3?o.type=u.readVarint():l==4&&(o._geometry=u.pos)}function nz(l){for(var o,u,f=0,g=0,x=l.length,C=x-1;g<x;C=g++)f+=((u=l[C]).x-(o=l[g]).x)*(o.y+u.y);return f}ym.types=["Unknown","Point","LineString","Polygon"],ym.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,u=l.readVarint()+l.pos,f=1,g=0,x=0,C=0,A=[];l.pos<u;){if(g<=0){var B=l.readVarint();f=7&B,g=B>>3}if(g--,f===1||f===2)x+=l.readSVarint(),C+=l.readSVarint(),f===1&&(o&&A.push(o),o=[]),o.push(new tz(x,C));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&A.push(o),A},ym.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,u=1,f=0,g=0,x=0,C=1/0,A=-1/0,B=1/0,$=-1/0;l.pos<o;){if(f<=0){var Y=l.readVarint();u=7&Y,f=Y>>3}if(f--,u===1||u===2)(g+=l.readSVarint())<C&&(C=g),g>A&&(A=g),(x+=l.readSVarint())<B&&(B=x),x>$&&($=x);else if(u!==7)throw new Error("unknown command "+u)}return[C,B,A,$]},ym.prototype.toGeoJSON=function(l,o,u){var f,g,x=this.extent*Math.pow(2,u),C=this.extent*l,A=this.extent*o,B=this.loadGeometry(),$=ym.types[this.type];function Y(he){for(var me=0;me<he.length;me++){var xe=he[me];he[me]=[360*(xe.x+C)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(xe.y+A)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(f=0;f<B.length;f++)J[f]=B[f][0];Y(B=J);break;case 2:for(f=0;f<B.length;f++)Y(B[f]);break;case 3:for(B=function(he){var me=he.length;if(me<=1)return[he];for(var xe,Le,Ze=[],st=0;st<me;st++){var qe=nz(he[st]);qe!==0&&(Le===void 0&&(Le=qe<0),Le===qe<0?(xe&&Ze.push(xe),xe=[he[st]]):xe.push(he[st]))}return xe&&Ze.push(xe),Ze}(B),f=0;f<B.length;f++)for(g=0;g<B[f].length;g++)Y(B[f][g])}B.length===1?B=B[0]:$="Multi"+$;var se={type:"Feature",geometry:{type:$,coordinates:B},properties:this.properties};return"id"in this&&(se.id=this.id),se};var rz=VI,UI=jI;function jI(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(sz,this,o),this.length=this._features.length}function sz(l,o,u){l===15?o.version=u.readVarint():l===1?o.name=u.readString():l===5?o.extent=u.readVarint():l===2?o._features.push(u.pos):l===3?o._keys.push(u.readString()):l===4&&o._values.push(function(f){for(var g=null,x=f.readVarint()+f.pos;f.pos<x;){var C=f.readVarint()>>3;g=C===1?f.readString():C===2?f.readFloat():C===3?f.readDouble():C===4?f.readVarint64():C===5?f.readVarint():C===6?f.readSVarint():C===7?f.readBoolean():null}return g}(u))}jI.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new rz(this._pbf,o,this.extent,this._keys,this._values)};var oz=UI;function az(l,o,u){if(l===3){var f=new oz(u,u.readVarint()+u.pos);f.length&&(o[f.name]=f)}}var Ow=y0.VectorTile=function(l,o){this.layers=l.readFields(az,{},o)},b0=y0.VectorTileFeature=VI;function x0(l,o,u,f){const g=[],x=f===0?(C,A,B,$,Y,J)=>{C.push(new ie(J,B+(J-A)/($-A)*(Y-B)))}:(C,A,B,$,Y,J)=>{C.push(new ie(A+(J-B)/(Y-B)*($-A),J))};for(const C of l){const A=[];for(const B of C){if(B.length<=2)continue;const $=[];for(let se=0;se<B.length-1;se++){const he=B[se].x,me=B[se].y,xe=B[se+1].x,Le=B[se+1].y,Ze=f===0?he:me,st=f===0?xe:Le;Ze<o?st>o&&x($,he,me,xe,Le,o):Ze>u?st<u&&x($,he,me,xe,Le,u):$.push(B[se]),st<o&&Ze>=o&&x($,he,me,xe,Le,o),st>u&&Ze<=u&&x($,he,me,xe,Le,u)}let Y=B[B.length-1];const J=f===0?Y.x:Y.y;J>=o&&J<=u&&$.push(Y),$.length&&(Y=$[$.length-1],$[0].x===Y.x&&$[0].y===Y.y||$.push($[0]),A.push($))}A.length&&g.push(A)}return g}y0.VectorTileLayer=UI;const lz=b0.types,uz=Math.pow(2,13);function A_(l,o,u,f,g,x,C,A){l.emplaceBack((o<<1)+C,(u<<1)+x,(Math.floor(f*uz)<<1)+g,Math.round(A))}function M_(l,o,u){l.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class HI{constructor(){this.acc=new ie(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ie(o.x,o.y),this.max=new ie(o.x,o.y))}append(o,u){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((o.x===0||o.x===mn)&&o.x===u.x)!=((o.y===0||o.y===mn)&&o.y===u.y)&&this.processBorderOverlap(o,u),u.x<0!=o.x<0&&this.addBorderIntersection(0,kn(u.y,o.y,(0-u.x)/(o.x-u.x))),u.x>mn!=o.x>mn&&this.addBorderIntersection(1,kn(u.y,o.y,(mn-u.x)/(o.x-u.x))),u.y<0!=o.y<0&&this.addBorderIntersection(2,kn(u.x,o.x,(0-u.y)/(o.y-u.y))),u.y>mn!=o.y>mn&&this.addBorderIntersection(3,kn(u.x,o.x,(mn-u.y)/(o.y-u.y)))}addBorderIntersection(o,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(o,u){if(o.x===u.x){if(o.y===u.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce((u,f)=>u+f.edges,0);return o!==0?this.acc.div(o)._round():new ie(0,0)}span(){return new ie(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((o,u)=>o+ +(u[0]!==Number.MAX_VALUE),0)}}class O_{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new mr,this.centroidVertexArray=new GE,this.indexArray=new ua,this.programConfigurations=new ep(o.layers,o.zoom),this.segments=new Gs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=o.enableTerrain}populate(o,u,f,g){this.features=[],this.hasPattern=Aw("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(x){const C=Math.exp(Math.PI*(1-x.y/(1<<x.z)*2));return 80150034*C/(C*C+1)/mn/(1<<x.z)}(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:x,id:C,index:A,sourceLayerIndex:B}of o){const $=this.layers[0]._featureFilter.needGeometry,Y=op(x,$);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),Y,f))continue;const J={id:C,sourceLayerIndex:B,index:A,geometry:$?Y.geometry:ah(x,f,g),properties:x.properties,type:x.type,patterns:{}},se=this.layoutVertexArray.length;this.hasPattern?this.features.push(Mw("fill-extrusion",this.layers,J,this.zoom,u)):this.addFeature(J,J.geometry,A,f,{},u.availableImages,g),u.featureIndex.insert(x,J.geometry,A,B,this.index,se)}this.sortBorders()}addFeatures(o,u,f,g,x){for(const C of this.features){const{geometry:A}=C;this.addFeature(C,A,C.index,u,f,g,x)}this.sortBorders()}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ez),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,JN.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,QN.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,f,g,x,C,A){const B=[new ie(0,0),new ie(mn,mn)],$=A.projection,Y=$.name==="globe",J=this.enableTerrain&&!Y?new HI:null,se=lz[o.type]==="Polygon";Y&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new $u);const he=Pw(u,500);for(let Ze=he.length-1;Ze>=0;Ze--){const st=he[Ze];(st.length===0||(me=st[0]).every(qe=>qe.x<=0)||me.every(qe=>qe.x>=mn)||me.every(qe=>qe.y<=0)||me.every(qe=>qe.y>=mn))&&he.splice(Ze,1)}var me;let xe;if(Y)xe=KI(he,B,g);else{xe=[];for(const Ze of he)xe.push({polygon:Ze,bounds:B})}const Le=se?this.edgeRadius:0;for(const{polygon:Ze,bounds:st}of xe){let qe=0,rt=0;for(const at of Ze)se&&!at[0].equals(at[at.length-1])&&at.push(at[0]),rt+=se?at.length-1:at.length;const ht=this.segments.prepareSegment((se?5:4)*rt,this.layoutVertexArray,this.indexArray);if(se){const at=[],$t=[];qe=ht.vertexLength;for(const Kt of Ze){let mi,Ut;Kt.length&&Kt!==Ze[0]&&$t.push(at.length/2),mi=Kt[1].sub(Kt[0])._perp()._unit();for(let ii=1;ii<Kt.length;ii++){const ri=Kt[ii],di=Kt[ii===Kt.length-1?1:ii+1];let{x:vi,y:Ht}=ri;if(Le){Ut=di.sub(ri)._perp()._unit();const Di=mi.add(Ut)._unit(),un=Le*Math.min(4,1/(mi.x*Di.x+mi.y*Di.y));vi+=un*Di.x,Ht+=un*Di.y,mi=Ut}A_(this.layoutVertexArray,vi,Ht,0,0,1,1,0),ht.vertexLength++,at.push(ri.x,ri.y),Y&&M_(this.layoutVertexExtArray,$.projectTilePoint(vi,Ht,g),$.upVector(g,vi,Ht))}}const Lt=_m(at,$t);for(let Kt=0;Kt<Lt.length;Kt+=3)this.indexArray.emplaceBack(qe+Lt[Kt],qe+Lt[Kt+2],qe+Lt[Kt+1]),ht.primitiveLength++}for(const at of Ze){J&&at.length&&J.startRing(at[0]);let $t,Lt,Kt,mi=at.length>4&&ZI(at[at.length-2],at[0],at[1]),Ut=Le?cz(at[at.length-2],at[0],at[1],Le):0;Lt=at[1].sub(at[0])._perp()._unit();let ii=!0;for(let ri=1,di=0;ri<at.length;ri++){let vi=at[ri-1],Ht=at[ri];const Di=at[ri===at.length-1?1:ri+1];if(J&&se&&J.currentPolyCount.top++,qI(Ht,vi,st)){Le&&(Lt=Di.sub(Ht)._perp()._unit(),ii=!ii);continue}J&&J.append(Ht,vi);const un=Ht.sub(vi)._perp(),$i=un.x/(Math.abs(un.x)+Math.abs(un.y)),Ki=un.y>0?1:0,Ri=vi.dist(Ht);if(di+Ri>32768&&(di=0),Le){Kt=Di.sub(Ht)._perp()._unit();let $n=WI(vi,Ht,Di,GI(Lt,Kt),Le);isNaN($n)&&($n=0);const pn=Ht.sub(vi)._unit();vi=vi.add(pn.mult(Ut))._round(),Ht=Ht.add(pn.mult(-$n))._round(),Ut=$n,Lt=Kt}const cn=ht.vertexLength,Hn=at.length>4&&ZI(vi,Ht,Di);let zn=YI(di,mi,ii);if(A_(this.layoutVertexArray,vi.x,vi.y,$i,Ki,0,0,zn),A_(this.layoutVertexArray,vi.x,vi.y,$i,Ki,0,1,zn),di+=Ri,zn=YI(di,Hn,!ii),mi=Hn,A_(this.layoutVertexArray,Ht.x,Ht.y,$i,Ki,0,0,zn),A_(this.layoutVertexArray,Ht.x,Ht.y,$i,Ki,0,1,zn),ht.vertexLength+=4,this.indexArray.emplaceBack(cn+0,cn+1,cn+2),this.indexArray.emplaceBack(cn+1,cn+3,cn+2),ht.primitiveLength+=2,Le){const $n=qe+(ri===1?at.length-2:ri-2),pn=ri===1?qe:$n+1;if(this.indexArray.emplaceBack(cn+1,$n,cn+3),this.indexArray.emplaceBack($n,pn,cn+3),ht.primitiveLength+=2,$t===void 0&&($t=cn),!qI(Di,at[ri],st)){const Tr=ri===at.length-1?$t:ht.vertexLength;this.indexArray.emplaceBack(cn+2,cn+3,Tr),this.indexArray.emplaceBack(cn+3,Tr+1,Tr),this.indexArray.emplaceBack(cn+3,pn,Tr+1),ht.primitiveLength+=3}ii=!ii}if(Y){const $n=this.layoutVertexExtArray,pn=$.projectTilePoint(vi.x,vi.y,g),Tr=$.projectTilePoint(Ht.x,Ht.y,g),wn=$.upVector(g,vi.x,vi.y),Gn=$.upVector(g,Ht.x,Ht.y);M_($n,pn,wn),M_($n,pn,wn),M_($n,Tr,Gn),M_($n,Tr,Gn)}}se&&(qe+=at.length-1)}}if(J&&J.polyCount.length>0){if(J.borders){J.vertexArrayOffset=this.centroidVertexArray.length;const Ze=J.borders,st=this.featuresOnBorder.push(J)-1;for(let qe=0;qe<4;qe++)Ze[qe][0]!==Number.MAX_VALUE&&this.borders[qe].push(st)}this.encodeCentroid(J.borders?void 0:J.centroid(),J)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,C,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort((u,f)=>this.featuresOnBorder[u].borders[o][0]-this.featuresOnBorder[f].borders[o][0])}encodeCentroid(o,u,f=!0){let g,x;if(o)if(o.y!==0){const A=u.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(A.x/10)),x=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(A.y/10))}else g=Math.ceil(7*(o.x+450)),x=0;else g=0,x=+f;let C=f?this.centroidVertexArray.length:u.vertexArrayOffset;for(const A of u.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*A.edges+A.top);for(let B=0;B<A.top;B++)this.centroidVertexArray.emplace(C++,g,x);for(let B=0;B<2*A.edges;B++)this.centroidVertexArray.emplace(C++,0,x),this.centroidVertexArray.emplace(C++,g,x)}}}function GI(l,o){const u=l.add(o)._unit();return l.x*u.x+l.y*u.y}function cz(l,o,u,f){const g=o.sub(l)._perp()._unit(),x=u.sub(o)._perp()._unit();return WI(l,o,u,GI(g,x),f)}function WI(l,o,u,f,g){const x=Math.sqrt(1-f*f);return Math.min(l.dist(o)/3,o.dist(u)/3,g*x/f)}function qI(l,o,u){return l.x<u[0].x&&o.x<u[0].x||l.x>u[1].x&&o.x>u[1].x||l.y<u[0].y&&o.y<u[0].y||l.y>u[1].y&&o.y>u[1].y}function ZI(l,o,u){if(l.x<0||l.x>=mn||o.x<0||o.x>=mn||u.x<0||u.x>=mn)return!1;const f=u.sub(o),g=f.perp(),x=l.sub(o);return(f.x*x.x+f.y*x.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(x.x*x.x+x.y*x.y))>-.866&&g.x*x.x+g.y*x.y<0}function YI(l,o,u){const f=o?2|l:-3&l;return u?1|f:-2&f}function XI(){const l=Math.PI/32,o=Math.tan(l),u=C_;return u*Math.sqrt(1+2*o*o)-u}function KI(l,o,u){const f=1<<u.z,g=zu(u.x/f),x=zu((u.x+1)/f),C=ca(u.y/f),A=ca((u.y+1)/f);return function(B,$,Y,J,se=0,he){const me=[];if(!B.length||!Y||!J)return me;const xe=(at,$t)=>{for(const Lt of at)me.push({polygon:Lt,bounds:$t})},Le=Math.ceil(Math.log2(Y)),Ze=Math.ceil(Math.log2(J)),st=Le-Ze,qe=[];for(let at=0;at<Math.abs(st);at++)qe.push(st>0?0:1);for(let at=0;at<Math.min(Le,Ze);at++)qe.push(0),qe.push(1);let rt=B;if(rt=x0(rt,$[0].y-se,$[1].y+se,1),rt=x0(rt,$[0].x-se,$[1].x+se,0),!rt.length)return me;const ht=[];for(qe.length?ht.push({polygons:rt,bounds:$,depth:0}):xe(rt,$);ht.length;){const at=ht.pop(),$t=at.depth,Lt=qe[$t],Kt=at.bounds[0],mi=at.bounds[1],Ut=Lt===0?Kt.x:Kt.y,ii=Lt===0?mi.x:mi.y,ri=he?he(Lt,Ut,ii):.5*(Ut+ii),di=x0(at.polygons,Ut-se,ri+se,Lt),vi=x0(at.polygons,ri-se,ii+se,Lt);if(di.length){const Ht=[Kt,new ie(Lt===0?ri:mi.x,Lt===1?ri:mi.y)];qe.length>$t+1?ht.push({polygons:di,bounds:Ht,depth:$t+1}):xe(di,Ht)}if(vi.length){const Ht=[new ie(Lt===0?ri:Kt.x,Lt===1?ri:Kt.y),mi];qe.length>$t+1?ht.push({polygons:vi,bounds:Ht,depth:$t+1}):xe(vi,Ht)}}return me}(l,o,Math.ceil((x-g)/11.25),Math.ceil((C-A)/11.25),1,(B,$,Y)=>{if(B===0)return .5*($+Y);{const J=ca((u.y+$/mn)/f);return(Sd(.5*(ca((u.y+Y/mn)/f)+J))*f-u.y)*mn}})}wi(O_,"FillExtrusionBucket",{omit:["layers","features"]}),wi(HI,"PartMetadata");const dz=new hi({"fill-extrusion-edge-radius":new Et(Wt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var hz={paint:new hi({"fill-extrusion-opacity":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zt(Wt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zt(Wt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zt(Wt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zt(Wt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Et(Wt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:dz};function QI(l,o,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[l*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class w0{constructor(o,u,f){this.z=o,this.x=u,this.y=f,this.key=L_(0,o,o,u,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u){const f=function(x,C,A){var B=QI(256*x,256*(C=Math.pow(2,A)-C-1),A),$=QI(256*(x+1),256*(C+1),A);return B[0]+","+B[1]+","+$[0]+","+$[1]}(this.x,this.y,this.z),g=function(x,C,A){let B,$="";for(let Y=x;Y>0;Y--)B=1<<Y-1,$+=(C&B?1:0)+(A&B?2:0);return $}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class JI{constructor(o,u){this.wrap=o,this.canonical=u,this.key=L_(o,u.z,u.z,u.x,u.y)}}class nl{constructor(o,u,f,g,x){this.overscaledZ=o,this.wrap=u,this.canonical=new w0(f,+g,+x),this.key=u===0&&o===f?this.canonical.key:L_(u,o,f,g,x)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const u=this.canonical.z-o;return o>this.canonical.z?new nl(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nl(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u=!0){if(this.overscaledZ===o&&u)return this.key;if(o>this.canonical.z)return L_(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return L_(this.wrap*+u,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new nl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new nl(u,this.wrap,u,f,g),new nl(u,this.wrap,u,f+1,g),new nl(u,this.wrap,u,f,g+1),new nl(u,this.wrap,u,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new nl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new nl(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new JI(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function L_(l,o,u,f,g){const x=1<<Math.min(u,22);let C=x*(g%x)+f%x;return l&&u<22&&(C+=x*x*((l<0?-2*l-1:2*l)%(1<<2*(22-u)))),16*(32*C+u)+(o-u)}wi(w0,"CanonicalTileID"),wi(nl,"OverscaledTileID",{omit:["projMatrix"]});class bm extends ie{constructor(o,u,f){super(o,u),this.z=f}}function D_(l,o){return l.x*o.x+l.y*o.y}function eP(l,o){if(l.length===1){let u=0;const f=o[u++];let g;for(;!g||f.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const x=o[u],C=l[0],A=g.sub(f),B=x.sub(f),$=C.sub(f),Y=D_(A,A),J=D_(A,B),se=D_(B,B),he=D_($,A),me=D_($,B),xe=Y*se-J*J,Le=(se*he-J*me)/xe,Ze=(Y*me-J*he)/xe,st=f.z*(1-Le-Ze)+g.z*Le+x.z*Ze;if(isFinite(st))return st}return 1/0}{let u=1/0;for(const f of o)u=Math.min(u,f.z);return u}}function tP(l,o,u,f,g,x,C,A){const B=C*g.getElevationAt(l,o,!0,!0),$=x[0]!==0,Y=$?x[1]===0?C*(x[0]/7-450):C*function(J,se,he){const me=Math.floor(se[0]/8),xe=Math.floor(se[1]/8),Le=10*(se[0]-8*me),Ze=10*(se[1]-8*xe),st=J.getElevationAt(me,xe,!0,!0),qe=J.getMeterToDEM(he),rt=Math.floor(.5*(Le*qe-1)),ht=Math.floor(.5*(Ze*qe-1)),at=J.tileCoordToPixel(me,xe),$t=2*rt+1,Lt=2*ht+1,Kt=function(vi,Ht,Di,un,$i){return[vi.getElevationAtPixel(Ht,Di,!0),vi.getElevationAtPixel(Ht+$i,Di,!0),vi.getElevationAtPixel(Ht,Di+$i,!0),vi.getElevationAtPixel(Ht+un,Di+$i,!0)]}(J,at.x-rt,at.y-ht,$t,Lt),mi=Math.abs(Kt[0]-Kt[1]),Ut=Math.abs(Kt[2]-Kt[3]),ii=Math.abs(Kt[0]-Kt[2])+Math.abs(Kt[1]-Kt[3]),ri=Math.min(.25,.5*qe*(mi+Ut)/$t),di=Math.min(.25,.5*qe*ii/Lt);return st+Math.max(ri*Le,di*Ze)}(g,x,A):B;return{base:B+(u===0)?-1:u,top:$?Math.max(Y+f,B+u+2):B+f}}const fz=tn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:pz}=fz,mz=tn([{name:"a_packed",components:4,type:"Float32"}]),{members:gz}=mz,_z=b0.types,vz=Math.cos(Math.PI/180*37.5);class T0{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new $r,this.layoutVertexArray2=new Dr,this.indexArray=new ua,this.programConfigurations=new ep(o.layers,o.zoom),this.segments=new Gs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f,g){this.hasPattern=Aw("line",this.layers,u);const x=this.layers[0].layout.get("line-sort-key"),C=[];for(const{feature:Y,id:J,index:se,sourceLayerIndex:he}of o){const me=this.layers[0]._featureFilter.needGeometry,xe=op(Y,me);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),xe,f))continue;const Le=x?x.evaluate(xe,{},f):void 0,Ze={id:J,properties:Y.properties,type:Y.type,sourceLayerIndex:he,index:se,geometry:me?xe.geometry:ah(Y,f,g),patterns:{},sortKey:Le};C.push(Ze)}x&&C.sort((Y,J)=>Y.sortKey-J.sortKey);const{lineAtlas:A,featureIndex:B}=u,$=this.addConstantDashes(A);for(const Y of C){const{geometry:J,index:se,sourceLayerIndex:he}=Y;if($&&this.addFeatureDashes(Y,A),this.hasPattern){const me=Mw("line",this.layers,Y,this.zoom,u);this.patternFeatures.push(me)}else this.addFeature(Y,J,se,f,A.positions,u.availableImages);B.insert(o[se].feature,J,se,he,this.index)}}addConstantDashes(o){let u=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(g.kind!=="constant"||x.kind!=="constant")u=!0;else{const C=x.value,A=g.value;if(!A)continue;o.addDash(A,C)}}return u}addFeatureDashes(o,u){const f=this.zoom;for(const g of this.layers){const x=g.paint.get("line-dasharray").value,C=g.layout.get("line-cap").value;if(x.kind==="constant"&&C.kind==="constant")continue;let A,B;if(x.kind==="constant"){if(A=x.value,!A)continue}else A=x.evaluate({zoom:f},o);B=C.kind==="constant"?C.value:C.evaluate({zoom:f},o),u.addDash(A,B),o.patterns[g.id]=u.getKey(A,B)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}addFeatures(o,u,f,g,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,u,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,gz)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,pz),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,f,g,x,C){const A=this.layers[0].layout,B=A.get("line-join").evaluate(o,{}),$=A.get("line-cap").evaluate(o,{}),Y=A.get("line-miter-limit"),J=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const se of u)this.addLine(se,o,B,$,Y,J);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,C,g)}addLine(o,u,f,g,x,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ze=0;Ze<o.length-1;Ze++)this.totalDistance+=o[Ze].dist(o[Ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=_z[u.type]==="Polygon";let B=o.length;for(;B>=2&&o[B-1].equals(o[B-2]);)B--;let $=0;for(;$<B-1&&o[$].equals(o[$+1]);)$++;if(B<(A?3:2))return;f==="bevel"&&(x=1.05);const Y=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let se,he,me,xe,Le;this.e1=this.e2=-1,A&&(se=o[B-2],Le=o[$].sub(se)._unit()._perp());for(let Ze=$;Ze<B;Ze++){if(me=Ze===B-1?A?o[$+1]:void 0:o[Ze+1],me&&o[Ze].equals(me))continue;Le&&(xe=Le),se&&(he=se),se=o[Ze],Le=me?me.sub(se)._unit()._perp():xe,xe=xe||Le;let st=xe.add(Le);st.x===0&&st.y===0||st._unit();const qe=xe.x*Le.x+xe.y*Le.y,rt=st.x*Le.x+st.y*Le.y,ht=rt!==0?1/rt:1/0,at=2*Math.sqrt(2-2*rt),$t=rt<vz&&he&&me,Lt=xe.x*Le.y-xe.y*Le.x>0;if($t&&Ze>$){const Ut=se.dist(he);if(Ut>2*Y){const ii=se.sub(se.sub(he)._mult(Y/Ut)._round());this.updateDistance(he,ii),this.addCurrentVertex(ii,xe,0,0,J),he=ii}}const Kt=he&&me;let mi=Kt?f:A?"butt":g;if(Kt&&mi==="round"&&(ht<C?mi="miter":ht<=2&&(mi="fakeround")),mi==="miter"&&ht>x&&(mi="bevel"),mi==="bevel"&&(ht>2&&(mi="flipbevel"),ht<x&&(mi="miter")),he&&this.updateDistance(he,se),mi==="miter")st._mult(ht),this.addCurrentVertex(se,st,0,0,J);else if(mi==="flipbevel"){if(ht>100)st=Le.mult(-1);else{const Ut=ht*xe.add(Le).mag()/xe.sub(Le).mag();st._perp()._mult(Ut*(Lt?-1:1))}this.addCurrentVertex(se,st,0,0,J),this.addCurrentVertex(se,st.mult(-1),0,0,J)}else if(mi==="bevel"||mi==="fakeround"){const Ut=-Math.sqrt(ht*ht-1),ii=Lt?Ut:0,ri=Lt?0:Ut;if(he&&this.addCurrentVertex(se,xe,ii,ri,J),mi==="fakeround"){const di=Math.round(180*at/Math.PI/20);for(let vi=1;vi<di;vi++){let Ht=vi/di;if(Ht!==.5){const un=Ht-.5;Ht+=Ht*un*(Ht-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*un*un+(.848013+qe*(.215638*qe-1.06021)))}const Di=Le.sub(xe)._mult(Ht)._add(xe)._unit()._mult(Lt?-1:1);this.addHalfVertex(se,Di.x,Di.y,!1,Lt,0,J)}}me&&this.addCurrentVertex(se,Le,-ii,-ri,J)}else if(mi==="butt")this.addCurrentVertex(se,st,0,0,J);else if(mi==="square"){const Ut=he?1:-1;he||this.addCurrentVertex(se,st,Ut,Ut,J),this.addCurrentVertex(se,st,0,0,J),he&&this.addCurrentVertex(se,st,Ut,Ut,J)}else mi==="round"&&(he&&(this.addCurrentVertex(se,xe,0,0,J),this.addCurrentVertex(se,xe,1,1,J,!0)),me&&(this.addCurrentVertex(se,Le,-1,-1,J,!0),this.addCurrentVertex(se,Le,0,0,J)));if($t&&Ze<B-1){const Ut=se.dist(me);if(Ut>2*Y){const ii=se.add(me.sub(se)._mult(Y/Ut)._round());this.updateDistance(se,ii),this.addCurrentVertex(ii,Le,0,0,J),se=ii}}}}addCurrentVertex(o,u,f,g,x,C=!1){const A=u.y*g-u.x,B=-u.y-u.x*g;this.addHalfVertex(o,u.x+u.y*f,u.y-u.x*f,C,!1,f,x),this.addHalfVertex(o,A,B,C,!0,-g,x)}addHalfVertex({x:o,y:u},f,g,x,C,A,B){this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(u<<1)+(C?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const $=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),B.primitiveLength++),C?this.e2=$:this.e1=$}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,u){this.distance+=o.dist(u),this.updateScaledDistance()}}wi(T0,"LineBucket",{omit:["layers","patternFeatures"]});const yz=new hi({"line-cap":new zt(Wt.layout_line["line-cap"]),"line-join":new zt(Wt.layout_line["line-join"]),"line-miter-limit":new Et(Wt.layout_line["line-miter-limit"]),"line-round-limit":new Et(Wt.layout_line["line-round-limit"]),"line-sort-key":new zt(Wt.layout_line["line-sort-key"])});var iP={paint:new hi({"line-opacity":new zt(Wt.paint_line["line-opacity"]),"line-color":new zt(Wt.paint_line["line-color"]),"line-translate":new Et(Wt.paint_line["line-translate"]),"line-translate-anchor":new Et(Wt.paint_line["line-translate-anchor"]),"line-width":new zt(Wt.paint_line["line-width"]),"line-gap-width":new zt(Wt.paint_line["line-gap-width"]),"line-offset":new zt(Wt.paint_line["line-offset"]),"line-blur":new zt(Wt.paint_line["line-blur"]),"line-dasharray":new zt(Wt.paint_line["line-dasharray"]),"line-pattern":new zt(Wt.paint_line["line-pattern"]),"line-gradient":new oi(Wt.paint_line["line-gradient"]),"line-trim-offset":new Et(Wt.paint_line["line-trim-offset"])}),layout:yz};const nP=new class extends zt{possiblyEvaluate(l,o){return o=new It(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(l,o)}evaluate(l,o,u,f){return o=Tt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(l,o,u,f)}}(iP.paint.properties["line-width"].specification);function rP(l,o){return o>0?o+2*l:l}nP.useIntegerZoom=!0;const bz=tn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xz=tn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),wz=tn([{name:"a_projected_pos",components:4,type:"Float32"}],4);tn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Tz=tn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Sz=tn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);tn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sP=tn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Cz=tn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);tn([{name:"triangle",components:3,type:"Uint16"}]),tn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),tn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),tn([{type:"Float32",name:"offsetX"}]),tn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ha=24;const Cd=128;function Lw(l,o){const{expression:u}=o;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new It(l+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let x=0;for(;x<f.length&&f[x]<=l;)x++;x=Math.max(0,x-1);let C=x;for(;C<f.length&&f[C]<l+1;)C++;C=Math.min(f.length-1,C);const A=f[x],B=f[C];return u.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:B,interpolationType:g}:{kind:"camera",minZoom:A,maxZoom:B,minSize:u.evaluate(new It(A)),maxSize:u.evaluate(new It(B)),interpolationType:g}}}function S0(l,{uSize:o,uSizeT:u},{lowerSize:f,upperSize:g}){return l.kind==="source"?f/Cd:l.kind==="composite"?kn(f/Cd,g/Cd,u):o}function xm(l,o){let u=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:C}=l,A=g?Ee(bo.interpolationFactor(g,o,x,C),0,1):0;l.kind==="camera"?f=kn(l.minSize,l.maxSize,A):u=A}return{uSizeT:u,uSize:f}}var kz=Object.freeze({__proto__:null,getSizeData:Lw,evaluateSizeForFeature:S0,evaluateSizeForZoom:xm,SIZE_PACK_FACTOR:Cd});function Ez(l,o,u){return l.sections.forEach(f=>{f.text=function(g,x,C){const A=x.layout.get("text-transform").evaluate(C,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),xt.applyArabicShaping&&(g=xt.applyArabicShaping(g)),g}(f.text,o,u)}),l}const R_={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function Iz(l){return l==="︶"||l==="﹈"||l==="︸"||l==="﹄"||l==="﹂"||l==="︾"||l==="︼"||l==="︺"||l==="︘"||l==="﹀"||l==="︐"||l==="︓"||l==="︔"||l==="｀"||l==="￣"||l==="︑"||l==="︒"}function Pz(l){return l==="︵"||l==="﹇"||l==="︷"||l==="﹃"||l==="﹁"||l==="︽"||l==="︻"||l==="︹"||l==="︗"||l==="︿"}var B_=Nr,oP=function(l,o,u,f,g){var x,C,A=8*g-f-1,B=(1<<A)-1,$=B>>1,Y=-7,J=u?g-1:0,se=u?-1:1,he=l[o+J];for(J+=se,x=he&(1<<-Y)-1,he>>=-Y,Y+=A;Y>0;x=256*x+l[o+J],J+=se,Y-=8);for(C=x&(1<<-Y)-1,x>>=-Y,Y+=f;Y>0;C=256*C+l[o+J],J+=se,Y-=8);if(x===0)x=1-$;else{if(x===B)return C?NaN:1/0*(he?-1:1);C+=Math.pow(2,f),x-=$}return(he?-1:1)*C*Math.pow(2,x-f)},aP=function(l,o,u,f,g,x){var C,A,B,$=8*x-g-1,Y=(1<<$)-1,J=Y>>1,se=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=f?0:x-1,me=f?1:-1,xe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(A=isNaN(o)?1:0,C=Y):(C=Math.floor(Math.log(o)/Math.LN2),o*(B=Math.pow(2,-C))<1&&(C--,B*=2),(o+=C+J>=1?se/B:se*Math.pow(2,1-J))*B>=2&&(C++,B/=2),C+J>=Y?(A=0,C=Y):C+J>=1?(A=(o*B-1)*Math.pow(2,g),C+=J):(A=o*Math.pow(2,J-1)*Math.pow(2,g),C=0));g>=8;l[u+he]=255&A,he+=me,A/=256,g-=8);for(C=C<<g|A,$+=g;$>0;l[u+he]=255&C,he+=me,C/=256,$-=8);l[u+he-me]|=128*xe};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Nr(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Nr.Varint=0,Nr.Fixed64=1,Nr.Bytes=2,Nr.Fixed32=5;var Dw=4294967296,lP=1/Dw,uP=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function uh(l){return l.type===Nr.Bytes?l.readVarint()+l.pos:l.pos+1}function wm(l,o,u){return u?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}function cP(l,o,u){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(f);for(var g=u.pos-1;g>=l;g--)u.buf[g+f]=u.buf[g]}function Az(l,o){for(var u=0;u<l.length;u++)o.writeVarint(l[u])}function Mz(l,o){for(var u=0;u<l.length;u++)o.writeSVarint(l[u])}function Oz(l,o){for(var u=0;u<l.length;u++)o.writeFloat(l[u])}function Lz(l,o){for(var u=0;u<l.length;u++)o.writeDouble(l[u])}function Dz(l,o){for(var u=0;u<l.length;u++)o.writeBoolean(l[u])}function Rz(l,o){for(var u=0;u<l.length;u++)o.writeFixed32(l[u])}function Bz(l,o){for(var u=0;u<l.length;u++)o.writeSFixed32(l[u])}function Fz(l,o){for(var u=0;u<l.length;u++)o.writeFixed64(l[u])}function $z(l,o){for(var u=0;u<l.length;u++)o.writeSFixed64(l[u])}function C0(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function Tm(l,o,u){l[u]=o,l[u+1]=o>>>8,l[u+2]=o>>>16,l[u+3]=o>>>24}function dP(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}function Nz(l,o,u){o.glyphs=[],l===1&&u.readMessage(zz,o)}function zz(l,o,u){if(l===3){const{id:f,bitmap:g,width:x,height:C,left:A,top:B,advance:$}=u.readMessage(Vz,{});o.glyphs.push({id:f,bitmap:new lh({width:x+6,height:C+6},g),metrics:{width:x,height:C,left:A,top:B,advance:$}})}else l===4?o.ascender=u.readSVarint():l===5&&(o.descender=u.readSVarint())}function Vz(l,o,u){l===1?o.id=u.readVarint():l===2?o.bitmap=u.readBytes():l===3?o.width=u.readVarint():l===4?o.height=u.readVarint():l===5?o.left=u.readSVarint():l===6?o.top=u.readSVarint():l===7&&(o.advance=u.readVarint())}function Rw(l){let o=0,u=0;for(const C of l)o+=C.w*C.h,u=Math.max(u,C.w);l.sort((C,A)=>A.h-C.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,x=0;for(const C of l)for(let A=f.length-1;A>=0;A--){const B=f[A];if(!(C.w>B.w||C.h>B.h)){if(C.x=B.x,C.y=B.y,x=Math.max(x,C.y+C.h),g=Math.max(g,C.x+C.w),C.w===B.w&&C.h===B.h){const $=f.pop();A<f.length&&(f[A]=$)}else C.h===B.h?(B.x+=C.w,B.w-=C.w):C.w===B.w?(B.y+=C.h,B.h-=C.h):(f.push({x:B.x+C.w,y:B.y,w:B.w-C.w,h:C.h}),B.y+=C.h,B.h-=C.h);break}}return{w:g,h:x,fill:o/(g*x)||0}}Nr.prototype={destroy:function(){this.buf=null},readFields:function(l,o,u){for(u=u||this.length;this.pos<u;){var f=this.readVarint(),g=f>>3,x=this.pos;this.type=7&f,l(g,o,this),this.pos===x&&this.skip(f)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=C0(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=dP(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=C0(this.buf,this.pos)+C0(this.buf,this.pos+4)*Dw;return this.pos+=8,l},readSFixed64:function(){var l=C0(this.buf,this.pos)+dP(this.buf,this.pos+4)*Dw;return this.pos+=8,l},readFloat:function(){var l=oP(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=oP(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,u,f=this.buf;return o=127&(u=f[this.pos++]),u<128?o:(o|=(127&(u=f[this.pos++]))<<7,u<128?o:(o|=(127&(u=f[this.pos++]))<<14,u<128?o:(o|=(127&(u=f[this.pos++]))<<21,u<128?o:function(g,x,C){var A,B,$=C.buf;if(A=(112&(B=$[C.pos++]))>>4,B<128||(A|=(127&(B=$[C.pos++]))<<3,B<128)||(A|=(127&(B=$[C.pos++]))<<10,B<128)||(A|=(127&(B=$[C.pos++]))<<17,B<128)||(A|=(127&(B=$[C.pos++]))<<24,B<128)||(A|=(1&(B=$[C.pos++]))<<31,B<128))return wm(g,A,x);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=f[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&uP?function(u,f,g){return uP.decode(u.subarray(f,g))}(this.buf,o,l):function(u,f,g){for(var x="",C=f;C<g;){var A,B,$,Y=u[C],J=null,se=Y>239?4:Y>223?3:Y>191?2:1;if(C+se>g)break;se===1?Y<128&&(J=Y):se===2?(192&(A=u[C+1]))==128&&(J=(31&Y)<<6|63&A)<=127&&(J=null):se===3?(B=u[C+2],(192&(A=u[C+1]))==128&&(192&B)==128&&((J=(15&Y)<<12|(63&A)<<6|63&B)<=2047||J>=55296&&J<=57343)&&(J=null)):se===4&&(B=u[C+2],$=u[C+3],(192&(A=u[C+1]))==128&&(192&B)==128&&(192&$)==128&&((J=(15&Y)<<18|(63&A)<<12|(63&B)<<6|63&$)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,se=1):J>65535&&(J-=65536,x+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),x+=String.fromCharCode(J),C+=se}return x}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==Nr.Bytes)return l.push(this.readVarint(o));var u=uh(this);for(l=l||[];this.pos<u;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==Nr.Bytes)return l.push(this.readSVarint());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Nr.Bytes)return l.push(this.readBoolean());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Nr.Bytes)return l.push(this.readFloat());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Nr.Bytes)return l.push(this.readDouble());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Nr.Bytes)return l.push(this.readFixed32());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Nr.Bytes)return l.push(this.readSFixed32());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Nr.Bytes)return l.push(this.readFixed64());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Nr.Bytes)return l.push(this.readSFixed64());var o=uh(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===Nr.Varint)for(;this.buf[this.pos++]>127;);else if(o===Nr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Nr.Fixed32)this.pos+=4;else{if(o!==Nr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Tm(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Tm(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Tm(this.buf,-1&l,this.pos),Tm(this.buf,Math.floor(l*lP),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Tm(this.buf,-1&l,this.pos),Tm(this.buf,Math.floor(l*lP),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,u){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(x,C,A){A.buf[A.pos++]=127&x|128,x>>>=7,A.buf[A.pos++]=127&x|128,x>>>=7,A.buf[A.pos++]=127&x|128,x>>>=7,A.buf[A.pos++]=127&x|128,A.buf[A.pos]=127&(x>>>=7)}(f,0,u),function(x,C){var A=(7&x)<<4;C.buf[C.pos++]|=A|((x>>>=3)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x)))))}(g,u)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(f,g,x){for(var C,A,B=0;B<g.length;B++){if((C=g.charCodeAt(B))>55295&&C<57344){if(!A){C>56319||B+1===g.length?(f[x++]=239,f[x++]=191,f[x++]=189):A=C;continue}if(C<56320){f[x++]=239,f[x++]=191,f[x++]=189,A=C;continue}C=A-55296<<10|C-56320|65536,A=null}else A&&(f[x++]=239,f[x++]=191,f[x++]=189,A=null);C<128?f[x++]=C:(C<2048?f[x++]=C>>6|192:(C<65536?f[x++]=C>>12|224:(f[x++]=C>>18|240,f[x++]=C>>12&63|128),f[x++]=C>>6&63|128),f[x++]=63&C|128)}return x}(this.buf,l,this.pos);var u=this.pos-o;u>=128&&cP(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(l){this.realloc(4),aP(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),aP(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=l[u]},writeRawMessage:function(l,o){this.pos++;var u=this.pos;l(o,this);var f=this.pos-u;f>=128&&cP(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeMessage:function(l,o,u){this.writeTag(l,Nr.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,Az,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,Mz,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,Dz,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,Oz,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,Lz,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,Rz,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,Bz,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,Fz,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,$z,o)},writeBytesField:function(l,o){this.writeTag(l,Nr.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,Nr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,Nr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,Nr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,Nr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,Nr.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,Nr.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,Nr.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,Nr.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,Nr.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,!!o)}};class Bw{constructor(o,{pixelRatio:u,version:f,stretchX:g,stretchY:x,content:C}){this.paddedRect=o,this.pixelRatio=u,this.stretchX=g,this.stretchY=x,this.content=C,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class hP{constructor(o,u){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(o,f,x),this.addImages(u,g,x);const{w:C,h:A}=Rw(x),B=new du({width:C||1,height:A||1});for(const $ in o){const Y=o[$],J=f[$].paddedRect;du.copy(Y.data,B,{x:0,y:0},{x:J.x+1,y:J.y+1},Y.data)}for(const $ in u){const Y=u[$],J=g[$].paddedRect,se=J.x+1,he=J.y+1,me=Y.data.width,xe=Y.data.height;du.copy(Y.data,B,{x:0,y:0},{x:se,y:he},Y.data),du.copy(Y.data,B,{x:0,y:xe-1},{x:se,y:he-1},{width:me,height:1}),du.copy(Y.data,B,{x:0,y:0},{x:se,y:he+xe},{width:me,height:1}),du.copy(Y.data,B,{x:me-1,y:0},{x:se-1,y:he},{width:1,height:xe}),du.copy(Y.data,B,{x:0,y:0},{x:se+me,y:he},{width:1,height:xe})}this.image=B,this.iconPositions=f,this.patternPositions=g}addImages(o,u,f){for(const g in o){const x=o[g],C={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(C),u[g]=new Bw(C,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(f=>o.hasImage(f)),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),u)}patchUpdatedImage(o,u,f){if(!o||!u||o.version===u.version)return;o.version=u.version;const[g,x]=o.tl;f.update(u.data,void 0,{x:g,y:x})}}wi(Bw,"ImagePosition"),wi(hP,"ImageAtlas");const Vu={horizontal:1,vertical:2,horizontalOnly:3};class F_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,u){const f=new F_;return f.scale=o||1,f.fontStack=u,f}static forImage(o){const u=new F_;return u.imageName=o,u}}class Sm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const f=new Sm;for(let g=0;g<o.sections.length;g++){const x=o.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,u)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=function(u,f){let g="";for(let x=0;x<u.length;x++){const C=u.charCodeAt(x+1)||null,A=u.charCodeAt(x-1)||null;g+=!f&&(C&&Q(C)&&!R_[u[x+1]]||A&&Q(A)&&!R_[u[x-1]])||!R_[u[x]]?u[x]:R_[u[x]]}return g}(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&k0[this.text.charCodeAt(f)];f++)o++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&k0[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const f=new Sm;return f.text=this.text.substring(o,u),f.sectionIndex=this.sectionIndex.slice(o,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(F_.forText(o.scale,o.fontStack||u));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const u=o.image?o.image.name:"";if(u.length===0)return void Ve("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(F_.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fw(l,o,u,f,g,x,C,A,B,$,Y,J,se,he,me){const xe=Sm.fromFeature(l,g);J===Vu.vertical&&xe.verticalizePunctuation(se);let Le=[];const Ze=function(at,$t,Lt,Kt,mi,Ut){if(!at)return[];const ii=[],ri=function(Di,un,$i,Ki,Ri,cn){let Hn=0;for(let zn=0;zn<Di.length();zn++){const $n=Di.getSection(zn);Hn+=fP(Di.getCharCode(zn),$n,Ki,Ri,un,cn)}return Hn/Math.max(1,Math.ceil(Hn/$i))}(at,$t,Lt,Kt,mi,Ut),di=at.text.indexOf("​")>=0;let vi=0;for(let Di=0;Di<at.length();Di++){const un=at.getSection(Di),$i=at.getCharCode(Di);if(k0[$i]||(vi+=fP($i,un,Kt,mi,$t,Ut)),Di<at.length()-1){const Ki=!((Ht=$i)<11904||!(qy(Ht)||lm(Ht)||y(Ht)||t0(Ht)||Xy(Ht)||om(Ht)||Zy(Ht)||Kf(Ht)||Ky(Ht)||f_(Ht)||Yy(Ht)||T(Ht)||am(Ht)||d_(Ht)||c_(Ht)||h_(Ht)||Xh(Ht)||Qf(Ht)||Jy(Ht)||Qy(Ht)));(Uz[$i]||Ki||un.imageName)&&ii.push(mP(Di+1,vi,ri,ii,jz($i,at.getCharCode(Di+1),Ki&&di),!1))}}var Ht;return gP(mP(at.length(),vi,ri,ii,0,!0))}(xe,$,x,o,f,he),{processBidirectionalText:st,processStyledBidirectionalText:qe}=xt;if(st&&xe.sections.length===1){const at=st(xe.toString(),Ze);for(const $t of at){const Lt=new Sm;Lt.text=$t,Lt.sections=xe.sections;for(let Kt=0;Kt<$t.length;Kt++)Lt.sectionIndex.push(0);Le.push(Lt)}}else if(qe){const at=qe(xe.text,xe.sectionIndex,Ze);for(const $t of at){const Lt=new Sm;Lt.text=$t[0],Lt.sectionIndex=$t[1],Lt.sections=xe.sections,Le.push(Lt)}}else Le=function(at,$t){const Lt=[],Kt=at.text;let mi=0;for(const Ut of $t)Lt.push(at.substring(mi,Ut)),mi=Ut;return mi<Kt.length&&Lt.push(at.substring(mi,Kt.length)),Lt}(xe,Ze);const rt=[],ht={positionedLines:rt,text:xe.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:J,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(at,$t,Lt,Kt,mi,Ut,ii,ri,di,vi,Ht,Di){let un=0,$i=0,Ki=0;const Ri=ri==="right"?1:ri==="left"?0:.5;let cn=!1;for(const wn of mi){const Gn=wn.getSections();for(const kr of Gn){if(kr.imageName)continue;const Wr=$t[kr.fontStack];if(Wr&&(cn=Wr.ascender!==void 0&&Wr.descender!==void 0,!cn))break}if(!cn)break}let Hn=0;for(const wn of mi){wn.trim();const Gn=wn.getMaxScale(),kr=(Gn-1)*ha,Wr={positionedGlyphs:[],lineOffset:0};at.positionedLines[Hn]=Wr;const zr=Wr.positionedGlyphs;let qr=0;if(!wn.length()){$i+=Ut,++Hn;continue}let Qr=0,Es=0;for(let Sr=0;Sr<wn.length();Sr++){const ro=wn.getSection(Sr),qs=wn.getSectionIndex(Sr),ar=wn.getCharCode(Sr);let ds=ro.scale,So=null,Er=null,Ds=null,Ma=ha,Go=0;const Wo=!(di===Vu.horizontal||!Ht&&!W(ar)||Ht&&(k0[ar]||(zn=ar,Pl(zn)||lu(zn)||Xf(zn)||um(zn)||m(zn))));if(ro.imageName){const rl=Kt[ro.imageName];if(!rl)continue;Ds=ro.imageName,at.iconsInText=at.iconsInText||!0,Er=rl.paddedRect;const qo=rl.displaySize;ds=ds*ha/Di,So={width:qo[0],height:qo[1],left:1,top:-3,advance:Wo?qo[1]:qo[0],localGlyph:!1},Go=cn?-So.height*ds:Gn*ha-17-qo[1]*ds,Ma=So.advance;const dh=(Wo?qo[0]:qo[1])*ds-ha*Gn;dh>0&&dh>qr&&(qr=dh)}else{const rl=Lt[ro.fontStack];if(!rl)continue;rl[ar]&&(Er=rl[ar]);const qo=$t[ro.fontStack];if(!qo)continue;const dh=qo.glyphs[ar];if(!dh)continue;if(So=dh.metrics,Ma=ar!==8203?ha:0,cn){const Pm=qo.ascender!==void 0?Math.abs(qo.ascender):0,G_=qo.descender!==void 0?Math.abs(qo.descender):0,W_=(Pm+G_)*ds;Qr<W_&&(Qr=W_,Es=(Pm-G_)/2*ds),Go=-Pm*ds}else Go=(Gn-ds)*ha-17}Wo?(at.verticalizable=!0,zr.push({glyph:ar,imageName:Ds,x:un,y:$i+Go,vertical:Wo,scale:ds,localGlyph:So.localGlyph,fontStack:ro.fontStack,sectionIndex:qs,metrics:So,rect:Er}),un+=Ma*ds+vi):(zr.push({glyph:ar,imageName:Ds,x:un,y:$i+Go,vertical:Wo,scale:ds,localGlyph:So.localGlyph,fontStack:ro.fontStack,sectionIndex:qs,metrics:So,rect:Er}),un+=So.advance*ds+vi)}zr.length!==0&&(Ki=Math.max(un-vi,Ki),cn?_P(zr,Ri,qr,Es,Ut*Gn/2):_P(zr,Ri,qr,0,Ut/2)),un=0;const Ho=Ut*Gn+qr;Wr.lineOffset=Math.max(qr,kr),$i+=Ho,++Hn}var zn;const $n=$i,{horizontalAlign:pn,verticalAlign:Tr}=$w(ii);(function(wn,Gn,kr,Wr,zr,qr){const Qr=(Gn-kr)*zr,Es=-qr*Wr;for(const Ho of wn)for(const Sr of Ho.positionedGlyphs)Sr.x+=Qr,Sr.y+=Es})(at.positionedLines,Ri,pn,Tr,Ki,$n),at.top+=-Tr*$n,at.bottom=at.top+$n,at.left+=-pn*Ki,at.right=at.left+Ki,at.hasBaseline=cn}(ht,o,u,f,Le,C,A,B,J,$,se,me),!function(at){for(const $t of at)if($t.positionedGlyphs.length!==0)return!1;return!0}(rt)&&ht}const k0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fP(l,o,u,f,g,x){if(o.imageName){const C=f[o.imageName];return C?C.displaySize[0]*o.scale*ha/x+g:0}{const C=u[o.fontStack],A=C&&C.glyphs[l];return A?A.metrics.advance*o.scale+g:0}}function pP(l,o,u,f){const g=Math.pow(l-o,2);return f?l<o?g/2:2*g:g+Math.abs(u)*u}function jz(l,o,u){let f=0;return l===10&&(f-=1e4),u&&(f+=150),l!==40&&l!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function mP(l,o,u,f,g,x){let C=null,A=pP(o,u,g,x);for(const B of f){const $=pP(o-B.x,u,g,x)+B.badness;$<=A&&(C=B,A=$)}return{index:l,x:o,priorBreak:C,badness:A}}function gP(l){return l?gP(l.priorBreak).concat(l.index):[]}function $w(l){let o=.5,u=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function _P(l,o,u,f,g){if(!(o||u||f||g))return;const x=l.length-1,C=l[x],A=(C.x+C.metrics.advance*C.scale)*o;for(let B=0;B<=x;B++)l[B].x-=A,l[B].y+=u+f+g}function Hz(l,o,u){const{horizontalAlign:f,verticalAlign:g}=$w(u),x=o[0]-l.displaySize[0]*f,C=o[1]-l.displaySize[1]*g;return{image:l,top:C,bottom:C+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function vP(l,o,u,f,g,x){const C=l.image;let A;if(C.content){const Le=C.content,Ze=C.pixelRatio||1;A=[Le[0]/Ze,Le[1]/Ze,C.displaySize[0]-Le[2]/Ze,C.displaySize[1]-Le[3]/Ze]}const B=o.left*x,$=o.right*x;let Y,J,se,he;u==="width"||u==="both"?(he=g[0]+B-f[3],J=g[0]+$+f[1]):(he=g[0]+(B+$-C.displaySize[0])/2,J=he+C.displaySize[0]);const me=o.top*x,xe=o.bottom*x;return u==="height"||u==="both"?(Y=g[1]+me-f[0],se=g[1]+xe+f[2]):(Y=g[1]+(me+xe-C.displaySize[1])/2,se=Y+C.displaySize[1]),{image:C,top:Y,right:J,bottom:se,left:he,collisionPadding:A}}class ch extends ie{constructor(o,u,f,g,x){super(o,u),this.angle=g,this.z=f,x!==void 0&&(this.segment=x)}clone(){return new ch(this.x,this.y,this.z,this.angle,this.segment)}}function yP(l,o,u,f,g){if(o.segment===void 0)return!0;let x=o,C=o.segment+1,A=0;for(;A>-u/2;){if(C--,C<0)return!1;A-=l[C].dist(x),x=l[C]}A+=l[C].dist(l[C+1]),C++;const B=[];let $=0;for(;A<u/2;){const Y=l[C],J=l[C+1];if(!J)return!1;let se=l[C-1].angleTo(Y)-Y.angleTo(J);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:A,angleDelta:se}),$+=se;A-B[0].distance>f;)$-=B.shift().angleDelta;if($>g)return!1;C++,A+=Y.dist(J)}return!0}function bP(l){let o=0;for(let u=0;u<l.length-1;u++)o+=l[u].dist(l[u+1]);return o}function xP(l,o,u){return l?.6*o*u:0}function wP(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function Gz(l,o,u,f,g,x){const C=xP(u,g,x),A=wP(u,f)*x;let B=0;const $=bP(l)/2;for(let Y=0;Y<l.length-1;Y++){const J=l[Y],se=l[Y+1],he=J.dist(se);if(B+he>$){const me=($-B)/he,xe=kn(J.x,se.x,me),Le=kn(J.y,se.y,me),Ze=new ch(xe,Le,0,se.angleTo(J),Y);return!C||yP(l,Ze,A,C,o)?Ze:void 0}B+=he}}function Wz(l,o,u,f,g,x,C,A,B){const $=xP(f,x,C),Y=wP(f,g),J=Y*C,se=l[0].x===0||l[0].x===B||l[0].y===0||l[0].y===B;return o-J<o/4&&(o=J+o/4),TP(l,se?o/2*A%o:(Y/2+2*x)*C*A%o,o,$,u,J,se,!1,B)}function TP(l,o,u,f,g,x,C,A,B){const $=x/2,Y=bP(l);let J=0,se=o-u,he=[];for(let me=0;me<l.length-1;me++){const xe=l[me],Le=l[me+1],Ze=xe.dist(Le),st=Le.angleTo(xe);for(;se+u<J+Ze;){se+=u;const qe=(se-J)/Ze,rt=kn(xe.x,Le.x,qe),ht=kn(xe.y,Le.y,qe);if(rt>=0&&rt<B&&ht>=0&&ht<B&&se-$>=0&&se+$<=Y){const at=new ch(rt,ht,0,st,me);at._round(),f&&!yP(l,at,x,f,g)||he.push(at)}}J+=Ze}return A||he.length||C||(he=TP(l,J/2,u,f,g,x,C,!0,B)),he}function SP(l,o,u,f,g){const x=[];for(let C=0;C<l.length;C++){const A=l[C];let B;for(let $=0;$<A.length-1;$++){let Y=A[$],J=A[$+1];Y.x<o&&J.x<o||(Y.x<o?Y=new ie(o,Y.y+(o-Y.x)/(J.x-Y.x)*(J.y-Y.y))._round():J.x<o&&(J=new ie(o,Y.y+(o-Y.x)/(J.x-Y.x)*(J.y-Y.y))._round()),Y.y<u&&J.y<u||(Y.y<u?Y=new ie(Y.x+(u-Y.y)/(J.y-Y.y)*(J.x-Y.x),u)._round():J.y<u&&(J=new ie(Y.x+(u-Y.y)/(J.y-Y.y)*(J.x-Y.x),u)._round()),Y.x>=f&&J.x>=f||(Y.x>=f?Y=new ie(f,Y.y+(f-Y.x)/(J.x-Y.x)*(J.y-Y.y))._round():J.x>=f&&(J=new ie(f,Y.y+(f-Y.x)/(J.x-Y.x)*(J.y-Y.y))._round()),Y.y>=g&&J.y>=g||(Y.y>=g?Y=new ie(Y.x+(g-Y.y)/(J.y-Y.y)*(J.x-Y.x),g)._round():J.y>=g&&(J=new ie(Y.x+(g-Y.y)/(J.y-Y.y)*(J.x-Y.x),g)._round()),B&&Y.equals(B[B.length-1])||(B=[Y],x.push(B)),B.push(J)))))}}return x}wi(ch,"Anchor");const $_=1e20;function CP(l,o,u,f,g,x,C,A,B){for(let $=o;$<o+f;$++)kP(l,u*x+$,x,g,C,A,B);for(let $=u;$<u+g;$++)kP(l,$*x+o,1,f,C,A,B)}function kP(l,o,u,f,g,x,C){x[0]=0,C[0]=-$_,C[1]=$_,g[0]=l[o];for(let A=1,B=0,$=0;A<f;A++){g[A]=l[o+A*u];const Y=A*A;do{const J=x[B];$=(g[A]-g[J]+Y-J*J)/(A-J)/2}while($<=C[B]&&--B>-1);B++,x[B]=A,C[B]=$,C[B+1]=$_}for(let A=0,B=0;A<f;A++){for(;C[B+1]<A;)B++;const $=x[B],Y=A-$;l[o+A*u]=g[$]+Y*Y}}const Nw={none:0,ideographs:1,all:2};class Cm{constructor(o,u,f){this.requestManager=o,this.localGlyphMode=u,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,u){const f=[];for(const g in o)for(const x of o[g])f.push({stack:g,id:x});nt(f,({stack:g,id:x},C)=>{let A=this.entries[g];A||(A=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let B=A.glyphs[x];if(B!==void 0)return void C(null,{stack:g,id:x,glyph:B});if(B=this._tinySDF(A,g,x),B)return A.glyphs[x]=B,void C(null,{stack:g,id:x,glyph:B});const $=Math.floor(x/256);if(256*$>65535)return void C(new Error("glyphs > 65535 not supported"));if(A.ranges[$])return void C(null,{stack:g,id:x,glyph:B});let Y=A.requests[$];Y||(Y=A.requests[$]=[],Cm.loadGlyphRange(g,$,this.url,this.requestManager,(J,se)=>{if(se){A.ascender=se.ascender,A.descender=se.descender;for(const he in se.glyphs)this._doesCharSupportLocalGlyph(+he)||(A.glyphs[+he]=se.glyphs[+he]);A.ranges[$]=!0}for(const he of Y)he(J,se);delete A.requests[$]})),Y.push((J,se)=>{J?C(J):se&&C(null,{stack:g,id:x,glyph:se.glyphs[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const C={};for(const{stack:A,id:B,glyph:$}of x)C[A]===void 0&&(C[A]={}),C[A].glyphs===void 0&&(C[A].glyphs={}),C[A].glyphs[B]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics},C[A].ascender=this.entries[A].ascender,C[A].descender=this.entries[A].descender;u(null,C)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==Nw.none&&(this.localGlyphMode===Nw.all?!!this.localFontFamily:!!this.localFontFamily&&(f_(o)||e0(o)||am(o)||Xh(o)||Kf(o)))}_tinySDF(o,u,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=o.tinySDF;if(!x){let xe="400";/bold/i.test(u)?xe="900":/medium/i.test(u)?xe="500":/light/i.test(u)&&(xe="200"),x=o.tinySDF=new Cm.TinySDF({fontFamily:g,fontWeight:xe,fontSize:48,buffer:6,radius:16}),x.fontWeight=xe}if(this.localGlyphs[x.fontWeight][f])return this.localGlyphs[x.fontWeight][f];const C=String.fromCharCode(f),{data:A,width:B,height:$,glyphWidth:Y,glyphHeight:J,glyphLeft:se,glyphTop:he,glyphAdvance:me}=x.draw(C);return this.localGlyphs[x.fontWeight][f]={id:f,bitmap:new lh({width:B,height:$},A),metrics:{width:Y/2,height:J/2,left:se/2,top:he/2-27,advance:me/2,localGlyph:!0}}}}function EP(l,o,u,f){const g=[],x=l.image,C=x.pixelRatio,A=x.paddedRect.w-2,B=x.paddedRect.h-2,$=l.right-l.left,Y=l.bottom-l.top,J=x.stretchX||[[0,A]],se=x.stretchY||[[0,B]],he=(Ut,ii)=>Ut+ii[1]-ii[0],me=J.reduce(he,0),xe=se.reduce(he,0),Le=A-me,Ze=B-xe;let st=0,qe=me,rt=0,ht=xe,at=0,$t=Le,Lt=0,Kt=Ze;if(x.content&&f){const Ut=x.content;st=E0(J,0,Ut[0]),rt=E0(se,0,Ut[1]),qe=E0(J,Ut[0],Ut[2]),ht=E0(se,Ut[1],Ut[3]),at=Ut[0]-st,Lt=Ut[1]-rt,$t=Ut[2]-Ut[0]-qe,Kt=Ut[3]-Ut[1]-ht}const mi=(Ut,ii,ri,di)=>{const vi=I0(Ut.stretch-st,qe,$,l.left),Ht=P0(Ut.fixed-at,$t,Ut.stretch,me),Di=I0(ii.stretch-rt,ht,Y,l.top),un=P0(ii.fixed-Lt,Kt,ii.stretch,xe),$i=I0(ri.stretch-st,qe,$,l.left),Ki=P0(ri.fixed-at,$t,ri.stretch,me),Ri=I0(di.stretch-rt,ht,Y,l.top),cn=P0(di.fixed-Lt,Kt,di.stretch,xe),Hn=new ie(vi,Di),zn=new ie($i,Di),$n=new ie($i,Ri),pn=new ie(vi,Ri),Tr=new ie(Ht/C,un/C),wn=new ie(Ki/C,cn/C),Gn=o*Math.PI/180;if(Gn){const zr=Math.sin(Gn),qr=Math.cos(Gn),Qr=[qr,-zr,zr,qr];Hn._matMult(Qr),zn._matMult(Qr),pn._matMult(Qr),$n._matMult(Qr)}const kr=Ut.stretch+Ut.fixed,Wr=ii.stretch+ii.fixed;return{tl:Hn,tr:zn,bl:pn,br:$n,tex:{x:x.paddedRect.x+1+kr,y:x.paddedRect.y+1+Wr,w:ri.stretch+ri.fixed-kr,h:di.stretch+di.fixed-Wr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Tr,pixelOffsetBR:wn,minFontScaleX:$t/C/$,minFontScaleY:Kt/C/Y,isSDF:u}};if(f&&(x.stretchX||x.stretchY)){const Ut=IP(J,Le,me),ii=IP(se,Ze,xe);for(let ri=0;ri<Ut.length-1;ri++){const di=Ut[ri],vi=Ut[ri+1];for(let Ht=0;Ht<ii.length-1;Ht++)g.push(mi(di,ii[Ht],vi,ii[Ht+1]))}}else g.push(mi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:B+1}));return g}function E0(l,o,u){let f=0;for(const g of l)f+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return f}function IP(l,o,u){const f=[{fixed:-1,stretch:0}];for(const[g,x]of l){const C=f[f.length-1];f.push({fixed:g-C.stretch,stretch:C.stretch}),f.push({fixed:g-C.stretch,stretch:C.stretch+(x-g)})}return f.push({fixed:o+1,stretch:u}),f}function I0(l,o,u,f){return l/o*u+f}function P0(l,o,u,f){return l-o*u/f}function qz(l,o,u,f){const g=o+l.positionedLines[f].lineOffset;return f===0?u+g/2:u+(g+(o+l.positionedLines[f-1].lineOffset))/2}Cm.loadGlyphRange=function(l,o,u,f,g){const x=256*o,C=x+255,A=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",`${x}-${C}`),sn.Glyphs);yr(A,(B,$)=>{if(B)g(B);else if($){const Y={},J=function(se){return new B_(se).readFields(Nz,{})}($);for(const se of J.glyphs)Y[se.id]=se;g(null,{glyphs:Y,ascender:J.ascender,descender:J.descender})}})},Cm.TinySDF=class{constructor({fontSize:l=24,buffer:o=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:C="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=u;const A=this.size=l+4*o,B=this._createCanvas(A),$=this.ctx=B.getContext("2d",{willReadFrequently:!0});$.font=`${C} ${x} ${l}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(l){const o=document.createElement("canvas");return o.width=o.height=l,o}draw(l){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(l),C=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),B=Math.min(this.size-this.buffer,C+Math.ceil(f)),$=A+2*this.buffer,Y=B+2*this.buffer,J=Math.max($*Y,0),se=new Uint8ClampedArray(J),he={data:se,width:$,height:Y,glyphWidth:A,glyphHeight:B,glyphTop:C,glyphLeft:0,glyphAdvance:o};if(A===0||B===0)return he;const{ctx:me,buffer:xe,gridInner:Le,gridOuter:Ze}=this;me.clearRect(xe,xe,A,B),me.fillText(l,xe,xe+C);const st=me.getImageData(xe,xe,A,B);Ze.fill($_,0,J),Le.fill(0,0,J);for(let qe=0;qe<B;qe++)for(let rt=0;rt<A;rt++){const ht=st.data[4*(qe*A+rt)+3]/255;if(ht===0)continue;const at=(qe+xe)*$+rt+xe;if(ht===1)Ze[at]=0,Le[at]=$_;else{const $t=.5-ht;Ze[at]=$t>0?$t*$t:0,Le[at]=$t<0?$t*$t:0}}CP(Ze,0,0,$,Y,$,this.f,this.v,this.z),CP(Le,xe,xe,A,B,$,this.f,this.v,this.z);for(let qe=0;qe<J;qe++){const rt=Math.sqrt(Ze[qe])-Math.sqrt(Le[qe]);se[qe]=Math.round(255-255*(rt/this.radius+this.cutoff))}return he}};class Zz{constructor(o=[],u=Yz){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:f}=this,g=u[o];for(;o>0;){const x=o-1>>1,C=u[x];if(f(g,C)>=0)break;u[o]=C,o=x}u[o]=g}_down(o){const{data:u,compare:f}=this,g=this.length>>1,x=u[o];for(;o<g;){let C=1+(o<<1),A=u[C];const B=C+1;if(B<this.length&&f(u[B],A)<0&&(C=B,A=u[B]),f(A,x)>=0)break;u[o]=A,o=C}u[o]=x}}function Yz(l,o){return l<o?-1:l>o?1:0}function Xz(l,o=1,u=!1){let f=1/0,g=1/0,x=-1/0,C=-1/0;const A=l[0];for(let he=0;he<A.length;he++){const me=A[he];(!he||me.x<f)&&(f=me.x),(!he||me.y<g)&&(g=me.y),(!he||me.x>x)&&(x=me.x),(!he||me.y>C)&&(C=me.y)}const B=Math.min(x-f,C-g);let $=B/2;const Y=new Zz([],Kz);if(B===0)return new ie(f,g);for(let he=f;he<x;he+=B)for(let me=g;me<C;me+=B)Y.push(new km(he+$,me+$,$,l));let J=function(he){let me=0,xe=0,Le=0;const Ze=he[0];for(let st=0,qe=Ze.length,rt=qe-1;st<qe;rt=st++){const ht=Ze[st],at=Ze[rt],$t=ht.x*at.y-at.x*ht.y;xe+=(ht.x+at.x)*$t,Le+=(ht.y+at.y)*$t,me+=3*$t}return new km(xe/me,Le/me,0,he)}(l),se=Y.length;for(;Y.length;){const he=Y.pop();(he.d>J.d||!J.d)&&(J=he,u&&console.log("found best %d after %d probes",Math.round(1e4*he.d)/1e4,se)),he.max-J.d<=o||($=he.h/2,Y.push(new km(he.p.x-$,he.p.y-$,$,l)),Y.push(new km(he.p.x+$,he.p.y-$,$,l)),Y.push(new km(he.p.x-$,he.p.y+$,$,l)),Y.push(new km(he.p.x+$,he.p.y+$,$,l)),se+=4)}return u&&(console.log(`num probes: ${se}`),console.log(`best distance: ${J.d}`)),J.p}function Kz(l,o){return o.max-l.max}class km{constructor(o,u,f,g){this.p=new ie(o,u),this.h=f,this.d=function(x,C){let A=!1,B=1/0;for(let $=0;$<C.length;$++){const Y=C[$];for(let J=0,se=Y.length,he=se-1;J<se;he=J++){const me=Y[J],xe=Y[he];me.y>x.y!=xe.y>x.y&&x.x<(xe.x-me.x)*(x.y-me.y)/(xe.y-me.y)+me.x&&(A=!A),B=Math.min(B,kI(x,me,xe))}}return(A?1:-1)*Math.sqrt(B)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const zw=Number.POSITIVE_INFINITY,Qz=Math.sqrt(2);function PP(l,[o,u]){let f=0,g=0;if(u===zw){o<0&&(o=0);const x=o/Qz;switch(l){case"top-right":case"top-left":g=x-7;break;case"bottom-right":case"bottom-left":g=7-x;break;case"bottom":g=7-o;break;case"top":g=o-7}switch(l){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),u=Math.abs(u),l){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(l){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function Jz(l,o,u,f,g,x,C,A,B,$){l.createArrays(),l.tilePixelRatio=mn/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const Y=l.layers[0].layout,J=l.layers[0]._unevaluatedLayout._values,se={};if(l.textSizeData.kind==="composite"){const{minZoom:xe,maxZoom:Le}=l.textSizeData;se.compositeTextSizes=[J["text-size"].possiblyEvaluate(new It(xe),A),J["text-size"].possiblyEvaluate(new It(Le),A)]}if(l.iconSizeData.kind==="composite"){const{minZoom:xe,maxZoom:Le}=l.iconSizeData;se.compositeIconSizes=[J["icon-size"].possiblyEvaluate(new It(xe),A),J["icon-size"].possiblyEvaluate(new It(Le),A)]}se.layoutTextSize=J["text-size"].possiblyEvaluate(new It(B+1),A),se.layoutIconSize=J["icon-size"].possiblyEvaluate(new It(B+1),A),se.textMaxSize=J["text-size"].possiblyEvaluate(new It(18),A);const he=Y.get("text-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",me=Y.get("text-size");for(const xe of l.features){const Le=Y.get("text-font").evaluate(xe,{},A).join(","),Ze=me.evaluate(xe,{},A),st=se.layoutTextSize.evaluate(xe,{},A),qe=(se.layoutIconSize.evaluate(xe,{},A),{horizontal:{},vertical:void 0}),rt=xe.text;let ht,at=[0,0];if(rt){const Kt=rt.toString(),mi=Y.get("text-letter-spacing").evaluate(xe,{},A)*ha,Ut=Y.get("text-line-height").evaluate(xe,{},A)*ha,ii=M(Kt)?mi:0,ri=Y.get("text-anchor").evaluate(xe,{},A),di=Y.get("text-variable-anchor");if(!di){const $i=Y.get("text-radial-offset").evaluate(xe,{},A);at=$i?PP(ri,[$i*ha,zw]):Y.get("text-offset").evaluate(xe,{},A).map(Ki=>Ki*ha)}let vi=he?"center":Y.get("text-justify").evaluate(xe,{},A);const Ht=Y.get("symbol-placement")==="point",Di=Ht?Y.get("text-max-width").evaluate(xe,{},A)*ha:1/0,un=$i=>{l.allowVerticalPlacement&&k(Kt)&&(qe.vertical=Fw(rt,o,u,g,Le,Di,Ut,ri,$i,ii,at,Vu.vertical,!0,st,Ze))};if(!he&&di){const $i=vi==="auto"?di.map(Ri=>Vw(Ri)):[vi];let Ki=!1;for(let Ri=0;Ri<$i.length;Ri++){const cn=$i[Ri];if(!qe.horizontal[cn])if(Ki)qe.horizontal[cn]=qe.horizontal[0];else{const Hn=Fw(rt,o,u,g,Le,Di,Ut,"center",cn,ii,at,Vu.horizontal,!1,st,Ze);Hn&&(qe.horizontal[cn]=Hn,Ki=Hn.positionedLines.length===1)}}un("left")}else{if(vi==="auto"&&(vi=Vw(ri)),Ht||Y.get("text-writing-mode").indexOf("horizontal")>=0||!k(Kt)){const $i=Fw(rt,o,u,g,Le,Di,Ut,ri,vi,ii,at,Vu.horizontal,!1,st,Ze);$i&&(qe.horizontal[vi]=$i)}un(Ht?"left":vi)}}let $t=!1;if(xe.icon&&xe.icon.name){const Kt=f[xe.icon.name];Kt&&(ht=Hz(g[xe.icon.name],Y.get("icon-offset").evaluate(xe,{},A),Y.get("icon-anchor").evaluate(xe,{},A)),$t=Kt.sdf,l.sdfIcons===void 0?l.sdfIcons=Kt.sdf:l.sdfIcons!==Kt.sdf&&Ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kt.pixelRatio!==l.pixelRatio||Y.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}const Lt=MP(qe.horizontal)||qe.vertical;l.iconsInText||(l.iconsInText=!!Lt&&Lt.iconsInText),(Lt||ht)&&e9(l,xe,qe,ht,f,se,st,0,at,$t,C,A,$)}x&&l.generateCollisionDebugBuffers(B,l.collisionBoxArray)}function Vw(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function e9(l,o,u,f,g,x,C,A,B,$,Y,J,se){let he=x.textMaxSize.evaluate(o,{},J);he===void 0&&(he=C);const me=l.layers[0].layout,xe=me.get("icon-offset").evaluate(o,{},J),Le=MP(u.horizontal)||u.vertical,Ze=se.name==="globe",st=C/24,qe=l.tilePixelRatio*he/24,rt=(ii=l.overscaling,l.zoom>18&&ii>2&&(ii>>=1),Math.max(mn/(512*ii),1)*me.get("symbol-spacing")),ht=me.get("text-padding")*l.tilePixelRatio,at=me.get("icon-padding")*l.tilePixelRatio,$t=fe(me.get("text-max-angle")),Lt=me.get("text-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point",Kt=me.get("icon-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point",mi=me.get("symbol-placement"),Ut=rt/2;var ii;const ri=me.get("icon-text-fit");let di;f&&ri!=="none"&&(l.allowVerticalPlacement&&u.vertical&&(di=vP(f,u.vertical,ri,me.get("icon-text-fit-padding"),xe,st)),Le&&(f=vP(f,Le,ri,me.get("icon-text-fit-padding"),xe,st)));const vi=(Ht,Di,un)=>{if(Di.x<0||Di.x>=mn||Di.y<0||Di.y>=mn)return;let $i=null;if(Ze){const{x:Ki,y:Ri,z:cn}=se.projectTilePoint(Di.x,Di.y,un);$i={anchor:new ch(Ki,Ri,cn,0,void 0),up:se.upVector(un,Di.x,Di.y)}}(function(Ki,Ri,cn,Hn,zn,$n,pn,Tr,wn,Gn,kr,Wr,zr,qr,Qr,Es,Ho,Sr,ro,qs,ar,ds,So,Er,Ds){const Ma=Ki.addToLineVertexArray(Ri,Hn);let Go,Wo,rl,qo,dh,Pm,G_,W_=0,oA=0,aA=0,lA=0,Jw=-1,eT=-1;const Pd={};let uA=Jf("");const dp=cn?cn.anchor:Ri;let tT=0,iT=0;if(wn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[tT,iT]=wn.layout.get("text-offset").evaluate(ar,{},Ds).map(hu=>hu*ha):(tT=wn.layout.get("text-radial-offset").evaluate(ar,{},Ds)*ha,iT=zw),Ki.allowVerticalPlacement&&zn.vertical){const hu=zn.vertical;if(Qr)Pm=Uw(hu),Tr&&(G_=Uw(Tr));else{const fu=wn.layout.get("text-rotate").evaluate(ar,{},Ds)+90;rl=A0(Gn,dp,Ri,kr,Wr,zr,hu,qr,fu,Es),Tr&&(qo=A0(Gn,dp,Ri,kr,Wr,zr,Tr,Sr,fu))}}if($n){const hu=wn.layout.get("icon-rotate").evaluate(ar,{},Ds),fu=wn.layout.get("icon-text-fit")!=="none",q_=EP($n,hu,So,fu),rT=Tr?EP(Tr,hu,So,fu):void 0;Wo=A0(Gn,dp,Ri,kr,Wr,zr,$n,Sr,hu),W_=4*q_.length;const cA=Ki.iconSizeData;let hp=null;cA.kind==="source"?(hp=[Cd*wn.layout.get("icon-size").evaluate(ar,{},Ds)],hp[0]>nf&&Ve(`${Ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):cA.kind==="composite"&&(hp=[Cd*ds.compositeIconSizes[0].evaluate(ar,{},Ds),Cd*ds.compositeIconSizes[1].evaluate(ar,{},Ds)],(hp[0]>nf||hp[1]>nf)&&Ve(`${Ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ki.addSymbols(Ki.icon,q_,hp,qs,ro,ar,!1,cn,Ri,Ma.lineStartIndex,Ma.lineLength,-1,Er,Ds),Jw=Ki.icon.placedSymbolArray.length-1,rT&&(oA=4*rT.length,Ki.addSymbols(Ki.icon,rT,hp,qs,ro,ar,Vu.vertical,cn,Ri,Ma.lineStartIndex,Ma.lineLength,-1,Er,Ds),eT=Ki.icon.placedSymbolArray.length-1)}for(const hu in zn.horizontal){const fu=zn.horizontal[hu];Go||(uA=Jf(fu.text),Qr?dh=Uw(fu):Go=A0(Gn,dp,Ri,kr,Wr,zr,fu,qr,wn.layout.get("text-rotate").evaluate(ar,{},Ds),Es));const q_=fu.positionedLines.length===1;if(aA+=AP(Ki,cn,Ri,fu,pn,wn,Qr,ar,Es,Ma,zn.vertical?Vu.horizontal:Vu.horizontalOnly,q_?Object.keys(zn.horizontal):[hu],Pd,Jw,ds,Er,Ds),q_)break}zn.vertical&&(lA+=AP(Ki,cn,Ri,zn.vertical,pn,wn,Qr,ar,Es,Ma,Vu.vertical,["vertical"],Pd,eT,ds,Er,Ds));let uf=-1;const nT=(hu,fu)=>hu?Math.max(hu,fu):fu;uf=nT(dh,uf),uf=nT(Pm,uf),uf=nT(G_,uf);const I9=uf>-1?1:0;Ki.glyphOffsetArray.length>=sf.MAX_GLYPHS&&Ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&Ki.addToSortKeyRanges(Ki.symbolInstances.length,ar.sortKey),Ki.symbolInstances.emplaceBack(dp.x,dp.y,dp.z,Ri.x,Ri.y,Pd.right>=0?Pd.right:-1,Pd.center>=0?Pd.center:-1,Pd.left>=0?Pd.left:-1,Pd.vertical>=0?Pd.vertical:-1,Jw,eT,uA,Go!==void 0?Go:Ki.collisionBoxArray.length,Go!==void 0?Go+1:Ki.collisionBoxArray.length,rl!==void 0?rl:Ki.collisionBoxArray.length,rl!==void 0?rl+1:Ki.collisionBoxArray.length,Wo!==void 0?Wo:Ki.collisionBoxArray.length,Wo!==void 0?Wo+1:Ki.collisionBoxArray.length,qo||Ki.collisionBoxArray.length,qo?qo+1:Ki.collisionBoxArray.length,kr,aA,lA,W_,oA,I9,0,tT,iT,uf)})(l,Di,$i,Ht,u,f,g,di,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,ht,Lt,B,0,at,Kt,xe,o,x,$,Y,J)};if(mi==="line")for(const Ht of SP(o.geometry,0,0,mn,mn)){const Di=Wz(Ht,rt,$t,u.vertical||Le,f,24,qe,l.overscaling,mn);for(const un of Di){const $i=Le;$i&&t9(l,$i.text,Ut,un)||vi(Ht,un,J)}}else if(mi==="line-center"){for(const Ht of o.geometry)if(Ht.length>1){const Di=Gz(Ht,$t,u.vertical||Le,f,24,qe);Di&&vi(Ht,Di,J)}}else if(o.type==="Polygon")for(const Ht of Pw(o.geometry,0)){const Di=Xz(Ht,16);vi(Ht[0],new ch(Di.x,Di.y,0,0,void 0),J)}else if(o.type==="LineString")for(const Ht of o.geometry)vi(Ht,new ch(Ht[0].x,Ht[0].y,0,0,void 0),J);else if(o.type==="Point")for(const Ht of o.geometry)for(const Di of Ht)vi([Di],new ch(Di.x,Di.y,0,0,void 0),J)}const nf=32640;function AP(l,o,u,f,g,x,C,A,B,$,Y,J,se,he,me,xe,Le){const Ze=function(rt,ht,at,$t,Lt,Kt,mi,Ut){const ii=[];if(ht.positionedLines.length===0)return ii;const ri=$t.layout.get("text-rotate").evaluate(Kt,{})*Math.PI/180,di=function($i){const Ki=$i[0],Ri=$i[1],cn=Ki*Ri;return cn>0?[Ki,-Ri]:cn<0?[-Ki,Ri]:Ki===0?[Ri,Ki]:[Ri,-Ki]}(at);let vi=Math.abs(ht.top-ht.bottom);for(const $i of ht.positionedLines)vi-=$i.lineOffset;const Ht=ht.positionedLines.length,Di=vi/Ht;let un=ht.top-at[1];for(let $i=0;$i<Ht;++$i){const Ki=ht.positionedLines[$i];un=qz(ht,Di,un,$i);for(const Ri of Ki.positionedGlyphs){if(!Ri.rect)continue;const cn=Ri.rect||{};let Hn=4,zn=!0,$n=1,pn=0;if(Ri.imageName){const Er=mi[Ri.imageName];if(!Er)continue;if(Er.sdf){Ve("SDF images are not supported in formatted text and will be ignored.");continue}zn=!1,$n=Er.pixelRatio,Hn=1/$n}const Tr=(Lt||Ut)&&Ri.vertical,wn=Ri.metrics.advance*Ri.scale/2,Gn=Ri.metrics,kr=Ri.rect;if(kr===null)continue;Ut&&ht.verticalizable&&(pn=Ri.imageName?wn-Ri.metrics.width*Ri.scale/2:0);const Wr=Lt?[Ri.x+wn,Ri.y]:[0,0];let zr=[0,0],qr=[0,0],Qr=!1;Lt||(Tr?(qr=[Ri.x+wn+di[0],Ri.y+di[1]-pn],Qr=!0):zr=[Ri.x+wn+at[0],Ri.y+at[1]-pn]);const Es=kr.w*Ri.scale/($n*(Ri.localGlyph?2:1)),Ho=kr.h*Ri.scale/($n*(Ri.localGlyph?2:1));let Sr,ro,qs,ar;if(Tr){const Er=Ri.y-un,Ds=new ie(-wn,wn-Er),Ma=-Math.PI/2,Go=new ie(...qr);Sr=new ie(-wn+zr[0],zr[1]),Sr._rotateAround(Ma,Ds)._add(Go),Sr.x+=-Er+wn,Sr.y-=(Gn.left-Hn)*Ri.scale;const Wo=Ri.imageName?Gn.advance*Ri.scale:ha*Ri.scale,rl=String.fromCharCode(Ri.glyph);Iz(rl)?Sr.x+=(1-Hn)*Ri.scale:Pz(rl)?Sr.x+=Wo-Gn.height*Ri.scale+(-Hn-1)*Ri.scale:Sr.x+=Ri.imageName||Gn.width+2*Hn===kr.w&&Gn.height+2*Hn===kr.h?(Wo-Ho)/2:(Wo-(Gn.height+2*Hn)*Ri.scale)/2,ro=new ie(Sr.x,Sr.y-Es),qs=new ie(Sr.x+Ho,Sr.y),ar=new ie(Sr.x+Ho,Sr.y-Es)}else{const Er=(Gn.left-Hn)*Ri.scale-wn+zr[0],Ds=(-Gn.top-Hn)*Ri.scale+zr[1],Ma=Er+Es,Go=Ds+Ho;Sr=new ie(Er,Ds),ro=new ie(Ma,Ds),qs=new ie(Er,Go),ar=new ie(Ma,Go)}if(ri){let Er;Er=Lt?new ie(0,0):Qr?new ie(di[0],di[1]):new ie(at[0],at[1]),Sr._rotateAround(ri,Er),ro._rotateAround(ri,Er),qs._rotateAround(ri,Er),ar._rotateAround(ri,Er)}const ds=new ie(0,0),So=new ie(0,0);ii.push({tl:Sr,tr:ro,bl:qs,br:ar,tex:cn,writingMode:ht.writingMode,glyphOffset:Wr,sectionIndex:Ri.sectionIndex,isSDF:zn,pixelOffsetTL:ds,pixelOffsetBR:So,minFontScaleX:0,minFontScaleY:0})}}return ii}(0,f,B,x,C,A,g,l.allowVerticalPlacement),st=l.textSizeData;let qe=null;st.kind==="source"?(qe=[Cd*x.layout.get("text-size").evaluate(A,{},Le)],qe[0]>nf&&Ve(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):st.kind==="composite"&&(qe=[Cd*me.compositeTextSizes[0].evaluate(A,{},Le),Cd*me.compositeTextSizes[1].evaluate(A,{},Le)],(qe[0]>nf||qe[1]>nf)&&Ve(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,Ze,qe,B,C,A,Y,o,u,$.lineStartIndex,$.lineLength,he,xe,Le);for(const rt of J)se[rt]=l.text.placedSymbolArray.length-1;return 4*Ze.length}function MP(l){for(const o in l)return l[o];return null}function A0(l,o,u,f,g,x,C,A,B,$){let Y=C.top,J=C.bottom,se=C.left,he=C.right;const me=C.collisionPadding;if(me&&(se-=me[0],Y-=me[1],he+=me[2],J+=me[3]),B){const xe=new ie(se,Y),Le=new ie(he,Y),Ze=new ie(se,J),st=new ie(he,J),qe=fe(B);let rt=new ie(0,0);$&&(rt=new ie($[0],$[1])),xe._rotateAround(qe,rt),Le._rotateAround(qe,rt),Ze._rotateAround(qe,rt),st._rotateAround(qe,rt),se=Math.min(xe.x,Le.x,Ze.x,st.x),he=Math.max(xe.x,Le.x,Ze.x,st.x),Y=Math.min(xe.y,Le.y,Ze.y,st.y),J=Math.max(xe.y,Le.y,Ze.y,st.y)}return l.emplaceBack(o.x,o.y,o.z,u.x,u.y,se,Y,he,J,A,f,g,x),l.length-1}function Uw(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const o=l.bottom-l.top;return o>0?Math.max(10,o):null}function t9(l,o,u,f){const g=l.compareText;if(o in g){const x=g[o];for(let C=x.length-1;C>=0;C--)if(f.dist(x[C])<u)return!0}else g[o]=[];return g[o].push(f),!1}function OP(l,o){const u=l.fovAboveCenter,f=l.elevation?l.elevation.getMinElevationBelowMSL()*o:0,g=(l._camera.position[2]*l.worldSize-f)/Math.cos(l._pitch),x=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-l._pitch-u,.01)),C=Math.sin(l._pitch)*x+g;return Math.min(1.01*C,g*(1/l._horizonShift))}function up(l,o){if(!o.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:o};const u=Math.pow(2,-l.z),f=l.x*u,g=(l.x+1)*u,x=l.y*u,C=(l.y+1)*u,A=zu(f),B=zu(g),$=ca(x),Y=ca(C),J=o.project(A,$),se=o.project(B,$),he=o.project(B,Y),me=o.project(A,Y);let xe=Math.min(J.x,se.x,he.x,me.x),Le=Math.min(J.y,se.y,he.y,me.y),Ze=Math.max(J.x,se.x,he.x,me.x),st=Math.max(J.y,se.y,he.y,me.y);const qe=u/16;function rt(at,$t,Lt,Kt,mi,Ut){const ii=(Lt+mi)/2,ri=(Kt+Ut)/2,di=o.project(zu(ii),ca(ri)),vi=Math.max(0,xe-di.x,Le-di.y,di.x-Ze,di.y-st);xe=Math.min(xe,di.x),Ze=Math.max(Ze,di.x),Le=Math.min(Le,di.y),st=Math.max(st,di.y),vi>qe&&(rt(at,di,Lt,Kt,ii,ri),rt(di,$t,ii,ri,mi,Ut))}rt(J,se,f,x,g,x),rt(se,he,g,x,g,C),rt(he,me,g,C,f,C),rt(me,J,f,C,f,x),xe-=qe,Le-=qe,Ze+=qe,st+=qe;const ht=1/Math.max(Ze-xe,st-Le);return{scale:ht,x:xe*ht,y:Le*ht,x2:Ze*ht,y2:st*ht,projection:o}}const i9=Gc(new Float32Array(16));class rf{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,u){return{x:0,y:0,z:0}}unproject(o,u){return new rr(0,0)}projectTilePoint(o,u,f){return{x:o,y:u,z:0}}locationPoint(o,u,f=!0){return o._coordinatePoint(o.locationCoordinate(u),f)}pixelsPerMeter(o,u){return qc(1,o)*u}pixelSpaceConversion(o,u,f){return 1}farthestPixelDistance(o){return OP(o,o.pixelsPerMeter)}pointCoordinate(o,u,f,g){const x=o.horizonLineFromTop(!1),C=new ie(u,Math.max(x,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(C,g))}pointCoordinate3D(o,u,f){const g=new ie(u,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const x=this.pointCoordinate(o,g.x,g.y,0);return[x.x,x.y,x.z]}}isPointAboveHorizon(o,u){if(o.elevation)return!this.pointCoordinate3D(o,u.x,u.y);const f=o.horizonLineFromTop();return u.y<f}createInversionMatrix(o,u){return i9}createTileMatrix(o,u,f){let g,x,C;const A=f.canonical,B=Gc(new Float64Array(16));if(this.isReprojectedInTileSpace){const $=up(A,this);g=1,x=$.x+f.wrap*$.scale,C=$.y,ip(B,B,[g/$.scale,g/$.scale,o.pixelsPerMeter/u])}else g=u/o.zoomScale(A.z),x=(A.x+Math.pow(2,A.z)*f.wrap)*g,C=A.y*g;return m_(B,B,[x,C,0]),ip(B,B,[g/mn,g/mn,1]),B}upVector(o,u,f){return[0,0,1]}upVectorScale(o,u,f){return{metersToTile:1}}}class n9 extends rf{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[u,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(fe(u));this.n=(g+Math.sin(fe(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,u){const{n:f,c:g,r0:x}=this,C=fe(o-this.center[0]),A=fe(u),B=Math.sqrt(g-2*f*Math.sin(A))/f;return{x:B*Math.sin(C*f),y:B*Math.cos(C*f)-x,z:0}}unproject(o,u){const{n:f,c:g,r0:x}=this,C=x+u;let A=Math.atan2(o,Math.abs(C))*Math.sign(C);C*f<0&&(A-=Math.PI*Math.sign(o)*Math.sign(C));const B=fe(this.center[0])*f;A=gt(A,-Math.PI-B,Math.PI-B);const $=Ee(ge(A/f)+this.center[0],-180,180),Y=Math.asin(Ee((g-(o*o+C*C)*f*f)/(2*f),-1,1)),J=Ee(ge(Y),-da,da);return new rr($,J)}}const N_=1.340264,z_=-.081106,V_=893e-6,U_=.003796,M0=Math.sqrt(3)/2;class r9 extends rf{project(o,u){u=u/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(M0*Math.sin(u)),g=f*f,x=g*g*g;return{x:.5*(o*Math.cos(f)/(M0*(N_+3*z_*g+x*(7*V_+9*U_*g)))/Math.PI+.5),y:1-.5*(f*(N_+z_*g+x*(V_+U_*g))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=f*f,x=g*g*g;for(let Y,J,se,he=0;he<12&&(J=f*(N_+z_*g+x*(V_+U_*g))-u,se=N_+3*z_*g+x*(7*V_+9*U_*g),Y=J/se,f=Ee(f-Y,-Math.PI/3,Math.PI/3),g=f*f,x=g*g*g,!(Math.abs(Y)<1e-12));++he);const C=M0*o*(N_+3*z_*g+x*(7*V_+9*U_*g))/Math.cos(f),A=Math.asin(Math.sin(f)/M0),B=Ee(180*C/Math.PI,-180,180),$=Ee(180*A/Math.PI,-da,da);return new rr(B,$)}}class s9 extends rf{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){return{x:.5+o/360,y:.5-u/360,z:0}}unproject(o,u){const f=360*(o-.5),g=Ee(360*(.5-u),-da,da);return new rr(f,g)}}const Em=Math.PI/2;function O0(l){return Math.tan((Em+l)/2)}class o9 extends rf{constructor(o){super(o),this.center=o.center||[0,30];const[u,f]=this.parallels=o.parallels||[30,30];let g=fe(u),x=fe(f);this.southernCenter=g+x<0,this.southernCenter&&(g=-g,x=-x);const C=Math.cos(g),A=O0(g);this.n=g===x?Math.sin(g):Math.log(C/Math.cos(x))/Math.log(O0(x)/A),this.f=C*Math.pow(O0(g),this.n)/this.n}project(o,u){u=fe(u),this.southernCenter&&(u=-u),o=fe(o-this.center[0]);const f=1e-6,{n:g,f:x}=this;x>0?u<-Em+f&&(u=-Em+f):u>Em-f&&(u=Em-f);const C=x/Math.pow(O0(u),g);let A=C*Math.sin(g*o),B=x-C*Math.cos(g*o);return A=.5*(A/Math.PI+.5),B=.5*(B/Math.PI+.5),{x:A,y:this.southernCenter?B:1-B,z:0}}unproject(o,u){o=(2*o-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:g}=this,x=g-u,C=Math.sign(x),A=Math.sign(f)*Math.sqrt(o*o+x*x);let B=Math.atan2(o,Math.abs(x))*C;x*f<0&&(B-=Math.PI*Math.sign(o)*C);const $=Ee(ge(B/f)+this.center[0],-180,180),Y=Ee(ge(2*Math.atan(Math.pow(g/A,1/f))-Em),-da,da);return new rr($,this.southernCenter?-Y:Y)}}class LP extends rf{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,u){return{x:Td(o),y:Sd(u),z:0}}unproject(o,u){const f=zu(o),g=ca(u);return new rr(f,g)}}const DP=fe(da);class a9 extends rf{project(o,u){const f=(u=fe(u))*u,g=f*f;return{x:.5*((o=fe(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=25,x=0,C=f*f;do{C=f*f;const $=C*C;x=(f*(1.007226+C*(.015085+$*(.028874*C-.044475-.005916*$)))-u)/(1.007226+C*(.045255+$*(.259866*C-.311325-.005916*11*$))),f=Ee(f-x,-DP,DP)}while(Math.abs(x)>1e-6&&--g>0);C=f*f;const A=Ee(ge(o/(.8707+C*(C*(C*C*C*(.003971-.001529*C)-.013791)-.131979))),-180,180),B=ge(f);return new rr(A,B)}}const RP=fe(da);class l9 extends rf{project(o,u){u=fe(u),o=fe(o);const f=Math.cos(u),g=2/Math.PI,x=Math.acos(f*Math.cos(o/2)),C=Math.sin(x)/x,A=.5*(o*g+2*f*Math.sin(o/2)/C)||0,B=.5*(u+Math.sin(u)/C)||0;return{x:.5*(A/Math.PI+.5),y:1-.5*(B/Math.PI+1),z:0}}unproject(o,u){let f=o=(2*o-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,x=25;const C=1e-6;let A=0,B=0;do{const $=Math.cos(g),Y=Math.sin(g),J=2*Y*$,se=Y*Y,he=$*$,me=Math.cos(f/2),xe=Math.sin(f/2),Le=2*me*xe,Ze=xe*xe,st=1-he*me*me,qe=st?1/st:0,rt=st?Math.acos($*me)*Math.sqrt(1/st):0,ht=.5*(2*rt*$*xe+2*f/Math.PI)-o,at=.5*(rt*Y+g)-u,$t=.5*qe*(he*Ze+rt*$*me*se)+1/Math.PI,Lt=qe*(Le*J/4-rt*Y*xe),Kt=.125*qe*(J*xe-rt*Y*he*Le),mi=.5*qe*(se*me+rt*Ze*$)+.5,Ut=Lt*Kt-mi*$t;A=(at*Lt-ht*mi)/Ut,B=(ht*Kt-at*$t)/Ut,f=Ee(f-A,-Math.PI,Math.PI),g=Ee(g-B,-RP,RP)}while((Math.abs(A)>C||Math.abs(B)>C)&&--x>0);return new rr(ge(f),ge(g))}}class BP extends rf{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){const{scale:f,cosPhi:g}=this;return{x:fe(o)*g*f+.5,y:-Math.sin(fe(u))/g*f+.5,z:0}}unproject(o,u){const{scale:f,cosPhi:g}=this,x=-(u-.5)/f,C=Ee(ge((o-.5)/f)/g,-180,180),A=Math.asin(Ee(x*g,-1,1)),B=Ee(ge(A),-da,da);return new rr(C,B)}}class u9 extends LP{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,u,f){const g=T_(o,u,f);return Ls(g,g,S_(wd(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,u){const f=fm(u.lat,u.lng),g=tl([],f),x=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(u),o._centerAltitude):o._centerAltitude;y_(f,f,g,qc(1,0)*mn*x);const C=Gc(new Float64Array(16));return tp(C,o.pixelMatrix,o.globeMatrix),Ls(f,f,C),new ie(f[0],f[1])}pixelsPerMeter(o,u){return qc(1,0)*u}pixelSpaceConversion(o,u,f){const g=qc(1,o)*u,x=kn(qc(1,45)*u,g,f);return this.pixelsPerMeter(o,u)/x}createTileMatrix(o,u,f){const g=mw(wd(f.canonical));return tp(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,u){const{center:f}=o,g=S_(wd(u));return a0(g,g,fe(f.lng)),ow(g,g,fe(f.lat)),ip(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,u,f,g){return hI(o,u,f,!0)||new mm(0,0)}pointCoordinate3D(o,u,f){const g=this.pointCoordinate(o,u,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,u){return!hI(o,u.x,u.y,!1)}farthestPixelDistance(o){const u=function(g,x){const C=g.cameraToCenterDistance,A=g._centerAltitude*x,B=g._camera,$=g._camera.forward(),Y=oh([],Nu([],$,-C),[0,0,A]),J=g.worldSize/(2*Math.PI),se=[0,0,-J],he=g.width/g.height,me=Math.tan(g.fovAboveCenter),xe=Nu([],B.up(),me),Le=Nu([],B.right(),me*he),Ze=tl([],oh([],oh([],$,xe),Le)),st=[];let qe;if(new cw(Y,Ze).closestPointOnSphere(se,J,st)){const rt=oh([],st,se),ht=Wc([],rt,Y);qe=Math.cos(g.fovAboveCenter)*g_(ht)}else{const rt=Wc([],Y,se),ht=Wc([],se,Y);tl(ht,ht);const at=g_(rt)-J;qe=Math.sqrt(at*(at+2*J));const $t=Math.acos(qe/(J+at))-Math.acos(vc($,ht));qe*=Math.cos($t)}return 1.01*qe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=pm(o.zoom);if(f>0){const g=OP(o,qc(1,o.center.lat)*o.worldSize),x=o.worldSize/(2*Math.PI),C=Math.max(o.width,o.height)/o.worldSize*Math.PI;return kn(u,g+x*(1-Math.cos(C)),Math.pow(f,10))}return u}upVector(o,u,f){return T_(u,f,o,1)}upVectorScale(o){return{metersToTile:l0(c0(wd(o)))}}}function FP(l){const o=l.parallels,u=!!o&&Math.abs(o[0]+o[1])<.01;switch(l.name){case"mercator":return new LP(l);case"equirectangular":return new s9(l);case"naturalEarth":return new a9(l);case"equalEarth":return new r9(l);case"winkelTripel":return new l9(l);case"albers":return u?new BP(l):new n9(l);case"lambertConformalConic":return u?new BP(l):new o9(l);case"globe":return new u9(l)}throw new Error(`Invalid projection name: ${l.name}`)}const c9=b0.types,d9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function L0(l,o,u,f,g,x,C,A,B,$,Y,J,se){const he=A?Math.min(nf,Math.round(A[0])):0,me=A?Math.min(nf,Math.round(A[1])):0;l.emplaceBack(o,u,Math.round(32*f),Math.round(32*g),x,C,(he<<1)+(B?1:0),me,16*$,16*Y,256*J,256*se)}function D0(l,o,u,f,g,x,C){l.emplaceBack(o,u,f,g,x,C)}function R0(l,o,u,f,g){l.emplaceBack(o,u,f,g),l.emplaceBack(o,u,f,g),l.emplaceBack(o,u,f,g),l.emplaceBack(o,u,f,g)}function h9(l){for(const o of l.sections)if(ve(o.text))return!0;return!1}class jw{constructor(o){this.layoutVertexArray=new Vc,this.indexArray=new ua,this.programConfigurations=o,this.segments=new Gs,this.dynamicLayoutVertexArray=new Dr,this.opacityVertexArray=new Rr,this.placedSymbolArray=new $E,this.globeExtVertexArray=new Kr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,u,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bz.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,wz.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,d9,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,xz.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}wi(jw,"SymbolBuffers");class Hw{constructor(o,u,f){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Gs,this.collisionVertexArray=new Gr,this.collisionVertexArrayExt=new la}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Tz.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,Sz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}wi(Hw,"CollisionBuffers");class sf{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(C=>C.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gc([]),this.placementViewportMatrix=Gc([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Lw(this.zoom,u["text-size"]),this.iconSizeData=Lw(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(C=>Vu[C]),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new jw(new ep(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new jw(new ep(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new VE,this.lineVertexArray=new UE,this.symbolInstances=new zE}calculateGlyphDependencies(o,u,f,g,x){for(let C=0;C<o.length;C++)if(u[o.charCodeAt(C)]=!0,g&&x){const A=R_[o.charAt(C)];A&&(u[A.charCodeAt(0)]=!0)}}populate(o,u,f,g){const x=this.layers[0],C=x.layout,A=this.projection.name==="globe",B=C.get("text-font"),$=C.get("text-field"),Y=C.get("icon-image"),J=($.value.kind!=="constant"||$.value.value instanceof Vs&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),se=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,he=C.get("symbol-sort-key");if(this.features=[],!J&&!se)return;const me=u.iconDependencies,xe=u.glyphDependencies,Le=u.availableImages,Ze=new It(this.zoom);for(const{feature:st,id:qe,index:rt,sourceLayerIndex:ht}of o){const at=x._featureFilter.needGeometry,$t=op(st,at);if(!x._featureFilter.filter(Ze,$t,f))continue;if(at||($t.geometry=ah(st,f,g)),A&&st.type!==1&&f.z<=5){const Ut=$t.geometry,ii=.98078528056,ri=(di,vi)=>vc(T_(di.x,di.y,f,1),T_(vi.x,vi.y,f,1))<ii;for(let di=0;di<Ut.length;di++)Ut[di]=wN(Ut[di],ri)}let Lt,Kt;if(J){const Ut=x.getValueAndResolveTokens("text-field",$t,f,Le),ii=Vs.factory(Ut);h9(ii)&&(this.hasRTLText=!0),(!this.hasRTLText||mt()==="unavailable"||this.hasRTLText&&xt.isParsed())&&(Lt=Ez(ii,x,$t))}if(se){const Ut=x.getValueAndResolveTokens("icon-image",$t,f,Le);Kt=Ut instanceof ln?Ut:ln.fromString(Ut)}if(!Lt&&!Kt)continue;const mi=this.sortFeaturesByKey?he.evaluate($t,{},f):void 0;if(this.features.push({id:qe,text:Lt,icon:Kt,index:rt,sourceLayerIndex:ht,geometry:$t.geometry,properties:st.properties,type:c9[st.type],sortKey:mi}),Kt&&(me[Kt.name]=!0),Lt){const Ut=B.evaluate($t,{},f).join(","),ii=C.get("text-rotation-alignment")==="map"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vu.vertical)>=0;for(const ri of Lt.sections)if(ri.image)me[ri.image.name]=!0;else{const di=k(Lt.toString()),vi=ri.fontStack||Ut,Ht=xe[vi]=xe[vi]||{};this.calculateGlyphDependencies(ri.text,Ht,ii,this.allowVerticalPlacement,di)}}}C.get("symbol-placement")==="line"&&(this.features=function(st){const qe={},rt={},ht=[];let at=0;function $t(Ut){ht.push(st[Ut]),at++}function Lt(Ut,ii,ri){const di=rt[Ut];return delete rt[Ut],rt[ii]=di,ht[di].geometry[0].pop(),ht[di].geometry[0]=ht[di].geometry[0].concat(ri[0]),di}function Kt(Ut,ii,ri){const di=qe[ii];return delete qe[ii],qe[Ut]=di,ht[di].geometry[0].shift(),ht[di].geometry[0]=ri[0].concat(ht[di].geometry[0]),di}function mi(Ut,ii,ri){const di=ri?ii[0][ii[0].length-1]:ii[0][0];return`${Ut}:${di.x}:${di.y}`}for(let Ut=0;Ut<st.length;Ut++){const ii=st[Ut],ri=ii.geometry,di=ii.text?ii.text.toString():null;if(!di){$t(Ut);continue}const vi=mi(di,ri),Ht=mi(di,ri,!0);if(vi in rt&&Ht in qe&&rt[vi]!==qe[Ht]){const Di=Kt(vi,Ht,ri),un=Lt(vi,Ht,ht[Di].geometry);delete qe[vi],delete rt[Ht],rt[mi(di,ht[un].geometry,!0)]=un,ht[Di].geometry=null}else vi in rt?Lt(vi,Ht,ri):Ht in qe?Kt(vi,Ht,ri):($t(Ut),qe[vi]=at-1,rt[Ht]=at-1)}return ht.filter(Ut=>Ut.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((st,qe)=>st.sortKey-qe.sortKey)}update(o,u,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=FP(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:x}of u)this.lineVertexArray.emplaceBack(g,x);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,u,f,g,x,C,A,B,$,Y,J,se,he,me){const xe=o.indexArray,Le=o.layoutVertexArray,Ze=o.globeExtVertexArray,st=o.segments.prepareSegment(4*u.length,Le,xe,this.canOverlap?C.sortKey:void 0),qe=this.glyphOffsetArray.length,rt=st.vertexLength,ht=this.allowVerticalPlacement&&A===Vu.vertical?Math.PI/2:0,at=C.text&&C.text.sections;for(let Lt=0;Lt<u.length;Lt++){const{tl:Kt,tr:mi,bl:Ut,br:ii,tex:ri,pixelOffsetTL:di,pixelOffsetBR:vi,minFontScaleX:Ht,minFontScaleY:Di,glyphOffset:un,isSDF:$i,sectionIndex:Ki}=u[Lt],Ri=st.vertexLength,cn=un[1];if(L0(Le,$.x,$.y,Kt.x,cn+Kt.y,ri.x,ri.y,f,$i,di.x,di.y,Ht,Di),L0(Le,$.x,$.y,mi.x,cn+mi.y,ri.x+ri.w,ri.y,f,$i,vi.x,di.y,Ht,Di),L0(Le,$.x,$.y,Ut.x,cn+Ut.y,ri.x,ri.y+ri.h,f,$i,di.x,vi.y,Ht,Di),L0(Le,$.x,$.y,ii.x,cn+ii.y,ri.x+ri.w,ri.y+ri.h,f,$i,vi.x,vi.y,Ht,Di),B){const{x:Hn,y:zn,z:$n}=B.anchor,[pn,Tr,wn]=B.up;D0(Ze,Hn,zn,$n,pn,Tr,wn),D0(Ze,Hn,zn,$n,pn,Tr,wn),D0(Ze,Hn,zn,$n,pn,Tr,wn),D0(Ze,Hn,zn,$n,pn,Tr,wn),R0(o.dynamicLayoutVertexArray,Hn,zn,$n,ht)}else R0(o.dynamicLayoutVertexArray,$.x,$.y,$.z,ht);xe.emplaceBack(Ri,Ri+1,Ri+2),xe.emplaceBack(Ri+1,Ri+2,Ri+3),st.vertexLength+=4,st.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(un[0]),Lt!==u.length-1&&Ki===u[Lt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Le.length,C,C.index,{},he,me,at&&at[Ki])}const $t=B?B.anchor:$;o.placedSymbolArray.emplaceBack($t.x,$t.y,$t.z,$.x,$.y,qe,this.glyphOffsetArray.length-qe,rt,Y,J,$.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],A,0,!1,0,se,0)}_commitLayoutVertex(o,u,f,g,x,C,A){o.emplaceBack(u,f,g,x,C,Math.round(A.x),Math.round(A.y))}_addCollisionDebugVertices(o,u,f,g,x,C,A){const B=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),$=B.vertexLength,Y=A.tileAnchorX,J=A.tileAnchorY;for(let he=0;he<4;he++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(u,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(u,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(u,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(u,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,x,C,Y,J,new ie(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,C,Y,J,new ie(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,C,Y,J,new ie(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,x,C,Y,J,new ie(o.x1,o.y2)),B.vertexLength+=4;const se=f.indexArray;se.emplaceBack($,$+1),se.emplaceBack($+1,$+2),se.emplaceBack($+2,$+3),se.emplaceBack($+3,$),B.primitiveLength+=4}_addTextDebugCollisionBoxes(o,u,f,g,x,C){for(let A=g;A<x;A++){const B=f.get(A),$=this.getSymbolInstanceTextSize(o,C,u,A);this._addCollisionDebugVertices(B,$,this.textCollisionBox,B.projectedAnchorX,B.projectedAnchorY,B.projectedAnchorZ,C)}}_addIconDebugCollisionBoxes(o,u,f,g,x,C){for(let A=g;A<x;A++){const B=f.get(A),$=this.getSymbolInstanceIconSize(o,u,C.placedIconSymbolIndex);this._addCollisionDebugVertices(B,$,this.iconCollisionBox,B.projectedAnchorX,B.projectedAnchorY,B.projectedAnchorZ,C)}}generateCollisionDebugBuffers(o,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hw(ks,sP.members,yd),this.iconCollisionBox=new Hw(ks,sP.members,yd);const f=xm(this.iconSizeData,o),g=xm(this.textSizeData,o);for(let x=0;x<this.symbolInstances.length;x++){const C=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(g,o,u,C.textBoxStartIndex,C.textBoxEndIndex,C),this._addTextDebugCollisionBoxes(g,o,u,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C),this._addIconDebugCollisionBoxes(f,o,u,C.iconBoxStartIndex,C.iconBoxEndIndex,C),this._addIconDebugCollisionBoxes(f,o,u,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C)}}getSymbolInstanceTextSize(o,u,f,g){const x=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),C=S0(this.textSizeData,o,x)/ha;return this.tilePixelRatio*C}getSymbolInstanceIconSize(o,u,f){const g=this.icon.placedSymbolArray.get(f),x=S0(this.iconSizeData,o,g);return this.tilePixelRatio*x}_commitDebugCollisionVertexUpdate(o,u,f){o.emplaceBack(u,-f,-f),o.emplaceBack(u,f,-f),o.emplaceBack(u,f,f),o.emplaceBack(u,-f,f)}_updateTextDebugCollisionBoxes(o,u,f,g,x,C){for(let A=g;A<x;A++){const B=f.get(A),$=this.getSymbolInstanceTextSize(o,C,u,A);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,$,B.padding)}}_updateIconDebugCollisionBoxes(o,u,f,g,x,C){for(let A=g;A<x;A++){const B=f.get(A),$=this.getSymbolInstanceIconSize(o,u,C);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,$,B.padding)}}updateCollisionDebugBuffers(o,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=xm(this.iconSizeData,o),g=xm(this.textSizeData,o);for(let x=0;x<this.symbolInstances.length;x++){const C=this.symbolInstances.get(x);this._updateTextDebugCollisionBoxes(g,o,u,C.textBoxStartIndex,C.textBoxEndIndex,C),this._updateTextDebugCollisionBoxes(g,o,u,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C),this._updateIconDebugCollisionBoxes(f,o,u,C.iconBoxStartIndex,C.iconBoxEndIndex,C.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,u,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,u,f,g,x,C,A,B,$){const Y={};if(u<f){const{x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt,featureIndex:ht}=o.get(u);Y.textBox={x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt},Y.textFeatureIndex=ht}if(g<x){const{x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt,featureIndex:ht}=o.get(g);Y.verticalTextBox={x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt},Y.verticalTextFeatureIndex=ht}if(C<A){const{x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt,featureIndex:ht}=o.get(C);Y.iconBox={x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt},Y.iconFeatureIndex=ht}if(B<$){const{x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt,featureIndex:ht}=o.get(B);Y.verticalIconBox={x1:J,y1:se,x2:he,y2:me,padding:xe,projectedAnchorX:Le,projectedAnchorY:Ze,projectedAnchorZ:st,tileAnchorX:qe,tileAnchorY:rt},Y.verticalIconFeatureIndex=ht}return Y}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,u){const f=o.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),f=Math.cos(o),g=[],x=[],C=[];for(let A=0;A<this.symbolInstances.length;++A){C.push(A);const B=this.symbolInstances.get(A);g.push(0|Math.round(u*B.tileAnchorX+f*B.tileAnchorY)),x.push(B.featureIndex)}return C.sort((A,B)=>g[A]-g[B]||x[B]-x[A]),C}addToSortKeyRanges(o,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:x,leftJustifiedTextSymbolIndex:C,verticalPlacedTextSymbolIndex:A,placedIconSymbolIndex:B,verticalPlacedIconSymbolIndex:$}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),x>=0&&x!==g&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&C!==x&&C!==g&&this.addIndicesForPlacedSymbol(this.text,C),A>=0&&this.addIndicesForPlacedSymbol(this.text,A),B>=0&&this.addIndicesForPlacedSymbol(this.icon,B),$>=0&&this.addIndicesForPlacedSymbol(this.icon,$)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wi(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=R0;const f9=new hi({"symbol-placement":new Et(Wt.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(Wt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(Wt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zt(Wt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(Wt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(Wt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Et(Wt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(Wt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(Wt.layout_symbol["icon-rotation-alignment"]),"icon-size":new zt(Wt.layout_symbol["icon-size"]),"icon-text-fit":new Et(Wt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(Wt.layout_symbol["icon-text-fit-padding"]),"icon-image":new zt(Wt.layout_symbol["icon-image"]),"icon-rotate":new zt(Wt.layout_symbol["icon-rotate"]),"icon-padding":new Et(Wt.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(Wt.layout_symbol["icon-keep-upright"]),"icon-offset":new zt(Wt.layout_symbol["icon-offset"]),"icon-anchor":new zt(Wt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(Wt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(Wt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(Wt.layout_symbol["text-rotation-alignment"]),"text-field":new zt(Wt.layout_symbol["text-field"]),"text-font":new zt(Wt.layout_symbol["text-font"]),"text-size":new zt(Wt.layout_symbol["text-size"]),"text-max-width":new zt(Wt.layout_symbol["text-max-width"]),"text-line-height":new zt(Wt.layout_symbol["text-line-height"]),"text-letter-spacing":new zt(Wt.layout_symbol["text-letter-spacing"]),"text-justify":new zt(Wt.layout_symbol["text-justify"]),"text-radial-offset":new zt(Wt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(Wt.layout_symbol["text-variable-anchor"]),"text-anchor":new zt(Wt.layout_symbol["text-anchor"]),"text-max-angle":new Et(Wt.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(Wt.layout_symbol["text-writing-mode"]),"text-rotate":new zt(Wt.layout_symbol["text-rotate"]),"text-padding":new Et(Wt.layout_symbol["text-padding"]),"text-keep-upright":new Et(Wt.layout_symbol["text-keep-upright"]),"text-transform":new zt(Wt.layout_symbol["text-transform"]),"text-offset":new zt(Wt.layout_symbol["text-offset"]),"text-allow-overlap":new Et(Wt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Et(Wt.layout_symbol["text-ignore-placement"]),"text-optional":new Et(Wt.layout_symbol["text-optional"])});var Gw={paint:new hi({"icon-opacity":new zt(Wt.paint_symbol["icon-opacity"]),"icon-color":new zt(Wt.paint_symbol["icon-color"]),"icon-halo-color":new zt(Wt.paint_symbol["icon-halo-color"]),"icon-halo-width":new zt(Wt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zt(Wt.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(Wt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(Wt.paint_symbol["icon-translate-anchor"]),"text-opacity":new zt(Wt.paint_symbol["text-opacity"]),"text-color":new zt(Wt.paint_symbol["text-color"],{runtimeType:fn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new zt(Wt.paint_symbol["text-halo-color"]),"text-halo-width":new zt(Wt.paint_symbol["text-halo-width"]),"text-halo-blur":new zt(Wt.paint_symbol["text-halo-blur"]),"text-translate":new Et(Wt.paint_symbol["text-translate"]),"text-translate-anchor":new Et(Wt.paint_symbol["text-translate-anchor"])}),layout:f9};class $P{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Qo,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wi($P,"FormatSectionOverride",{omit:["defaultValue"]});class B0 extends Hc{constructor(o){super(o,Gw)}recalculate(o,u){super.recalculate(o,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,u,f,g){const x=this.layout.get(o).evaluate(u,{},f,g),C=this._unevaluatedLayout._values[o];return C.isDataDriven()||oa(C.value)||!x?x:function(A,B){return B.replace(/{([^{}]+)}/g,($,Y)=>Y in A?String(A[Y]):"")}(u.properties,x)}createBucket(o){return new sf(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of Gw.paint.overridableProperties){if(!B0.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),f=new $P(u),g=new sa(f,u.property.specification);let x=null;x=u.value.kind==="constant"||u.value.kind==="source"?new gc("source",g):new Pa("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[o]=new ui(u.property,x,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&B0.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const f=o.get("text-field"),g=Gw.paint.properties[u];let x=!1;const C=A=>{for(const B of A)if(g.overrides&&g.overrides.hasOverride(B))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Vs)C(f.value.value.sections);else if(f.value.kind==="source"){const A=$=>{x||($ instanceof xa&&jr($.value)===ns?C($.value.sections):$ instanceof zo?C($.sections):$.eachChild(A))},B=f.value;B._styleExpression&&A(B._styleExpression.expression)}return x}getProgramConfiguration(o){return new ef(this,o)}}var p9={paint:new hi({"background-color":new Et(Wt.paint_background["background-color"]),"background-pattern":new Et(Wt.paint_background["background-pattern"]),"background-opacity":new Et(Wt.paint_background["background-opacity"])})},m9={paint:new hi({"raster-opacity":new Et(Wt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(Wt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(Wt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(Wt.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(Wt.paint_raster["raster-saturation"]),"raster-contrast":new Et(Wt.paint_raster["raster-contrast"]),"raster-resampling":new Et(Wt.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(Wt.paint_raster["raster-fade-duration"])})};class g9 extends Hc{constructor(o){super(o,{}),this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var _9={paint:new hi({"sky-type":new Et(Wt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Et(Wt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Et(Wt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Et(Wt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Et(Wt.paint_sky["sky-gradient-radius"]),"sky-gradient":new oi(Wt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Et(Wt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Et(Wt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Et(Wt.paint_sky["sky-opacity"])})};function Ww(l,o,u){const f=[0,0,1],g=aI([]);return uI(g,g,u?-fe(l)+Math.PI:fe(l)),lI(g,g,-fe(o)),nI(f,f,g),tl(f,f)}const v9={circle:class extends Hc{constructor(l){super(l,PN)}createBucket(l){return new xw(l)}queryRadius(l){const o=l;return gm("circle-radius",this,o)+gm("circle-stroke-width",this,o)+f0(this.paint.get("circle-translate"))}queryIntersectsFeature(l,o,u,f,g,x,C,A){const B=AI(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,l.pixelToTileUnitsFactor),$=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u);return MI(l,f,x,C,A,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",B,$)}getProgramIds(){return["circle"]}getProgramConfiguration(l){return new ef(this,l)}},heatmap:class extends Hc{createBucket(l){return new LI(l)}constructor(l){super(l,LN),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return gm("heatmap-radius",this,l)}queryIntersectsFeature(l,o,u,f,g,x,C,A){const B=this.paint.get("heatmap-radius").evaluate(o,u);return MI(l,f,x,C,A,!0,!0,new ie(0,0),B)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(l){return new ef(this,l)}},hillshade:class extends Hc{constructor(l){super(l,DN)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Hc{constructor(l){super(l,XN)}getProgramIds(){const l=this.paint.get("fill-pattern"),o=l&&l.constantOr(1),u=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(l){return new ef(this,l)}recalculate(l,o){super.recalculate(l,o);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new v0(l)}queryRadius(){return f0(this.paint.get("fill-translate"))}queryIntersectsFeature(l,o,u,f,g,x){return!l.queryGeometry.isAboveHorizon&&CI(PI(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,l.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Hc{constructor(l){super(l,hz)}createBucket(l){return new O_(l)}queryRadius(){return f0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(l){return new ef(this,l)}queryIntersectsFeature(l,o,u,f,g,x,C,A,B){const $=AI(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,l.pixelToTileUnitsFactor),Y=this.paint.get("fill-extrusion-height").evaluate(o,u),J=this.paint.get("fill-extrusion-base").evaluate(o,u),se=[0,0],he=A&&x.elevation,me=x.elevation?x.elevation.exaggeration():1,xe=l.tile.getBucket(this);if(he&&xe instanceof O_){const rt=xe.centroidVertexArray,ht=B+1;ht<rt.length&&(se[0]=rt.geta_centroid_pos0(ht),se[1]=rt.geta_centroid_pos1(ht))}if(se[0]===0&&se[1]===1)return!1;x.projection.name==="globe"&&(f=KI([f],[new ie(0,0),new ie(mn,mn)],l.tileID.canonical).map(rt=>rt.polygon).flat());const Le=he?A:null,[Ze,st]=function(rt,ht,at,$t,Lt,Kt,mi,Ut,ii,ri,di){return rt.projection.name==="globe"?function(vi,Ht,Di,un,$i,Ki,Ri,cn,Hn,zn,$n){const pn=[],Tr=[],wn=vi.projection.upVectorScale($n,vi.center.lat,vi.worldSize).metersToTile,Gn=[0,0,0,1],kr=[0,0,0,1],Wr=(qr,Qr,Es,Ho)=>{qr[0]=Qr,qr[1]=Es,qr[2]=Ho,qr[3]=1},zr=XI();Di>0&&(Di+=zr),un+=zr;for(const qr of Ht){const Qr=[],Es=[];for(const Ho of qr){const Sr=Ho.x+$i.x,ro=Ho.y+$i.y,qs=vi.projection.projectTilePoint(Sr,ro,$n),ar=vi.projection.upVector($n,Ho.x,Ho.y);let ds=Di,So=un;if(Ri){const Er=tP(Sr,ro,Di,un,Ri,cn,Hn,zn);ds+=Er.base,So+=Er.top}Di!==0?Wr(Gn,qs.x+ar[0]*wn*ds,qs.y+ar[1]*wn*ds,qs.z+ar[2]*wn*ds):Wr(Gn,qs.x,qs.y,qs.z),Wr(kr,qs.x+ar[0]*wn*So,qs.y+ar[1]*wn*So,qs.z+ar[2]*wn*So),Ls(Gn,Gn,Ki),Ls(kr,kr,Ki),Qr.push(new bm(Gn[0],Gn[1],Gn[2])),Es.push(new bm(kr[0],kr[1],kr[2]))}pn.push(Qr),Tr.push(Es)}return[pn,Tr]}(rt,ht,at,$t,Lt,Kt,mi,Ut,ii,ri,di):mi?function(vi,Ht,Di,un,$i,Ki,Ri,cn,Hn){const zn=[],$n=[],pn=[0,0,0,1];for(const Tr of vi){const wn=[],Gn=[];for(const kr of Tr){const Wr=kr.x+un.x,zr=kr.y+un.y,qr=tP(Wr,zr,Ht,Di,Ki,Ri,cn,Hn);pn[0]=Wr,pn[1]=zr,pn[2]=qr.base,pn[3]=1,np(pn,pn,$i),pn[3]=Math.max(pn[3],1e-5);const Qr=new bm(pn[0]/pn[3],pn[1]/pn[3],pn[2]/pn[3]);pn[0]=Wr,pn[1]=zr,pn[2]=qr.top,pn[3]=1,np(pn,pn,$i),pn[3]=Math.max(pn[3],1e-5);const Es=new bm(pn[0]/pn[3],pn[1]/pn[3],pn[2]/pn[3]);wn.push(Qr),Gn.push(Es)}zn.push(wn),$n.push(Gn)}return[zn,$n]}(ht,at,$t,Lt,Kt,mi,Ut,ii,ri):function(vi,Ht,Di,un,$i){const Ki=[],Ri=[],cn=$i[8]*Ht,Hn=$i[9]*Ht,zn=$i[10]*Ht,$n=$i[11]*Ht,pn=$i[8]*Di,Tr=$i[9]*Di,wn=$i[10]*Di,Gn=$i[11]*Di;for(const kr of vi){const Wr=[],zr=[];for(const qr of kr){const Qr=qr.x+un.x,Es=qr.y+un.y,Ho=$i[0]*Qr+$i[4]*Es+$i[12],Sr=$i[1]*Qr+$i[5]*Es+$i[13],ro=$i[2]*Qr+$i[6]*Es+$i[14],qs=$i[3]*Qr+$i[7]*Es+$i[15],ar=Ho+cn,ds=Sr+Hn,So=ro+zn,Er=Math.max(qs+$n,1e-5),Ds=Ho+pn,Ma=Sr+Tr,Go=ro+wn,Wo=Math.max(qs+Gn,1e-5);Wr.push(new bm(ar/Er,ds/Er,So/Er)),zr.push(new bm(Ds/Wo,Ma/Wo,Go/Wo))}Ki.push(Wr),Ri.push(zr)}return[Ki,Ri]}(ht,at,$t,Lt,Kt)}(x,f,J,Y,$,C,Le,se,me,x.center.lat,l.tileID.canonical),qe=l.queryGeometry;return function(rt,ht,at){let $t=1/0;CI(at,ht)&&($t=eP(at,ht[0]));for(let Lt=0;Lt<ht.length;Lt++){const Kt=ht[Lt],mi=rt[Lt];for(let Ut=0;Ut<Kt.length-1;Ut++){const ii=Kt[Ut],ri=[ii,Kt[Ut+1],mi[Ut+1],mi[Ut],ii];SI(at,ri)&&($t=Math.min($t,eP(at,ri)))}}return $t!==1/0&&$t}(Ze,st,qe.isPointQuery()?qe.screenBounds:qe.screenGeometry)}},line:class extends Hc{constructor(l){super(l,iP),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,o){super.recalculate(l,o),this.paint._values["line-floorwidth"]=nP.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new T0(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(l){return new ef(this,l)}queryRadius(l){const o=l,u=rP(gm("line-width",this,o),gm("line-gap-width",this,o)),f=gm("line-offset",this,o);return u/2+Math.abs(f)+f0(this.paint.get("line-translate"))}queryIntersectsFeature(l,o,u,f,g,x){if(l.queryGeometry.isAboveHorizon)return!1;const C=PI(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,l.pixelToTileUnitsFactor),A=l.pixelToTileUnitsFactor/2*rP(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),B=this.paint.get("line-offset").evaluate(o,u);return B&&(f=function($,Y){const J=[],se=new ie(0,0);for(let he=0;he<$.length;he++){const me=$[he],xe=[];for(let Le=0;Le<me.length;Le++){const Ze=me[Le-1],st=me[Le],qe=me[Le+1],rt=Le===0?se:st.sub(Ze)._unit()._perp(),ht=Le===me.length-1?se:qe.sub(st)._unit()._perp(),at=rt._add(ht)._unit();at._mult(1/(at.x*ht.x+at.y*ht.y)),xe.push(at._mult(Y)._add(st))}J.push(xe)}return J}(f,B*l.pixelToTileUnitsFactor)),function($,Y,J){for(let se=0;se<Y.length;se++){const he=Y[se];if($.length>=3){for(let me=0;me<he.length;me++)if(ap($,he[me]))return!0}if(CN($,he,J))return!0}return!1}(C,f,A)}isTileClipped(){return!0}},symbol:B0,background:class extends Hc{constructor(l){super(l,p9)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Hc{constructor(l){super(l,m9)}getProgramIds(){return["raster"]}},sky:class extends Hc{constructor(l){super(l,_9),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Cw({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(l,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,x=l.style.light,C=x.properties.get("position");return g&&x.properties.get("anchor")==="viewport"&&Ve("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?Ww(C.azimuthal,90-C.polar,o):Ww(f[0],90-f[1],o)}const u=this.paint.get("sky-gradient-center");return Ww(u[0],90-u[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}}};class j_{constructor(o,u,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(u,g)}update(o,u,f){const{width:g,height:x}=o,{context:C}=this,{gl:A}=C,{HTMLImageElement:B,HTMLCanvasElement:$,HTMLVideoElement:Y,ImageData:J,ImageBitmap:se}=p;if(A.bindTexture(A.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!u||u.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===x){const{x:he,y:me}=f||{x:0,y:0};o instanceof B||o instanceof $||o instanceof Y||o instanceof J||se&&o instanceof se?A.texSubImage2D(A.TEXTURE_2D,0,he,me,A.RGBA,A.UNSIGNED_BYTE,o):A.texSubImage2D(A.TEXTURE_2D,0,he,me,g,x,A.RGBA,A.UNSIGNED_BYTE,o.data)}else this.size=[g,x],o instanceof B||o instanceof $||o instanceof Y||o instanceof J||se&&o instanceof se?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,o):A.texImage2D(A.TEXTURE_2D,0,this.format,g,x,0,this.format,A.UNSIGNED_BYTE,o.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&A.generateMipmap(A.TEXTURE_2D)}bind(o,u){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),u!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class y9{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class b9{constructor(){this.tasks={},this.taskQueue=[],tt(["process"],this),this.invoker=new y9(this.process),this.nextId=0}add(o,u){const f=this.nextId++,g=function({type:x,isSymbolTile:C,zoom:A}){return A=A||0,x==="message"?0:x!=="maybePrepare"||C?x!=="parseTile"||C?x==="parseTile"&&C?300-A:x==="maybePrepare"&&C?400-A:500:200-A:100-A}(u);if(g===0){Xe();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:u,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){Xe();try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const u=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let o=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const x=this.tasks[this.taskQueue[g]];x.priority<u&&(u=x.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class NP{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const f=o[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const x9=["tile","layer","source","sourceLayer","state"];class zP{constructor(o,u,f,g,x){this.type="Feature",this._vectorTileFeature=o,this._z=u,this._x=f,this._y=g,this.properties=o.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const u of x9)this[u]!==void 0&&(o[u]=this[u]);return o}}const xc=32,kd=33,of=new Uint16Array(8184);for(let l=0;l<2046;l++){let o=l+2,u=0,f=0,g=0,x=0,C=0,A=0;for(1&o?g=x=C=xc:u=f=A=xc;(o>>=1)>1;){const $=u+g>>1,Y=f+x>>1;1&o?(g=u,x=f,u=C,f=A):(u=g,f=x,g=C,x=A),C=$,A=Y}const B=4*l;of[B+0]=u,of[B+1]=f,of[B+2]=g,of[B+3]=x}const Ed=new Uint16Array(2178),af=new Uint8Array(1089),F0=new Uint16Array(1089);function VP(l){return l===0?-.03125:l===32?.03125:0}var UP=tn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const jP={type:2,extent:mn,loadGeometry:()=>[[new ie(0,0),new ie(8193,0),new ie(8193,8193),new ie(0,8193),new ie(0,0)]]};class qw{constructor(o,u,f,g,x){this.tileID=o,this.uid=et(),this.uses=0,this.tileSize=u,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=x,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const u=o+this.timeAdded;u<Ln.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=up(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,u,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(g,x){const C={};if(!x)return C;for(const A of g){const B=A.layerIds.map($=>x.getLayer($)).filter(Boolean);if(B.length!==0){A.layers=B,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map($=>B.filter(Y=>Y.id===$)[0]));for(const $ of B)C[$.id]=A}}return C}(o.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof sf){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof sf&&x.hasRTLText){this.hasRTLText=!0,xt.isLoading()||xt.isLoaded()||mt()!=="deferred"||ut();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new ew}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const u=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new j_(o,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new j_(o,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new j_(o,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,u,f,g,x,C,A,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:A,transform:C,params:x,tileTransform:this.tileTransform},o,u,f):{}}querySourceFeatures(o,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=u?u.sourceLayer:"",C=g._geojsonTileLayer||g[x];if(!C)return;const A=X(u&&u.filter),{z:B,x:$,y:Y}=this.tileID.canonical,J={z:B,x:$,y:Y};for(let se=0;se<C.length;se++){const he=C.feature(se);if(A.needGeometry){const Le=op(he,!0);if(!A.filter(new It(this.tileID.overscaledZ),Le,this.tileID.canonical))continue}else if(!A.filter(new It(this.tileID.overscaledZ),he))continue;const me=f.getId(he,x),xe=new zP(he,B,$,Y,me);xe.tile=J,o.push(xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const u=this.expirationTime;if(o.cacheControl){const f=it(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0||!u)return;const f=this.latestFeatureIndex.loadVTLayers(),g=u.style.listImages();for(const x in this.buckets){if(!u.style.hasLayer(x))continue;const C=this.buckets[x],A=C.layers[0].sourceLayer||"_geojsonTileLayer",B=f[A],$=o[A];if(!B||!$||Object.keys($).length===0)continue;if(C.update($,B,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),C instanceof T0||C instanceof v0){const J=u.style._getSourceCache(C.layers[0].source);u._terrain&&u._terrain.enabled&&J&&C.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(J.id,this.tileID)}const Y=u&&u.style&&u.style.getLayer(x);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ln.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Ln.now()+o}setTexture(o,u){const f=u.context,g=f.gl;this.texture=this.texture||u.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new j_(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,u){const f={};for(const g of u)f[g]=!0;this.dependencies[o]=f}hasDependency(o,u){for(const f of o){const g=this.dependencies[f];if(g){for(const x of u)if(g[x])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const f=ah(jP,this.tileID.canonical,this.tileTransform)[0],g=new an,x=new bd;for(let C=0;C<f.length;C++){const{x:A,y:B}=f[C];g.emplaceBack(A,B),x.emplaceBack(C)}x.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(x),this._tileDebugBuffer=o.createVertexBuffer(g,x_.members),this._tileDebugSegments=Gs.simpleSegment(0,0,g.length,x.length)}_makeTileBoundsBuffers(o,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const f=ah(jP,this.tileID.canonical,this.tileTransform)[0];let g,x;if(this.isRaster){const C=function(A,B){const $=up(A,B),Y=Math.pow(2,A.z);for(let Le=0;Le<kd;Le++)for(let Ze=0;Ze<kd;Ze++){const st=zu((A.x+(Ze+VP(Ze))/xc)/Y),qe=ca((A.y+(Le+VP(Le))/xc)/Y),rt=B.project(st,qe),ht=Le*kd+Ze;Ed[2*ht+0]=Math.round((rt.x*$.scale-$.x)*mn),Ed[2*ht+1]=Math.round((rt.y*$.scale-$.y)*mn)}af.fill(0),F0.fill(0);for(let Le=2045;Le>=0;Le--){const Ze=4*Le,st=of[Ze+0],qe=of[Ze+1],rt=of[Ze+2],ht=of[Ze+3],at=st+rt>>1,$t=qe+ht>>1,Lt=at+$t-qe,Kt=$t+st-at,mi=qe*kd+st,Ut=ht*kd+rt,ii=$t*kd+at,ri=Math.hypot((Ed[2*mi+0]+Ed[2*Ut+0])/2-Ed[2*ii+0],(Ed[2*mi+1]+Ed[2*Ut+1])/2-Ed[2*ii+1])>=16;if(af[ii]=af[ii]||(ri?1:0),Le<1022){const di=(qe+Kt>>1)*kd+(st+Lt>>1),vi=(ht+Kt>>1)*kd+(rt+Lt>>1);af[ii]=af[ii]||af[di]||af[vi]}}const J=new mr,se=new ua;let he=0;function me(Le,Ze){const st=Ze*kd+Le;return F0[st]===0&&(J.emplaceBack(Ed[2*st+0],Ed[2*st+1],Le*mn/xc,Ze*mn/xc),F0[st]=++he),F0[st]-1}function xe(Le,Ze,st,qe,rt,ht){const at=Le+st>>1,$t=Ze+qe>>1;if(Math.abs(Le-rt)+Math.abs(Ze-ht)>1&&af[$t*kd+at])xe(rt,ht,Le,Ze,at,$t),xe(st,qe,rt,ht,at,$t);else{const Lt=me(Le,Ze),Kt=me(st,qe),mi=me(rt,ht);se.emplaceBack(Lt,Kt,mi)}}return xe(0,0,xc,xc,xc,0),xe(xc,xc,0,0,0,xc),{vertices:J,indices:se}}(this.tileID.canonical,u);g=C.vertices,x=C.indices}else{g=new mr,x=new ua;for(const{x:A,y:B}of f)g.emplaceBack(A,B,0,0);const C=_m(g.int16,void 0,4);for(let A=0;A<C.length;A+=3)x.emplaceBack(C[A],C[A+1],C[A+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,UP.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(x),this._tileBoundsSegments=Gs.simpleSegment(0,0,g.length,x.length)}_makeGlobeTileDebugBuffers(o,u){const f=u.projection;if(!f||f.name!=="globe"||u.freezeTileCoverage)return;const g=this.tileID.canonical,x=S_(fI(g,u)),C=pm(u.zoom);let A;C>0&&(A=sw(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,u,x,A,C),this._makeGlobeTileDebugTextBuffer(o,g,u,x,A,C)}_globePoint(o,u,f,g,x,C,A){let B=T_(o,u,f);if(C){const $=1<<f.z,Y=Td(g.center.lng),J=Sd(g.center.lat),se=(f.x+.5)/$-Y;let he=0;se>.5?he=-1:se<-.5&&(he=1);let me=(o/mn+f.x)/$+he,xe=(u/mn+f.y)/$;me=(me-Y)*g._pixelsPerMercatorPixel+Y,xe=(xe-J)*g._pixelsPerMercatorPixel+J;const Le=[me*g.worldSize,xe*g.worldSize,0];Ls(Le,Le,C),B=sp(B,Le,A)}return Ls(B,B,x)}_makeGlobeTileDebugBorderBuffer(o,u,f,g,x,C){const A=new an,B=new bd,$=new hr,Y=(se,he,me,xe,Le)=>{const Ze=(me-se)/(Le-1),st=(xe-he)/(Le-1),qe=A.length;for(let rt=0;rt<Le;rt++){const ht=se+rt*Ze,at=he+rt*st;A.emplaceBack(ht,at);const $t=this._globePoint(ht,at,u,f,g,x,C);$.emplaceBack($t[0],$t[1],$t[2]),B.emplaceBack(qe+rt)}},J=mn;Y(0,0,J,0,16),Y(J,0,J,J,16),Y(J,J,0,J,16),Y(0,J,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(B),this._tileDebugBuffer=o.createVertexBuffer(A,x_.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer($,dI.members),this._tileDebugSegments=Gs.simpleSegment(0,0,A.length,B.length)}_makeGlobeTileDebugTextBuffer(o,u,f,g,x,C){const A=new an,B=new ua,$=new hr,Y=25;B.reserve(32),A.reserve(Y),$.reserve(Y);const J=(se,he)=>Y*se+he;for(let se=0;se<Y;se++){const he=2048*se;for(let me=0;me<Y;me++){const xe=2048*me;A.emplaceBack(xe,he);const Le=this._globePoint(xe,he,u,f,g,x,C);$.emplaceBack(Le[0],Le[1],Le[2])}}for(let se=0;se<4;se++)for(let he=0;he<4;he++){const me=J(se,he),xe=J(se,he+1),Le=J(se+1,he),Ze=J(se+1,he+1);B.emplaceBack(me,xe,Le),B.emplaceBack(Le,xe,Ze)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(B),this._tileDebugTextBuffer=o.createVertexBuffer(A,x_.members),this._globeTileDebugTextBuffer=o.createVertexBuffer($,dI.members),this._tileDebugTextSegments=Gs.simpleSegment(0,0,Y,32)}}class w9{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,u,f){const g=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},Tt(this.stateChanges[o][g],f),this.deletedStates[o]===null){this.deletedStates[o]={};for(const x in this.state[o])x!==g&&(this.deletedStates[o][x]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const x in this.state[o][g])f[x]||(this.deletedStates[o][g][x]=null)}else for(const x in f)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][x]===null&&delete this.deletedStates[o][g][x]}removeFeatureState(o,u,f){if(this.deletedStates[o]===null)return;const g=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&u!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(u!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,u){const f=String(u),g=Tt({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const x=this.deletedStates[o][u];if(x===null)return{};for(const C in x)delete g[C]}return g}initializeTileState(o,u){o.setFeatureState(this.state,u)}coalesceChanges(o,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),Tt(this.state[g][C],this.stateChanges[g][C]),x[C]=this.state[g][C];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const C in this.state[g])x[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else if(this.state[g][C])for(const A of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][A];x[C]=this.state[g][C]}f[g]=f[g]||{},Tt(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in o)o[g].setFeatureState(f,u)}}class HP{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,u){const f=this.toIdx(o,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,u){return this.leaves[this.toIdx(o,u)]}toIdx(o,u){return u*this.size+o}}function GP(l,o,u,f){let g=0,x=Number.MAX_VALUE;for(let C=0;C<3;C++)if(Math.abs(f[C])<1e-15){if(u[C]<l[C]||u[C]>o[C])return null}else{const A=1/f[C];let B=(l[C]-u[C])*A,$=(o[C]-u[C])*A;if(B>$){const Y=B;B=$,$=Y}if(B>g&&(g=B),$<x&&(x=$),g>x)return null}return g}function WP(l,o,u,f,g,x,C,A,B,$,Y){const J=f-l,se=g-o,he=x-u,me=C-l,xe=A-o,Le=B-u,Ze=Y[1]*Le-Y[2]*xe,st=Y[2]*me-Y[0]*Le,qe=Y[0]*xe-Y[1]*me,rt=J*Ze+se*st+he*qe;if(Math.abs(rt)<1e-15)return null;const ht=1/rt,at=$[0]-l,$t=$[1]-o,Lt=$[2]-u,Kt=(at*Ze+$t*st+Lt*qe)*ht;if(Kt<0||Kt>1)return null;const mi=$t*he-Lt*se,Ut=Lt*J-at*he,ii=at*se-$t*J,ri=(Y[0]*mi+Y[1]*Ut+Y[2]*ii)*ht;return ri<0||Kt+ri>1?null:(me*mi+xe*Ut+Le*ii)*ht}function qP(l,o,u){return(l-o)/(u-o)}function ZP(l,o,u,f,g,x,C,A,B){const $=1<<u,Y=x-f,J=C-g,se=(l+1)/$*Y+f,he=(o+0)/$*J+g,me=(o+1)/$*J+g;A[0]=(l+0)/$*Y+f,A[1]=he,B[0]=se,B[1]=me}class YP{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(x){const C=Math.ceil(Math.log2(x.dim/8)),A=[];let B=Math.ceil(Math.pow(2,C));const $=1/B,Y=(he,me,xe,Le,Ze)=>{const st=Le?1:0,qe=(he+1)*xe-st,rt=me*xe,ht=(me+1)*xe-st;Ze[0]=he*xe,Ze[1]=rt,Ze[2]=qe,Ze[3]=ht};let J=new HP(B);const se=[];for(let he=0;he<B*B;he++){Y(he%B,Math.floor(he/B),$,!1,se);const me=lf(se[0],se[1],x),xe=lf(se[2],se[1],x),Le=lf(se[2],se[3],x),Ze=lf(se[0],se[3],x);J.minimums.push(Math.min(me,xe,Le,Ze)),J.maximums.push(Math.max(me,xe,Le,Ze)),J.leaves.push(1)}for(A.push(J),B/=2;B>=1;B/=2){const he=A[A.length-1];J=new HP(B);for(let me=0;me<B*B;me++){Y(me%B,Math.floor(me/B),2,!0,se);const xe=he.getElevation(se[0],se[1]),Le=he.getElevation(se[2],se[1]),Ze=he.getElevation(se[2],se[3]),st=he.getElevation(se[0],se[3]),qe=he.isLeaf(se[0],se[1]),rt=he.isLeaf(se[2],se[1]),ht=he.isLeaf(se[2],se[3]),at=he.isLeaf(se[0],se[3]),$t=Math.min(xe.min,Le.min,Ze.min,st.min),Lt=Math.max(xe.max,Le.max,Ze.max,st.max),Kt=qe&&rt&&ht&&at;J.maximums.push(Lt),J.minimums.push($t),J.leaves.push(Lt-$t<=5&&Kt?1:0)}A.push(J)}return A}(this.dem),f=u.length-1,g=u[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(o,u,f,g,x,C,A=1){return GP([o,u,-100],[f,g,this.maximums[0]*A],x,C)}raycast(o,u,f,g,x,C,A=1){if(!this.nodeCount)return null;const B=this.raycastRoot(o,u,f,g,x,C,A);if(B==null)return null;const $=[],Y=[],J=[],se=[],he=[{idx:0,t:B,nodex:0,nodey:0,depth:0}];for(;he.length>0;){const{idx:me,t:xe,nodex:Le,nodey:Ze,depth:st}=he.pop();if(this.leaves[me]){ZP(Le,Ze,st,o,u,f,g,J,se);const rt=1<<st,ht=(Le+0)/rt,at=(Le+1)/rt,$t=(Ze+0)/rt,Lt=(Ze+1)/rt,Kt=lf(ht,$t,this.dem)*A,mi=lf(at,$t,this.dem)*A,Ut=lf(at,Lt,this.dem)*A,ii=lf(ht,Lt,this.dem)*A,ri=WP(J[0],J[1],Kt,se[0],J[1],mi,se[0],se[1],Ut,x,C),di=WP(se[0],se[1],Ut,J[0],se[1],ii,J[0],J[1],Kt,x,C),vi=Math.min(ri!==null?ri:Number.MAX_VALUE,di!==null?di:Number.MAX_VALUE);if(vi!==Number.MAX_VALUE)return vi;{const Ht=y_([],x,C,xe);if(XP(Kt,mi,ii,Ut,qP(Ht[0],J[0],se[0]),qP(Ht[1],J[1],se[1]))>=Ht[2])return xe}continue}let qe=0;for(let rt=0;rt<this._siblingOffset.length;rt++){ZP((Le<<1)+this._siblingOffset[rt][0],(Ze<<1)+this._siblingOffset[rt][1],st+1,o,u,f,g,J,se),J[2]=-100,se[2]=this.maximums[this.childOffsets[me]+rt]*A;const ht=GP(J,se,x,C);if(ht!=null){const at=ht;$[rt]=at;let $t=!1;for(let Lt=0;Lt<qe&&!$t;Lt++)at>=$[Y[Lt]]&&(Y.splice(Lt,0,rt),$t=!0);$t||(Y[qe]=rt),qe++}}for(let rt=0;rt<qe;rt++){const ht=Y[rt];he.push({idx:this.childOffsets[me]+ht,t:$[ht],nodex:(Le<<1)+this._siblingOffset[ht][0],nodey:(Ze<<1)+this._siblingOffset[ht][1],depth:st+1})}}return null}_addNode(o,u,f){return this.minimums.push(o),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,u,f,g,x){if(o[g].isLeaf(u,f)===1)return;this.childOffsets[x]||(this.childOffsets[x]=this.nodeCount);const C=g-1,A=o[C];let B=0,$=0;for(let Y=0;Y<this._siblingOffset.length;Y++){const J=2*u+this._siblingOffset[Y][0],se=2*f+this._siblingOffset[Y][1],he=A.getElevation(J,se),me=A.isLeaf(J,se),xe=this._addNode(he.min,he.max,me);me&&(B|=1<<Y),$||($=xe)}for(let Y=0;Y<this._siblingOffset.length;Y++)B&1<<Y||this._construct(o,2*u+this._siblingOffset[Y][0],2*f+this._siblingOffset[Y][1],C,$+Y)}}function XP(l,o,u,f,g,x){return kn(kn(l,u,x),kn(o,f,x),g)}function lf(l,o,u){const f=u.dim,g=Ee(l*f-.5,0,f-1),x=Ee(o*f-.5,0,f-1),C=Math.floor(g),A=Math.floor(x),B=Math.min(C+1,f-1),$=Math.min(A+1,f-1);return XP(u.get(C,A),u.get(B,A),u.get(C,$),u.get(B,$),g-C,x-A)}const KP={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function T9(l,o,u){return(256*l*256+256*o+u)/10-1e4}function S9(l,o,u){return 256*l+o+u/256-32768}class $0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,u,f,g=!1,x=!1){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return Ve(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const C=this.dim=u.height-2,A=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let B=0;B<C;B++)A[this._idx(-1,B)]=A[this._idx(0,B)],A[this._idx(C,B)]=A[this._idx(C-1,B)],A[this._idx(B,-1)]=A[this._idx(B,0)],A[this._idx(B,C)]=A[this._idx(B,C-1)];A[this._idx(-1,-1)]=A[this._idx(0,0)],A[this._idx(C,-1)]=A[this._idx(C-1,0)],A[this._idx(-1,C)]=A[this._idx(0,C-1)],A[this._idx(C,C)]=A[this._idx(C-1,C-1)],x&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new YP(this)}get(o,u,f=!1){f&&(o=Ee(o,-1,this.dim),u=Ee(u,-1,this.dim));const g=4*this._idx(o,u);return(this.encoding==="terrarium"?S9:T9)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return KP[o]}get unpackVector(){return KP[this.encoding]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}static pack(o,u){const f=[0,0,0,0],g=$0.getUnpackVector(u);let x=Math.floor((o+g[3])/g[2]);return f[2]=x%256,x=Math.floor(x/256),f[1]=x%256,x=Math.floor(x/256),f[0]=x,f}getPixels(){return new du({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,u,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,x=u*this.dim+this.dim,C=f*this.dim,A=f*this.dim+this.dim;switch(u){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:C=A-1;break;case 1:A=C+1}const B=-u*this.dim,$=-f*this.dim;for(let Y=C;Y<A;Y++)for(let J=g;J<x;J++){const se=4*this._idx(J,Y),he=4*this._idx(J+B,Y+$);this.pixels[se+0]=o.pixels[he+0],this.pixels[se+1]=o.pixels[he+1],this.pixels[se+2]=o.pixels[he+2],this.pixels[se+3]=o.pixels[he+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}wi($0,"DEMData"),wi(YP,"DemMinMaxQuadTree",{omit:["dem"]});class C9{constructor(o,u){this.max=o,this.onRemove=u,this.reset()}reset(){for(const o in this.data)for(const u of this.data[o])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(o,u,f){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(o,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const u=this.data[o].shift();return u.timeout&&clearTimeout(u.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),u.value}getByKey(o){const u=this.data[o];return u?u[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,u){if(!this.has(o))return this;const f=o.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(o){const u=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class Im{constructor(o,u,f){this.func=o,this.mask=u,this.range=f}}Im.ReadOnly=!1,Im.ReadWrite=!0,Im.disabled=new Im(519,Im.ReadOnly,[0,1]);const Zw=7680;class Yw{constructor(o,u,f,g,x,C){this.test=o,this.ref=u,this.mask=f,this.fail=g,this.depthFail=x,this.pass=C}}Yw.disabled=new Yw({func:519,mask:0},0,0,Zw,Zw,Zw);class Id{constructor(o,u,f){this.blendFunction=o,this.blendColor=u,this.mask=f}}Id.Replace=[1,0],Id.disabled=new Id(Id.Replace,br.transparent,[!1,!1,!1,!1]),Id.unblended=new Id(Id.Replace,br.transparent,[!0,!0,!0,!0]),Id.alphaBlended=new Id([1,771],br.transparent,[!0,!0,!0,!0]);const Xw=1029,Kw=2305;class Zc{constructor(o,u,f){this.enable=o,this.mode=u,this.frontFace=f}}Zc.disabled=new Zc(!1,Xw,Kw),Zc.backCCW=new Zc(!0,Xw,Kw),Zc.backCW=new Zc(!0,Xw,2304),Zc.frontCW=new Zc(!0,1028,2304),Zc.frontCCW=new Zc(!0,1028,Kw);class cp extends $o{constructor(o,u,f){super(),this.id=o,this._onlySymbols=f,u.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new C9(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new w9,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const u=this._tiles[o];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,u){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,u)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return ft(this._tiles).map(o=>o.tileID).sort(QP).map(o=>o.key)}getRenderableIds(o){const u=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&u.push(this._tiles[f]);return o?u.sort((f,g)=>{const x=f.tileID,C=g.tileID,A=new ie(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),B=new ie(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-C.overscaledZ||B.y-A.y||B.x-A.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(QP).map(f=>f.key)}hasRenderableParent(o){const u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,u){const f=this._tiles[o];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,o,u)))}_tileLoaded(o,u,f,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new ya(g,{tile:o}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const x=this.map.painter.terrain;this.update(this.transform,x.getScaledDemTileSize(),!0),x.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=Ln.now(),f==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new er("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(o.neighboringTiles&&o.neighboringTiles[x]){const C=this.getTileByID(x);f(o,C),f(C,o)}}function f(g,x){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let C=x.tileID.canonical.x-g.tileID.canonical.x;const A=x.tileID.canonical.y-g.tileID.canonical.y,B=Math.pow(2,g.tileID.canonical.z),$=x.tileID.key;C===0&&A===0||Math.abs(A)>1||(Math.abs(C)>1&&(Math.abs(C+B)===1?C+=B:Math.abs(C-B)===1&&(C-=B)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,C,A),g.neighboringTiles&&g.neighboringTiles[$]&&(g.neighboringTiles[$].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,u,f,g){for(const x in this._tiles){let C=this._tiles[x];if(g[x]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>f)continue;let A=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const $=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[$.key],C&&C.hasData()&&(A=$)}let B=A;for(;B.overscaledZ>u;)if(B=B.scaledTo(B.overscaledZ-1),o[B.key]){g[A.key]=A;break}}}findLoadedParent(o,u){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=o.overscaledZ-1;f>=u;f--){const g=o.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(o){const u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,u){u=u||this._source.tileSize;const f=Math.ceil(o.width/u)+1,g=Math.ceil(o.height/u)+1,x=Math.floor(f*g*5),C=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,x):x,A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(A)}handleWrapJump(o){const u=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,u){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,u,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(A=>new nl(A.canonical.z,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y)):(g=o.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter(A=>this._source.hasTile(A)))):g=[];const x=this._updateRetainedTiles(g);if(JP(this._source.type)&&g.length!==0){const A={},B={},$=Object.keys(x);for(const J of $){const se=x[J],he=this._tiles[J];if(!he||he.fadeEndTime&&he.fadeEndTime<=Ln.now())continue;const me=this.findLoadedParent(se,Math.max(se.overscaledZ-cp.maxOverzooming,this._source.minzoom));me&&(this._addTile(me.tileID),A[me.tileID.key]=me.tileID),B[J]=se}const Y=g[g.length-1].overscaledZ;for(const J in this._tiles){const se=this._tiles[J];if(x[J]||!se.hasData())continue;let he=se.tileID;for(;he.overscaledZ>Y;){he=he.scaledTo(he.overscaledZ-1);const me=this._tiles[he.key];if(me&&me.hasData()&&B[he.key]){x[J]=se.tileID;break}}}for(const J in A)x[J]||(this._coveredTiles[J]=!0,x[J]=A[J])}for(const A in x)this._tiles[A].clearFadeHold();const C=function(A,B){const $=[];for(const Y in A)Y in B||$.push(Y);return $}(this._tiles,x);for(const A of C){const B=this._tiles[A];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(+A)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const u={};if(o.length===0)return u;const f={},g=o.reduce(($,Y)=>Math.min($,Y.overscaledZ),1/0),x=o[0].overscaledZ,C=Math.max(x-cp.maxOverzooming,this._source.minzoom),A=Math.max(x+cp.maxUnderzooming,this._source.minzoom),B={};for(const $ of o){const Y=this._addTile($);u[$.key]=$,Y.hasData()||g<this._source.maxzoom&&(B[$.key]=$)}this._retainLoadedChildren(B,g,A,u);for(const $ of o){let Y=this._tiles[$.key];if(Y.hasData())continue;if($.canonical.z>=this._source.maxzoom){const se=$.children(this._source.maxzoom)[0],he=this.getTile(se);if(he&&he.hasData()){u[se.key]=se;continue}}else{const se=$.children(this._source.maxzoom);if(u[se[0].key]&&u[se[1].key]&&u[se[2].key]&&u[se[3].key])continue}let J=Y.wasRequested();for(let se=$.overscaledZ-1;se>=C;--se){const he=$.scaledTo(se);if(f[he.key]||(f[he.key]=!0,Y=this.getTile(he),!Y&&J&&(Y=this._addTile(he)),Y&&(u[he.key]=he,J=Y.wasRequested(),Y.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const u=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of u)this._loadedParentTiles[x]=f}}_addTile(o){let u=this._tiles[o.key];if(u)return u;u=this._cache.getAndRemove(o),u&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));const f=!!u;if(!f){const g=this.map?this.map.painter:null;u=new qw(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,o.key,u.state))}return u?(u.uses++,this._tiles[o.key]=u,f||this._source.fire(new er("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(o,u){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=u.getExpiryTimeout();f&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},f))}_removeTile(o){const u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,u,f){const g=[],x=this.transform;if(!x)return g;const C=x.projection.name==="globe",A=Td(x.center.lng);for(const B in this._tiles){const $=this._tiles[B];if(f&&$.clearQueryDebugViz(),$.holdingForFade())continue;let Y;if(C){const J=$.tileID.canonical;if(J.z===0){const se=[Math.abs(Ee(A,...H_(J,-1))-A),Math.abs(Ee(A,...H_(J,1))-A)];Y=[0,2*se.indexOf(Math.min(...se))-1]}else{const se=[Math.abs(Ee(A,...H_(J,-1))-A),Math.abs(Ee(A,...H_(J,0))-A),Math.abs(Ee(A,...H_(J,1))-A)];Y=[se.indexOf(Math.min(...se))-1]}}else Y=[0];for(const J of Y){const se=o.containsTile($,x,u,J);se&&g.push(se)}}return g}getVisibleCoordinates(o){const u=this.getRenderableIds(o).map(f=>this._tiles[f].tileID);for(const f of u)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(JP(this._source.type))for(const o in this._tiles){const u=this._tiles[o];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=Ln.now())return!0}return!1}setFeatureState(o,u,f){this._state.updateState(o=o||"_geojsonTileLayer",u,f)}removeFeatureState(o,u,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,f)}getFeatureState(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)}setDependencies(o,u,f){const g=this._tiles[o];g&&g.setDependencies(u,f)}reloadTilesForDependencies(o,u){for(const f in this._tiles)this._tiles[f].hasDependency(o,u)&&this._reloadTile(+f,"reloading");this._cache.filter(f=>!f.hasDependency(o,u))}_preloadTiles(o,u){const f=new Map,g=Array.isArray(o)?o:[o],x=this.map.painter.terrain,C=this.usedForTerrain&&x?x.getScaledDemTileSize():this._source.tileSize;for(const A of g){const B=A.coveringTiles({tileSize:C,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const $ of B)f.set($.key,$);this.usedForTerrain&&A.updateElevation(!1)}nt(Array.from(f.values()),(A,B)=>{const $=new qw(A,this._source.tileSize*A.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile($,Y=>{this._source.type==="raster-dem"&&$.dem&&this._backfillDEM($),B(Y,$)})},u)}}function QP(l,o){const u=Math.abs(2*l.wrap)-+(l.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return l.overscaledZ-o.overscaledZ||f-u||o.canonical.y-l.canonical.y||o.canonical.x-l.canonical.x}function JP(l){return l==="raster"||l==="image"||l==="video"||l==="custom"}function H_(l,o){const u=1<<l.z;return[l.x/u+o,(l.x+1)/u+o]}cp.maxOverzooming=10,cp.maxUnderzooming=3;class N0{constructor(o,u,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(o,u,f){const g=f||o.findDEMTileFor(u);if(!g||!g.dem)return;const x=g.dem,C=g.tileID,A=1<<u.canonical.z-C.canonical.z;return new N0(g,g.tileSize/mn/A,[(u.canonical.x/A-C.canonical.x)*x.dim,(u.canonical.y/A-C.canonical.y)*x.dim])}tileCoordToPixel(o,u){const f=u*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),x=Math.floor(f);return new ie(g,x)}getElevationAt(o,u,f,g){const x=o*this._scale+this._offset[0],C=u*this._scale+this._offset[1],A=Math.floor(x),B=Math.floor(C),$=this._dem;return g=!!g,f?kn(kn($.get(A,B,g),$.get(A,B+1,g),C-B),kn($.get(A+1,B,g),$.get(A+1,B+1,g),C-B),x-A):$.get(A,B,g)}getElevationAtPixel(o,u,f){return this._dem.get(o,u,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*qc(1,o)*this._dem.stride}}class eA{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Jt(mn,16,0),this.featureIndexArray=new HE,this.promoteId=u}insert(o,u,f,g,x,C=0){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x,C);const B=this.grid;for(let $=0;$<u.length;$++){const Y=u[$],J=[1/0,1/0,-1/0,-1/0];for(let se=0;se<Y.length;se++){const he=Y[se];J[0]=Math.min(J[0],he.x),J[1]=Math.min(J[1],he.y),J[2]=Math.max(J[2],he.x),J[3]=Math.max(J[3],he.y)}J[0]<mn&&J[1]<mn&&J[2]>=0&&J[3]>=0&&B.insert(A,J[0],J[1],J[2],J[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ow(new B_(this.rawTileData)).layers,this.sourceLayerCoder=new NP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,u,f,g){this.loadVTLayers();const x=o.params||{},C=X(x.filter),A=o.tileResult,B=o.transform,$=A.bufferedTilespaceBounds,Y=this.grid.query($.min.x,$.min.y,$.max.x,$.max.y,(me,xe,Le,Ze)=>II(A.bufferedTilespaceGeometry,me,xe,Le,Ze));Y.sort(k9);let J=null;B.elevation&&Y.length>0&&(J=N0.create(B.elevation,this.tileID));const se={};let he;for(let me=0;me<Y.length;me++){const xe=Y[me];if(xe===he)continue;he=xe;const Le=this.featureIndexArray.get(xe);let Ze=null;this.loadMatchingFeature(se,Le,C,x.layers,x.availableImages,u,f,g,(st,qe,rt,ht=0)=>(Ze||(Ze=ah(st,this.tileID.canonical,o.tileTransform)),qe.queryIntersectsFeature(A,st,rt,Ze,this.z,o.transform,o.pixelPosMatrix,J,ht)))}return se}loadMatchingFeature(o,u,f,g,x,C,A,B,$){const{featureIndex:Y,bucketIndex:J,sourceLayerIndex:se,layoutVertexArrayOffset:he}=u,me=this.bucketLayerIDs[J];if(g&&!function(st,qe){for(let rt=0;rt<st.length;rt++)if(qe.indexOf(st[rt])>=0)return!0;return!1}(g,me))return;const xe=this.sourceLayerCoder.decode(se),Le=this.vtLayers[xe].feature(Y);if(f.needGeometry){const st=op(Le,!0);if(!f.filter(new It(this.tileID.overscaledZ),st,this.tileID.canonical))return}else if(!f.filter(new It(this.tileID.overscaledZ),Le))return;const Ze=this.getId(Le,xe);for(let st=0;st<me.length;st++){const qe=me[st];if(g&&g.indexOf(qe)<0)continue;const rt=C[qe];if(!rt)continue;let ht={};Ze!==void 0&&B&&(ht=B.getState(rt.sourceLayer||"_geojsonTileLayer",Ze));const at=Tt({},A[qe]);at.paint=tA(at.paint,rt.paint,Le,ht,x),at.layout=tA(at.layout,rt.layout,Le,ht,x);const $t=!$||$(Le,rt,ht,he);if(!$t)continue;const Lt=new zP(Le,this.z,this.x,this.y,Ze);Lt.layer=at;let Kt=o[qe];Kt===void 0&&(Kt=o[qe]=[]),Kt.push({featureIndex:Y,feature:Lt,intersectionZ:$t})}}lookupSymbolFeatures(o,u,f,g,x,C,A,B){const $={};this.loadVTLayers();const Y=X(x);for(const J of o)this.loadMatchingFeature($,{bucketIndex:f,sourceLayerIndex:g,featureIndex:J,layoutVertexArrayOffset:0},Y,C,A,B,u);return $}loadFeature(o){const{featureIndex:u,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),x=this.vtFeatures[g];if(x[u])return x[u];const C=this.vtLayers[g].feature(u);return x[u]=C,C}hasLayer(o){for(const u of this.bucketLayerIDs)for(const f of u)if(o===f)return!0;return!1}getId(o,u){let f=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];g!=null&&(f=o.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function tA(l,o,u,f,g){return Xt(l,(x,C)=>{const A=o instanceof Ft?o.get(C):null;return A&&A.evaluate?A.evaluate(u,f,g):A})}function k9(l,o){return o-l}wi(eA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class iA{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.image=new lh({width:o,height:u}),this.positions={},this.uploaded=!1}getDash(o,u){const f=this.getKey(o,u);return this.positions[f]}trim(){const o=this.width,u=this.height=Qt(this.nextRow);this.image.resize({width:o,height:u})}getKey(o,u){return o.join(",")+u}getDashRanges(o,u,f){const g=[];let x=o.length%2==1?-o[o.length-1]*f:0,C=o[0]*f,A=!0;g.push({left:x,right:C,isDash:A,zeroLength:o[0]===0});let B=o[0];for(let $=1;$<o.length;$++){A=!A;const Y=o[$];x=B*f,B+=Y,C=B*f,g.push({left:x,right:C,isDash:A,zeroLength:Y===0})}return g}addRoundDash(o,u,f){const g=u/2;for(let x=-f;x<=f;x++){const C=this.width*(this.nextRow+f+x);let A=0,B=o[A];for(let $=0;$<this.width;$++){$/B.right>1&&(B=o[++A]);const Y=Math.abs($-B.left),J=Math.abs($-B.right),se=Math.min(Y,J);let he;const me=x/f*(g+1);if(B.isDash){const xe=g-Math.abs(me);he=Math.sqrt(se*se+xe*xe)}else he=g-Math.sqrt(se*se+me*me);this.image.data[C+$]=Math.max(0,Math.min(255,he+128))}}}addRegularDash(o,u){for(let B=o.length-1;B>=0;--B){const $=o[B],Y=o[B+1];$.zeroLength?o.splice(B,1):Y&&Y.isDash===$.isDash&&(Y.left=$.left,o.splice(B,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const x=this.width*this.nextRow;let C=0,A=o[C];for(let B=0;B<this.width;B++){B/A.right>1&&(A=o[++C]);const $=Math.abs(B-A.left),Y=Math.abs(B-A.right),J=Math.min($,Y);this.image.data[x+B]=Math.max(0,Math.min(255,(A.isDash?J:-J)+u+128))}}addDash(o,u){const f=this.getKey(o,u);if(this.positions[f])return this.positions[f];const g=u==="round",x=g?7:0,C=2*x+1;if(this.nextRow+C>this.height)return Ve("LineAtlas out of space"),null;o.length===0&&o.push(1);let A=0;for(let Y=0;Y<o.length;Y++)o[Y]<0&&(Ve("Negative value is found in line dasharray, replacing values with 0"),o[Y]=0),A+=o[Y];if(A!==0){const Y=this.width/A,J=this.getDashRanges(o,this.width,Y);g?this.addRoundDash(J,Y,x):this.addRegularDash(J,u==="square"?.5*Y:0)}const B=this.nextRow+x;this.nextRow+=C;const $={tl:[B,x],br:[A,0]};return this.positions[f]=$,$}}wi(iA,"LineAtlas");class nA{constructor(o){const u={},f=[];for(const A in o){const B=o[A],$=u[A]={};for(const Y in B.glyphs){const J=B.glyphs[+Y];if(!J||J.bitmap.width===0||J.bitmap.height===0)continue;const se=J.metrics.localGlyph?2:1,he={x:0,y:0,w:J.bitmap.width+2*se,h:J.bitmap.height+2*se};f.push(he),$[Y]=he}}const{w:g,h:x}=Rw(f),C=new lh({width:g||1,height:x||1});for(const A in o){const B=o[A];for(const $ in B.glyphs){const Y=B.glyphs[+$];if(!Y||Y.bitmap.width===0||Y.bitmap.height===0)continue;const J=u[A][$],se=Y.metrics.localGlyph?2:1;lh.copy(Y.bitmap,C,{x:0,y:0},{x:J.x+se,y:J.y+se},Y.bitmap)}}this.image=C,this.positions=u}}wi(nA,"GlyphAtlas");class E9{constructor(o){this.tileID=new nl(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=up(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,u,f,g,x){this.status="parsing",this.data=o,this.collisionBoxArray=new ew;const C=new NP(Object.keys(o.layers).sort()),A=new eA(this.tileID,this.promoteId);A.bucketLayerIDs=[];const B={},$=new iA(256,256),Y={featureIndex:A,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:$,availableImages:f},J=u.familiesBySource[this.source];for(const ht in J){const at=o.layers[ht];if(!at)continue;let $t=!1,Lt=!1;for(const Ut of J[ht])Ut[0].type==="symbol"?$t=!0:Lt=!0;if(this.isSymbolTile===!0&&!$t||this.isSymbolTile===!1&&!Lt)continue;at.version===1&&Ve(`Vector tile source "${this.source}" layer "${ht}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Kt=C.encode(ht),mi=[];for(let Ut=0;Ut<at.length;Ut++){const ii=at.feature(Ut),ri=A.getId(ii,ht);mi.push({feature:ii,id:ri,index:Ut,sourceLayerIndex:Kt})}for(const Ut of J[ht]){const ii=Ut[0];this.isSymbolTile!==void 0&&ii.type==="symbol"!==this.isSymbolTile||ii.minzoom&&this.zoom<Math.floor(ii.minzoom)||ii.maxzoom&&this.zoom>=ii.maxzoom||ii.visibility!=="none"&&(Qw(Ut,this.zoom,f),(B[ii.id]=ii.createBucket({index:A.bucketLayerIDs.length,layers:Ut,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Kt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(mi,Y,this.tileID.canonical,this.tileTransform),A.bucketLayerIDs.push(Ut.map(ri=>ri.id)))}}let se,he,me,xe;$.trim();const Le={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ze=Xt(Y.glyphDependencies,ht=>Object.keys(ht).map(Number));Object.keys(Ze).length?g.send("getGlyphs",{uid:this.uid,stacks:Ze},(ht,at)=>{se||(se=ht,he=at,rt.call(this))},void 0,!1,Le):he={};const st=Object.keys(Y.iconDependencies);st.length?g.send("getImages",{icons:st,source:this.source,tileID:this.tileID,type:"icons"},(ht,at)=>{se||(se=ht,me=at,rt.call(this))},void 0,!1,Le):me={};const qe=Object.keys(Y.patternDependencies);function rt(){if(se)return x(se);if(he&&me&&xe){const ht=new nA(he),at=new hP(me,xe);for(const $t in B){const Lt=B[$t];Lt instanceof sf?(Qw(Lt.layers,this.zoom,f),Jz(Lt,he,ht.positions,me,at.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):Lt.hasPattern&&(Lt instanceof T0||Lt instanceof v0||Lt instanceof O_)&&(Qw(Lt.layers,this.zoom,f),Lt.addFeatures(Y,this.tileID.canonical,at.patternPositions,f,this.tileTransform))}this.status="done",x(null,{buckets:ft(B).filter($t=>!$t.isEmpty()),featureIndex:A,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ht.image,lineAtlas:$,imageAtlas:at,glyphMap:this.returnDependencies?he:null,iconMap:this.returnDependencies?me:null,glyphPositions:this.returnDependencies?ht.positions:null})}}qe.length?g.send("getImages",{icons:qe,source:this.source,tileID:this.tileID,type:"patterns"},(ht,at)=>{se||(se=ht,xe=at,rt.call(this))},void 0,!1,Le):xe={},rt.call(this)}}function Qw(l,o,u){const f=new It(o);for(const g of l)g.recalculate(f,u)}class rA{constructor(o){this.entries={},this.scheduler=o}request(o,u,f,g){const x=this.entries[o]=this.entries[o]||{callbacks:[]};if(x.result){const[C,A]=x.result;return this.scheduler?this.scheduler.add(()=>{g(C,A)},u):g(C,A),()=>{}}return x.callbacks.push(g),x.cancel||(x.cancel=f((C,A)=>{x.result=[C,A];for(const B of x.callbacks)this.scheduler?this.scheduler.add(()=>{B(C,A)},u):B(C,A);setTimeout(()=>delete this.entries[o],3e3)})),()=>{x.result||(x.callbacks=x.callbacks.filter(C=>C!==g),x.callbacks.length||(x.cancel(),delete this.entries[o]))}}}function sA(l,o,u){const f=JSON.stringify(l.request);return l.data&&(this.deduped.entries[f]={result:[null,l.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},g=>{const x=yr(l.request,(C,A,B,$)=>{C?g(C):A&&g(null,{vectorTile:u?void 0:new Ow(new B_(A)),rawData:A,cacheControl:B,expires:$})});return()=>{x.cancel(),g()}},o)}s.ARRAY_TYPE=cu,s.AUTH_ERR_MSG=Is,s.Aabb=il,s.Actor=class{constructor(l,o,u){this.target=l,this.parent=o,this.mapId=u,this.callbacks={},this.cancelCallbacks={},tt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Xe()?l:p,this.scheduler=new b9}send(l,o,u,f,g=!1,x){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=x,this.callbacks[C]=u);const A=At(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:l,hasCallback:!!u,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Ro(o,A)},A),{cancel:()=>{u&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(l){const o=l.data,u=o.id;if(u&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const f=this.cancelCallbacks[u];delete this.cancelCallbacks[u],f&&f.cancel()}else if(o.mustQueue||Xe()){const f=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,o),f&&f.metadata||{type:"message"})}else this.processTask(u,o)}processTask(l,o){if(o.type==="<response>"){const u=this.callbacks[l];delete this.callbacks[l],u&&(o.error?u(Aa(o.error)):u(null,Aa(o.data)))}else{const u=At(this.globalScope)?void 0:[],f=o.hasCallback?(x,C)=>{delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:x?Ro(x):null,data:Ro(C,u)},u)}:x=>{},g=Aa(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const x=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,x[0],g.source)[x[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=w0,s.Color=br,s.ColorMode=Id,s.CullFaceMode=Zc,s.DEMData=$0,s.DataConstantProperty=Et,s.DedupedRequest=rA,s.DepthMode=Im,s.EXTENT=mn,s.Elevation=class{isDataAvailableAtPoint(l){const o=this._source();if(this.isUsingMockSource()||!o||l.y<0||l.y>1)return!1;const u=o.getSource().maxzoom,f=1<<u,g=Math.floor(l.x),x=Math.floor((l.x-g)*f),C=Math.floor(l.y*f),A=this.findDEMTileFor(new nl(u,g,u,x,C));return!(!A||!A.dem)}getAtPointOrZero(l,o=0){return this.getAtPoint(l,o)||0}getAtPoint(l,o,u=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||l.y<0||l.y>1)return o;const g=f.getSource().maxzoom,x=1<<g,C=Math.floor(l.x),A=l.x-C,B=new nl(g,C,g,Math.floor(A*x),Math.floor(l.y*x)),$=this.findDEMTileFor(B);if(!$||!$.dem)return o;const Y=$.dem,J=1<<$.tileID.canonical.z,se=(A*J-$.tileID.canonical.x)*Y.dim,he=(l.y*J-$.tileID.canonical.y)*Y.dim,me=Math.floor(se),xe=Math.floor(he);return(u?this.exaggeration():1)*kn(kn(Y.get(me,xe),Y.get(me,xe+1),he-xe),kn(Y.get(me+1,xe),Y.get(me+1,xe+1),he-xe),se-me)}getAtTileOffset(l,o,u){const f=1<<l.canonical.z;return this.getAtPointOrZero(new mm(l.wrap+(l.canonical.x+o/mn)/f,(l.canonical.y+u/mn)/f))}getAtTileOffsetFunc(l,o,u,f){return g=>{const x=this.getAtTileOffset(l,g.x,g.y),C=f.upVector(l.canonical,g.x,g.y);return Nu(C,C,x*f.upVectorScale(l.canonical,o,u).metersToTile),C}}getForTilePoints(l,o,u,f){if(this.isUsingMockSource())return!1;const g=N0.create(this,l,f);return!!g&&(o.forEach(x=>{x[2]=this.exaggeration()*g.getElevationAt(x[0],x[1],u)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(l);if(!o||!o.dem)return null;const u=o.dem.tree,f=o.tileID,g=1<<l.canonical.z-f.canonical.z;let x=l.canonical.x/g-f.canonical.x,C=l.canonical.y/g-f.canonical.y,A=0;for(let B=0;B<l.canonical.z-f.canonical.z&&!u.leaves[A];B++){x*=2,C*=2;const $=2*Math.floor(C)+Math.floor(x);A=u.childOffsets[A]+$,x%=1,C%=1}return{min:this.exaggeration()*u.minimums[A],max:this.exaggeration()*u.maximums[A]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,o,u){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=ya,s.EvaluationParameters=It,s.Event=er,s.Evented=$o,s.FillExtrusionBucket=O_,s.Frustum=hw,s.FrustumCorners=dw,s.GLOBE_RADIUS=xd,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=6,s.GLOBE_ZOOM_THRESHOLD_MIN=5,s.GlobeSharedBuffers=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const l of this._wireframeSegments)l.destroy()}}_fillGridMeshWithLods(l,o){const u=new an,f=new ua,g=[],x=l+1+2,C=o[0]+1,A=o[0]+1+(1+o.length),B=($,Y,J)=>{let se=$===x-1?$-2:$===0?$:$-1;return se+=J?24575:0,[se,Y]};for(let $=0;$<x;++$)u.emplaceBack(...B($,0,!0));for(let $=0;$<C;++$)for(let Y=0;Y<x;++Y)u.emplaceBack(...B(Y,$,(Y===0||Y===x-1)&&!0));for(let $=0;$<o.length;++$){const Y=o[$];for(let J=0;J<x;++J)u.emplaceBack(...B(J,Y,!0))}for(let $=0;$<o.length;++$){const Y=f.length,J=o[$]+1+2,se=new ua;for(let xe=0;xe<J-1;xe++){const Le=xe===J-2,Ze=Le?x*(A-o.length+$-xe):x;for(let st=0;st<x-1;st++){const qe=xe*x+st;xe===0||Le||st===0||st===x-2?(se.emplaceBack(qe+1,qe,qe+Ze),se.emplaceBack(qe+Ze,qe+Ze+1,qe+1)):(f.emplaceBack(qe+1,qe,qe+Ze),f.emplaceBack(qe+Ze,qe+Ze+1,qe+1))}}const he=Gs.simpleSegment(0,Y,u.length,f.length-Y);for(let xe=0;xe<se.uint16.length;xe+=3)f.emplaceBack(se.uint16[xe],se.uint16[xe+1],se.uint16[xe+2]);const me=Gs.simpleSegment(0,Y,u.length,f.length-Y);g.push({withoutSkirts:he,withSkirts:me})}return{vertices:u,indices:f,segments:g}}_createGrid(l){const o=this._fillGridMeshWithLods(rp,w_);this._gridSegments=o.segments,this._gridBuffer=l.createVertexBuffer(o.vertices,x_.members),this._gridIndexBuffer=l.createIndexBuffer(o.indices,!0)}_createPoles(l){const o=new ua;for(let g=0;g<=rp;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=l.createIndexBuffer(o,!0);const u=new uu,f=new uu;this._poleSegments=[];for(let g=0,x=0;g<5;g++){const C=360/(1<<g);u.emplaceBack(0,-xd,0,.5,0),f.emplaceBack(0,-xd,0,.5,1);for(let A=0;A<=rp;A++){const B=A/rp,$=kn(0,C,B),[Y,J,se]=hm(bN,xN,$,xd);u.emplaceBack(Y,J,se,B,0),f.emplaceBack(Y,J,se,B,1)}this._poleSegments.push(Gs.simpleSegment(x,0,66,64)),x+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(u,cI,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(f,cI,!1)}getGridBuffers(l,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}getWirefameBuffers(l,o){if(!this._wireframeSegments){const u=new yd,f=rp,g=f+1+2,x=1;this._wireframeSegments=[];for(let C=0,A=0;C<w_.length;C++){const B=w_[C];for(let Y=x;Y<B+x;Y++)for(let J=x;J<f+x;J++){const se=Y*g+J;u.emplaceBack(se,se+1),u.emplaceBack(se,se+g),u.emplaceBack(se,se+g+1)}const $=B*f*3;this._wireframeSegments.push(Gs.simpleSegment(0,A,(B+1)*g,$)),A+=$}this._wireframeIndexBuffer=l.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},s.GlyphManager=Cm,s.ImagePosition=Bw,s.LivePerformanceUtils=jt,s.LngLat=rr,s.LngLatBounds=tf,s.LocalGlyphMode=Nw,s.MAX_MERCATOR_LATITUDE=da,s.MercatorCoordinate=mm,s.ONE_EM=ha,s.OverscaledTileID=nl,s.PerformanceMarkers=Pt,s.Properties=hi,s.RGBAImage=du,s.Ray=cw,s.RequestManager=class{constructor(l,o,u){this._transformRequestFn=l,this._customAccessToken=o,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const l=function(){let o="";for(let u=0;u<10;u++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",H,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,o){return this._transformRequestFn&&this._transformRequestFn(l,o)||{url:l}}normalizeStyleURL(l,o){if(!Xr(l))return l;const u=Fr(l);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||o)}normalizeGlyphsURL(l,o){if(!Xr(l))return l;const u=Fr(l);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||o)}normalizeSourceURL(l,o,u,f){if(!Xr(l))return l;const g=Fr(l);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),u&&g.params.push(`language=${u}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(l,o,u,f){const g=Fr(l);return Xr(l)?(g.path=`/styles/v1${g.path}/sprite${o}${u}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${u}`,ms(g))}normalizeTileURL(l,o,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!Xr(l))return l;const f=Fr(l);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||u&&f.authority!=="raster"&&u===512?"@2x":""}${E.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${S.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${S.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||function(x){for(const C of x){const A=C.match(/^access_token=(.*)$/);if(A)return A[1]}return null}(f.params)||S.ACCESS_TOKEN;return S.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(l,o){const u=Fr(l);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return l;let f="mapbox://";u.path.match(/^\/raster\/v1\//)?f+=`raster/${u.path.replace(`/${S.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${u.path.replace(`/${S.TILE_URL_VERSION}/`,"")}`;let g=u.params;return o&&(g=g.filter(x=>!x.match(/^access_token=/))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(l,o){const u=!!o&&Xr(o),f=[];for(const g of l.tiles||[])Fo(g)?f.push(this.canonicalizeTileURL(g,u)):f.push(g);return f}_makeAPIURL(l,o){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=Fr(S.API_URL);if(l.protocol=f.protocol,l.authority=f.authority,l.protocol==="http"){const g=l.params.indexOf("secure");g>=0&&l.params.splice(g,1)}if(f.path!=="/"&&(l.path=`${f.path}${l.path}`),!S.REQUIRE_ACCESS_TOKEN)return ms(l);if(o=o||S.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return l.params=l.params.filter(g=>g.indexOf("access_token")===-1),l.params.push(`access_token=${o||""}`),ms(l)}},s.ResourceType=sn,s.SegmentVector=Gs,s.SourceCache=cp,s.StencilMode=Yw,s.StructArrayLayout1ui2=bd,s.StructArrayLayout2f1f2i16=aa,s.StructArrayLayout2i4=an,s.StructArrayLayout2ui4=yd,s.StructArrayLayout3f12=la,s.StructArrayLayout3ui6=ua,s.StructArrayLayout4i8=mr,s.StructArrayLayout5f20=uu,s.Texture=j_,s.Tile=qw,s.Transitionable=Ti,s.Uniform1f=r0,s.Uniform1i=class extends rh{constructor(l){super(l),this.current=0}set(l,o,u){this.fetchUniformLocation(l,o)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},s.Uniform2f=class extends rh{constructor(l){super(l),this.current=[0,0]}set(l,o,u){this.fetchUniformLocation(l,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},s.Uniform3f=class extends rh{constructor(l){super(l),this.current=[0,0,0]}set(l,o,u){this.fetchUniformLocation(l,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},s.Uniform4f=ZE,s.UniformColor=YE,s.UniformMatrix2f=class extends rh{constructor(l){super(l),this.current=sN}set(l,o,u){if(this.fetchUniformLocation(l,o)){for(let f=0;f<4;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}},s.UniformMatrix3f=class extends rh{constructor(l){super(l),this.current=rN}set(l,o,u){if(this.fetchUniformLocation(l,o)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},s.UniformMatrix4f=class extends rh{constructor(l){super(l),this.current=nN}set(l,o,u){if(this.fetchUniformLocation(l,o)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let f=1;f<16;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},s.UnwrappedTileID=JI,s.ValidationError=Li,s.VectorTileFeature=b0,s.VectorTileWorkerSource=class extends $o{constructor(l,o,u,f,g){super(),this.actor=l,this.layerIndex=o,this.availableImages=u,this.loadVectorData=g||sA,this.loading={},this.loaded={},this.deduped=new rA(l.scheduler),this.isSpriteLoaded=f,this.scheduler=l.scheduler}loadTile(l,o){const u=l.uid,f=l&&l.request,g=f&&f.collectResourceTiming,x=this.loading[u]=new E9(l);x.abort=this.loadVectorData(l,(C,A)=>{const B=!this.loading[u];if(delete this.loading[u],B||C||!A)return x.status="done",B||(this.loaded[u]=x),o(C);const $=A.rawData,Y={};A.expires&&(Y.expires=A.expires),A.cacheControl&&(Y.cacheControl=A.cacheControl),x.vectorTile=A.vectorTile||new Ow(new B_($));const J=()=>{x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,he)=>{if(se||!he)return o(se);const me={};if(g){const xe=Ji(f);xe.length>0&&(me.resourceTiming=JSON.parse(JSON.stringify(xe)))}o(null,Tt({rawTileData:$.slice(0)},he,Y,me))})};this.isSpriteLoaded?J():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(J,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):J()}),this.loaded=this.loaded||{},this.loaded[u]=x})}reloadTile(l,o){const u=this.loaded,f=l.uid,g=this;if(u&&u[f]){const x=u[f];x.showCollisionBoxes=l.showCollisionBoxes,x.enableTerrain=!!l.enableTerrain,x.projection=l.projection,x.tileTransform=up(l.tileID.canonical,l.projection);const C=(A,B)=>{const $=x.reloadCallback;$&&(delete x.reloadCallback,x.parse(x.vectorTile,g.layerIndex,this.availableImages,g.actor,$)),o(A,B)};x.status==="parsing"?x.reloadCallback=C:x.status==="done"&&(x.vectorTile?x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,C):C())}}abortTile(l,o){const u=l.uid,f=this.loading[u];f&&(f.abort&&f.abort(),delete this.loading[u]),o()}removeTile(l,o){const u=this.loaded,f=l.uid;u&&u[f]&&delete u[f],o()}},s.WritingMode=Vu,s.ZoomDependentExpression=Pa,s.add=oh,s.addDynamicAttributes=R0,s.adjoint=function(l,o){var u=o[0],f=o[1],g=o[2],x=o[3],C=o[4],A=o[5],B=o[6],$=o[7],Y=o[8];return l[0]=C*Y-A*$,l[1]=g*$-f*Y,l[2]=f*A-g*C,l[3]=A*B-x*Y,l[4]=u*Y-g*B,l[5]=g*x-u*A,l[6]=x*$-C*B,l[7]=f*B-u*$,l[8]=u*C-f*x,l},s.asyncAll=nt,s.bezier=Oe,s.bindAll=tt,s.boundsAttributes=UP,s.bufferConvexPolygon=function(l,o){const u=[];for(let f=0;f<l.length;f++){const g=gt(f-1,-1,l.length-1),x=gt(f+1,-1,l.length-1),C=l[f],A=l[x],B=l[g].sub(C).unit(),$=A.sub(C).unit(),Y=$.angleWithSep(B.x,B.y),J=B.add($).unit().mult(-1*o/Math.sin(Y/2));u.push(C.add(J))}return u},s.cacheEntryPossiblyAdded=function(l){Si++,Si>Hi&&(l.getActor().send("enforceCacheSizeLimit",zi),Si=0)},s.calculateGlobeLabelMatrix=function(l,o){const{x:u,y:f}=l.point,g=gI(u,f,l.worldSize/l._pixelsPerMercatorPixel,0,0);return tp(g,g,mw(wd(o)))},s.calculateGlobeMatrix=function(l){const{x:o,y:u}=l.point,{lng:f,lat:g}=l._center;return gI(o,u,l.worldSize,f,g)},s.calculateGlobeMercatorMatrix=function(l){const o=l.pixelsPerMeter,u=o/qc(1,l.center.lat),f=Gc(new Float64Array(16));return m_(f,f,[l.point.x,l.point.y,0]),ip(f,f,[u,u,o]),Float32Array.from(f)},s.circumferenceAtLatitude=_w,s.clamp=Ee,s.clearTileCache=function(l){if(!Zi())return;const o=p.caches.delete(Yt);l&&o.catch(l).then(()=>l())},s.clipLine=SP,s.clone=function(l){var o=new cu(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},s.clone$1=Ni,s.collisionCircleLayout=Cz,s.config=S,s.conjugate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l[3]=o[3],l},s.create=function(){var l=new cu(16);return cu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},s.create$1=KE,s.createExpression=Il,s.createLayout=tn,s.createStyleLayer=function(l){return l.type==="custom"?new g9(l):new v9[l.type](l)},s.cross=uw,s.degToRad=fe,s.distance=function(l,o){return Math.hypot(o[0]-l[0],o[1]-l[1],o[2]-l[2])},s.div=function(l,o,u){return l[0]=o[0]/u[0],l[1]=o[1]/u[1],l[2]=o[2]/u[2],l},s.dot=vc,s.earthRadius=C_,s.ease=ke,s.easeCubicInOut=Ie,s.ecefToLatLng=function([l,o,u]){const f=Math.hypot(l,o,u),g=Math.atan2(l,u),x=.5*Math.PI-Math.acos(-o/f);return new rr(ge(g),ge(x))},s.emitValidationErrors=Vt,s.endsWith=Rt,s.enforceCacheSizeLimit=function(l){Ci(),gi&&gi.then(o=>{o.keys().then(u=>{for(let f=0;f<u.length-l;f++)o.delete(u[f])})})},s.evaluateSizeForFeature=S0,s.evaluateSizeForZoom=xm,s.evaluateVariableOffset=PP,s.evented=Je,s.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]},s.exactEquals$1=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]},s.exported=Ln,s.exported$1=E,s.extend=Tt,s.extend$1=Po,s.fillExtrusionHeightLift=XI,s.filterObject=Ei,s.fromMat4=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[4],l[4]=o[5],l[5]=o[6],l[6]=o[8],l[7]=o[9],l[8]=o[10],l},s.fromQuat=function(l,o){var u=o[0],f=o[1],g=o[2],x=o[3],C=u+u,A=f+f,B=g+g,$=u*C,Y=f*C,J=f*A,se=g*C,he=g*A,me=g*B,xe=x*C,Le=x*A,Ze=x*B;return l[0]=1-J-me,l[1]=Y+Ze,l[2]=se-Le,l[3]=0,l[4]=Y-Ze,l[5]=1-$-me,l[6]=he+xe,l[7]=0,l[8]=se+Le,l[9]=he-xe,l[10]=1-$-J,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},s.fromRotation=function(l,o){var u=Math.sin(o),f=Math.cos(o);return l[0]=f,l[1]=u,l[2]=0,l[3]=-u,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},s.fromScaling=JE,s.furthestTileCorner=function(l){const o=Math.round((l+45+360)%360/90)%4;return we[o]},s.getAABBPointSquareDist=function(l,o,u){let f=0;for(let g=0;g<2;++g){const x=u?u[g]:0;l[g]>x&&(f+=(l[g]-x)*(l[g]-x)),o[g]<x&&(f+=(x-o[g])*(x-o[g]))}return f},s.getAnchorAlignment=$w,s.getAnchorJustification=Vw,s.getBounds=function(l){let o=1/0,u=1/0,f=-1/0,g=-1/0;for(const x of l)o=Math.min(o,x.x),u=Math.min(u,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return{min:new ie(o,u),max:new ie(f,g)}},s.getColumn=Bt,s.getGridMatrix=function(l,o,u,f){const g=o.getNorth(),x=o.getSouth(),C=o.getWest(),A=o.getEast(),B=1<<l.z,$=A-C,Y=g-x,J=$/rp,se=-Y/w_[u],he=[0,J,0,se,0,0,g,C,0];if(l.z>0){const me=180/f;QE(he,he,[me/$+1,0,0,0,me/Y+1,0,-.5*me/J,.5*me/se,1])}return he[2]=B,he[5]=l.x,he[8]=l.y,he},s.getImage=An,s.getJSON=function(l,o){return Nn(Tt(l,{type:"json"}),o)},s.getLatitudinalLod=function(l){const o=da-5;l=Ee(l,-o,o)/o*90;const u=Math.pow(Math.abs(Math.sin(fe(l))),3);return Math.round(u*(w_.length-1))},s.getMapSessionAPI=St,s.getPerformanceMeasurement=Ji,s.getProjection=FP,s.getRTLTextPluginStatus=mt,s.getReferrer=hn,s.getTilePoint=function(l,{x:o,y:u},f=0){return new ie(((o-f)*l.scale-l.x)*mn,(u*l.scale-l.y)*mn)},s.getTileVec3=function(l,o,u=0){return dm(((o.x-u)*l.scale-l.x)*mn,(o.y*l.scale-l.y)*mn,bI(o.z,o.y))},s.getVideo=function(l,o){const u=p.document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let f=0;f<l.length;f++){const g=p.document.createElement("source");Mr(l[f])||(u.crossOrigin="Anonymous"),g.src=l[f],u.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(l){const o=[0,0,0],u=Gc(new Float64Array(16));return tp(u,l.pixelMatrix,l.globeMatrix),Ls(o,o,u),new ie(o[0],o[1])},s.globeDenormalizeECEF=mw,s.globeECEFOrigin=function(l,o){const u=[0,0,0];return Ls(u,u,S_(wd(o.canonical))),Ls(u,u,l),u},s.globeMetersToEcef=l0,s.globeNormalizeECEF=S_,s.globePixelsToTileUnits=function(l,o){return mn/(512*Math.pow(2,l))*c0(wd(o))},s.globePoleMatrixForTile=function(l,o,u){const f=Gc(new Float64Array(16)),g=(o/(1<<l)-.5)*Math.PI*2;return a0(f,u.globeMatrix,g),Float32Array.from(f)},s.globeTileBounds=wd,s.globeTiltAtLngLat=_I,s.globeToMercatorTransition=pm,s.globeUseCustomAntiAliasing=function(l,o,u){const f=pm(u.zoom),g=l.style.map._antialias,x=!!o.extStandardDerivatives,C=o.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return f===0&&!g&&!C&&x},s.identity=Gc,s.identity$1=aI,s.invert=sw,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=gw,s.isMapAuthenticated=function(l){return vt.has(l)},s.isMapboxURL=Xr,s.isSafariWithAntialiasingBug=function(l){const o=l.navigator?l.navigator.userAgent:null;return!!At(l)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=ca,s.latLngToECEF=fm,s.len=pN,s.length=g_,s.length$1=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},s.lngFromMercatorX=zu,s.loadVectorTile=sA,s.makeRequest=Nn,s.mapValue=function(l,o,u,f,g){return Ee((l-o)/(u-o)*(g-f)+f,f,g)},s.mercatorScale=xI,s.mercatorXfromLng=Td,s.mercatorYfromLat=Sd,s.mercatorZfromAltitude=qc,s.mul=hN,s.mul$1=fN,s.multiply=tp,s.multiply$1=QE,s.multiply$2=iI,s.nextPowerOfTwo=Qt,s.normalize=tl,s.normalize$1=mN,s.normalize$2=sI,s.number=kn,s.ortho=function(l,o,u,f,g,x,C){var A=1/(o-u),B=1/(f-g),$=1/(x-C);return l[0]=-2*A,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*B,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*$,l[11]=0,l[12]=(o+u)*A,l[13]=(g+f)*B,l[14]=(C+x)*$,l[15]=1,l},s.pbf=B_,s.perspective=function(l,o,u,f,g){var x,C=1/Math.tan(o/2);return l[0]=C/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=C,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0?(l[10]=(g+f)*(x=1/(f-g)),l[14]=2*g*f*x):(l[10]=-1,l[14]=-2*f),l},s.pick=function(l,o){const u={};for(let f=0;f<o.length;f++){const g=o[f];g in l&&(u[g]=l[g])}return u},s.plugin=xt,s.pointGeometry=ie,s.polesInViewport=function(l){const o=Gc(new Float64Array(16));tp(o,l.pixelMatrix,l.globeMatrix);const u=[0,yc,0],f=[0,bc,0];return Ls(u,u,o),Ls(f,f,o),[u[0]>0&&u[0]<=l.width&&u[1]>0&&u[1]<=l.height&&!gw(l,new rr(l.center.lat,90)),f[0]>0&&f[0]<=l.width&&f[1]>0&&f[1]<=l.height&&!gw(l,new rr(l.center.lat,-90))]},s.polygonContainsPoint=ap,s.polygonIntersectsBox=II,s.polygonIntersectsPolygon=SI,s.polygonizeBounds=function(l,o,u=0,f=!0){const g=new ie(u,u),x=l.sub(g),C=o.add(g),A=[x,new ie(C.x,x.y),C,new ie(x.x,C.y)];return f&&A.push(x.clone()),A},s.posAttributes=x_,s.postMapLoadEvent=ze,s.postPerformanceEvent=_t,s.postTurnstileEvent=_e,s.potpack=Rw,s.prevPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},s.radToDeg=ge,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(l){return l({pluginStatus:Ue,pluginURL:Ce}),Je.on("pluginStateChange",l),l},s.removeAuthState=function(l){vt.delete(l)},s.renderColorRamp=Cw,s.resample=wI,s.rotateX=ow,s.rotateX$1=lI,s.rotateY=a0,s.rotateY$1=uI,s.rotateZ=function(l,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[0],C=o[1],A=o[2],B=o[3],$=o[4],Y=o[5],J=o[6],se=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=x*g+$*f,l[1]=C*g+Y*f,l[2]=A*g+J*f,l[3]=B*g+se*f,l[4]=$*g-x*f,l[5]=Y*g-C*f,l[6]=J*g-A*f,l[7]=se*g-B*f,l},s.rotateZ$1=function(l,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],C=o[3],A=Math.sin(u),B=Math.cos(u);return l[0]=f*B+g*A,l[1]=g*B-f*A,l[2]=x*B+C*A,l[3]=C*B-x*A,l},s.scale=ip,s.scale$1=rI,s.scale$2=Nu,s.scaleAndAdd=y_,s.set=function(l,o,u,f){return l[0]=o,l[1]=u,l[2]=f,l},s.setCacheLimits=function(l,o){zi=l,Hi=o},s.setColumn=function(l,o,u){l[4*o+0]=u[0],l[4*o+1]=u[1],l[4*o+2]=u[2],l[4*o+3]=u[3]},s.setRTLTextPlugin=function(l,o,u=!1){if(Ue===Ae||Ue===Be||Ue===$e)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ce=Ln.resolveURL(l),Ue=Ae,Ne=o,Ye(),u||ut()},s.smoothstep=Qe,s.spec=Wt,s.squaredLength=function(l){var o=l[0],u=l[1],f=l[2];return o*o+u*u+f*f},s.storeAuthState=function(l,o){o?vt.add(l):vt.delete(l)},s.sub=Wc,s.subtract=lw,s.symbolSize=kz,s.tileAABB=function(l,o,u,f,g,x,C,A,B){if(B.name==="globe")return yN(l,o,new w0(u,f,g));const $=up({z:u,x:f,y:g},B);return new il([(x+$.x/$.scale)*o,o*($.y/$.scale),C],[(x+$.x2/$.scale)*o,o*($.y2/$.scale),A])},s.tileCornersToBounds=u0,s.tileTransform=up,s.transformMat3=function(l,o,u){var f=o[0],g=o[1],x=o[2];return l[0]=f*u[0]+g*u[3]+x*u[6],l[1]=f*u[1]+g*u[4]+x*u[7],l[2]=f*u[2]+g*u[5]+x*u[8],l},s.transformMat4=Ls,s.transformMat4$1=np,s.transformQuat=nI,s.transitionTileAABBinECEF=fI,s.translate=m_,s.transpose=function(l,o){if(l===o){var u=o[1],f=o[2],g=o[5];l[1]=o[3],l[2]=o[6],l[3]=u,l[5]=o[7],l[6]=f,l[7]=g}else l[0]=o[0],l[1]=o[3],l[2]=o[6],l[3]=o[1],l[4]=o[4],l[5]=o[7],l[6]=o[2],l[7]=o[5],l[8]=o[8];return l},s.triggerPluginCompletionEvent=Ke,s.uniqueId=et,s.updateGlobeVertexNormal=function(l,o,u,f,g){const x=5*o+2;l.float32[x+0]=u,l.float32[x+1]=f,l.float32[x+2]=g},s.validateCustomStyleLayer=function(l){const o=[],u=l.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),l.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateFilter=l=>ot(Ss(l)),s.validateFog=l=>ot(Yh(l)),s.validateLayer=l=>ot(au(l)),s.validateLight=l=>ot(Zh(l)),s.validateSource=l=>ot(Hr(l)),s.validateStyle=N,s.validateTerrain=l=>ot(nh(l)),s.values=ft,s.vectorTile=y0,s.version=_,s.warnOnce=Ve,s.window=p,s.wrap=gt}),a(["./shared"],function(s){function p(Ge){if(typeof Ge=="number"||typeof Ge=="boolean"||typeof Ge=="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){let Te="[";for(const ze of Ge)Te+=`${p(ze)},`;return`${Te}]`}let _e="{";for(const Te of Object.keys(Ge).sort())_e+=`${Te}:${p(Ge[Te])},`;return`${_e}}`}function _(Ge){let _e="";for(const Te of s.refProperties)_e+=`/${p(Ge[Te])}`;return _e}class b{constructor(_e){this.keyCache={},_e&&this.replace(_e)}replace(_e){this._layerConfigs={},this._layers={},this.update(_e,[])}update(_e,Te){for(const De of _e)this._layerConfigs[De.id]=De,(this._layers[De.id]=s.createStyleLayer(De)).compileFilter(),this.keyCache[De.id]&&delete this.keyCache[De.id];for(const De of Te)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const ze=function(De,_t){const Ct={};for(let vt=0;vt<De.length;vt++){const Pt=_t&&_t[De[vt].id]||_(De[vt]);_t&&(_t[De[vt].id]=Pt);let jt=Ct[Pt];jt||(jt=Ct[Pt]=[]),jt.push(De[vt])}const St=[];for(const vt in Ct)St.push(Ct[vt]);return St}(s.values(this._layerConfigs),this.keyCache);for(const De of ze){const _t=De.map(Ii=>this._layers[Ii.id]),Ct=_t[0];if(Ct.visibility==="none")continue;const St=Ct.source||"";let vt=this.familiesBySource[St];vt||(vt=this.familiesBySource[St]={});const Pt=Ct.sourceLayer||"_geojsonTileLayer";let jt=vt[Pt];jt||(jt=vt[Pt]=[]),jt.push(_t)}}}class S{loadTile(_e,Te){const{uid:ze,encoding:De,rawImageData:_t,padding:Ct,buildQuadTree:St}=_e,vt=s.window.ImageBitmap&&_t instanceof s.window.ImageBitmap?this.getImageData(_t,Ct):_t;Te(null,new s.DEMData(ze,vt,De,Ct<1,St))}getImageData(_e,Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(_e.width,_e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=_e.width,this.offscreenCanvas.height=_e.height,this.offscreenCanvasContext.drawImage(_e,0,0,_e.width,_e.height);const ze=this.offscreenCanvasContext.getImageData(-Te,-Te,_e.width+2*Te,_e.height+2*Te);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ze}}var E=function Ge(_e,Te){var ze,De=_e&&_e.type;if(De==="FeatureCollection")for(ze=0;ze<_e.features.length;ze++)Ge(_e.features[ze],Te);else if(De==="GeometryCollection")for(ze=0;ze<_e.geometries.length;ze++)Ge(_e.geometries[ze],Te);else if(De==="Feature")Ge(_e.geometry,Te);else if(De==="Polygon")I(_e.coordinates,Te);else if(De==="MultiPolygon")for(ze=0;ze<_e.coordinates.length;ze++)I(_e.coordinates[ze],Te);return _e};function I(Ge,_e){if(Ge.length!==0){R(Ge[0],_e);for(var Te=1;Te<Ge.length;Te++)R(Ge[Te],!_e)}}function R(Ge,_e){for(var Te=0,ze=0,De=0,_t=Ge.length,Ct=_t-1;De<_t;Ct=De++){var St=(Ge[De][0]-Ge[Ct][0])*(Ge[Ct][1]+Ge[De][1]),vt=Te+St;ze+=Math.abs(Te)>=Math.abs(St)?Te-vt+St:St-vt+Te,Te=vt}Te+ze>=0!=!!_e&&Ge.reverse()}const V=s.VectorTileFeature.prototype.toGeoJSON;class q{constructor(_e){this._feature=_e,this.extent=s.EXTENT,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){const _e=[];for(const Te of this._feature.geometry)_e.push([new s.pointGeometry(Te[0],Te[1])]);return _e}{const _e=[];for(const Te of this._feature.geometry){const ze=[];for(const De of Te)ze.push(new s.pointGeometry(De[0],De[1]));_e.push(ze)}return _e}}toGeoJSON(_e,Te,ze){return V.call(this,_e,Te,ze)}}class U{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=_e.length,this._features=_e}feature(_e){return new q(this._features[_e])}}var H={},Z={get exports(){return H},set exports(Ge){H=Ge}},ne=s.pointGeometry,ie=s.vectorTile.VectorTileFeature,oe=pe;function pe(Ge,_e){this.options=_e||{},this.features=Ge,this.length=Ge.length}function de(Ge,_e){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=_e||4096}pe.prototype.feature=function(Ge){return new de(this.features[Ge],this.options.extent)},de.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var _e=0;_e<Ge.length;_e++){for(var Te=Ge[_e],ze=[],De=0;De<Te.length;De++)ze.push(new ne(Te[De][0],Te[De][1]));this.geometry.push(ze)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,_e=1/0,Te=-1/0,ze=1/0,De=-1/0,_t=0;_t<Ge.length;_t++)for(var Ct=Ge[_t],St=0;St<Ct.length;St++){var vt=Ct[St];_e=Math.min(_e,vt.x),Te=Math.max(Te,vt.x),ze=Math.min(ze,vt.y),De=Math.max(De,vt.y)}return[_e,ze,Te,De]},de.prototype.toGeoJSON=ie.prototype.toGeoJSON;var fe=s.pbf,ge=oe;function we(Ge){var _e=new fe;return function(Te,ze){for(var De in Te.layers)ze.writeMessage(3,Ie,Te.layers[De])}(Ge,_e),_e.finish()}function Ie(Ge,_e){var Te;_e.writeVarintField(15,Ge.version||1),_e.writeStringField(1,Ge.name||""),_e.writeVarintField(5,Ge.extent||4096);var ze={keys:[],values:[],keycache:{},valuecache:{}};for(Te=0;Te<Ge.length;Te++)ze.feature=Ge.feature(Te),_e.writeMessage(2,Oe,ze);var De=ze.keys;for(Te=0;Te<De.length;Te++)_e.writeStringField(3,De[Te]);var _t=ze.values;for(Te=0;Te<_t.length;Te++)_e.writeMessage(4,nt,_t[Te])}function Oe(Ge,_e){var Te=Ge.feature;Te.id!==void 0&&_e.writeVarintField(1,Te.id),_e.writeMessage(2,ke,Ge),_e.writeVarintField(3,Te.type),_e.writeMessage(4,gt,Te)}function ke(Ge,_e){var Te=Ge.feature,ze=Ge.keys,De=Ge.values,_t=Ge.keycache,Ct=Ge.valuecache;for(var St in Te.properties){var vt=Te.properties[St],Pt=_t[St];if(vt!==null){Pt===void 0&&(ze.push(St),_t[St]=Pt=ze.length-1),_e.writeVarint(Pt);var jt=typeof vt;jt!=="string"&&jt!=="boolean"&&jt!=="number"&&(vt=JSON.stringify(vt));var Ii=jt+":"+vt,ai=Ct[Ii];ai===void 0&&(De.push(vt),Ct[Ii]=ai=De.length-1),_e.writeVarint(ai)}}}function Ee(Ge,_e){return(_e<<3)+(7&Ge)}function Qe(Ge){return Ge<<1^Ge>>31}function gt(Ge,_e){for(var Te=Ge.loadGeometry(),ze=Ge.type,De=0,_t=0,Ct=Te.length,St=0;St<Ct;St++){var vt=Te[St],Pt=1;ze===1&&(Pt=vt.length),_e.writeVarint(Ee(1,Pt));for(var jt=ze===3?vt.length-1:vt.length,Ii=0;Ii<jt;Ii++){Ii===1&&ze!==1&&_e.writeVarint(Ee(2,jt-1));var ai=vt[Ii].x-De,Ji=vt[Ii].y-_t;_e.writeVarint(Qe(ai)),_e.writeVarint(Qe(Ji)),De+=ai,_t+=Ji}ze===3&&_e.writeVarint(Ee(7,1))}}function nt(Ge,_e){var Te=typeof Ge;Te==="string"?_e.writeStringField(1,Ge):Te==="boolean"?_e.writeBooleanField(7,Ge):Te==="number"&&(Ge%1!=0?_e.writeDoubleField(3,Ge):Ge<0?_e.writeSVarintField(6,Ge):_e.writeVarintField(5,Ge))}function ft(Ge,_e,Te,ze,De,_t){if(De-ze<=Te)return;const Ct=ze+De>>1;Tt(Ge,_e,Ct,ze,De,_t%2),ft(Ge,_e,Te,ze,Ct-1,_t+1),ft(Ge,_e,Te,Ct+1,De,_t+1)}function Tt(Ge,_e,Te,ze,De,_t){for(;De>ze;){if(De-ze>600){const Pt=De-ze+1,jt=Te-ze+1,Ii=Math.log(Pt),ai=.5*Math.exp(2*Ii/3),Ji=.5*Math.sqrt(Ii*ai*(Pt-ai)/Pt)*(jt-Pt/2<0?-1:1);Tt(Ge,_e,Te,Math.max(ze,Math.floor(Te-jt*ai/Pt+Ji)),Math.min(De,Math.floor(Te+(Pt-jt)*ai/Pt+Ji)),_t)}const Ct=_e[2*Te+_t];let St=ze,vt=De;for(pt(Ge,_e,ze,Te),_e[2*De+_t]>Ct&&pt(Ge,_e,ze,De);St<vt;){for(pt(Ge,_e,St,vt),St++,vt--;_e[2*St+_t]<Ct;)St++;for(;_e[2*vt+_t]>Ct;)vt--}_e[2*ze+_t]===Ct?pt(Ge,_e,ze,vt):(vt++,pt(Ge,_e,vt,De)),vt<=Te&&(ze=vt+1),Te<=vt&&(De=vt-1)}}function pt(Ge,_e,Te,ze){et(Ge,Te,ze),et(_e,2*Te,2*ze),et(_e,2*Te+1,2*ze+1)}function et(Ge,_e,Te){const ze=Ge[_e];Ge[_e]=Ge[Te],Ge[Te]=ze}function Mt(Ge,_e,Te,ze){const De=Ge-Te,_t=_e-ze;return De*De+_t*_t}Z.exports=we,H.fromVectorTileJs=we,H.fromGeojsonVt=function(Ge,_e){_e=_e||{};var Te={};for(var ze in Ge)Te[ze]=new ge(Ge[ze].features,_e),Te[ze].name=ze,Te[ze].version=_e.version,Te[ze].extent=_e.extent;return we({layers:Te})},H.GeoJSONWrapper=ge;const Qt=Ge=>Ge[0],Fe=Ge=>Ge[1];class tt{constructor(_e,Te=Qt,ze=Fe,De=64,_t=Float64Array){this.nodeSize=De,this.points=_e;const Ct=_e.length<65536?Uint16Array:Uint32Array,St=this.ids=new Ct(_e.length),vt=this.coords=new _t(2*_e.length);for(let Pt=0;Pt<_e.length;Pt++)St[Pt]=Pt,vt[2*Pt]=Te(_e[Pt]),vt[2*Pt+1]=ze(_e[Pt]);ft(St,vt,De,0,St.length-1,0)}range(_e,Te,ze,De){return function(_t,Ct,St,vt,Pt,jt,Ii){const ai=[0,_t.length-1,0],Ji=[];let Qi,Gi;for(;ai.length;){const Bi=ai.pop(),yn=ai.pop(),Ln=ai.pop();if(yn-Ln<=Ii){for(let er=Ln;er<=yn;er++)Qi=Ct[2*er],Gi=Ct[2*er+1],Qi>=St&&Qi<=Pt&&Gi>=vt&&Gi<=jt&&Ji.push(_t[er]);continue}const rn=Math.floor((Ln+yn)/2);Qi=Ct[2*rn],Gi=Ct[2*rn+1],Qi>=St&&Qi<=Pt&&Gi>=vt&&Gi<=jt&&Ji.push(_t[rn]);const Jn=(Bi+1)%2;(Bi===0?St<=Qi:vt<=Gi)&&(ai.push(Ln),ai.push(rn-1),ai.push(Jn)),(Bi===0?Pt>=Qi:jt>=Gi)&&(ai.push(rn+1),ai.push(yn),ai.push(Jn))}return Ji}(this.ids,this.coords,_e,Te,ze,De,this.nodeSize)}within(_e,Te,ze){return function(De,_t,Ct,St,vt,Pt){const jt=[0,De.length-1,0],Ii=[],ai=vt*vt;for(;jt.length;){const Ji=jt.pop(),Qi=jt.pop(),Gi=jt.pop();if(Qi-Gi<=Pt){for(let Jn=Gi;Jn<=Qi;Jn++)Mt(_t[2*Jn],_t[2*Jn+1],Ct,St)<=ai&&Ii.push(De[Jn]);continue}const Bi=Math.floor((Gi+Qi)/2),yn=_t[2*Bi],Ln=_t[2*Bi+1];Mt(yn,Ln,Ct,St)<=ai&&Ii.push(De[Bi]);const rn=(Ji+1)%2;(Ji===0?Ct-vt<=yn:St-vt<=Ln)&&(jt.push(Gi),jt.push(Bi-1),jt.push(rn)),(Ji===0?Ct+vt>=yn:St+vt>=Ln)&&(jt.push(Bi+1),jt.push(Qi),jt.push(rn))}return Ii}(this.ids,this.coords,_e,Te,ze,this.nodeSize)}}const Rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ge=>Ge},Xt=Math.fround||(Ei=new Float32Array(1),Ge=>(Ei[0]=+Ge,Ei[0]));var Ei;class Ni{constructor(_e){this.options=At(Object.create(Rt),_e),this.trees=new Array(this.options.maxZoom+1)}load(_e){const{log:Te,minZoom:ze,maxZoom:De,nodeSize:_t}=this.options;Te&&console.time("total time");const Ct=`prepare ${_e.length} points`;Te&&console.time(Ct),this.points=_e;let St=[];for(let vt=0;vt<_e.length;vt++)_e[vt].geometry&&St.push(Ve(_e[vt],vt));this.trees[De+1]=new tt(St,Gt,Bt,_t,Float32Array),Te&&console.timeEnd(Ct);for(let vt=De;vt>=ze;vt--){const Pt=+Date.now();St=this._cluster(St,vt),this.trees[vt]=new tt(St,Gt,Bt,_t,Float32Array),Te&&console.log("z%d: %d clusters in %dms",vt,St.length,+Date.now()-Pt)}return Te&&console.timeEnd("total time"),this}getClusters(_e,Te){let ze=((_e[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,_e[1]));let _t=_e[2]===180?180:((_e[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,_e[3]));if(_e[2]-_e[0]>=360)ze=-180,_t=180;else if(ze>_t){const jt=this.getClusters([ze,De,180,Ct],Te),Ii=this.getClusters([-180,De,_t,Ct],Te);return jt.concat(Ii)}const St=this.trees[this._limitZoom(Te)],vt=St.range(Xe(ze),it(Ct),Xe(_t),it(De)),Pt=[];for(const jt of vt){const Ii=St.points[jt];Pt.push(Ii.numPoints?dt(Ii):this.points[Ii.index])}return Pt}getChildren(_e){const Te=this._getOriginId(_e),ze=this._getOriginZoom(_e),De="No cluster with the specified id.",_t=this.trees[ze];if(!_t)throw new Error(De);const Ct=_t.points[Te];if(!Ct)throw new Error(De);const St=this.options.radius/(this.options.extent*Math.pow(2,ze-1)),vt=_t.within(Ct.x,Ct.y,St),Pt=[];for(const jt of vt){const Ii=_t.points[jt];Ii.parentId===_e&&Pt.push(Ii.numPoints?dt(Ii):this.points[Ii.index])}if(Pt.length===0)throw new Error(De);return Pt}getLeaves(_e,Te,ze){const De=[];return this._appendLeaves(De,_e,Te=Te||10,ze=ze||0,0),De}getTile(_e,Te,ze){const De=this.trees[this._limitZoom(_e)],_t=Math.pow(2,_e),{extent:Ct,radius:St}=this.options,vt=St/Ct,Pt=(ze-vt)/_t,jt=(ze+1+vt)/_t,Ii={features:[]};return this._addTileFeatures(De.range((Te-vt)/_t,Pt,(Te+1+vt)/_t,jt),De.points,Te,ze,_t,Ii),Te===0&&this._addTileFeatures(De.range(1-vt/_t,Pt,1,jt),De.points,_t,ze,_t,Ii),Te===_t-1&&this._addTileFeatures(De.range(0,Pt,vt/_t,jt),De.points,-1,ze,_t,Ii),Ii.features.length?Ii:null}getClusterExpansionZoom(_e){let Te=this._getOriginZoom(_e)-1;for(;Te<=this.options.maxZoom;){const ze=this.getChildren(_e);if(Te++,ze.length!==1)break;_e=ze[0].properties.cluster_id}return Te}_appendLeaves(_e,Te,ze,De,_t){const Ct=this.getChildren(Te);for(const St of Ct){const vt=St.properties;if(vt&&vt.cluster?_t+vt.point_count<=De?_t+=vt.point_count:_t=this._appendLeaves(_e,vt.cluster_id,ze,De,_t):_t<De?_t++:_e.push(St),_e.length===ze)break}return _t}_addTileFeatures(_e,Te,ze,De,_t,Ct){for(const St of _e){const vt=Te[St],Pt=vt.numPoints;let jt,Ii,ai;if(Pt)jt=kt(vt),Ii=vt.x,ai=vt.y;else{const Gi=this.points[vt.index];jt=Gi.properties,Ii=Xe(Gi.geometry.coordinates[0]),ai=it(Gi.geometry.coordinates[1])}const Ji={type:1,geometry:[[Math.round(this.options.extent*(Ii*_t-ze)),Math.round(this.options.extent*(ai*_t-De))]],tags:jt};let Qi;Pt?Qi=vt.id:this.options.generateId?Qi=vt.index:this.points[vt.index].id&&(Qi=this.points[vt.index].id),Qi!==void 0&&(Ji.id=Qi),Ct.features.push(Ji)}}_limitZoom(_e){return Math.max(this.options.minZoom,Math.min(Math.floor(+_e),this.options.maxZoom+1))}_cluster(_e,Te){const ze=[],{radius:De,extent:_t,reduce:Ct,minPoints:St}=this.options,vt=De/(_t*Math.pow(2,Te));for(let Pt=0;Pt<_e.length;Pt++){const jt=_e[Pt];if(jt.zoom<=Te)continue;jt.zoom=Te;const Ii=this.trees[Te+1],ai=Ii.within(jt.x,jt.y,vt),Ji=jt.numPoints||1;let Qi=Ji;for(const Gi of ai){const Bi=Ii.points[Gi];Bi.zoom>Te&&(Qi+=Bi.numPoints||1)}if(Qi>Ji&&Qi>=St){let Gi=jt.x*Ji,Bi=jt.y*Ji,yn=Ct&&Ji>1?this._map(jt,!0):null;const Ln=(Pt<<5)+(Te+1)+this.points.length;for(const rn of ai){const Jn=Ii.points[rn];if(Jn.zoom<=Te)continue;Jn.zoom=Te;const er=Jn.numPoints||1;Gi+=Jn.x*er,Bi+=Jn.y*er,Jn.parentId=Ln,Ct&&(yn||(yn=this._map(jt,!0)),Ct(yn,this._map(Jn)))}jt.parentId=Ln,ze.push(Vi(Gi/Qi,Bi/Qi,Ln,Qi,yn))}else if(ze.push(jt),Qi>1)for(const Gi of ai){const Bi=Ii.points[Gi];Bi.zoom<=Te||(Bi.zoom=Te,ze.push(Bi))}}return ze}_getOriginId(_e){return _e-this.points.length>>5}_getOriginZoom(_e){return(_e-this.points.length)%32}_map(_e,Te){if(_e.numPoints)return Te?At({},_e.properties):_e.properties;const ze=this.points[_e.index].properties,De=this.options.map(ze);return Te&&De===ze?At({},De):De}}function Vi(Ge,_e,Te,ze,De){return{x:Xt(Ge),y:Xt(_e),zoom:1/0,id:Te,parentId:-1,numPoints:ze,properties:De}}function Ve(Ge,_e){const[Te,ze]=Ge.geometry.coordinates;return{x:Xt(Xe(Te)),y:Xt(it(ze)),zoom:1/0,index:_e,parentId:-1}}function dt(Ge){return{type:"Feature",id:Ge.id,properties:kt(Ge),geometry:{type:"Point",coordinates:[(_e=Ge.x,360*(_e-.5)),ct(Ge.y)]}};var _e}function kt(Ge){const _e=Ge.numPoints,Te=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e;return At(At({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:_e,point_count_abbreviated:Te})}function Xe(Ge){return Ge/360+.5}function it(Ge){const _e=Math.sin(Ge*Math.PI/180),Te=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Te<0?0:Te>1?1:Te}function ct(Ge){const _e=(180-360*Ge)*Math.PI/180;return 360*Math.atan(Math.exp(_e))/Math.PI-90}function At(Ge,_e){for(const Te in _e)Ge[Te]=_e[Te];return Ge}function Gt(Ge){return Ge.x}function Bt(Ge){return Ge.y}function Yt(Ge,_e,Te,ze){for(var De,_t=ze,Ct=Te-_e>>1,St=Te-_e,vt=Ge[_e],Pt=Ge[_e+1],jt=Ge[Te],Ii=Ge[Te+1],ai=_e+3;ai<Te;ai+=3){var Ji=gi(Ge[ai],Ge[ai+1],vt,Pt,jt,Ii);if(Ji>_t)De=ai,_t=Ji;else if(Ji===_t){var Qi=Math.abs(ai-Ct);Qi<St&&(De=ai,St=Qi)}}_t>ze&&(De-_e>3&&Yt(Ge,_e,De,ze),Ge[De+2]=_t,Te-De>3&&Yt(Ge,De,Te,ze))}function gi(Ge,_e,Te,ze,De,_t){var Ct=De-Te,St=_t-ze;if(Ct!==0||St!==0){var vt=((Ge-Te)*Ct+(_e-ze)*St)/(Ct*Ct+St*St);vt>1?(Te=De,ze=_t):vt>0&&(Te+=Ct*vt,ze+=St*vt)}return(Ct=Ge-Te)*Ct+(St=_e-ze)*St}function _i(Ge,_e,Te,ze){var De={id:Ge===void 0?null:Ge,type:_e,geometry:Te,tags:ze,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(_t){var Ct=_t.geometry,St=_t.type;if(St==="Point"||St==="MultiPoint"||St==="LineString")zi(_t,Ct);else if(St==="Polygon"||St==="MultiLineString")for(var vt=0;vt<Ct.length;vt++)zi(_t,Ct[vt]);else if(St==="MultiPolygon")for(vt=0;vt<Ct.length;vt++)for(var Pt=0;Pt<Ct[vt].length;Pt++)zi(_t,Ct[vt][Pt])}(De),De}function zi(Ge,_e){for(var Te=0;Te<_e.length;Te+=3)Ge.minX=Math.min(Ge.minX,_e[Te]),Ge.minY=Math.min(Ge.minY,_e[Te+1]),Ge.maxX=Math.max(Ge.maxX,_e[Te]),Ge.maxY=Math.max(Ge.maxY,_e[Te+1])}function Hi(Ge,_e,Te,ze){if(_e.geometry){var De=_e.geometry.coordinates,_t=_e.geometry.type,Ct=Math.pow(Te.tolerance/((1<<Te.maxZoom)*Te.extent),2),St=[],vt=_e.id;if(Te.promoteId?vt=_e.properties[Te.promoteId]:Te.generateId&&(vt=ze||0),_t==="Point")Zi(De,St);else if(_t==="MultiPoint")for(var Pt=0;Pt<De.length;Pt++)Zi(De[Pt],St);else if(_t==="LineString")Ci(De,St,Ct,!1);else if(_t==="MultiLineString"){if(Te.lineMetrics){for(Pt=0;Pt<De.length;Pt++)Ci(De[Pt],St=[],Ct,!1),Ge.push(_i(vt,"LineString",St,_e.properties));return}ci(De,St,Ct,!1)}else if(_t==="Polygon")ci(De,St,Ct,!0);else{if(_t!=="MultiPolygon"){if(_t==="GeometryCollection"){for(Pt=0;Pt<_e.geometry.geometries.length;Pt++)Hi(Ge,{id:vt,geometry:_e.geometry.geometries[Pt],properties:_e.properties},Te,ze);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Pt=0;Pt<De.length;Pt++){var jt=[];ci(De[Pt],jt,Ct,!0),St.push(jt)}}Ge.push(_i(vt,_t,St,_e.properties))}}function Zi(Ge,_e){_e.push(Si(Ge[0])),_e.push(sn(Ge[1])),_e.push(0)}function Ci(Ge,_e,Te,ze){for(var De,_t,Ct=0,St=0;St<Ge.length;St++){var vt=Si(Ge[St][0]),Pt=sn(Ge[St][1]);_e.push(vt),_e.push(Pt),_e.push(0),St>0&&(Ct+=ze?(De*Pt-vt*_t)/2:Math.sqrt(Math.pow(vt-De,2)+Math.pow(Pt-_t,2))),De=vt,_t=Pt}var jt=_e.length-3;_e[2]=1,Yt(_e,0,jt,Te),_e[jt+2]=1,_e.size=Math.abs(Ct),_e.start=0,_e.end=_e.size}function ci(Ge,_e,Te,ze){for(var De=0;De<Ge.length;De++){var _t=[];Ci(Ge[De],_t,Te,ze),_e.push(_t)}}function Si(Ge){return Ge/360+.5}function sn(Ge){var _e=Math.sin(Ge*Math.PI/180),Te=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return Te<0?0:Te>1?1:Te}function vn(Ge,_e,Te,ze,De,_t,Ct,St){if(ze/=_e,_t>=(Te/=_e)&&Ct<ze)return Ge;if(Ct<Te||_t>=ze)return null;for(var vt=[],Pt=0;Pt<Ge.length;Pt++){var jt=Ge[Pt],Ii=jt.geometry,ai=jt.type,Ji=De===0?jt.minX:jt.minY,Qi=De===0?jt.maxX:jt.maxY;if(Ji>=Te&&Qi<ze)vt.push(jt);else if(!(Qi<Te||Ji>=ze)){var Gi=[];if(ai==="Point"||ai==="MultiPoint")hn(Ii,Gi,Te,ze,De);else if(ai==="LineString")Nn(Ii,Gi,Te,ze,De,!1,St.lineMetrics);else if(ai==="MultiLineString")Mr(Ii,Gi,Te,ze,De,!1);else if(ai==="Polygon")Mr(Ii,Gi,Te,ze,De,!0);else if(ai==="MultiPolygon")for(var Bi=0;Bi<Ii.length;Bi++){var yn=[];Mr(Ii[Bi],yn,Te,ze,De,!0),yn.length&&Gi.push(yn)}if(Gi.length){if(St.lineMetrics&&ai==="LineString"){for(Bi=0;Bi<Gi.length;Bi++)vt.push(_i(jt.id,ai,Gi[Bi],jt.tags));continue}ai!=="LineString"&&ai!=="MultiLineString"||(Gi.length===1?(ai="LineString",Gi=Gi[0]):ai="MultiLineString"),ai!=="Point"&&ai!=="MultiPoint"||(ai=Gi.length===3?"Point":"MultiPoint"),vt.push(_i(jt.id,ai,Gi,jt.tags))}}}return vt.length?vt:null}function hn(Ge,_e,Te,ze,De){for(var _t=0;_t<Ge.length;_t+=3){var Ct=Ge[_t+De];Ct>=Te&&Ct<=ze&&(_e.push(Ge[_t]),_e.push(Ge[_t+1]),_e.push(Ge[_t+2]))}}function Nn(Ge,_e,Te,ze,De,_t,Ct){for(var St,vt,Pt=yr(Ge),jt=De===0?fr:Ko,Ii=Ge.start,ai=0;ai<Ge.length-3;ai+=3){var Ji=Ge[ai],Qi=Ge[ai+1],Gi=Ge[ai+2],Bi=Ge[ai+3],yn=Ge[ai+4],Ln=De===0?Ji:Qi,rn=De===0?Bi:yn,Jn=!1;Ct&&(St=Math.sqrt(Math.pow(Ji-Bi,2)+Math.pow(Qi-yn,2))),Ln<Te?rn>Te&&(vt=jt(Pt,Ji,Qi,Bi,yn,Te),Ct&&(Pt.start=Ii+St*vt)):Ln>ze?rn<ze&&(vt=jt(Pt,Ji,Qi,Bi,yn,ze),Ct&&(Pt.start=Ii+St*vt)):Yr(Pt,Ji,Qi,Gi),rn<Te&&Ln>=Te&&(vt=jt(Pt,Ji,Qi,Bi,yn,Te),Jn=!0),rn>ze&&Ln<=ze&&(vt=jt(Pt,Ji,Qi,Bi,yn,ze),Jn=!0),!_t&&Jn&&(Ct&&(Pt.end=Ii+St*vt),_e.push(Pt),Pt=yr(Ge)),Ct&&(Ii+=St)}var er=Ge.length-3;Ji=Ge[er],Qi=Ge[er+1],Gi=Ge[er+2],(Ln=De===0?Ji:Qi)>=Te&&Ln<=ze&&Yr(Pt,Ji,Qi,Gi),er=Pt.length-3,_t&&er>=3&&(Pt[er]!==Pt[0]||Pt[er+1]!==Pt[1])&&Yr(Pt,Pt[0],Pt[1],Pt[2]),Pt.length&&_e.push(Pt)}function yr(Ge){var _e=[];return _e.size=Ge.size,_e.start=Ge.start,_e.end=Ge.end,_e}function Mr(Ge,_e,Te,ze,De,_t){for(var Ct=0;Ct<Ge.length;Ct++)Nn(Ge[Ct],_e,Te,ze,De,_t,!1)}function Yr(Ge,_e,Te,ze){Ge.push(_e),Ge.push(Te),Ge.push(ze)}function fr(Ge,_e,Te,ze,De,_t){var Ct=(_t-_e)/(ze-_e);return Ge.push(_t),Ge.push(Te+(De-Te)*Ct),Ge.push(1),Ct}function Ko(Ge,_e,Te,ze,De,_t){var Ct=(_t-Te)/(De-Te);return Ge.push(_e+(ze-_e)*Ct),Ge.push(_t),Ge.push(1),Ct}function An(Ge,_e){for(var Te=[],ze=0;ze<Ge.length;ze++){var De,_t=Ge[ze],Ct=_t.type;if(Ct==="Point"||Ct==="MultiPoint"||Ct==="LineString")De=Is(_t.geometry,_e);else if(Ct==="MultiLineString"||Ct==="Polygon"){De=[];for(var St=0;St<_t.geometry.length;St++)De.push(Is(_t.geometry[St],_e))}else if(Ct==="MultiPolygon")for(De=[],St=0;St<_t.geometry.length;St++){for(var vt=[],Pt=0;Pt<_t.geometry[St].length;Pt++)vt.push(Is(_t.geometry[St][Pt],_e));De.push(vt)}Te.push(_i(_t.id,Ct,De,_t.tags))}return Te}function Is(Ge,_e){var Te=[];Te.size=Ge.size,Ge.start!==void 0&&(Te.start=Ge.start,Te.end=Ge.end);for(var ze=0;ze<Ge.length;ze+=3)Te.push(Ge[ze]+_e,Ge[ze+1],Ge[ze+2]);return Te}function Xr(Ge,_e){if(Ge.transformed)return Ge;var Te,ze,De,_t=1<<Ge.z,Ct=Ge.x,St=Ge.y;for(Te=0;Te<Ge.features.length;Te++){var vt=Ge.features[Te],Pt=vt.geometry,jt=vt.type;if(vt.geometry=[],jt===1)for(ze=0;ze<Pt.length;ze+=2)vt.geometry.push(Fo(Pt[ze],Pt[ze+1],_e,_t,Ct,St));else for(ze=0;ze<Pt.length;ze++){var Ii=[];for(De=0;De<Pt[ze].length;De+=2)Ii.push(Fo(Pt[ze][De],Pt[ze][De+1],_e,_t,Ct,St));vt.geometry.push(Ii)}}return Ge.transformed=!0,Ge}function Fo(Ge,_e,Te,ze,De,_t){return[Math.round(Te*(Ge*ze-De)),Math.round(Te*(_e*ze-_t))]}function za(Ge,_e,Te,ze,De){for(var _t=_e===De.maxZoom?0:De.tolerance/((1<<_e)*De.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Te,y:ze,z:_e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},St=0;St<Ge.length;St++){Ct.numFeatures++,Hl(Ct,Ge[St],_t,De);var vt=Ge[St].minX,Pt=Ge[St].minY,jt=Ge[St].maxX,Ii=Ge[St].maxY;vt<Ct.minX&&(Ct.minX=vt),Pt<Ct.minY&&(Ct.minY=Pt),jt>Ct.maxX&&(Ct.maxX=jt),Ii>Ct.maxY&&(Ct.maxY=Ii)}return Ct}function Hl(Ge,_e,Te,ze){var De=_e.geometry,_t=_e.type,Ct=[];if(_t==="Point"||_t==="MultiPoint")for(var St=0;St<De.length;St+=3)Ct.push(De[St]),Ct.push(De[St+1]),Ge.numPoints++,Ge.numSimplified++;else if(_t==="LineString")va(Ct,De,Ge,Te,!1,!1);else if(_t==="MultiLineString"||_t==="Polygon")for(St=0;St<De.length;St++)va(Ct,De[St],Ge,Te,_t==="Polygon",St===0);else if(_t==="MultiPolygon")for(var vt=0;vt<De.length;vt++){var Pt=De[vt];for(St=0;St<Pt.length;St++)va(Ct,Pt[St],Ge,Te,!0,St===0)}if(Ct.length){var jt=_e.tags||null;if(_t==="LineString"&&ze.lineMetrics){for(var Ii in jt={},_e.tags)jt[Ii]=_e.tags[Ii];jt.mapbox_clip_start=De.start/De.size,jt.mapbox_clip_end=De.end/De.size}var ai={geometry:Ct,type:_t==="Polygon"||_t==="MultiPolygon"?3:_t==="LineString"||_t==="MultiLineString"?2:1,tags:jt};_e.id!==null&&(ai.id=_e.id),Ge.features.push(ai)}}function va(Ge,_e,Te,ze,De,_t){var Ct=ze*ze;if(ze>0&&_e.size<(De?Ct:ze))Te.numPoints+=_e.length/3;else{for(var St=[],vt=0;vt<_e.length;vt+=3)(ze===0||_e[vt+2]>Ct)&&(Te.numSimplified++,St.push(_e[vt]),St.push(_e[vt+1])),Te.numPoints++;De&&function(Pt,jt){for(var Ii=0,ai=0,Ji=Pt.length,Qi=Ji-2;ai<Ji;Qi=ai,ai+=2)Ii+=(Pt[ai]-Pt[Qi])*(Pt[ai+1]+Pt[Qi+1]);if(Ii>0===jt)for(ai=0,Ji=Pt.length;ai<Ji/2;ai+=2){var Gi=Pt[ai],Bi=Pt[ai+1];Pt[ai]=Pt[Ji-2-ai],Pt[ai+1]=Pt[Ji-1-ai],Pt[Ji-2-ai]=Gi,Pt[Ji-1-ai]=Bi}}(St,_t),Ge.push(St)}}function ps(Ge,_e){var Te=(_e=this.options=function(De,_t){for(var Ct in _t)De[Ct]=_t[Ct];return De}(Object.create(this.options),_e)).debug;if(Te&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");var ze=function(De,_t){var Ct=[];if(De.type==="FeatureCollection")for(var St=0;St<De.features.length;St++)Hi(Ct,De.features[St],_t,St);else Hi(Ct,De.type==="Feature"?De:{geometry:De},_t);return Ct}(Ge,_e);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ze=function(De,_t){var Ct=_t.buffer/_t.extent,St=De,vt=vn(De,1,-1-Ct,Ct,0,-1,2,_t),Pt=vn(De,1,1-Ct,2+Ct,0,-1,2,_t);return(vt||Pt)&&(St=vn(De,1,-Ct,1+Ct,0,-1,2,_t)||[],vt&&(St=An(vt,1).concat(St)),Pt&&(St=St.concat(An(Pt,-1)))),St}(ze,_e),ze.length&&this.splitTile(ze,0,0,0),Te&&(ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fr(Ge,_e,Te){return 32*((1<<Ge)*Te+_e)+Ge}function ms(Ge,_e){const Te=Ge.tileID.canonical;if(!this._geoJSONIndex)return _e(null,null);const ze=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!ze)return _e(null,null);const De=new U(ze.features);let _t=H(De);_t.byteOffset===0&&_t.byteLength===_t.buffer.byteLength||(_t=new Uint8Array(_t)),_e(null,{vectorTile:De,rawData:_t.buffer})}ps.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ps.prototype.splitTile=function(Ge,_e,Te,ze,De,_t,Ct){for(var St=[Ge,_e,Te,ze],vt=this.options,Pt=vt.debug;St.length;){ze=St.pop(),Te=St.pop(),_e=St.pop(),Ge=St.pop();var jt=1<<_e,Ii=Fr(_e,Te,ze),ai=this.tiles[Ii];if(!ai&&(Pt>1&&console.time("creation"),ai=this.tiles[Ii]=za(Ge,_e,Te,ze,vt),this.tileCoords.push({z:_e,x:Te,y:ze}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,Te,ze,ai.numFeatures,ai.numPoints,ai.numSimplified),console.timeEnd("creation"));var Ji="z"+_e;this.stats[Ji]=(this.stats[Ji]||0)+1,this.total++}if(ai.source=Ge,De){if(_e===vt.maxZoom||_e===De)continue;var Qi=1<<De-_e;if(Te!==Math.floor(_t/Qi)||ze!==Math.floor(Ct/Qi))continue}else if(_e===vt.indexMaxZoom||ai.numPoints<=vt.indexMaxPoints)continue;if(ai.source=null,Ge.length!==0){Pt>1&&console.time("clipping");var Gi,Bi,yn,Ln,rn,Jn,er=.5*vt.buffer/vt.extent,ya=.5-er,$o=.5+er,Wt=1+er;Gi=Bi=yn=Ln=null,rn=vn(Ge,jt,Te-er,Te+$o,0,ai.minX,ai.maxX,vt),Jn=vn(Ge,jt,Te+ya,Te+Wt,0,ai.minX,ai.maxX,vt),Ge=null,rn&&(Gi=vn(rn,jt,ze-er,ze+$o,1,ai.minY,ai.maxY,vt),Bi=vn(rn,jt,ze+ya,ze+Wt,1,ai.minY,ai.maxY,vt),rn=null),Jn&&(yn=vn(Jn,jt,ze-er,ze+$o,1,ai.minY,ai.maxY,vt),Ln=vn(Jn,jt,ze+ya,ze+Wt,1,ai.minY,ai.maxY,vt),Jn=null),Pt>1&&console.timeEnd("clipping"),St.push(Gi||[],_e+1,2*Te,2*ze),St.push(Bi||[],_e+1,2*Te,2*ze+1),St.push(yn||[],_e+1,2*Te+1,2*ze),St.push(Ln||[],_e+1,2*Te+1,2*ze+1)}}},ps.prototype.getTile=function(Ge,_e,Te){var ze=this.options,De=ze.extent,_t=ze.debug;if(Ge<0||Ge>24)return null;var Ct=1<<Ge,St=Fr(Ge,_e=(_e%Ct+Ct)%Ct,Te);if(this.tiles[St])return Xr(this.tiles[St],De);_t>1&&console.log("drilling down to z%d-%d-%d",Ge,_e,Te);for(var vt,Pt=Ge,jt=_e,Ii=Te;!vt&&Pt>0;)Pt--,jt=Math.floor(jt/2),Ii=Math.floor(Ii/2),vt=this.tiles[Fr(Pt,jt,Ii)];return vt&&vt.source?(_t>1&&console.log("found parent tile z%d-%d-%d",Pt,jt,Ii),_t>1&&console.time("drilling down"),this.splitTile(vt.source,Pt,jt,Ii,Ge,_e,Te),_t>1&&console.timeEnd("drilling down"),this.tiles[St]?Xr(this.tiles[St],De):null):null};class Io extends s.VectorTileWorkerSource{constructor(_e,Te,ze,De,_t){super(_e,Te,ze,De,ms),_t&&(this.loadGeoJSON=_t)}loadData(_e,Te){const ze=_e&&_e.request,De=ze&&ze.collectResourceTiming;this.loadGeoJSON(_e,(_t,Ct)=>{if(_t||!Ct)return Te(_t);if(typeof Ct!="object")return Te(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));{E(Ct,!0);try{if(_e.filter){const vt=s.createExpression(_e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(vt.result==="error")throw new Error(vt.value.map(jt=>`${jt.key}: ${jt.message}`).join(", "));Ct={type:"FeatureCollection",features:Ct.features.filter(jt=>vt.value.evaluate({zoom:0},jt))}}this._geoJSONIndex=_e.cluster?new Ni(function({superclusterOptions:vt,clusterProperties:Pt}){if(!Pt||!vt)return vt;const jt={},Ii={},ai={accumulated:null,zoom:0},Ji={properties:null},Qi=Object.keys(Pt);for(const Gi of Qi){const[Bi,yn]=Pt[Gi],Ln=s.createExpression(yn),rn=s.createExpression(typeof Bi=="string"?[Bi,["accumulated"],["get",Gi]]:Bi);jt[Gi]=Ln.value,Ii[Gi]=rn.value}return vt.map=Gi=>{Ji.properties=Gi;const Bi={};for(const yn of Qi)Bi[yn]=jt[yn].evaluate(ai,Ji);return Bi},vt.reduce=(Gi,Bi)=>{Ji.properties=Bi;for(const yn of Qi)ai.accumulated=Gi[yn],Gi[yn]=Ii[yn].evaluate(ai,Ji)},vt}(_e)).load(Ct.features):function(vt,Pt){return new ps(vt,Pt)}(Ct,_e.geojsonVtOptions)}catch(vt){return Te(vt)}this.loaded={};const St={};if(De){const vt=s.getPerformanceMeasurement(ze);vt&&(St.resourceTiming={},St.resourceTiming[_e.source]=JSON.parse(JSON.stringify(vt)))}Te(null,St)}})}reloadTile(_e,Te){const ze=this.loaded;return ze&&ze[_e.uid]?super.reloadTile(_e,Te):this.loadTile(_e,Te)}loadGeoJSON(_e,Te){if(_e.request)s.getJSON(_e.request,Te);else{if(typeof _e.data!="string")return Te(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));try{return Te(null,JSON.parse(_e.data))}catch{return Te(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(_e,Te){try{Te(null,this._geoJSONIndex.getClusterExpansionZoom(_e.clusterId))}catch(ze){Te(ze)}}getClusterChildren(_e,Te){try{Te(null,this._geoJSONIndex.getChildren(_e.clusterId))}catch(ze){Te(ze)}}getClusterLeaves(_e,Te){try{Te(null,this._geoJSONIndex.getLeaves(_e.clusterId,_e.limit,_e.offset))}catch(ze){Te(ze)}}}class gs{constructor(_e){this.self=_e,this.actor=new s.Actor(_e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Io},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Te,ze)=>{if(this.workerSourceTypes[Te])throw new Error(`Worker source with name "${Te}" already registered.`);this.workerSourceTypes[Te]=ze},this.self.registerRTLTextPlugin=Te=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Te.applyArabicShaping,s.plugin.processBidirectionalText=Te.processBidirectionalText,s.plugin.processStyledBidirectionalText=Te.processStyledBidirectionalText}}clearCaches(_e,Te,ze){delete this.layerIndexes[_e],delete this.availableImages[_e],delete this.workerSources[_e],delete this.demWorkerSources[_e],ze()}checkIfReady(_e,Te,ze){ze()}setReferrer(_e,Te){this.referrer=Te}spriteLoaded(_e,Te){this.isSpriteLoaded[_e]=Te;for(const ze in this.workerSources[_e]){const De=this.workerSources[_e][ze];for(const _t in De)De[_t]instanceof s.VectorTileWorkerSource&&(De[_t].isSpriteLoaded=Te,De[_t].fire(new s.Event("isSpriteLoaded")))}}setImages(_e,Te,ze){this.availableImages[_e]=Te;for(const De in this.workerSources[_e]){const _t=this.workerSources[_e][De];for(const Ct in _t)_t[Ct].availableImages=Te}ze()}enableTerrain(_e,Te,ze){this.terrain=Te,ze()}setProjection(_e,Te){this.projections[_e]=s.getProjection(Te)}setLayers(_e,Te,ze){this.getLayerIndex(_e).replace(Te),ze()}updateLayers(_e,Te,ze){this.getLayerIndex(_e).update(Te.layers,Te.removedIds),ze()}loadTile(_e,Te,ze){const De=this.enableTerrain?s.extend({enableTerrain:this.terrain},Te):Te;De.projection=this.projections[_e]||this.defaultProjection,this.getWorkerSource(_e,Te.type,Te.source).loadTile(De,ze)}loadDEMTile(_e,Te,ze){const De=this.enableTerrain?s.extend({buildQuadTree:this.terrain},Te):Te;this.getDEMWorkerSource(_e,Te.source).loadTile(De,ze)}reloadTile(_e,Te,ze){const De=this.enableTerrain?s.extend({enableTerrain:this.terrain},Te):Te;De.projection=this.projections[_e]||this.defaultProjection,this.getWorkerSource(_e,Te.type,Te.source).reloadTile(De,ze)}abortTile(_e,Te,ze){this.getWorkerSource(_e,Te.type,Te.source).abortTile(Te,ze)}removeTile(_e,Te,ze){this.getWorkerSource(_e,Te.type,Te.source).removeTile(Te,ze)}removeSource(_e,Te,ze){if(!this.workerSources[_e]||!this.workerSources[_e][Te.type]||!this.workerSources[_e][Te.type][Te.source])return;const De=this.workerSources[_e][Te.type][Te.source];delete this.workerSources[_e][Te.type][Te.source],De.removeSource!==void 0?De.removeSource(Te,ze):ze()}loadWorkerSource(_e,Te,ze){try{this.self.importScripts(Te.url),ze()}catch(De){ze(De.toString())}}syncRTLPluginState(_e,Te,ze){try{s.plugin.setState(Te);const De=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&De!=null){this.self.importScripts(De);const _t=s.plugin.isParsed();ze(_t?void 0:new Error(`RTL Text Plugin failed to import scripts from ${De}`),_t)}}catch(De){ze(De.toString())}}getAvailableImages(_e){let Te=this.availableImages[_e];return Te||(Te=[]),Te}getLayerIndex(_e){let Te=this.layerIndexes[_e];return Te||(Te=this.layerIndexes[_e]=new b),Te}getWorkerSource(_e,Te,ze){if(this.workerSources[_e]||(this.workerSources[_e]={}),this.workerSources[_e][Te]||(this.workerSources[_e][Te]={}),!this.workerSources[_e][Te][ze]){const De={send:(_t,Ct,St,vt,Pt,jt)=>{this.actor.send(_t,Ct,St,_e,Pt,jt)},scheduler:this.actor.scheduler};this.workerSources[_e][Te][ze]=new this.workerSourceTypes[Te](De,this.getLayerIndex(_e),this.getAvailableImages(_e),this.isSpriteLoaded[_e])}return this.workerSources[_e][Te][ze]}getDEMWorkerSource(_e,Te){return this.demWorkerSources[_e]||(this.demWorkerSources[_e]={}),this.demWorkerSources[_e][Te]||(this.demWorkerSources[_e][Te]=new S),this.demWorkerSources[_e][Te]}enforceCacheSizeLimit(_e,Te){s.enforceCacheSizeLimit(Te)}getWorkerPerformanceMetrics(_e,Te,ze){ze(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new gs(self)),gs}),a(["./shared"],function(s){function p(y,d){if(Array.isArray(y)){if(!Array.isArray(d)||y.length!==d.length)return!1;for(let m=0;m<y.length;m++)if(!p(y[m],d[m]))return!1;return!0}if(typeof y=="object"&&y!==null&&d!==null){if(typeof d!="object"||Object.keys(y).length!==Object.keys(d).length)return!1;for(const m in y)if(!p(y[m],d[m]))return!1;return!0}return y===d}var _=b;function b(y){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,k,M=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(M);try{k=new Worker(j),T=!0}catch{T=!1}return k&&k.terminate(),URL.revokeObjectURL(j),T}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var T=document.createElement("canvas");T.width=T.height=1;var k=T.getContext("2d");if(!k)return!1;var M=k.getImageData(0,0,1,1);return M&&M.width===T.width}()?(S[m=d&&d.failIfMajorPerformanceCaveat]===void 0&&(S[m]=function(T){var k,M=function(j){var W=document.createElement("canvas"),Q=Object.create(b.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=j,W.getContext("webgl",Q)||W.getContext("experimental-webgl",Q)}(T);if(!M)return!1;try{k=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!k||M.isContextLost())&&(M.shaderSource(k,"void main() {}"),M.compileShader(k),M.getShaderParameter(k,M.COMPILE_STATUS)===!0)}(m)),S[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m}(y)}var S={};function E(y,d,m){const T=s.window.document.createElement(y);return d!==void 0&&(T.className=d),m&&m.appendChild(T),T}function I(y,d,m){const T=s.window.document.createElementNS("http://www.w3.org/2000/svg",y);for(const k of Object.keys(d))T.setAttributeNS(null,k,d[k]);return m&&m.appendChild(T),T}b.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const R=s.window.document&&s.window.document.documentElement.style,V=R&&R.userSelect!==void 0?"userSelect":"WebkitUserSelect";let q;function U(){R&&V&&(q=R[V],R[V]="none")}function H(){R&&V&&(R[V]=q)}function Z(y){y.preventDefault(),y.stopPropagation(),s.window.removeEventListener("click",Z,!0)}function ne(){s.window.addEventListener("click",Z,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",Z,!0)},0)}function ie(y,d){const m=y.getBoundingClientRect();return de(y,m,d)}function oe(y,d){const m=y.getBoundingClientRect(),T=[];for(let k=0;k<d.length;k++)T.push(de(y,m,d[k]));return T}function pe(y){return s.window.InstallTrigger!==void 0&&y.button===2&&y.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:y.button}function de(y,d,m){const T=y.offsetWidth===d.width?1:y.offsetWidth/d.width;return new s.pointGeometry((m.clientX-d.left)*T,(m.clientY-d.top)*T)}function fe(y,d){var m=d[0],T=d[1],k=d[2],M=d[3],j=m*M-k*T;return j?(y[0]=M*(j=1/j),y[1]=-T*j,y[2]=-k*j,y[3]=m*j,y):null}function ge(y){const{userImage:d}=y;return!!(d&&d.render&&d.render())&&(y.data.replace(new Uint8Array(d.data.buffer)),!0)}class we extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:m,callback:T}of this.requestors)this._notify(m,T);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,m){this._validate(d,m)&&(this.images[d]=m)}_validate(d,m){let T=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),T=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),T=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),T=!1),T}_validateStretch(d,m){if(!d)return!0;let T=0;for(const k of d){if(k[0]<T||k[1]<k[0]||m<k[1])return!1;T=k[1]}return!0}_validateContent(d,m){return!(d&&(d.length!==4||d[0]<0||m.data.width<d[0]||d[1]<0||m.data.height<d[1]||d[2]<0||m.data.width<d[2]||d[3]<0||m.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,m){m.version=this.images[d].version+1,this.images[d]=m,this.updatedImages[d]=!0}removeImage(d){const m=this.images[d];delete this.images[d],delete this.patterns[d],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,m){let T=!0;if(!this.isLoaded())for(const k of d)this.images[k]||(T=!1);this.isLoaded()||T?this._notify(d,m):this.requestors.push({ids:d,callback:m})}_notify(d,m){const T={};for(const k of d){this.images[k]||this.fire(new s.Event("styleimagemissing",{id:k}));const M=this.images[k];M?T[k]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:s.warnOnce(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,T)}getPixelSize(){const{width:d,height:m}=this.atlasImage;return{width:d,height:m}}getPattern(d){const m=this.patterns[d],T=this.getImage(d);if(!T)return null;if(m&&m.position.version===T.version)return m.position;if(m)m.position.version=T.version;else{const k={w:T.data.width+2,h:T.data.height+2,x:0,y:0},M=new s.ImagePosition(k,T);this.patterns[d]={bin:k,position:M}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const m=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(d,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const M in this.patterns)d.push(this.patterns[M].bin);const{w:m,h:T}=s.potpack(d),k=this.atlasImage;k.resize({width:m||1,height:T||1});for(const M in this.patterns){const{bin:j}=this.patterns[M],W=j.x+1,Q=j.y+1,le=this.images[M].data,ae=le.width,ve=le.height;s.RGBAImage.copy(le,k,{x:0,y:0},{x:W,y:Q},{width:ae,height:ve}),s.RGBAImage.copy(le,k,{x:0,y:ve-1},{x:W,y:Q-1},{width:ae,height:1}),s.RGBAImage.copy(le,k,{x:0,y:0},{x:W,y:Q+ve},{width:ae,height:1}),s.RGBAImage.copy(le,k,{x:ae-1,y:0},{x:W-1,y:Q},{width:1,height:ve}),s.RGBAImage.copy(le,k,{x:0,y:0},{x:W+ae,y:Q},{width:1,height:ve})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const m of d){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const T=this.images[m];ge(T)&&this.updateImage(m,T)}}}const Ie=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(y,d){return function([m,T,k]){const M=s.degToRad(T+90),j=s.degToRad(k);return{x:m*Math.cos(M)*Math.sin(j),y:m*Math.sin(M)*Math.sin(j),z:m*Math.cos(j),azimuthal:T,polar:k}}(y.expression.evaluate(d))}interpolate(y,d,m){return{x:s.number(y.x,d.x,m),y:s.number(y.y,d.y,m),z:s.number(y.z,d.z,m),azimuthal:s.number(y.azimuthal,d.azimuthal,m),polar:s.number(y.polar,d.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Oe="-transition";class ke extends s.Evented{constructor(d){super(),this._transitionable=new s.Transitionable(Ie),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,m={}){if(!this._validate(s.validateLight,d,m))for(const T in d){const k=d[T];s.endsWith(T,Oe)?this._transitionable.setTransition(T.slice(0,-Oe.length),k):this._transitionable.setValue(T,k)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,m,T){return(!T||T.validate!==!1)&&s.emitValidationErrors(this,d.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Ee=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),Qe="-transition";class gt extends s.Evented{constructor(d,m){super(),this._transitionable=new s.Transitionable(Ee),this.set(d),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=m}get(){return this._transitionable.serialize()}set(d){for(const m in d){const T=d[m];s.endsWith(m,Qe)?this._transitionable.setTransition(m.slice(0,-Qe.length),T):this._transitionable.setValue(m,T)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}}function nt(y,d,m,T){const k=s.smoothstep(45,65,m),[M,j]=ft(y,T),W=s.length(d);let Q=1-Math.min(1,Math.exp((W-M)/(j-M)*-6));return Q*=Q*Q,Q=Math.min(1,1.00747*Q),Q*k*y.alpha}function ft(y,d){const m=.5/Math.tan(.5*d);return[y.range[0]+m,y.range[1]+m]}const Tt=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])}),pt="-transition";class et extends s.Evented{constructor(d,m){super(),this._transitionable=new s.Transitionable(Tt),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const d=this._transform,m=d.projection.name==="globe",T=s.globeToMercatorTransition(d.zoom),k=this.properties.get("range"),M=[.5,3];return{range:m?[s.number(M[0],k[0],T),s.number(M[1],k[1],T)]:k,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,m={}){if(!this._validate(s.validateFog,d,m)){for(const T of Object.keys(s.spec.fog))d&&d[T]===void 0&&(d[T]=s.spec.fog[T].default);for(const T in d){const k=d[T];s.endsWith(T,pt)?this._transitionable.setTransition(T.slice(0,-pt.length),k):this._transitionable.setValue(T,k)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,d))*m.a}getOpacityAtLatLng(d,m){return this._transform.projection.supportsFog?function(T,k,M){const j=s.MercatorCoordinate.fromLngLat(k),W=M.elevation?M.elevation.getAtPointOrZero(j):0,Q=[j.x,j.y,W];return s.transformMat4(Q,Q,M.mercatorFogMatrix),nt(T,Q,M.pitch,M._fov)}(this.state,d,m):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?ft(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,m,T){return(!T||T.validate!==!1)&&s.emitValidationErrors(this,d.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Mt{constructor(d,m){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const T=this.workerPool.acquire(this.id);for(let k=0;k<T.length;k++){const M=new Mt.Actor(T[k],m,this.id);M.name=`Worker ${k}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,m,T){s.asyncAll(this.actors,(k,M)=>{k.send(d,m,M)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Qt(y,d,m){return d*(s.EXTENT/(y.tileSize*Math.pow(2,m-y.tileID.overscaledZ)))}Mt.Actor=s.Actor;class Fe{constructor(d,m,T,k){this.screenBounds=d,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,k)}static createFromScreenPoints(d,m){let T,k;if(d instanceof s.pointGeometry||typeof d[0]=="number"){const M=s.pointGeometry.convert(d);T=[M],k=m.isPointAboveHorizon(M)}else{const M=s.pointGeometry.convert(d[0]),j=s.pointGeometry.convert(d[1]);T=[M,j],k=s.polygonizeBounds(M,j).every(W=>m.isPointAboveHorizon(W))}return new Fe(T,m.getCameraPoint(),k,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(d){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const m=this.screenBounds[0],T=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],k=s.polygonizeBounds(m,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<T.x?k.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?k[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(k[3]=this.cameraPoint)),s.bufferConvexPolygon(k,d)}bufferedCameraGeometryGlobe(d){const m=this.screenBounds[0],T=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],k=s.polygonizeBounds(m,T,d),M=this.cameraPoint.clone();switch(3*((M.y>m.y)+(M.y>T.y))+((M.x>m.x)+(M.x>T.x))){case 0:k[0]=M,k[4]=M.clone();break;case 1:k.splice(1,0,M);break;case 2:k[1]=M;break;case 3:k.splice(4,0,M);break;case 5:k.splice(2,0,M);break;case 6:k[3]=M;break;case 7:k.splice(3,0,M);break;case 8:k[2]=M}return k}containsTile(d,m,T,k=0){const M=d.queryPadding/m._pixelsPerMercatorPixel+1,j=T?this._bufferedCameraMercator(M,m):this._bufferedScreenMercator(M,m);let W=d.tileID.wrap+(j.unwrapped?k:0);const Q=j.polygon.map(Ue=>s.getTilePoint(d.tileTransform,Ue,W));if(!s.polygonIntersectsBox(Q,0,0,s.EXTENT,s.EXTENT))return;W=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?k:0);const le=this.screenGeometryMercator.polygon.map(Ue=>s.getTileVec3(d.tileTransform,Ue,W)),ae=le.map(Ue=>new s.pointGeometry(Ue[0],Ue[1])),ve=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),Ae=s.getTileVec3(d.tileTransform,ve,W),Be=le.map(Ue=>{const Ce=s.sub(Ue,Ue,Ae);return s.normalize(Ce,Ce),new s.Ray(Ae,Ce)}),$e=Qt(d,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ae,tilespaceRays:Be,bufferedTilespaceGeometry:Q,bufferedTilespaceBounds:(Ne=s.getBounds(Q),Ne.min.x=s.clamp(Ne.min.x,0,s.EXTENT),Ne.min.y=s.clamp(Ne.min.y,0,s.EXTENT),Ne.max.x=s.clamp(Ne.max.x,0,s.EXTENT),Ne.max.y=s.clamp(Ne.max.y,0,s.EXTENT),Ne),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:$e};var Ne}_bufferedScreenMercator(d,m){const T=Xt(d);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let k;return k=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(d),m):{polygon:this.bufferedScreenGeometry(d).map(M=>m.pointCoordinate3D(M)),unwrapped:!0},this._screenRaycastCache[T]=k,k}}_bufferedCameraMercator(d,m){const T=Xt(d);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let k;return k=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),m):{polygon:this.bufferedCameraGeometry(d).map(M=>m.pointCoordinate3D(M)),unwrapped:!0},this._cameraRaycastCache[T]=k,k}}_projectAndResample(d,m){const T=function(M,j){const W=s.multiply([],j.pixelMatrix,j.globeMatrix),Q=[0,-s.GLOBE_RADIUS,0,1],le=[0,s.GLOBE_RADIUS,0,1],ae=[0,0,0,1];s.transformMat4$1(Q,Q,W),s.transformMat4$1(le,le,W),s.transformMat4$1(ae,ae,W);const ve=new s.pointGeometry(Q[0]/Q[3],Q[1]/Q[3]),Ae=new s.pointGeometry(le[0]/le[3],le[1]/le[3]),Be=s.polygonContainsPoint(M,ve)&&Q[3]<ae[3],$e=s.polygonContainsPoint(M,Ae)&&le[3]<ae[3];if(!Be&&!$e)return null;const Ne=function(xt,It,Dt){for(let Nt=1;Nt<xt.length;Nt++){const Ti=Rt(It.pointCoordinate3D(xt[Nt-1]).x),Ot=Rt(It.pointCoordinate3D(xt[Nt]).x);if(Dt<0){if(Ti<Ot)return{idx:Nt,t:-Ti/(Ot-1-Ti)}}else if(Ot<Ti)return{idx:Nt,t:(1-Ti)/(Ot+1-Ti)}}return null}(M,j,Be?-1:1);if(!Ne)return null;const{idx:Ue,t:Ce}=Ne;let Ke=Ue>1?tt(M.slice(0,Ue),j):[],Ye=Ue<M.length?tt(M.slice(Ue),j):[];Ke=Ke.map(xt=>new s.pointGeometry(Rt(xt.x),xt.y)),Ye=Ye.map(xt=>new s.pointGeometry(Rt(xt.x),xt.y));const Je=[...Ke];Je.length===0&&Je.push(Ye[Ye.length-1]);const mt=s.number(Je[Je.length-1].y,(Ye.length===0?Ke[0]:Ye[0]).y,Ce);let ut;return ut=Be?[new s.pointGeometry(0,mt),new s.pointGeometry(0,0),new s.pointGeometry(1,0),new s.pointGeometry(1,mt)]:[new s.pointGeometry(1,mt),new s.pointGeometry(1,1),new s.pointGeometry(0,1),new s.pointGeometry(0,mt)],Je.push(...ut),Ye.length===0?Je.push(Ke[0]):Je.push(...Ye),{polygon:Je.map(xt=>new s.MercatorCoordinate(xt.x,xt.y)),unwrapped:!1}}(d,m);if(T)return T;const k=function(M,j){let W=!1,Q=-1/0,le=0;for(let ve=0;ve<M.length-1;ve++)M[ve].x>Q&&(Q=M[ve].x,le=ve);for(let ve=0;ve<M.length-1;ve++){const Ae=(le+ve)%(M.length-1),Be=M[Ae],$e=M[Ae+1];Math.abs(Be.x-$e.x)>.5&&(Be.x<$e.x?(Be.x+=1,Ae===0&&(M[M.length-1].x+=1)):($e.x+=1,Ae+1===M.length-1&&(M[0].x+=1)),W=!0)}const ae=s.mercatorXfromLng(j.center.lng);return W&&ae<Math.abs(ae-1)&&M.forEach(ve=>{ve.x-=1}),{polygon:M,unwrapped:W}}(tt(d,m).map(M=>new s.pointGeometry(Rt(M.x),M.y)),m);return{polygon:k.polygon.map(M=>new s.MercatorCoordinate(M.x,M.y)),unwrapped:k.unwrapped}}}function tt(y,d){return s.resample(y,m=>{const T=d.pointCoordinate3D(m);m.x=T.x,m.y=T.y},1/256)}function Rt(y){return y<0?1+y%1:y%1}function Xt(y){return 100*y|0}function Ei(y,d,m,T,k){const M=function(j,W){if(j)return k(j);if(W){y.url&&W.tiles&&y.tiles&&delete y.tiles;const Q=s.pick(s.extend(W,y),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);W.vector_layers&&(Q.vectorLayers=W.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(le=>le.id)),Q.tiles=d.canonicalizeTileset(Q,y.url),k(null,Q)}};return y.url?s.getJSON(d.transformRequest(d.normalizeSourceURL(y.url,null,m,T),s.ResourceType.Source),M):s.exported.frame(()=>M(null,y))}class Ni{constructor(d,m,T){this.bounds=s.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=m||0,this.maxzoom=T||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const m=Math.pow(2,d.z),T=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),k=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),M=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),j=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return d.x>=T&&d.x<M&&d.y>=k&&d.y<j}}class Vi{constructor(d,m,T){this.context=d;const k=d.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ve={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dt{constructor(d,m,T,k){this.length=m.length,this.attributes=T,this.itemSize=m.bytesPerElement,this.dynamicDraw=k,this.context=d;const M=d.gl;this.buffer=M.createBuffer(),d.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,m){for(let T=0;T<this.attributes.length;T++){const k=m.attributes[this.attributes[T].name];k!==void 0&&d.enableVertexAttribArray(k)}}setVertexAttribPointers(d,m,T){for(let k=0;k<this.attributes.length;k++){const M=this.attributes[k],j=m.attributes[M.name];j!==void 0&&d.vertexAttribPointer(j,M.components,d[Ve[M.type]],!1,this.itemSize,M.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class kt{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xe extends kt{getDefault(){return s.Color.transparent}set(d){const m=this.current;(d.r!==m.r||d.g!==m.g||d.b!==m.b||d.a!==m.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class it extends kt{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class ct extends kt{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class At extends kt{getDefault(){return[!0,!0,!0,!0]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||d[3]!==m[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Gt extends kt{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Bt extends kt{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class Yt extends kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const m=this.current;(d.func!==m.func||d.ref!==m.ref||d.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class gi extends kt{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class _i extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=d,this.dirty=!1}}class zi extends kt{getDefault(){return[0,1]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Hi extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=d,this.dirty=!1}}class Zi extends kt{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Ci extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.BLEND):m.disable(m.BLEND),this.current=d,this.dirty=!1}}class ci extends kt{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Si extends kt{getDefault(){return s.Color.transparent}set(d){const m=this.current;(d.r!==m.r||d.g!==m.g||d.b!==m.b||d.a!==m.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class sn extends kt{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class vn extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;d?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=d,this.dirty=!1}}class hn extends kt{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class Nn extends kt{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class yr extends kt{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class Mr extends kt{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class Yr extends kt{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const m=this.current;(d[0]!==m[0]||d[1]!==m[1]||d[2]!==m[2]||d[3]!==m[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class fr extends kt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Ko extends kt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class An extends kt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class Is extends kt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Xr extends kt{getDefault(){return null}set(d){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Fo extends kt{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class za extends kt{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Hl extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class va extends kt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class ps extends kt{constructor(d,m){super(d),this.context=d,this.parent=m}getDefault(){return null}}class Fr extends ps{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class ms extends ps{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Io extends ms{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class gs{constructor(d,m,T,k){this.context=d,this.width=m,this.height=T;const M=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new Fr(d,M),k&&(this.depthAttachment=new ms(d,M))}destroy(){const d=this.context.gl,m=this.colorAttachment.get();if(m&&d.deleteTexture(m),this.depthAttachment){const T=this.depthAttachment.get();T&&d.deleteRenderbuffer(T)}d.deleteFramebuffer(this.framebuffer)}}class Ge{constructor(d,m=!1){if(this.gl=d,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const T=d;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(d),deleteVertexArrayOES:T.deleteVertexArray.bind(d),bindVertexArrayOES:T.bindVertexArray.bind(d)}}this.clearColor=new Xe(this),this.clearDepth=new it(this),this.clearStencil=new ct(this),this.colorMask=new At(this),this.depthMask=new Gt(this),this.stencilMask=new Bt(this),this.stencilFunc=new Yt(this),this.stencilOp=new gi(this),this.stencilTest=new _i(this),this.depthRange=new zi(this),this.depthTest=new Hi(this),this.depthFunc=new Zi(this),this.blend=new Ci(this),this.blendFunc=new ci(this),this.blendColor=new Si(this),this.blendEquation=new sn(this),this.cullFace=new vn(this),this.cullFaceSide=new hn(this),this.frontFace=new Nn(this),this.program=new yr(this),this.activeTexture=new Mr(this),this.viewport=new Yr(this),this.bindFramebuffer=new fr(this),this.bindRenderbuffer=new Ko(this),this.bindTexture=new An(this),this.bindVertexBuffer=new Is(this),this.bindElementBuffer=new Xr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Fo(this),this.pixelStoreUnpack=new za(this),this.pixelStoreUnpackPremultiplyAlpha=new Hl(this),this.pixelStoreUnpackFlipY=new va(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,m){return new Vi(this,d,m)}createVertexBuffer(d,m,T){return new dt(this,d,m,T)}createRenderbuffer(d,m,T){const k=this.gl,M=k.createRenderbuffer();return this.bindRenderbuffer.set(M),k.renderbufferStorage(k.RENDERBUFFER,d,m,T),this.bindRenderbuffer.set(null),M}createFramebuffer(d,m,T){return new gs(this,d,m,T)}clear({color:d,depth:m,stencil:T}){const k=this.gl;let M=0;d&&(M|=k.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(M|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),T!==void 0&&(M|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),k.clear(M)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){p(d.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class _e extends s.Evented{constructor(d,m,T,k){if(super(),this.id=d,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(d){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=Ei(this._options,this.map._requestManager,m,T,(k,M)=>{this._tileJSONRequest=null,this._loaded=!0,k?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),T&&T.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new s.ErrorEvent(k))):M&&(s.extend(this,M),M.bounds&&(this.tileBounds=new Ni(M.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(M.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(k)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(d,m){const T=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),k={request:this.map._requestManager.transformRequest(T,s.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(k.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired")d.state==="loading"?d.reloadCallback=m:d.request=d.actor.send("reloadTile",k,M.bind(this));else if(d.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",k,M.bind(this),void 0,!0);else{const j=s.loadVectorTile.call({deduped:this._deduped},k,(W,Q)=>{W||!Q?M.call(this,W):(k.data={cacheControl:Q.cacheControl,expires:Q.expires,rawData:Q.rawData.slice(0)},d.actor&&d.actor.send("loadTile",k,M.bind(this),void 0,!0))},!0);d.request={cancel:j}}function M(j,W){return delete d.request,d.aborted?m(null):j&&j.status!==404?m(j):(W&&W.resourceTiming&&(d.resourceTiming=W.resourceTiming),this.map._refreshExpiredTiles&&W&&d.setExpiryData(W),d.loadVectorData(W,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Te extends s.Evented{constructor(d,m,T,k){super(),this.id=d,this.dispatcher=T,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ei(this._options,this.map._requestManager,null,null,(m,T)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):T&&(s.extend(this,T),T.bounds&&(this.tileBounds=new Ni(T.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(T.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(m)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,m){const T=s.exported.devicePixelRatio>=2,k=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);d.request=s.getImage(this.map._requestManager.transformRequest(k,s.ResourceType.Tile),(M,j,W,Q)=>(delete d.request,d.aborted?(d.state="unloaded",m(null)):M?(d.state="errored",m(M)):j?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:W,expires:Q}),d.setTexture(j,this.map.painter),d.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null)))}static loadTileData(d,m,T){d.setTexture(m,T)}static unloadTileData(d,m){d.texture&&m.saveTileTexture(d.texture)}abortTile(d,m){d.request&&(d.request.cancel(),delete d.request),m()}unloadTile(d,m){d.texture&&this.map.painter.saveTileTexture(d.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ze;function De(y,d,m,T,k,M,j,W){const Q=[y,m,k,d,T,M,1,1,1],le=[j,W,1],ae=s.adjoint([],Q),[ve,Ae,Be]=s.transformMat3(le,le,s.transpose(ae,ae));return s.multiply$1(Q,[ve,0,0,0,Ae,0,0,0,Be],Q)}class _t extends s.Evented{constructor(d,m,T,k){super(),this.id=d,this.dispatcher=T,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=m,this._dirty=!1}load(d,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(T,k)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new s.ErrorEvent(T));else if(k){const{HTMLImageElement:M}=s.window;this.image=k instanceof M?s.exported.getImageData(k):k,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const m=d.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let k=1/0,M=1/0,j=-1/0,W=-1/0;for(const ve of T)k=Math.min(k,ve.x),M=Math.min(M,ve.y),j=Math.max(j,ve.x),W=Math.max(W,ve.y);const Q=Math.max(j-k,W-M),le=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),ae=Math.pow(2,le);return new s.CanonicalTileID(le,Math.floor((k+j)/2*ae),Math.floor((M+W)/2*ae))}(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const Q in this.tiles){const le=this.tiles[Q];le.state!=="loaded"&&(le.state="loaded",le.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[T,k,M,j]=this.coordinates.map(Q=>{const le=m.projection.project(Q[0],Q[1]);return s.getTilePoint(m,le)._round()});this.perspectiveTransform=function(Q,le,ae,ve,Ae,Be,$e,Ne,Ue,Ce){const Ke=De(0,0,Q,0,0,le,Q,le),Ye=De(ae,ve,Ae,Be,$e,Ne,Ue,Ce);return s.multiply$1(Ye,s.adjoint(Ke,Ke),Ye),[Ye[6]/Ye[8]*Q/s.EXTENT,Ye[7]/Ye[8]*le/s.EXTENT]}(this.width,this.height,T.x,T.y,k.x,k.y,j.x,j.y,M.x,M.y);const W=this._boundsArray=new s.StructArrayLayout4i8;W.emplaceBack(T.x,T.y,0,0),W.emplaceBack(k.x,k.y,s.EXTENT,0),W.emplaceBack(j.x,j.y,0,s.EXTENT),W.emplaceBack(M.x,M.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(W,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,m=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(d,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,m){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},m(null)):(d.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ct={vector:_e,raster:Te,"raster-dem":class extends Te{constructor(y,d,m,T){super(y,d,m,T),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(y,d){const m=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(k,M){k&&(y.state="errored",d(k)),M&&(y.dem=M,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",d(null))}y.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),function(k,M,j,W){if(delete y.request,y.aborted)y.state="unloaded",d(null);else if(k)y.state="errored",d(k);else if(M){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:j,expires:W});const Q=s.window.ImageBitmap&&M instanceof s.window.ImageBitmap&&(ze==null&&(ze=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),ze),le=1-(M.width-s.prevPowerOfTwo(M.width))/2;le<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const ae=Q?M:s.exported.getImageData(M,le),ve={uid:y.uid,coord:y.tileID,source:this.id,rawImageData:ae,encoding:this.encoding,padding:le};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadDEMTile",ve,T.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(y){const d=y.canonical,m=Math.pow(2,d.z),T=(d.x-1+m)%m,k=d.x===0?y.wrap-1:y.wrap,M=(d.x+1+m)%m,j=d.x+1===m?y.wrap+1:y.wrap,W={};return W[new s.OverscaledTileID(y.overscaledZ,k,d.z,T,d.y).key]={backfilled:!1},W[new s.OverscaledTileID(y.overscaledZ,j,d.z,M,d.y).key]={backfilled:!1},d.y>0&&(W[new s.OverscaledTileID(y.overscaledZ,k,d.z,T,d.y-1).key]={backfilled:!1},W[new s.OverscaledTileID(y.overscaledZ,y.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},W[new s.OverscaledTileID(y.overscaledZ,j,d.z,M,d.y-1).key]={backfilled:!1}),d.y+1<m&&(W[new s.OverscaledTileID(y.overscaledZ,k,d.z,T,d.y+1).key]={backfilled:!1},W[new s.OverscaledTileID(y.overscaledZ,y.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},W[new s.OverscaledTileID(y.overscaledZ,j,d.z,M,d.y+1).key]={backfilled:!1}),W}unloadTile(y){y.demTexture&&this.map.painter.saveTileTexture(y.demTexture),y.fbo&&(y.fbo.destroy(),delete y.fbo),y.dem&&delete y.dem,delete y.neighboringTiles,y.state="unloaded"}},geojson:class extends s.Evented{constructor(y,d,m,T){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(T),this._data=d.data,this._options=s.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const k=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*k,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*k,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.EXTENT,radius:(d.clusterRadius!==void 0?d.clusterRadius:50)*k,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}getClusterExpansionZoom(y,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id},d),this}getClusterChildren(y,d){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id},d),this}getClusterLeaves(y,d,m,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:y,limit:d,offset:m},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const y=s.extend({},this.workerOptions),d=this._data;typeof d=="string"?(y.request=this.map._requestManager.transformRequest(s.exported.resolveURL(d),s.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,y,(m,T)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const k={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(k.resourceTiming=T.resourceTiming[this.id]),this.fire(new s.Event("data",k)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(y,d){const m=y.actor?"reloadTile":"loadTile";y.actor=this.actor,y.request=this.actor.send(m,{type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,k)=>(delete y.request,y.unloadVectorData(),y.aborted?d(null):T?d(T):(y.loadVectorData(k,this.map.painter,m==="reloadTile"),d(null))),void 0,m==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y){y.unloadVectorData(),this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends _t{constructor(y,d,m,T){super(y,d,m,T),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const d of y.urls)this.urls.push(this.map._requestManager.transformRequest(d,s.ResourceType.Source).url);s.getVideo(this.urls,(d,m)=>{this._loaded=!0,d?this.fire(new s.ErrorEvent(d)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const d=this.video.seekable;y<d.start(0)||y>d.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,d=y.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(y,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:_t,canvas:class extends _t{constructor(y,d,m,T){super(y,d,m,T),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(M=>typeof M!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${y}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context;this.texture?(y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends s.Evented{constructor(y,d,m,T){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=d,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ni(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this._map=y,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:d,y:m,z:T}=y.canonical;return this._implementation.hasTile({x:d,y:m,z:T})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,d){const{x:m,y:T,z:k}=y.tileID.canonical,M=new s.window.AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:m,y:T,z:k},{signal:M.signal})).then(function(j){return delete y.request,y.aborted?(y.state="unloaded",d(null)):j===void 0?(y.state="errored",d(null)):j===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",d(null)):function(W){return W instanceof s.window.ImageData||W instanceof s.window.HTMLCanvasElement||W instanceof s.window.ImageBitmap||W instanceof s.window.HTMLImageElement}(j)?(this.loadTileData(y,j),y.state="loaded",void d(null)):(y.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(j=>{j.code!==20&&(y.state="errored",d(j))}),y.request.cancel=()=>M.abort()}loadTileData(y,d){Te.loadTileData(y,d,this._map.painter)}unloadTileData(y){Te.unloadTileData(y,this._map.painter)}unloadTile(y,d){if(this.unloadTileData(y),this._implementation.unloadTile){const{x:m,y:T,z:k}=y.tileID.canonical;this._implementation.unloadTile({x:m,y:T,z:k})}d()}abortTile(y,d){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},St=function(y,d,m,T){const k=new Ct[d.type](y,d,m,T);if(k.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${k.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],k),k};function vt(y,d){const m=s.identity([]);return s.scale(m,m,[.5*y.width,.5*-y.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,y.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(m)}function Pt(y,d,m,T,k,M,j,W=!1){const Q=y.tilesIn(T,j,W);Q.sort(Ii);const le=[];for(const ve of Q)le.push({wrappedTileID:ve.tile.tileID.wrapped().key,queryResults:ve.tile.queryRenderedFeatures(d,m,y._state,ve,k,M,vt(y.transform,ve.tile.tileID),W)});const ae=function(ve){const Ae={},Be={};for(const $e of ve){const Ne=$e.queryResults,Ue=$e.wrappedTileID,Ce=Be[Ue]=Be[Ue]||{};for(const Ke in Ne){const Ye=Ne[Ke],Je=Ce[Ke]=Ce[Ke]||{},mt=Ae[Ke]=Ae[Ke]||[];for(const ut of Ye)Je[ut.featureIndex]||(Je[ut.featureIndex]=!0,mt.push(ut))}}return Ae}(le);for(const ve in ae)ae[ve].forEach(Ae=>{const Be=Ae.feature,$e=Be.layer;$e&&$e.type!=="background"&&$e.type!=="sky"&&(Be.source=$e.source,$e["source-layer"]&&(Be.sourceLayer=$e["source-layer"]),Be.state=Be.id!==void 0?y.getFeatureState($e["source-layer"],Be.id):{})});return ae}function jt(y,d){const m=y.getRenderableIds().map(M=>y.getTileByID(M)),T=[],k={};for(let M=0;M<m.length;M++){const j=m[M],W=j.tileID.canonical.key;k[W]||(k[W]=!0,j.querySourceFeatures(T,d))}return T}function Ii(y,d){const m=y.tileID,T=d.tileID;return m.overscaledZ-T.overscaledZ||m.canonical.y-T.canonical.y||m.wrap-T.wrap||m.canonical.x-T.canonical.x}function ai(){return Qf.workerClass!=null?new Qf.workerClass:new s.window.Worker(Qf.workerUrl)}const Ji="mapboxgl_preloaded_worker_pool";class Qi{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<Qi.workerCount;)this.workers.push(new ai);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(m=>{m.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ji]}numActive(){return Object.keys(this.active).length}}let Gi;function Bi(){return Gi||(Gi=new Qi),Gi}function yn(y,d){const m={};for(const T in y)T!=="ref"&&(m[T]=y[T]);return s.refProperties.forEach(T=>{T in d&&(m[T]=d[T])}),m}function Ln(y){y=y.slice();const d=Object.create(null);for(let m=0;m<y.length;m++)d[y[m].id]=y[m];for(let m=0;m<y.length;m++)"ref"in y[m]&&(y[m]=yn(y[m],d[y[m].ref]));return y}Qi.workerCount=2;const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Jn(y,d,m){m.push({command:rn.addSource,args:[y,d[y]]})}function er(y,d,m){d.push({command:rn.removeSource,args:[y]}),m[y]=!0}function ya(y,d,m,T){er(y,m,T),Jn(y,d,m)}function $o(y,d,m){let T;for(T in y[m])if(y[m].hasOwnProperty(T)&&T!=="data"&&!p(y[m][T],d[m][T]))return!1;for(T in d[m])if(d[m].hasOwnProperty(T)&&T!=="data"&&!p(y[m][T],d[m][T]))return!1;return!0}function Wt(y,d,m,T,k,M){let j;for(j in d=d||{},y=y||{})y.hasOwnProperty(j)&&(p(y[j],d[j])||m.push({command:M,args:[T,j,d[j],k]}));for(j in d)d.hasOwnProperty(j)&&!y.hasOwnProperty(j)&&(p(y[j],d[j])||m.push({command:M,args:[T,j,d[j],k]}))}function Po(y){return y.id}function pr(y,d){return y[d.id]=d,y}class ba{constructor(d,m){this.reset(d,m)}reset(d,m){this.points=d||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=s.clamp(d,0,1);let m=1,T=this._distances[m];const k=d*this.paddedLength+this.padding;for(;T<k&&m<this._distances.length;)T=this._distances[++m];const M=m-1,j=this._distances[M],W=T-j,Q=W>0?(k-j)/W:0;return this.points[M].mult(1-Q).add(this.points[m].mult(Q))}}class Lc{constructor(d,m,T){const k=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(d/T),this.yCellCount=Math.ceil(m/T);for(let j=0;j<this.xCellCount*this.yCellCount;j++)k.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=m,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,m,T,k,M){this._forEachCell(m,T,k,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(m),this.bboxes.push(T),this.bboxes.push(k),this.bboxes.push(M)}insertCircle(d,m,T,k){this._forEachCell(m-k,T-k,m+k,T+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(m),this.circles.push(T),this.circles.push(k)}_insertBoxCell(d,m,T,k,M,j){this.boxCells[M].push(j)}_insertCircleCell(d,m,T,k,M,j){this.circleCells[M].push(j)}_query(d,m,T,k,M,j){if(T<0||d>this.width||k<0||m>this.height)return!M&&[];const W=[];if(d<=0&&m<=0&&this.width<=T&&this.height<=k){if(M)return!0;for(let Q=0;Q<this.boxKeys.length;Q++)W.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const le=this.circles[3*Q],ae=this.circles[3*Q+1],ve=this.circles[3*Q+2];W.push({key:this.circleKeys[Q],x1:le-ve,y1:ae-ve,x2:le+ve,y2:ae+ve})}return j?W.filter(j):W}return this._forEachCell(d,m,T,k,this._queryCell,W,{hitTest:M,seenUids:{box:{},circle:{}}},j),M?W.length>0:W}_queryCircle(d,m,T,k,M){const j=d-T,W=d+T,Q=m-T,le=m+T;if(W<0||j>this.width||le<0||Q>this.height)return!k&&[];const ae=[];return this._forEachCell(j,Q,W,le,this._queryCellCircle,ae,{hitTest:k,circle:{x:d,y:m,radius:T},seenUids:{box:{},circle:{}}},M),k?ae.length>0:ae}query(d,m,T,k,M){return this._query(d,m,T,k,!1,M)}hitTest(d,m,T,k,M){return this._query(d,m,T,k,!0,M)}hitTestCircle(d,m,T,k){return this._queryCircle(d,m,T,!0,k)}_queryCell(d,m,T,k,M,j,W,Q){const le=W.seenUids,ae=this.boxCells[M];if(ae!==null){const Ae=this.bboxes;for(const Be of ae)if(!le.box[Be]){le.box[Be]=!0;const $e=4*Be;if(d<=Ae[$e+2]&&m<=Ae[$e+3]&&T>=Ae[$e+0]&&k>=Ae[$e+1]&&(!Q||Q(this.boxKeys[Be]))){if(W.hitTest)return j.push(!0),!0;j.push({key:this.boxKeys[Be],x1:Ae[$e],y1:Ae[$e+1],x2:Ae[$e+2],y2:Ae[$e+3]})}}}const ve=this.circleCells[M];if(ve!==null){const Ae=this.circles;for(const Be of ve)if(!le.circle[Be]){le.circle[Be]=!0;const $e=3*Be;if(this._circleAndRectCollide(Ae[$e],Ae[$e+1],Ae[$e+2],d,m,T,k)&&(!Q||Q(this.circleKeys[Be]))){if(W.hitTest)return j.push(!0),!0;{const Ne=Ae[$e],Ue=Ae[$e+1],Ce=Ae[$e+2];j.push({key:this.circleKeys[Be],x1:Ne-Ce,y1:Ue-Ce,x2:Ne+Ce,y2:Ue+Ce})}}}}}_queryCellCircle(d,m,T,k,M,j,W,Q){const le=W.circle,ae=W.seenUids,ve=this.boxCells[M];if(ve!==null){const Be=this.bboxes;for(const $e of ve)if(!ae.box[$e]){ae.box[$e]=!0;const Ne=4*$e;if(this._circleAndRectCollide(le.x,le.y,le.radius,Be[Ne+0],Be[Ne+1],Be[Ne+2],Be[Ne+3])&&(!Q||Q(this.boxKeys[$e])))return j.push(!0),!0}}const Ae=this.circleCells[M];if(Ae!==null){const Be=this.circles;for(const $e of Ae)if(!ae.circle[$e]){ae.circle[$e]=!0;const Ne=3*$e;if(this._circlesCollide(Be[Ne],Be[Ne+1],Be[Ne+2],le.x,le.y,le.radius)&&(!Q||Q(this.circleKeys[$e])))return j.push(!0),!0}}}_forEachCell(d,m,T,k,M,j,W,Q){const le=this._convertToXCellCoord(d),ae=this._convertToYCellCoord(m),ve=this._convertToXCellCoord(T),Ae=this._convertToYCellCoord(k);for(let Be=le;Be<=ve;Be++)for(let $e=ae;$e<=Ae;$e++)if(M.call(this,d,m,T,k,this.xCellCount*$e+Be,j,W,Q))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,m,T,k,M,j){const W=k-d,Q=M-m,le=T+j;return le*le>W*W+Q*Q}_circleAndRectCollide(d,m,T,k,M,j,W){const Q=(j-k)/2,le=Math.abs(d-(k+Q));if(le>Q+T)return!1;const ae=(W-M)/2,ve=Math.abs(m-(M+ae));if(ve>ae+T)return!1;if(le<=Q||ve<=ae)return!0;const Ae=le-Q,Be=ve-ae;return Ae*Ae+Be*Be<=T*T}}const Qs=Math.tan(85*Math.PI/180);function En(y,d,m,T,k,M,j){const W=s.create();if(m)if(M.name==="globe"){const Q=s.calculateGlobeLabelMatrix(k,d);s.multiply(W,W,Q)}else{const Q=fe([],j);W[0]=Q[0],W[1]=Q[1],W[4]=Q[2],W[5]=Q[3],T||s.rotateZ(W,W,k.angle)}else s.multiply(W,k.labelPlaneMatrix,y);return W}function dr(y,d,m,T,k,M,j){const W=En(y,d,m,T,k,M,j);return M.name==="globe"&&m||(W[2]=W[6]=W[10]=W[14]=0),W}function Qo(y,d,m,T,k,M,j){if(m){if(M.name==="globe"){const W=En(y,d,m,T,k,M,j);return s.invert(W,W),s.multiply(W,y,W),W}{const W=s.clone(y),Q=s.identity([]);return Q[0]=j[0],Q[1]=j[1],Q[4]=j[2],Q[5]=j[3],s.multiply(W,W,Q),T||s.rotateZ(W,W,-k.angle),W}}return k.glCoordMatrix}function bi(y,d,m,T){const k=[y,d,m,1];m?s.transformMat4$1(k,k,T):tr(k,k,T);const M=k[3];return k[0]/=M,k[1]/=M,k[2]/=M,k}function _n(y,d){return Math.min(.5+y/d*.5,1.5)}function bn(y,d){const m=y[0]/y[3],T=y[1]/y[3];return m>=-d[0]&&m<=d[0]&&T>=-d[1]&&T<=d[1]}function fn(y,d,m,T,k,M,j,W,Q,le){const ae=m.transform,ve=T?y.textSizeData:y.iconSizeData,Ae=s.evaluateSizeForZoom(ve,m.transform.zoom),Be=ae.projection.name==="globe",$e=[256/m.width*2+1,256/m.height*2+1],Ne=T?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ne.clear();let Ue=null;Be&&(Ue=T?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const Ce=y.lineVertexArray,Ke=T?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ye=m.transform.width/m.transform.height;let Je,mt=!1;for(let ut=0;ut<Ke.length;ut++){const xt=Ke.get(ut),{numGlyphs:It,writingMode:Dt}=xt;if(Dt!==s.WritingMode.vertical||mt||Je===s.WritingMode.horizontal||(mt=!0),Je=Dt,(xt.hidden||Dt===s.WritingMode.vertical)&&!mt){In(It,Ne);continue}mt=!1;const Nt=new s.pointGeometry(xt.tileAnchorX,xt.tileAnchorY);let{x:Ti,y:Ot,z:ni}=ae.projection.projectTilePoint(Nt.x,Nt.y,le.canonical);if(Q){const[Rn,Yi,Ui]=Q(Nt);Ti+=Rn,Ot+=Yi,ni+=Ui}const qt=[Ti,Ot,ni,1];if(s.transformMat4$1(qt,qt,d),!bn(qt,$e)){In(It,Ne);continue}const ui=_n(m.transform.cameraToCenterDistance,qt[3]),Ft=s.evaluateSizeForFeature(ve,Ae,xt),Et=j?Ft/ui:Ft*ui,zt=bi(Ti,Ot,ni,k);if(zt[3]<=0){In(It,Ne);continue}let oi={};const hi=j?null:Q,en=go(xt,Et,!1,W,d,k,M,y.glyphOffsetArray,Ce,Ne,Ue,zt,Nt,oi,Ye,hi,ae.projection,le,j);mt=en.useVertical,hi&&en.needsFlipping&&(oi={}),(en.notEnoughRoom||mt||en.needsFlipping&&go(xt,Et,!0,W,d,k,M,y.glyphOffsetArray,Ce,Ne,Ue,zt,Nt,oi,Ye,hi,ae.projection,le,j).notEnoughRoom)&&In(It,Ne)}T?(y.text.dynamicLayoutVertexBuffer.updateData(Ne),Ue&&y.text.globeExtVertexBuffer.updateData(Ue)):(y.icon.dynamicLayoutVertexBuffer.updateData(Ne),Ue&&y.icon.globeExtVertexBuffer.updateData(Ue))}function nr(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne){const{lineStartIndex:Ue,glyphStartIndex:Ce,segment:Ke}=W,Ye=Ce+W.numGlyphs,Je=Ue+W.lineLength,mt=d.getoffsetX(Ce),ut=d.getoffsetX(Ye-1),xt=Ur(y*mt,m,T,k,M,j,Ke,Ue,Je,Q,le,ae,ve,Ae,!0,Be,$e,Ne);if(!xt)return null;const It=Ur(y*ut,m,T,k,M,j,Ke,Ue,Je,Q,le,ae,ve,Ae,!0,Be,$e,Ne);return It?{first:xt,last:It}:null}function xn(y,d,m,T){return y===s.WritingMode.horizontal&&Math.abs(T)>Math.abs(m)?{useVertical:!0}:y===s.WritingMode.vertical?T>0?{needsFlipping:!0}:null:d!==0&&function(k,M){return k===0||Math.abs(M/k)>Qs}(m,T)?d===1?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function go(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne,Ue,Ce,Ke){const Ye=d/24,Je=y.lineOffsetX*Ye,mt=y.lineOffsetY*Ye,{lineStartIndex:ut,glyphStartIndex:xt,numGlyphs:It,segment:Dt,writingMode:Nt,flipState:Ti}=y,Ot=ut+y.lineLength,ni=qt=>{if(ae){const[zt,oi,hi]=qt.up,en=le.length;s.updateGlobeVertexNormal(ae,en+0,zt,oi,hi),s.updateGlobeVertexNormal(ae,en+1,zt,oi,hi),s.updateGlobeVertexNormal(ae,en+2,zt,oi,hi),s.updateGlobeVertexNormal(ae,en+3,zt,oi,hi)}const[ui,Ft,Et]=qt.point;s.addDynamicAttributes(le,ui,Ft,Et,qt.angle)};if(It>1){const qt=nr(Ye,W,Je,mt,m,ve,Ae,y,Q,M,Be,Ne,!1,Ue,Ce,Ke);if(!qt)return{notEnoughRoom:!0};if(T&&!m){let[ui,Ft,Et]=qt.first.point,[zt,oi,hi]=qt.last.point;[ui,Ft]=bi(ui,Ft,Et,j),[zt,oi]=bi(zt,oi,hi,j);const en=xn(Nt,Ti,(zt-ui)*$e,oi-Ft);if(y.flipState=en&&en.needsFlipping?1:2,en)return en}ni(qt.first);for(let ui=xt+1;ui<xt+It-1;ui++){const Ft=Ur(Ye*W.getoffsetX(ui),Je,mt,m,ve,Ae,Dt,ut,Ot,Q,M,Be,Ne,!1,!1,Ue,Ce,Ke);if(!Ft)return le.length-=4*(ui-xt),{notEnoughRoom:!0};ni(Ft)}ni(qt.last)}else{if(T&&!m){const ui=bi(Ae.x,Ae.y,0,k),Ft=ut+Dt+1,Et=new s.pointGeometry(Q.getx(Ft),Q.gety(Ft)),zt=bi(Et.x,Et.y,0,k),oi=zt[3]>0?zt:Ps(Ae,Et,ui,1,k,void 0,Ue,Ce.canonical),hi=xn(Nt,Ti,(oi[0]-ui[0])*$e,oi[1]-ui[1]);if(y.flipState=hi&&hi.needsFlipping?1:2,hi)return hi}const qt=Ur(Ye*W.getoffsetX(xt),Je,mt,m,ve,Ae,Dt,ut,Ot,Q,M,Be,Ne,!1,!1,Ue,Ce,Ke);if(!qt)return{notEnoughRoom:!0};ni(qt)}return{}}function ns(y,d,m,T,k){const{x:M,y:j,z:W}=T.projectTilePoint(y.x,y.y,d);if(!k)return bi(M,j,W,m);const[Q,le,ae]=k(y);return bi(M+Q,j+le,W+ae,m)}function Ps(y,d,m,T,k,M,j,W){const Q=ns(y.sub(d)._unit()._add(y),W,k,j,M);return s.sub(Q,m,Q),s.normalize(Q,Q),s.scaleAndAdd(Q,m,Q,T)}function Ur(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne,Ue,Ce){const Ke=T?y-d:y+d;let Ye=Ke>0?1:-1,Je=0;T&&(Ye*=-1,Je=Math.PI),Ye<0&&(Je+=Math.PI);let mt=W+j+(Ye>0?0:1)|0,ut=k,xt=k,It=0,Dt=0;const Nt=Math.abs(Ke),Ti=[],Ot=[];let ni=M,qt=ni;const ui=()=>Ps(qt,ni,xt,Nt-It+1,ae,Ae,Ne,Ue.canonical);for(;It+Dt<=Nt;){if(mt+=Ye,mt<W||mt>=Q)return null;if(xt=ut,qt=ni,Ti.push(xt),Be&&Ot.push(qt),ni=new s.pointGeometry(le.getx(mt),le.gety(mt)),ut=ve[mt],!ut){const Ui=ns(ni,Ue.canonical,ae,Ne,Ae);ut=Ui[3]>0?ve[mt]=Ui:ui()}It+=Dt,Dt=s.distance(xt,ut)}$e&&Ae&&(ve[mt]&&(ut=ui(),Dt=s.distance(xt,ut)),ve[mt]=ut);const Ft=(Nt-It)/Dt,Et=ni.sub(qt)._mult(Ft)._add(qt),zt=s.sub([],ut,xt),oi=s.scaleAndAdd([],xt,zt,Ft);let hi=[0,0,1],en=zt[0],Rn=zt[1];if(Ce&&(hi=Ne.upVector(Ue.canonical,Et.x,Et.y),hi[0]!==0||hi[1]!==0||hi[2]!==1)){const Ui=[hi[2],0,-hi[0]],tn=s.cross([],hi,Ui);s.normalize(Ui,Ui),s.normalize(tn,tn),en=s.dot(zt,Ui),Rn=s.dot(zt,tn)}if(m){const Ui=s.cross([],hi,zt);s.normalize(Ui,Ui),s.scaleAndAdd(oi,oi,Ui,m*Ye)}const Yi=Je+Math.atan2(Rn,en);return Ti.push(oi),Be&&Ot.push(Et),{point:oi,angle:Yi,path:Ti,tilePath:Ot,up:hi}}function In(y,d){const m=d.length,T=m+4*y;d.resize(T),d.float32.fill(-1/0,4*m,4*T)}function tr(y,d,m){const T=d[0],k=d[1];return y[0]=m[0]*T+m[4]*k+m[12],y[1]=m[1]*T+m[5]*k+m[13],y[3]=m[3]*T+m[7]*k+m[15],y}const Or=100;class Ao{constructor(d,m,T=new Lc(d.width+200,d.height+200,25),k=new Lc(d.width+200,d.height+200,25)){this.transform=d,this.grid=T,this.ignoredGrid=k,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Or,this.screenBottomBoundary=d.height+Or,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=m}placeCollisionBox(d,m,T,k,M,j,W,Q){let le=T.projectedAnchorX,ae=T.projectedAnchorY,ve=T.projectedAnchorZ;const Ae=T.elevation,Be=T.tileID,$e=d.getProjection();if(Ae&&Be){const[ut,xt,It]=$e.upVector(Be.canonical,T.tileAnchorX,T.tileAnchorY),Dt=$e.upVectorScale(Be.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;le+=ut*Ae*Dt,ae+=xt*Ae*Dt,ve+=It*Ae*Dt}const Ne=this.projectAndGetPerspectiveRatio(W,le,ae,ve,T.tileID,$e.name==="globe"||!!Ae||this.transform.pitch>0,$e),Ue=j*Ne.perspectiveRatio,Ce=(T.x1*m+k.x-T.padding)*Ue+Ne.point.x,Ke=(T.y1*m+k.y-T.padding)*Ue+Ne.point.y,Ye=(T.x2*m+k.x+T.padding)*Ue+Ne.point.x,Je=(T.y2*m+k.y+T.padding)*Ue+Ne.point.y,mt=Ne.perspectiveRatio<=.55||Ne.occluded;return!this.isInsideGrid(Ce,Ke,Ye,Je)||!M&&this.grid.hitTest(Ce,Ke,Ye,Je,Q)||mt?{box:[],offscreen:!1,occluded:Ne.occluded}:{box:[Ce,Ke,Ye,Je],offscreen:this.isOffscreen(Ce,Ke,Ye,Je),occluded:!1}}placeCollisionCircles(d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne){const Ue=[],Ce=this.transform.elevation,Ke=d.getProjection(),Ye=Ce?Ce.getAtTileOffsetFunc(Ne,this.transform.center.lat,this.transform.worldSize,Ke):null,Je=new s.pointGeometry(T.tileAnchorX,T.tileAnchorY);let{x:mt,y:ut,z:xt}=Ke.projectTilePoint(Je.x,Je.y,Ne.canonical);if(Ye){const[Et,zt,oi]=Ye(Je);mt+=Et,ut+=zt,xt+=oi}const It=Ke.name==="globe",Dt=this.projectAndGetPerspectiveRatio(W,mt,ut,xt,Ne,It||!!Ce||this.transform.pitch>0,Ke),{perspectiveRatio:Nt}=Dt,Ti=(ve?j/Nt:j*Nt)/s.ONE_EM,Ot=bi(mt,ut,xt,Q),ni=Dt.signedDistanceFromCamera>0?nr(Ti,M,T.lineOffsetX*Ti,T.lineOffsetY*Ti,!1,Ot,Je,T,k,Q,{},Ce&&!ve?Ye:null,ve&&!!Ce,Ke,Ne,ve):null;let qt=!1,ui=!1,Ft=!0;if(ni&&!Dt.occluded){const Et=.5*Be*Nt+$e,zt=new s.pointGeometry(-100,-100),oi=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),hi=new ba,{first:en,last:Rn}=ni,Yi=en.path.length;let Ui=[];for(let an=Yi-1;an>=1;an--)Ui.push(en.path[an]);for(let an=1;an<Rn.path.length;an++)Ui.push(Rn.path[an]);const tn=2.5*Et;le&&(Ui=Ui.map(([an,hr,mr],$r)=>(Ye&&!It&&(mr=Ye($r<Yi-1?en.tilePath[Yi-1-$r]:Rn.tilePath[$r-Yi+2])[2]),bi(an,hr,mr,le))),Ui.some(an=>an[3]<=0)&&(Ui=[]));let jn=[];if(Ui.length>0){let an=1/0,hr=-1/0,mr=1/0,$r=-1/0;for(const Dr of Ui)an=Math.min(an,Dr[0]),mr=Math.min(mr,Dr[1]),hr=Math.max(hr,Dr[0]),$r=Math.max($r,Dr[1]);hr>=zt.x&&an<=oi.x&&$r>=zt.y&&mr<=oi.y&&(jn=[Ui.map(Dr=>new s.pointGeometry(Dr[0],Dr[1]))],(an<zt.x||hr>oi.x||mr<zt.y||$r>oi.y)&&(jn=s.clipLine(jn,zt.x,zt.y,oi.x,oi.y)))}for(const an of jn){hi.reset(an,.25*Et);let hr=0;hr=hi.length<=.5*Et?1:Math.ceil(hi.paddedLength/tn)+1;for(let mr=0;mr<hr;mr++){const $r=mr/Math.max(hr-1,1),Dr=hi.lerp($r),Hs=Dr.x+Or,el=Dr.y+Or;Ue.push(Hs,el,Et,0);const $u=Hs-Et,Vc=el-Et,Kr=Hs+Et,Rr=el+Et;if(Ft=Ft&&this.isOffscreen($u,Vc,Kr,Rr),ui=ui||this.isInsideGrid($u,Vc,Kr,Rr),!m&&this.grid.hitTestCircle(Hs,el,Et,Ae)&&(qt=!0,!ae))return{circles:[],offscreen:!1,collisionDetected:qt,occluded:!1}}}}return{circles:!ae&&qt||!ui?[]:Ue,offscreen:Ft,collisionDetected:qt,occluded:Dt.occluded}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let T=1/0,k=1/0,M=-1/0,j=-1/0;for(const ae of d){const ve=new s.pointGeometry(ae.x+Or,ae.y+Or);T=Math.min(T,ve.x),k=Math.min(k,ve.y),M=Math.max(M,ve.x),j=Math.max(j,ve.y),m.push(ve)}const W=this.grid.query(T,k,M,j).concat(this.ignoredGrid.query(T,k,M,j)),Q={},le={};for(const ae of W){const ve=ae.key;if(Q[ve.bucketInstanceId]===void 0&&(Q[ve.bucketInstanceId]={}),Q[ve.bucketInstanceId][ve.featureIndex])continue;const Ae=[new s.pointGeometry(ae.x1,ae.y1),new s.pointGeometry(ae.x2,ae.y1),new s.pointGeometry(ae.x2,ae.y2),new s.pointGeometry(ae.x1,ae.y2)];s.polygonIntersectsPolygon(m,Ae)&&(Q[ve.bucketInstanceId][ve.featureIndex]=!0,le[ve.bucketInstanceId]===void 0&&(le[ve.bucketInstanceId]=[]),le[ve.bucketInstanceId].push(ve.featureIndex))}return le}insertCollisionBox(d,m,T,k,M){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:k,collisionGroupID:M},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,m,T,k,M){const j=m?this.ignoredGrid:this.grid,W={bucketInstanceId:T,featureIndex:k,collisionGroupID:M};for(let Q=0;Q<d.length;Q+=4)j.insertCircle(W,d[Q],d[Q+1],d[Q+2])}projectAndGetPerspectiveRatio(d,m,T,k,M,j,W){const Q=[m,T,k,1];let le=!1;if(k||this.transform.pitch>0){s.transformMat4$1(Q,Q,d);const ve=W.name==="globe";this.fogState&&M&&!ve&&(le=function(Be,$e,Ne,Ue,Ce,Ke){const Ye=Ke.calculateFogTileMatrix(Ce),Je=[$e,Ne,Ue];return s.transformMat4(Je,Je,Ye),nt(Be,Je,Ke.pitch,Ke._fov)}(this.fogState,m,T,k,M.toUnwrapped(),this.transform)>.9)}else tr(Q,Q,d);const ae=Q[3];return{point:new s.pointGeometry((Q[0]/ae+1)/2*this.transform.width+Or,(-Q[1]/ae+1)/2*this.transform.height+Or),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(W)/ae*.5,1.5),signedDistanceFromCamera:ae,occluded:j&&Q[2]>ae||le}}isOffscreen(d,m,T,k){return T<Or||d>=this.screenRightBoundary||k<Or||m>this.screenBottomBoundary}isInsideGrid(d,m,T,k){return T>=0&&d<this.gridRightBoundary&&k>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const d=s.identity([]);return s.translate(d,d,[-100,-100,0]),d}}function _o(y,d,m){const T=d.createTileMatrix(y,y.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),y.projMatrix,T)}function Gl(y,d,m){if(d.projection.name===m.projection.name)return y.projMatrix;const T=m.clone();return T.setProjection(d.projection),_o(T,d.getProjection(),y)}function No(y,d,m){return d.name===m.projection.name?y.projMatrix:_o(m,d,y)}class pl{constructor(d,m,T,k){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?m:-m))):k&&T?1:0,this.placed=T}isHidden(){return this.opacity===0&&!this.placed}}class Jo{constructor(d,m,T,k,M,j=!1){this.text=new pl(d?d.text:null,m,T,M),this.icon=new pl(d?d.icon:null,m,k,M),this.clipped=j}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mo{constructor(d,m,T,k=!1){this.text=d,this.icon=m,this.skipFade=T,this.clipped=k}}class Va{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class ws{constructor(d,m,T,k,M){this.bucketInstanceId=d,this.featureIndex=m,this.sourceLayerIndex=T,this.bucketIndex=k,this.tileID=M}}class br{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const m=++this.maxGroupID;this.collisionGroups[d]={ID:m,predicate:T=>T.collisionGroupID===m}}return this.collisionGroups[d]}}function ml(y,d,m,T,k){const{horizontalAlign:M,verticalAlign:j}=s.getAnchorAlignment(y),W=-(M-.5)*d,Q=-(j-.5)*m,le=s.evaluateVariableOffset(y,T);return new s.pointGeometry(W+le[0]*k,Q+le[1]*k)}function gl(y,d,m,T,k){const M=new s.pointGeometry(y,d);return m&&M._rotate(T?k:-k),M}class Vs{constructor(d,m,T,k,M){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new Ao(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new br(T),this.collisionCircleArrays={},this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,m,T,k){const M=T.getBucket(m),j=T.latestFeatureIndex;if(!M||!j||m.id!==M.layerIds[0])return;const W=M.layers[0].layout,Q=T.collisionBoxArray,le=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),ae=T.tileSize/s.EXTENT,ve=T.tileID.toUnwrapped();this.transform.setProjection(M.projection);const Ae=(Be=T.tileID,$e=M.getProjection(),Ne=this.transform,$e.name===this.projection?Ne.calculateProjMatrix(Be.toUnwrapped()):_o(Ne,$e,Be));var Be,$e,Ne;const Ue=W.get("text-pitch-alignment")==="map",Ce=W.get("text-rotation-alignment")==="map";m.compileFilter();const Ke=m.dynamicFilter(),Ye=m.dynamicFilterNeedsFeature(),Je=this.transform.calculatePixelsToTileUnitsMatrix(T),mt=dr(Ae,T.tileID.canonical,Ue,Ce,this.transform,M.getProjection(),Je);let ut=null;if(Ue){const Dt=Qo(Ae,T.tileID.canonical,Ue,Ce,this.transform,M.getProjection(),Je);ut=s.multiply([],this.transform.labelPlaneMatrix,Dt)}let xt=null;Ke&&T.latestFeatureIndex&&(xt={unwrappedTileID:ve,dynamicFilter:Ke,dynamicFilterNeedsFeature:Ye,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new ws(M.bucketInstanceId,j,M.sourceLayerIndex,M.index,T.tileID);const It={bucket:M,layout:W,posMatrix:Ae,textLabelPlaneMatrix:mt,labelToScreenMatrix:ut,clippingData:xt,scale:le,textPixelRatio:ae,holdingForFade:T.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(k)for(const Dt of M.sortKeyRanges){const{sortKey:Nt,symbolInstanceStart:Ti,symbolInstanceEnd:Ot}=Dt;d.push({sortKey:Nt,symbolInstanceStart:Ti,symbolInstanceEnd:Ot,parameters:It})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:It})}attemptAnchorPlacement(d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne,Ue,Ce,Ke){const{textOffset0:Ye,textOffset1:Je,crossTileID:mt}=Ae,ut=[Ye,Je],xt=ml(d,T,k,ut,M),It=this.collisionIndex.placeCollisionBox($e,M,m,gl(xt.x,xt.y,j,W,this.transform.angle),ve,Q,le,ae.predicate);if(Ue){const Dt=$e.getSymbolInstanceIconSize(Ke,this.transform.zoom,Ae.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox($e,Dt,Ue,gl(xt.x,xt.y,j,W,this.transform.angle),ve,Q,le,ae.predicate).box.length===0)return}if(It.box.length>0){let Dt;return this.prevPlacement&&this.prevPlacement.variableOffsets[mt]&&this.prevPlacement.placements[mt]&&this.prevPlacement.placements[mt].text&&(Dt=this.prevPlacement.variableOffsets[mt].anchor),this.variableOffsets[mt]={textOffset:ut,width:T,height:k,anchor:d,textScale:M,prevAnchor:Dt},this.markUsedJustification($e,d,Ae,Ne),$e.allowVerticalPlacement&&(this.markUsedOrientation($e,Ne,Ae),this.placedOrientations[mt]=Ne),{shift:xt,placedGlyphBoxes:It}}}placeLayerBucketPart(d,m,T,k){const{bucket:M,layout:j,posMatrix:W,textLabelPlaneMatrix:Q,labelToScreenMatrix:le,clippingData:ae,textPixelRatio:ve,holdingForFade:Ae,collisionBoxArray:Be,partiallyEvaluatedTextSize:$e,partiallyEvaluatedIconSize:Ne,collisionGroup:Ue}=d.parameters,Ce=j.get("text-optional"),Ke=j.get("icon-optional"),Ye=j.get("text-allow-overlap"),Je=j.get("icon-allow-overlap"),mt=j.get("text-rotation-alignment")==="map",ut=j.get("text-pitch-alignment")==="map",xt=j.get("icon-text-fit")!=="none",It=j.get("symbol-z-order")==="viewport-y";this.transform.setProjection(M.projection);let Dt=Ye&&(Je||!M.hasIconData()||Ke),Nt=Je&&(Ye||!M.hasTextData()||Ce);!M.collisionArrays&&Be&&M.deserializeCollisionBoxes(Be),T&&k&&M.updateCollisionDebugBuffers(this.transform.zoom,Be);const Ti=(Ot,ni,qt)=>{const{crossTileID:ui,numVerticalGlyphVertices:Ft}=Ot;if(ae){const Kr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Rr=null;if(ae.dynamicFilterNeedsFeature){const or=this.retainedQueryData[M.bucketInstanceId];Rr=ae.featureIndex.loadFeature({featureIndex:Ot.featureIndex,bucketIndex:or.bucketIndex,sourceLayerIndex:or.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,ae.dynamicFilter)(Kr,Rr,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new s.pointGeometry(Ot.tileAnchorX,Ot.tileAnchorY),this.transform.calculateDistanceTileData(ae.unwrappedTileID)))return this.placements[ui]=new Mo(!1,!1,!1,!0),void(m[ui]=!0)}if(m[ui])return;if(Ae)return void(this.placements[ui]=new Mo(!1,!1,!1));let Et=!1,zt=!1,oi=!0,hi=!1,en=!1,Rn=null,Yi={box:null,offscreen:null,occluded:null},Ui={box:null,offscreen:null,occluded:null},tn=null,jn=null,an=null,hr=0,mr=0,$r=0;qt.textFeatureIndex?hr=qt.textFeatureIndex:Ot.useRuntimeCollisionCircles&&(hr=Ot.featureIndex),qt.verticalTextFeatureIndex&&(mr=qt.verticalTextFeatureIndex);const Dr=Kr=>{Kr.tileID=this.retainedQueryData[M.bucketInstanceId].tileID;const Rr=this.transform.elevation;(Rr||Kr.elevation)&&(Kr.elevation=Rr?Rr.getAtTileOffset(Kr.tileID,Kr.tileAnchorX,Kr.tileAnchorY):0)},Hs=qt.textBox;if(Hs){Dr(Hs);const Kr=or=>{let ks=s.WritingMode.horizontal;if(M.allowVerticalPlacement&&!or&&this.prevPlacement){const aa=this.prevPlacement.placedOrientations[ui];aa&&(this.placedOrientations[ui]=aa,ks=aa,this.markUsedOrientation(M,ks,Ot))}return ks},Rr=(or,ks)=>{if(M.allowVerticalPlacement&&Ft>0&&qt.verticalTextBox){for(const aa of M.writingModes)if(aa===s.WritingMode.vertical?(Yi=ks(),Ui=Yi):Yi=or(),Yi&&Yi.box&&Yi.box.length)break}else Yi=or()};if(j.get("text-variable-anchor")){let or=j.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ui]){const Gr=this.prevPlacement.variableOffsets[ui];or.indexOf(Gr.anchor)>0&&(or=or.filter(la=>la!==Gr.anchor),or.unshift(Gr.anchor))}const ks=(Gr,la,ua)=>{const vd=M.getSymbolInstanceTextSize($e,Ot,this.transform.zoom,ni),Kh=(Gr.x2-Gr.x1)*vd+2*Gr.padding,Al=(Gr.y2-Gr.y1)*vd+2*Gr.padding,uu=xt&&!Je?la:null;uu&&Dr(uu);let Uc={box:[],offscreen:!1,occluded:!1};const yd=Ye?2*or.length:or.length;for(let bd=0;bd<yd;++bd){const Qh=this.attemptAnchorPlacement(or[bd%or.length],Gr,Kh,Al,vd,mt,ut,ve,W,Ue,bd>=or.length,Ot,ni,M,ua,uu,$e,Ne);if(Qh&&(Uc=Qh.placedGlyphBoxes,Uc&&Uc.box&&Uc.box.length)){Et=!0,Rn=Qh.shift;break}}return Uc};Rr(()=>ks(Hs,qt.iconBox,s.WritingMode.horizontal),()=>{const Gr=qt.verticalTextBox;return Gr&&Dr(Gr),M.allowVerticalPlacement&&!(Yi&&Yi.box&&Yi.box.length)&&Ft>0&&Gr?ks(Gr,qt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Yi&&(Et=Yi.box,oi=Yi.offscreen,hi=Yi.occluded);const aa=Kr(Yi&&Yi.box);if(!Et&&this.prevPlacement){const Gr=this.prevPlacement.variableOffsets[ui];Gr&&(this.variableOffsets[ui]=Gr,this.markUsedJustification(M,Gr.anchor,Ot,aa))}}else{const or=(ks,aa)=>{const Gr=M.getSymbolInstanceTextSize($e,Ot,this.transform.zoom,ni),la=this.collisionIndex.placeCollisionBox(M,Gr,ks,new s.pointGeometry(0,0),Ye,ve,W,Ue.predicate);return la&&la.box&&la.box.length&&(this.markUsedOrientation(M,aa,Ot),this.placedOrientations[ui]=aa),la};Rr(()=>or(Hs,s.WritingMode.horizontal),()=>{const ks=qt.verticalTextBox;return M.allowVerticalPlacement&&Ft>0&&ks?(Dr(ks),or(ks,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Kr(Yi&&Yi.box&&Yi.box.length)}}if(tn=Yi,Et=tn&&tn.box&&tn.box.length>0,oi=tn&&tn.offscreen,hi=tn&&tn.occluded,Ot.useRuntimeCollisionCircles){const Kr=M.text.placedSymbolArray.get(Ot.centerJustifiedTextSymbolIndex>=0?Ot.centerJustifiedTextSymbolIndex:Ot.verticalPlacedTextSymbolIndex),Rr=s.evaluateSizeForFeature(M.textSizeData,$e,Kr),or=j.get("text-padding");jn=this.collisionIndex.placeCollisionCircles(M,Ye,Kr,M.lineVertexArray,M.glyphOffsetArray,Rr,W,Q,le,T,ut,Ue.predicate,Ot.collisionCircleDiameter*Rr/s.ONE_EM,or,this.retainedQueryData[M.bucketInstanceId].tileID),Et=Ye||jn.circles.length>0&&!jn.collisionDetected,oi=oi&&jn.offscreen,hi=jn.occluded}if(qt.iconFeatureIndex&&($r=qt.iconFeatureIndex),qt.iconBox){const Kr=Rr=>{Dr(Rr);const or=xt&&Rn?gl(Rn.x,Rn.y,mt,ut,this.transform.angle):new s.pointGeometry(0,0),ks=M.getSymbolInstanceIconSize(Ne,this.transform.zoom,Ot.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(M,ks,Rr,or,Je,ve,W,Ue.predicate)};Ui&&Ui.box&&Ui.box.length&&qt.verticalIconBox?(an=Kr(qt.verticalIconBox),zt=an.box.length>0):(an=Kr(qt.iconBox),zt=an.box.length>0),oi=oi&&an.offscreen,en=an.occluded}const el=Ce||Ot.numHorizontalGlyphVertices===0&&Ft===0,$u=Ke||Ot.numIconVertices===0;if(el||$u?$u?el||(zt=zt&&Et):Et=zt&&Et:zt=Et=zt&&Et,Et&&tn&&tn.box&&this.collisionIndex.insertCollisionBox(tn.box,j.get("text-ignore-placement"),M.bucketInstanceId,Ui&&Ui.box&&mr?mr:hr,Ue.ID),zt&&an&&this.collisionIndex.insertCollisionBox(an.box,j.get("icon-ignore-placement"),M.bucketInstanceId,$r,Ue.ID),jn&&(Et&&this.collisionIndex.insertCollisionCircles(jn.circles,j.get("text-ignore-placement"),M.bucketInstanceId,hr,Ue.ID),T)){const Kr=M.bucketInstanceId;let Rr=this.collisionCircleArrays[Kr];Rr===void 0&&(Rr=this.collisionCircleArrays[Kr]=new Va);for(let or=0;or<jn.circles.length;or+=4)Rr.circles.push(jn.circles[or+0]),Rr.circles.push(jn.circles[or+1]),Rr.circles.push(jn.circles[or+2]),Rr.circles.push(jn.collisionDetected?1:0)}const Vc=M.projection.name!=="globe";Dt=Dt&&(Vc||!hi),Nt=Nt&&(Vc||!en),this.placements[ui]=new Mo(Et||Dt,zt||Nt,oi||M.justReloaded),m[ui]=!0};if(It){const Ot=M.getSortedSymbolIndexes(this.transform.angle);for(let ni=Ot.length-1;ni>=0;--ni){const qt=Ot[ni];Ti(M.symbolInstances.get(qt),qt,M.collisionArrays[qt])}}else for(let Ot=d.symbolInstanceStart;Ot<d.symbolInstanceEnd;Ot++)Ti(M.symbolInstances.get(Ot),Ot,M.collisionArrays[Ot]);if(T&&M.bucketInstanceId in this.collisionCircleArrays){const Ot=this.collisionCircleArrays[M.bucketInstanceId];s.invert(Ot.invProjMatrix,W),Ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(d,m,T,k){const{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:j,rightJustifiedTextSymbolIndex:W,verticalPlacedTextSymbolIndex:Q,crossTileID:le}=T,ae=s.getAnchorJustification(m),ve=k===s.WritingMode.vertical?Q:ae==="left"?M:ae==="center"?j:ae==="right"?W:-1;M>=0&&(d.text.placedSymbolArray.get(M).crossTileID=ve>=0&&M!==ve?0:le),j>=0&&(d.text.placedSymbolArray.get(j).crossTileID=ve>=0&&j!==ve?0:le),W>=0&&(d.text.placedSymbolArray.get(W).crossTileID=ve>=0&&W!==ve?0:le),Q>=0&&(d.text.placedSymbolArray.get(Q).crossTileID=ve>=0&&Q!==ve?0:le)}markUsedOrientation(d,m,T){const k=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,M=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:j,centerJustifiedTextSymbolIndex:W,rightJustifiedTextSymbolIndex:Q,verticalPlacedTextSymbolIndex:le}=T,ae=d.text.placedSymbolArray;j>=0&&(ae.get(j).placedOrientation=k),W>=0&&(ae.get(W).placedOrientation=k),Q>=0&&(ae.get(Q).placedOrientation=k),le>=0&&(ae.get(le).placedOrientation=M)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let T=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const k=m?m.symbolFadeChange(d):1,M=m?m.opacities:{},j=m?m.variableOffsets:{},W=m?m.placedOrientations:{};for(const Q in this.placements){const le=this.placements[Q],ae=M[Q];ae?(this.opacities[Q]=new Jo(ae,k,le.text,le.icon,null,le.clipped),T=T||le.text!==ae.text.placed||le.icon!==ae.icon.placed):(this.opacities[Q]=new Jo(null,k,le.text,le.icon,le.skipFade,le.clipped),T=T||le.text||le.icon)}for(const Q in M){const le=M[Q];if(!this.opacities[Q]){const ae=new Jo(le,k,!1,!1);ae.isHidden()||(this.opacities[Q]=ae,T=T||le.text.placed||le.icon.placed)}}for(const Q in j)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=j[Q]);for(const Q in W)this.placedOrientations[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.placedOrientations[Q]=W[Q]);T?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:d)}updateLayerOpacities(d,m){const T={};for(const k of m){const M=k.getBucket(d);M&&k.latestFeatureIndex&&d.id===M.layerIds[0]&&this.updateBucketOpacities(M,T,k.collisionBoxArray)}}updateBucketOpacities(d,m,T){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const k=d.layers[0].layout,M=!!d.layers[0].dynamicFilter(),j=new Jo(null,0,!1,!1,!0),W=k.get("text-allow-overlap"),Q=k.get("icon-allow-overlap"),le=k.get("text-variable-anchor"),ae=k.get("text-rotation-alignment")==="map",ve=k.get("text-pitch-alignment")==="map",Ae=k.get("icon-text-fit")!=="none",Be=new Jo(null,0,W&&(Q||!d.hasIconData()||k.get("icon-optional")),Q&&(W||!d.hasTextData()||k.get("text-optional")),!0);!d.collisionArrays&&T&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(T);const $e=(Ue,Ce,Ke)=>{for(let Ye=0;Ye<Ce/4;Ye++)Ue.opacityVertexArray.emplaceBack(Ke)};let Ne=0;for(let Ue=0;Ue<d.symbolInstances.length;Ue++){const Ce=d.symbolInstances.get(Ue),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:Ye,crossTileID:Je,numIconVertices:mt}=Ce;let ut=this.opacities[Je];m[Je]?ut=j:ut||(ut=Be,this.opacities[Je]=ut),m[Je]=!0;const xt=Ke>0||Ye>0,It=mt>0,Dt=this.placedOrientations[Je],Nt=Dt===s.WritingMode.vertical,Ti=Dt===s.WritingMode.horizontal||Dt===s.WritingMode.horizontalOnly;if(!xt&&!It||ut.isHidden()||Ne++,xt){const Ot=ql(ut.text);$e(d.text,Ke,Nt?Oo:Ot),$e(d.text,Ye,Ti?Oo:Ot);const ni=ut.text.isHidden(),{leftJustifiedTextSymbolIndex:qt,centerJustifiedTextSymbolIndex:ui,rightJustifiedTextSymbolIndex:Ft,verticalPlacedTextSymbolIndex:Et}=Ce,zt=d.text.placedSymbolArray,oi=ni||Nt?1:0;qt>=0&&(zt.get(qt).hidden=oi),ui>=0&&(zt.get(ui).hidden=oi),Ft>=0&&(zt.get(Ft).hidden=oi),Et>=0&&(zt.get(Et).hidden=ni||Ti?1:0);const hi=this.variableOffsets[Je];hi&&this.markUsedJustification(d,hi.anchor,Ce,Dt);const en=this.placedOrientations[Je];en&&(this.markUsedJustification(d,"left",Ce,en),this.markUsedOrientation(d,en,Ce))}if(It){const Ot=ql(ut.icon),{placedIconSymbolIndex:ni,verticalPlacedIconSymbolIndex:qt}=Ce,ui=d.icon.placedSymbolArray,Ft=ut.icon.isHidden()?1:0;ni>=0&&($e(d.icon,mt,Nt?Oo:Ot),ui.get(ni).hidden=Ft),qt>=0&&($e(d.icon,Ce.numVerticalIconVertices,Ti?Oo:Ot),ui.get(qt).hidden=Ft)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Ot=d.collisionArrays[Ue];if(Ot){let ni=new s.pointGeometry(0,0),qt=!0;if(Ot.textBox||Ot.verticalTextBox){if(le){const Ft=this.variableOffsets[Je];Ft?(ni=ml(Ft.anchor,Ft.width,Ft.height,Ft.textOffset,Ft.textScale),ae&&ni._rotate(ve?this.transform.angle:-this.transform.angle)):qt=!1}M&&(qt=!ut.clipped),Ot.textBox&&ln(d.textCollisionBox.collisionVertexArray,ut.text.placed,!qt||Nt,ni.x,ni.y),Ot.verticalTextBox&&ln(d.textCollisionBox.collisionVertexArray,ut.text.placed,!qt||Ti,ni.x,ni.y)}const ui=qt&&!!(!Ti&&Ot.verticalIconBox);Ot.iconBox&&ln(d.iconCollisionBox.collisionVertexArray,ut.icon.placed,ui,Ae?ni.x:0,Ae?ni.y:0),Ot.verticalIconBox&&ln(d.iconCollisionBox.collisionVertexArray,ut.icon.placed,!ui,Ae?ni.x:0,Ae?ni.y:0)}}}if(d.fullyClipped=Ne===0,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const Ue=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=Ue.invProjMatrix,d.placementViewportMatrix=Ue.viewportMatrix,d.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,m){const T=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*T>d}setStale(){this.stale=!0}}function ln(y,d,m,T,k){y.emplaceBack(d?1:0,m?1:0,T||0,k||0),y.emplaceBack(d?1:0,m?1:0,T||0,k||0),y.emplaceBack(d?1:0,m?1:0,T||0,k||0),y.emplaceBack(d?1:0,m?1:0,T||0,k||0)}const As=Math.pow(2,25),Yn=Math.pow(2,24),jr=Math.pow(2,17),_l=Math.pow(2,16),Wl=Math.pow(2,9),xa=Math.pow(2,8),Lr=Math.pow(2,1);function ql(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const d=y.placed?1:0,m=Math.floor(127*y.opacity);return m*As+d*Yn+m*jr+d*_l+m*Wl+d*xa+m*Lr+d}const Oo=0;class xr{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&d.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,m,T,k,M){const j=this._bucketParts;for(;this._currentTileIndex<d.length;)if(m.getBucketParts(j,k,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((W,Q)=>W.sortKey-Q.sortKey));this._currentPartIndex<j.length;){const W=j[this._currentPartIndex];if(m.placeLayerBucketPart(W,this._seenCrossTileIDs,T,W.symbolInstanceStart===0),this._currentPartIndex++,M())return!0}return!1}}class zo{constructor(d,m,T,k,M,j,W,Q){this.placement=new Vs(d,M,j,W,Q),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(d,m,T){const k=s.exported.now(),M=()=>{const j=s.exported.now()-k;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=m[d[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=W)&&(!j.maxzoom||j.maxzoom>W)){if(this._inProgressLayer||(this._inProgressLayer=new xr(j)),this._inProgressLayer.continuePlacement(T[j.source],this.placement,this._showCollisionBoxes,j,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const ku=512/s.EXTENT/2;class hd{constructor(d,m,T){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=T;for(let k=0;k<m.length;k++){const M=m.get(k),j=M.key;this.indexedSymbolInstances[j]||(this.indexedSymbolInstances[j]=[]),this.indexedSymbolInstances[j].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,d)})}}getScaledCoordinates(d,m){const T=ku/Math.pow(2,m.canonical.z-this.tileID.canonical.z);return{x:Math.floor((m.canonical.x*s.EXTENT+d.tileAnchorX)*T),y:Math.floor((m.canonical.y*s.EXTENT+d.tileAnchorY)*T)}}findMatches(d,m,T){const k=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let M=0;M<d.length;M++){const j=d.get(M);if(j.crossTileID)continue;const W=this.indexedSymbolInstances[j.key];if(!W)continue;const Q=this.getScaledCoordinates(j,m);for(const le of W)if(Math.abs(le.coord.x-Q.x)<=k&&Math.abs(le.coord.y-Q.y)<=k&&!T[le.crossTileID]){T[le.crossTileID]=!0,j.crossTileID=le.crossTileID;break}}}}class Dc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const m=Math.round((d-this.lng)/360);if(m!==0)for(const T in this.indexes){const k=this.indexes[T],M={};for(const j in k){const W=k[j];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+m),M[W.tileID.key]=W}this.indexes[T]=M}this.lng=d}addBucket(d,m,T){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let M=0;M<m.symbolInstances.length;M++)m.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const k=this.usedCrossTileIDs[d.overscaledZ];for(const M in this.indexes){const j=this.indexes[M];if(Number(M)>d.overscaledZ)for(const W in j){const Q=j[W];Q.tileID.isChildOf(d)&&Q.findMatches(m.symbolInstances,d,k)}else{const W=j[d.scaledTo(Number(M)).key];W&&W.findMatches(m.symbolInstances,d,k)}}for(let M=0;M<m.symbolInstances.length;M++){const j=m.symbolInstances.get(M);j.crossTileID||(j.crossTileID=T.generate(),k[j.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new hd(d,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(d,m){for(const T in m.indexedSymbolInstances)for(const k of m.indexedSymbolInstances[T])delete this.usedCrossTileIDs[d][k.crossTileID]}removeStaleBuckets(d){let m=!1;for(const T in this.indexes){const k=this.indexes[T];for(const M in k)d[k[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,k[M]),delete k[M],m=!0)}return m}}class Zl{constructor(){this.layerIndexes={},this.crossTileIDs=new Dc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,m,T,k){let M=this.layerIndexes[d.id];M===void 0&&(M=this.layerIndexes[d.id]=new vl);let j=!1;const W={};k.name!=="globe"&&M.handleWrapJump(T);for(const Q of m){const le=Q.getBucket(d);le&&d.id===le.layerIds[0]&&(le.bucketInstanceId||(le.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(Q.tileID,le,this.crossTileIDs)&&(j=!0),W[le.bucketInstanceId]=!0)}return M.removeStaleBuckets(W)&&(j=!0),j}pruneUnusedLayers(d){const m={};d.forEach(T=>{m[T]=!0});for(const T in this.layerIndexes)m[T]||delete this.layerIndexes[T]}}const Eu=(y,d)=>s.emitValidationErrors(y,d&&d.filter(m=>m.identifier!=="source.canvas")),Ua=s.pick(rn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Sn=s.pick(rn,["setCenter","setZoom","setBearing","setPitch"]),Iu={version:8,layers:[],sources:{}},us={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ms extends s.Evented{constructor(d,m={}){super(),this.map=d,this.dispatcher=new Mt(Bi(),this),this.imageManager=new we,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(d._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new Zl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const T=this;this._rtlTextPluginCallback=Ms.registerForPluginStateChange(k=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(M,j)=>{if(s.triggerPluginCompletionEvent(M),j&&j.every(W=>W))for(const W in T._sourceCaches){const Q=T._sourceCaches[W],le=Q.getSource().type;le!=="vector"&&le!=="geojson"||Q.reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const M=this.getSource(k.sourceId);if(M&&M.vectorLayerIds)for(const j in this._layers){const W=this._layers[j];W.source===M.id&&this._validateLayer(W)}})}loadURL(d,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const T=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,m.accessToken);const k=this.map._requestManager.transformRequest(d,s.ResourceType.Style);this._request=s.getJSON(k,(M,j)=>{this._request=null,M?this.fire(new s.ErrorEvent(M)):j&&this._load(j,T)})}loadJSON(d,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(d,m.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Iu,!1)}_updateLayerCount(d,m){const T=m?1:-1;d.is3D()&&(this._num3DLayers+=T),d.type==="circle"&&(this._numCircleLayers+=T),d.type==="symbol"&&(this._numSymbolLayers+=T)}_load(d,m){if(m&&Eu(this,s.validateStyle(d)))return;this._loaded=!0,this.stylesheet=s.clone$1(d),this._updateMapProjection();for(const k in d.sources)this.addSource(k,d.sources[k],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const T=Ln(this.stylesheet.layers);this._order=T.map(k=>k.id),this._layers={},this._serializedLayers={};for(const k of T){const M=s.createStyleLayer(k);M.setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ke(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(m,T,k){let M,j,W;const Q=s.exported.devicePixelRatio>1?"@2x":"";let le=s.getJSON(T.transformRequest(T.normalizeSpriteURL(m,Q,".json"),s.ResourceType.SpriteJSON),(Ae,Be)=>{le=null,W||(W=Ae,M=Be,ve())}),ae=s.getImage(T.transformRequest(T.normalizeSpriteURL(m,Q,".png"),s.ResourceType.SpriteImage),(Ae,Be)=>{ae=null,W||(W=Ae,j=Be,ve())});function ve(){if(W)k(W);else if(M&&j){const Ae=s.exported.getImageData(j),Be={};for(const $e in M){const{width:Ne,height:Ue,x:Ce,y:Ke,sdf:Ye,pixelRatio:Je,stretchX:mt,stretchY:ut,content:xt}=M[$e],It=new s.RGBAImage({width:Ne,height:Ue});s.RGBAImage.copy(Ae,It,{x:Ce,y:Ke},{x:0,y:0},{width:Ne,height:Ue}),Be[$e]={data:It,pixelRatio:Je,sdf:Ye,stretchX:mt,stretchY:ut,content:xt}}k(null,Be)}}return{cancel(){le&&(le.cancel(),le=null),ae&&(ae.cancel(),ae=null)}}}(d,this.map._requestManager,(m,T)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(T)for(const k in T)this.imageManager.addImage(k,T[k]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(d){const m=this.getSource(d.source);if(!m)return;const T=d.sourceLayer;T&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(T)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${m.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const m=[];for(const T of d){const k=this._layers[T];k.type!=="custom"&&m.push(k.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&(typeof d.isLayerDraped=="function"?d.isLayerDraped():us[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const m=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(k.length||M.length)&&this._updateWorkerLayers(k,M);for(const j in this._updatedSources){const W=this._updatedSources[j];W==="reload"?this._reloadSource(j):W==="clear"&&this._clearSource(j)}this._updateTilesForChangedImages();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const T={};for(const k in this._sourceCaches){const M=this._sourceCaches[k];T[k]=M.used,M.used=!1}for(const k of this._order){const M=this._layers[k];if(M.recalculate(d,this._availableImages),!M.isHidden(d.zoom)){const W=this._getLayerSourceCache(M);W&&(W.used=!0)}const j=this.map.painter;if(j){const W=M.getProgramIds();if(!W)continue;const Q=M.getProgramConfiguration(d.zoom);for(const le of W)j.useProgram(le,Q)}}for(const k in T){const M=this._sourceCaches[k];T[k]!==M.used&&M.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),Eu(this,s.validateStyle(d)))return!1;(d=s.clone$1(d)).layers=Ln(d.layers);const m=function(k,M){if(!k)return[{command:rn.setStyle,args:[M]}];let j=[];try{if(!p(k.version,M.version))return[{command:rn.setStyle,args:[M]}];p(k.center,M.center)||j.push({command:rn.setCenter,args:[M.center]}),p(k.zoom,M.zoom)||j.push({command:rn.setZoom,args:[M.zoom]}),p(k.bearing,M.bearing)||j.push({command:rn.setBearing,args:[M.bearing]}),p(k.pitch,M.pitch)||j.push({command:rn.setPitch,args:[M.pitch]}),p(k.sprite,M.sprite)||j.push({command:rn.setSprite,args:[M.sprite]}),p(k.glyphs,M.glyphs)||j.push({command:rn.setGlyphs,args:[M.glyphs]}),p(k.transition,M.transition)||j.push({command:rn.setTransition,args:[M.transition]}),p(k.light,M.light)||j.push({command:rn.setLight,args:[M.light]}),p(k.fog,M.fog)||j.push({command:rn.setFog,args:[M.fog]}),p(k.projection,M.projection)||j.push({command:rn.setProjection,args:[M.projection]});const W={},Q=[];(function(ve,Ae,Be,$e){let Ne;for(Ne in Ae=Ae||{},ve=ve||{})ve.hasOwnProperty(Ne)&&(Ae.hasOwnProperty(Ne)||er(Ne,Be,$e));for(Ne in Ae){if(!Ae.hasOwnProperty(Ne))continue;const Ue=Ae[Ne];ve.hasOwnProperty(Ne)?p(ve[Ne],Ue)||(ve[Ne].type==="geojson"&&Ue.type==="geojson"&&$o(ve,Ae,Ne)?Be.push({command:rn.setGeoJSONSourceData,args:[Ne,Ue.data]}):ya(Ne,Ae,Be,$e)):Jn(Ne,Ae,Be)}})(k.sources,M.sources,Q,W);const le=[];k.layers&&k.layers.forEach(ve=>{ve.source&&W[ve.source]?j.push({command:rn.removeLayer,args:[ve.id]}):le.push(ve)});let ae=k.terrain;ae&&W[ae.source]&&(j.push({command:rn.setTerrain,args:[void 0]}),ae=void 0),j=j.concat(Q),p(ae,M.terrain)||j.push({command:rn.setTerrain,args:[M.terrain]}),function(ve,Ae,Be){Ae=Ae||[];const $e=(ve=ve||[]).map(Po),Ne=Ae.map(Po),Ue=ve.reduce(pr,{}),Ce=Ae.reduce(pr,{}),Ke=$e.slice(),Ye=Object.create(null);let Je,mt,ut,xt,It,Dt,Nt;for(Je=0,mt=0;Je<$e.length;Je++)ut=$e[Je],Ce.hasOwnProperty(ut)?mt++:(Be.push({command:rn.removeLayer,args:[ut]}),Ke.splice(Ke.indexOf(ut,mt),1));for(Je=0,mt=0;Je<Ne.length;Je++)ut=Ne[Ne.length-1-Je],Ke[Ke.length-1-Je]!==ut&&(Ue.hasOwnProperty(ut)?(Be.push({command:rn.removeLayer,args:[ut]}),Ke.splice(Ke.lastIndexOf(ut,Ke.length-mt),1)):mt++,Dt=Ke[Ke.length-Je],Be.push({command:rn.addLayer,args:[Ce[ut],Dt]}),Ke.splice(Ke.length-Je,0,ut),Ye[ut]=!0);for(Je=0;Je<Ne.length;Je++)if(ut=Ne[Je],xt=Ue[ut],It=Ce[ut],!Ye[ut]&&!p(xt,It))if(p(xt.source,It.source)&&p(xt["source-layer"],It["source-layer"])&&p(xt.type,It.type)){for(Nt in Wt(xt.layout,It.layout,Be,ut,null,rn.setLayoutProperty),Wt(xt.paint,It.paint,Be,ut,null,rn.setPaintProperty),p(xt.filter,It.filter)||Be.push({command:rn.setFilter,args:[ut,It.filter]}),p(xt.minzoom,It.minzoom)&&p(xt.maxzoom,It.maxzoom)||Be.push({command:rn.setLayerZoomRange,args:[ut,It.minzoom,It.maxzoom]}),xt)xt.hasOwnProperty(Nt)&&Nt!=="layout"&&Nt!=="paint"&&Nt!=="filter"&&Nt!=="metadata"&&Nt!=="minzoom"&&Nt!=="maxzoom"&&(Nt.indexOf("paint.")===0?Wt(xt[Nt],It[Nt],Be,ut,Nt.slice(6),rn.setPaintProperty):p(xt[Nt],It[Nt])||Be.push({command:rn.setLayerProperty,args:[ut,Nt,It[Nt]]}));for(Nt in It)It.hasOwnProperty(Nt)&&!xt.hasOwnProperty(Nt)&&Nt!=="layout"&&Nt!=="paint"&&Nt!=="filter"&&Nt!=="metadata"&&Nt!=="minzoom"&&Nt!=="maxzoom"&&(Nt.indexOf("paint.")===0?Wt(xt[Nt],It[Nt],Be,ut,Nt.slice(6),rn.setPaintProperty):p(xt[Nt],It[Nt])||Be.push({command:rn.setLayerProperty,args:[ut,Nt,It[Nt]]}))}else Be.push({command:rn.removeLayer,args:[ut]}),Dt=Ke[Ke.lastIndexOf(ut)+1],Be.push({command:rn.addLayer,args:[It,Dt]})}(le,M.layers,j)}catch(W){console.warn("Unable to compute style diff:",W),j=[{command:rn.setStyle,args:[M]}]}return j}(this.serialize(),d).filter(k=>!(k.command in Sn));if(m.length===0)return!1;const T=m.filter(k=>!(k.command in Ua));if(T.length>0)throw new Error(`Unimplemented: ${T.map(k=>k.command).join(", ")}.`);return m.forEach(k=>{k.command!=="setTransition"&&k.command!=="setProjection"&&this[k.command].apply(this,k.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,m){return this.getImage(d)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,m),this._afterImageUpdated(d),this)}updateImage(d,m){this.imageManager.updateImage(d,m)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,m,T={}){if(this._checkLoaded(),this.getSource(d)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${d}`,m,null,T))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const k=St(d,m,this.dispatcher,this);k.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:k.serialize(),sourceId:d}));const M=j=>{const W=(j?"symbol:":"other:")+d,Q=this._sourceCaches[W]=new s.SourceCache(W,k,j);(j?this._symbolSourceCaches:this._otherSourceCaches)[d]=Q,Q.style=this,Q.onAdd(this.map)};M(!1),m.type!=="vector"&&m.type!=="geojson"||M(!0),k.onAdd&&k.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const m=this.getSource(d);if(!m)throw new Error("There is no source with this ID");for(const k in this._layers)if(this._layers[k].source===d)return this.fire(new s.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${k}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new s.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(d);for(const k of T)delete this._sourceCaches[k.id],delete this._updatedSources[k.id],k.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:k.getSource().id})),k.setEventedParent(null),k.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,m){this._checkLoaded(),this.getSource(d).setData(m),this._changed=!0}getSource(d){const m=this._getSourceCache(d);return m&&m.getSource()}_getSources(){const d=[];for(const m in this._otherSourceCaches){const T=this._getSourceCache(m);T&&d.push(T.getSource())}return d}addLayer(d,m,T={}){this._checkLoaded();const k=d.id;if(this.getLayer(k))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${k}" already exists on this map`)));let M;if(d.type==="custom"){if(Eu(this,s.validateCustomStyleLayer(d)))return;M=s.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(k,d.source),d=s.clone$1(d),d=s.extend(d,{source:k})),this._validate(s.validateLayer,`layers.${k}`,d,{arrayIndex:-1},T))return;M=s.createStyleLayer(d),this._validateLayer(M),M.setEventedParent(this,{layer:{id:k}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const j=m?this._order.indexOf(m):this._order.length;if(m&&j===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(j,0,k),this._layerOrderChanged=!0,this._layers[k]=M;const W=this._getLayerSourceCache(M);if(this._removedLayers[k]&&M.source&&W&&M.type!=="custom"){const Q=this._removedLayers[k];delete this._removedLayers[k],Q.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",W.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,m){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===m)return;const T=this._order.indexOf(d);this._order.splice(T,1);const k=m?this._order.indexOf(m):this._order.length;m&&k===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(k,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const m=this._layers[d];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const T=this._order.indexOf(d);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=m,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const m in this._layers)if(this._layers[m].type===d)return!0;return!1}setLayerZoomRange(d,m,T){this._checkLoaded();const k=this.getLayer(d);k?k.minzoom===m&&k.maxzoom===T||(m!=null&&(k.minzoom=m),T!=null&&(k.maxzoom=T),this._updateLayer(k)):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,m,T={}){this._checkLoaded();const k=this.getLayer(d);if(k){if(!p(k.filter,m))return m==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(s.validateFilter,`layers.${k.id}.filter`,m,{layerType:k.type},T)||(k.filter=s.clone$1(m),this._updateLayer(k)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const m=this.getLayer(d);return m&&s.clone$1(m.filter)}setLayoutProperty(d,m,T,k={}){this._checkLoaded();const M=this.getLayer(d);M?p(M.getLayoutProperty(m),T)||(M.setLayoutProperty(m,T,k),this._updateLayer(M)):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,m){const T=this.getLayer(d);if(T)return T.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,m,T,k={}){this._checkLoaded();const M=this.getLayer(d);M?p(M.getPaintProperty(m),T)||(M.setPaintProperty(m,T,k)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,m){const T=this.getLayer(d);return T&&T.getPaintProperty(m)}setFeatureState(d,m){this._checkLoaded();const T=d.source,k=d.sourceLayer,M=this.getSource(T);if(!M)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const j=M.type;if(j==="geojson"&&k)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(j==="vector"&&!k)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const W=this._getSourceCaches(T);for(const Q of W)Q.setFeatureState(k,d.id,m)}removeFeatureState(d,m){this._checkLoaded();const T=d.source,k=this.getSource(T);if(!k)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const M=k.type,j=M==="vector"?d.sourceLayer:void 0;if(M==="vector"&&!j)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof d.id!="string"&&typeof d.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const W=this._getSourceCaches(T);for(const Q of W)Q.removeFeatureState(j,d.id,m)}getFeatureState(d){this._checkLoaded();const m=d.source,T=d.sourceLayer,k=this.getSource(m);if(k){if(k.type!=="vector"||T)return d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(T,d.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const m in this._sourceCaches){const T=this._sourceCaches[m].getSource();d[T.id]||(d[T.id]=T.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0;const m=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",m.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const m=j=>this._layers[j].type==="fill-extrusion",T={},k=[];for(let j=this._order.length-1;j>=0;j--){const W=this._order[j];if(m(W)){T[W]=j;for(const Q of d){const le=Q[W];if(le)for(const ae of le)k.push(ae)}}}k.sort((j,W)=>W.intersectionZ-j.intersectionZ);const M=[];for(let j=this._order.length-1;j>=0;j--){const W=this._order[j];if(m(W))for(let Q=k.length-1;Q>=0;Q--){const le=k[Q].feature;if(T[le.layer.id]<j)break;M.push(le),k.pop()}else for(const Q of d){const le=Q[W];if(le)for(const ae of le)M.push(ae.feature)}}return M}queryRenderedFeatures(d,m,T){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const k={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Q of m.layers){const le=this._layers[Q];if(!le)return this.fire(new s.ErrorEvent(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];k[le.source]=!0}}const M=[];m.availableImages=this._availableImages;const j=m&&m.layers?m.layers.some(Q=>{const le=this.getLayer(Q);return le&&le.is3D()}):this.has3DLayers(),W=Fe.createFromScreenPoints(d,T);for(const Q in this._sourceCaches){const le=this._sourceCaches[Q].getSource().id;m.layers&&!k[le]||M.push(Pt(this._sourceCaches[Q],this._layers,this._serializedLayers,W,m,T,j,!!this.map._showQueryGeometry))}return this.placement&&M.push(function(Q,le,ae,ve,Ae,Be,$e){const Ne={},Ue=Be.queryRenderedSymbols(ve),Ce=[];for(const Ke of Object.keys(Ue).map(Number))Ce.push($e[Ke]);Ce.sort(Ii);for(const Ke of Ce){const Ye=Ke.featureIndex.lookupSymbolFeatures(Ue[Ke.bucketInstanceId],le,Ke.bucketIndex,Ke.sourceLayerIndex,Ae.filter,Ae.layers,Ae.availableImages,Q);for(const Je in Ye){const mt=Ne[Je]=Ne[Je]||[],ut=Ye[Je];ut.sort((xt,It)=>{const Dt=Ke.featureSortOrder;if(Dt){const Nt=Dt.indexOf(xt.featureIndex);return Dt.indexOf(It.featureIndex)-Nt}return It.featureIndex-xt.featureIndex});for(const xt of ut)mt.push(xt)}}for(const Ke in Ne)Ne[Ke].forEach(Ye=>{const Je=Ye.feature,mt=ae(Q[Ke]);if(!mt)return;const ut=mt.getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=ut});return Ne}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),W.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(d,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const T=this._getSourceCaches(d);let k=[];for(const M of T)k=k.concat(jt(M,m));return k}addSourceType(d,m,T){return Ms.getSourceType(d)?T(new Error(`A source type called "${d}" already exists.`)):(Ms.setSourceType(d,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:m.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(d,m={}){this._checkLoaded();const T=this.light.getLight();let k=!1;for(const j in d)if(!p(d[j],T[j])){k=!0;break}if(!k)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,m),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,m=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=d;if(m===1){if(typeof T.source=="object"){const k="terrain-dem-src";this.addSource(k,T.source),T=s.clone$1(T),T=s.extend(T,{source:k})}if(this._validate(s.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,m)}else{const k=this.terrain,M=k.get();for(const j of Object.keys(s.spec.terrain))!T.hasOwnProperty(j)&&s.spec.terrain[j].default&&(T[j]=s.spec.terrain[j].default);for(const j in T)if(!p(T[j],M[j])){k.set(T),this.stylesheet.terrain=T;const W=this._setTransitionParameters({duration:0});k.updateTransitions(W);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const m=this.fog=new et(d,this.map.transform);this.stylesheet.fog=d;const T=this._setTransitionParameters({duration:0});m.updateTransitions(T)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,T=m.get();Object.keys(d).length===0&&m.set(d);for(const k in d)if(!p(d[k],T[k])){m.set(d),this.stylesheet.fog=d;const M=this._setTransitionParameters({duration:0});m.updateTransitions(M);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:s.exported.now(),transition:s.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(T=>this.isLayerDraped(this._layers[T])),m=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(...m)}_createTerrain(d,m){const T=this.terrain=new gt(d,m);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const k=this._setTransitionParameters({duration:0});T.updateTransitions(k)}_force3DLayerUpdate(){for(const d in this._layers){const m=this._layers[d];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const m=this._layers[d];m.type==="symbol"&&this._updateLayer(m)}}_validate(d,m,T,k,M={}){return(!M||M.validate!==!1)&&Eu(this,d.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:T,styleSpec:s.spec},k)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const m=this._getSourceCaches(d);for(const T of m)T.clearTiles()}_reloadSource(d){const m=this._getSourceCaches(d);for(const T of m)T.resume(),T.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const m in this._sourceCaches)this._sourceCaches[m].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const m=this._sourceCaches[d];m.resume(),m.reload()}}_updatePlacement(d,m,T,k,M=!1){let j=!1,W=!1;const Q={};for(const le of this._order){const ae=this._layers[le];if(ae.type!=="symbol")continue;if(!Q[ae.source]){const Ae=this._getLayerSourceCache(ae);if(!Ae)continue;Q[ae.source]=Ae.getRenderableIds(!0).map(Be=>Ae.getTileByID(Be)).sort((Be,$e)=>$e.tileID.overscaledZ-Be.tileID.overscaledZ||(Be.tileID.isLessThan($e.tileID)?-1:1))}const ve=this.crossTileSymbolIndex.addLayer(ae,Q[ae.source],d.center.lng,d.projection);j=j||ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||T===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),d.zoom))&&(this.pauseablePlacement=new zo(d,this._order,M,m,T,k,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),W=!0),j&&this.pauseablePlacement.placement.setStale()),W||j)for(const le of this._order){const ae=this._layers[le];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,Q[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,m,T){this.imageManager.getImages(m.icons,T),this._updateTilesForChangedImages();const k=M=>{M&&M.setDependencies(m.tileID.key,m.type,m.icons)};k(this._otherSourceCaches[m.source]),k(this._symbolSourceCaches[m.source])}getGlyphs(d,m,T){this.glyphManager.getGlyphs(m.stacks,T)}getResource(d,m,T){return s.makeRequest(m,T)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return d.type==="symbol"?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const m=[];return this._otherSourceCaches[d]&&m.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&m.push(this._symbolSourceCaches[d]),m}_isSourceCacheLoaded(d){const m=this._getSourceCaches(d);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):m.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ms.getSourceType=function(y){return Ct[y]},Ms.setSourceType=function(y,d){Ct[y]=d},Ms.registerForPluginStateChange=s.registerForPluginStateChange;var Yl=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,nc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ja=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ha=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,yl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Xl={},vo={};const Os=[];eo(Yl,Os),eo(ja,Os),eo(Ha,Os),eo(yl,Os),Xl=Un("",ja),vo=Un(yl,Ha);const Kl=Un(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Js=Yl,rc=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var sc={background:Un(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Un(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Un(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Un("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Un(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Un(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Un("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Un("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Un("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Un(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Un(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Un(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Un(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Un(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Un(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Un(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Un(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Un(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Un(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Un(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Un(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Un(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Un(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Un(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Un(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Un(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nc),skyboxGradient:Un(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nc),skyboxCapture:Un(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Un(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Un(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function eo(y,d){const m=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let T of m)if(T=T.trim(),T[0]==="#"&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const k=T.split(" ");for(const M of k)d.includes(M)||d.push(M)}}function Un(y,d){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),k={},M=[...Os];return eo(y,M),eo(d,M),{fragmentSource:y=y.replace(m,(j,W,Q,le,ae)=>(k[ae]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
varying ${Q} ${le} ${ae};
#else
uniform ${Q} ${le} u_${ae};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ae}
    ${Q} ${le} ${ae} = u_${ae};
#endif
`)),vertexSource:d=d.replace(m,(j,W,Q,le,ae)=>{const ve=le==="float"?"vec2":"vec4",Ae=ae.match(/color/)?"color":ve;return k[ae]?W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${Q} ${ve} a_${ae};
varying ${Q} ${le} ${ae};
#else
uniform ${Q} ${le} u_${ae};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = a_${ae};
#else
    ${Q} ${le} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = unpack_mix_${Ae}(a_${ae}, u_${ae}_t);
#else
    ${Q} ${le} ${ae} = u_${ae};
#endif
`:W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${Q} ${ve} a_${ae};
#else
uniform ${Q} ${le} u_${ae};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${Q} ${le} ${ae} = a_${ae};
#else
    ${Q} ${le} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${Q} ${le} ${ae} = unpack_mix_${Ae}(a_${ae}, u_${ae}_t);
#else
    ${Q} ${le} ${ae} = u_${ae};
#endif
`}),staticAttributes:T,usedDefines:M}}class wa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,m,T,k,M,j,W){this.context=d;let Q=this.boundPaintVertexBuffers.length!==k.length;for(let ae=0;!Q&&ae<k.length;ae++)this.boundPaintVertexBuffers[ae]!==k[ae]&&(Q=!0);let le=this.boundDynamicVertexBuffers.length!==W.length;for(let ae=0;!le&&ae<W.length;ae++)this.boundDynamicVertexBuffers[ae]!==W[ae]&&(le=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==T||Q||le||this.boundIndexBuffer!==M||this.boundVertexOffset!==j)this.freshBind(m,T,k,M,j,W);else{d.bindVertexArrayOES.set(this.vao);for(const ae of W)ae&&ae.bind();M&&M.dynamicDraw&&M.bind()}}freshBind(d,m,T,k,M,j){let W;const Q=d.numAttributes,le=this.context,ae=le.gl;if(le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=le.extVertexArrayObject.createVertexArrayOES(),le.bindVertexArrayOES.set(this.vao),W=0,this.boundProgram=d,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=k,this.boundVertexOffset=M,this.boundDynamicVertexBuffers=j;else{W=le.currentNumAttributes||0;for(let ve=Q;ve<W;ve++)ae.disableVertexAttribArray(ve)}m.enableAttributes(ae,d),m.bind(),m.setVertexAttribPointers(ae,d,M);for(const ve of T)ve.enableAttributes(ae,d),ve.bind(),ve.setVertexAttribPointers(ae,d,M);for(const ve of j)ve&&(ve.enableAttributes(ae,d),ve.bind(),ve.setVertexAttribPointers(ae,d,M));k&&k.bind(),le.currentNumAttributes=Q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function bl(y,d){const m=Math.pow(2,d.canonical.z),T=d.canonical.y;return[new s.MercatorCoordinate(0,T/m).toLngLat().lat,new s.MercatorCoordinate(0,(T+1)/m).toLngLat().lat]}function Ta(y,d,m,T,k,M,j){const W=y.context,Q=W.gl,le=m.fbo;if(!le)return;y.prepareDrawTile();const ae=y.useProgram("hillshade");W.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,le.colorAttachment.get());const ve=((Ne,Ue,Ce,Ke)=>{const Ye=Ce.paint.get("hillshade-shadow-color"),Je=Ce.paint.get("hillshade-highlight-color"),mt=Ce.paint.get("hillshade-accent-color");let ut=Ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ut-=Ne.transform.angle);const xt=!Ne.options.moving;return{u_matrix:Ke||Ne.transform.calculateProjMatrix(Ue.tileID.toUnwrapped(),xt),u_image:0,u_latrange:bl(0,Ue.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),ut],u_shadow:Ye,u_highlight:Je,u_accent:mt}})(y,m,T,y.terrain?d.projMatrix:null);y.prepareDrawProgram(W,ae,d.toUnwrapped());const{tileBoundsBuffer:Ae,tileBoundsIndexBuffer:Be,tileBoundsSegments:$e}=y.getTileBoundsBuffers(m);ae.draw(W,Q.TRIANGLES,k,M,j,s.CullFaceMode.disabled,ve,T.id,Ae,Be,$e)}function Vo(y,d,m){if(!d.needsDEMTextureUpload)return;const T=y.context,k=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||y.getTileTexture(m.stride);const M=m.getPixels();d.demTexture?d.demTexture.update(M,{premultiply:!1}):d.demTexture=new s.Texture(T,M,k.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function Sa(y,d,m,T,k,M){const j=y.context,W=j.gl;if(!d.dem)return;const Q=d.dem;if(j.activeTexture.set(W.TEXTURE1),Vo(y,d,Q),!d.demTexture)return;d.demTexture.bind(W.NEAREST,W.CLAMP_TO_EDGE);const le=Q.dim;j.activeTexture.set(W.TEXTURE0);let ae=d.fbo;if(!ae){const $e=new s.Texture(j,{width:le,height:le,data:null},W.RGBA);$e.bind(W.LINEAR,W.CLAMP_TO_EDGE),ae=d.fbo=j.createFramebuffer(le,le,!0),ae.colorAttachment.set($e.texture)}j.bindFramebuffer.set(ae.framebuffer),j.viewport.set([0,0,le,le]);const{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Ae,tileBoundsSegments:Be}=y.getMercatorTileBoundsBuffers();y.useProgram("hillshadePrepare").draw(j,W.TRIANGLES,T,k,M,s.CullFaceMode.disabled,(($e,Ne)=>{const Ue=Ne.stride,Ce=s.create();return s.ortho(Ce,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(Ce,Ce,[0,-s.EXTENT,0]),{u_matrix:Ce,u_image:1,u_dimension:[Ue,Ue],u_zoom:$e.overscaledZ,u_unpack:Ne.unpackVector}})(d.tileID,Q),m.id,ve,Ae,Be),d.needsHillshadePrepare=!1}const ea=y=>({u_matrix:new s.UniformMatrix4f(y),u_image0:new s.Uniform1i(y),u_skirt_height:new s.Uniform1f(y)}),oc=(y,d)=>({u_matrix:y,u_image0:0,u_skirt_height:d}),xl=(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:m,u_zoom_transition:k,u_merc_center:M,u_image0:0,u_frustum_tl:j,u_frustum_tr:W,u_frustum_br:Q,u_frustum_bl:le,u_globe_pos:ae,u_globe_radius:ve,u_viewport:Ae,u_grid_matrix:$e?Float32Array.from($e):new Float32Array(9),u_skirt_height:Be});function ac(y,d){return y!=null&&d!=null&&!(!y.hasData()||!d.hasData())&&y.demTexture!=null&&d.demTexture!=null&&y.tileID.key!==d.tileID.key}const Uo=new class{constructor(){this.operations={}}newMorphing(y,d,m,T,k){if(y in this.operations){const M=this.operations[y];M.to.tileID.key!==m.tileID.key&&(M.queued=m)}else this.operations[y]={startTime:T,phase:0,duration:k,from:d,to:m,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const d=this.operations[y];return{from:d.from,to:d.to,phase:d.phase}}update(y){for(const d in this.operations){const m=this.operations[d];for(m.phase=(y-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,y)){delete this.operations[d];break}}}_nextOp(y,d){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=d,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Ga={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Wa(y){return 6*Math.pow(1.5,22-y)}function cs(y,d){const m=1<<y.z;return!d&&(y.x===0||y.x===m-1)||y.y===0||y.y===m-1}const kn=y=>({u_matrix:y});function Lo(y,d,m,T,k){if(k>0){const M=s.exported.now(),j=(M-y.timeAdded)/k,W=d?(M-d.timeAdded)/k:-1,Q=m.getSource(),le=T.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),ae=!d||Math.abs(d.tileID.overscaledZ-le)>Math.abs(y.tileID.overscaledZ-le),ve=ae&&y.refreshedUponExpiration?1:s.clamp(ae?j:1-W,0,1);return y.refreshedUponExpiration&&j>=1&&(y.refreshedUponExpiration=!1),d?{opacity:1,mix:1-ve}:{opacity:ve,mix:0}}return{opacity:1,mix:0}}class Us extends s.SourceCache{constructor(d){const m={type:"raster-dem",maxzoom:d.transform.maxZoom},T=new Mt(Bi(),null),k=St("mock-dem",m,T,d.style);super("mock-dem",k,!1),k.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,m){d.state="loaded",m(null)}}class Rc extends s.SourceCache{constructor(d){const m=St("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new Mt(Bi(),null),d.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,m,T){if(d.freezeTileCoverage)return;this.transform=d;const k=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((M,j)=>{if(M[j.key]="",!this._tiles[j.key]){const W=new s.Tile(j,this._source.tileSize*j.overscaleFactor(),d.tileZoom);W.state="loaded",this._tiles[j.key]=W}return M},{});for(const M in this._tiles)M in k||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(d){const m=this.proxyCachedFBO[d];if(m!==void 0){const T=Object.values(m);this.renderCachePool.push(...T),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class lc extends s.OverscaledTileID{constructor(d,m,T){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=m,this.projMatrix=T}}class uc extends s.Elevation{constructor(d,m){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,k,M]=function(Q){const le=new s.StructArrayLayout2i4,ae=new s.StructArrayLayout3ui6,ve=131;le.reserve(17161),ae.reserve(33800);const Ae=s.EXTENT/128,Be=s.EXTENT+Ae/2,$e=Be+Ae;for(let Ue=-Ae;Ue<$e;Ue+=Ae)for(let Ce=-Ae;Ce<$e;Ce+=Ae){const Ke=Ce<0||Ce>Be||Ue<0||Ue>Be?24575:0,Ye=s.clamp(Math.round(Ce),0,s.EXTENT),Je=s.clamp(Math.round(Ue),0,s.EXTENT);le.emplaceBack(Ye+Ke,Je)}const Ne=(Ue,Ce)=>{const Ke=Ce*ve+Ue;ae.emplaceBack(Ke+1,Ke,Ke+ve),ae.emplaceBack(Ke+ve,Ke+ve+1,Ke+1)};for(let Ue=1;Ue<129;Ue++)for(let Ce=1;Ce<129;Ce++)Ne(Ce,Ue);return[0,129].forEach(Ue=>{for(let Ce=0;Ce<130;Ce++)Ne(Ce,Ue),Ne(Ue,Ce)}),[le,ae,32768]}(),j=d.context;this.gridBuffer=j.createVertexBuffer(T,s.posAttributes.members),this.gridIndexBuffer=j.createIndexBuffer(k),this.gridSegments=s.SegmentVector.simpleSegment(0,0,T.length,k.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,T.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Rc(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const W=j.gl;this._overlapStencilMode=new s.StencilMode({func:W.GEQUAL,mask:255},0,255,W.KEEP,W.KEEP,W.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Us(m.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,m,T){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const k=d.terrain.properties;this.sourceCache=d.terrain.drapeRenderMode===0?this._mockSourceCache:d._getSourceCache(k.get("source")),this._exaggeration=k.get("exaggeration");const M=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const j=this.getScaledDemTileSize();this.sourceCache.update(m,j,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),m.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||d.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&d.dataType==="source"?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):d.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=T._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(T.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const k=this.proxyCoords=m.getIds().map(Q=>{const le=m.getTileByID(Q).tileID;return le.projMatrix=T.calculateProjMatrix(le.toUnwrapped()),le});(function(Q,le){const ae=le.transform.pointCoordinate(le.transform.getCameraPoint()),ve=new s.pointGeometry(ae.x,ae.y);Q.sort((Ae,Be)=>{if(Be.overscaledZ-Ae.overscaledZ)return Be.overscaledZ-Ae.overscaledZ;const $e=new s.pointGeometry(Ae.canonical.x+(1<<Ae.canonical.z)*Ae.wrap,Ae.canonical.y),Ne=new s.pointGeometry(Be.canonical.x+(1<<Be.canonical.z)*Be.wrap,Be.canonical.y),Ue=ve.mult(1<<Ae.canonical.z);return Ue.x-=.5,Ue.y-=.5,Ue.distSqr($e)-Ue.distSqr(Ne)})})(k,this.painter),this._previousZoom=T.zoom;const M=this.proxyToSource||{};this.proxyToSource={},k.forEach(Q=>{this.proxyToSource[Q.key]={}}),this.terrainTileForTile={};const j=this._style._sourceCaches;for(const Q in j){const le=j[Q];if(!le.used||(le!==this.sourceCache&&this.resetTileLookupCache(le.id),this._setupProxiedCoordsForOrtho(le,d[Q],M),le.usedForTerrain))continue;const ae=d[Q];le.getSource().reparseOverscaled&&this._assignTerrainTiles(ae)}this.proxiedCoords[m.id]=k.map(Q=>new lc(Q,Q.key,this.orthoMatrix)),this._assignTerrainTiles(k),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const W={};this._visibleDemTiles=[];for(const Q of this.proxyCoords){const le=this.terrainTileForTile[Q.key];if(!le)continue;const ae=le.tileID.key;ae in W||(this._visibleDemTiles.push(le),W[ae]=ae)}}_assignTerrainTiles(d){this._initializing||d.forEach(m=>{if(this.terrainTileForTile[m.key])return;const T=this._findTileCoveringTileID(m,this.sourceCache);T&&(this.terrainTileForTile[m.key]=T)})}_prepareDEMTextures(){const d=this.painter.context,m=d.gl;for(const T in this.terrainTileForTile){const k=this.terrainTileForTile[T],M=k.dem;!M||k.demTexture&&!k.needsDEMTextureUpload||(d.activeTexture.set(m.TEXTURE1),Vo(this.painter,k,M))}}_prepareDemTileUniforms(d,m,T,k){if(!m||m.demTexture==null)return!1;const M=d.tileID.canonical,j=Math.pow(2,m.tileID.canonical.z-M.z),W=k||"";return T[`u_dem_tl${W}`]=[M.x*j%1,M.y*j%1],T[`u_dem_scale${W}`]=j,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,m=d.gl;if(!this._emptyDepthBufferTexture){const T=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(d,T,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const m=this._visibleDemTiles.reduce((T,k)=>{if(!k.dem)return T;const M=k.dem.tree.minimums[0];return M>0&&d++,T+M},0);return d?m/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,m=d.gl;d.activeTexture.set(m.TEXTURE2);const T=this._getLoadedAreaMinimum(),k=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(k,{premultiply:!1}):M=this._emptyDEMTexture=new s.Texture(d,k,m.RGBA,{premultiply:!1}),M}setupElevationDraw(d,m,T){const k=this.painter.context,M=k.gl,j=(W=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(W),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var W;j.u_dem_size=this.sourceCache.getSource().tileSize,j.u_exaggeration=this.exaggeration();let Q=null,le=null,ae=1;if(T&&T.morphing&&this._useVertexMorphing){const ve=T.morphing.srcDemTile,Ae=T.morphing.dstDemTile;ae=T.morphing.phase,ve&&Ae&&(this._prepareDemTileUniforms(d,ve,j,"_prev")&&(le=ve),this._prepareDemTileUniforms(d,Ae,j)&&(Q=Ae))}if(le&&Q?(k.activeTexture.set(M.TEXTURE2),Q.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),k.activeTexture.set(M.TEXTURE4),le.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),j.u_dem_lerp=ae):(Q=this.terrainTileForTile[d.tileID.key],k.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(d,Q,j)?Q.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),k.activeTexture.set(M.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(j.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),j.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&Q){const ve=(1<<Q.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;j.u_meter_to_dem=ve}if(T&&T.labelPlaneMatrixInv&&(j.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),m.setTerrainUniformValues(k,j),this.painter.transform.projection.name==="globe"){const ve=this.globeUniformValues(this.painter.transform,d.tileID.canonical,T&&T.useDenormalizedUpVectorScale);m.setGlobeUniformValues(k,ve)}}globeUniformValues(d,m,T){const k=d.projection;return{u_tile_tl_up:k.upVector(m,0,0),u_tile_tr_up:k.upVector(m,s.EXTENT,0),u_tile_br_up:k.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:k.upVector(m,0,s.EXTENT),u_tile_up_scale:T?s.globeMetersToEcef(1):k.upVectorScale(m,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const m=this.painter,T=this.painter.context;d.length!==0&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(k,M,j,W,Q){if(k.transform.projection.name==="globe")(function(le,ae,ve,Ae,Be){const $e=le.context,Ne=$e.gl;let Ue,Ce;const Ke=le.options.showTerrainWireframe?2:0,Ye=le.transform,Je=s.globeUseCustomAntiAliasing(le,$e,Ye),mt=(ui,Ft)=>{if(Ce===ui)return;const Et=[Ga[ui],"PROJECTION_GLOBE_VIEW"];Je&&Et.push("CUSTOM_ANTIALIASING"),Ft&&Et.push(Ga[Ke]),Ue=le.useProgram("globeRaster",null,Et),Ce=ui},ut=le.colorModeForRenderPass(),xt=new s.DepthMode(Ne.LEQUAL,s.DepthMode.ReadWrite,le.depthRangeFor3D);Uo.update(Be);const It=s.calculateGlobeMercatorMatrix(Ye),Dt=[s.mercatorXfromLng(Ye.center.lng),s.mercatorYfromLat(Ye.center.lat)],Nt=Ke?[!1,!0]:[!1],Ti=le.globeSharedBuffers,Ot=[Ye.width*s.exported.devicePixelRatio,Ye.height*s.exported.devicePixelRatio],ni=Float32Array.from(Ye.globeMatrix),qt={useDenormalizedUpVectorScale:!0};if(Nt.forEach(ui=>{const Ft=le.transform,Et=Wa(Ft.zoom)*ae.exaggeration();Ce=-1;const zt=ui?Ne.LINES:Ne.TRIANGLES;for(const oi of Ae){const hi=ve.getTile(oi),en=s.StencilMode.disabled,Rn=ae.prevTerrainTileForTile[oi.key],Yi=ae.terrainTileForTile[oi.key];ac(Rn,Yi)&&Uo.newMorphing(oi.key,Rn,Yi,Be,250),$e.activeTexture.set(Ne.TEXTURE0),hi.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE);const Ui=Uo.getMorphValuesForProxy(oi.key),tn=Ui?1:0;Ui&&s.extend$1(qt,{morphing:{srcDemTile:Ui.from,dstDemTile:Ui.to,phase:s.easeCubicInOut(Ui.phase)}});const jn=s.tileCornersToBounds(oi.canonical),an=s.getLatitudinalLod(jn.getCenter().lat),hr=s.getGridMatrix(oi.canonical,jn,an,Ft.worldSize/Ft._pixelsPerMercatorPixel),mr=s.globeNormalizeECEF(s.globeTileBounds(oi.canonical)),$r=xl(Ft.projMatrix,ni,It,mr,s.globeToMercatorTransition(Ft.zoom),Dt,Ft.frustumCorners.TL,Ft.frustumCorners.TR,Ft.frustumCorners.BR,Ft.frustumCorners.BL,Ft.globeCenterInViewSpace,Ft.globeRadius,Ot,Et,hr);if(mt(tn,ui),ae.setupElevationDraw(hi,Ue,qt),le.prepareDrawProgram($e,Ue,oi.toUnwrapped()),Ti){const[Dr,Hs,el]=ui?Ti.getWirefameBuffers(le.context,an):Ti.getGridBuffers(an,Et!==0);Ue.draw($e,zt,xt,en,ut,s.CullFaceMode.backCCW,$r,"globe_raster",Dr,Hs,el)}}}),Ti){const ui=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Je&&ui.push("CUSTOM_ANTIALIASING"),Ue=le.useProgram("globeRaster",null,ui);for(const Ft of Ae){const{x:Et,y:zt,z:oi}=Ft.canonical,hi=zt===0,en=zt===(1<<oi)-1,[Rn,Yi,Ui,tn]=Ti.getPoleBuffers(oi);if(tn&&(hi||en)){const jn=ve.getTile(Ft);$e.activeTexture.set(Ne.TEXTURE0),jn.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE);let an=s.globePoleMatrixForTile(oi,Et,Ye);const hr=s.globeNormalizeECEF(s.globeTileBounds(Ft.canonical)),mr=($r,Dr)=>$r.draw($e,Ne.TRIANGLES,xt,s.StencilMode.disabled,ut,s.CullFaceMode.disabled,xl(Ye.projMatrix,an,an,hr,0,Dt,Ye.frustumCorners.TL,Ye.frustumCorners.TR,Ye.frustumCorners.BR,Ye.frustumCorners.BL,Ye.globeCenterInViewSpace,Ye.globeRadius,Ot,0),"globe_pole_raster",Dr,Ui,tn);ae.setupElevationDraw(jn,Ue,qt),le.prepareDrawProgram($e,Ue,Ft.toUnwrapped()),hi&&mr(Ue,Rn),en&&(an=s.scale(s.create(),an,[1,-1,1]),mr(Ue,Yi))}}}})(k,M,j,W,Q);else{const le=k.context,ae=le.gl;let ve,Ae;const Be=k.options.showTerrainWireframe?2:0,$e=(Ye,Je)=>{if(Ae===Ye)return;const mt=[Ga[Ye]];Je&&mt.push(Ga[Be]),ve=k.useProgram("terrainRaster",null,mt),Ae=Ye},Ne=k.colorModeForRenderPass(),Ue=new s.DepthMode(ae.LEQUAL,s.DepthMode.ReadWrite,k.depthRangeFor3D);Uo.update(Q);const Ce=k.transform,Ke=Wa(Ce.zoom)*M.exaggeration();(Be?[!1,!0]:[!1]).forEach(Ye=>{Ae=-1;const Je=Ye?ae.LINES:ae.TRIANGLES,[mt,ut]=Ye?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const xt of W){const It=j.getTile(xt),Dt=s.StencilMode.disabled,Nt=M.prevTerrainTileForTile[xt.key],Ti=M.terrainTileForTile[xt.key];ac(Nt,Ti)&&Uo.newMorphing(xt.key,Nt,Ti,Q,250),le.activeTexture.set(ae.TEXTURE0),It.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE,ae.LINEAR_MIPMAP_NEAREST);const Ot=Uo.getMorphValuesForProxy(xt.key),ni=Ot?1:0;let qt;Ot&&(qt={morphing:{srcDemTile:Ot.from,dstDemTile:Ot.to,phase:s.easeCubicInOut(Ot.phase)}});const ui=oc(xt.projMatrix,cs(xt.canonical,Ce.renderWorldCopies)?Ke/10:Ke);$e(ni,Ye),M.setupElevationDraw(It,ve,qt),k.prepareDrawProgram(le,ve,xt.toUnwrapped()),ve.draw(le,Je,Ue,Dt,Ne,s.CullFaceMode.backCCW,ui,"terrain_raster",M.gridBuffer,mt,ut)}})}}(m,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(this._drapedRenderBatches.length===0)return d+1;this.renderingToTexture=!0;const m=this.painter,T=this.painter.context,k=this.proxySourceCache,M=this.proxiedCoords[k.id],j=this._drapedRenderBatches.shift(),W=[],Q=m.style.order;let le=0;for(const ae of M){const ve=k.getTileByID(ae.proxyTileKey),Ae=k.proxyCachedFBO[ae.key]?k.proxyCachedFBO[ae.key][d]:void 0,Be=Ae!==void 0?k.renderCache[Ae]:this.pool[le++],$e=Ae!==void 0;if(ve.texture=Be.tex,$e&&!Be.dirty){W.push(ve.tileID);continue}let Ne;T.bindFramebuffer.set(Be.fb.framebuffer),this.renderedToTile=!1,Be.dirty&&(T.clear({color:s.Color.transparent,stencil:0}),Be.dirty=!1);for(let Ue=j.start;Ue<=j.end;++Ue){const Ce=m.style._layers[Q[Ue]];if(Ce.isHidden(m.transform.zoom))continue;const Ke=m.style._getLayerSourceCache(Ce),Ye=Ke?this.proxyToSource[ae.key][Ke.id]:[ae];if(!Ye)continue;const Je=Ye;T.viewport.set([0,0,Be.fb.width,Be.fb.height]),Ne!==(Ke?Ke.id:null)&&(this._setupStencil(Be,Ye,Ce,Ke),Ne=Ke?Ke.id:null),m.renderLayer(m,Ke,Ce,Je)}this.renderedToTile?(Be.dirty=!0,W.push(ve.tileID)):$e||--le,le===5&&(le=0,this.renderToBackBuffer(W))}return this.renderToBackBuffer(W),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,m.width,m.height]),j.end+1}postRender(){}renderCacheEfficiency(d){const m=d.order.length;if(m===0)return{efficiency:100};let T,k=0,M=0,j=!1;for(let W=0;W<m;++W){const Q=d._layers[d.order[W]];this._style.isLayerDraped(Q)?(j&&++k,++M):j||(j=!0,T=Q.id)}return M===0?{efficiency:100}:{efficiency:100*(1-k/M),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(m=>m.dem).forEach(m=>{d=Math.min(d,m.dem.tree.minimums[0])}),d===0?d:(d-30)*this._exaggeration}raycast(d,m,T){if(!this._visibleDemTiles)return null;const k=this._visibleDemTiles.filter(M=>M.dem).map(M=>{const j=M.tileID,W=1<<j.overscaledZ,{x:Q,y:le}=j.canonical,ae=Q/W,ve=(Q+1)/W,Ae=le/W,Be=(le+1)/W;return{minx:ae,miny:Ae,maxx:ve,maxy:Be,t:M.dem.tree.raycastRoot(ae,Ae,ve,Be,d,m,T),tile:M}});k.sort((M,j)=>(M.t!==null?M.t:Number.MAX_VALUE)-(j.t!==null?j.t:Number.MAX_VALUE));for(const M of k){if(M.t==null)return null;const j=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,d,m,T);if(j!=null)return j}return null}_createFBO(){const d=this.painter.context,m=d.gl,T=this.drapeBufferSize;d.activeTexture.set(m.TEXTURE0);const k=new s.Texture(d,{width:T[0],height:T[1],data:null},m.RGBA);k.bind(m.LINEAR,m.CLAMP_TO_EDGE);const M=d.createFramebuffer(T[0],T[1],!1);return M.colorAttachment.set(k.texture),M.depthAttachment=new Io(d,M.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:M,tex:k,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const m=this._style._layers[d],T=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!T&&m.shouldRedrape():!T&&m.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const T of this._style._getSources())if(T instanceof _e){d=!0;break}if(!d)return;const m={};for(let T=0;T<this._style.order.length;++T){const k=this._style._layers[this._style.order[T]],M=this._style._getLayerSourceCache(k);if(M&&!m[M.id]&&!k.isHidden(this.painter.transform.zoom)&&k.type==="line"&&k.widthExpression()instanceof s.ZoomDependentExpression){m[M.id]=!0;for(const j of this.proxyCoords){const W=this.proxyToSource[j.key][M.id];if(W)for(const Q of W)this._clearRenderCacheForTile(M.id,Q)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof Te){d=!0;break}if(!d)return;const m={};for(let T=0;T<this._style.order.length;++T){const k=this._style._layers[this._style.order[T]],M=this._style._getLayerSourceCache(k);if(!M||m[M.id]||k.isHidden(this.painter.transform.zoom)||k.type!=="raster")continue;const j=k.paint.get("raster-fade-duration");for(const W of this.proxyCoords){const Q=this.proxyToSource[W.key][M.id];if(Q)for(const le of Q){const ae=Lo(M.getTile(le),M.findLoadedParent(le,0),M,this.painter.transform,j);(ae.opacity!==1||ae.mix!==0)&&this._clearRenderCacheForTile(M.id,le)}}}}_setupDrapedRenderBatches(){const d=this._style.order,m=d.length;if(m===0)return;const T=[];let k,M=0,j=this._style._layers[d[M]];for(;!this._style.isLayerDraped(j)&&j.isHidden(this.painter.transform.zoom)&&++M<m;)j=this._style._layers[d[M]];for(;M<m;++M){const W=this._style._layers[d[M]];W.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(W)?k===void 0&&(k=M):k!==void 0&&(T.push({start:k,end:M-1}),k=void 0))}k!==void 0&&T.push({start:k,end:M-1}),this._drapedRenderBatches=T}_setupRenderCache(d){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const j=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let W=0;W<j.length;++W){const Q=Object.values(j[W]);m.renderCachePool.push(...Q)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,k=this._tilesDirty;for(let j=T.length-1;j>=0;j--){const W=T[j];if(m.getTileByID(W.key),m.proxyCachedFBO[W.key]!==void 0){const Q=d[W.key],le=this.proxyToSource[W.key];let ae=0;for(const ve in le){const Ae=le[ve],Be=Q[ve];if(!Be||Be.length!==Ae.length||Ae.some(($e,Ne)=>$e!==Be[Ne]||k[ve]&&k[ve].hasOwnProperty($e.key))){ae=-1;break}++ae}for(const ve in m.proxyCachedFBO[W.key])m.renderCache[m.proxyCachedFBO[W.key][ve]].dirty=ae<0||ae!==Object.values(Q).length}}const M=[...this._drapedRenderBatches];M.sort((j,W)=>W.end-W.start-(j.end-j.start));for(const j of M)for(const W of T){if(m.proxyCachedFBO[W.key])continue;let Q=m.renderCachePool.pop();Q===void 0&&m.renderCache.length<50&&(Q=m.renderCache.length,m.renderCache.push(this._createFBO())),Q!==void 0&&(m.proxyCachedFBO[W.key]={},m.proxyCachedFBO[W.key][j.start]=Q,m.renderCache[Q].dirty=!0)}this._tilesDirty={}}_setupStencil(d,m,T,k){if(!k||!this._sourceTilesOverlap[k.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,j=M.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let W;if(T.isTileClipped())W=m.length,this._overlapStencilMode.test={func:j.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);W=1,this._overlapStencilMode.test={func:j.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+W>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=W,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(d,m){const T=this.painter,k=this.painter.context,M=k.gl;T._tileClippingMaskIDs={},k.setColorMode(s.ColorMode.disabled),k.setDepthMode(s.DepthMode.disabled);const j=T.useProgram("clippingMask");for(const W of d){const Q=T._tileClippingMaskIDs[W.key]=--m;j.draw(k,M.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:M.ALWAYS,mask:0},Q,255,M.KEEP,M.KEEP,M.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,kn(W.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(d){const m=this.painter.transform;if(d.x<0||d.x>m.width||d.y<0||d.y>m.height)return null;const T=[d.x,d.y,1,1];s.transformMat4$1(T,T,m.pixelMatrixInverse),s.scale$1(T,T,1/T[3]),T[0]/=m.worldSize,T[1]/=m.worldSize;const k=m._camera.position,M=s.mercatorZfromAltitude(1,m.center.lat),j=[k[0],k[1],k[2]/M,0],W=s.subtract([],T.slice(0,3),j);s.normalize(W,W);const Q=this.raycast(j,W,this._exaggeration);return Q!==null&&Q?(s.scaleAndAdd(j,j,W,Q),j[3]=j[2],j[2]*=M,j):null}drawDepth(){const d=this.painter,m=d.context,T=this.proxySourceCache,k=Math.ceil(d.width),M=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===k&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const j=m.gl,W=m.createFramebuffer(k,M,!0);m.activeTexture.set(j.TEXTURE0);const Q=new s.Texture(m,{width:k,height:M,data:null},j.RGBA);Q.bind(j.NEAREST,j.CLAMP_TO_EDGE),W.colorAttachment.set(Q.texture);const le=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,k,M);W.depthAttachment.set(le),this._depthFBO=W,this._depthTexture=Q}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,k,M]),function(j,W,Q,le){if(j.transform.projection.name==="globe")return;const ae=j.context,ve=ae.gl;ae.clear({depth:1});const Ae=j.useProgram("terrainDepth"),Be=new s.DepthMode(ve.LESS,s.DepthMode.ReadWrite,j.depthRangeFor3D);for(const $e of le){const Ne=Q.getTile($e),Ue=oc($e.projMatrix,0);W.setupElevationDraw(Ne,Ae),Ae.draw(ae,ve.TRIANGLES,Be,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Ue,"terrain_depth",W.gridBuffer,W.gridIndexBuffer,W.gridNoSkirtSegments)}}(d,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,m,T){if(d.getSource()instanceof _t)return this._setupProxiedCoordsForImageSource(d,m,T);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const k=this.proxiedCoords[d.id]=[],M=this.proxyCoords;for(let W=0;W<M.length;W++){const Q=M[W],le=this._findTileCoveringTileID(Q,d);if(le){const ae=this._createProxiedId(Q,le,T[Q.key]&&T[Q.key][d.id]);k.push(ae),this.proxyToSource[Q.key][d.id]=[ae]}}let j=!1;for(let W=0;W<m.length;W++){const Q=d.getTile(m[W]);if(!Q||!Q.hasData())continue;const le=this._findTileCoveringTileID(Q.tileID,this.proxySourceCache);if(le&&le.tileID.canonical.z!==Q.tileID.canonical.z){const ae=this.proxyToSource[le.tileID.key][d.id],ve=this._createProxiedId(le.tileID,Q,T[le.tileID.key]&&T[le.tileID.key][d.id]);ae?ae.splice(ae.length-1,0,ve):this.proxyToSource[le.tileID.key][d.id]=[ve],k.push(ve),j=!0}}this._sourceTilesOverlap[d.id]=j}_setupProxiedCoordsForImageSource(d,m,T){if(!d.getSource().loaded())return;const k=this.proxiedCoords[d.id]=[],M=this.proxyCoords,j=d.getSource(),W=new s.pointGeometry(j.tileID.x,j.tileID.y)._div(1<<j.tileID.z),Q=j.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((ae,ve)=>(ae.min.x=Math.min(ae.min.x,ve.x-W.x),ae.min.y=Math.min(ae.min.y,ve.y-W.y),ae.max.x=Math.max(ae.max.x,ve.x-W.x),ae.max.y=Math.max(ae.max.y,ve.y-W.y),ae),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),le=(ae,ve)=>{const Ae=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Be=ae.canonical.y/(1<<ae.canonical.z),$e=s.EXTENT/(1<<ae.canonical.z),Ne=ve.wrap+ve.canonical.x/(1<<ve.canonical.z),Ue=ve.canonical.y/(1<<ve.canonical.z);return Ae+$e<Ne+Q.min.x||Ae>Ne+Q.max.x||Be+$e<Ue+Q.min.y||Be>Ue+Q.max.y};for(let ae=0;ae<M.length;ae++){const ve=M[ae];for(let Ae=0;Ae<m.length;Ae++){const Be=d.getTile(m[Ae]);if(!Be||!Be.hasData()||le(ve,Be.tileID))continue;const $e=this._createProxiedId(ve,Be,T[ve.key]&&T[ve.key][d.id]),Ne=this.proxyToSource[ve.key][d.id];Ne?Ne.push($e):this.proxyToSource[ve.key][d.id]=[$e],k.push($e)}}}_createProxiedId(d,m,T){let k=this.orthoMatrix;if(T){const M=T.find(j=>j.key===m.tileID.key);if(M)return M}if(m.tileID.key!==d.key){const M=d.canonical.z-m.tileID.canonical.z;let j,W,Q;k=s.create();const le=m.tileID.wrap-d.wrap<<d.overscaledZ;M>0?(j=s.EXTENT>>M,W=j*((m.tileID.canonical.x<<M)-d.canonical.x+le),Q=j*((m.tileID.canonical.y<<M)-d.canonical.y)):(j=s.EXTENT<<-M,W=s.EXTENT*(m.tileID.canonical.x-(d.canonical.x+le<<-M)),Q=s.EXTENT*(m.tileID.canonical.y-(d.canonical.y<<-M))),s.ortho(k,0,j,0,j,0,1),s.translate(k,k,[W,Q,0])}return new lc(m.tileID,d.key,k)}_findTileCoveringTileID(d,m){let T=m.getTile(d);if(T&&T.hasData())return T;const k=this._findCoveringTileCache[m.id],M=k[d.key];if(T=M?m.getTileByID(M):null,T&&T.hasData()||M===null)return T;let j=T?T.tileID:d,W=j.overscaledZ;const Q=m.getSource().minzoom,le=[];if(!M){const ve=m.getSource().maxzoom;if(d.canonical.z>=ve){const Ae=d.canonical.z-ve;m.getSource().reparseOverscaled?(W=Math.max(d.canonical.z+2,m.transform.tileZoom),j=new s.OverscaledTileID(W,d.wrap,ve,d.canonical.x>>Ae,d.canonical.y>>Ae)):Ae!==0&&(W=ve,j=new s.OverscaledTileID(W,d.wrap,ve,d.canonical.x>>Ae,d.canonical.y>>Ae))}j.key!==d.key&&(le.push(j.key),T=m.getTile(j))}const ae=ve=>{le.forEach(Ae=>{k[Ae]=ve}),le.length=0};for(W-=1;W>=Q&&(!T||!T.hasData());W--){T&&ae(T.tileID.key);const ve=j.calculateScaledKey(W);if(T=m.getTileByID(ve),T&&T.hasData())break;const Ae=k[ve];if(Ae===null)break;Ae===void 0?le.push(ve):T=m.getTileByID(Ae)}return ae(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,m){let T=this._tilesDirty[d];T||(T=this._tilesDirty[d]={}),T[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(m){let T=0;const k=new s.StructArrayLayout2ui4,M=131;for(let j=1;j<129;j++){for(let W=1;W<129;W++)T=j*M+W,k.emplaceBack(T,T+1),k.emplaceBack(T,T+M),k.emplaceBack(T+1,T+M),j===128&&k.emplaceBack(T+M,T+M+1);k.emplaceBack(T+1,T+1+M)}return k}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ql{static cacheKey(d,m,T,k){let M=`${m}${k?k.cacheKey:""}`;for(const j of T)d.usedDefines.includes(j)&&(M+=`/${j}`);return M}constructor(d,m,T,k,M,j){const W=d.gl;this.program=W.createProgram();const Q=function(Ce){const Ke=[];for(let Ye=0;Ye<Ce.length;Ye++){if(Ce[Ye]===null)continue;const Je=Ce[Ye].split(" ");Ke.push(Je.pop())}return Ke}(T.staticAttributes),le=k?k.getBinderAttributes():[],ae=Q.concat(le);let ve=k?k.defines():[];ve=ve.concat(j.map(Ce=>`#define ${Ce}`));const Ae=d.isWebGL2?`#version 300 es
`:"",Be=Ae+ve.concat(d.extStandardDerivatives&&Ae.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(rc):rc,rc,Js,Kl.fragmentSource,vo.fragmentSource,T.fragmentSource).join(`
`),$e=Ae+ve.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Js,Kl.vertexSource,vo.vertexSource,Xl.vertexSource,T.vertexSource).join(`
`),Ne=W.createShader(W.FRAGMENT_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);W.shaderSource(Ne,Be),W.compileShader(Ne),W.attachShader(this.program,Ne);const Ue=W.createShader(W.VERTEX_SHADER);if(W.isContextLost())this.failedToCreate=!0;else{W.shaderSource(Ue,$e),W.compileShader(Ue),W.attachShader(this.program,Ue),this.attributes={},this.numAttributes=ae.length;for(let Ce=0;Ce<this.numAttributes;Ce++)ae[Ce]&&(W.bindAttribLocation(this.program,Ce,ae[Ce]),this.attributes[ae[Ce]]=Ce);W.linkProgram(this.program),W.deleteShader(Ue),W.deleteShader(Ne),this.fixedUniforms=M(d),this.binderUniforms=k?k.getUniforms(d):[],j.includes("TERRAIN")&&(this.terrainUniforms=(Ce=>({u_dem:new s.Uniform1i(Ce),u_dem_prev:new s.Uniform1i(Ce),u_dem_unpack:new s.Uniform4f(Ce),u_dem_tl:new s.Uniform2f(Ce),u_dem_scale:new s.Uniform1f(Ce),u_dem_tl_prev:new s.Uniform2f(Ce),u_dem_scale_prev:new s.Uniform1f(Ce),u_dem_size:new s.Uniform1f(Ce),u_dem_lerp:new s.Uniform1f(Ce),u_exaggeration:new s.Uniform1f(Ce),u_depth:new s.Uniform1i(Ce),u_depth_size_inv:new s.Uniform2f(Ce),u_meter_to_dem:new s.Uniform1f(Ce),u_label_plane_matrix_inv:new s.UniformMatrix4f(Ce)}))(d)),j.includes("GLOBE")&&(this.globeUniforms=(Ce=>({u_tile_tl_up:new s.Uniform3f(Ce),u_tile_tr_up:new s.Uniform3f(Ce),u_tile_br_up:new s.Uniform3f(Ce),u_tile_bl_up:new s.Uniform3f(Ce),u_tile_up_scale:new s.Uniform1f(Ce)}))(d)),j.includes("FOG")&&(this.fogUniforms=(Ce=>({u_fog_matrix:new s.UniformMatrix4f(Ce),u_fog_range:new s.Uniform2f(Ce),u_fog_color:new s.Uniform4f(Ce),u_fog_horizon_blend:new s.Uniform1f(Ce),u_fog_temporal_offset:new s.Uniform1f(Ce),u_frustum_tl:new s.Uniform3f(Ce),u_frustum_tr:new s.Uniform3f(Ce),u_frustum_br:new s.Uniform3f(Ce),u_frustum_bl:new s.Uniform3f(Ce),u_globe_pos:new s.Uniform3f(Ce),u_globe_radius:new s.Uniform1f(Ce),u_globe_transition:new s.Uniform1f(Ce),u_is_globe:new s.Uniform1i(Ce),u_viewport:new s.Uniform2f(Ce)}))(d))}}setTerrainUniformValues(d,m){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const k in m)T[k]&&T[k].set(this.program,k,m[k])}}setGlobeUniformValues(d,m){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const k in m)T[k]&&T[k].set(this.program,k,m[k])}}setFogUniformValues(d,m){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const k in m)T[k].set(this.program,k,m[k])}}draw(d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne){const Ue=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(T),d.setStencilMode(k),d.setColorMode(M),d.setCullFace(j);for(const Ke of Object.keys(this.fixedUniforms))this.fixedUniforms[Ke].set(this.program,Ke,W[Ke]);$e&&$e.setUniforms(this.program,d,this.binderUniforms,Ae,{zoom:Be});const Ce={[Ue.LINES]:2,[Ue.TRIANGLES]:3,[Ue.LINE_STRIP]:1}[m];for(const Ke of ve.get()){const Ye=Ke.vaos||(Ke.vaos={});(Ye[Q]||(Ye[Q]=new wa)).bind(d,this,le,$e?$e.getPaintVertexBuffers():[],ae,Ke.vertexOffset,Ne||[]),Ue.drawElements(m,Ke.primitiveLength*Ce,Ue.UNSIGNED_SHORT,Ke.primitiveOffset*Ce*2)}}}function cc(y,d){const m=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,y.transform.tileZoom)/m,k=T*(d.tileID.canonical.x+d.tileID.wrap*m),M=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/Qt(d,1,y.transform.tileZoom),u_pixel_coord_upper:[k>>16,M>>16],u_pixel_coord_lower:[65535&k,65535&M]}}const fd=s.create(),dc=(y,d,m,T,k,M,j,W,Q,le,ae)=>{const ve=d.style.light,Ae=ve.properties.get("position"),Be=[Ae.x,Ae.y,Ae.z],$e=s.create$1();ve.properties.get("anchor")==="viewport"&&(s.fromRotation($e,-d.transform.angle),s.transformMat3(Be,Be,$e));const Ne=ve.properties.get("color"),Ue=d.transform,Ce={u_matrix:y,u_lightpos:Be,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[Ne.r,Ne.g,Ne.b],u_vertical_gradient:+m,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:fd,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:k,u_edge_radius:M};return Ue.projection.name==="globe"&&(Ce.u_tile_id=[j.canonical.x,j.canonical.y,1<<j.canonical.z],Ce.u_zoom_transition=Q,Ce.u_inv_rot_matrix=ae,Ce.u_merc_center=le,Ce.u_up_dir=Ue.projection.upVector(new s.CanonicalTileID(0,0,0),le[0]*s.EXTENT,le[1]*s.EXTENT),Ce.u_height_lift=W),Ce},Pu=(y,d,m,T,k,M,j,W,Q,le,ae,ve)=>{const Ae=dc(y,d,m,T,k,M,j,Q,le,ae,ve),Be={u_height_factor:-Math.pow(2,j.overscaledZ)/W.tileSize/8};return s.extend(Ae,cc(d,W),Be)},Au=y=>({u_matrix:y}),to=(y,d,m)=>s.extend(Au(y),cc(d,m)),qa=(y,d)=>({u_matrix:y,u_world:d}),pd=(y,d,m,T)=>s.extend(to(y,d,m),{u_world:T}),ta=s.create(),Mu=(y,d,m,T,k,M)=>{const j=y.transform,W=j.projection.name==="globe";let Q;if(M.paint.get("circle-pitch-alignment")==="map")if(W){const ae=s.globePixelsToTileUnits(j.zoom,d.canonical)*j._pixelsPerMercatorPixel;Q=Float32Array.from([ae,0,0,ae])}else Q=j.calculatePixelsToTileUnitsMatrix(m);else Q=new Float32Array([j.pixelsToGLUnits[0],0,0,j.pixelsToGLUnits[1]]);const le={u_camera_to_center_distance:j.cameraToCenterDistance,u_matrix:y.translatePosMatrix(d.projMatrix,m,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:Q,u_inv_rot_matrix:ta,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(W){le.u_inv_rot_matrix=T,le.u_merc_center=k,le.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],le.u_zoom_transition=s.globeToMercatorTransition(j.zoom);const ae=k[0]*s.EXTENT,ve=k[1]*s.EXTENT;le.u_up_dir=j.projection.upVector(new s.CanonicalTileID(0,0,0),ae,ve)}return le},yo=y=>{const d=[];return y.paint.get("circle-pitch-alignment")==="map"&&d.push("PITCH_WITH_MAP"),y.paint.get("circle-pitch-scale")==="map"&&d.push("SCALE_WITH_MAP"),d},wl=(y,d,m,T)=>{const k=s.EXTENT/m.tileSize;return{u_matrix:y,u_camera_to_center_distance:d.getCameraToCenterDistance(T),u_extrude_scale:[d.pixelsToGLUnits[0]/k,d.pixelsToGLUnits[1]/k]}},ia=(y,d,m=1)=>({u_matrix:y,u_color:d,u_overlay:0,u_overlay_scale:m}),Ou=s.create(),bo=(y,d,m,T,k,M,j)=>{const W=y.transform,Q=W.projection.name==="globe",le=Q?s.globePixelsToTileUnits(W.zoom,d.canonical)*W._pixelsPerMercatorPixel:Qt(m,1,M),ae={u_matrix:d.projMatrix,u_extrude_scale:le,u_intensity:j,u_inv_rot_matrix:Ou,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Q){ae.u_inv_rot_matrix=T,ae.u_merc_center=k,ae.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],ae.u_zoom_transition=s.globeToMercatorTransition(W.zoom);const ve=k[0]*s.EXTENT,Ae=k[1]*s.EXTENT;ae.u_up_dir=W.projection.upVector(new s.CanonicalTileID(0,0,0),ve,Ae)}return ae},Za=(y,d,m,T,k,M,j)=>{const W=y.transform,Q=W.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:Lu(y,d,m,T),u_pixels_to_tile_units:Q,u_device_pixel_ratio:M,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:k,u_texsize:Ya(m)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Tl(d,y.transform),u_alpha_discard_threshold:0,u_trim_offset:j}},Ca=(y,d,m,T,k)=>{const M=y.transform;return{u_matrix:Lu(y,d,m,T),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:M.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:k,u_image:0,u_tile_units_to_pixels:Tl(d,M),u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Tl(y,d){return 1/Qt(y,1,d.tileZoom)}function Lu(y,d,m,T){return y.translatePosMatrix(T||d.tileID.projMatrix,d,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function Ya(y){const d=y.paint.get("line-dasharray").value;return d.value||d.kind!=="constant"}const ih=(y,d,m,T,k,M)=>{return{u_matrix:y,u_tl_parent:d,u_scale_parent:m,u_fade_t:T.mix,u_opacity:T.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(W=k.paint.get("raster-saturation"),W>0?1-1/(1.001-W):-W),u_contrast_factor:(j=k.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:Do(k.paint.get("raster-hue-rotate")),u_perspective_transform:M};var j,W};function Do(y){y*=Math.PI/180;const d=Math.sin(y),m=Math.cos(y);return[(2*m+1)/3,(-Math.sqrt(3)*d-m+1)/3,(Math.sqrt(3)*d-m+1)/3]}const md=s.create(),jo=(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne)=>{const Ue=k.transform,Ce={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:Ue.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:j,u_coord_matrix:W,u_is_text:+Q,u_pitch_with_map:+T,u_texsize:le,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:md,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:md,u_up_vector:[0,-1,0]};return Ne.name==="globe"&&(Ce.u_tile_id=[ae.canonical.x,ae.canonical.y,1<<ae.canonical.z],Ce.u_zoom_transition=ve,Ce.u_inv_rot_matrix=Be,Ce.u_merc_center=Ae,Ce.u_camera_forward=Ue._camera.forward(),Ce.u_ecef_origin=s.globeECEFOrigin(Ue.globeMatrix,ae.toUnwrapped()),Ce.u_tile_matrix=Float32Array.from(Ue.globeMatrix),Ce.u_up_vector=$e),Ce},gd=(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne,Ue)=>s.extend(jo(y,d,m,T,k,M,j,W,Q,le,ve,Ae,Be,$e,Ne,Ue),{u_gamma_scale:T?k.transform.cameraToCenterDistance*Math.cos(k.terrain?0:k.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+ae}),xo=(y,d,m,T,k,M,j,W,Q,le,ae,ve,Ae,Be,$e,Ne)=>s.extend(gd(y,d,m,T,k,M,j,W,!0,Q,!0,ae,ve,Ae,Be,$e,Ne),{u_texsize_icon:le,u_texture_icon:1}),hc=(y,d,m)=>({u_matrix:y,u_opacity:d,u_color:m}),Sl=(y,d,m,T,k)=>s.extend(function(M,j,W){const Q=j.imageManager.getPattern(M.toString()),{width:le,height:ae}=j.imageManager.getPixelSize(),ve=Math.pow(2,W.tileID.overscaledZ),Ae=W.tileSize*Math.pow(2,j.transform.tileZoom)/ve,Be=Ae*(W.tileID.canonical.x+W.tileID.wrap*ve),$e=Ae*W.tileID.canonical.y;return{u_image:0,u_pattern_tl:Q.tl,u_pattern_br:Q.br,u_texsize:[le,ae],u_pattern_size:Q.displaySize,u_tile_units_to_pixels:1/Qt(W,1,j.transform.tileZoom),u_pixel_coord_upper:[Be>>16,$e>>16],u_pixel_coord_lower:[65535&Be,65535&$e]}}(T,m,k),{u_matrix:y,u_opacity:d}),Cl={fillExtrusion:y=>({u_matrix:new s.UniformMatrix4f(y),u_lightpos:new s.Uniform3f(y),u_lightintensity:new s.Uniform1f(y),u_lightcolor:new s.Uniform3f(y),u_vertical_gradient:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_edge_radius:new s.Uniform1f(y),u_ao:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_up_dir:new s.Uniform3f(y),u_height_lift:new s.Uniform1f(y)}),fillExtrusionPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_lightpos:new s.Uniform3f(y),u_lightintensity:new s.Uniform1f(y),u_lightcolor:new s.Uniform3f(y),u_vertical_gradient:new s.Uniform1f(y),u_height_factor:new s.Uniform1f(y),u_edge_radius:new s.Uniform1f(y),u_ao:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_up_dir:new s.Uniform3f(y),u_height_lift:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y)}),fill:y=>({u_matrix:new s.UniformMatrix4f(y)}),fillPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),fillOutline:y=>({u_matrix:new s.UniformMatrix4f(y),u_world:new s.Uniform2f(y)}),fillOutlinePattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_world:new s.Uniform2f(y),u_image:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),circle:y=>({u_camera_to_center_distance:new s.Uniform1f(y),u_extrude_scale:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_up_dir:new s.Uniform3f(y)}),collisionBox:y=>({u_matrix:new s.UniformMatrix4f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_extrude_scale:new s.Uniform2f(y)}),collisionCircle:y=>({u_matrix:new s.UniformMatrix4f(y),u_inv_matrix:new s.UniformMatrix4f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_viewport_size:new s.Uniform2f(y)}),debug:y=>({u_color:new s.UniformColor(y),u_matrix:new s.UniformMatrix4f(y),u_overlay:new s.Uniform1i(y),u_overlay_scale:new s.Uniform1f(y)}),clippingMask:y=>({u_matrix:new s.UniformMatrix4f(y)}),heatmap:y=>({u_extrude_scale:new s.Uniform1f(y),u_intensity:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_up_dir:new s.Uniform3f(y)}),heatmapTexture:y=>({u_image:new s.Uniform1i(y),u_color_ramp:new s.Uniform1i(y),u_opacity:new s.Uniform1f(y)}),hillshade:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_latrange:new s.Uniform2f(y),u_light:new s.Uniform2f(y),u_shadow:new s.UniformColor(y),u_highlight:new s.UniformColor(y),u_accent:new s.UniformColor(y)}),hillshadePrepare:y=>({u_matrix:new s.UniformMatrix4f(y),u_image:new s.Uniform1i(y),u_dimension:new s.Uniform2f(y),u_zoom:new s.Uniform1f(y),u_unpack:new s.Uniform4f(y)}),line:y=>({u_matrix:new s.UniformMatrix4f(y),u_pixels_to_tile_units:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_units_to_pixels:new s.Uniform2f(y),u_dash_image:new s.Uniform1i(y),u_gradient_image:new s.Uniform1i(y),u_image_height:new s.Uniform1f(y),u_texsize:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_alpha_discard_threshold:new s.Uniform1f(y),u_trim_offset:new s.Uniform2f(y)}),linePattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_texsize:new s.Uniform2f(y),u_pixels_to_tile_units:new s.UniformMatrix2f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_units_to_pixels:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y),u_alpha_discard_threshold:new s.Uniform1f(y)}),raster:y=>({u_matrix:new s.UniformMatrix4f(y),u_tl_parent:new s.Uniform2f(y),u_scale_parent:new s.Uniform1f(y),u_fade_t:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_image0:new s.Uniform1i(y),u_image1:new s.Uniform1i(y),u_brightness_low:new s.Uniform1f(y),u_brightness_high:new s.Uniform1f(y),u_saturation_factor:new s.Uniform1f(y),u_contrast_factor:new s.Uniform1f(y),u_spin_weights:new s.Uniform3f(y),u_perspective_transform:new s.Uniform2f(y)}),symbolIcon:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_camera_forward:new s.Uniform3f(y),u_tile_matrix:new s.UniformMatrix4f(y),u_up_vector:new s.Uniform3f(y),u_ecef_origin:new s.Uniform3f(y),u_texture:new s.Uniform1i(y)}),symbolSDF:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_texture:new s.Uniform1i(y),u_gamma_scale:new s.Uniform1f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_tile_id:new s.Uniform3f(y),u_zoom_transition:new s.Uniform1f(y),u_inv_rot_matrix:new s.UniformMatrix4f(y),u_merc_center:new s.Uniform2f(y),u_camera_forward:new s.Uniform3f(y),u_tile_matrix:new s.UniformMatrix4f(y),u_up_vector:new s.Uniform3f(y),u_ecef_origin:new s.Uniform3f(y),u_is_halo:new s.Uniform1i(y)}),symbolTextAndIcon:y=>({u_is_size_zoom_constant:new s.Uniform1i(y),u_is_size_feature_constant:new s.Uniform1i(y),u_size_t:new s.Uniform1f(y),u_size:new s.Uniform1f(y),u_camera_to_center_distance:new s.Uniform1f(y),u_rotate_symbol:new s.Uniform1i(y),u_aspect_ratio:new s.Uniform1f(y),u_fade_change:new s.Uniform1f(y),u_matrix:new s.UniformMatrix4f(y),u_label_plane_matrix:new s.UniformMatrix4f(y),u_coord_matrix:new s.UniformMatrix4f(y),u_is_text:new s.Uniform1i(y),u_pitch_with_map:new s.Uniform1i(y),u_texsize:new s.Uniform2f(y),u_texsize_icon:new s.Uniform2f(y),u_texture:new s.Uniform1i(y),u_texture_icon:new s.Uniform1i(y),u_gamma_scale:new s.Uniform1f(y),u_device_pixel_ratio:new s.Uniform1f(y),u_is_halo:new s.Uniform1i(y)}),background:y=>({u_matrix:new s.UniformMatrix4f(y),u_opacity:new s.Uniform1f(y),u_color:new s.UniformColor(y)}),backgroundPattern:y=>({u_matrix:new s.UniformMatrix4f(y),u_opacity:new s.Uniform1f(y),u_image:new s.Uniform1i(y),u_pattern_tl:new s.Uniform2f(y),u_pattern_br:new s.Uniform2f(y),u_texsize:new s.Uniform2f(y),u_pattern_size:new s.Uniform2f(y),u_pixel_coord_upper:new s.Uniform2f(y),u_pixel_coord_lower:new s.Uniform2f(y),u_tile_units_to_pixels:new s.Uniform1f(y)}),terrainRaster:ea,terrainDepth:ea,skybox:y=>({u_matrix:new s.UniformMatrix4f(y),u_sun_direction:new s.Uniform3f(y),u_cubemap:new s.Uniform1i(y),u_opacity:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y)}),skyboxGradient:y=>({u_matrix:new s.UniformMatrix4f(y),u_color_ramp:new s.Uniform1i(y),u_center_direction:new s.Uniform3f(y),u_radius:new s.Uniform1f(y),u_opacity:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y)}),skyboxCapture:y=>({u_matrix_3f:new s.UniformMatrix3f(y),u_sun_direction:new s.Uniform3f(y),u_sun_intensity:new s.Uniform1f(y),u_color_tint_r:new s.Uniform4f(y),u_color_tint_m:new s.Uniform4f(y),u_luminance:new s.Uniform1f(y)}),globeRaster:y=>({u_proj_matrix:new s.UniformMatrix4f(y),u_globe_matrix:new s.UniformMatrix4f(y),u_normalize_matrix:new s.UniformMatrix4f(y),u_merc_matrix:new s.UniformMatrix4f(y),u_zoom_transition:new s.Uniform1f(y),u_merc_center:new s.Uniform2f(y),u_image0:new s.Uniform1i(y),u_grid_matrix:new s.UniformMatrix3f(y),u_skirt_height:new s.Uniform1f(y),u_frustum_tl:new s.Uniform3f(y),u_frustum_tr:new s.Uniform3f(y),u_frustum_br:new s.Uniform3f(y),u_frustum_bl:new s.Uniform3f(y),u_globe_pos:new s.Uniform3f(y),u_globe_radius:new s.Uniform1f(y),u_viewport:new s.Uniform2f(y)}),globeAtmosphere:y=>({u_frustum_tl:new s.Uniform3f(y),u_frustum_tr:new s.Uniform3f(y),u_frustum_br:new s.Uniform3f(y),u_frustum_bl:new s.Uniform3f(y),u_horizon:new s.Uniform1f(y),u_transition:new s.Uniform1f(y),u_fadeout_range:new s.Uniform1f(y),u_color:new s.Uniform4f(y),u_high_color:new s.Uniform4f(y),u_space_color:new s.Uniform4f(y),u_star_intensity:new s.Uniform1f(y),u_star_density:new s.Uniform1f(y),u_star_size:new s.Uniform1f(y),u_temporal_offset:new s.Uniform1f(y),u_horizon_angle:new s.Uniform1f(y),u_rotation_matrix:new s.UniformMatrix4f(y)})};let ur;function ka(y,d,m,T,k,M,j){const W=y.context,Q=W.gl,le=y.transform,ae=y.useProgram("collisionBox"),ve=[];let Ae=0,Be=0;for(let Je=0;Je<T.length;Je++){const mt=T[Je],ut=d.getTile(mt),xt=ut.getBucket(m);if(!xt)continue;const It=Gl(mt,xt,le);let Dt=It;k[0]===0&&k[1]===0||(Dt=y.translatePosMatrix(It,ut,k,M));const Nt=j?xt.textCollisionBox:xt.iconCollisionBox,Ti=xt.collisionCircleArray;if(Ti.length>0){const Ot=s.create(),ni=Dt;s.mul(Ot,xt.placementInvProjMatrix,le.glCoordMatrix),s.mul(Ot,Ot,xt.placementViewportMatrix),ve.push({circleArray:Ti,circleOffset:Be,transform:ni,invTransform:Ot,projection:xt.getProjection()}),Ae+=Ti.length/4,Be=Ae}Nt&&(y.terrain&&y.terrain.setupElevationDraw(ut,ae),ae.draw(W,Q.LINES,s.DepthMode.disabled,s.StencilMode.disabled,y.colorModeForRenderPass(),s.CullFaceMode.disabled,wl(Dt,le,ut,xt.getProjection()),m.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,null,le.zoom,null,[Nt.collisionVertexBuffer,Nt.collisionVertexBufferExt]))}if(!j||!ve.length)return;const $e=y.useProgram("collisionCircle"),Ne=new s.StructArrayLayout2f1f2i16;Ne.resize(4*Ae),Ne._trim();let Ue=0;for(const Je of ve)for(let mt=0;mt<Je.circleArray.length/4;mt++){const ut=4*mt,xt=Je.circleArray[ut+0],It=Je.circleArray[ut+1],Dt=Je.circleArray[ut+2],Nt=Je.circleArray[ut+3];Ne.emplace(Ue++,xt,It,Dt,Nt,0),Ne.emplace(Ue++,xt,It,Dt,Nt,1),Ne.emplace(Ue++,xt,It,Dt,Nt,2),Ne.emplace(Ue++,xt,It,Dt,Nt,3)}(!ur||ur.length<2*Ae)&&(ur=function(Je){const mt=2*Je,ut=new s.StructArrayLayout3ui6;ut.resize(mt),ut._trim();for(let xt=0;xt<mt;xt++){const It=6*xt;ut.uint16[It+0]=4*xt+0,ut.uint16[It+1]=4*xt+1,ut.uint16[It+2]=4*xt+2,ut.uint16[It+3]=4*xt+2,ut.uint16[It+4]=4*xt+3,ut.uint16[It+5]=4*xt+0}return ut}(Ae));const Ce=W.createIndexBuffer(ur,!0),Ke=W.createVertexBuffer(Ne,s.collisionCircleLayout.members,!0);for(const Je of ve){const mt={u_matrix:Je.transform,u_inv_matrix:Je.invTransform,u_camera_to_center_distance:(Ye=le).getCameraToCenterDistance(Je.projection),u_viewport_size:[Ye.width,Ye.height]};$e.draw(W,Q.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,y.colorModeForRenderPass(),s.CullFaceMode.disabled,mt,m.id,Ke,Ce,s.SegmentVector.simpleSegment(0,2*Je.circleOffset,Je.circleArray.length,Je.circleArray.length/2),null,le.zoom)}var Ye;Ke.destroy(),Ce.destroy()}const Jl=s.create();function Xa({width:y,height:d,anchor:m,textOffset:T,textScale:k},M){const{horizontalAlign:j,verticalAlign:W}=s.getAnchorAlignment(m),Q=-(j-.5)*y,le=-(W-.5)*d,ae=s.evaluateVariableOffset(m,T);return new s.pointGeometry((Q/k+ae[0])*M,(le/k+ae[1])*M)}function Ea(y,d,m,T,k,M,j,W,Q,le,ae){const ve=y.text.placedSymbolArray,Ae=y.text.dynamicLayoutVertexArray,Be=y.icon.dynamicLayoutVertexArray,$e={},Ne=y.getProjection(),Ue=No(W,Ne,M),Ce=M.elevation,Ke=Ne.upVectorScale(W.canonical,M.center.lat,M.worldSize).metersToTile;Ae.clear();for(let Ye=0;Ye<ve.length;Ye++){const Je=ve.get(Ye),{tileAnchorX:mt,tileAnchorY:ut,numGlyphs:xt}=Je,It=y.allowVerticalPlacement&&!Je.placedOrientation,Dt=Je.hidden||!Je.crossTileID||It?null:T[Je.crossTileID];if(Dt){let Nt=0,Ti=0,Ot=0;if(Ce){const en=Ce?Ce.getAtTileOffset(W,mt,ut):0,[Rn,Yi,Ui]=Ne.upVector(W.canonical,mt,ut);Nt=en*Rn*Ke,Ti=en*Yi*Ke,Ot=en*Ui*Ke}let[ni,qt,ui,Ft]=bi(Je.projectedAnchorX+Nt,Je.projectedAnchorY+Ti,Je.projectedAnchorZ+Ot,m?Ue:j);const Et=_n(M.getCameraToCenterDistance(Ne),Ft);let zt=k.evaluateSizeForFeature(y.textSizeData,le,Je)*Et/s.ONE_EM;m&&(zt*=y.tilePixelRatio/Q);const oi=Xa(Dt,zt);m?({x:ni,y:qt,z:ui}=Ne.projectTilePoint(mt+oi.x,ut+oi.y,W.canonical),[ni,qt,ui]=bi(ni+Nt,qt+Ti,ui+Ot,j)):(d&&oi._rotate(-M.angle),ni+=oi.x,qt+=oi.y,ui=0);const hi=y.allowVerticalPlacement&&Je.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let en=0;en<xt;en++)s.addDynamicAttributes(Ae,ni,qt,ui,hi);ae&&Je.associatedIconIndex>=0&&($e[Je.associatedIconIndex]={x:ni,y:qt,z:ui,angle:hi})}else In(xt,Ae)}if(ae){Be.clear();const Ye=y.icon.placedSymbolArray;for(let Je=0;Je<Ye.length;Je++){const mt=Ye.get(Je),{numGlyphs:ut}=mt,xt=$e[Je];if(mt.hidden||!xt)In(ut,Be);else{const{x:It,y:Dt,z:Nt,angle:Ti}=xt;for(let Ot=0;Ot<ut;Ot++)s.addDynamicAttributes(Be,It,Dt,Nt,Ti)}}y.icon.dynamicLayoutVertexBuffer.updateData(Be)}y.text.dynamicLayoutVertexBuffer.updateData(Ae)}function fc(y,d,m){return m.iconsInText&&d?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function pc(y,d,m,T,k,M,j,W,Q,le,ae,ve){const Ae=y.context,Be=Ae.gl,$e=y.transform,Ne=W==="map",Ue=Q==="map",Ce=Ne&&m.layout.get("symbol-placement")!=="point",Ke=Ne&&!Ue&&!Ce,Ye=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Je=!1;const mt=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),ut=[s.mercatorXfromLng($e.center.lng),s.mercatorYfromLat($e.center.lat)],xt=m.layout.get("text-variable-anchor"),It=$e.projection.name==="globe",Dt=[],Nt=[0,-1,0];let Ti=Nt;!It&&!$e.mercatorFromTransition||Ne||(Ti=function(Ot){const ni=Ot._camera.getWorldToCamera(Ot.worldSize,1),qt=s.multiply([],ni,Ot.globeMatrix);s.invert(qt,qt);const ui=[0,0,0],Ft=[0,1,0,0];return s.transformMat4$1(Ft,Ft,qt),ui[0]=Ft[0],ui[1]=Ft[1],ui[2]=Ft[2],s.normalize(ui,ui),ui}($e));for(const Ot of T){const ni=d.getTile(Ot),qt=ni.getBucket(m);if(!qt||qt.projection.name==="mercator"&&It)continue;const ui=k?qt.text:qt.icon;if(!ui||qt.fullyClipped||!ui.segments.get().length)continue;const Ft=ui.programConfigurations.get(m.id),Et=k||qt.sdfIcons,zt=k?qt.textSizeData:qt.iconSizeData,oi=Ue||$e.pitch!==0,hi=s.evaluateSizeForZoom(zt,$e.zoom);let en,Rn,Yi,Ui,tn=[0,0],jn=null;if(k){if(Rn=ni.glyphAtlasTexture,Yi=Be.LINEAR,en=ni.glyphAtlasTexture.size,qt.iconsInText){tn=ni.imageAtlasTexture.size,jn=ni.imageAtlasTexture;const Al=zt.kind==="composite"||zt.kind==="camera";Ui=oi||y.options.rotating||y.options.zooming||Al?Be.LINEAR:Be.NEAREST}}else{const Al=m.layout.get("icon-size").constantOr(0)!==1||qt.iconsNeedLinear;Rn=ni.imageAtlasTexture,Yi=Et||y.options.rotating||y.options.zooming||Al||oi?Be.LINEAR:Be.NEAREST,en=ni.imageAtlasTexture.size}const an=qt.projection.name==="globe",hr=an?Ti:Nt,mr=an?s.globeToMercatorTransition($e.zoom):0,$r=No(Ot,qt.getProjection(),$e),Dr=$e.calculatePixelsToTileUnitsMatrix(ni),Hs=En($r,ni.tileID.canonical,Ue,Ne,$e,qt.getProjection(),Dr),el=y.terrain&&Ue&&Ce?s.invert(s.create(),Hs):Jl,$u=Qo($r,ni.tileID.canonical,Ue,Ne,$e,qt.getProjection(),Dr),Vc=xt&&qt.hasTextData(),Kr=m.layout.get("icon-text-fit")!=="none"&&Vc&&qt.hasIconData();if(Ce){const Al=$e.elevation,uu=Al?Al.getAtTileOffsetFunc(Ot,$e.center.lat,$e.worldSize,qt.getProjection()):null,Uc=dr($r,ni.tileID.canonical,Ue,Ne,$e,qt.getProjection(),Dr);fn(qt,$r,y,k,Uc,$u,Ue,le,uu,Ot)}const Rr=Ce||k&&xt||Kr,or=y.translatePosMatrix($r,ni,M,j),ks=Rr?Jl:Hs,aa=y.translatePosMatrix($u,ni,M,j,!0),Gr=qt.getProjection().createInversionMatrix($e,Ot.canonical),la=[];y.terrainRenderModeElevated()&&Ue&&la.push("PITCH_WITH_MAP_TERRAIN"),an&&la.push("PROJECTION_GLOBE_VIEW"),Rr&&la.push("PROJECTED_POS_ON_VIEWPORT");const ua=Et&&m.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vd;vd=Et?qt.iconsInText?xo(zt.kind,hi,Ke,Ue,y,or,ks,aa,en,tn,Ot,mr,ut,Gr,hr,qt.getProjection()):gd(zt.kind,hi,Ke,Ue,y,or,ks,aa,k,en,!0,Ot,mr,ut,Gr,hr,qt.getProjection()):jo(zt.kind,hi,Ke,Ue,y,or,ks,aa,k,en,Ot,mr,ut,Gr,hr,qt.getProjection());const Kh={program:y.useProgram(fc(Et,k,qt),Ft,la),buffers:ui,uniformValues:vd,atlasTexture:Rn,atlasTextureIcon:jn,atlasInterpolation:Yi,atlasInterpolationIcon:Ui,isSDF:Et,hasHalo:ua,tile:ni,labelPlaneMatrixInv:el};if(Ye&&qt.canOverlap){Je=!0;const Al=ui.segments.get();for(const uu of Al)Dt.push({segments:new s.SegmentVector([uu]),sortKey:uu.sortKey,state:Kh})}else Dt.push({segments:ui.segments,sortKey:0,state:Kh})}Je&&Dt.sort((Ot,ni)=>Ot.sortKey-ni.sortKey);for(const Ot of Dt){const ni=Ot.state;if(y.terrain&&y.terrain.setupElevationDraw(ni.tile,ni.program,{useDepthForOcclusion:!It,labelPlaneMatrixInv:ni.labelPlaneMatrixInv}),Ae.activeTexture.set(Be.TEXTURE0),ni.atlasTexture.bind(ni.atlasInterpolation,Be.CLAMP_TO_EDGE),ni.atlasTextureIcon&&(Ae.activeTexture.set(Be.TEXTURE1),ni.atlasTextureIcon&&ni.atlasTextureIcon.bind(ni.atlasInterpolationIcon,Be.CLAMP_TO_EDGE)),ni.isSDF){const qt=ni.uniformValues;ni.hasHalo&&(qt.u_is_halo=1,Bc(ni.buffers,Ot.segments,m,y,ni.program,mt,ae,ve,qt)),qt.u_is_halo=0}Bc(ni.buffers,Ot.segments,m,y,ni.program,mt,ae,ve,ni.uniformValues)}}function Bc(y,d,m,T,k,M,j,W,Q){const le=T.context,ae=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.globeExtVertexBuffer];k.draw(le,le.gl.TRIANGLES,M,j,W,s.CullFaceMode.disabled,Q,m.id,y.layoutVertexBuffer,y.indexBuffer,d,m.paint,T.transform.zoom,y.programConfigurations.get(m.id),ae)}function kl(y,d,m,T,k,M,j){const W=y.context.gl,Q=m.paint.get("fill-pattern"),le=Q&&Q.constantOr(1);let ae,ve,Ae,Be,$e;j?(ve=le&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=W.LINES):(ve=le?"fillPattern":"fill",ae=W.TRIANGLES);for(const Ne of T){const Ue=d.getTile(Ne);if(le&&!Ue.patternsLoaded())continue;const Ce=Ue.getBucket(m);if(!Ce)continue;y.prepareDrawTile();const Ke=Ce.programConfigurations.get(m.id),Ye=y.useProgram(ve,Ke);le&&(y.context.activeTexture.set(W.TEXTURE0),Ue.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),Ke.updatePaintBuffers());const Je=Q.constantOr(null);if(Je&&Ue.imageAtlas){const ut=Ue.imageAtlas.patternPositions[Je.toString()];ut&&Ke.setConstantPatternPositions(ut)}const mt=y.translatePosMatrix(Ne.projMatrix,Ue,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(j){Be=Ce.indexBuffer2,$e=Ce.segments2;const ut=y.terrain&&y.terrain.renderingToTexture?y.terrain.drapeBufferSize:[W.drawingBufferWidth,W.drawingBufferHeight];Ae=ve==="fillOutlinePattern"&&le?pd(mt,y,Ue,ut):qa(mt,ut)}else Be=Ce.indexBuffer,$e=Ce.segments,Ae=le?to(mt,y,Ue):Au(mt);y.prepareDrawProgram(y.context,Ye,Ne.toUnwrapped()),Ye.draw(y.context,ae,k,y.stencilModeForClipping(Ne),M,s.CullFaceMode.disabled,Ae,m.id,Ce.layoutVertexBuffer,Be,$e,m.paint,y.transform.zoom,Ke)}}function mc(y,d,m,T,k,M,j){const W=y.context,Q=W.gl,le=y.transform,ae=m.paint.get("fill-extrusion-pattern"),ve=ae.constantOr(1),Ae=m.paint.get("fill-extrusion-opacity"),Be=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],$e=m.layout.get("fill-extrusion-edge-radius"),Ne=le.projection.name==="globe"?s.fillExtrusionHeightLift():0,Ue=le.projection.name==="globe",Ce=Ue?s.globeToMercatorTransition(le.zoom):0,Ke=[s.mercatorXfromLng(le.center.lng),s.mercatorYfromLat(le.center.lat)],Ye=[];Ue&&Ye.push("PROJECTION_GLOBE_VIEW"),Be[0]>0&&Ye.push("FAUX_AO");for(const Je of T){const mt=d.getTile(Je),ut=mt.getBucket(m);if(!ut||ut.projection.name!==le.projection.name)continue;const xt=ut.programConfigurations.get(m.id),It=y.useProgram(ve?"fillExtrusionPattern":"fillExtrusion",xt,Ye);if(y.terrain){const ui=y.terrain;if(y.style.terrainSetForDrapingOnly())ui.setupElevationDraw(mt,It,{useMeterToDem:!0});else{if(!ut.enableTerrain)continue;if(ui.setupElevationDraw(mt,It,{useMeterToDem:!0}),Fc(W,d,Je,ut,m,ui),!ut.centroidVertexBuffer){const Ft=It.attributes.a_centroid_pos;Ft!==void 0&&Q.vertexAttrib2f(Ft,0,0)}}}ve&&(y.context.activeTexture.set(Q.TEXTURE0),mt.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),xt.updatePaintBuffers());const Dt=ae.constantOr(null);if(Dt&&mt.imageAtlas){const ui=mt.imageAtlas.patternPositions[Dt.toString()];ui&&xt.setConstantPatternPositions(ui)}const Nt=y.translatePosMatrix(Je.projMatrix,mt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Ti=le.projection.createInversionMatrix(le,Je.canonical),Ot=m.paint.get("fill-extrusion-vertical-gradient"),ni=ve?Pu(Nt,y,Ot,Ae,Be,$e,Je,mt,Ne,Ce,Ke,Ti):dc(Nt,y,Ot,Ae,Be,$e,Je,Ne,Ce,Ke,Ti);y.prepareDrawProgram(W,It,Je.toUnwrapped());const qt=[];y.terrain&&qt.push(ut.centroidVertexBuffer),Ue&&qt.push(ut.layoutVertexExtBuffer),It.draw(W,W.gl.TRIANGLES,k,M,j,s.CullFaceMode.backCCW,ni,m.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,m.paint,y.transform.zoom,xt,qt)}}function Fc(y,d,m,T,k,M){const j=[Ce=>{let Ke=Ce.canonical.x-1,Ye=Ce.wrap;return Ke<0&&(Ke=(1<<Ce.canonical.z)-1,Ye--),new s.OverscaledTileID(Ce.overscaledZ,Ye,Ce.canonical.z,Ke,Ce.canonical.y)},Ce=>{let Ke=Ce.canonical.x+1,Ye=Ce.wrap;return Ke===1<<Ce.canonical.z&&(Ke=0,Ye++),new s.OverscaledTileID(Ce.overscaledZ,Ye,Ce.canonical.z,Ke,Ce.canonical.y)},Ce=>new s.OverscaledTileID(Ce.overscaledZ,Ce.wrap,Ce.canonical.z,Ce.canonical.x,(Ce.canonical.y===0?1<<Ce.canonical.z:Ce.canonical.y)-1),Ce=>new s.OverscaledTileID(Ce.overscaledZ,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y===(1<<Ce.canonical.z)-1?0:Ce.canonical.y+1)],W=Ce=>{const Ke=d.getSource().minzoom,Ye=mt=>{const ut=d.getTileByID(mt);if(ut&&ut.hasData())return ut.getBucket(k)},Je=[0,-1,1];for(const mt of Je){if(Ce.overscaledZ+mt<Ke)continue;const ut=Ye(Ce.calculateScaledKey(Ce.overscaledZ+mt));if(ut)return ut}},Q=[0,0,0],le=(Ce,Ke)=>(Q[0]=Math.min(Ce.min.y,Ke.min.y),Q[1]=Math.max(Ce.max.y,Ke.max.y),Q[2]=s.EXTENT-Ke.min.x>Ce.max.x?Ke.min.x-s.EXTENT:Ce.max.x,Q),ae=(Ce,Ke)=>(Q[0]=Math.min(Ce.min.x,Ke.min.x),Q[1]=Math.max(Ce.max.x,Ke.max.x),Q[2]=s.EXTENT-Ke.min.y>Ce.max.y?Ke.min.y-s.EXTENT:Ce.max.y,Q),ve=[(Ce,Ke)=>le(Ce,Ke),(Ce,Ke)=>le(Ke,Ce),(Ce,Ke)=>ae(Ce,Ke),(Ce,Ke)=>ae(Ke,Ce)],Ae=new s.pointGeometry(0,0);let Be,$e,Ne;const Ue=(Ce,Ke,Ye,Je,mt)=>{const ut=[[Je?Ye:Ce,Je?Ce:Ye,0],[Je?Ye:Ke,Je?Ke:Ye,0]],xt=mt<0?s.EXTENT+mt:mt,It=[Je?xt:(Ce+Ke)/2,Je?(Ce+Ke)/2:xt,0];return Ye===0&&mt<0||Ye!==0&&mt>0?M.getForTilePoints(Ne,[It],!0,$e):ut.push(It),M.getForTilePoints(m,ut,!0,Be),Math.max(ut[0][2],ut[1][2],It[2])/M.exaggeration()};for(let Ce=0;Ce<4;Ce++){const Ke=(Ce<2?1:5)-Ce,Ye=T.borders[Ce];if(Ye.length===0)continue;const Je=Ne=j[Ce](m),mt=W(Je);if(!(mt&&mt instanceof s.FillExtrusionBucket&&mt.enableTerrain)||T.borderDoneWithNeighborZ[Ce]===mt.canonical.z&&mt.borderDoneWithNeighborZ[Ke]===T.canonical.z||($e=M.findDEMTileFor(Je),!$e||!$e.dem))continue;if(!Be){const Dt=M.findDEMTileFor(m);if(!Dt||!Dt.dem)return;Be=Dt}const ut=mt.borders[Ke];let xt=0;const It=mt.borderDoneWithNeighborZ[Ke]!==T.canonical.z;if(T.canonical.z===mt.canonical.z){for(let Dt=0;Dt<Ye.length;Dt++){const Nt=T.featuresOnBorder[Ye[Dt]],Ti=Nt.borders[Ce];let Ot;for(;xt<ut.length&&(Ot=mt.featuresOnBorder[ut[xt]],!(Ot.borders[Ke][1]>Ti[0]+3));)It&&mt.encodeCentroid(void 0,Ot,!1),xt++;if(Ot&&xt<ut.length){const ni=xt;let qt=0;for(;!(Ot.borders[Ke][0]>Ti[1]-3)&&(qt++,++xt!==ut.length);)Ot=mt.featuresOnBorder[ut[xt]];if(Ot=mt.featuresOnBorder[ut[ni]],Nt.intersectsCount()>1||Ot.intersectsCount()>1||qt!==1){qt!==1&&(xt=ni),T.encodeCentroid(void 0,Nt,!1),It&&mt.encodeCentroid(void 0,Ot,!1);continue}const ui=ve[Ce](Nt,Ot),Ft=Ce%2?s.EXTENT-1:0;Ae.x=Ue(ui[0],Math.min(s.EXTENT-1,ui[1]),Ft,Ce<2,ui[2]),Ae.y=0,T.encodeCentroid(Ae,Nt,!1),It&&mt.encodeCentroid(Ae,Ot,!1)}else T.encodeCentroid(void 0,Nt,!1)}T.borderDoneWithNeighborZ[Ce]=mt.canonical.z,T.needsCentroidUpdate=!0,It&&(mt.borderDoneWithNeighborZ[Ke]=T.canonical.z,mt.needsCentroidUpdate=!0)}else{for(const Dt of Ye)T.encodeCentroid(void 0,T.featuresOnBorder[Dt],!1);if(It){for(const Dt of ut)mt.encodeCentroid(void 0,mt.featuresOnBorder[Dt],!1);mt.borderDoneWithNeighborZ[Ke]=T.canonical.z,mt.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[Ce]=mt.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&T.centroidVertexArray.length!==0)&&T.uploadCentroid(y)}const Du=new s.Color(1,0,0,1),El=new s.Color(0,1,0,1),$c=new s.Color(0,0,1,1),wo=new s.Color(1,0,1,1),eu=new s.Color(0,1,1,1);function tu(y,d,m){const T=y.context,k=y.transform,M=T.gl,j=k.projection.name==="globe",W=j?["PROJECTION_GLOBE_VIEW"]:null;let Q=m.projMatrix;if(j&&s.globeToMercatorTransition(k.zoom)>0){const Nt=s.transitionTileAABBinECEF(m.canonical,k),Ti=s.globeDenormalizeECEF(Nt);Q=s.multiply(new Float32Array(16),k.globeMatrix,Ti),s.multiply(Q,k.projMatrix,Q)}const le=y.useProgram("debug",null,W),ae=d.getTileByID(m.key);y.terrain&&y.terrain.setupElevationDraw(ae,le);const ve=s.DepthMode.disabled,Ae=s.StencilMode.disabled,Be=y.colorModeForRenderPass(),$e="$debug";T.activeTexture.set(M.TEXTURE0),y.emptyTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),j?ae._makeGlobeTileDebugBuffers(y.context,k):ae._makeDebugTileBoundsBuffers(y.context,k.projection);const Ne=ae._tileDebugBuffer||y.debugBuffer,Ue=ae._tileDebugIndexBuffer||y.debugIndexBuffer,Ce=ae._tileDebugSegments||y.debugSegments;le.draw(T,M.LINE_STRIP,ve,Ae,Be,s.CullFaceMode.disabled,ia(Q,s.Color.red),$e,Ne,Ue,Ce,null,null,null,[ae._globeTileDebugBorderBuffer]);const Ke=ae.latestRawTileData,Ye=Math.floor((Ke&&Ke.byteLength||0)/1024),Je=d.getTile(m).tileSize,mt=512/Math.min(Je,512)*(m.overscaledZ/k.zoom)*.5;let ut=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(ut+=` => ${m.overscaledZ}`),ut+=` ${Ye}kb`,function(Nt,Ti){Nt.initDebugOverlayCanvas();const Ot=Nt.debugOverlayCanvas,ni=Nt.context.gl,qt=Nt.debugOverlayCanvas.getContext("2d");qt.clearRect(0,0,Ot.width,Ot.height),qt.shadowColor="white",qt.shadowBlur=2,qt.lineWidth=1.5,qt.strokeStyle="white",qt.textBaseline="top",qt.font="bold 36px Open Sans, sans-serif",qt.fillText(Ti,5,5),qt.strokeText(Ti,5,5),Nt.debugOverlayTexture.update(Ot),Nt.debugOverlayTexture.bind(ni.LINEAR,ni.CLAMP_TO_EDGE)}(y,ut);const xt=ae._tileDebugTextBuffer||y.debugBuffer,It=ae._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,Dt=ae._tileDebugTextSegments||y.debugSegments;le.draw(T,M.TRIANGLES,ve,Ae,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,ia(Q,s.Color.transparent,mt),$e,xt,It,Dt,null,null,null,[ae._globeTileDebugTextBuffer])}function io(y,d,m,T){nu(y,0,d+m/2,y.transform.width,m,T)}function iu(y,d,m,T){nu(y,d-m/2,0,m,y.transform.height,T)}function nu(y,d,m,T,k,M){const j=y.context,W=j.gl;W.enable(W.SCISSOR_TEST),W.scissor(d*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,T*s.exported.devicePixelRatio,k*s.exported.devicePixelRatio),j.clear({color:M}),W.disable(W.SCISSOR_TEST)}const ru=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:na}=ru;function Ia(y,d,m,T){y.emplaceBack(d,m,T)}class To{constructor(d){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Ia(this.vertexArray,-1,-1,1),Ia(this.vertexArray,1,-1,1),Ia(this.vertexArray,-1,1,1),Ia(this.vertexArray,1,1,1),Ia(this.vertexArray,-1,-1,-1),Ia(this.vertexArray,1,-1,-1),Ia(this.vertexArray,-1,1,-1),Ia(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,na),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Dn(y,d,m,T,k,M){const j=y.gl,W=d.paint.get("sky-atmosphere-color"),Q=d.paint.get("sky-atmosphere-halo-color"),le=d.paint.get("sky-atmosphere-sun-intensity"),ae=((ve,Ae,Be,$e,Ne)=>({u_matrix_3f:ve,u_sun_direction:Ae,u_sun_intensity:Be,u_color_tint_r:[$e.r,$e.g,$e.b,$e.a],u_color_tint_m:[Ne.r,Ne.g,Ne.b,Ne.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),T),k,le,W,Q);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+M,d.skyboxTexture,0),m.draw(y,j.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,ae,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const Ru=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class _d{constructor(d){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const T=new s.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(m,Ru.members),this.indexBuffer=d.createIndexBuffer(T),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ts={symbol:function(y,d,m,T,k){if(y.renderPass!=="translucent")return;const M=s.StencilMode.disabled,j=y.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&function(W,Q,le,ae,ve,Ae,Be){const $e=Q.transform,Ne=ve==="map",Ue=Ae==="map";for(const Ce of W){const Ke=ae.getTile(Ce),Ye=Ke.getBucket(le);if(!Ye||!Ye.text||!Ye.text.segments.get().length)continue;const Je=s.evaluateSizeForZoom(Ye.textSizeData,$e.zoom),mt=No(Ce,Ye.getProjection(),$e),ut=$e.calculatePixelsToTileUnitsMatrix(Ke),xt=En(mt,Ke.tileID.canonical,Ue,Ne,$e,Ye.getProjection(),ut),It=le.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(Je){const Dt=Math.pow(2,$e.zoom-Ke.tileID.overscaledZ);Ea(Ye,Ne,Ue,Be,s.symbolSize,$e,xt,Ce,Dt,Je,It)}}}(T,y,m,d,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),k),m.paint.get("icon-opacity").constantOr(1)!==0&&pc(y,d,m,T,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),M,j),m.paint.get("text-opacity").constantOr(1)!==0&&pc(y,d,m,T,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),M,j),d.map.showCollisionBoxes&&(ka(y,d,m,T,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),ka(y,d,m,T,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(y,d,m,T){if(y.renderPass!=="translucent")return;const k=m.paint.get("circle-opacity"),M=m.paint.get("circle-stroke-width"),j=m.paint.get("circle-stroke-opacity"),W=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)===0&&(M.constantOr(1)===0||j.constantOr(1)===0))return;const Q=y.context,le=Q.gl,ae=y.transform,ve=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),Ae=s.StencilMode.disabled,Be=y.colorModeForRenderPass(),$e=ae.projection.name==="globe",Ne=[s.mercatorXfromLng(ae.center.lng),s.mercatorYfromLat(ae.center.lat)],Ue=[];for(let Ke=0;Ke<T.length;Ke++){const Ye=T[Ke],Je=d.getTile(Ye),mt=Je.getBucket(m);if(!mt||mt.projection.name!==ae.projection.name)continue;const ut=mt.programConfigurations.get(m.id),xt=yo(m);$e&&xt.push("PROJECTION_GLOBE_VIEW");const It=y.useProgram("circle",ut,xt),Dt=mt.layoutVertexBuffer,Nt=mt.globeExtVertexBuffer,Ti=mt.indexBuffer,Ot=ae.projection.createInversionMatrix(ae,Ye.canonical),ni={programConfiguration:ut,program:It,layoutVertexBuffer:Dt,globeExtVertexBuffer:Nt,indexBuffer:Ti,uniformValues:Mu(y,Ye,Je,Ot,Ne,m),tile:Je};if(W){const qt=mt.segments.get();for(const ui of qt)Ue.push({segments:new s.SegmentVector([ui]),sortKey:ui.sortKey,state:ni})}else Ue.push({segments:mt.segments,sortKey:0,state:ni})}W&&Ue.sort((Ke,Ye)=>Ke.sortKey-Ye.sortKey);const Ce={useDepthForOcclusion:!$e};for(const Ke of Ue){const{programConfiguration:Ye,program:Je,layoutVertexBuffer:mt,globeExtVertexBuffer:ut,indexBuffer:xt,uniformValues:It,tile:Dt}=Ke.state,Nt=Ke.segments;y.terrain&&y.terrain.setupElevationDraw(Dt,Je,Ce),y.prepareDrawProgram(Q,Je,Dt.tileID.toUnwrapped()),Je.draw(Q,le.TRIANGLES,ve,Ae,Be,s.CullFaceMode.disabled,It,m.id,mt,xt,Nt,m.paint,ae.zoom,Ye,[ut])}},heatmap:function(y,d,m,T){if(m.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const k=y.context,M=k.gl,j=s.StencilMode.disabled,W=new s.ColorMode([M.ONE,M.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(Be,$e,Ne,Ue){const Ce=Be.gl,Ke=$e.width*Ue,Ye=$e.height*Ue;Be.activeTexture.set(Ce.TEXTURE1),Be.viewport.set([0,0,Ke,Ye]);let Je=Ne.heatmapFbo;if(!Je||Je&&(Je.width!==Ke||Je.height!==Ye)){Je&&Je.destroy();const mt=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,mt),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Je=Ne.heatmapFbo=Be.createFramebuffer(Ke,Ye,!1),function(ut,xt,It,Dt,Nt,Ti){const Ot=ut.gl;Ot.texImage2D(Ot.TEXTURE_2D,0,ut.isWebGL2&&ut.extRenderToTextureHalfFloat?Ot.RGBA16F:Ot.RGBA,Nt,Ti,0,Ot.RGBA,ut.extRenderToTextureHalfFloat?ut.isWebGL2?Ot.HALF_FLOAT:ut.extTextureHalfFloat.HALF_FLOAT_OES:Ot.UNSIGNED_BYTE,null),Dt.colorAttachment.set(It)}(Be,0,mt,Je,Ke,Ye)}else Ce.bindTexture(Ce.TEXTURE_2D,Je.colorAttachment.get()),Be.bindFramebuffer.set(Je.framebuffer)})(k,y,m,y.transform.projection.name==="globe"?.5:.25),k.clear({color:s.Color.transparent});const Q=y.transform,le=Q.projection.name==="globe",ae=le?["PROJECTION_GLOBE_VIEW"]:null,ve=le?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,Ae=[s.mercatorXfromLng(Q.center.lng),s.mercatorYfromLat(Q.center.lat)];for(let Be=0;Be<T.length;Be++){const $e=T[Be];if(d.hasRenderableParent($e))continue;const Ne=d.getTile($e),Ue=Ne.getBucket(m);if(!Ue||Ue.projection.name!==Q.projection.name)continue;const Ce=Ue.programConfigurations.get(m.id),Ke=y.useProgram("heatmap",Ce,ae),{zoom:Ye}=y.transform;y.terrain&&y.terrain.setupElevationDraw(Ne,Ke),y.prepareDrawProgram(k,Ke,$e.toUnwrapped());const Je=Q.projection.createInversionMatrix(Q,$e.canonical);Ke.draw(k,M.TRIANGLES,s.DepthMode.disabled,j,W,ve,bo(y,$e,Ne,Je,Ae,Ye,m.paint.get("heatmap-intensity")),m.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,m.paint,y.transform.zoom,Ce,le?[Ue.globeExtVertexBuffer]:null)}k.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(k,M){const j=k.context,W=j.gl,Q=M.heatmapFbo;if(!Q)return;j.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,Q.colorAttachment.get()),j.activeTexture.set(W.TEXTURE1);let le=M.colorRampTexture;le||(le=M.colorRampTexture=new s.Texture(j,M.colorRamp,W.RGBA)),le.bind(W.LINEAR,W.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(j,W.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.disabled,((ae,ve,Ae,Be)=>({u_image:0,u_color_ramp:1,u_opacity:ve.paint.get("heatmap-opacity")}))(0,M),M.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,M.paint,k.transform.zoom)}(y,m))},line:function(y,d,m,T){if(y.renderPass!=="translucent")return;const k=m.paint.get("line-opacity"),M=m.paint.get("line-width");if(k.constantOr(1)===0||M.constantOr(1)===0)return;const j=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),W=y.colorModeForRenderPass(),Q=y.terrain&&y.terrain.renderingToTexture?1:s.exported.devicePixelRatio,le=m.paint.get("line-dasharray"),ae=le.constantOr(1),ve=m.layout.get("line-cap"),Ae=m.paint.get("line-pattern"),Be=Ae.constantOr(1),$e=m.paint.get("line-gradient"),Ne=Be?"linePattern":"line",Ue=y.context,Ce=Ue.gl,Ke=(Je=>{const mt=[];Ya(Je)&&mt.push("RENDER_LINE_DASH"),Je.paint.get("line-gradient")&&mt.push("RENDER_LINE_GRADIENT");const ut=Je.paint.get("line-trim-offset");ut[0]===0&&ut[1]===0||mt.push("RENDER_LINE_TRIM_OFFSET");const xt=Je.paint.get("line-pattern").constantOr(1),It=Je.paint.get("line-opacity").constantOr(1)!==1;return!xt&&It&&mt.push("RENDER_LINE_ALPHA_DISCARD"),mt})(m);let Ye=Ke.includes("RENDER_LINE_ALPHA_DISCARD");y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Ye=!1);for(const Je of T){const mt=d.getTile(Je);if(Be&&!mt.patternsLoaded())continue;const ut=mt.getBucket(m);if(!ut)continue;y.prepareDrawTile();const xt=ut.programConfigurations.get(m.id),It=y.useProgram(Ne,xt,Ke),Dt=Ae.constantOr(null);if(Dt&&mt.imageAtlas){const Et=mt.imageAtlas.patternPositions[Dt.toString()];Et&&xt.setConstantPatternPositions(Et)}const Nt=le.constantOr(null),Ti=ve.constantOr(null);if(!Be&&Nt&&Ti&&mt.lineAtlas){const Et=mt.lineAtlas.getDash(Nt,Ti);Et&&xt.setConstantPatternPositions(Et)}let[Ot,ni]=m.paint.get("line-trim-offset");(Ti==="round"||Ti==="square")&&Ot!==ni&&(Ot===0&&(Ot-=1),ni===1&&(ni+=1));const qt=y.terrain?Je.projMatrix:null,ui=Be?Ca(y,mt,m,qt,Q):Za(y,mt,m,qt,ut.lineClipsArray.length,Q,[Ot,ni]);if($e){const Et=ut.gradients[m.id];let zt=Et.texture;if(m.gradientVersion!==Et.version){let oi=256;if(m.stepInterpolant){const hi=d.getSource().maxzoom,en=Je.canonical.z===hi?Math.ceil(1<<y.transform.maxZoom-Je.canonical.z):1;oi=s.clamp(s.nextPowerOfTwo(ut.maxLineLength/s.EXTENT*1024*en),256,Ue.maxTextureSize)}Et.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:oi,image:Et.gradient||void 0,clips:ut.lineClipsArray}),Et.texture?Et.texture.update(Et.gradient):Et.texture=new s.Texture(Ue,Et.gradient,Ce.RGBA),Et.version=m.gradientVersion,zt=Et.texture}Ue.activeTexture.set(Ce.TEXTURE1),zt.bind(m.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}ae&&(Ue.activeTexture.set(Ce.TEXTURE0),mt.lineAtlasTexture.bind(Ce.LINEAR,Ce.REPEAT),xt.updatePaintBuffers()),Be&&(Ue.activeTexture.set(Ce.TEXTURE0),mt.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),xt.updatePaintBuffers()),y.prepareDrawProgram(Ue,It,Je.toUnwrapped());const Ft=Et=>{It.draw(Ue,Ce.TRIANGLES,j,Et,W,s.CullFaceMode.disabled,ui,m.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,m.paint,y.transform.zoom,xt,[ut.layoutVertexBuffer2])};if(Ye){const Et=y.stencilModeForClipping(Je).ref;Et===0&&y.terrain&&Ue.clear({stencil:0});const zt={func:Ce.EQUAL,mask:255};ui.u_alpha_discard_threshold=.8,Ft(new s.StencilMode(zt,Et,255,Ce.KEEP,Ce.KEEP,Ce.INVERT)),ui.u_alpha_discard_threshold=0,Ft(new s.StencilMode(zt,Et,255,Ce.KEEP,Ce.KEEP,Ce.KEEP))}else Ft(y.stencilModeForClipping(Je))}Ye&&(y.resetStencilClippingMasks(),y.terrain&&Ue.clear({stencil:0}))},fill:function(y,d,m,T){const k=m.paint.get("fill-color"),M=m.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const j=y.colorModeForRenderPass(),W=m.paint.get("fill-pattern"),Q=y.opaquePassEnabledForLayer()&&!W.constantOr(1)&&k.constantOr(s.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===Q){const le=y.depthModeForSublayer(1,y.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);kl(y,d,m,T,le,j,!1)}if(y.renderPass==="translucent"&&m.paint.get("fill-antialias")){const le=y.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);kl(y,d,m,T,le,j,!0)}},"fill-extrusion":function(y,d,m,T){const k=m.paint.get("fill-extrusion-opacity");if(k!==0&&y.renderPass==="translucent"){const M=new s.DepthMode(y.context.gl.LEQUAL,s.DepthMode.ReadWrite,y.depthRangeFor3D);if(k!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))mc(y,d,m,T,M,s.StencilMode.disabled,s.ColorMode.disabled),mc(y,d,m,T,M,y.stencilModeFor3D(),y.colorModeForRenderPass()),y.resetStencilClippingMasks();else{const j=y.colorModeForRenderPass();mc(y,d,m,T,M,s.StencilMode.disabled,j)}}},hillshade:function(y,d,m,T){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const k=y.context,M=y.depthModeForSublayer(0,s.DepthMode.ReadOnly),j=y.colorModeForRenderPass(),W=y.terrain&&y.terrain.renderingToTexture,[Q,le]=y.renderPass!=="translucent"||W?[{},T]:y.stencilConfigForOverlap(T);for(const ae of le){const ve=d.getTile(ae);if(ve.needsHillshadePrepare&&y.renderPass==="offscreen")Sa(y,ve,m,M,s.StencilMode.disabled,j);else if(y.renderPass==="translucent"){const Ae=W&&y.terrain?y.terrain.stencilModeForRTTOverlap(ae):Q[ae.overscaledZ];Ta(y,ae,ve,m,M,Ae,j)}}k.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,d,m,T,k,M){if(y.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!T.length)return;const j=y.context,W=j.gl,Q=d.getSource(),le=y.useProgram("raster"),ae=y.colorModeForRenderPass(),ve=y.terrain&&y.terrain.renderingToTexture,[Ae,Be]=Q instanceof _t||ve?[{},T]:y.stencilConfigForOverlap(T),$e=Be[Be.length-1].overscaledZ,Ne=!y.options.moving;for(const Ue of Be){const Ce=ve?s.DepthMode.disabled:y.depthModeForSublayer(Ue.overscaledZ-$e,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,W.LESS),Ke=Ue.toUnwrapped(),Ye=d.getTile(Ue);if(ve&&(!Ye||!Ye.hasData()))continue;const Je=ve?Ue.projMatrix:y.transform.calculateProjMatrix(Ke,Ne),mt=y.terrain&&ve?y.terrain.stencilModeForRTTOverlap(Ue):Ae[Ue.overscaledZ],ut=M?0:m.paint.get("raster-fade-duration");Ye.registerFadeDuration(ut);const xt=d.findLoadedParent(Ue,0),It=Lo(Ye,xt,d,y.transform,ut);let Dt,Nt;y.terrain&&y.terrain.prepareDrawTile();const Ti=m.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;j.activeTexture.set(W.TEXTURE0),Ye.texture.bind(Ti,W.CLAMP_TO_EDGE),j.activeTexture.set(W.TEXTURE1),xt?(xt.texture.bind(Ti,W.CLAMP_TO_EDGE),Dt=Math.pow(2,xt.tileID.overscaledZ-Ye.tileID.overscaledZ),Nt=[Ye.tileID.canonical.x*Dt%1,Ye.tileID.canonical.y*Dt%1]):Ye.texture.bind(Ti,W.CLAMP_TO_EDGE),Ye.texture.useMipmap&&j.extTextureFilterAnisotropic&&y.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax);const Ot=ih(Je,Nt||[0,0],Dt||1,It,m,Q instanceof _t?Q.perspectiveTransform:[0,0]);if(y.prepareDrawProgram(j,le,Ke),Q instanceof _t)Q.boundsBuffer&&Q.boundsSegments&&le.draw(j,W.TRIANGLES,Ce,s.StencilMode.disabled,ae,s.CullFaceMode.disabled,Ot,m.id,Q.boundsBuffer,y.quadTriangleIndexBuffer,Q.boundsSegments);else{const{tileBoundsBuffer:ni,tileBoundsIndexBuffer:qt,tileBoundsSegments:ui}=y.getTileBoundsBuffers(Ye);le.draw(j,W.TRIANGLES,Ce,mt,ae,s.CullFaceMode.disabled,Ot,m.id,ni,qt,ui)}}y.resetStencilClippingMasks()},background:function(y,d,m,T){const k=m.paint.get("background-color"),M=m.paint.get("background-opacity");if(M===0)return;const j=y.context,W=j.gl,Q=y.transform,le=Q.tileSize,ae=m.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const ve=!ae&&k.a===1&&M===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ve)return;const Ae=s.StencilMode.disabled,Be=y.depthModeForSublayer(0,ve==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),$e=y.colorModeForRenderPass(),Ne=y.useProgram(ae?"backgroundPattern":"background");let Ue,Ce=T;Ce||(Ue=y.getBackgroundTiles(),Ce=Object.values(Ue).map(Ke=>Ke.tileID)),ae&&(j.activeTexture.set(W.TEXTURE0),y.imageManager.bind(y.context));for(const Ke of Ce){const Ye=Ke.toUnwrapped(),Je=T?Ke.projMatrix:y.transform.calculateProjMatrix(Ye);y.prepareDrawTile();const mt=d?d.getTile(Ke):Ue?Ue[Ke.key]:new s.Tile(Ke,le,Q.zoom,y),ut=ae?Sl(Je,M,y,ae,{tileID:Ke,tileSize:le}):hc(Je,M,k);y.prepareDrawProgram(j,Ne,Ye);const{tileBoundsBuffer:xt,tileBoundsIndexBuffer:It,tileBoundsSegments:Dt}=y.getTileBoundsBuffers(mt);Ne.draw(j,W.TRIANGLES,Be,Ae,$e,s.CullFaceMode.disabled,ut,m.id,xt,It,Dt)}},sky:function(y,d,m){const T=y.transform,k=T.projection.name==="mercator"||T.projection.name==="globe"?1:s.smoothstep(7,8,T.zoom),M=m.paint.get("sky-opacity")*k;if(M===0)return;const j=y.context,W=m.paint.get("sky-type"),Q=new s.DepthMode(j.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),le=y.frameCounter/1e3%1;W==="atmosphere"?y.renderPass==="offscreen"?m.needsSkyboxCapture(y)&&(function(ae,ve,Ae,Be){const $e=ae.context,Ne=$e.gl;let Ue=ve.skyboxFbo;if(!Ue){Ue=ve.skyboxFbo=$e.createFramebuffer(32,32,!1),ve.skyboxGeometry=new To($e),ve.skyboxTexture=$e.gl.createTexture(),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,ve.skyboxTexture),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MIN_FILTER,Ne.LINEAR),Ne.texParameteri(Ne.TEXTURE_CUBE_MAP,Ne.TEXTURE_MAG_FILTER,Ne.LINEAR);for(let Je=0;Je<6;++Je)Ne.texImage2D(Ne.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0,Ne.RGBA,32,32,0,Ne.RGBA,Ne.UNSIGNED_BYTE,null)}$e.bindFramebuffer.set(Ue.framebuffer),$e.viewport.set([0,0,32,32]);const Ce=ve.getCenter(ae,!0),Ke=ae.useProgram("skyboxCapture"),Ye=new Float64Array(16);s.identity(Ye),s.rotateY(Ye,Ye,.5*-Math.PI),Dn($e,ve,Ke,Ye,Ce,0),s.identity(Ye),s.rotateY(Ye,Ye,.5*Math.PI),Dn($e,ve,Ke,Ye,Ce,1),s.identity(Ye),s.rotateX(Ye,Ye,.5*-Math.PI),Dn($e,ve,Ke,Ye,Ce,2),s.identity(Ye),s.rotateX(Ye,Ye,.5*Math.PI),Dn($e,ve,Ke,Ye,Ce,3),s.identity(Ye),Dn($e,ve,Ke,Ye,Ce,4),s.identity(Ye),s.rotateY(Ye,Ye,Math.PI),Dn($e,ve,Ke,Ye,Ce,5),$e.viewport.set([0,0,ae.width,ae.height])}(y,m),m.markSkyboxValid(y)):y.renderPass==="sky"&&function(ae,ve,Ae,Be,$e){const Ne=ae.context,Ue=Ne.gl,Ce=ae.transform,Ke=ae.useProgram("skybox");Ne.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_CUBE_MAP,ve.skyboxTexture);const Ye=((Je,mt,ut,xt,It)=>({u_matrix:Je,u_sun_direction:mt,u_cubemap:0,u_opacity:xt,u_temporal_offset:It}))(Ce.skyboxMatrix,ve.getCenter(ae,!1),0,Be,$e);ae.prepareDrawProgram(Ne,Ke),Ke.draw(Ne,Ue.TRIANGLES,Ae,s.StencilMode.disabled,ae.colorModeForRenderPass(),s.CullFaceMode.backCW,Ye,"skybox",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(y,m,Q,M,le):W==="gradient"&&y.renderPass==="sky"&&function(ae,ve,Ae,Be,$e){const Ne=ae.context,Ue=Ne.gl,Ce=ae.transform,Ke=ae.useProgram("skyboxGradient");ve.skyboxGeometry||(ve.skyboxGeometry=new To(Ne)),Ne.activeTexture.set(Ue.TEXTURE0);let Ye=ve.colorRampTexture;Ye||(Ye=ve.colorRampTexture=new s.Texture(Ne,ve.colorRamp,Ue.RGBA)),Ye.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE);const Je=((mt,ut,xt,It,Dt)=>({u_matrix:mt,u_color_ramp:0,u_center_direction:ut,u_radius:s.degToRad(xt),u_opacity:It,u_temporal_offset:Dt}))(Ce.skyboxMatrix,ve.getCenter(ae,!1),ve.paint.get("sky-gradient-radius"),Be,$e);ae.prepareDrawProgram(Ne,Ke),Ke.draw(Ne,Ue.TRIANGLES,Ae,s.StencilMode.disabled,ae.colorModeForRenderPass(),s.CullFaceMode.backCW,Je,"skyboxGradient",ve.skyboxGeometry.vertexBuffer,ve.skyboxGeometry.indexBuffer,ve.skyboxGeometry.segment)}(y,m,Q,M,le)},debug:function(y,d,m){for(let T=0;T<m.length;T++)tu(y,d,m[T])},custom:function(y,d,m,T){const k=y.context,M=m.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&m.isLayerDraped()){if(y.renderPass==="offscreen"){const j=M.prerender;if(j){if(y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const W=y.transform.pointMerc;j.call(M,k.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(y.transform.zoom),[W.x,W.y],y.transform.pixelsPerMeterRatio)}else j.call(M,k.gl,y.transform.customLayerMatrix());k.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const W=M.renderToTile;if(W){const Q=T[0].canonical,le=new s.MercatorCoordinate(Q.x+T[0].wrap*(1<<Q.z),Q.y,Q.z);k.setDepthMode(s.DepthMode.disabled),k.setStencilMode(s.StencilMode.disabled),k.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),W.call(M,k.gl,le),k.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),k.setStencilMode(s.StencilMode.disabled);const j=M.renderingMode==="3d"?new s.DepthMode(y.context.gl.LEQUAL,s.DepthMode.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(k.setDepthMode(j),y.transform.projection.name==="globe"){const W=y.transform.pointMerc;M.render(k.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(y.transform.zoom),[W.x,W.y],y.transform.pixelsPerMeterRatio)}else M.render(k.gl,y.transform.customLayerMatrix());k.setDirty(),y.setBaseState(),k.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Qn{constructor(d,m,T=!1){this.context=new Ge(d,T),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zl,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,m){const T=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new uc(this,d));const k=this._terrain;this.transform.elevation=T?k:null,k.update(d,this.transform,m)}_updateFog(d){const m=d.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,k]=m.getFovAdjustedRange(this.transform._fov);if(T>k)return void(this.transform.fogCullDistSq=null);const M=T+.78*(k-T);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,m){if(this.width=d*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const d=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(s.EXTENT,0),T.emplaceBack(0,s.EXTENT),T.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=d.createVertexBuffer(T,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const k=new s.StructArrayLayout2i4;k.emplaceBack(-1,-1),k.emplaceBack(1,-1),k.emplaceBack(-1,1),k.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(k,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const M=new s.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(s.EXTENT,0,s.EXTENT,0),M.emplaceBack(0,s.EXTENT,0,s.EXTENT),M.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(M,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const j=new s.StructArrayLayout3ui6;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(j);const W=new s.StructArrayLayout1ui2;for(const le of[0,1,3,2,0])W.emplaceBack(le);this.debugIndexBuffer=d.createIndexBuffer(W),this.emptyTexture=new s.Texture(d,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=s.create();const Q=this.context.gl;this.stencilClearMode=new s.StencilMode({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new _d(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,m=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,kn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,m,T){if(!m||this.currentStencilSource===m.id||!d.isTileClipped()||!T||T.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let W=!1;for(const Q of T)if(this._tileClippingMaskIDs[Q.key]===void 0){W=!0;break}if(!W)return}this.currentStencilSource=m.id;const k=this.context,M=k.gl;this.nextStencilID+T.length>256&&this.clearStencil(),k.setColorMode(s.ColorMode.disabled),k.setDepthMode(s.DepthMode.disabled);const j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const W of T){const Q=m.getTile(W),le=this._tileClippingMaskIDs[W.key]=this.nextStencilID++,{tileBoundsBuffer:ae,tileBoundsIndexBuffer:ve,tileBoundsSegments:Ae}=this.getTileBoundsBuffers(Q);j.draw(k,M.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:M.ALWAYS,mask:0},le,255,M.KEEP,M.KEEP,M.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,kn(W.projMatrix),"$clipping",ae,ve,Ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},d,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(d){const m=this.context.gl,T=d.sort((j,W)=>W.overscaledZ-j.overscaledZ),k=T[T.length-1].overscaledZ,M=T[0].overscaledZ-k+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const j={};for(let W=0;W<M;W++)j[W+k]=new s.StencilMode({func:m.GEQUAL,mask:255},W+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=M,[j,T]}return[{[k]:s.StencilMode.disabled},T]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([d.CONSTANT_COLOR,d.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(d,m,T){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new s.DepthMode(T||this.context.gl.LEQUAL,m,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,m){this.style=d,this.options=m,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const T=this.style.order,k=this.style._sourceCaches;for(const le in k){const ae=k[le];ae.used&&ae.prepare(this.context)}const M={},j={},W={};for(const le in k){const ae=k[le];M[le]=ae.getVisibleCoordinates(),j[le]=M[le].slice().reverse(),W[le]=ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let le=0;le<T.length;le++)if(this.style._layers[T[le]].is3D()){this.opaquePassCutoff=le;break}if(this.terrain&&(this.terrain.updateTileBinding(W),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const le of T){const ae=this.style._layers[le],ve=d._getLayerSourceCache(ae);if(!ae.hasOffscreenPass()||ae.isHidden(this.transform.zoom))continue;const Ae=ve?j[ve.id]:void 0;(ae.type==="custom"||ae.isSky()||Ae&&Ae.length)&&this.renderLayer(this,ve,ae,Ae)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const Q=this.terrain;if(Q&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&Q.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const le=this.style._layers[T[this.currentLayer]],ae=d._getLayerSourceCache(le);if(le.isSky())continue;const ve=ae?j[ae.id]:void 0;this._renderTileClippingMasks(le,ae,ve),this.renderLayer(this,ae,le,ve)}if(this.style.fog&&this.transform.projection.supportsFog&&function(le,ae){const ve=le.context,Ae=ve.gl,Be=le.transform,$e=new s.DepthMode(Ae.LEQUAL,s.DepthMode.ReadOnly,[0,1]),Ne=le.useProgram("globeAtmosphere",null,Be.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ue=s.globeToMercatorTransition(Be.zoom),Ce=ae.properties.get("color").toArray01(),Ke=ae.properties.get("high-color").toArray01(),Ye=ae.properties.get("space-color").toArray01PremultipliedAlpha(),Je=s.identity$1([]);s.rotateY$1(Je,Je,-s.degToRad(Be._center.lng)),s.rotateX$1(Je,Je,s.degToRad(Be._center.lat)),s.rotateZ$1(Je,Je,Be.angle),s.rotateX$1(Je,Je,-Be._pitch);const mt=s.fromQuat(new Float32Array(16),Je),ut=s.mapValue(ae.properties.get("star-intensity"),0,1,0,.25),xt=5e-4,It=s.mapValue(ae.properties.get("horizon-blend"),0,1,xt,.25),Dt=s.globeUseCustomAntiAliasing(le,ve,Be)&&It===xt?Be.worldSize/(2*Math.PI*1.025)-1:Be.globeRadius,Nt=le.frameCounter/1e3%1,Ti=s.length(Be.globeCenterInViewSpace),Ot=Math.sqrt(Math.pow(Ti,2)-Math.pow(Dt,2)),ni=Math.acos(Ot/Ti),qt=((Ft,Et,zt,oi,hi,en,Rn,Yi,Ui,tn,jn,an,hr,mr)=>({u_frustum_tl:Ft,u_frustum_tr:Et,u_frustum_br:zt,u_frustum_bl:oi,u_horizon:hi,u_transition:en,u_fadeout_range:Rn,u_color:Yi,u_high_color:Ui,u_space_color:tn,u_star_intensity:jn,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:an,u_horizon_angle:hr,u_rotation_matrix:mr}))(Be.frustumCorners.TL,Be.frustumCorners.TR,Be.frustumCorners.BR,Be.frustumCorners.BL,Be.frustumCorners.horizon,Ue,It,Ce,Ke,Ye,ut,Nt,ni,mt);le.prepareDrawProgram(ve,Ne);const ui=le.atmosphereBuffer;ui&&Ne.draw(ve,Ae.TRIANGLES,$e,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,qt,"skybox",ui.vertexBuffer,ui.indexBuffer,ui.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const le=this.style._layers[T[this.currentLayer]],ae=d._getLayerSourceCache(le);le.isSky()&&this.renderLayer(this,ae,le,ae?j[ae.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const le=this.style._layers[T[this.currentLayer]],ae=d._getLayerSourceCache(le);if(le.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(le)){if(le.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ve=ae?(le.type==="symbol"?W:j)[ae.id]:void 0;this._renderTileClippingMasks(le,ae,ae?M[ae.id]:void 0),this.renderLayer(this,ae,le,ve),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let le=null;s.values(this.style._layers).forEach(ae=>{const ve=d._getLayerSourceCache(ae);ve&&!ae.isHidden(this.transform.zoom)&&(!le||le.getSource().maxzoom<ve.getSource().maxzoom)&&(le=ve)}),le&&this.options.showTileBoundaries&&Ts.debug(this,le,le.getVisibleCoordinates())}this.options.showPadding&&function(le){const ae=le.transform.padding;io(le,le.transform.height-(ae.top||0),3,Du),io(le,ae.bottom||0,3,El),iu(le,ae.left||0,3,$c),iu(le,le.transform.width-(ae.right||0),3,wo);const ve=le.transform.centerPoint;(function(Ae,Be,$e,Ne){nu(Ae,Be-1,$e-10,2,20,Ne),nu(Ae,Be-10,$e-1,20,2,Ne)})(le,ve.x,le.transform.height-ve.y,eu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,m,T,k){T.isHidden(this.transform.zoom)||(T.type==="background"||T.type==="sky"||T.type==="custom"||k&&k.length)&&(this.id=T.id,this.gpuTimingStart(T),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(T.type)||d.terrain&&T.type==="custom")&&Ts[T.type](d,m,T,k,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let T=this.gpuTimers[d.id];T||(T=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),T.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,m=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),d.beginQueryEXT(d.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const m={};for(const T in d){const k=d[T],M=this.context.extTimerQuery,j=M.getQueryObjectEXT(k.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(k.query),m[T]=j}return m}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let T=0;for(const k of d)T+=m.getQueryObjectEXT(k,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(k);return T}translatePosMatrix(d,m,T,k,M){if(!T[0]&&!T[1])return d;const j=M?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(j){const le=Math.sin(j),ae=Math.cos(j);T=[T[0]*ae-T[1]*le,T[0]*le+T[1]*ae]}const W=[M?T[0]:Qt(m,T[0],this.transform.zoom),M?T[1]:Qt(m,T[1],this.transform.zoom),0],Q=new Float32Array(16);return s.translate(Q,d,W),Q}saveTileTexture(d){const m=this._tileTextures[d.size[0]];m?m.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const m=this._tileTextures[d];return m&&m.length>0?m.pop():null}isPatternMissing(d){return d===null||d!==void 0&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,T=this.style&&this.style.fog,k=[];return this.terrainRenderModeElevated()&&k.push("TERRAIN"),this.transform.projection.name==="globe"&&k.push("GLOBE"),m&&k.push("ZERO_EXAGGERATION"),T&&!d&&T.getOpacity(this.transform.pitch)!==0&&k.push("FOG"),d&&k.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&k.push("OVERDRAW_INSPECTOR"),k}useProgram(d,m,T){this.cache=this.cache||{};const k=T||[],M=this.currentGlobalDefines().concat(k),j=Ql.cacheKey(sc[d],d,M,m);return this.cache[j]||(this.cache[j]=new Ql(this.context,d,sc[d],m,Cl[d],M)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,m,T){if(this.terrain&&this.terrain.renderingToTexture)return;const k=this.style.fog;if(k){const M=k.getOpacity(this.transform.pitch),j=((W,Q,le,ae,ve,Ae,Be,$e,Ne,Ue,Ce)=>{const Ke=W.transform,Ye=Q.properties.get("color").toArray01();Ye[3]=ae;const Je=W.frameCounter/1e3%1;return{u_fog_matrix:le?Ke.calculateFogTileMatrix(le):W.identityMat,u_fog_range:Q.getFovAdjustedRange(Ke._fov),u_fog_color:Ye,u_fog_horizon_blend:Q.properties.get("horizon-blend"),u_fog_temporal_offset:Je,u_frustum_tl:ve,u_frustum_tr:Ae,u_frustum_br:Be,u_frustum_bl:$e,u_globe_pos:Ne,u_globe_radius:Ue,u_viewport:Ce,u_globe_transition:s.globeToMercatorTransition(Ke.zoom),u_is_globe:+(Ke.projection.name==="globe")}})(this,k,T,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(d,j)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,m=d.createTexture();return d.bindTexture(d.TEXTURE_2D,m),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&d.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const d=this._backgroundTiles,m=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const k of T)m[k.key]=d[k.key]||new s.Tile(k,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class ra{constructor(d=0,m=0,T=0,k=0){if(isNaN(d)||d<0||isNaN(m)||m<0||isNaN(T)||T<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=m,this.left=T,this.right=k}interpolate(d,m,T){return m.top!=null&&d.top!=null&&(this.top=s.number(d.top,m.top,T)),m.bottom!=null&&d.bottom!=null&&(this.bottom=s.number(d.bottom,m.bottom,T)),m.left!=null&&d.left!=null&&(this.left=s.number(d.left,m.left,T)),m.right!=null&&d.right!=null&&(this.right=s.number(d.right,m.right,T)),this}getCenter(d,m){const T=s.clamp((this.left+d-this.right)/2,0,d),k=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.pointGeometry(T,k)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new ra(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function rs(y,d){const m=s.getColumn(y,3);s.fromQuat(y,d),s.setColumn(y,3,m)}function no(y,d){const m=s.identity$1([]);return s.rotateZ$1(m,m,-d),s.rotateX$1(m,m,-y),m}function Bu(y,d){const m=[y[0],y[1],0],T=[d[0],d[1],0];if(s.length(m)>=1e-15){const j=s.normalize([],m);s.scale$2(T,j,s.dot(T,j)),d[0]=T[0],d[1]=T[1]}const k=s.cross([],d,y);if(s.len(k)<1e-15)return null;const M=Math.atan2(-k[1],k[0]);return no(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),M)}class sa{constructor(d,m){this.position=d,this.orientation=m}get position(){return this._position}set position(d){if(d){const m=d instanceof s.MercatorCoordinate?d:new s.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(d,m){if(this.orientation=null,!this.position)return;const T=this.position,k=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(d)):0,M=s.MercatorCoordinate.fromLngLat(d,k),j=[M.x-T.x,M.y-T.y,M.z-T.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Bu(j,m)}setPitchBearing(d,m){this.orientation=no(s.degToRad(d),s.degToRad(-m))}}class oa{constructor(d,m){this._transform=s.identity([]),this.orientation=m,this.position=d}get mercatorPosition(){const d=this.position;return new s.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=s.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var m;d&&s.setColumn(this._transform,3,[(m=d)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||s.identity$1([]),d&&rs(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,m){this._orientation=no(d,m),rs(this._transform,this._orientation)}forward(){const d=s.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=s.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=s.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,m){const T=new Float64Array(16);return s.invert(T,this.getWorldToCamera(d,m)),T}getWorldToCameraPosition(d,m,T){const k=this.position;s.scale$2(k,k,-d);const M=new Float64Array(16);return s.fromScaling(M,[T,T,T]),s.translate(M,M,k),M[10]*=m,M}getWorldToCamera(d,m){const T=new Float64Array(16),k=new Float64Array(4),M=this.position;return s.conjugate(k,this._orientation),s.scale$2(M,M,-d),s.fromQuat(T,k),s.translate(T,T,M),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=m,T[9]*=m,T[10]*=m,T[11]*=m,T}getCameraToClipPerspective(d,m,T,k){const M=new Float64Array(16);return s.perspective(M,d,m,T,k),M}getDistanceToElevation(d,m=!1){const T=d===0?0:s.mercatorZfromAltitude(d,m?s.latFromMercatorY(this.position[1]):this.position[1]),k=this.forward();return(T-this.position[2])/k[2]}clone(){return new oa([...this.position],[...this.orientation])}}function Il(y,d){const m=Pa(y.projection,y.zoom,y.width,y.height),T=function(M,j,W,Q,le){const ae=new s.LngLat(W.lng-180*Ka,W.lat),ve=new s.LngLat(W.lng+180*Ka,W.lat),Ae=M.project(ae.lng,ae.lat),Be=M.project(ve.lng,ve.lat),$e=-Math.atan2(Be.y-Ae.y,Be.x-Ae.x),Ne=s.MercatorCoordinate.fromLngLat(W);Ne.y=s.clamp(Ne.y,-.999975,.999975);const Ue=Ne.toLngLat(),Ce=M.project(Ue.lng,Ue.lat),Ke=s.MercatorCoordinate.fromLngLat(Ue);Ke.x+=Ka;const Ye=Ke.toLngLat(),Je=M.project(Ye.lng,Ye.lat),mt=Qa(Je.x-Ce.x,Je.y-Ce.y,$e),ut=s.MercatorCoordinate.fromLngLat(Ue);ut.y+=Ka;const xt=ut.toLngLat(),It=M.project(xt.lng,xt.lat),Dt=Qa(It.x-Ce.x,It.y-Ce.y,$e),Nt=Math.abs(mt.x)/Math.abs(Dt.y),Ti=s.identity([]);s.rotateZ(Ti,Ti,-$e*(1-(le?0:Q)));const Ot=s.identity([]);return s.scale(Ot,Ot,[1,1-(1-Nt)*Q,1]),Ot[4]=-Dt.x/Dt.y*Q,s.rotateZ(Ot,Ot,$e),s.multiply(Ot,Ti,Ot),Ot}(y.projection,0,y.center,m,d),k=gc(y);return s.scale(T,T,[k,k,1]),T}function gc(y){const d=y.projection,m=Pa(y.projection,y.zoom,y.width,y.height),T=su(d,y.center),k=su(d,s.LngLat.convert(d.center));return Math.pow(2,T*m+(1-m)*k)}function Pa(y,d,m,T,k=1/0){const M=y.range;if(!M)return 0;const j=Math.min(k,Math.max(m,T)),W=Math.log(j/1024)/Math.LN2;return s.smoothstep(M[0]+W,M[1]+W,d)}const Ka=1/4e4;function su(y,d){const m=s.clamp(d.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),T=new s.LngLat(d.lng-180*Ka,m),k=new s.LngLat(d.lng+180*Ka,m),M=y.project(T.lng,m),j=y.project(k.lng,m),W=s.MercatorCoordinate.fromLngLat(T),Q=s.MercatorCoordinate.fromLngLat(k),le=j.x-M.x,ae=j.y-M.y,ve=Q.x-W.x,Ae=Q.y-W.y,Be=Math.sqrt((ve*ve+Ae*Ae)/(le*le+ae*ae));return Math.log(Be)/Math.LN2}function Qa(y,d,m){const T=Math.cos(m),k=Math.sin(m);return{x:y*T-d*k,y:y*k+d*T}}class Li{constructor(d,m,T,k,M,j,W){this.tileSize=512,this._renderWorldCopies=M===void 0||M,this._minZoom=d||0,this._maxZoom=m||22,this._minPitch=T??0,this._maxPitch=k??60,this.setProjection(j),this.setMaxBounds(W),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ra,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new oa,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new Li(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,m=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||T)&&this._updateCameraOnTerrain(),(d||T)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const T=!p(m,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=d!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const m=-d*Math.PI/180;var T;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(T=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),function(k,M,j){var W=M[0],Q=M[1],le=M[2],ae=M[3],ve=Math.sin(j),Ae=Math.cos(j);k[0]=W*Ae+le*ve,k[1]=Q*Ae+ae*ve,k[2]=W*-ve+le*Ae,k[3]=Q*-ve+ae*Ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const m=s.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=s.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const m=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let k=0,M=0;for(let j=0;j<m.length;j++){const W=new s.pointGeometry(m[j][0]*this.width,T+m[j][1]*(this.height-T)),Q=d.pointCoordinate(W);if(!Q)continue;const le=1/Math.hypot(Q[0]-this._camera.position[0],Q[1]-this._camera.position[1]);k+=Q[3]*le,M+=le}return M===0?NaN:k/M}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const d=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*m,k=this._mercatorZfromZoom(d),M=this._mercatorZfromZoom(this._maxZoom),j=Math.max(k-T,M);this._setZoom(this._zoomFromMercatorZ(j))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let T;T=d.z<this._camera.position[2]?[m.x,m.y,m.z]:[d.x,d.y,d.z];const k=s.length(s.sub([],this._camera.position,T));return s.clamp(this._zoomFromMercatorZ(k),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let m=!1;if(d.orientation&&!s.exactEquals(d.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(d.orientation)),d.position){const T=[d.position.x,d.position.y,d.position.z];s.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,m=new sa;return m.position=new s.MercatorCoordinate(d[0],d[1],d[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(d){if(!s.length$1(d))return!1;s.normalize$1(d,d);const m=s.transformQuat([],[0,0,-1],d),T=s.transformQuat([],[0,-1,0],d);if(T[2]<0)return!1;const k=Bu(m,T);return!!k&&(this._camera.orientation=k,!0)}_setCameraPosition(d){const m=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,k=this.cameraToCenterDistance;d[2]=s.clamp(d[2],k/T,k/m),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,m,T){this._unmodified=!1,this._edgeInsets.interpolate(d,m,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const m=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(d){const m=[new s.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const T=this.pointCoordinate(new s.pointGeometry(0,0)),k=this.pointCoordinate(new s.pointGeometry(this.width,0)),M=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),j=this.pointCoordinate(new s.pointGeometry(0,this.height)),W=Math.floor(Math.min(T.x,k.x,M.x,j.x)),Q=Math.floor(Math.max(T.x,k.x,M.x,j.x)),le=1;for(let ae=W-le;ae<=Q+le;ae++)ae!==0&&m.push(new s.UnwrappedTileID(ae,d))}return m}coveringTiles(d){let m=this.coveringZoomLevel(d);const T=m,k=this.elevation&&!d.isTerrainDEM,M=this.projection.name==="mercator";if(d.minzoom!==void 0&&m<d.minzoom)return[];d.maxzoom!==void 0&&m>d.maxzoom&&(m=d.maxzoom);const j=this.locationCoordinate(this.center),W=this.center.lat,Q=1<<m,le=[Q*j.x,Q*j.y,0],ae=this.projection.name==="globe",ve=!ae,Ae=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ve),Be=ae?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),$e=Q*s.mercatorZfromAltitude(1,this.center.lat),Ne=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Ue=[Q*Be.x,Q*Be.y,Ne*(ve?1:$e)],Ce=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),Ke=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Ye=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Je=d.isTerrainDEM?-Ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,mt=this.projection.isReprojectedInTileSpace?gc(this):1,ut=Ft=>{const zt=new s.MercatorCoordinate(Ft.x+25e-6,Ft.y,Ft.z),oi=new s.MercatorCoordinate(Ft.x,Ft.y+25e-6,Ft.z),hi=Ft.toLngLat(),en=zt.toLngLat(),Rn=oi.toLngLat(),Yi=this.locationCoordinate(hi),Ui=this.locationCoordinate(en),tn=this.locationCoordinate(Rn),jn=Math.hypot(Ui.x-Yi.x,Ui.y-Yi.y),an=Math.hypot(tn.x-Yi.x,tn.y-Yi.y);return Math.sqrt(jn*an)*mt/25e-6},xt=Ft=>{const Et=Ye,zt=Je;return{aabb:s.tileAABB(this,Q,0,0,0,Ft,zt,Et,this.projection),zoom:0,x:0,y:0,minZ:zt,maxZ:Et,wrap:Ft,fullyVisible:!1}},It=[];let Dt=[];const Nt=m,Ti=d.reparseOverscaled?T:m,Ot=Ft=>Ft*Ft,ni=Ot((Ne-this._centerAltitude)*$e),qt=Ft=>{if(!this._elevation||!Ft.tileID||!M)return;const Et=this._elevation.getMinMaxForTile(Ft.tileID),zt=Ft.aabb;Et?(zt.min[2]=Et.min,zt.max[2]=Et.max,zt.center[2]=(zt.min[2]+zt.max[2])/2):(Ft.shouldSplit=ui(Ft),Ft.shouldSplit||(zt.min[2]=zt.max[2]=zt.center[2]=this._centerAltitude))},ui=Ft=>{if(Ft.zoom<Ke)return!0;if(Ft.zoom===Nt)return!1;if(Ft.shouldSplit!=null)return Ft.shouldSplit;const Et=Ft.aabb.distanceX(Ue),zt=Ft.aabb.distanceY(Ue);let oi=ni,hi=1;if(ae){oi=Ot(Ft.aabb.distanceZ(Ue));const Yi=Math.pow(2,Ft.zoom),Ui=s.latFromMercatorY((Ft.y+1)/Yi),tn=s.latFromMercatorY(Ft.y/Yi),jn=Math.min(Math.max(W,Ui),tn),an=s.circumferenceAtLatitude(jn)/s.circumferenceAtLatitude(W);if(hi=jn===W?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,an/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&Ft.zoom===Nt-1&&an>=.9)return!0}else if(k&&(oi=Ot(Ft.aabb.distanceZ(Ue)*$e)),this.projection.isReprojectedInTileSpace&&T<=5){const Yi=Math.pow(2,Ft.zoom),Ui=ut(new s.MercatorCoordinate((Ft.x+.5)/Yi,(Ft.y+.5)/Yi));hi=Ui>.85?1:Ui}const en=Et*Et+zt*zt+oi,Rn=Ot((1<<Nt-Ft.zoom)*Ce*hi*((Yi,Ui)=>{if(Ui*Ot(.707)<Yi)return 1;const tn=Math.sqrt(Ui/Yi);return tn/(1.4144271570014144+(Math.pow(1.1,tn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(oi,ni),en));return en<Rn};if(this.renderWorldCopies)for(let Ft=1;Ft<=3;Ft++)It.push(xt(-Ft)),It.push(xt(Ft));for(It.push(xt(0));It.length>0;){const Ft=It.pop(),Et=Ft.x,zt=Ft.y;let oi=Ft.fullyVisible;if(!oi){const hi=Ft.aabb.intersects(Ae);if(hi===0)continue;oi=hi===2}if(Ft.zoom!==Nt&&ui(Ft))for(let hi=0;hi<4;hi++){const en=(Et<<1)+hi%2,Rn=(zt<<1)+(hi>>1),Yi={aabb:M?Ft.aabb.quadrant(hi):s.tileAABB(this,Q,Ft.zoom+1,en,Rn,Ft.wrap,Ft.minZ,Ft.maxZ,this.projection),zoom:Ft.zoom+1,x:en,y:Rn,wrap:Ft.wrap,fullyVisible:oi,tileID:void 0,shouldSplit:void 0,minZ:Ft.minZ,maxZ:Ft.maxZ};k&&!ae&&(Yi.tileID=new s.OverscaledTileID(Ft.zoom+1===Nt?Ti:Ft.zoom+1,Ft.wrap,Ft.zoom+1,en,Rn),qt(Yi)),It.push(Yi)}else{const hi=Ft.zoom===Nt?Ti:Ft.zoom;if(d.minzoom&&d.minzoom>hi)continue;const en=le[0]-(.5+Et+(Ft.wrap<<Ft.zoom))*(1<<m-Ft.zoom),Rn=le[1]-.5-zt,Yi=Ft.tileID?Ft.tileID:new s.OverscaledTileID(hi,Ft.wrap,Ft.zoom,Et,zt);Dt.push({tileID:Yi,distanceSq:en*en+Rn*Rn})}}if(this.fogCullDistSq){const Ft=this.fogCullDistSq,Et=this.horizonLineFromTop();Dt=Dt.filter(zt=>{const oi=[0,0,0,1],hi=[s.EXTENT,s.EXTENT,0,1],en=this.calculateFogTileMatrix(zt.tileID.toUnwrapped());s.transformMat4$1(oi,oi,en),s.transformMat4$1(hi,hi,en);const Rn=s.getAABBPointSquareDist(oi,hi);if(Rn===0)return!0;let Yi=!1;const Ui=this._elevation;if(Ui&&Rn>Ft&&Et!==0){const tn=this.calculateProjMatrix(zt.tileID.toUnwrapped());let jn;d.isTerrainDEM||(jn=Ui.getMinMaxForTile(zt.tileID)),jn||(jn={min:Je,max:Ye});const an=s.furthestTileCorner(this.rotation),hr=[an[0]*s.EXTENT,an[1]*s.EXTENT,jn.max];s.transformMat4(hr,hr,tn),Yi=(1-hr[1])*this.height*.5<Et}return Rn<Ft||Yi})}return Dt.sort((Ft,Et)=>Ft.distanceSq-Et.distanceSq).map(Ft=>Ft.tileID)}resize(d,m){this.width=d,this.height=m,this.pixelsToGLUnits=[2/d,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const m=s.clamp(d.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),T=this.projection.project(d.lng,m);return new s.pointGeometry(T.x*this.worldSize,T.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,m){let T,k;const M=this.centerPoint;if(this.projection.name==="globe"){const W=this.worldSize;T=(m.x-M.x)/W,k=(m.y-M.y)/W}else{const W=this.pointCoordinate(m),Q=this.pointCoordinate(M);T=W.x-Q.x,k=W.y-Q.y}const j=this.locationCoordinate(d);this.setLocation(new s.MercatorCoordinate(j.x-T,j.y-k))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,m){const T=m?s.mercatorZfromAltitude(m,d.lat):void 0,k=this.projection.project(d.lng,d.lat);return new s.MercatorCoordinate(k.x,k.y,T)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,m){const T=m??this._centerAltitude,k=[d.x,d.y,0,1],M=[d.x,d.y,1,1];s.transformMat4$1(k,k,this.pixelMatrixInverse),s.transformMat4$1(M,M,this.pixelMatrixInverse);const j=M[3];s.scale$1(k,k,1/k[3]),s.scale$1(M,M,1/j);const W=k[2],Q=M[2];return{p0:k,p1:M,t:W===Q?0:(T-W)/(Q-W)}}screenPointToMercatorRay(d){const m=[d.x,d.y,0,1],T=[d.x,d.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(T,T,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(T,T,1/T[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,T[2]=s.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(T,T,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],T,m)))}rayIntersectionCoordinate(d){const{p0:m,p1:T,t:k}=d,M=s.mercatorZfromAltitude(m[2],this._center.lat),j=s.mercatorZfromAltitude(T[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],T[0],k)/this.worldSize,s.number(m[1],T[1],k)/this.worldSize,s.number(M,j,k))}pointCoordinate(d,m=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,m)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let m=this.projection.pointCoordinate3D(this,d.x,d.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let T=0,k=this.horizonLineFromTop();if(d.y>k)return this.pointCoordinate(d);const M=.02*k,j=d.clone();for(let W=0;W<10&&k-T>M;W++){j.y=s.number(T,k,.66);const Q=this.projection.pointCoordinate3D(this,j.x,j.y);Q?(k=j.y,m=Q):T=j.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}_coordinatePoint(d,m){const T=m&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,k=[d.x*this.worldSize,d.y*this.worldSize,T+d.toAltitude(),1];return s.transformMat4$1(k,k,this.pixelMatrix),k[3]>0?new s.pointGeometry(k[0]/k[3],k[1]/k[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:m}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,M=this.pointLocation3D(new s.pointGeometry(m,d)),j=this.pointLocation3D(new s.pointGeometry(k,d)),W=this.pointLocation3D(new s.pointGeometry(k,T)),Q=this.pointLocation3D(new s.pointGeometry(m,T));let le=Math.min(M.lng,j.lng,W.lng,Q.lng),ae=Math.max(M.lng,j.lng,W.lng,Q.lng),ve=Math.min(M.lat,j.lat,W.lat,Q.lat),Ae=Math.max(M.lat,j.lat,W.lat,Q.lat);const Be=Math.pow(2,-this.zoom)/16*270,$e=this.projection.name==="globe"?1:4,Ne=(Ue,Ce,Ke,Ye,Je)=>{const mt=(Ue+Ke)/2,ut=(Ce+Ye)/2,xt=new s.pointGeometry(mt,ut),{lng:It,lat:Dt}=this.pointLocation3D(xt),Nt=Math.max(0,le-It,ve-Dt,It-ae,Dt-Ae);le=Math.min(le,It),ae=Math.max(ae,It),ve=Math.min(ve,Dt),Ae=Math.max(Ae,Dt),(Je<$e||Nt>Be)&&(Ne(Ue,Ce,mt,ut,Je+1),Ne(mt,ut,Ke,Ye,Je+1))};if(Ne(m,d,k,d,1),Ne(k,d,k,T,1),Ne(k,T,m,T,1),Ne(m,T,m,d,1),this.projection.name==="globe"){const[Ue,Ce]=s.polesInViewport(this);Ue?(Ae=90,ae=180,le=-180):Ce&&(ve=-90,ae=180,le=-180)}return new s.LngLatBounds(new s.LngLat(le,ve),new s.LngLat(ae,Ae))}_getBoundsRectangular(d,m){const{top:T,left:k}=this._edgeInsets,M=this.height-this._edgeInsets.bottom,j=this.width-this._edgeInsets.right,W=new s.pointGeometry(k,T),Q=new s.pointGeometry(j,T),le=new s.pointGeometry(j,M),ae=new s.pointGeometry(k,M);let ve=this.pointCoordinate(W,d),Ae=this.pointCoordinate(Q,d);const Be=this.pointCoordinate(le,m),$e=this.pointCoordinate(ae,m),Ne=(Ue,Ce)=>(Ce.y-Ue.y)/(Ce.x-Ue.x);return ve.y>1&&Ae.y>=0?ve=new s.MercatorCoordinate((1-$e.y)/Ne($e,ve)+$e.x,1):ve.y<0&&Ae.y<=1&&(ve=new s.MercatorCoordinate(-$e.y/Ne($e,ve)+$e.x,0)),Ae.y>1&&ve.y>=0?Ae=new s.MercatorCoordinate((1-Be.y)/Ne(Be,Ae)+Be.x,1):Ae.y<0&&ve.y<=1&&(Ae=new s.MercatorCoordinate(-Be.y/Ne(Be,Ae)+Be.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ve)).extend(this.coordinateLocation(Ae)).extend(this.coordinateLocation($e)).extend(this.coordinateLocation(Be))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=d.visibleDemTiles.reduce((T,k)=>{if(k.dem){const M=k.dem.tree;T.min=Math.min(T.min,M.minimums[0]),T.max=Math.max(T.max,M.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*d.exaggeration(),m.max*d.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-m*(1-this._horizonShift);return d?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,m){return this.projection.createTileMatrix(this,m,d)}calculateDistanceTileData(d){const m=d.key,T=this._distanceTileDataCache;if(T[m])return T[m];const k=d.canonical,M=1/this.height,j=this.cameraWorldSize,W=j/this.zoomScale(k.z),Q=(k.x+Math.pow(2,k.z)*d.wrap)*W,le=k.y*W,ae=this.point;ae.x*=j/this.worldSize,ae.y*=j/this.worldSize;const ve=this.angle,Ae=Math.sin(-ve),Be=-Math.cos(-ve);return T[m]={bearing:[Ae,Be],center:[(ae.x-Q)*M,(ae.y-le)*M],scale:W/s.EXTENT*M},T[m]}calculateFogTileMatrix(d){const m=d.key,T=this._fogTileMatrixCache;if(T[m])return T[m];const k=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return s.multiply(k,this.worldToFogMatrix,k),T[m]=new Float32Array(k),T[m]}calculateProjMatrix(d,m=!1){const T=d.key,k=m?this._alignedProjMatrixCache:this._projMatrixCache;if(k[T])return k[T];const M=this.calculatePosMatrix(d,this.worldSize);return s.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,M),k[T]=new Float32Array(M),k[T]}calculatePixelsToTileUnitsMatrix(d){const m=d.tileID.key,T=this._pixelsToTileUnitsCache;if(T[m])return T[m];const k=function(M,j){const{scale:W}=M.tileTransform,Q=W*s.EXTENT/(M.tileSize*Math.pow(2,j.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return le=new Float32Array(4),Ae=(ae=j.inverseAdjustmentMatrix)[1],Be=ae[2],$e=ae[3],Ue=(ve=[Q,Q])[1],le[0]=ae[0]*(Ne=ve[0]),le[1]=Ae*Ne,le[2]=Be*Ue,le[3]=$e*Ue,le;var le,ae,ve,Ae,Be,$e,Ne,Ue}(d,this);return T[m]=k,T[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const d=1/this.worldSize,m=s.fromScaling([],[d,d,d]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const d=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(m),k=this._camera.forward(),M=s.mercatorZfromAltitude(1,this._center.lat);T[2]/=M,k[2]/=M,s.normalize(k,k);const j=d.raycast(T,k,d.exaggeration());if(j){const W=s.scaleAndAdd([],T,k,j),Q=new s.MercatorCoordinate(W[0],W[1],s.mercatorZfromAltitude(W[2],s.latFromMercatorY(W[1]))),le=(Q.z+s.length([Q.x-T[0],Q.y-T[1],Q.z-T[2]*M]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(le),this._centerAltitude=Q.toAltitude(),this._center=this.coordinateLocation(Q),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const m=this._elevation,T=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,k=this._computeCameraPosition(T),M=m.getAtPointOrZero(new s.MercatorCoordinate(...k)),j=this.pixelsPerMeter/this.worldSize*M,W=this._minimumHeightOverTerrain(),Q=k[2]-j;if(Q<=W)if(Q<0||d){const le=this.locationCoordinate(this._center,this._centerAltitude),ae=[k[0],k[1],le.z-k[2]],ve=s.length(ae);ae[2]-=(W-Q)/this._pixelsPerMercatorPixel;const Ae=s.length(ae);if(Ae===0)return;s.scale$2(ae,ae,ve/Ae*this._pixelsPerMercatorPixel),this._camera.position=[k[0],k[1],le.z*this._pixelsPerMercatorPixel-ae[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const Ae=this.center;return Ae.lat=s.clamp(Ae.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(Ae.lng=s.clamp(Ae.lng,this.minLng,this.maxLng)),this.center=Ae,void(this._constraining=!1)}const m=this._unmodified,{x:T,y:k}=this.point;let M=0,j=T,W=k;const Q=this.width/2,le=this.height/2,ae=this.worldMinY*this.scale,ve=this.worldMaxY*this.scale;if(k-le<ae&&(W=ae+le),k+le>ve&&(W=ve-le),ve-ae<this.height&&(M=Math.max(M,this.height/(ve-ae)),W=(ve+ae)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ae=this.worldMinX*this.scale,Be=this.worldMaxX*this.scale,$e=this.worldSize/2-(Ae+Be)/2;j=(T+$e+this.worldSize)%this.worldSize-$e,j-Q<Ae&&(j=Ae+Q),j+Q>Be&&(j=Be-Q),Be-Ae<this.width&&(M=Math.max(M,this.width/(Be-Ae)),j=(Be+Ae)/2)}j===T&&W===k||(this.center=this.unproject(new s.pointGeometry(j,W))),M&&(this.zoom+=this.scaleZoom(M)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const T=Pa(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const k=this.projection.zAxisUnit==="meters"?m:1,M=this._camera.getWorldToCamera(this.worldSize,k),j=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);j[8]=2*-d.x/this.width,j[9]=2*d.y/this.height;let W=s.mul([],j,M);if(this.projection.isReprojectedInTileSpace){const ut=this.locationCoordinate(this.center),xt=s.identity([]);s.translate(xt,xt,[ut.x*this.worldSize,ut.y*this.worldSize,0]),s.multiply(xt,xt,Il(this)),s.translate(xt,xt,[-ut.x*this.worldSize,-ut.y*this.worldSize,0]),s.multiply(W,W,xt),this.inverseAdjustmentMatrix=function(It){const Dt=Il(It,!0);return fe([],[Dt[0],Dt[1],Dt[4],Dt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],W,[this.worldSize,this.worldSize,this.worldSize/k,1]),this.projMatrix=W,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const Q=s.invert([],j);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(Q,this.horizonLineFromTop(),this.height);const le=new Float32Array(16);s.identity(le),s.scale(le,le,[1,-1,1]),s.rotateX(le,le,this._pitch),s.rotateZ(le,le,this.angle);const ae=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ve=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ae[8]=2*-d.x/this.width,ae[9]=2*(d.y+ve)/this.height,this.skyboxMatrix=s.multiply(le,ae,le);const Ae=this.point,Be=Ae.x,$e=Ae.y,Ne=this.width%2/2,Ue=this.height%2/2,Ce=Math.cos(this.angle),Ke=Math.sin(this.angle),Ye=Be-Math.round(Be)+Ce*Ne+Ke*Ue,Je=$e-Math.round($e)+Ce*Ue+Ke*Ne,mt=new Float64Array(W);if(s.translate(mt,mt,[Ye>.5?Ye-1:Ye,Je>.5?Je-1:Je,0]),this.alignedProjMatrix=mt,W=s.create(),s.scale(W,W,[this.width/2,-this.height/2,1]),s.translate(W,W,[1,-1,0]),this.labelPlaneMatrix=W,W=s.create(),s.scale(W,W,[1,-1,1]),s.translate(W,W,[-1,-1,0]),s.scale(W,W,[2/this.width,2/this.height,1]),this.glCoordMatrix=W,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},W=s.invert(new Float64Array(16),this.pixelMatrix),!W)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=W,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const ut=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(ut,ut,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=W;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,T=this._camera.position,k=1/this.height/this._pixelsPerMercatorPixel,M=[d,d,m];s.scale$2(M,M,k),s.scale$2(T,T,-1),s.multiply$2(T,T,M);const j=s.create();s.translate(j,j,T),s.scale(j,j,M),this.mercatorFogMatrix=j,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,m,k)}_computeCameraPosition(d){const m=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),k=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-d/this.worldSize*this._centerAltitude;return[k.x/this.worldSize-T[0]*M,k.y/this.worldSize-T[1]*M,d/this.worldSize*this._centerAltitude-T[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],k=d[2];let M=1;this.projection.wrap&&(this.center=this.center.wrap()),k>0&&(M=Math.min((m-T)/k,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,d,M),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,m=this._camera.forward(),{pitch:T,bearing:k}=this._camera.getPitchBearing(),M=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,j=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),W=Math.max((d[2]-M)/Math.cos(T),j),Q=this._zoomFromMercatorZ(W);s.scaleAndAdd(d,d,m,W),this._pitch=s.clamp(T,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(k,-Math.PI,Math.PI),this._setZoom(s.clamp(Q,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let m=0,T=s.GLOBE_ZOOM_THRESHOLD_MAX,k=0,M=1/0;for(;T-m>1e-6&&T>m;){const j=m+.5*(T-m),W=this.tileSize*Math.pow(2,j),Q=this.getCameraToCenterDistance(this.projection,j,W),le=this.scaleZoom(Q/(d*this.tileSize)),ae=Math.abs(j-le);ae<M&&(M=ae,k=j),j<le?m=j:T=j}return k}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,m){const T=Math.min(d.x,m.x),k=Math.max(d.x,m.x),M=Math.min(d.y,m.y),j=Math.max(d.y,m.y);if(M<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const W=[new s.pointGeometry(T,M),new s.pointGeometry(k,j),new s.pointGeometry(T,j),new s.pointGeometry(k,M)],Q=this.renderWorldCopies?-3:0,le=this.renderWorldCopies?4:1;for(const ae of W){const ve=this.pointRayIntersection(ae);if(ve.t<0)return!0;const Ae=this.rayIntersectionCoordinate(ve);if(Ae.x<Q||Ae.y<0||Ae.x>le||Ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(d,m){const T=s.length(s.sub([],this._camera.position,d)),k=this._zoomFromMercatorZ(T)+m;return T-this._mercatorZfromZoom(k)}getCameraPoint(){if(this.projection.name==="globe"){const d=function([m,T,k],M){const j=[m,T,k,1];s.transformMat4$1(j,j,M);const W=j[3]=Math.max(j[3],1e-6);return j[0]/=W,j[1]/=W,j[2]/=W,j}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.pointGeometry(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,d))}}getCameraToCenterDistance(d,m=this.zoom,T=this.worldSize){const k=Pa(d,m,this.width,this.height,1024),M=d.pixelSpaceConversion(this.center.lat,T,k);return .5/Math.tan(.5*this._fov)*this.height*M}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(d,d,this.globeMatrix),d}}function F(y,d){let m=!1,T=null;const k=()=>{T=null,m&&(y(),T=setTimeout(k,d),m=!1)};return()=>(m=!0,T||k(),T)}class K{constructor(d){this._hashName=d&&encodeURIComponent(d),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=F(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,s.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const m=te(d);if(this._hashName){const T=this._hashName;let k=!1;const M=s.window.location.hash.slice(1).split("&").map(j=>{const W=j.split("=")[0];return W===T?(k=!0,`${W}=${m}`):j}).filter(j=>j);return k||M.push(`${T}=${m}`),`#${M.join("&")}`}return`#${m}`}_getCurrentHash(){const d=s.window.location.hash.replace("#","");if(this._hashName){let m;return d.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(m=T)}),(m&&m[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some(T=>isNaN(T))){const T=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(m[3]||0):d.getBearing();return d.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:T,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,d)}}function te(y,d){const m=y.getCenter(),T=Math.round(100*y.getZoom())/100,k=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,k),j=Math.round(m.lng*M)/M,W=Math.round(m.lat*M)/M,Q=y.getBearing(),le=y.getPitch();let ae=d?`/${j}/${W}/${T}`:`${T}/${W}/${j}`;return(Q||le)&&(ae+="/"+Math.round(10*Q)/10),le&&(ae+=`/${Math.round(le)}`),ae}const ee={linearity:.3,easing:s.bezier(0,0,.3,1)},h=s.extend({deceleration:2500,maxSpeed:1400},ee),v=s.extend({deceleration:20,maxSpeed:1400},ee),P=s.extend({deceleration:1e3,maxSpeed:360},ee),z=s.extend({deceleration:1e3,maxSpeed:90},ee);class X{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,m=s.exported.now();for(;d.length>0&&m-d[0].time>160;)d.shift()}_onMoveEnd(d){if(s.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)m.zoom+=M.zoomDelta||0,m.bearing+=M.bearingDelta||0,m.pitch+=M.pitchDelta||0,M.panDelta&&m.pan._add(M.panDelta),M.around&&(m.around=M.around),M.pinchAround&&(m.pinchAround=M.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(m.pan.mag()){const M=Se(m.pan.mag(),T,s.extend({},h,d||{}));k.offset=m.pan.mult(M.amount/m.pan.mag()),k.center=this._map.transform.center,ce(k,M)}if(m.zoom){const M=Se(m.zoom,T,v);k.zoom=this._map.transform.zoom+M.amount,ce(k,M)}if(m.bearing){const M=Se(m.bearing,T,P);k.bearing=this._map.transform.bearing+s.clamp(M.amount,-179,179),ce(k,M)}if(m.pitch){const M=Se(m.pitch,T,z);k.pitch=this._map.transform.pitch+M.amount,ce(k,M)}if(k.zoom||k.bearing){const M=m.pinchAround===void 0?m.around:m.pinchAround;k.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),k.noMoveStart=!0,k}}function ce(y,d){(!y.duration||y.duration<d.duration)&&(y.duration=d.duration,y.easing=d.easing)}function Se(y,d,m){const{maxSpeed:T,linearity:k,deceleration:M}=m,j=s.clamp(y*k/(d/1e3),-T,T),W=Math.abs(j)/(M*k);return{easing:m.easing,duration:1e3*W,amount:j*(W/2)}}class je extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,T,k={}){const M=ie(m.getCanvasContainer(),T),j=m.unproject(M);super(d,s.extend({point:M,lngLat:j,originalEvent:T},k)),this._defaultPrevented=!1,this.target=m}}class bt extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,T){const k=d==="touchend"?T.changedTouches:T.touches,M=oe(m.getCanvasContainer(),k),j=M.map(Q=>m.unproject(Q)),W=M.reduce((Q,le,ae,ve)=>Q.add(le.div(ve.length)),new s.pointGeometry(0,0));super(d,{points:M,point:W,lngLats:j,lngLat:m.unproject(W),originalEvent:T}),this._defaultPrevented=!1}}class wt extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,m,T){super(d,{originalEvent:T}),this._defaultPrevented=!1}}class si{constructor(d,m){this._map=d,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new wt(d.type,this._map,d))}mousedown(d,m){return this._mousedownPos=m,this._firePreventable(new je(d.type,this._map,d))}mouseup(d){this._map.fire(new je(d.type,this._map,d))}preclick(d){const m=s.extend({},d);m.type="preclick",this._map.fire(new je(m.type,this._map,m))}click(d,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(d),this._map.fire(new je(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new je(d.type,this._map,d))}mouseover(d){this._map.fire(new je(d.type,this._map,d))}mouseout(d){this._map.fire(new je(d.type,this._map,d))}touchstart(d){return this._firePreventable(new bt(d.type,this._map,d))}touchmove(d){this._map.fire(new bt(d.type,this._map,d))}touchend(d){this._map.fire(new bt(d.type,this._map,d))}touchcancel(d){this._map.fire(new bt(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ki{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new je(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new je("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new je(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class on{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,m){this.isEnabled()&&d.shiftKey&&d.button===0&&(U(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(d,m){if(!this._active)return;const T=m,k=this._startPos,M=this._lastPos;if(!k||!M||M.equals(T)||!this._box&&T.dist(k)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=E("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const j=Math.min(k.x,T.x),W=Math.max(k.x,T.x),Q=Math.min(k.y,T.y),le=Math.max(k.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${j}px,${Q}px)`,this._box.style.width=W-j+"px",this._box.style.height=le-Q+"px")})}mouseupWindow(d,m){if(!this._active)return;const T=this._startPos,k=m;if(T&&d.button===0){if(this.reset(),ne(),T.x!==k.x||T.y!==k.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:M=>M.fitScreenCoordinates(T,k,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),H(),delete this._startPos,delete this._lastPos}_fireEvent(d,m){return this._map.fire(new s.Event(d,{originalEvent:m}))}}function cr(y,d){const m={};for(let T=0;T<y.length;T++)m[y[T].identifier]=d[T];return m}class Cr{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,m,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=d.timeStamp),T.length===this.numTouches&&(this.centroid=function(k){const M=new s.pointGeometry(0,0);for(const j of k)M._add(j);return M.div(k.length)}(m),this.touches=cr(T,m)))}touchmove(d,m,T){if(this.aborted||!this.centroid)return;const k=cr(T,m);for(const M in this.touches){const j=this.touches[M],W=k[M];(!W||W.dist(j)>30)&&(this.aborted=!0)}}touchend(d,m,T){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),T.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class _s{constructor(d){this.singleTap=new Cr(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,m,T){this.singleTap.touchstart(d,m,T)}touchmove(d,m,T){this.singleTap.touchmove(d,m,T)}touchend(d,m,T){const k=this.singleTap.touchend(d,m,T);if(k){const M=d.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(k)<30;if(M&&j||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Ss{constructor(){this._zoomIn=new _s({numTouches:1,numTaps:2}),this._zoomOut=new _s({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,m,T){this._zoomIn.touchstart(d,m,T),this._zoomOut.touchstart(d,m,T)}touchmove(d,m,T){this._zoomIn.touchmove(d,m,T),this._zoomOut.touchmove(d,m,T)}touchend(d,m,T){const k=this._zoomIn.touchend(d,m,T),M=this._zoomOut.touchend(d,m,T);return k?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()+1,around:j.unproject(k)},{originalEvent:d})}):M?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()-1,around:j.unproject(M)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ja={0:1,2:2};class ou{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,m){return!1}_move(d,m){return{}}mousedown(d,m){if(this._lastPoint)return;const T=pe(d);this._correctButton(d,T)&&(this._lastPoint=m,this._eventButton=T)}mousemoveWindow(d,m){const T=this._lastPoint;if(T){if(d.preventDefault(),this._eventButton!=null&&function(k,M){const j=Ja[M];return k.buttons===void 0||(k.buttons&j)!==j}(d,this._eventButton))this.reset();else if(this._moved||!(m.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(T,m)}}mouseupWindow(d){this._lastPoint&&pe(d)===this._eventButton&&(this._moved&&ne(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc extends ou{mousedown(d,m){super.mousedown(d,m),this._lastPoint&&(this._active=!0)}_correctButton(d,m){return m===0&&!d.ctrlKey}_move(d,m){return{around:m,panDelta:m.sub(d)}}}class wr extends ou{_correctButton(d,m){return m===0&&d.ctrlKey||m===2}_move(d,m){const T=.8*(m.x-d.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(d){d.preventDefault()}}class au extends ou{_correctButton(d,m){return m===0&&d.ctrlKey||m===2}_move(d,m){const T=-.5*(m.y-d.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(d){d.preventDefault()}}class js{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(d,m,T){return this._calculateTransform(d,m,T)}touchmove(d,m,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(T.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,m,T)}}touchend(d,m,T){this._calculateTransform(d,m,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,m,T){T.length>0&&(this._active=!0);const k=cr(T,m),M=new s.pointGeometry(0,0),j=new s.pointGeometry(0,0);let W=0;for(const le in k){const ae=k[le],ve=this._touches[le];ve&&(M._add(ae),j._add(ae.sub(ve)),W++,k[le]=ae)}if(this._touches=k,W<this._minTouches||!j.mag())return;const Q=j.div(W);return this._sum._add(Q),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(W),panDelta:Q}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=E("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Fu{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,m,T){return{}}touchstart(d,m,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([m[0],m[1]]))}touchmove(d,m,T){const k=this._firstTwoTouches;if(!k)return;d.preventDefault();const[M,j]=k,W=Hr(T,m,M),Q=Hr(T,m,j);if(!W||!Q)return;const le=this._aroundCenter?null:W.add(Q).div(2);return this._move([W,Q],le,d)}touchend(d,m,T){if(!this._firstTwoTouches)return;const[k,M]=this._firstTwoTouches,j=Hr(T,m,k),W=Hr(T,m,M);j&&W||(this._active&&ne(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hr(y,d,m){for(let T=0;T<y.length;T++)if(y[T].identifier===m)return d[T]}function zc(y,d){return Math.log(y/d)/Math.LN2}class Zh extends Fu{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,m){const T=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(zc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:zc(this._distance,T),pinchAround:m}}}function nh(y,d){return 180*y.angleWith(d)/Math.PI}class Yh extends Fu{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,m){const T=this._vector;if(this._vector=d[0].sub(d[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:nh(this._vector,T),pinchAround:m}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const m=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const k=nh(d,T);return Math.abs(k)<m}}function _c(y){return Math.abs(y.y)>Math.abs(y.x)}class O extends Fu{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,_c(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,m,T){const k=this._lastPoints;if(!k)return;const M=d[0].sub(k[0]),j=d[1].sub(k[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(M,j,T.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(M.y+j.y)/2*-.5})}gestureBeginsVertically(d,m,T){if(this._valid!==void 0)return this._valid;const k=d.mag()>=2,M=m.mag()>=2;if(!k&&!M)return;if(!k||!M)return this._firstMove==null&&(this._firstMove=T),T-this._firstMove<100&&void 0;const j=d.y>0==m.y>0;return _c(d)&&_c(m)&&j}}const G={panStep:100,bearingStep:15,pitchStep:10};class N{constructor(){const d=G;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let m=0,T=0,k=0,M=0,j=0;switch(d.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:d.shiftKey?T=-1:(d.preventDefault(),M=-1);break;case 39:d.shiftKey?T=1:(d.preventDefault(),M=1);break;case 38:d.shiftKey?k=1:(d.preventDefault(),j=-1);break;case 40:d.shiftKey?k=-1:(d.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(T=0,k=0),{cameraAnimation:W=>{const Q=W.getZoom();W.easeTo({duration:300,easeId:"keyboardHandler",easing:re,zoom:m?Math.round(Q)+m*(d.shiftKey?2:1):Q,bearing:W.getBearing()+T*this._bearingStep,pitch:W.getPitch()+k*this._pitchStep,offset:[-M*this._panStep,-j*this._panStep],center:W.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function re(y){return y*(2-y)}const Re=4.000244140625;class ot{constructor(d,m){this._map=d,this._el=d.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&d.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=d.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const T=s.exported.now(),k=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,m!==0&&m%Re==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(k*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),d.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=d,this._delta-=m,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=ie(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;this._type==="wheel"&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(this._delta!==0){const Q=this._type==="wheel"&&Math.abs(this._delta)>Re?this._wheelZoomRate:this._defaultZoomRate;let le=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&le!==0&&(le=1/le);const ae=m(),ve=Math.pow(2,ae),Ae=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):ve;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(Ae*le))),this._type==="wheel"&&(this._startZoom=ae,this._easing=this._smoothOutEasing(200)),this._delta=0}const T=typeof this._targetZoom=="number"?this._targetZoom:m(),k=this._startZoom,M=this._easing;let j,W=!1;if(this._type==="wheel"&&k&&M){const Q=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),le=M(Q);j=s.number(k,T,le),Q<1?this._frameId||(this._frameId=!0):W=!0}else j=T,W=!0;return this._active=!0,W&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!W,zoomDelta:j-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let m=s.ease;if(this._prevEase){const T=this._prevEase,k=(s.exported.now()-T.start)/T.duration,M=T.easing(k+.01)-T.easing(k),j=.27/Math.sqrt(M*M+1e-4)*.01,W=Math.sqrt(.0729-j*j);m=s.bezier(j,W,.25,1)}return this._prevEase={start:s.exported.now(),duration:d,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=E("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Vt{constructor(d,m){this._clickZoom=d,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jt{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,m){return d.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(d.shiftKey?-1:1),around:T.unproject(m)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xi{constructor(){this._tap=new _s({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,m,T){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=m[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(d,m,T))}touchmove(d,m,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const k=m[0],M=k.y-this._swipePoint.y;return this._swipePoint=k,d.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(d,m,T)}touchend(d,m,T){this._tapTime?this._swipePoint&&T.length===0&&this.reset():this._tap.touchend(d,m,T)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wi{constructor(d,m,T){this._el=d,this._mousePan=m,this._touchPan=T}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wi{constructor(d,m,T){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=m,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Cs{constructor(d,m,T,k){this._el=d,this._touchZoom=m,this._touchRotate=T,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const sr=y=>y.zoom||y.drag||y.pitch||y.rotate;class Ro extends s.Event{}class Aa{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,m){const T=s.sub([],m,d);this.radius=s.length(T[2]<0?s.div([],T,this.constants):[T[0],T[1],0])}projectRay(d){s.div(d,d,this.constants),s.normalize(d,d),s.mul$1(d,d,this.constants);const m=s.scale$2([],d,this.radius);if(m[2]>0){const T=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),k=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),M=s.add([],m,s.scale$2([],s.sub([],s.add([],k,T),m),2));m[0]=M[0],m[1]=M[1]}return m}}function Pl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class lu{constructor(d,m){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new X(d),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Aa,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[k,M,j]of this._listeners)k.addEventListener(M,k===s.window.document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[d,m,T]of this._listeners)d.removeEventListener(m,d===s.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(d){const m=this._map,T=m.getCanvasContainer();this._add("mapEvent",new si(m,d));const k=m.boxZoom=new on(m,d);this._add("boxZoom",k);const M=new Ss,j=new Jt;m.doubleClickZoom=new Vt(j,M),this._add("tapZoom",M),this._add("clickZoom",j);const W=new xi;this._add("tapDragZoom",W);const Q=m.touchPitch=new O(m);this._add("touchPitch",Q);const le=new wr(d),ae=new au(d);m.dragRotate=new wi(d,le,ae),this._add("mouseRotate",le,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);const ve=new Nc(d),Ae=new js(m,d);m.dragPan=new Wi(T,ve,Ae),this._add("mousePan",ve),this._add("touchPan",Ae,["touchZoom","touchRotate"]);const Be=new Yh,$e=new Zh;m.touchZoomRotate=new Cs(T,$e,Be,W),this._add("touchRotate",Be,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ki(m));const Ne=m.scrollZoom=new ot(m,this);this._add("scrollZoom",Ne,["mousePan"]);const Ue=m.keyboard=new N;this._add("keyboard",Ue);for(const Ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[Ce]&&m[Ce].enable(d[Ce])}_add(d,m,T){this._handlers.push({handlerName:d,handler:m,allowed:T}),this._handlersById[d]=m}stop(d){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!sr(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,m,T){for(const k in d)if(k!==T&&(!m||m.indexOf(k)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const m=[];for(const T of d)this._el.contains(T.target)&&m.push(T);return m}handleEvent(d,m){this._updatingCamera=!0;const T=d.type==="renderFrame",k=T?void 0:d,M={needsRenderFrame:!1},j={},W={},Q=d.touches?this._getMapTouches(d.touches):void 0,le=Q?oe(this._el,Q):T?void 0:ie(this._el,d);for(const{handlerName:Ae,handler:Be,allowed:$e}of this._handlers){if(!Be.isEnabled())continue;let Ne;this._blockedByActive(W,$e,Ae)?Be.reset():Be[m||d.type]&&(Ne=Be[m||d.type](d,le,Q),this.mergeHandlerResult(M,j,Ne,Ae,k),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||Be.isActive())&&(W[Ae]=Be)}const ae={};for(const Ae in this._previousActiveHandlers)W[Ae]||(ae[Ae]=k);this._previousActiveHandlers=W,(Object.keys(ae).length||Pl(M))&&(this._changes.push([M,j,ae]),this._triggerRenderFrame()),(Object.keys(W).length||Pl(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ve}=M;ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ve(this._map))}mergeHandlerResult(d,m,T,k,M){if(!T)return;s.extend(d,T);const j={handlerName:k,originalEvent:T.originalEvent||M};T.zoomDelta!==void 0&&(m.zoom=j),T.panDelta!==void 0&&(m.drag=j),T.pitchDelta!==void 0&&(m.pitch=j),T.bearingDelta!==void 0&&(m.rotate=j)}_applyChanges(){const d={},m={},T={};for(const[k,M,j]of this._changes)k.panDelta&&(d.panDelta=(d.panDelta||new s.pointGeometry(0,0))._add(k.panDelta)),k.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(d.around=k.around),k.aroundCoord!==void 0&&(d.aroundCoord=k.aroundCoord),k.pinchAround!==void 0&&(d.pinchAround=k.pinchAround),k.noInertia&&(d.noInertia=k.noInertia),s.extend(m,M),s.extend(T,j);this._updateMapTransform(d,m,T),this._changes=[]}_updateMapTransform(d,m,T){const k=this._map,M=k.transform,j=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const Ye=this._eventsInProgress.drag;return Ye&&!this._handlersById[Ye.handlerName].isActive()})()&&!Pl(d)){const Ke=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",Ke!==M.zoom&&this._map._update(!0)}if(M._isCameraConstrained&&k._stop(!0),!Pl(d))return void this._fireEvents(m,T,!0);let{panDelta:W,zoomDelta:Q,bearingDelta:le,pitchDelta:ae,around:ve,aroundCoord:Ae,pinchAround:Be}=d;M._isCameraConstrained&&(Q>0&&(Q=0),M._isCameraConstrained=!1),Be!==void 0&&(ve=Be),(Q||(Ke=>m.drag&&!this._eventsInProgress.drag)())&&ve&&(this._dragOrigin=j(M.pointCoordinate3D(ve)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",k._stop(!0),ve=ve||k.transform.centerPoint,le&&(M.bearing+=le),ae&&(M.pitch+=ae),M._updateCameraState();const $e=[0,0,0];if(W)if(M.projection.name==="mercator"){const Ke=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(ve).dir),Ye=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(ve.sub(W)).dir);$e[0]=Ye[0]-Ke[0],$e[1]=Ye[1]-Ke[1]}else{const Ke=M.pointCoordinate(ve);if(M.projection.name==="globe"){W=W.rotate(-M.angle);const Ye=M._pixelsPerMercatorPixel/M.worldSize;$e[0]=-W.x*s.mercatorScale(s.latFromMercatorY(Ke.y))*Ye,$e[1]=-W.y*s.mercatorScale(M.center.lat)*Ye}else{const Ye=M.pointCoordinate(ve.sub(W));Ke&&Ye&&($e[0]=Ye.x-Ke.x,$e[1]=Ye.y-Ke.y)}}const Ne=M.zoom,Ue=[0,0,0];if(Q){const Ke=j(Ae||M.pointCoordinate3D(ve)),Ye={dir:s.normalize([],s.sub([],Ke,M._camera.position))};if(Ye.dir[2]<0){const Je=M.zoomDeltaToMovement(Ke,Q);s.scale$2(Ue,Ye.dir,Je)}}const Ce=s.add($e,$e,Ue);M._translateCameraConstrained(Ce),Q&&Math.abs(M.zoom-Ne)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(m,T,!0)}_fireEvents(d,m,T){const k=sr(this._eventsInProgress),M=sr(d),j={};for(const ae in d){const{originalEvent:ve}=d[ae];this._eventsInProgress[ae]||(j[`${ae}start`]=ve),this._eventsInProgress[ae]=d[ae]}!k&&M&&this._fireEvent("movestart",M.originalEvent);for(const ae in j)this._fireEvent(ae,j[ae]);M&&this._fireEvent("move",M.originalEvent);for(const ae in d){const{originalEvent:ve}=d[ae];this._fireEvent(ae,ve)}const W={};let Q;for(const ae in this._eventsInProgress){const{handlerName:ve,originalEvent:Ae}=this._eventsInProgress[ae];this._handlersById[ve].isActive()||(delete this._eventsInProgress[ae],Q=m[ve]||Ae,W[`${ae}end`]=Q)}for(const ae in W)this._fireEvent(ae,W[ae]);const le=sr(this._eventsInProgress);if(T&&(k||M)&&!le){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ve=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;ae?(ve(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:Q})):(this._map.fire(new s.Event("moveend",{originalEvent:Q})),ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,m){this._map.fire(new s.Event(d,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new Ro("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Xf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class om extends s.Evented{constructor(d,m){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=m.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,m){return this.jumpTo({center:d},m)}panBy(d,m,T){return d=s.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,s.extend({offset:d},m),T)}panTo(d,m,T){return this.easeTo(s.extend({center:d},m),T)}getZoom(){return this.transform.zoom}setZoom(d,m){return this.jumpTo({zoom:d},m),this}zoomTo(d,m,T){return this.easeTo(s.extend({zoom:d},m),T)}zoomIn(d,m){return this.zoomTo(this.getZoom()+1,d,m),this}zoomOut(d,m){return this.zoomTo(this.getZoom()-1,d,m),this}getBearing(){return this.transform.bearing}setBearing(d,m){return this.jumpTo({bearing:d},m),this}getPadding(){return this.transform.padding}setPadding(d,m){return this.jumpTo({padding:d},m),this}rotateTo(d,m,T){return this.easeTo(s.extend({bearing:d},m),T)}resetNorth(d,m){return this.rotateTo(0,s.extend({duration:1e3},d),m),this}resetNorthPitch(d,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},d),m),this}snapToNorth(d,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,m):this}getPitch(){return this.transform.pitch}setPitch(d,m){return this.jumpTo({pitch:d},m),this}cameraForBounds(d,m){d=s.LngLatBounds.convert(d);const T=m&&m.bearing||0,k=m&&m.pitch||0,M=d.getNorthWest(),j=d.getSouthEast();return this._cameraForBounds(this.transform,M,j,T,k,m)}_extendCameraOptions(d){const m={top:0,bottom:0,right:0,left:0};if(typeof(d=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const T=d.padding;d.padding={top:T,bottom:T,right:T,left:T}}return d.padding=s.extend(m,d.padding),d}_minimumAABBFrustumDistance(d,m){const T=m.max[0]-m.min[0],k=m.max[1]-m.min[1];return T/k>d.aspect?T/(2*Math.tan(.5*d.fovX)*d.aspect):k/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,m,T,k,M,j){const W=d.clone(),Q=this._extendCameraOptions(j);W.bearing=k,W.pitch=M;const le=s.LngLat.convert(m),ae=s.LngLat.convert(T),ve=.5*(le.lat+ae.lat),Ae=.5*(le.lng+ae.lng),Be=s.latLngToECEF(ve,Ae),$e=s.normalize([],Be),Ne=s.normalize([],s.cross([],$e,[0,1,0])),Ue=s.cross([],Ne,$e),Ce=[Ne[0],Ne[1],Ne[2],0,Ue[0],Ue[1],Ue[2],0,$e[0],$e[1],$e[2],0,0,0,0,1],Ke=[Be,s.latLngToECEF(le.lat,le.lng),s.latLngToECEF(ae.lat,le.lng),s.latLngToECEF(ae.lat,ae.lng),s.latLngToECEF(le.lat,ae.lng),s.latLngToECEF(ve,le.lng),s.latLngToECEF(ve,ae.lng),s.latLngToECEF(le.lat,Ae),s.latLngToECEF(ae.lat,Ae)];let Ye=s.Aabb.fromPoints(Ke.map(oi=>[s.dot(Ne,oi),s.dot(Ue,oi),s.dot($e,oi)]));const Je=s.transformMat4([],Ye.center,Ce);s.squaredLength(Je)===0&&s.set(Je,0,0,1),s.normalize(Je,Je),s.scale$2(Je,Je,s.GLOBE_RADIUS),W.center=s.ecefToLatLng(Je);const mt=W.getWorldToCameraMatrix(),ut=s.invert(new Float64Array(16),mt);Ye=s.Aabb.applyTransform(Ye,s.multiply([],mt,Ce)),s.transformMat4(Je,Je,mt);const xt=.5*(Ye.max[2]-Ye.min[2]),It=this._minimumAABBFrustumDistance(W,Ye),Dt=s.scale$2([],[0,0,1],xt),Nt=s.add(Dt,Je,Dt),Ti=It+(W.pitch===0?0:s.distance(Je,Nt)),Ot=W.globeCenterInViewSpace,ni=s.sub([],Je,[Ot[0],Ot[1],Ot[2]]);s.normalize(ni,ni),s.scale$2(ni,ni,Ti);const qt=s.add([],Je,ni);s.transformMat4(qt,qt,ut);const ui=s.earthRadius/s.GLOBE_RADIUS,Ft=s.length(qt),Et=s.mercatorZfromAltitude(Math.max(Ft*ui-s.earthRadius,Number.EPSILON),0),zt=Math.min(W.zoomFromMercatorZAdjusted(Et),Q.maxZoom);return zt>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(W.setProjection({name:"mercator"}),W.zoom=zt,this._cameraForBounds(W,m,T,k,M,j)):{center:W.center,zoom:zt,bearing:k,pitch:M}}queryTerrainElevation(d,m){const T=this.transform.elevation;return T?(m=s.extend({},{exaggerated:!0},m),T.getAtPoint(s.MercatorCoordinate.fromLngLat(d),null,m.exaggerated)):null}_cameraForBounds(d,m,T,k,M,j){if(d.projection.name==="globe")return this._cameraForBoundsOnGlobe(d,m,T,k,M,j);const W=d.clone(),Q=this._extendCameraOptions(j),le=W.padding;W.bearing=k,W.pitch=M;const ae=s.LngLat.convert(m),ve=s.LngLat.convert(T),Ae=new s.LngLat(ae.lng,ve.lat),Be=new s.LngLat(ve.lng,ae.lat),$e=W.project(ae),Ne=W.project(ve),Ue=this.queryTerrainElevation(ae),Ce=this.queryTerrainElevation(ve),Ke=this.queryTerrainElevation(Ae),Ye=this.queryTerrainElevation(Be),Je=[[$e.x,$e.y,Math.min(Ue||0,Ce||0,Ke||0,Ye||0)],[Ne.x,Ne.y,Math.max(Ue||0,Ce||0,Ke||0,Ye||0)]];let mt=s.Aabb.fromPoints(Je);const ut=W.getWorldToCameraMatrix(),xt=s.invert(new Float64Array(16),ut);mt=s.Aabb.applyTransform(mt,ut);const It=s.sub([],mt.max,mt.min),Dt=le.left||0,Nt=le.right||0,Ti=le.bottom||0,Ot=le.top||0,{left:ni,right:qt,top:ui,bottom:Ft}=Q.padding,Et=.5*(Dt+Nt),zt=.5*(Ot+Ti),oi=Math.min(W.scaleZoom(W.scale*Math.min((W.width-(Dt+Nt+ni+qt))/It[0],(W.height-(Ti+Ot+Ft+ui))/It[1])),Q.maxZoom),hi=W.scale/W.zoomScale(oi);mt=new s.Aabb([mt.min[0]-(ni+Et)*hi,mt.min[1]-(Ft+zt)*hi,mt.min[2]],[mt.max[0]+(qt+Et)*hi,mt.max[1]+(ui+zt)*hi,mt.max[2]]);const en=.5*It[2],Rn=this._minimumAABBFrustumDistance(W,mt),Yi=[0,0,1,0];s.transformMat4$1(Yi,Yi,ut),s.normalize$2(Yi,Yi);const Ui=s.scale$2([],Yi,Rn+en),tn=s.add([],mt.center,Ui),jn=(typeof Q.offset.x=="number"&&typeof Q.offset.y=="number"?new s.pointGeometry(Q.offset.x,Q.offset.y):s.pointGeometry.convert(Q.offset)).rotate(-s.degToRad(k));mt.center[0]-=jn.x*hi,mt.center[1]+=jn.y*hi,s.transformMat4(mt.center,mt.center,xt),s.transformMat4(tn,tn,xt);const an=[mt.center[0],mt.center[1],tn[2]*W.pixelsPerMeter];s.scale$2(an,an,1/W.worldSize);const hr=s.lngFromMercatorX(an[0]),mr=s.latFromMercatorY(an[1]),$r=Math.min(W._zoomFromMercatorZ(an[2]),Q.maxZoom),Dr=new s.LngLat(hr,mr);return W.mercatorFromTransition&&$r<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(W.setProjection({name:"globe"}),W.zoom=$r,this._cameraForBounds(W,m,T,k,M,j)):{center:Dr,zoom:$r,bearing:k,pitch:M}}fitBounds(d,m,T){const k=this.cameraForBounds(d,m);return this._fitInternal(k,m,T)}fitScreenCoordinates(d,m,T,k,M){const j=s.pointGeometry.convert(d),W=s.pointGeometry.convert(m),Q=new s.pointGeometry(Math.min(j.x,W.x),Math.min(j.y,W.y)),le=new s.pointGeometry(Math.max(j.x,W.x),Math.max(j.y,W.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(j,W))return this;const ae=this.transform.pointLocation3D(Q),ve=this.transform.pointLocation3D(le),Ae=this.transform.pointLocation3D(new s.pointGeometry(Q.x,le.y)),Be=this.transform.pointLocation3D(new s.pointGeometry(le.x,Q.y)),$e=[Math.min(ae.lng,ve.lng,Ae.lng,Be.lng),Math.min(ae.lat,ve.lat,Ae.lat,Be.lat)],Ne=[Math.max(ae.lng,ve.lng,Ae.lng,Be.lng),Math.max(ae.lat,ve.lat,Ae.lat,Be.lat)],Ue=k&&k.pitch?k.pitch:this.getPitch(),Ce=this._cameraForBounds(this.transform,$e,Ne,T,Ue,k);return this._fitInternal(Ce,k,M)}_fitInternal(d,m,T){return d?(delete(m=s.extend(d,m)).padding,m.linear?this.easeTo(m,T):this.flyTo(m,T)):this}jumpTo(d,m){this.stop();const T=d.preloadOnly?this.transform.clone():this.transform;let k=!1,M=!1,j=!1;return"zoom"in d&&T.zoom!==+d.zoom&&(k=!0,T.zoom=+d.zoom),d.center!==void 0&&(T.center=s.LngLat.convert(d.center)),"bearing"in d&&T.bearing!==+d.bearing&&(M=!0,T.bearing=+d.bearing),"pitch"in d&&T.pitch!==+d.pitch&&(j=!0,T.pitch=+d.pitch),d.padding==null||T.isPaddingEqual(d.padding)||(T.padding=d.padding),d.preloadOnly?(this._preloadTiles(T),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),k&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),M&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),j&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Xf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,m){const T=this.transform;if(!T.projection.supportsFreeCamera)return s.warnOnce(Xf),this;this.stop();const k=T.zoom,M=T.pitch,j=T.bearing;T.setFreeCameraOptions(d);const W=k!==T.zoom,Q=M!==T.pitch,le=j!==T.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),W&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),le&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),Q&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(d,m){this._stop(!1,d.easeId),((d=s.extend({offset:[0,0],duration:500,easing:s.ease},d)).animate===!1||!d.essential&&s.exported.prefersReducedMotion)&&(d.duration=0);const T=this.transform,k=this.getZoom(),M=this.getBearing(),j=this.getPitch(),W=this.getPadding(),Q="zoom"in d?+d.zoom:k,le="bearing"in d?this._normalizeBearing(d.bearing,M):M,ae="pitch"in d?+d.pitch:j,ve="padding"in d?d.padding:T.padding,Ae=s.pointGeometry.convert(d.offset);let Be,$e,Ne;if(T.projection.name==="globe"){const Dt=s.MercatorCoordinate.fromLngLat(T.center),Nt=Ae.rotate(-T.angle);Dt.x+=Nt.x/T.worldSize,Dt.y+=Nt.y/T.worldSize;const Ti=Dt.toLngLat(),Ot=s.LngLat.convert(d.center||Ti);this._normalizeCenter(Ot),Be=T.centerPoint.add(Nt),$e=new s.pointGeometry(Dt.x,Dt.y).mult(T.worldSize),Ne=new s.pointGeometry(s.mercatorXfromLng(Ot.lng),s.mercatorYfromLat(Ot.lat)).mult(T.worldSize).sub($e)}else{Be=T.centerPoint.add(Ae);const Dt=T.pointLocation(Be),Nt=s.LngLat.convert(d.center||Dt);this._normalizeCenter(Nt),$e=T.project(Dt),Ne=T.project(Nt).sub($e)}const Ue=T.zoomScale(Q-k);let Ce,Ke;d.around&&(Ce=s.LngLat.convert(d.around),Ke=T.locationPoint(Ce));const Ye=this._zooming||Q!==k,Je=this._rotating||M!==le,mt=this._pitching||ae!==j,ut=!T.isPaddingEqual(ve),xt=Dt=>Nt=>{if(Ye&&(Dt.zoom=s.number(k,Q,Nt)),Je&&(Dt.bearing=s.number(M,le,Nt)),mt&&(Dt.pitch=s.number(j,ae,Nt)),ut&&(Dt.interpolatePadding(W,ve,Nt),Be=Dt.centerPoint.add(Ae)),Ce)Dt.setLocationAtPoint(Ce,Ke);else{const Ti=Dt.zoomScale(Dt.zoom-k),Ot=Q>k?Math.min(2,Ue):Math.max(.5,Ue),ni=Math.pow(Ot,1-Nt),qt=Dt.unproject($e.add(Ne.mult(Nt*ni)).mult(Ti));Dt.setLocationAtPoint(Dt.renderWorldCopies?qt.wrap():qt,Be)}return d.preloadOnly||this._fireMoveEvents(m),Dt};if(d.preloadOnly){const Dt=this._emulate(xt,d.duration,T);return this._preloadTiles(Dt),this}const It={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ye,this._rotating=Je,this._pitching=mt,this._padding=ut,this._easeId=d.easeId,this._prepareEase(m,d.noMoveStart,It),this._ease(xt(T),Dt=>{T.recenterOnTerrain(),this._afterEase(m,Dt)},d),this}_prepareEase(d,m,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||T.moving||this.fire(new s.Event("movestart",d)),this._zooming&&!T.zooming&&this.fire(new s.Event("zoomstart",d)),this._rotating&&!T.rotating&&this.fire(new s.Event("rotatestart",d)),this._pitching&&!T.pitching&&this.fire(new s.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new s.Event("move",d)),this._zooming&&this.fire(new s.Event("zoom",d)),this._rotating&&this.fire(new s.Event("rotate",d)),this._pitching&&this.fire(new s.Event("pitch",d))}_afterEase(d,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,k=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new s.Event("zoomend",d)),k&&this.fire(new s.Event("rotateend",d)),M&&this.fire(new s.Event("pitchend",d)),this.fire(new s.Event("moveend",d))}flyTo(d,m){if(!d.essential&&s.exported.prefersReducedMotion){const oi=s.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(oi,m)}this.stop(),d=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},d);const T=this.transform,k=this.getZoom(),M=this.getBearing(),j=this.getPitch(),W=this.getPadding(),Q="zoom"in d?s.clamp(+d.zoom,T.minZoom,T.maxZoom):k,le="bearing"in d?this._normalizeBearing(d.bearing,M):M,ae="pitch"in d?+d.pitch:j,ve="padding"in d?d.padding:T.padding,Ae=T.zoomScale(Q-k),Be=s.pointGeometry.convert(d.offset);let $e=T.centerPoint.add(Be);const Ne=T.pointLocation($e),Ue=s.LngLat.convert(d.center||Ne);this._normalizeCenter(Ue);const Ce=T.project(Ne),Ke=T.project(Ue).sub(Ce);let Ye=d.curve;const Je=Math.max(T.width,T.height),mt=Je/Ae,ut=Ke.mag();if("minZoom"in d){const oi=s.clamp(Math.min(d.minZoom,k,Q),T.minZoom,T.maxZoom),hi=Je/T.zoomScale(oi-k);Ye=Math.sqrt(hi/ut*2)}const xt=Ye*Ye;function It(oi){const hi=(mt*mt-Je*Je+(oi?-1:1)*xt*xt*ut*ut)/(2*(oi?mt:Je)*xt*ut);return Math.log(Math.sqrt(hi*hi+1)-hi)}function Dt(oi){return(Math.exp(oi)-Math.exp(-oi))/2}function Nt(oi){return(Math.exp(oi)+Math.exp(-oi))/2}const Ti=It(0);let Ot=function(oi){return Nt(Ti)/Nt(Ti+Ye*oi)},ni=function(oi){return Je*((Nt(Ti)*(Dt(hi=Ti+Ye*oi)/Nt(hi))-Dt(Ti))/xt)/ut;var hi},qt=(It(1)-Ti)/Ye;if(Math.abs(ut)<1e-6||!isFinite(qt)){if(Math.abs(Je-mt)<1e-6)return this.easeTo(d,m);const oi=mt<Je?-1:1;qt=Math.abs(Math.log(mt/Je))/Ye,ni=function(){return 0},Ot=function(hi){return Math.exp(oi*Ye*hi)}}d.duration="duration"in d?+d.duration:1e3*qt/("screenSpeed"in d?+d.screenSpeed/Ye:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const ui=M!==le,Ft=ae!==j,Et=!T.isPaddingEqual(ve),zt=oi=>hi=>{const en=hi*qt,Rn=1/Ot(en);oi.zoom=hi===1?Q:k+oi.scaleZoom(Rn),ui&&(oi.bearing=s.number(M,le,hi)),Ft&&(oi.pitch=s.number(j,ae,hi)),Et&&(oi.interpolatePadding(W,ve,hi),$e=oi.centerPoint.add(Be));const Yi=hi===1?Ue:oi.unproject(Ce.add(Ke.mult(ni(en))).mult(Rn));return oi.setLocationAtPoint(oi.renderWorldCopies?Yi.wrap():Yi,$e),oi._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(m),oi};if(d.preloadOnly){const oi=this._emulate(zt,d.duration,T);return this._preloadTiles(oi),this}return this._zooming=!0,this._rotating=ui,this._pitching=Ft,this._padding=Et,this._prepareEase(m,!1),this._ease(zt(T),()=>this._afterEase(m),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,m)}if(!d){const T=this.handlers;T&&T.stop(!1)}return this}_ease(d,m,T){T.animate===!1||T.duration===0?(d(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=T,this._onEaseFrame=d,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,m){d=s.wrap(d,-180,180);const T=Math.abs(d-m);return Math.abs(d-360-m)<T&&(d-=360),Math.abs(d+360-m)<T&&(d+=360),d}_normalizeCenter(d){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const T=d.lng-m.center.lng;d.lng+=T>180?-360:T<-180?360:0}_emulate(d,m,T){const k=Math.ceil(15*m/1e3),M=[],j=d(T.clone());for(let W=0;W<=k;W++){const Q=j(W/k);M.push(Q.clone())}return M}}class c_{constructor(d={}){this.options=d,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const m=this.options&&this.options.compact;return this._map=d,this._container=E("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=E("button","mapboxgl-ctrl-attrib-button",this._container),E("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,m){const T=this._map._getUIString(`AttributionControl.${m}`);d.setAttribute("aria-label",T),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(d){const T=m.reduce((k,M,j)=>(M.value&&(k+=`${M.key}=${M.value}${j<m.length-1?"&":""}`),k),"?");d.href=`${s.config.FEEDBACK_URL}/${T}#${te(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const m=this._map.style._sourceCaches;for(const k in m){const M=m[k];if(M.used){const j=M.getSource();j.attribution&&d.indexOf(j.attribution)<0&&d.push(j.attribution)}}d.sort((k,M)=>k.length-M.length),d=d.filter((k,M)=>{for(let j=M+1;j<d.length;j++)if(d[j].indexOf(k)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const T=d.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,d.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class d_{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=E("div","mapboxgl-ctrl");const m=E("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&d.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(Object.entries(d).length===0)return!0;for(const m in d){const T=d[m].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const m=d[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class Kf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const m=++this._id;return this._queue.push({callback:d,id:m,cancelled:!1}),m}remove(d){const m=this._currentlyRunning,T=m?this._queue.concat(m):this._queue;for(const k of T)if(k.id===d)return void(k.cancelled=!0)}run(d=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const T of m)if(!T.cancelled&&(T.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function am(y,d,m){if(y=new s.LngLat(y.lng,y.lat),d){const T=new s.LngLat(y.lng-360,y.lat),k=new s.LngLat(y.lng+360,y.lat),M=360*Math.ceil(Math.abs(y.lng-m.center.lng)/360),j=m.locationPoint(y).distSqr(d),W=d.x<0||d.y<0||d.x>m.width||d.y>m.height;m.locationPoint(T).distSqr(d)<j&&(W||Math.abs(T.lng-m.center.lng)<M)?y=T:m.locationPoint(k).distSqr(d)<j&&(W||Math.abs(k.lng-m.center.lng)<M)&&(y=k)}for(;Math.abs(y.lng-m.center.lng)>180;){const T=m.locationPoint(y);if(T.x>=0&&T.y>=0&&T.x<=m.width&&T.y<=m.height)break;y.lng>m.center.lng?y.lng-=360:y.lng+=360}return y}const Xh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class lm extends s.Evented{constructor(d,m){if(super(),(d instanceof s.window.HTMLElement||m)&&(d=s.extend({element:d},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=s.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=E("div");const k=41,M=27,j=I("svg",{display:"block",height:k*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${k}`},this._element),W=I("radialGradient",{id:"shadowGradient"},I("defs",{},j));I("stop",{offset:"10%","stop-opacity":.4},W),I("stop",{offset:"100%","stop-opacity":.05},W),I("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},j),I("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},j),I("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},j),I("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},j),this._offset=s.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",k=>{k.preventDefault()}),this._element.addEventListener("mousedown",k=>{k.preventDefault()});const T=this._element.classList;for(const k in Xh)T.remove(`mapboxgl-marker-anchor-${k}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=s.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const k=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const m=d.code,T=d.charCode||d.keyCode;m!=="Space"&&m!=="Enter"&&T!==32&&T!==13||this.togglePopup()}_onMapClick(d){const m=d.originalEvent.target,T=this._element;this._popup&&(m===T||T.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,m=this._pos;if(!d||!m)return!1;const T=d.unproject(m),k=d.getFreeCameraOptions();if(!k.position)return!1;const M=k.position.toLngLat();return M.distanceTo(T)<.9*M.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const m=this._pos;if(!m||m.x<0||m.x>d.transform.width||m.y<0||m.y>d.transform.height)return void this._clearFadeTimer();const T=d.unproject(m);let k;d._showingGlobe()&&s.isLngLatBehindGlobe(d.transform,this._lngLat)?k=0:(k=1-d._queryFogOpacity(T),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(k*=this._occludedOpacity)),this._element.style.opacity=`${k}`,this._element.style.pointerEvents=k>0?"auto":"none",this._popup&&this._popup._setOpacity(k),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${d.x}px,${d.y}px)
            ${Xh[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const d=this._pos,m=this._map,T=this.getPitchAlignment();if(!m||!d||T!=="map")return"";if(!m._showingGlobe()){const Q=m.getPitch();return Q?`rotateX(${Q}deg)`:""}const k=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),M=d.sub(s.globeCenterToScreenPoint(m.transform)),j=Math.abs(M.x)+Math.abs(M.y);if(j===0)return"";const W=k/j;return`rotateX(${-M.y*W}deg) rotateY(${M.x*W}deg)`}_calculateZTransform(){const d=this._pos,m=this._map;if(!m||!d)return"";let T=0;const k=this.getRotationAlignment();if(k==="map")if(m._showingGlobe()){const M=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),j=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(M);T=s.radToDeg(Math.atan2(j.y,j.x))-90}else T=-m.getBearing();else if(k==="horizon"){const M=s.smoothstep(4,6,m.getZoom()),j=s.globeCenterToScreenPoint(m.transform);j.y+=M*m.transform.height;const W=d.sub(j),Q=s.radToDeg(Math.atan2(W.y,W.x));T=(Q>90?Q-270:Q+90)*(1-M)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(d){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=am(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),d===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),m._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=s.pointGeometry.convert(d),this._update(),this}_onMove(d){const m=this._map;if(!m)return;const T=this._pointerdownPos,k=this._positionDelta;if(T&&k){if(!this._isDragging){const M=this._clickTolerance||m._clickTolerance;if(d.point.dist(T)<M)return;this._isDragging=!0}this._pos=d.point.sub(k),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(d){const m=this._map,T=this._pos;m&&T&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(T),this._pointerdownPos=d.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const m=this._map;return m&&(d?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const qy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zy=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function h_(y=new s.pointGeometry(0,0),d="bottom"){if(typeof y=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(d){case"top":return new s.pointGeometry(0,y);case"top-left":return new s.pointGeometry(m,m);case"top-right":return new s.pointGeometry(-m,m);case"bottom":return new s.pointGeometry(0,-y);case"bottom-left":return new s.pointGeometry(m,-m);case"bottom-right":return new s.pointGeometry(-m,-m);case"left":return new s.pointGeometry(y,0);case"right":return new s.pointGeometry(-y,0)}return new s.pointGeometry(0,0)}return y instanceof s.pointGeometry||Array.isArray(y)?s.pointGeometry.convert(y):s.pointGeometry.convert(y[d]||[0,0])}class Yy{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const m=s.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,m,T){this._start=this.getValue(m),this._end=d,this._startTime=m,this._endTime=m+T}}const Xy={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ky={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},f_={showCompass:!0,showZoom:!0,visualizePitch:!1};class Qy{constructor(d,m,T=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new wr({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,T&&(this.mousePitch=new au({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(d,m){this.mouseRotate.mousedown(d,m),this.mousePitch&&this.mousePitch.mousedown(d,m),U()}move(d,m){const T=this.map,k=this.mouseRotate.mousemoveWindow(d,m),M=k&&k.bearingDelta;if(M&&T.setBearing(T.getBearing()+M),this.mousePitch){const j=this.mousePitch.mousemoveWindow(d,m),W=j&&j.pitchDelta;W&&T.setPitch(T.getPitch()+W)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){H(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(s.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),ie(this.element,d)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,ie(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=oe(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=oe(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Jy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},e0={maxWidth:100,unit:"metric"};function t0(y,d,m){const T=um(d),k=T/d,M={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[m];this._map._requestDomTask(()=>{this._container.style.width=y*k+"px",this._container.innerHTML=`${T}&nbsp;${M}`})}function um(y){const d=Math.pow(10,`${Math.floor(y)}`.length-1);let m=y/d;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:m>=1?1:function(T){const k=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*k)/k}(m),d*m}const Qf={version:s.version,supported:_,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends om{constructor(y){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(y=s.extend({},Ky,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(y.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Li(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),y),this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._useWebGL2=y.useWebGL2,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._optimizeForTerrain=y.optimizeForTerrain,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new Kf,this._domRenderTaskQueue=new Kf,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Xy,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Yy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,typeof y.container=="string"){if(this._container=s.window.document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new lu(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,y.style&&this.setStyle(y.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this._hash=y.hash&&new K(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),y.attributionControl&&this.addControl(new c_({customAttribution:y.customAttribution})),this._logoControl=new d_,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new s.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new s.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(y,d){if(d===void 0&&(d=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=y.onAdd(this);this._controls.push(y);const T=this._controlPositions[d];return d.indexOf("bottom")!==-1?T.insertBefore(m,T.firstChild):T.appendChild(m),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(y);return d>-1&&this._controls.splice(d,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new s.Event("movestart",y)).fire(new s.Event("move",y)),this.fire(new s.Event("resize",y)),d&&this.fire(new s.Event("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(s.LngLatBounds.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?s.window.navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(d=>d==="auto"?s.window.navigator.language:d):y}setLanguage(y){const d=this._parseLanguage(y);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,d=y.projection.name;let m;d==="globe"&&y.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(y.setMercatorFromTransition(),m=!0):d==="mercator"&&y.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(y.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,d){return this._updateProjection(y||d||{name:"mercator"})}_updateProjection(y){let d;if(d=y.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(y){return this.transform.locationPoint3D(s.LngLat.convert(y))}unproject(y){return this.transform.pointLocation3D(s.pointGeometry.convert(y))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,d,m){if(y==="mouseenter"||y==="mouseover"){let T=!1;const k=j=>{const W=d.filter(le=>this.getLayer(le)),Q=W.length?this.queryRenderedFeatures(j.point,{layers:W}):[];Q.length?T||(T=!0,m.call(this,new je(y,this,j.originalEvent,{features:Q}))):T=!1},M=()=>{T=!1};return{layers:new Set(d),listener:m,delegates:{mousemove:k,mouseout:M}}}if(y==="mouseleave"||y==="mouseout"){let T=!1;const k=j=>{const W=d.filter(Q=>this.getLayer(Q));(W.length?this.queryRenderedFeatures(j.point,{layers:W}):[]).length?T=!0:T&&(T=!1,m.call(this,new je(y,this,j.originalEvent)))},M=j=>{T&&(T=!1,m.call(this,new je(y,this,j.originalEvent)))};return{layers:new Set(d),listener:m,delegates:{mousemove:k,mouseout:M}}}{const T=k=>{const M=d.filter(W=>this.getLayer(W)),j=M.length?this.queryRenderedFeatures(k.point,{layers:M}):[];j.length&&(k.features=j,m.call(this,k),delete k.features)};return{layers:new Set(d),listener:m,delegates:{[y]:T}}}}on(y,d,m){if(m===void 0)return super.on(y,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(y,d,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(T);for(const k in T.delegates)this.on(k,T.delegates[k]);return this}once(y,d,m){if(m===void 0)return super.once(y,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(y,d,m);for(const k in T.delegates)this.once(k,T.delegates[k]);return this}off(y,d,m){if(m===void 0)return super.off(y,d);d=new Set(Array.isArray(d)?d:[d]);const T=(M,j)=>{if(M.size!==j.size)return!1;for(const W of M)if(!j.has(W))return!1;return!0},k=this._delegatedListeners?this._delegatedListeners[y]:void 0;return k&&(M=>{for(let j=0;j<M.length;j++){const W=M[j];if(W.listener===m&&T(W.layers,d)){for(const Q in W.delegates)this.off(Q,W.delegates[Q]);return M.splice(j,1),this}}})(k),this}queryRenderedFeatures(y,d){return this.style?(d!==void 0||y===void 0||y instanceof s.pointGeometry||Array.isArray(y)||(d=y,y=void 0),this.style.queryRenderedFeatures(y=y||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(y,d){return this.style.querySourceFeatures(y,d)}setStyle(y,d){return(d=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&y?(this._diffStyle(y,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(y,d))}_getUIString(y){const d=this._locale[y];if(d==null)throw new Error(`Missing UI string '${y}'`);return d}_updateStyle(y,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y&&(this.style=new Ms(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y):this.style.loadJSON(y)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,d){if(typeof y=="string"){const m=this._requestManager.normalizeStyleURL(y),T=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(T,(k,M)=>{k?this.fire(new s.ErrorEvent(k)):M&&this._updateDiff(M,d)})}else typeof y=="object"&&this._updateDiff(y,d)}_updateDiff(y,d){try{this.style.setState(y)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(y,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(y,d){return this._lazyInitEmptyStyle(),this.style.addSource(y,d),this._update(!0)}isSourceLoaded(y){return!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){const y=this.style&&this.style._sourceCaches;for(const d in y){const m=y[d]._tiles;for(const T in m){const k=m[T];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(y,d,m){this._lazyInitEmptyStyle(),this.style.addSourceType(y,d,m)}removeSource(y){return this.style.removeSource(y),this._updateTerrain(),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,d,{pixelRatio:m=1,sdf:T=!1,stretchX:k,stretchY:M,content:j}={}){if(this._lazyInitEmptyStyle(),d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap){const{width:W,height:Q,data:le}=s.exported.getImageData(d);this.style.addImage(y,{data:new s.RGBAImage({width:W,height:Q},le),pixelRatio:m,stretchX:k,stretchY:M,content:j,sdf:T,version:0})}else if(d.width===void 0||d.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:W,height:Q}=d,le=d;this.style.addImage(y,{data:new s.RGBAImage({width:W,height:Q},new Uint8Array(le.data)),pixelRatio:m,stretchX:k,stretchY:M,content:j,sdf:T,version:0,userImage:le}),le.onAdd&&le.onAdd(this,y)}}updateImage(y,d){const m=this.style.getImage(y);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap?s.exported.getImageData(d):d,{width:k,height:M}=T;k!==void 0&&M!==void 0?k===m.data.width&&M===m.data.height?(m.data.replace(T.data,!(d instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&d instanceof s.window.ImageBitmap)),this.style.updateImage(y,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${k}, ${M})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,d){s.getImage(this._requestManager.transformRequest(y,s.ResourceType.Image),(m,T)=>{d(m,T instanceof s.window.HTMLImageElement?s.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(y,d){return this._lazyInitEmptyStyle(),this.style.addLayer(y,d),this._update(!0)}moveLayer(y,d){return this.style.moveLayer(y,d),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,d,m){return this.style.setLayerZoomRange(y,d,m),this._update(!0)}setFilter(y,d,m={}){return this.style.setFilter(y,d,m),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,d,m,T={}){return this.style.setPaintProperty(y,d,m,T),this._update(!0)}getPaintProperty(y,d){return this.style.getPaintProperty(y,d)}setLayoutProperty(y,d,m,T={}){return this.style.setLayoutProperty(y,d,m,T),this._update(!0)}getLayoutProperty(y,d){return this.style.getLayoutProperty(y,d)}setLight(y,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(y),this.transform):0}setFeatureState(y,d){return this.style.setFeatureState(y,d),this._update()}removeFeatureState(y,d){return this.style.removeFeatureState(y,d),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let m,T,k,M=this._container;for(;M&&(!T||!k);){const j=s.window.getComputedStyle(M).transform;j&&j!=="none"&&(m=j.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(T=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(k=m[3])),M=M.parentElement}this._containerWidth=T?Math.abs(y/T):y,this._containerHeight=k?Math.abs(d/k):d}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=E("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=E("div","mapboxgl-canvas-container",y);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=E("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=E("div","mapboxgl-control-container",y),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(k=>{T[k]=E("div",`mapboxgl-ctrl-${k}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,d){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(y),this._canvas.height=m*Math.ceil(d),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${d}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const d=this._markers.indexOf(y);d!==-1&&this._markers.splice(d,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const d=this._popups.indexOf(y);d!==-1&&this._popups.splice(d,1)}_setupPainter(){const y=s.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",y),m=d||this._canvas.getContext("webgl",y)||this._canvas.getContext("experimental-webgl",y);m?(this._useWebGL2&&!d&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new Qn(m,this.transform,!!d),this.on("data",T=>{T.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let d;const m=this.painter.context.extTimerQuery,T=s.exported.now();if(this.listens("gpu-timing-frame")&&(d=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const k=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,Q=this.transform.pitch,le=s.exported.now(),ae=new s.EvaluationParameters(W,{now:le,fadeDuration:k,pitch:Q,transition:this.style.getTransition()});this.style.update(ae)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,k,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const W=s.exported.now()-T;m.endQueryEXT(m.TIME_ELAPSED_EXT,d),setTimeout(()=>{const Q=m.getQueryObjectEXT(d,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(d),this.fire(new s.Event("gpu-timing-frame",{cpuTime:W,gpuTime:Q})),s.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:Q}})},50)}if(this.listens("gpu-timing-layer")){const W=this.painter.collectGpuTimers();setTimeout(()=>{const Q=this.painter.queryGpuTimers(W);this.fire(new s.Event("gpu-timing-layer",{layerTimes:Q}))},50)}if(this.listens("gpu-timing-deferred-render")){const W=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Q=this.painter.queryGpuTimeDeferredRender(W);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:Q}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(j||this._repaint)this.triggerRepaint();else{const W=!this.isMoving()&&this.loaded();if(W&&(M=this._updateAverageElevation(T,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),W&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Q=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:Q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const d of this._markers)y&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!y||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(y,d=!1){const m=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((d||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const T=this.transform.averageElevation;let k=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(k)?k=0:this._averageElevationLastSampledAt=y;const j=Math.abs(T-k);if(j>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(k),m(k);this._averageElevation.easeTo(k,y,300)}else if(j>1e-4)return this._averageElevation.jumpTo(k),m(k)}return!!this._averageElevation.isEasing(y)&&m(this._averageElevation.getValue(y))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===s.AUTH_ERR_MSG||y.status===401)){const d=this.painter.context.gl;s.storeAuthState(d,!1),this._logoControl instanceof d_&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const m=this.painter.context.gl,T=m.createFramebuffer();function k(M){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,M,0);const j=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,j),j}return m.bindFramebuffer(m.FRAMEBUFFER,T),this._canvasPixelComparison(k(y),d.canvasCopies.map(k),d.timeStamps)}_canvasPixelComparison(y,d,m){let T=m[1]-m[0];const k=y.length/4;for(let M=0;M<d.length;M++){const j=d[M];let W=0;for(let Q=0;Q<j.length;Q+=4)j[Q]===y[Q]&&j[Q+1]===y[Q+1]&&j[Q+2]===y[Q+2]&&j[Q+3]===y[Q+3]&&(W+=1);T+=(m[M+2]-m[M+1])*(1-W/k)}return T}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=s.exported.frame(d=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(d)}))}_preloadTiles(y){const d=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(d,(m,T)=>m._preloadTiles(y,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,y&&this._update())}_setCacheLimits(y,d){s.setCacheLimits(y,d)}get version(){return s.version}},NavigationControl:class{constructor(y){this.options=s.extend({},f_,y),this._container=E("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),E("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),E("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:d}):m.resetNorth({},{originalEvent:d}))}),this._compassIcon=E("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const d=y.getZoom(),m=d===y.getMaxZoom(),T=d===y.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qy(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,d){const m=E("button",y,this._container);return m.type="button",m.addEventListener("click",d),m}_setButtonTitle(y,d){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${d}`);y.setAttribute("aria-label",m),y.firstElementChild&&y.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(y){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Jy,y),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=F(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=E("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const d=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,y(m)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(m=>d(m.state!=="denied")).catch(()=>d()):d()}_isOutOfMapMaxBounds(y){const d=this._map.getMaxBounds(),m=y.coords;return!!d&&(m.longitude<d.getWest()||m.longitude>d.getEast()||m.latitude<d.getSouth()||m.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",y)),this._finish()}}_updateCamera(y){const d=new s.LngLat(y.coords.longitude,y.coords.latitude),m=y.coords.accuracy,T=this._map.getBearing(),k=s.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(m),k,{geolocateSource:!0})}_updateMarker(y){if(y){const d=new s.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,d=s.mercatorZfromAltitude(1,y._center.lat)*y.worldSize,m=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=E("button","mapboxgl-ctrl-geolocate",this._container),E("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E("div","mapboxgl-user-location"),this._dotElement.appendChild(E("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(E("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new lm({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=E("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(d=>{d==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:c_,ScaleControl:class{constructor(y){this.options=s.extend({},e0,y),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=t0.bind(this)),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,d=this._map,m=d._containerHeight/2,T=d._containerWidth/2-y/2,k=d.unproject([T,m]),M=d.unproject([T+y,m]),j=k.distanceTo(M);if(this.options.unit==="imperial"){const W=3.2808*j;W>5280?this._setScale(y,W/5280,"mile"):this._setScale(y,W,"foot")}else this.options.unit==="nautical"?this._setScale(y,j/1852,"nautical-mile"):j>=1e3?this._setScale(y,j/1e3,"kilometer"):this._setScale(y,j,"meter")}_setScale(y,d,m){const T=um(d),k=T/d;this._map._requestDomTask(()=>{this._container.style.width=y*k+"px",this._container.innerHTML=m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:m}).format(T):`${T}&nbsp;nm`})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=E("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y){this._fullscreen=!1,y&&y.container&&(y.container instanceof s.window.HTMLElement?this._container=y.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=E("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=E("button","mapboxgl-ctrl-fullscreen",this._controlContainer);E("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(y){super(),this.options=s.extend(Object.create(qy),y),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=s.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(s.window.document.createTextNode(y))}setHTML(y){const d=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let T;for(m.innerHTML=y;T=m.firstChild,T;)d.appendChild(T);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=E("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(y),this.options.closeButton){const m=this._closeButton=E("button","mapboxgl-popup-close-button",d);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let d;return this._classList.delete(y)?d=!1:(this._classList.add(y),d=!0),this._updateClassList(),d}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const d=this._map,m=this._container,T=this._pos;if(!d||!m||!T)return"bottom";const k=m.offsetWidth,M=m.offsetHeight,j=T.x<k/2,W=T.x>d.transform.width-k/2;if(T.y+y<M)return j?"top-left":W?"top-right":"top";if(T.y>d.transform.height-M){if(j)return"bottom-left";if(W)return"bottom-right"}return j?"left":W?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),y.className=d.join(" ")}_update(y){const d=this._map,m=this._content;if(!d||!this._lngLat&&!this._trackPointer||!m)return;let T=this._container;if(T||(T=this._container=E("div","mapboxgl-popup",d.getContainer()),this._tip=E("div","mapboxgl-popup-tip",T),T.appendChild(m)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=am(this._lngLat,this._pos,d.transform)),!this._trackPointer||y){const k=this._pos=this._trackPointer&&y?y:d.project(this._lngLat),M=h_(this.options.offset),j=this._anchor=this._getAnchor(M.y),W=h_(this.options.offset,j),Q=k.add(W).round();d._requestDomTask(()=>{this._container&&j&&(this._container.style.transform=`${Xh[j]} translate(${Q.x}px,${Q.y}px)`)})}if(!this._marker&&d._showingGlobe()){const k=s.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(k)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Zy);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:lm,Style:Ms,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:sa,Evented:s.Evented,config:s.config,prewarm:function(){Bi().acquire(Ji)},clearPrewarmedResources:function(){const y=Gi;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ji),Gi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(y){s.config.ACCESS_TOKEN=y},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(y){s.config.API_URL=y},get workerCount(){return Qi.workerCount},set workerCount(y){Qi.workerCount=y},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){s.config.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){s.clearTileCache(y)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Qf});var c=r;return c})})(gQ);const _S=gS;(function(){function t(i,n){var r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r]);return i}function e(i){if(!this||this.find!==e.prototype.find)return new e(i);if(this.length=0,i)if(typeof i=="string"&&(i=this.find(i)),i.nodeType||i===i.window)this.length=1,this[0]=i;else{var n=i.length;for(this.length=n;n;)n-=1,this[n]=i[n]}}e.extend=t,e.contains=function(i,n){do if(n=n.parentNode,n===i)return!0;while(n);return!1},e.parseJSON=function(i){return window.JSON&&JSON.parse(i)},t(e.prototype,{find:function(i){var n=this[0]||document;return typeof i=="string"&&(n.querySelectorAll?i=n.querySelectorAll(i):i.charAt(0)==="#"?i=n.getElementById(i.slice(1)):i=n.getElementsByTagName(i)),new e(i)},hasClass:function(i){return this[0]?new RegExp("(^|\\s+)"+i+"(\\s+|$)").test(this[0].className):!1},addClass:function(i){for(var n=this.length,r;n;){if(n-=1,r=this[n],!r.className)return r.className=i,this;if(this.hasClass(i))return this;r.className+=" "+i}return this},removeClass:function(i){for(var n=new RegExp("(^|\\s+)"+i+"(\\s+|$)"),r=this.length,a;r;)r-=1,a=this[r],a.className=a.className.replace(n," ");return this},on:function(i,n){for(var r=i.split(/\s+/),a,c;r.length;)for(i=r.shift(),a=this.length;a;)a-=1,c=this[a],c.addEventListener?c.addEventListener(i,n,!1):c.attachEvent&&c.attachEvent("on"+i,n);return this},off:function(i,n){for(var r=i.split(/\s+/),a,c;r.length;)for(i=r.shift(),a=this.length;a;)a-=1,c=this[a],c.removeEventListener?c.removeEventListener(i,n,!1):c.detachEvent&&c.detachEvent("on"+i,n);return this},empty:function(){for(var i=this.length,n;i;)for(i-=1,n=this[i];n.hasChildNodes();)n.removeChild(n.lastChild);return this},first:function(){return new e(this[0])}}),typeof define=="function"&&define.amd?define(function(){return e}):(window.blueimp=window.blueimp||{},window.blueimp.helper=e)})();(function(t){typeof define=="function"&&define.amd?define(["./blueimp-helper"],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))})(function(t){function e(i,n){if(document.body.style.maxHeight===void 0)return null;if(!this||this.options!==e.prototype.options)return new e(i,n);if(!i||!i.length){this.console.log("blueimp Gallery: No or empty list provided as first argument.",i);return}this.list=i,this.num=i.length,this.initOptions(n),this.initialize()}return t.extend(e.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"urlset",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,closeOnHashChange:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,slideshowDirection:"ltr",index:0,preloadRange:2,transitionDuration:300,slideshowTransitionDuration:500,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&typeof window.console.log=="function"?window.console:{log:function(){}},support:function(i){var n={touch:window.ontouchstart!==void 0||window.DocumentTouch&&document instanceof DocumentTouch},r={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},a;for(a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&i.style[a]!==void 0){n.transition=r[a],n.transition.name=a;break}function c(){var s=n.transition,p,_;document.body.appendChild(i),s&&(p=s.name.slice(0,-9)+"ransform",i.style[p]!==void 0&&(i.style[p]="translateZ(0)",_=window.getComputedStyle(i).getPropertyValue(s.prefix+"transform"),n.transform={prefix:s.prefix,name:p,translate:!0,translateZ:!!_&&_!=="none"})),i.style.backgroundSize!==void 0&&(n.backgroundSize={},i.style.backgroundSize="contain",n.backgroundSize.contain=window.getComputedStyle(i).getPropertyValue("background-size")==="contain",i.style.backgroundSize="cover",n.backgroundSize.cover=window.getComputedStyle(i).getPropertyValue("background-size")==="cover"),document.body.removeChild(i)}return document.body?c():t(document).on("DOMContentLoaded",c),n}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){if(this.initStartIndex(),this.initWidget()===!1)return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(i,n){window.clearTimeout(this.timeout);var r=this.index,a,c,s;if(!(r===i||this.num===1)){if(n||(n=this.options.transitionDuration),this.support.transform){for(this.options.continuous||(i=this.circle(i)),a=Math.abs(r-i)/(r-i),this.options.continuous&&(c=a,a=-this.positions[this.circle(i)]/this.slideWidth,a!==c&&(i=-a*this.num+i)),s=Math.abs(r-i)-1;s;)s-=1,this.move(this.circle((i>r?i:r)-s-1),this.slideWidth*a,0);i=this.circle(i),this.move(r,this.slideWidth*a,n),this.move(i,0,n),this.options.continuous&&this.move(this.circle(i-a),-(this.slideWidth*a),0)}else i=this.circle(i),this.animate(r*-this.slideWidth,i*-this.slideWidth,n);this.onslide(i)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(i){var n=this,r=this.index+(this.options.slideshowDirection==="rtl"?-1:1);window.clearTimeout(this.timeout),this.interval=i||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(a,c){n.animationFrameId=n.requestAnimationFrame.call(window,function(){n.slide(a,c)})},[r,this.options.slideshowTransitionDuration],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass)},add:function(i){var n;for(i.concat||(i=Array.prototype.slice.call(i)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(i),this.num=this.list.length,this.num>2&&this.options.continuous===null&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),n=this.num-i.length;n<this.num;n+=1)this.addSlide(n),this.positionSlide(n);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var i=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(i.displayClass).removeClass(i.singleClass).removeClass(i.leftEdgeClass).removeClass(i.rightEdgeClass),i.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var i=this;function n(r){r.target===i.container[0]&&(i.container.off(i.support.transition.end,n),i.handleClose())}this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,n),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(i){return(this.num+i%this.num)%this.num},move:function(i,n,r){this.translateX(i,n,r),this.positions[i]=n},translate:function(i,n,r,a){if(this.slides[i]){var c=this.slides[i].style,s=this.support.transition,p=this.support.transform;c[s.name+"Duration"]=a+"ms",c[p.name]="translate("+n+"px, "+r+"px)"+(p.translateZ?" translateZ(0)":"")}},translateX:function(i,n,r){this.translate(i,n,0,r)},translateY:function(i,n,r){this.translate(i,0,n,r)},animate:function(i,n,r){if(!r){this.slidesContainer[0].style.left=n+"px";return}var a=this,c=new Date().getTime(),s=window.setInterval(function(){var p=new Date().getTime()-c;if(p>r){a.slidesContainer[0].style.left=n+"px",a.ontransitionend(),window.clearInterval(s);return}a.slidesContainer[0].style.left=(n-i)*(Math.floor(p/r*100)/100)+i+"px"},4)},preventDefault:function(i){i.preventDefault?i.preventDefault():i.returnValue=!1},stopPropagation:function(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onhashchange:function(){this.options.closeOnHashChange&&this.close()},onmousedown:function(i){i.which&&i.which===1&&i.target.nodeName!=="VIDEO"&&i.target.nodeName!=="AUDIO"&&(i.preventDefault(),(i.originalEvent||i).touches=[{pageX:i.pageX,pageY:i.pageY}],this.ontouchstart(i))},onmousemove:function(i){this.touchStart&&((i.originalEvent||i).touches=[{pageX:i.pageX,pageY:i.pageY}],this.ontouchmove(i))},onmouseup:function(i){this.touchStart&&(this.ontouchend(i),delete this.touchStart)},onmouseout:function(i){if(this.touchStart){var n=i.target,r=i.relatedTarget;(!r||r!==n&&!t.contains(n,r))&&this.onmouseup(i)}},ontouchstart:function(i){this.options.stopTouchEventsPropagation&&this.stopPropagation(i);var n=(i.originalEvent||i).touches[0];this.touchStart={x:n.pageX,y:n.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(i){this.options.stopTouchEventsPropagation&&this.stopPropagation(i);var n=(i.originalEvent||i).touches,r=n[0],a=(i.originalEvent||i).scale,c=this.index,s,p;if(!(n.length>1||a&&a!==1))if(this.options.disableScroll&&i.preventDefault(),this.touchDelta={x:r.pageX-this.touchStart.x,y:r.pageY-this.touchStart.y},s=this.touchDelta.x,this.isScrolling===void 0&&(this.isScrolling=this.isScrolling||Math.abs(s)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.carousel||this.translateY(c,this.touchDelta.y+this.positions[c],0);else for(i.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?p=[this.circle(c+1),c,this.circle(c-1)]:(this.touchDelta.x=s=s/(!c&&s>0||c===this.num-1&&s<0?Math.abs(s)/this.slideWidth+1:1),p=[c],c&&p.push(c-1),c<this.num-1&&p.unshift(c+1));p.length;)c=p.pop(),this.translateX(c,s+this.positions[c],0)},ontouchend:function(i){this.options.stopTouchEventsPropagation&&this.stopPropagation(i);var n=this.index,r=Math.abs(this.touchDelta.x),a=this.slideWidth,c=Math.ceil(this.options.transitionDuration*(1-r/a)/2),s=r>20,p=!n&&this.touchDelta.x>0||n===this.num-1&&this.touchDelta.x<0,_=!s&&this.options.closeOnSwipeUpOrDown&&Math.abs(this.touchDelta.y)>20,b,S,E,I,R;this.options.continuous&&(p=!1),b=this.touchDelta.x<0?-1:1,this.isScrolling?_?this.close():this.translateY(n,0,c):s&&!p?(S=n+b,E=n-b,I=a*b,R=-a*b,this.options.continuous?(this.move(this.circle(S),I,0),this.move(this.circle(n-2*b),R,0)):S>=0&&S<this.num&&this.move(S,I,0),this.move(n,this.positions[n]+I,c),this.move(this.circle(E),this.positions[this.circle(E)]+I,c),n=this.circle(E),this.onslide(n)):this.options.continuous?(this.move(this.circle(n-1),-a,c),this.move(n,0,c),this.move(this.circle(n+1),a,c)):(n&&this.move(n-1,-a,c),this.move(n,0,c),n<this.num-1&&this.move(n+1,a,c))},ontouchcancel:function(i){this.touchStart&&(this.ontouchend(i),delete this.touchStart)},ontransitionend:function(i){var n=this.slides[this.index];(!i||n===i.target)&&(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,n]))},oncomplete:function(i){var n=i.target||i.srcElement,r=n&&n.parentNode,a;!n||!r||(a=this.getNodeIndex(r),t(r).removeClass(this.options.slideLoadingClass),i.type==="error"?(t(r).addClass(this.options.slideErrorClass),this.elements[a]=3):this.elements[a]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===r&&this.play(),this.setTimeout(this.options.onslidecomplete,[a,r]))},onload:function(i){this.oncomplete(i)},onerror:function(i){this.oncomplete(i)},onkeydown:function(i){switch(i.which||i.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(i),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),i.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(i),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(i),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(i),this.next());break}},handleClick:function(i){var n=this.options,r=i.target||i.srcElement,a=r.parentNode;function c(s){return t(r).hasClass(s)||t(a).hasClass(s)}c(n.toggleClass)?(this.preventDefault(i),this.toggleControls()):c(n.prevClass)?(this.preventDefault(i),this.prev()):c(n.nextClass)?(this.preventDefault(i),this.next()):c(n.closeClass)?(this.preventDefault(i),this.close()):c(n.playPauseClass)?(this.preventDefault(i),this.toggleSlideshow()):a===this.slidesContainer[0]?n.closeOnSlideClick?(this.preventDefault(i),this.close()):n.toggleControlsOnSlideClick&&(this.preventDefault(i),this.toggleControls()):a.parentNode&&a.parentNode===this.slidesContainer[0]&&n.toggleControlsOnSlideClick&&(this.preventDefault(i),this.toggleControls())},onclick:function(i){if(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)){delete this.touchDelta;return}return this.handleClick(i)},updateEdgeClasses:function(i){i?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),i===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(i){this.options.continuous||this.updateEdgeClasses(i),this.loadElements(i),this.options.unloadElements&&this.unloadElements(i),this.setTitle(i)},onslide:function(i){this.index=i,this.handleSlide(i),this.setTimeout(this.options.onslide,[i,this.slides[i]])},setTitle:function(i){var n=this.slides[i].firstChild,r=n.title||n.alt,a=this.titleElement;a.length&&(this.titleElement.empty(),r&&a[0].appendChild(document.createTextNode(r)))},setTimeout:function(i,n,r){var a=this;return i&&window.setTimeout(function(){i.apply(a,n||[])},r||0)},imageFactory:function(i,n){var r=this,a=this.imagePrototype.cloneNode(!1),c=i,s=this.options.stretchImages,p,_,b,S;function E(I){if(!p){if(I={type:I.type,target:_},!_.parentNode)return r.setTimeout(E,[I]);p=!0,t(a).off("load error",E),s&&I.type==="load"&&(_.style.background='url("'+c+'") center no-repeat',_.style.backgroundSize=s),n(I)}}return typeof c!="string"&&(c=this.getItemProperty(i,this.options.urlProperty),b=this.getItemProperty(i,this.options.titleProperty),S=this.getItemProperty(i,this.options.altTextProperty)||b),s===!0&&(s="contain"),s=this.support.backgroundSize&&this.support.backgroundSize[s]&&s,s?_=this.elementPrototype.cloneNode(!1):(_=a,a.draggable=!1),b&&(_.title=b),S&&(_.alt=S),t(a).on("load error",E),a.src=c,_},createElement:function(i,n){var r=i&&this.getItemProperty(i,this.options.typeProperty),a=r&&this[r.split("/")[0]+"Factory"]||this.imageFactory,c=i&&a.call(this,i,n),s=this.getItemProperty(i,this.options.srcsetProperty);return c||(c=this.elementPrototype.cloneNode(!1),this.setTimeout(n,[{type:"error",target:c}])),s&&c.setAttribute("srcset",s),t(c).addClass(this.options.slideContentClass),c},loadElement:function(i){this.elements[i]||(this.slides[i].firstChild?this.elements[i]=t(this.slides[i]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[i]=1,t(this.slides[i]).addClass(this.options.slideLoadingClass),this.slides[i].appendChild(this.createElement(this.list[i],this.proxyListener))))},loadElements:function(i){var n=Math.min(this.num,this.options.preloadRange*2+1),r=i,a;for(a=0;a<n;a+=1)r+=a*(a%2===0?-1:1),r=this.circle(r),this.loadElement(r)},unloadElements:function(i){var n,r;for(n in this.elements)Object.prototype.hasOwnProperty.call(this.elements,n)&&(r=Math.abs(i-n),r>this.options.preloadRange&&r+this.options.preloadRange<this.num&&(this.unloadSlide(n),delete this.elements[n]))},addSlide:function(i){var n=this.slidePrototype.cloneNode(!1);n.setAttribute("data-index",i),this.slidesContainer[0].appendChild(n),this.slides.push(n)},positionSlide:function(i){var n=this.slides[i];n.style.width=this.slideWidth+"px",this.support.transform&&(n.style.left=i*-this.slideWidth+"px",this.move(i,this.index>i?-this.slideWidth:this.index<i?this.slideWidth:0,0))},initSlides:function(i){var n,r;for(i||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,n=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",n&&this.resetSlides(),r=0;r<this.num;r+=1)n&&this.addSlide(r),this.positionSlide(r);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(i){var n,r;n=this.slides[i],r=n.firstChild,r!==null&&n.removeChild(r)},unloadAllSlides:function(){var i,n;for(i=0,n=this.slides.length;i<n;i++)this.unloadSlide(i)},toggleControls:function(){var i=this.options.controlsClass;this.container.hasClass(i)?this.container.removeClass(i):this.container.addClass(i)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(i){return parseInt(i.getAttribute("data-index"),10)},getNestedProperty:function(i,n){return n.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(r,a,c,s,p){var _=p||a||c||s&&parseInt(s,10);r&&i&&(i=i[_])}),i},getDataProperty:function(i,n){var r,a;if(i.dataset?(r=n.replace(/-([a-z])/g,function(c,s){return s.toUpperCase()}),a=i.dataset[r]):i.getAttribute&&(a=i.getAttribute("data-"+n.replace(/([A-Z])/g,"-$1").toLowerCase())),typeof a=="string"){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(a))try{return t.parseJSON(a)}catch{}return a}},getItemProperty:function(i,n){var r=this.getDataProperty(i,n);return r===void 0&&(r=i[n]),r===void 0&&(r=this.getNestedProperty(i,n)),r},initStartIndex:function(){var i=this.options.index,n=this.options.urlProperty,r;if(i&&typeof i!="number"){for(r=0;r<this.num;r+=1)if(this.list[r]===i||this.getItemProperty(this.list[r],n)===this.getItemProperty(i,n)){i=r;break}}this.index=this.circle(parseInt(i,10)||0)},initEventListeners:function(){var i=this,n=this.slidesContainer;function r(a){var c=i.support.transition&&i.support.transition.end===a.type?"transitionend":a.type;i["on"+c](a)}t(window).on("resize",r),t(window).on("hashchange",r),t(document.body).on("keydown",r),this.container.on("click",r),this.support.touch?n.on("touchstart touchmove touchend touchcancel",r):this.options.emulateTouchEvents&&this.support.transition&&n.on("mousedown mousemove mouseup mouseout",r),this.support.transition&&n.on(this.support.transition.end,r),this.proxyListener=r},destroyEventListeners:function(){var i=this.slidesContainer,n=this.proxyListener;t(window).off("resize",n),t(document.body).off("keydown",n),this.container.off("click",n),this.support.touch?i.off("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&i.off("mousedown mousemove mouseup mouseout",n),this.support.transition&&i.off(this.support.transition.end,n)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var i=this;function n(r){r.target===i.container[0]&&(i.container.off(i.support.transition.end,n),i.handleOpen())}if(this.container=t(this.options.container),!this.container.length)return this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1;if(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),!this.slidesContainer.length)return this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1;this.titleElement=this.container.find(this.options.titleElement).first(),this.num===1&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,n):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),this.container.addClass(this.options.displayClass)},initOptions:function(i){this.options=t.extend({},this.options),(i&&i.carousel||this.options.carousel&&(!i||i.carousel!==!1))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,i),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e});const _Q=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));(function(t){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(t,e){var i=e.prototype;t.extend(i.options,{fullScreen:!1});var n=i.initialize,r=i.close;return t.extend(i,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){n.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),r.call(this)}}),e});(function(t){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(t,e){var i=e.prototype;t.extend(i.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var n=i.handleSlide;return t.extend(i,{handleSlide:function(r){n.call(this,r),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(r,a,c){var s=this,p=this.options,_=this.elementPrototype.cloneNode(!1),b=t(_),S=[{type:"error",target:_}],E=c||document.createElement("video"),I=this.getItemProperty(r,p.urlProperty),R=this.getItemProperty(r,p.typeProperty),V=this.getItemProperty(r,p.titleProperty),q=this.getItemProperty(r,this.options.altTextProperty)||V,U=this.getItemProperty(r,p.videoPosterProperty),H,Z=this.getItemProperty(r,p.videoSourcesProperty),ne,ie,oe,pe;if(b.addClass(p.videoContentClass),V&&(_.title=V),E.canPlayType){if(I&&R&&E.canPlayType(R))E.src=I;else if(Z){for(;Z.length;)if(ne=Z.shift(),I=this.getItemProperty(ne,p.urlProperty),R=this.getItemProperty(ne,p.typeProperty),I&&R&&E.canPlayType(R)){E.src=I;break}}}return U&&(E.poster=U,H=this.imagePrototype.cloneNode(!1),t(H).addClass(p.toggleClass),H.src=U,H.draggable=!1,H.alt=q,_.appendChild(H)),ie=document.createElement("a"),ie.setAttribute("target","_blank"),c||ie.setAttribute("download",V),ie.href=I,E.src&&(E.controls=!0,(c||t(E)).on("error",function(){s.setTimeout(a,S)}).on("pause",function(){E.seeking||(oe=!1,b.removeClass(s.options.videoLoadingClass).removeClass(s.options.videoPlayingClass),pe&&s.container.addClass(s.options.controlsClass),delete s.playingVideo,s.interval&&s.play())}).on("playing",function(){oe=!1,b.removeClass(s.options.videoLoadingClass).addClass(s.options.videoPlayingClass),s.container.hasClass(s.options.controlsClass)?(pe=!0,s.container.removeClass(s.options.controlsClass)):pe=!1}).on("play",function(){window.clearTimeout(s.timeout),oe=!0,b.addClass(s.options.videoLoadingClass),s.playingVideo=E}),t(ie).on("click",function(de){s.preventDefault(de),oe?E.pause():E.play()}),_.appendChild(c&&c.element||E)),_.appendChild(ie),this.setTimeout(a,[{type:"load",target:_}]),_}}),e});(function(t){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(t,e){if(!window.postMessage)return e;var i=e.prototype;t.extend(i.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var n=i.textFactory||i.imageFactory,r=function(a,c,s){this.videoId=a,this.playerVars=c,this.clickToPlay=s,this.element=document.createElement("div"),this.listeners={}};return t.extend(r.prototype,{canPlayType:function(){return!0},on:function(a,c){return this.listeners[a]=c,this},loadAPI:function(){var a=this,c=window.onYouTubeIframeAPIReady,s="//www.youtube.com/iframe_api",p=document.getElementsByTagName("script"),_=p.length,b;for(window.onYouTubeIframeAPIReady=function(){c&&c.apply(this),a.playOnReady&&a.play()};_;)if(_-=1,p[_].src===s)return;b=document.createElement("script"),b.src=s,p[0].parentNode.insertBefore(b,p[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){i.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(a){switch(a.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause();break}this.stateChange=a.data},onError:function(a){this.listeners.error(a)},play:function(){var a=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){a.onReady()},onStateChange:function(c){a.onStateChange(c)},onError:function(c){a.onError(c)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(i,{YouTubePlayer:r,textFactory:function(a,c){var s=this.options,p=this.getItemProperty(a,s.youTubeVideoIdProperty);return p?(this.getItemProperty(a,s.urlProperty)===void 0&&(a[s.urlProperty]="//www.youtube.com/watch?v="+p),this.getItemProperty(a,s.videoPosterProperty)===void 0&&(a[s.videoPosterProperty]="//img.youtube.com/vi/"+p+"/maxresdefault.jpg"),this.videoFactory(a,c,new r(p,s.youTubePlayerVars,s.youTubeClickToPlay))):n.call(this,a,c)}}),e});(function(t){typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(t,e){if(!window.postMessage)return e;var i=e.prototype;t.extend(i.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var n=i.textFactory||i.imageFactory,r=function(c,s,p,_){this.url=c,this.videoId=s,this.playerId=p,this.clickToPlay=_,this.element=document.createElement("div"),this.listeners={}},a=0;return t.extend(r.prototype,{canPlayType:function(){return!0},on:function(c,s){return this.listeners[c]=s,this},loadAPI:function(){var c=this,s="//f.vimeocdn.com/js/froogaloop2.min.js",p=document.getElementsByTagName("script"),_=p.length,b,S;function E(){!S&&c.playOnReady&&c.play(),S=!0}for(;_;)if(_-=1,p[_].src===s){b=p[_];break}b||(b=document.createElement("script"),b.src=s),t(b).on("load",E),p[0].parentNode.insertBefore(b,p[0]),/loaded|complete/.test(b.readyState)&&E()},onReady:function(){var c=this;this.ready=!0,this.player.addEvent("play",function(){c.hasPlayed=!0,c.onPlaying()}),this.player.addEvent("pause",function(){c.onPause()}),this.player.addEvent("finish",function(){c.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var c=document.createElement("iframe");c.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),c.id=this.playerId,this.element.parentNode.replaceChild(c,this.element),this.element=c},play:function(){var c=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){c.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(i,{VimeoPlayer:r,textFactory:function(c,s){var p=this.options,_=this.getItemProperty(c,p.vimeoVideoIdProperty);return _?(this.getItemProperty(c,p.urlProperty)===void 0&&(c[p.urlProperty]="//vimeo.com/"+_),a+=1,this.videoFactory(c,s,new r(p.vimeoPlayerUrl,_,p.vimeoPlayerIdPrefix+a,p.vimeoClickToPlay))):n.call(this,c,s)}}),e});const Kn=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i},vQ={props:{images:{type:Array,default(){return[]}},options:{type:Object,default(){return{}}},carousel:{type:Boolean,default:!1},index:{type:Number},id:{type:String,default:"blueimp-gallery"}},data(){return{instance:null}},watch:{index(t){this.carousel||(t!==null?this.open(t):(this.instance&&this.instance.close(),this.$emit("close")))}},mounted(){this.carousel&&this.open()},destroyed(){this.instance!==null&&(this.instance.destroyEventListeners(),this.instance.close(),this.instance=null)},methods:{open(t=0){const e=typeof window.blueimp<"u"&&typeof window.blueimp.Gallery<"u"?window.blueimp.Gallery:_Q,i=Object.assign({toggleControlsOnReturn:!1,toggleControlsOnSlideClick:!1,closeOnSlideClick:!1,carousel:this.carousel,container:`#${this.id}`,index:t,onopen:()=>this.$emit("onopen"),onopened:()=>this.$emit("onopened"),onslide:this.onSlideCustom,onslideend:(n,r)=>this.$emit("onslideend",{index:n,slide:r}),onslidecomplete:(n,r)=>this.$emit("onslidecomplete",{index:n,slide:r}),onclose:()=>this.$emit("close"),onclosed:()=>this.$emit("onclosed")},this.options);this.carousel&&(i.container=this.$el),this.instance=e(this.images,i)},onSlideCustom(t,e){this.$emit("onslide",{index:t,slide:e});const i=this.images[t];if(i!==void 0){const n=i.description,r=this.instance.container.find(".description");n&&(r.empty(),r[0].appendChild(document.createTextNode(n)))}}}},yQ=["id"],bQ=Pe("div",{class:"slides"},null,-1),xQ=Pe("h3",{class:"title"},null,-1),wQ=Pe("p",{class:"description"},null,-1),TQ={class:"prev"},SQ={class:"next"},CQ={key:0,class:"close"},kQ={key:1,class:"indicator"},EQ={key:2,class:"play-pause"};function IQ(t,e,i,n,r,a){return be(),ti("div",{id:i.id,class:Zs(["blueimp-gallery blueimp-gallery-controls",{"blueimp-gallery-carousel":i.carousel}])},[bQ,xQ,wQ,Pe("a",TQ,[$d(t.$slots,"prev",{},()=>[ye("‹")])]),Pe("a",SQ,[$d(t.$slots,"next",{},()=>[ye("›")])]),i.carousel?We("",!0):(be(),ti("a",CQ,[$d(t.$slots,"close",{},()=>[ye("×")])])),i.carousel?We("",!0):(be(),ti("ol",kQ)),i.carousel?(be(),ti("a",EQ)):We("",!0)],10,yQ)}const PQ=Kn(vQ,[["render",IQ]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const jm=typeof window<"u";function AQ(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Jr=Object.assign;function WT(t,e){const i={};for(const n in e){const r=e[n];i[n]=rd(r)?r.map(t):t(r)}return i}const Lv=()=>{},rd=Array.isArray,MQ=/\/$/,OQ=t=>t.replace(MQ,"");function qT(t,e,i="/"){let n,r={},a="",c="";const s=e.indexOf("#");let p=e.indexOf("?");return s<p&&s>=0&&(p=-1),p>-1&&(n=e.slice(0,p),a=e.slice(p+1,s>-1?s:e.length),r=t(a)),s>-1&&(n=n||e.slice(0,s),c=e.slice(s,e.length)),n=BQ(n??e,i),{fullPath:n+(a&&"?")+a+c,path:n,query:r,hash:c}}function LQ(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function lO(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function DQ(t,e,i){const n=e.matched.length-1,r=i.matched.length-1;return n>-1&&n===r&&Mg(e.matched[n],i.matched[r])&&rF(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function Mg(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rF(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!RQ(t[i],e[i]))return!1;return!0}function RQ(t,e){return rd(t)?uO(t,e):rd(e)?uO(e,t):t===e}function uO(t,e){return rd(e)?t.length===e.length&&t.every((i,n)=>i===e[n]):t.length===1&&t[0]===e}function BQ(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),n=t.split("/");let r=i.length-1,a,c;for(a=0;a<n.length;a++)if(c=n[a],c!==".")if(c==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var ay;(function(t){t.pop="pop",t.push="push"})(ay||(ay={}));var Dv;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Dv||(Dv={}));function FQ(t){if(!t)if(jm){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),OQ(t)}const $Q=/^[^#]+#/;function NQ(t,e){return t.replace($Q,"#")+e}function zQ(t,e){const i=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-i.left-(e.left||0),top:n.top-i.top-(e.top||0)}}const zx=()=>({left:window.pageXOffset,top:window.pageYOffset});function VQ(t){let e;if("el"in t){const i=t.el,n=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?n?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;e=zQ(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function cO(t,e){return(history.state?history.state.position-e:-1)+t}const vS=new Map;function UQ(t,e){vS.set(t,e)}function jQ(t){const e=vS.get(t);return vS.delete(t),e}let HQ=()=>location.protocol+"//"+location.host;function sF(t,e){const{pathname:i,search:n,hash:r}=e,a=t.indexOf("#");if(a>-1){let s=r.includes(t.slice(a))?t.slice(a).length:1,p=r.slice(s);return p[0]!=="/"&&(p="/"+p),lO(p,"")}return lO(i,t)+n+r}function GQ(t,e,i,n){let r=[],a=[],c=null;const s=({state:E})=>{const I=sF(t,location),R=i.value,V=e.value;let q=0;if(E){if(i.value=I,e.value=E,c&&c===R){c=null;return}q=V?E.position-V.position:0}else n(I);r.forEach(U=>{U(i.value,R,{delta:q,type:ay.pop,direction:q?q>0?Dv.forward:Dv.back:Dv.unknown})})};function p(){c=i.value}function _(E){r.push(E);const I=()=>{const R=r.indexOf(E);R>-1&&r.splice(R,1)};return a.push(I),I}function b(){const{history:E}=window;E.state&&E.replaceState(Jr({},E.state,{scroll:zx()}),"")}function S(){for(const E of a)E();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",b),{pauseListeners:p,listen:_,destroy:S}}function dO(t,e,i,n=!1,r=!1){return{back:t,current:e,forward:i,replaced:n,position:window.history.length,scroll:r?zx():null}}function WQ(t){const{history:e,location:i}=window,n={value:sF(t,i)},r={value:e.state};r.value||a(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(p,_,b){const S=t.indexOf("#"),E=S>-1?(i.host&&document.querySelector("base")?t:t.slice(S))+p:HQ()+t+p;try{e[b?"replaceState":"pushState"](_,"",E),r.value=_}catch(I){console.error(I),i[b?"replace":"assign"](E)}}function c(p,_){const b=Jr({},e.state,dO(r.value.back,p,r.value.forward,!0),_,{position:r.value.position});a(p,b,!0),n.value=p}function s(p,_){const b=Jr({},r.value,e.state,{forward:p,scroll:zx()});a(b.current,b,!0);const S=Jr({},dO(n.value,p,null),{position:b.position+1},_);a(p,S,!1),n.value=p}return{location:n,state:r,push:s,replace:c}}function qQ(t){t=FQ(t);const e=WQ(t),i=GQ(t,e.state,e.location,e.replace);function n(a,c=!0){c||i.pauseListeners(),history.go(a)}const r=Jr({location:"",base:t,go:n,createHref:NQ.bind(null,t)},e,i);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ZQ(t){return typeof t=="string"||t&&typeof t=="object"}function oF(t){return typeof t=="string"||typeof t=="symbol"}const pf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},aF=Symbol("");var hO;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(hO||(hO={}));function Og(t,e){return Jr(new Error,{type:t,[aF]:!0},e)}function fh(t,e){return t instanceof Error&&aF in t&&(e==null||!!(t.type&e))}const fO="[^/]+?",YQ={sensitive:!1,strict:!1,start:!0,end:!0},XQ=/[.+*?^${}()[\]/\\]/g;function KQ(t,e){const i=Jr({},YQ,e),n=[];let r=i.start?"^":"";const a=[];for(const _ of t){const b=_.length?[]:[90];i.strict&&!_.length&&(r+="/");for(let S=0;S<_.length;S++){const E=_[S];let I=40+(i.sensitive?.25:0);if(E.type===0)S||(r+="/"),r+=E.value.replace(XQ,"\\$&"),I+=40;else if(E.type===1){const{value:R,repeatable:V,optional:q,regexp:U}=E;a.push({name:R,repeatable:V,optional:q});const H=U||fO;if(H!==fO){I+=10;try{new RegExp(`(${H})`)}catch(ne){throw new Error(`Invalid custom RegExp for param "${R}" (${H}): `+ne.message)}}let Z=V?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;S||(Z=q&&_.length<2?`(?:/${Z})`:"/"+Z),q&&(Z+="?"),r+=Z,I+=20,q&&(I+=-8),V&&(I+=-20),H===".*"&&(I+=-50)}b.push(I)}n.push(b)}if(i.strict&&i.end){const _=n.length-1;n[_][n[_].length-1]+=.7000000000000001}i.strict||(r+="/?"),i.end?r+="$":i.strict&&(r+="(?:/|$)");const c=new RegExp(r,i.sensitive?"":"i");function s(_){const b=_.match(c),S={};if(!b)return null;for(let E=1;E<b.length;E++){const I=b[E]||"",R=a[E-1];S[R.name]=I&&R.repeatable?I.split("/"):I}return S}function p(_){let b="",S=!1;for(const E of t){(!S||!b.endsWith("/"))&&(b+="/"),S=!1;for(const I of E)if(I.type===0)b+=I.value;else if(I.type===1){const{value:R,repeatable:V,optional:q}=I,U=R in _?_[R]:"";if(rd(U)&&!V)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const H=rd(U)?U.join("/"):U;if(!H)if(q)E.length<2&&(b.endsWith("/")?b=b.slice(0,-1):S=!0);else throw new Error(`Missing required param "${R}"`);b+=H}}return b||"/"}return{re:c,score:n,keys:a,parse:s,stringify:p}}function QQ(t,e){let i=0;for(;i<t.length&&i<e.length;){const n=e[i]-t[i];if(n)return n;i++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function JQ(t,e){let i=0;const n=t.score,r=e.score;for(;i<n.length&&i<r.length;){const a=QQ(n[i],r[i]);if(a)return a;i++}if(Math.abs(r.length-n.length)===1){if(pO(n))return 1;if(pO(r))return-1}return r.length-n.length}function pO(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const eJ={type:0,value:""},tJ=/[a-zA-Z0-9_]/;function iJ(t){if(!t)return[[]];if(t==="/")return[[eJ]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(I){throw new Error(`ERR (${i})/"${_}": ${I}`)}let i=0,n=i;const r=[];let a;function c(){a&&r.push(a),a=[]}let s=0,p,_="",b="";function S(){_&&(i===0?a.push({type:0,value:_}):i===1||i===2||i===3?(a.length>1&&(p==="*"||p==="+")&&e(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:_,regexp:b,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):e("Invalid state to consume buffer"),_="")}function E(){_+=p}for(;s<t.length;){if(p=t[s++],p==="\\"&&i!==2){n=i,i=4;continue}switch(i){case 0:p==="/"?(_&&S(),c()):p===":"?(S(),i=1):E();break;case 4:E(),i=n;break;case 1:p==="("?i=2:tJ.test(p)?E():(S(),i=0,p!=="*"&&p!=="?"&&p!=="+"&&s--);break;case 2:p===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+p:i=3:b+=p;break;case 3:S(),i=0,p!=="*"&&p!=="?"&&p!=="+"&&s--,b="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${_}"`),S(),c(),r}function nJ(t,e,i){const n=KQ(iJ(t.path),i),r=Jr(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function rJ(t,e){const i=[],n=new Map;e=_O({strict:!1,end:!0,sensitive:!1},e);function r(b){return n.get(b)}function a(b,S,E){const I=!E,R=sJ(b);R.aliasOf=E&&E.record;const V=_O(e,b),q=[R];if("alias"in b){const Z=typeof b.alias=="string"?[b.alias]:b.alias;for(const ne of Z)q.push(Jr({},R,{components:E?E.record.components:R.components,path:ne,aliasOf:E?E.record:R}))}let U,H;for(const Z of q){const{path:ne}=Z;if(S&&ne[0]!=="/"){const ie=S.record.path,oe=ie[ie.length-1]==="/"?"":"/";Z.path=S.record.path+(ne&&oe+ne)}if(U=nJ(Z,S,V),E?E.alias.push(U):(H=H||U,H!==U&&H.alias.push(U),I&&b.name&&!gO(U)&&c(b.name)),R.children){const ie=R.children;for(let oe=0;oe<ie.length;oe++)a(ie[oe],U,E&&E.children[oe])}E=E||U,(U.record.components&&Object.keys(U.record.components).length||U.record.name||U.record.redirect)&&p(U)}return H?()=>{c(H)}:Lv}function c(b){if(oF(b)){const S=n.get(b);S&&(n.delete(b),i.splice(i.indexOf(S),1),S.children.forEach(c),S.alias.forEach(c))}else{const S=i.indexOf(b);S>-1&&(i.splice(S,1),b.record.name&&n.delete(b.record.name),b.children.forEach(c),b.alias.forEach(c))}}function s(){return i}function p(b){let S=0;for(;S<i.length&&JQ(b,i[S])>=0&&(b.record.path!==i[S].record.path||!lF(b,i[S]));)S++;i.splice(S,0,b),b.record.name&&!gO(b)&&n.set(b.record.name,b)}function _(b,S){let E,I={},R,V;if("name"in b&&b.name){if(E=n.get(b.name),!E)throw Og(1,{location:b});V=E.record.name,I=Jr(mO(S.params,E.keys.filter(H=>!H.optional).map(H=>H.name)),b.params&&mO(b.params,E.keys.map(H=>H.name))),R=E.stringify(I)}else if("path"in b)R=b.path,E=i.find(H=>H.re.test(R)),E&&(I=E.parse(R),V=E.record.name);else{if(E=S.name?n.get(S.name):i.find(H=>H.re.test(S.path)),!E)throw Og(1,{location:b,currentLocation:S});V=E.record.name,I=Jr({},S.params,b.params),R=E.stringify(I)}const q=[];let U=E;for(;U;)q.unshift(U.record),U=U.parent;return{name:V,path:R,params:I,matched:q,meta:aJ(q)}}return t.forEach(b=>a(b)),{addRoute:a,resolve:_,removeRoute:c,getRoutes:s,getRecordMatcher:r}}function mO(t,e){const i={};for(const n of e)n in t&&(i[n]=t[n]);return i}function sJ(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:oJ(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function oJ(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const n in t.components)e[n]=typeof i=="boolean"?i:i[n];return e}function gO(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function aJ(t){return t.reduce((e,i)=>Jr(e,i.meta),{})}function _O(t,e){const i={};for(const n in t)i[n]=n in e?e[n]:t[n];return i}function lF(t,e){return e.children.some(i=>i===t||lF(t,i))}const uF=/#/g,lJ=/&/g,uJ=/\//g,cJ=/=/g,dJ=/\?/g,cF=/\+/g,hJ=/%5B/g,fJ=/%5D/g,dF=/%5E/g,pJ=/%60/g,hF=/%7B/g,mJ=/%7C/g,fF=/%7D/g,gJ=/%20/g;function Hk(t){return encodeURI(""+t).replace(mJ,"|").replace(hJ,"[").replace(fJ,"]")}function _J(t){return Hk(t).replace(hF,"{").replace(fF,"}").replace(dF,"^")}function yS(t){return Hk(t).replace(cF,"%2B").replace(gJ,"+").replace(uF,"%23").replace(lJ,"%26").replace(pJ,"`").replace(hF,"{").replace(fF,"}").replace(dF,"^")}function vJ(t){return yS(t).replace(cJ,"%3D")}function yJ(t){return Hk(t).replace(uF,"%23").replace(dJ,"%3F")}function bJ(t){return t==null?"":yJ(t).replace(uJ,"%2F")}function Sb(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function xJ(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const a=n[r].replace(cF," "),c=a.indexOf("="),s=Sb(c<0?a:a.slice(0,c)),p=c<0?null:Sb(a.slice(c+1));if(s in e){let _=e[s];rd(_)||(_=e[s]=[_]),_.push(p)}else e[s]=p}return e}function vO(t){let e="";for(let i in t){const n=t[i];if(i=vJ(i),n==null){n!==void 0&&(e+=(e.length?"&":"")+i);continue}(rd(n)?n.map(a=>a&&yS(a)):[n&&yS(n)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+i,a!=null&&(e+="="+a))})}return e}function wJ(t){const e={};for(const i in t){const n=t[i];n!==void 0&&(e[i]=rd(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const TJ=Symbol(""),yO=Symbol(""),Gk=Symbol(""),pF=Symbol(""),bS=Symbol("");function ov(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function i(){t=[]}return{add:e,list:()=>t,reset:i}}function yf(t,e,i,n,r){const a=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((c,s)=>{const p=S=>{S===!1?s(Og(4,{from:i,to:e})):S instanceof Error?s(S):ZQ(S)?s(Og(2,{from:e,to:S})):(a&&n.enterCallbacks[r]===a&&typeof S=="function"&&a.push(S),c())},_=t.call(n&&n.instances[r],e,i,p);let b=Promise.resolve(_);t.length<3&&(b=b.then(p)),b.catch(S=>s(S))})}function ZT(t,e,i,n){const r=[];for(const a of t)for(const c in a.components){let s=a.components[c];if(!(e!=="beforeRouteEnter"&&!a.instances[c]))if(SJ(s)){const _=(s.__vccOpts||s)[e];_&&r.push(yf(_,i,n,a,c))}else{let p=s();r.push(()=>p.then(_=>{if(!_)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${a.path}"`));const b=AQ(_)?_.default:_;a.components[c]=b;const E=(b.__vccOpts||b)[e];return E&&yf(E,i,n,a,c)()}))}}return r}function SJ(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function bO(t){const e=qi(Gk),i=qi(pF),n=Me(()=>e.resolve(Da(t.to))),r=Me(()=>{const{matched:p}=n.value,{length:_}=p,b=p[_-1],S=i.matched;if(!b||!S.length)return-1;const E=S.findIndex(Mg.bind(null,b));if(E>-1)return E;const I=xO(p[_-2]);return _>1&&xO(b)===I&&S[S.length-1].path!==I?S.findIndex(Mg.bind(null,p[_-2])):E}),a=Me(()=>r.value>-1&&IJ(i.params,n.value.params)),c=Me(()=>r.value>-1&&r.value===i.matched.length-1&&rF(i.params,n.value.params));function s(p={}){return EJ(p)?e[Da(t.replace)?"replace":"push"](Da(t.to)).catch(Lv):Promise.resolve()}return{route:n,href:Me(()=>n.value.href),isActive:a,isExactActive:c,navigate:s}}const CJ=qn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:bO,setup(t,{slots:e}){const i=Bo(bO(t)),{options:n}=qi(Gk),r=Me(()=>({[wO(t.activeClass,n.linkActiveClass,"router-link-active")]:i.isActive,[wO(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const a=e.default&&e.default(i);return t.custom?a:Ns("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},a)}}}),kJ=CJ;function EJ(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function IJ(t,e){for(const i in e){const n=e[i],r=t[i];if(typeof n=="string"){if(n!==r)return!1}else if(!rd(r)||r.length!==n.length||n.some((a,c)=>a!==r[c]))return!1}return!0}function xO(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const wO=(t,e,i)=>t??e??i,PJ=qn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const n=qi(bS),r=Me(()=>t.route||n.value),a=qi(yO,0),c=Me(()=>{let _=Da(a);const{matched:b}=r.value;let S;for(;(S=b[_])&&!S.components;)_++;return _}),s=Me(()=>r.value.matched[c.value]);Mn(yO,Me(()=>c.value+1)),Mn(TJ,s),Mn(bS,r);const p=lt();return Fi(()=>[p.value,s.value,t.name],([_,b,S],[E,I,R])=>{b&&(b.instances[S]=_,I&&I!==b&&_&&_===E&&(b.leaveGuards.size||(b.leaveGuards=I.leaveGuards),b.updateGuards.size||(b.updateGuards=I.updateGuards))),_&&b&&(!I||!Mg(b,I)||!E)&&(b.enterCallbacks[S]||[]).forEach(V=>V(_))},{flush:"post"}),()=>{const _=r.value,b=t.name,S=s.value,E=S&&S.components[b];if(!E)return TO(i.default,{Component:E,route:_});const I=S.props[b],R=I?I===!0?_.params:typeof I=="function"?I(_):I:null,q=Ns(E,Jr({},R,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(S.instances[b]=null)},ref:p}));return TO(i.default,{Component:q,route:_})||q}}});function TO(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const mF=PJ;function AJ(t){const e=rJ(t.routes,t),i=t.parseQuery||xJ,n=t.stringifyQuery||vO,r=t.history,a=ov(),c=ov(),s=ov(),p=Tf(pf);let _=pf;jm&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=WT.bind(null,Fe=>""+Fe),S=WT.bind(null,bJ),E=WT.bind(null,Sb);function I(Fe,tt){let Rt,Xt;return oF(Fe)?(Rt=e.getRecordMatcher(Fe),Xt=tt):Xt=Fe,e.addRoute(Xt,Rt)}function R(Fe){const tt=e.getRecordMatcher(Fe);tt&&e.removeRoute(tt)}function V(){return e.getRoutes().map(Fe=>Fe.record)}function q(Fe){return!!e.getRecordMatcher(Fe)}function U(Fe,tt){if(tt=Jr({},tt||p.value),typeof Fe=="string"){const Ve=qT(i,Fe,tt.path),dt=e.resolve({path:Ve.path},tt),kt=r.createHref(Ve.fullPath);return Jr(Ve,dt,{params:E(dt.params),hash:Sb(Ve.hash),redirectedFrom:void 0,href:kt})}let Rt;if("path"in Fe)Rt=Jr({},Fe,{path:qT(i,Fe.path,tt.path).path});else{const Ve=Jr({},Fe.params);for(const dt in Ve)Ve[dt]==null&&delete Ve[dt];Rt=Jr({},Fe,{params:S(Fe.params)}),tt.params=S(tt.params)}const Xt=e.resolve(Rt,tt),Ei=Fe.hash||"";Xt.params=b(E(Xt.params));const Ni=LQ(n,Jr({},Fe,{hash:_J(Ei),path:Xt.path})),Vi=r.createHref(Ni);return Jr({fullPath:Ni,hash:Ei,query:n===vO?wJ(Fe.query):Fe.query||{}},Xt,{redirectedFrom:void 0,href:Vi})}function H(Fe){return typeof Fe=="string"?qT(i,Fe,p.value.path):Jr({},Fe)}function Z(Fe,tt){if(_!==Fe)return Og(8,{from:tt,to:Fe})}function ne(Fe){return pe(Fe)}function ie(Fe){return ne(Jr(H(Fe),{replace:!0}))}function oe(Fe){const tt=Fe.matched[Fe.matched.length-1];if(tt&&tt.redirect){const{redirect:Rt}=tt;let Xt=typeof Rt=="function"?Rt(Fe):Rt;return typeof Xt=="string"&&(Xt=Xt.includes("?")||Xt.includes("#")?Xt=H(Xt):{path:Xt},Xt.params={}),Jr({query:Fe.query,hash:Fe.hash,params:"path"in Xt?{}:Fe.params},Xt)}}function pe(Fe,tt){const Rt=_=U(Fe),Xt=p.value,Ei=Fe.state,Ni=Fe.force,Vi=Fe.replace===!0,Ve=oe(Rt);if(Ve)return pe(Jr(H(Ve),{state:typeof Ve=="object"?Jr({},Ei,Ve.state):Ei,force:Ni,replace:Vi}),tt||Rt);const dt=Rt;dt.redirectedFrom=tt;let kt;return!Ni&&DQ(n,Xt,Rt)&&(kt=Og(16,{to:dt,from:Xt}),Tt(Xt,Xt,!0,!1)),(kt?Promise.resolve(kt):fe(dt,Xt)).catch(Xe=>fh(Xe)?fh(Xe,2)?Xe:ft(Xe):gt(Xe,dt,Xt)).then(Xe=>{if(Xe){if(fh(Xe,2))return pe(Jr({replace:Vi},H(Xe.to),{state:typeof Xe.to=="object"?Jr({},Ei,Xe.to.state):Ei,force:Ni}),tt||dt)}else Xe=we(dt,Xt,!0,Vi,Ei);return ge(dt,Xt,Xe),Xe})}function de(Fe,tt){const Rt=Z(Fe,tt);return Rt?Promise.reject(Rt):Promise.resolve()}function fe(Fe,tt){let Rt;const[Xt,Ei,Ni]=MJ(Fe,tt);Rt=ZT(Xt.reverse(),"beforeRouteLeave",Fe,tt);for(const Ve of Xt)Ve.leaveGuards.forEach(dt=>{Rt.push(yf(dt,Fe,tt))});const Vi=de.bind(null,Fe,tt);return Rt.push(Vi),zm(Rt).then(()=>{Rt=[];for(const Ve of a.list())Rt.push(yf(Ve,Fe,tt));return Rt.push(Vi),zm(Rt)}).then(()=>{Rt=ZT(Ei,"beforeRouteUpdate",Fe,tt);for(const Ve of Ei)Ve.updateGuards.forEach(dt=>{Rt.push(yf(dt,Fe,tt))});return Rt.push(Vi),zm(Rt)}).then(()=>{Rt=[];for(const Ve of Fe.matched)if(Ve.beforeEnter&&!tt.matched.includes(Ve))if(rd(Ve.beforeEnter))for(const dt of Ve.beforeEnter)Rt.push(yf(dt,Fe,tt));else Rt.push(yf(Ve.beforeEnter,Fe,tt));return Rt.push(Vi),zm(Rt)}).then(()=>(Fe.matched.forEach(Ve=>Ve.enterCallbacks={}),Rt=ZT(Ni,"beforeRouteEnter",Fe,tt),Rt.push(Vi),zm(Rt))).then(()=>{Rt=[];for(const Ve of c.list())Rt.push(yf(Ve,Fe,tt));return Rt.push(Vi),zm(Rt)}).catch(Ve=>fh(Ve,8)?Ve:Promise.reject(Ve))}function ge(Fe,tt,Rt){for(const Xt of s.list())Xt(Fe,tt,Rt)}function we(Fe,tt,Rt,Xt,Ei){const Ni=Z(Fe,tt);if(Ni)return Ni;const Vi=tt===pf,Ve=jm?history.state:{};Rt&&(Xt||Vi?r.replace(Fe.fullPath,Jr({scroll:Vi&&Ve&&Ve.scroll},Ei)):r.push(Fe.fullPath,Ei)),p.value=Fe,Tt(Fe,tt,Rt,Vi),ft()}let Ie;function Oe(){Ie||(Ie=r.listen((Fe,tt,Rt)=>{if(!Qt.listening)return;const Xt=U(Fe),Ei=oe(Xt);if(Ei){pe(Jr(Ei,{replace:!0}),Xt).catch(Lv);return}_=Xt;const Ni=p.value;jm&&UQ(cO(Ni.fullPath,Rt.delta),zx()),fe(Xt,Ni).catch(Vi=>fh(Vi,12)?Vi:fh(Vi,2)?(pe(Vi.to,Xt).then(Ve=>{fh(Ve,20)&&!Rt.delta&&Rt.type===ay.pop&&r.go(-1,!1)}).catch(Lv),Promise.reject()):(Rt.delta&&r.go(-Rt.delta,!1),gt(Vi,Xt,Ni))).then(Vi=>{Vi=Vi||we(Xt,Ni,!1),Vi&&(Rt.delta&&!fh(Vi,8)?r.go(-Rt.delta,!1):Rt.type===ay.pop&&fh(Vi,20)&&r.go(-1,!1)),ge(Xt,Ni,Vi)}).catch(Lv)}))}let ke=ov(),Ee=ov(),Qe;function gt(Fe,tt,Rt){ft(Fe);const Xt=Ee.list();return Xt.length?Xt.forEach(Ei=>Ei(Fe,tt,Rt)):console.error(Fe),Promise.reject(Fe)}function nt(){return Qe&&p.value!==pf?Promise.resolve():new Promise((Fe,tt)=>{ke.add([Fe,tt])})}function ft(Fe){return Qe||(Qe=!Fe,Oe(),ke.list().forEach(([tt,Rt])=>Fe?Rt(Fe):tt()),ke.reset()),Fe}function Tt(Fe,tt,Rt,Xt){const{scrollBehavior:Ei}=t;if(!jm||!Ei)return Promise.resolve();const Ni=!Rt&&jQ(cO(Fe.fullPath,0))||(Xt||!Rt)&&history.state&&history.state.scroll||null;return Cn().then(()=>Ei(Fe,tt,Ni)).then(Vi=>Vi&&VQ(Vi)).catch(Vi=>gt(Vi,Fe,tt))}const pt=Fe=>r.go(Fe);let et;const Mt=new Set,Qt={currentRoute:p,listening:!0,addRoute:I,removeRoute:R,hasRoute:q,getRoutes:V,resolve:U,options:t,push:ne,replace:ie,go:pt,back:()=>pt(-1),forward:()=>pt(1),beforeEach:a.add,beforeResolve:c.add,afterEach:s.add,onError:Ee.add,isReady:nt,install(Fe){const tt=this;Fe.component("RouterLink",kJ),Fe.component("RouterView",mF),Fe.config.globalProperties.$router=tt,Object.defineProperty(Fe.config.globalProperties,"$route",{enumerable:!0,get:()=>Da(p)}),jm&&!et&&p.value===pf&&(et=!0,ne(r.location).catch(Ei=>{}));const Rt={};for(const Ei in pf)Rt[Ei]=Me(()=>p.value[Ei]);Fe.provide(Gk,tt),Fe.provide(pF,Bo(Rt)),Fe.provide(bS,p);const Xt=Fe.unmount;Mt.add(Fe),Fe.unmount=function(){Mt.delete(Fe),Mt.size<1&&(_=pf,Ie&&Ie(),Ie=null,p.value=pf,et=!1,Qe=!1),Xt()}}};return Qt}function zm(t){return t.reduce((e,i)=>e.then(()=>i()),Promise.resolve())}function MJ(t,e){const i=[],n=[],r=[],a=Math.max(e.matched.length,t.matched.length);for(let c=0;c<a;c++){const s=e.matched[c];s&&(t.matched.find(_=>Mg(_,s))?n.push(s):i.push(s));const p=t.matched[c];p&&(e.matched.find(_=>Mg(_,p))||r.push(p))}return[i,n,r]}const OJ={components:{},data(){return{checkMessage:!1,warningString:"",errorMessages:[],distanceCovered:0}},beforeMount(){},mounted(){},methods:{message(t){t!=""&&(this.checkMessage=!0,this.warningString=t,this.errorMessages.push(this.warningString))}}},LJ=Object.assign(OJ,{__name:"App",setup(t){const e={accountSid:"AC4ccca83cec05e9642dffab547274c9ec",flexFlowSid:"FO1301cf4cafc4dbde58289b1ff4fa52d9",showTrayOnInactive:!0,colorTheme:{overrides:{EntryPoint:{Container:{background:"#0AFD01",color:"#000000"}}}},componentProps:{MainHeader:{titleText:"Welcome To dlivrd Help",showTitle:!0,imageUrl:"https://dlivrd-auto-driver-onboard.herokuapp.com/fav_logo_dlivrd.png"},EntryPoint:{tagline:"Chat With Dlivrd"},MessagingCanvas:{showTypingIndicator:!0,showReadStatus:!0,showWelcomeMessage:!1}},startEngagementOnInit:!1};return Twilio.FlexWebChat.MessagingCanvas.defaultProps.predefinedMessage={body:"Welcome to Expedite, How can I help you ?",authorName:"Agent"},Twilio.FlexWebChat.renderWebChat(e),(i,n)=>(be(),He(Da(mF),{style:{width:"100vw"}}))}}),DJ=Kn(LJ,[["__scopeId","data-v-7201c795"]]);const RJ={},BJ={class:"item"},FJ={class:"details"},$J={class:"text_header_color",style:{"margin-top":"15px"}};function NJ(t,e){return be(),ti("div",BJ,[Pe("div",FJ,[Pe("h3",$J,[$d(t.$slots,"heading",{},void 0,!0)]),$d(t.$slots,"default",{},void 0,!0)])])}const sm=Kn(RJ,[["render",NJ],["__scopeId","data-v-ae734db5"]]);function gF(t,e){return function(){return t.apply(e,arguments)}}const{toString:_F}=Object.prototype,{getPrototypeOf:Wk}=Object,qk=(t=>e=>{const i=_F.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Gh=t=>(t=t.toLowerCase(),e=>qk(e)===t),Vx=t=>e=>typeof e===t,{isArray:n_}=Array,ly=Vx("undefined");function zJ(t){return t!==null&&!ly(t)&&t.constructor!==null&&!ly(t.constructor)&&Bf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vF=Gh("ArrayBuffer");function VJ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vF(t.buffer),e}const UJ=Vx("string"),Bf=Vx("function"),yF=Vx("number"),Zk=t=>t!==null&&typeof t=="object",jJ=t=>t===!0||t===!1,E1=t=>{if(qk(t)!=="object")return!1;const e=Wk(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},HJ=Gh("Date"),GJ=Gh("File"),WJ=Gh("Blob"),qJ=Gh("FileList"),ZJ=t=>Zk(t)&&Bf(t.pipe),YJ=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||_F.call(t)===e||Bf(t.toString)&&t.toString()===e)},XJ=Gh("URLSearchParams"),KJ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function By(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),n_(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const a=i?Object.getOwnPropertyNames(t):Object.keys(t),c=a.length;let s;for(n=0;n<c;n++)s=a[n],e.call(null,t[s],s,t)}}function bF(t,e){e=e.toLowerCase();const i=Object.keys(t);let n=i.length,r;for(;n-- >0;)if(r=i[n],e===r.toLowerCase())return r;return null}const xF=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),wF=t=>!ly(t)&&t!==xF;function xS(){const{caseless:t}=wF(this)&&this||{},e={},i=(n,r)=>{const a=t&&bF(e,r)||r;E1(e[a])&&E1(n)?e[a]=xS(e[a],n):E1(n)?e[a]=xS({},n):n_(n)?e[a]=n.slice():e[a]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&By(arguments[n],i);return e}const QJ=(t,e,i,{allOwnKeys:n}={})=>(By(e,(r,a)=>{i&&Bf(r)?t[a]=gF(r,i):t[a]=r},{allOwnKeys:n}),t),JJ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eee=(t,e,i,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},tee=(t,e,i,n)=>{let r,a,c;const s={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),a=r.length;a-- >0;)c=r[a],(!n||n(c,t,e))&&!s[c]&&(e[c]=t[c],s[c]=!0);t=i!==!1&&Wk(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},iee=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const n=t.indexOf(e,i);return n!==-1&&n===i},nee=t=>{if(!t)return null;if(n_(t))return t;let e=t.length;if(!yF(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},ree=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Wk(Uint8Array)),see=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const a=r.value;e.call(t,a[0],a[1])}},oee=(t,e)=>{let i;const n=[];for(;(i=t.exec(e))!==null;)n.push(i);return n},aee=Gh("HTMLFormElement"),lee=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,r){return n.toUpperCase()+r}),SO=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),uee=Gh("RegExp"),TF=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),n={};By(i,(r,a)=>{e(r,a,t)!==!1&&(n[a]=r)}),Object.defineProperties(t,n)},cee=t=>{TF(t,(e,i)=>{if(Bf(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=t[i];if(Bf(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},dee=(t,e)=>{const i={},n=r=>{r.forEach(a=>{i[a]=!0})};return n_(t)?n(t):n(String(t).split(e)),i},hee=()=>{},fee=(t,e)=>(t=+t,Number.isFinite(t)?t:e),XT="abcdefghijklmnopqrstuvwxyz",CO="0123456789",SF={DIGIT:CO,ALPHA:XT,ALPHA_DIGIT:XT+XT.toUpperCase()+CO},pee=(t=16,e=SF.ALPHA_DIGIT)=>{let i="";const{length:n}=e;for(;t--;)i+=e[Math.random()*n|0];return i};function mee(t){return!!(t&&Bf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const gee=t=>{const e=new Array(10),i=(n,r)=>{if(Zk(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const a=n_(n)?[]:{};return By(n,(c,s)=>{const p=i(c,r+1);!ly(p)&&(a[s]=p)}),e[r]=void 0,a}}return n};return i(t,0)},pi={isArray:n_,isArrayBuffer:vF,isBuffer:zJ,isFormData:YJ,isArrayBufferView:VJ,isString:UJ,isNumber:yF,isBoolean:jJ,isObject:Zk,isPlainObject:E1,isUndefined:ly,isDate:HJ,isFile:GJ,isBlob:WJ,isRegExp:uee,isFunction:Bf,isStream:ZJ,isURLSearchParams:XJ,isTypedArray:ree,isFileList:qJ,forEach:By,merge:xS,extend:QJ,trim:KJ,stripBOM:JJ,inherits:eee,toFlatObject:tee,kindOf:qk,kindOfTest:Gh,endsWith:iee,toArray:nee,forEachEntry:see,matchAll:oee,isHTMLForm:aee,hasOwnProperty:SO,hasOwnProp:SO,reduceDescriptors:TF,freezeMethods:cee,toObjectSet:dee,toCamelCase:lee,noop:hee,toFiniteNumber:fee,findKey:bF,global:xF,isContextDefined:wF,ALPHABET:SF,generateString:pee,isSpecCompliantForm:mee,toJSONObject:gee};function Pr(t,e,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}pi.inherits(Pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pi.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const CF=Pr.prototype,kF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kF[t]={value:t}});Object.defineProperties(Pr,kF);Object.defineProperty(CF,"isAxiosError",{value:!0});Pr.from=(t,e,i,n,r,a)=>{const c=Object.create(CF);return pi.toFlatObject(t,c,function(p){return p!==Error.prototype},s=>s!=="isAxiosError"),Pr.call(c,t.message,e,i,n,r),c.cause=t,c.name=t.name,a&&Object.assign(c,a),c};const _ee=null;function wS(t){return pi.isPlainObject(t)||pi.isArray(t)}function EF(t){return pi.endsWith(t,"[]")?t.slice(0,-2):t}function kO(t,e,i){return t?t.concat(e).map(function(r,a){return r=EF(r),!i&&a?"["+r+"]":r}).join(i?".":""):e}function vee(t){return pi.isArray(t)&&!t.some(wS)}const yee=pi.toFlatObject(pi,{},null,function(e){return/^is[A-Z]/.test(e)});function Ux(t,e,i){if(!pi.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=pi.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,q){return!pi.isUndefined(q[V])});const n=i.metaTokens,r=i.visitor||b,a=i.dots,c=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&pi.isSpecCompliantForm(e);if(!pi.isFunction(r))throw new TypeError("visitor must be a function");function _(R){if(R===null)return"";if(pi.isDate(R))return R.toISOString();if(!p&&pi.isBlob(R))throw new Pr("Blob is not supported. Use a Buffer instead.");return pi.isArrayBuffer(R)||pi.isTypedArray(R)?p&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function b(R,V,q){let U=R;if(R&&!q&&typeof R=="object"){if(pi.endsWith(V,"{}"))V=n?V:V.slice(0,-2),R=JSON.stringify(R);else if(pi.isArray(R)&&vee(R)||(pi.isFileList(R)||pi.endsWith(V,"[]"))&&(U=pi.toArray(R)))return V=EF(V),U.forEach(function(Z,ne){!(pi.isUndefined(Z)||Z===null)&&e.append(c===!0?kO([V],ne,a):c===null?V:V+"[]",_(Z))}),!1}return wS(R)?!0:(e.append(kO(q,V,a),_(R)),!1)}const S=[],E=Object.assign(yee,{defaultVisitor:b,convertValue:_,isVisitable:wS});function I(R,V){if(!pi.isUndefined(R)){if(S.indexOf(R)!==-1)throw Error("Circular reference detected in "+V.join("."));S.push(R),pi.forEach(R,function(U,H){(!(pi.isUndefined(U)||U===null)&&r.call(e,U,pi.isString(H)?H.trim():H,V,E))===!0&&I(U,V?V.concat(H):[H])}),S.pop()}}if(!pi.isObject(t))throw new TypeError("data must be an object");return I(t),e}function EO(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Yk(t,e){this._pairs=[],t&&Ux(t,this,e)}const IF=Yk.prototype;IF.append=function(e,i){this._pairs.push([e,i])};IF.toString=function(e){const i=e?function(n){return e.call(this,n,EO)}:EO;return this._pairs.map(function(r){return i(r[0])+"="+i(r[1])},"").join("&")};function bee(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function PF(t,e,i){if(!e)return t;const n=i&&i.encode||bee,r=i&&i.serialize;let a;if(r?a=r(e,i):a=pi.isURLSearchParams(e)?e.toString():new Yk(e,i).toString(n),a){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class xee{constructor(){this.handlers=[]}use(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){pi.forEach(this.handlers,function(n){n!==null&&e(n)})}}const IO=xee,AF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wee=typeof URLSearchParams<"u"?URLSearchParams:Yk,Tee=typeof FormData<"u"?FormData:null,See=typeof Blob<"u"?Blob:null,Cee=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),kee=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Fd={isBrowser:!0,classes:{URLSearchParams:wee,FormData:Tee,Blob:See},isStandardBrowserEnv:Cee,isStandardBrowserWebWorkerEnv:kee,protocols:["http","https","file","blob","url","data"]};function Eee(t,e){return Ux(t,new Fd.classes.URLSearchParams,Object.assign({visitor:function(i,n,r,a){return Fd.isNode&&pi.isBuffer(i)?(this.append(n,i.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Iee(t){return pi.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Pee(t){const e={},i=Object.keys(t);let n;const r=i.length;let a;for(n=0;n<r;n++)a=i[n],e[a]=t[a];return e}function MF(t){function e(i,n,r,a){let c=i[a++];const s=Number.isFinite(+c),p=a>=i.length;return c=!c&&pi.isArray(r)?r.length:c,p?(pi.hasOwnProp(r,c)?r[c]=[r[c],n]:r[c]=n,!s):((!r[c]||!pi.isObject(r[c]))&&(r[c]=[]),e(i,n,r[c],a)&&pi.isArray(r[c])&&(r[c]=Pee(r[c])),!s)}if(pi.isFormData(t)&&pi.isFunction(t.entries)){const i={};return pi.forEachEntry(t,(n,r)=>{e(Iee(n),r,i,0)}),i}return null}const Aee={"Content-Type":void 0};function Mee(t,e,i){if(pi.isString(t))try{return(e||JSON.parse)(t),pi.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}const jx={transitional:AF,adapter:["xhr","http"],transformRequest:[function(e,i){const n=i.getContentType()||"",r=n.indexOf("application/json")>-1,a=pi.isObject(e);if(a&&pi.isHTMLForm(e)&&(e=new FormData(e)),pi.isFormData(e))return r&&r?JSON.stringify(MF(e)):e;if(pi.isArrayBuffer(e)||pi.isBuffer(e)||pi.isStream(e)||pi.isFile(e)||pi.isBlob(e))return e;if(pi.isArrayBufferView(e))return e.buffer;if(pi.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Eee(e,this.formSerializer).toString();if((s=pi.isFileList(e))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ux(s?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||r?(i.setContentType("application/json",!1),Mee(e)):e}],transformResponse:[function(e){const i=this.transitional||jx.transitional,n=i&&i.forcedJSONParsing,r=this.responseType==="json";if(e&&pi.isString(e)&&(n&&!this.responseType||r)){const c=!(i&&i.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(s){if(c)throw s.name==="SyntaxError"?Pr.from(s,Pr.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fd.classes.FormData,Blob:Fd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};pi.forEach(["delete","get","head"],function(e){jx.headers[e]={}});pi.forEach(["post","put","patch"],function(e){jx.headers[e]=pi.merge(Aee)});const Xk=jx,Oee=pi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lee=t=>{const e={};let i,n,r;return t&&t.split(`
`).forEach(function(c){r=c.indexOf(":"),i=c.substring(0,r).trim().toLowerCase(),n=c.substring(r+1).trim(),!(!i||e[i]&&Oee[i])&&(i==="set-cookie"?e[i]?e[i].push(n):e[i]=[n]:e[i]=e[i]?e[i]+", "+n:n)}),e},PO=Symbol("internals");function av(t){return t&&String(t).trim().toLowerCase()}function I1(t){return t===!1||t==null?t:pi.isArray(t)?t.map(I1):String(t)}function Dee(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(t);)e[n[1]]=n[2];return e}const Ree=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function KT(t,e,i,n,r){if(pi.isFunction(n))return n.call(this,e,i);if(r&&(e=i),!!pi.isString(e)){if(pi.isString(n))return e.indexOf(n)!==-1;if(pi.isRegExp(n))return n.test(e)}}function Bee(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,n)=>i.toUpperCase()+n)}function Fee(t,e){const i=pi.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+i,{value:function(r,a,c){return this[n].call(this,e,r,a,c)},configurable:!0})})}class Hx{constructor(e){e&&this.set(e)}set(e,i,n){const r=this;function a(s,p,_){const b=av(p);if(!b)throw new Error("header name must be a non-empty string");const S=pi.findKey(r,b);(!S||r[S]===void 0||_===!0||_===void 0&&r[S]!==!1)&&(r[S||p]=I1(s))}const c=(s,p)=>pi.forEach(s,(_,b)=>a(_,b,p));return pi.isPlainObject(e)||e instanceof this.constructor?c(e,i):pi.isString(e)&&(e=e.trim())&&!Ree(e)?c(Lee(e),i):e!=null&&a(i,e,n),this}get(e,i){if(e=av(e),e){const n=pi.findKey(this,e);if(n){const r=this[n];if(!i)return r;if(i===!0)return Dee(r);if(pi.isFunction(i))return i.call(this,r,n);if(pi.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=av(e),e){const n=pi.findKey(this,e);return!!(n&&this[n]!==void 0&&(!i||KT(this,this[n],n,i)))}return!1}delete(e,i){const n=this;let r=!1;function a(c){if(c=av(c),c){const s=pi.findKey(n,c);s&&(!i||KT(n,n[s],s,i))&&(delete n[s],r=!0)}}return pi.isArray(e)?e.forEach(a):a(e),r}clear(e){const i=Object.keys(this);let n=i.length,r=!1;for(;n--;){const a=i[n];(!e||KT(this,this[a],a,e,!0))&&(delete this[a],r=!0)}return r}normalize(e){const i=this,n={};return pi.forEach(this,(r,a)=>{const c=pi.findKey(n,a);if(c){i[c]=I1(r),delete i[a];return}const s=e?Bee(a):String(a).trim();s!==a&&delete i[a],i[s]=I1(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return pi.forEach(this,(n,r)=>{n!=null&&n!==!1&&(i[r]=e&&pi.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const n=new this(e);return i.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[PO]=this[PO]={accessors:{}}).accessors,r=this.prototype;function a(c){const s=av(c);n[s]||(Fee(r,c),n[s]=!0)}return pi.isArray(e)?e.forEach(a):a(e),this}}Hx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pi.freezeMethods(Hx.prototype);pi.freezeMethods(Hx);const Sh=Hx;function QT(t,e){const i=this||Xk,n=e||i,r=Sh.from(n.headers);let a=n.data;return pi.forEach(t,function(s){a=s.call(i,a,r.normalize(),e?e.status:void 0)}),r.normalize(),a}function OF(t){return!!(t&&t.__CANCEL__)}function Fy(t,e,i){Pr.call(this,t??"canceled",Pr.ERR_CANCELED,e,i),this.name="CanceledError"}pi.inherits(Fy,Pr,{__CANCEL__:!0});function $ee(t,e,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?t(i):e(new Pr("Request failed with status code "+i.status,[Pr.ERR_BAD_REQUEST,Pr.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Nee=Fd.isStandardBrowserEnv?function(){return{write:function(i,n,r,a,c,s){const p=[];p.push(i+"="+encodeURIComponent(n)),pi.isNumber(r)&&p.push("expires="+new Date(r).toGMTString()),pi.isString(a)&&p.push("path="+a),pi.isString(c)&&p.push("domain="+c),s===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(i){const n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function zee(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Vee(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function LF(t,e){return t&&!zee(e)?Vee(t,e):e}const Uee=Fd.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let n;function r(a){let c=a;return e&&(i.setAttribute("href",c),c=i.href),i.setAttribute("href",c),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(c){const s=pi.isString(c)?r(c):c;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function jee(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Hee(t,e){t=t||10;const i=new Array(t),n=new Array(t);let r=0,a=0,c;return e=e!==void 0?e:1e3,function(p){const _=Date.now(),b=n[a];c||(c=_),i[r]=p,n[r]=_;let S=a,E=0;for(;S!==r;)E+=i[S++],S=S%t;if(r=(r+1)%t,r===a&&(a=(a+1)%t),_-c<e)return;const I=b&&_-b;return I?Math.round(E*1e3/I):void 0}}function AO(t,e){let i=0;const n=Hee(50,250);return r=>{const a=r.loaded,c=r.lengthComputable?r.total:void 0,s=a-i,p=n(s),_=a<=c;i=a;const b={loaded:a,total:c,progress:c?a/c:void 0,bytes:s,rate:p||void 0,estimated:p&&c&&_?(c-a)/p:void 0,event:r};b[e?"download":"upload"]=!0,t(b)}}const Gee=typeof XMLHttpRequest<"u",Wee=Gee&&function(t){return new Promise(function(i,n){let r=t.data;const a=Sh.from(t.headers).normalize(),c=t.responseType;let s;function p(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}pi.isFormData(r)&&(Fd.isStandardBrowserEnv||Fd.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);let _=new XMLHttpRequest;if(t.auth){const I=t.auth.username||"",R=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(I+":"+R))}const b=LF(t.baseURL,t.url);_.open(t.method.toUpperCase(),PF(b,t.params,t.paramsSerializer),!0),_.timeout=t.timeout;function S(){if(!_)return;const I=Sh.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),V={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:I,config:t,request:_};$ee(function(U){i(U),p()},function(U){n(U),p()},V),_=null}if("onloadend"in _?_.onloadend=S:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(S)},_.onabort=function(){_&&(n(new Pr("Request aborted",Pr.ECONNABORTED,t,_)),_=null)},_.onerror=function(){n(new Pr("Network Error",Pr.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let R=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const V=t.transitional||AF;t.timeoutErrorMessage&&(R=t.timeoutErrorMessage),n(new Pr(R,V.clarifyTimeoutError?Pr.ETIMEDOUT:Pr.ECONNABORTED,t,_)),_=null},Fd.isStandardBrowserEnv){const I=(t.withCredentials||Uee(b))&&t.xsrfCookieName&&Nee.read(t.xsrfCookieName);I&&a.set(t.xsrfHeaderName,I)}r===void 0&&a.setContentType(null),"setRequestHeader"in _&&pi.forEach(a.toJSON(),function(R,V){_.setRequestHeader(V,R)}),pi.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),c&&c!=="json"&&(_.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&_.addEventListener("progress",AO(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",AO(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=I=>{_&&(n(!I||I.type?new Fy(null,t,_):I),_.abort(),_=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const E=jee(b);if(E&&Fd.protocols.indexOf(E)===-1){n(new Pr("Unsupported protocol "+E+":",Pr.ERR_BAD_REQUEST,t));return}_.send(r||null)})},P1={http:_ee,xhr:Wee};pi.forEach(P1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const qee={getAdapter:t=>{t=pi.isArray(t)?t:[t];const{length:e}=t;let i,n;for(let r=0;r<e&&(i=t[r],!(n=pi.isString(i)?P1[i.toLowerCase()]:i));r++);if(!n)throw n===!1?new Pr(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(pi.hasOwnProp(P1,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!pi.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:P1};function JT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fy(null,t)}function MO(t){return JT(t),t.headers=Sh.from(t.headers),t.data=QT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qee.getAdapter(t.adapter||Xk.adapter)(t).then(function(n){return JT(t),n.data=QT.call(t,t.transformResponse,n),n.headers=Sh.from(n.headers),n},function(n){return OF(n)||(JT(t),n&&n.response&&(n.response.data=QT.call(t,t.transformResponse,n.response),n.response.headers=Sh.from(n.response.headers))),Promise.reject(n)})}const OO=t=>t instanceof Sh?t.toJSON():t;function Lg(t,e){e=e||{};const i={};function n(_,b,S){return pi.isPlainObject(_)&&pi.isPlainObject(b)?pi.merge.call({caseless:S},_,b):pi.isPlainObject(b)?pi.merge({},b):pi.isArray(b)?b.slice():b}function r(_,b,S){if(pi.isUndefined(b)){if(!pi.isUndefined(_))return n(void 0,_,S)}else return n(_,b,S)}function a(_,b){if(!pi.isUndefined(b))return n(void 0,b)}function c(_,b){if(pi.isUndefined(b)){if(!pi.isUndefined(_))return n(void 0,_)}else return n(void 0,b)}function s(_,b,S){if(S in e)return n(_,b);if(S in t)return n(void 0,_)}const p={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:s,headers:(_,b)=>r(OO(_),OO(b),!0)};return pi.forEach(Object.keys(t).concat(Object.keys(e)),function(b){const S=p[b]||r,E=S(t[b],e[b],b);pi.isUndefined(E)&&S!==s||(i[b]=E)}),i}const DF="1.3.5",Kk={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Kk[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const LO={};Kk.transitional=function(e,i,n){function r(a,c){return"[Axios v"+DF+"] Transitional option '"+a+"'"+c+(n?". "+n:"")}return(a,c,s)=>{if(e===!1)throw new Pr(r(c," has been removed"+(i?" in "+i:"")),Pr.ERR_DEPRECATED);return i&&!LO[c]&&(LO[c]=!0,console.warn(r(c," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(a,c,s):!0}};function Zee(t,e,i){if(typeof t!="object")throw new Pr("options must be an object",Pr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const a=n[r],c=e[a];if(c){const s=t[a],p=s===void 0||c(s,a,t);if(p!==!0)throw new Pr("option "+a+" must be "+p,Pr.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Pr("Unknown option "+a,Pr.ERR_BAD_OPTION)}}const TS={assertOptions:Zee,validators:Kk},mf=TS.validators;class Cb{constructor(e){this.defaults=e,this.interceptors={request:new IO,response:new IO}}request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Lg(this.defaults,i);const{transitional:n,paramsSerializer:r,headers:a}=i;n!==void 0&&TS.assertOptions(n,{silentJSONParsing:mf.transitional(mf.boolean),forcedJSONParsing:mf.transitional(mf.boolean),clarifyTimeoutError:mf.transitional(mf.boolean)},!1),r!=null&&(pi.isFunction(r)?i.paramsSerializer={serialize:r}:TS.assertOptions(r,{encode:mf.function,serialize:mf.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let c;c=a&&pi.merge(a.common,a[i.method]),c&&pi.forEach(["delete","get","head","post","put","patch","common"],R=>{delete a[R]}),i.headers=Sh.concat(c,a);const s=[];let p=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(i)===!1||(p=p&&V.synchronous,s.unshift(V.fulfilled,V.rejected))});const _=[];this.interceptors.response.forEach(function(V){_.push(V.fulfilled,V.rejected)});let b,S=0,E;if(!p){const R=[MO.bind(this),void 0];for(R.unshift.apply(R,s),R.push.apply(R,_),E=R.length,b=Promise.resolve(i);S<E;)b=b.then(R[S++],R[S++]);return b}E=s.length;let I=i;for(S=0;S<E;){const R=s[S++],V=s[S++];try{I=R(I)}catch(q){V.call(this,q);break}}try{b=MO.call(this,I)}catch(R){return Promise.reject(R)}for(S=0,E=_.length;S<E;)b=b.then(_[S++],_[S++]);return b}getUri(e){e=Lg(this.defaults,e);const i=LF(e.baseURL,e.url);return PF(i,e.params,e.paramsSerializer)}}pi.forEach(["delete","get","head","options"],function(e){Cb.prototype[e]=function(i,n){return this.request(Lg(n||{},{method:e,url:i,data:(n||{}).data}))}});pi.forEach(["post","put","patch"],function(e){function i(n){return function(a,c,s){return this.request(Lg(s||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}Cb.prototype[e]=i(),Cb.prototype[e+"Form"]=i(!0)});const A1=Cb;class Qk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(a){i=a});const n=this;this.promise.then(r=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](r);n._listeners=null}),this.promise.then=r=>{let a;const c=new Promise(s=>{n.subscribe(s),a=s}).then(r);return c.cancel=function(){n.unsubscribe(a)},c},e(function(a,c,s){n.reason||(n.reason=new Fy(a,c,s),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}static source(){let e;return{token:new Qk(function(r){e=r}),cancel:e}}}const Yee=Qk;function Xee(t){return function(i){return t.apply(null,i)}}function Kee(t){return pi.isObject(t)&&t.isAxiosError===!0}const SS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(SS).forEach(([t,e])=>{SS[e]=t});const Qee=SS;function RF(t){const e=new A1(t),i=gF(A1.prototype.request,e);return pi.extend(i,A1.prototype,e,{allOwnKeys:!0}),pi.extend(i,e,null,{allOwnKeys:!0}),i.create=function(r){return RF(Lg(t,r))},i}const Zo=RF(Xk);Zo.Axios=A1;Zo.CanceledError=Fy;Zo.CancelToken=Yee;Zo.isCancel=OF;Zo.VERSION=DF;Zo.toFormData=Ux;Zo.AxiosError=Pr;Zo.Cancel=Zo.CanceledError;Zo.all=function(e){return Promise.all(e)};Zo.spread=Xee;Zo.isAxiosError=Kee;Zo.mergeConfig=Lg;Zo.AxiosHeaders=Sh;Zo.formToJSON=t=>MF(pi.isHTMLForm(t)?new FormData(t):t);Zo.HttpStatusCode=Qee;Zo.default=Zo;const Ai=Zo;var Jee=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i};const ete={name:"AtomSpinner",props:{animationDuration:{type:Number,default:1e3},size:{type:Number,default:60},color:{type:String,default:"#fff"}},computed:{spinnerStyle(){return{height:`${this.size}px`,width:`${this.size}px`}},circleStyle(){return{color:this.color,fontSize:`${this.size*.24}px`}},lineStyle(){return{animationDuration:`${this.animationDuration}ms`,borderLeftWidth:`${this.size/25}px`,borderTopWidth:`${this.size/25}px`,borderLeftColor:this.color}}}},tte={class:"spinner-inner"};function ite(t,e,i,n,r,a){return be(),ti("div",{class:"atom-spinner",style:ir(a.spinnerStyle)},[Pe("div",tte,[Pe("div",{class:"spinner-line",style:ir(a.lineStyle)},null,4),Pe("div",{class:"spinner-line",style:ir(a.lineStyle)},null,4),Pe("div",{class:"spinner-line",style:ir(a.lineStyle)},null,4),Pe("div",{class:"spinner-circle",style:ir(a.circleStyle)},"●",4)])],4)}var is=Jee(ete,[["render",ite]]);const nte={components:{TextFieldItem:sm,AtomSpinner:is},data(){return{username:"",userPassword:"",dialog:!1,alert_title:"",alert_description:"",showError:!1,errorMessage:null,loading:!0,value:String}},mounted(){},methods:{login(){if(this.username==""&&this.userPassword==""){this.alert_title="Warning",this.alert_description="Email and Password cannot be empty",this.dialog=!0,this.agreeButtonText="Okay";return}else if(this.username==""||this.userPassword==""){this.alert_title="Warning",this.alert_description="Please fill all the fields",this.dialog=!0,this.agreeButtonText="Okay";return}else{this.loading=!1;var t=this.baseurl+"onboard_signin";const e={identity:this.username,password:this.userPassword};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(i=>{if(this.loading=!0,i.status==200){console.log("Login Response"),console.log(i);var n=i.data;n.Failure?(this.showError=!0,n.Failure=="Account under review."?this.errorMessage="Account under review.":n.Failure=="Incorrect Username or Password. Please contact administration."?this.errorMessage="Incorrect Username or Password.":this.errorMessage="You are already registered on the dlivrd Driver Portal."):n.wait_list?(this.showError=!0,this.errorMessage="Hi "+n.user_name+"! We are currently not partnering with new drivers in your area, but you have been added to our WAITING LIST. We will notify you once space becomes available."):(localStorage.setItem("email",this.username),localStorage.setItem("username",this.username),localStorage.setItem("name",n.user_name),localStorage.setItem("stage",n.stage),localStorage.setItem("country",n.country),localStorage.setItem("session_id",n.session_id),localStorage.setItem("mobile",n.mobile_number),localStorage.setItem("phoneverified",n.phone_verified),n.initial_stage&&localStorage.setItem("first_login",n.initial_stage),n.requires_password_update&&localStorage.setItem("require_password",n.requires_password_update),n.info_completed=="true"?(localStorage.setItem("new_driver",!1),this.$router.push("/analytics")):(localStorage.setItem("new_driver",!0),this.$router.push("/submit")))}}).catch(()=>{this.loading=!0,this.showError=!0,this.errorMessage="You are having issues logging in to your account. Please Try Again after 30 minutes."})}},checkExistingSession(){localStorage.getItem("session_id")!=null&&this.$router.push("/analytics")}}},rte=Pe("h3",{style:{color:"white","text-align":"center","font-size":"1.3rem"}}," Welcome to dlivrd Driver Partner Portal",-1),ste=Pe("span",{class:"signUpLink",onclick:"window.parent.location.href= 'https://www.dlivrd.io/drive'"},"Create Now!",-1),ote={class:"alignSpinnerCenter"};function ate(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-col"),V=ue("v-text-field"),q=ue("TextFieldItem"),U=ue("atom-spinner"),H=ue("v-container");return be(),He(H,{class:"mainblock",fluid:""},{default:D(()=>[w(E,{id:"dialogBox",modelValue:r.showError,"onUpdate:modelValue":e[1]||(e[1]=Z=>r.showError=Z),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"red"}},{default:D(()=>[ye(" Warning ")]),_:1}),w(s,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.errorMessage},null,8,["innerHTML"]),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),w(_,{style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=Z=>r.showError=!r.showError)},{default:D(()=>[ye(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),w(I,{class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[3]||(e[3]=Z=>r.dialog=Z),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.alert_title=="Warning"?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:e[2]||(e[2]=Z=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(I,null,{default:D(()=>[w(R,{md:"4"}),w(R,{cols:"12",sm:"12",md:"4","align-self":"center"},{default:D(()=>[rte,w(q,null,{heading:D(()=>[ye("Username")]),default:D(()=>[w(V,{modelValue:r.username,"onUpdate:modelValue":e[4]||(e[4]=Z=>r.username=Z),"background-color":"black",required:"","hide-details":"",placeholder:"Enter Username","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",type:"text",density:"comfortable",onKeyup:Vl(a.login,["enter"]),autocomplete:"new"},null,8,["modelValue","onKeyup"])]),_:1}),w(q,null,{heading:D(()=>[ye("Password")]),default:D(()=>[w(V,{required:"","hide-details":"",modelValue:r.userPassword,"onUpdate:modelValue":e[5]||(e[5]=Z=>r.userPassword=Z),placeholder:"Enter Password","persistent-placeholder":!0,class:"generic_tx px-2",name:"login",value:r.userPassword,"append-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:append":e[6]||(e[6]=()=>r.value=!r.value),type:r.value?"password":"text",density:"comfortable",onKeyup:Vl(a.login,["enter"])},null,8,["modelValue","value","append-icon","type","onKeyup"])]),_:1}),w(R,{class:"alignForgotPass"},{default:D(()=>[Pe("h6",{onClick:e[7]||(e[7]=Z=>this.$router.push("/forgotPassword")),class:"forgotPass"},"Forgot Your Password?")]),_:1}),w(R,null,{default:D(()=>[w(s,{style:{color:"white",padding:"0px","text-align":"center"}},{default:D(()=>[ye(" Don't have an account? "),ste]),_:1})]),_:1}),w(R,{"align-self":"center",sm:"12",style:{"text-align":"center"}},{default:D(()=>[r.loading?(be(),He(_,{key:0,"prepend-icon":"mdi-login",class:"btn_green",onClick:a.login},{default:D(()=>[ye(" Login ")]),_:1},8,["onClick"])):We("",!0),Pe("div",ote,[r.loading?We("",!0):(be(),He(U,{key:0,"animation-duration":1e3,size:90,color:"#ffffff"}))])]),_:1})]),_:1}),w(R,{md:"4"})]),_:1})]),_:1})]),_:1})}const lte=Kn(nte,[["render",ate]]),_r=""+new URL("dlivrdlogo-6ec31ff4.png",import.meta.url).href;const ute=t=>(Yd("data-v-fe83f205"),t=t(),Xd(),t),cte={class:"greetings"},dte=ute(()=>Pe("h3",{style:{color:"white"}}," Welcome To The dlivrd Driver Partner Portal ",-1)),hte=[dte],fte={__name:"HelloWorld",props:{msg:{type:String,required:!0}},setup(t){return(e,i)=>(be(),ti("div",cte,hte))}},BF=Kn(fte,[["__scopeId","data-v-fe83f205"]]);const pte=t=>(Yd("data-v-d0aa6f64"),t=t(),Xd(),t),mte={class:"wrapper",style:{"text-align":"-webkit-center"}},gte=pte(()=>Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"250px"},src:_r,width:"125",height:"125"},null,-1)),_te={style:{"margin-left":"0px","padding-bottom":"20px"}},vte={__name:"SignUpHeader",setup(t){return(e,i)=>{const n=ue("v-label");return be(),ti("header",null,[Pe("div",mte,[gte,w(BF,{msg:"Dlivrd"}),Pe("nav",_te,[w(n,{class:"menu_option",onclick:"window.parent.location.href= 'https://driver.dlivrd.io'"},{default:D(()=>[ye("Sign In")]),_:1}),w(n,{class:"menu_option",style:{"margin-left":"20px"},onclick:"window.parent.location.href= 'https://www.dlivrd.io/drive'"},{default:D(()=>[ye("Sign Up")]),_:1})])])])}}},$y=Kn(vte,[["__scopeId","data-v-d0aa6f64"]]);function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},CS.apply(this,arguments)}var yte=function(){var e=!1,i=[],n=function(){if(!e){e=!0;for(var s=0,p=i.length;s<p;s++)i[s]()}},r=function(s){if(!e){i.push(s);return}s()},a={resolved:function(){return e},resolve:n,promise:{then:r}};return a},DO=Object.prototype.hasOwnProperty;function bte(){var t=yte();return{notify:function(){t.resolve()},wait:function(){return t.promise},render:function(i,n,r){this.wait().then(function(){r(window.grecaptcha.render(i,n))})},reset:function(i){typeof i>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(i)}))},execute:function(i){typeof i>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(i)}))},checkRecaptchaLoad:function(){DO.call(window,"grecaptcha")&&DO.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!t.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var vv=bte();typeof window<"u"&&(window.vueRecaptchaApiLoaded=vv.notify);var Gx=qn({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,i){var n=i.slots,r=i.emit,a=lt(null),c=lt(null),s=function(S){r("verify",S)},p=function(){r("expired")},_=function(){r("error")};return Fn(function(){if(vv.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var b=document.createElement("script");b.id=e.recaptchaScriptId,b.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,b.async=!0,b.defer=!0,document.head.appendChild(b)}var S=CS({},e,{callback:s,"expired-callback":p,"error-callback":_}),E=a.value,I=n.default?E.children[0]:E;vv.render(I,S,function(R){c.value=R,r("render",R)})}),{root:a,widgetId:c,reset:function(){vv.reset(c.value)},execute:function(){vv.execute(c.value)}}},render:function(){var e=this.$slots.default,i;return typeof e=="function"?i=e():i=e,Ns("div",{ref:"root"},i)}});const xte={components:{TextFieldItem:sm,SignUpHeader:$y,VuePhoneNumberInput:PB,AtomSpinner:is,VueRecaptcha:Gx},data(){return{firstName:"",lastName:"",middleName:"",mobileNumber:"",userEmail:"",countries:[],states:[],cities:[],driversLicense:"",legallyEligible:"",vehicleComfortability:"",Data_Countries:{},optedCountryView:"USA",optedCountry:null,optedState:null,optedCity:null,alert_title:"",alert_description:"",dialog:!1,agreeToTermsAndConditions:!1,showError:!1,errorMessage:"",loading:!0,confirmMobileNumber:!1,agreeButtonText:"",numberVerification:"",textFieldLabel:"",viewTerms:!1,captchaChecked:!1,captchaWarning:"",captchaToken:null}},watch:{optedCountry(){this.optedCountryView=this.optedCountry,this.setStates()},optedState(){this.setCity()}},mounted(){this.getRegions()},methods:{handleSuccess(t){this.captchaToken=t,this.captchaChecked=!0},handleError(){this.captchaChecked=!1},loadRegions(t){var e,i="";for(var n in t){n=="Others"?(e="Other",i="USA"):(e=n.split(", ")[0],i=n.split(", ")[1]);for(var r in t[n])this.Data_Countries[i]==null&&(this.Data_Countries[i]={}),this.Data_Countries[i][e]==null&&(this.Data_Countries[i][e]=[]),this.Data_Countries[i][e].push(t[n][r]);this.countries.includes(i)||this.countries.push(i)}},getRegions(){var t="",e=this.baseurl+"get_markets_regions";const i={};Ai.get(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t,uuid:""}}).then(n=>{if(n.status==200){const r=n.data;this.loadRegions(r)}}).catch(()=>{})},setStates(){this.states=[],this.optedState=null;for(var t in this.Data_Countries)if(this.optedCountry==t){for(var e in this.Data_Countries[t])this.states.push(e);this.states.sort()}this.setCity()},setCity(){this.cities=[],this.optedCity=null;for(var t in this.Data_Countries){for(var e in this.Data_Countries[t])if(this.optedState==e)for(var i in this.Data_Countries[t][e])this.cities.push(this.Data_Countries[t][e][i]);this.cities.sort()}},agreedOnTerms(){this.agreeToTermsAndConditions=!this.agreeToTermsAndConditions},openSMSTerms(){this.dialog=!0,this.viewTerms=!0,this.alert_description="Dlivrd SMS Campaign: Order Notifications<br/><br/>1. SMS are being sent since you signed up to receive order notifications and confirmations of available and upcoming orders.  These SMS’s can be at bulk, or one by one.  You opted in to receive and are expecting these texts to be able to be able to complete delivery functions and the message frequency varies.<br/><br/>2. You can cancel the SMS service at any time. Just text “STOP” to the short code. After you send the SMS message “STOP” to us, we will send you an SMS message to confirm that you have been unsubscribed. After this, you will no longer receive SMS messages from us. If you want to join again, just sign up as you did the first time and we will start sending SMS messages to you again.<br/><br/>3. If you are experiencing issues with the messaging program you can reply with the keyword HELP for more assistance, or you can get help directly at hello@dlivrd.io<br/><br/>4. Carriers are not liable for delayed or undelivered messages.<br/><br/>5. As always, message and data rates may apply for any messages sent to you from us and to us from you. Messages will vary in frequency. If you have any questions about your text plan or data plan, it is best to contact your wireless provider.<br/><br/>6. If you have any questions regarding privacy, please read our privacy policy.",this.alert_title="SMS Terms"},openPrivacyPolicy(){this.dialog=!0,this.viewTerms=!0,this.alert_description="Version Date: 01.05.2021<br/><br/>Thank you for using  dlivrd.<br/><br/>Introduction<br/>Welcome to dlivrd<br/>DLIVRD (“us”, “we”, or “our”) operates WWW.DLIVRD.IO (hereinafter referred to as “Service”).<br/>Our Privacy Policy governs your visit to WWW.DLIVRD.IO, and explains how we collect, safeguard and disclose information that results from your use of our Service.<br/>We use your data to provide and improve Service. By using Service, you agree to the collection and use of information in accordance with this policy. Unless otherwise defined in this Privacy Policy, the terms used in this Privacy Policy have the same meanings as in our Terms and Conditions.<br/>Our Terms and Conditions (“Terms”) govern all use of our Service and together with the Privacy Policy constitutes your agreement with us (“agreement”).<br/>2. Definitions<br/>SERVICE means the WWW.DLIVRD.IO website operated by DLIVRD<br/>PERSONAL DATA means data about a living individual who can be identified from those data (or from those and other information either in our possession or likely to come into our possession).<br/>USAGE DATA is data collected automatically either generated by the use of Service or from Service infrastructure itself (for example, the duration of a page visit).<br/>COOKIES are small files stored on your device (computer or mobile device).<br/>DATA CONTROLLER means a natural or legal person who (either alone or jointly or in common with other persons) determines the purposes for which and the manner in which any personal data are, or are to be, processed. For the purpose of this Privacy Policy, we are a Data Controller of your data.<br/>DATA PROCESSORS (OR SERVICE PROVIDERS) means any natural or legal person who processes the data on behalf of the Data Controller. We may use the services of various Service Providers in order to process your data more effectively.<br/>DATA SUBJECT is any living individual who is the subject of Personal Data.<br/>THE USER is the individual using our Service. The User corresponds to the Data Subject, who is the subject of Personal Data.<br/><br/>3. Information Collection and Use<br/>We collect several different types of information for various purposes to provide and improve our Service to you.<br/><br/>4. Types of Data Collected<br/>Personal Data<br/>While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you (“Personal Data”). Personally identifiable information may include, but is not limited to:<br/>0.1. Email address<br/>0.2. First name and last name<br/>0.3. Phone number<br/>0.4. Address, State, Province, ZIP/Postal code, City<br/>0.5. Cookies and Usage Data<br/>We may use your Personal Data to contact you with newsletters, marketing or promotional materials and other information that may be of interest to you. You may opt out of receiving any, or all, of these communications from us by following the unsubscribe link.<br/>Usage Data<br/>We may also collect information that your browser sends whenever you visit our Service or when you access Service by or through a mobile device (“Usage Data”).<br/>This Usage Data may include information such as your computer’s Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that you visit, the time and date of your visit, the time spent on those pages, unique device identifiers and other diagnostic data.<br/>When you access Service with a mobile device, this Usage Data may include information such as the type of mobile device you use, your mobile device unique ID, the IP address of your mobile device, your mobile operating system, the type of mobile Internet browser you use, unique device identifiers and other diagnostic data.<br/><br/>Location Data<br/>We may use and store information about your location if you give us permission to do so (“Location Data”). We use this data to provide features of our Service, to improve and customize our Service.<br/>You can enable or disable location services when you use our Service at any time by way of your device settings.<br/><br/>Location Data – DLIVRD<br/>To participate as a DLIVRD driver, you must permit the DLIVRD Services to access location services through the permission system used by your mobile operating system (“Platform”) or browser. We may collect the precise location of your device when the DLIVRD app is running in the foreground or background of your device. We may also derive your approximate location from your IP address. We use your location information to verify that you are present in your preferred region or city when you begin or engage in a delivery through the DLIVRD (a “Delivery”), connect you with delivery opportunities in your zone, and track the progress and completion of your Deliveries. You can enable the location tracking feature through the settings on your device or Platform or when prompted by the DLIVRD mobile app. If you choose to disable the location feature through the settings on your device or Platform, DLIVRD will not receive precise location information from your device, which will prevent you from being able to Trip and receiving delivery opportunities in your area.<br/><br/>Tracking Cookies Data<br/>We use cookies and similar tracking technologies to track the activity on our Service and we hold certain information.<br/>Cookies are files with a small amount of data which may include an anonymous unique identifier. Cookies are sent to your browser from a website and stored on your device. Other tracking technologies are also used such as beacons, tags and scripts to collect and track information and to improve and analyze our Service.<br/><br/>You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our Service.<br/><br/>Examples of Cookies we use:<br/>4.1. Session Cookies: We use Session Cookies to operate our Service.<br/>4.2. Preference Cookies: We use Preference Cookies to remember your preferences and various settings.<br/>4.3. Security Cookies: We use Security Cookies for security purposes.<br/>4.4. Advertising Cookies: Advertising Cookies are used to serve you with advertisements that may be relevant to you and your interests.<br/><br/>Other Data<br/>While using our Service, we may also collect the following information: sex, age, date of birth, place of birth, passport details, citizenship, registration at place of residence and actual address, telephone number (work, mobile), details of documents on education, qualification, professional training, employment agreements, non-disclosure agreements, information on bonuses and compensation, information on marital status, family members, social security (or other taxpayer identification) number, office location and other data.<br/><br/>5. Use of Data<br/>DLIVRD uses the collected data for various purposes:<br/>0.1. to provide and maintain our Service;<br/>0.2. to notify you about changes to our Service;<br/>0.3. to allow you to participate in interactive features of our Service when you choose to do so;<br/>0.4. to provide customer support;<br/>0.5. to gather analysis or valuable information so that we can improve our Service;<br/>0.6. to monitor the usage of our Service;<br/>0.7. to detect, prevent and address technical issues;<br/>0.8. to fulfill any other purpose for which you provide it;<br/>0.9. to carry out our obligations and enforce our rights arising from any contracts entered into between you and us, including for billing and collection;<br/>0.10. to provide you with notices about your account and/or subscription, including expiration and renewal notices, email-instructions, etc.;<br/>0.11. to provide you with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless you have opted not to receive such information;<br/>0.12. in any other way we may describe when you provide the information;<br/>0.13. for any other purpose with your consent.<br/><br/>6. Retention of Data<br/>We will retain your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies.<br/>We will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period, except when this data is used to strengthen the security or to improve the functionality of our Service, or we are legally obligated to retain this data for longer time periods.<br/><br/>7. Transfer of Data<br/>Your information, including Personal Data, may be transferred to – and maintained on – computers located outside of your state, province, country or other governmental jurisdiction where the data protection laws may differ from those of your jurisdiction.<br/>If you are located outside United States, Puerto Rico and choose to provide information to us, please note that we transfer the data, including Personal Data, to United States, Puerto Rico and process it there.<br/>Your consent to this Privacy Policy followed by your submission of such information represents your agreement to that transfer.<br/>DLIVRD will take all the steps reasonably necessary to ensure that your data is treated securely and in accordance with this Privacy Policy and no transfer of your Personal Data will take place to an organisation or a country unless there are adequate controls in place including the security of your data and other personal information.<br/><br/>8. Disclosure of Data<br/>We may disclose personal information that we collect, or you provide:<br/>0.1. Disclosure for Law Enforcement.<br/>Under certain circumstances, we may be required to disclose your Personal Data if required to do so by law or in response to valid requests by public authorities.<br/>0.2. Business Transaction.<br/>If we or our subsidiaries are involved in a merger, acquisition or asset sale, your Personal Data may be transferred.<br/>0.3. Other cases. We may disclose your information also:<br/>0.3.1. to our subsidiaries and affiliates;<br/>0.3.2. to contractors, service providers, and other third parties we use to support our business;<br/>0.3.3. to fulfill the purpose for which you provide it;<br/>0.3.4. for the purpose of including your company’s logo on our website;<br/>0.3.5. for any other purpose disclosed by us when you provide the information;<br/>0.3.6. with your consent in any other cases;<br/>0.3.7. if we believe disclosure is necessary or appropriate to protect the rights, property, or safety of the Company, our customers, or others.<br/><br/>9. Security of Data<br/>The security of your data is important to us but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute security.<br/><br/>10. Service Providers<br/>We may employ third-party companies and individuals to facilitate our Service (“Service Providers”), provide Service on our behalf, perform Service-related services or assist us in analyzing how our Service is used.<br/>These third parties have access to your Personal Data only to perform these tasks on our behalf and are obligated not to disclose or use it for any other purpose.<br/><br/>10a. Short Code Data<br/>Data obtained through the short code program will not be shared with any third-parties for their marketing reasons / purposes.     <br/><br/>11. Analytics<br/>We may use third-party Service Providers to monitor and analyze the use of our Service.<br/><br/>12. CI/CD tools<br/>We may use third-party Service Providers to automate the development process of our Service.<br/><br/>13. Advertising<br/>We may use third-party Service Providers to show advertisements to you to help support and maintain our Service.<br/><br/>14. Behavioral Re-marketing<br/>We may use re-marketing services to advertise on third party websites to you after you visited our Service. We and our third-party vendors use cookies to inform, optimize and serve ads based on your past visits to our Service.<br/><br/>15. Payments<br/>We may provide paid products and/or services within Service. In that case, we use third-party services for payment processing (e.g. payment processors).<br/>We will not store or collect your payment card details. That information is provided directly to our third-party payment processors whose use of your personal information is governed by their Privacy Policy. These payment processors adhere to the standards set by PCI-DSS as managed by the PCI Security Standards Council, which is a joint effort of brands like Visa, Mastercard, American Express and Discover. PCI-DSS requirements help ensure the secure handling of payment information.<br/><br/>16. Links to Other Sites<br/>Our Service may contain links to other sites that are not operated by us. If you click a third party link, you will be directed to that third party’s site. We strongly advise you to review the Privacy Policy of every site you visit.<br/>We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services.<br/>For example, the outlined Privacy Policy has been created using PolicyMaker.io, a free web application for generating high-quality legal documents. PolicyMaker’s online privacy policy generator is an easy-to-use free tool for creating an excellent privacy policy template for a website, blog, online store or app.<br/><br/>17. Children’s Privacy<br/>Our Services are not intended for use by children under the age of 18 (“Child” or “Children”).<br/>We do not knowingly collect personally identifiable information from Children under 18. If you become aware that a Child has provided us with Personal Data, please contact us. If we become aware that we have collected Personal Data from Children without verification of parental consent, we take steps to remove that information from our servers.<br/><br/>18. Changes to This Privacy Policy<br/>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.<br/>We will let you know via email and/or a prominent notice on our Service, prior to the change becoming effective and update “effective date” at the top of this Privacy Policy.<br/>You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page.<br/><br/>19. Contact Us<br/>If you have any questions about this Privacy Policy, please contact us by email: HELLO@DLIVRD.IO",this.alert_title="Privacy Policy"},performSignUp(){this.showError=!1;var t=this.validatePersonalInformation(this.userEmail);if(t){if(this.captchaChecked==!1){this.captchaWarning="Please verify you are human";return}this.loading=!1;var e="",i=this.baseurl+"onboard_signup";const n={first_name:this.firstName,middle_name:this.middleName,last_name:this.lastName,mobile_number:this.mobileNumber,email:this.userEmail,country:this.optedCountry,states:this.optedState,city:this.optedCity,redirect:"dlivrd.io",has_valid_license:this.driversLicense,legally_eligible:this.legallyEligible,self_vehicle_comfortability:this.vehicleComfortability,agreed_to_privacy_policy:this.agreeToTermsAndConditions,captchaKey:this.captchaToken};Ai.post(i,n,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:e}}).then(r=>{if(r.status==200){var a=r.data;a.Failure?(a.Failure=="Captcha not verified."&&(this.alert_title="Warning",this.alert_description="Error verifying the mobile number. Please try again.",this.dialog=!0),this.errorMessage="",a.email?this.errorMessage=a.email+"<br/>":this.errorMessage=a.Failure+"<br/>",a.Failure=="Request failed due to invalid values."&&(a.has_valid_license&&(this.errorMessage+="- Need to have Valid License<br/>"),a.legally_eligible&&(this.errorMessage+="- Need to have Legal Age<br/>"),a.self_vehicle_comfortability&&(this.errorMessage+="- Need to Have Personal Vehicle<br/>"),a.mobile_number&&(this.errorMessage+=a.mobile_number+"<br/>")),this.dialog=!0,this.alert_title="Alert",this.alert_description=this.errorMessage,this.agreeButtonText="Okay"):(localStorage.setItem("email",this.userEmail),localStorage.setItem("username",this.firstName+" "+this.lastName),localStorage.setItem("stage",0),localStorage.setItem("country",this.optedCountry),this.alert_title="Mobile Number Verification",this.alert_description="Username and Password sent to your mobile number.",this.dialog=!0)}}).catch(()=>{}).finally(()=>{this.loading=!0})}},routeToLoginPage(){this.$router.push("/")},closeDialog(){this.dialog=!1,this.viewTerms=!1},validatePersonalInformation(t){if(this.showError=!1,this.firstName==null)return this.showError=!0,this.errorMessage="First name cannot be empty",!1;if(this.firstName.length<3)return this.showError=!0,this.errorMessage="First name should be atleast 3 characters long",!1;if(this.lastName==null)return this.showError=!0,this.errorMessage="Last name cannot be empty",!1;if(this.lastName.length<3)return this.showError=!0,this.errorMessage="Last name should be atleast 3 characters long",!1;if(this.mobileNumber==null)return this.showError=!0,this.errorMessage="Mobile number cannot be empty",!1;if(t==null)return this.showError=!0,this.errorMessage="Email cannot be empty",!1;if(t!=null){if(!t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return this.showError=!0,this.errorMessage="Invalid email address",!1}else{if(this.optedCountry==null)return this.showError=!0,this.errorMessage="Country cannot be empty",!1;if(this.optedState==null)return this.showError=!0,this.errorMessage="State cannot be empty",!1;if(this.optedCity==null)return this.showError=!0,this.errorMessage="City cannot be empty",!1;if(this.driversLicense==null)return this.showError=!0,this.errorMessage="Select an option for valid Driving License",!1;if(this.legallyEligible==null)return this.showError=!0,this.errorMessage="Select an option for legal eligibility",!1;if(this.vehicleComfortability==null)return this.showError=!0,this.errorMessage="Select an option for using your own vehicle.",!1}if(this.mobileNumber!=null){var e=/^(\([0-9]{3}\)|[0-9]{3})[0-9]{7}$/.test(this.mobileNumber);if(e==!1)return this.showError=!0,this.errorMessage="Not a valid mobile number",!1}return!0},openICA(){window.open("https://www.dlivrd.io/independent-contractor-agreement/")}}},wte=Pe("span",null,"First Name",-1),Tte={class:"alignSpinner"};function Ste(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-col"),V=ue("SignUpHeader"),q=ue("v-text-field"),U=ue("TextFieldItem"),H=ue("v-select"),Z=ue("v-radio"),ne=ue("v-radio-group"),ie=ue("v-checkbox"),oe=ue("v-layout"),pe=ue("VueRecaptcha"),de=ue("atom-spinner"),fe=ue("v-container");return be(),He(fe,{"fill-height":"",fluid:"",class:"mainblock"},{default:D(()=>[w(I,{class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[0]||(e[0]=ge=>r.dialog=ge),transition:"dialog-top-transition","max-width":"600px","max-height":"500px"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,{style:{"text-align":"justify","overflow-y":"scroll","font-size":"16px"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(b,{style:{"align-self":"end","margin-top":"15px"}},{default:D(()=>[w(p),r.viewTerms?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:a.closeDialog},{default:D(()=>[ye(" Okay ")]),_:1},8,["onClick"])):!r.viewTerms&&r.agreeButtonText!="Okay"?(be(),He(_,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:a.routeToLoginPage},{default:D(()=>[ye(" Okay ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(_,{key:2,style:{"background-color":"#7efb01"},variant:"text",onClick:a.closeDialog},{default:D(()=>[ye(" Okay ")]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(I,null,{default:D(()=>[w(R,{md:"2"}),w(R,{cols:"12",sm:"12",md:"4",style:{"align-self":"center"}},{default:D(()=>[w(V)]),_:1}),w(R,{id:"signupform",cols:"12",sm:"12",md:"4",style:{"overflow-y":"scroll",height:"70vh"}},{default:D(()=>[w(U,null,{heading:D(()=>[wte]),default:D(()=>[w(q,{required:"","hide-details":"",modelValue:r.firstName,"onUpdate:modelValue":e[1]||(e[1]=ge=>r.firstName=ge),placeholder:"Enter First Name","persistent-placeholder":!0,class:"generic_tx px-1",name:"firstName",type:"text",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Middle Name")]),default:D(()=>[w(q,{"hide-details":"",modelValue:r.middleName,"onUpdate:modelValue":e[2]||(e[2]=ge=>r.middleName=ge),placeholder:"Enter Middle Name (Optional)","persistent-placeholder":!0,class:"generic_tx px-1",name:"middleName",type:"text",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Last Name")]),default:D(()=>[w(q,{required:"","hide-details":"",modelValue:r.lastName,"onUpdate:modelValue":e[3]||(e[3]=ge=>r.lastName=ge),placeholder:"Enter Last Name","persistent-placeholder":!0,class:"generic_tx px-1",name:"lastName",type:"text",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Mobile Number")]),default:D(()=>[w(q,{required:"","hide-details":"",modelValue:r.mobileNumber,"onUpdate:modelValue":e[4]||(e[4]=ge=>r.mobileNumber=ge),placeholder:"Enter Mobile Number","persistent-placeholder":!0,class:"generic_tx px-1",name:"mobileNumber",type:"text",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Email Address")]),default:D(()=>[w(q,{required:"","hide-details":"",modelValue:r.userEmail,"onUpdate:modelValue":e[5]||(e[5]=ge=>r.userEmail=ge),placeholder:"Enter Email","persistent-placeholder":!0,class:"generic_tx px-1",name:"userEmail",type:"email",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Country")]),default:D(()=>[w(H,{clearable:"","open-on-clear":"",color:"#ffffff","bg-color":"#ffffff",items:r.countries,modelValue:r.optedCountry,"onUpdate:modelValue":e[6]||(e[6]=ge=>r.optedCountry=ge),placeholder:"Select Country","persistent-placeholder":!0,class:"generic_tx selectdropdown","hide-details":"",density:"comfortable"},null,8,["items","modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("States")]),default:D(()=>[w(H,{clearable:"","open-on-clear":"",color:"#ffffff","bg-color":"#ffffff",items:r.states,modelValue:r.optedState,"onUpdate:modelValue":e[7]||(e[7]=ge=>r.optedState=ge),placeholder:"Select State","persistent-placeholder":!0,class:"generic_tx selectdropdown","hide-details":"",density:"comfortable"},null,8,["items","modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("City")]),default:D(()=>[w(H,{clearable:"","open-on-clear":"",color:"#ffffff","bg-color":"#ffffff",items:r.cities,modelValue:r.optedCity,"onUpdate:modelValue":e[8]||(e[8]=ge=>r.optedCity=ge),placeholder:"Select City","persistent-placeholder":!0,class:"generic_tx selectdropdown","hide-details":"",density:"comfortable"},null,8,["items","modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Do you have a valid Driving License?")]),default:D(()=>[w(ne,{inline:"",modelValue:r.driversLicense,"onUpdate:modelValue":e[9]||(e[9]=ge=>r.driversLicense=ge),"hide-details":""},{default:D(()=>[w(Z,{label:"Yes",value:!0,class:"radiobtn"}),w(Z,{label:"No",value:!1,class:"radiobtn adjustment"})]),_:1},8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye("Are you legally eligible to work in "+Zt(r.optedCountryView)+" ?",1)]),default:D(()=>[w(ne,{inline:"",modelValue:r.legallyEligible,"onUpdate:modelValue":e[10]||(e[10]=ge=>r.legallyEligible=ge),"hide-details":""},{default:D(()=>[w(Z,{label:"Yes",value:!0,class:"radiobtn"}),w(Z,{label:"No",value:!1,class:"radiobtn adjustment"})]),_:1},8,["modelValue"])]),_:1}),w(U,null,{heading:D(()=>[ye(" Comfortable using your own vehicle for deliveries? ")]),default:D(()=>[w(ne,{inline:"",modelValue:r.vehicleComfortability,"onUpdate:modelValue":e[11]||(e[11]=ge=>r.vehicleComfortability=ge)},{default:D(()=>[w(Z,{label:"Yes",value:!0,class:"radiobtn"}),w(Z,{label:"No",value:!1,class:"radiobtn adjustment"})]),_:1},8,["modelValue"])]),_:1}),w(oe,{style:{display:"inline-flex","margin-top":"10px","z-index":"0 !important"}},{default:D(()=>[w(ie,{onClick:a.agreedOnTerms,style:{"z-index":"10"},modelValue:r.agreeToTermsAndConditions,"onUpdate:modelValue":e[12]||(e[12]=ge=>r.agreeToTermsAndConditions=ge)},null,8,["onClick","modelValue"]),w(s,{style:{"padding-bottom":"0px","padding-left":"30px","font-size":"18px",color:"white","text-align":"justify"}},{default:D(()=>[ye("I would like to receive updates from dlivrd. These messages will vary in frequency, message and data rates may apply. Reply HELP for help or STOP to opt out of short code SMS service. View our "),Pe("span",{class:"privacy_policy",onClick:e[13]||(e[13]=(...ge)=>a.openSMSTerms&&a.openSMSTerms(...ge))},"SMS Terms"),ye(", "),Pe("span",{class:"privacy_policy",onClick:e[14]||(e[14]=(...ge)=>a.openPrivacyPolicy&&a.openPrivacyPolicy(...ge))}," Privacy Policy"),ye(" and "),Pe("span",{class:"privacy_policy",onClick:e[15]||(e[15]=(...ge)=>a.openICA&&a.openICA(...ge))}," Independent Contract Agreement.")]),_:1})]),_:1}),r.showError?(be(),He(R,{key:0},{default:D(()=>[w(s,{class:"signupFieldError",innerHTML:r.errorMessage},null,8,["innerHTML"])]),_:1})):We("",!0),w(R,{sm:"12",class:"alignCaptcha"},{default:D(()=>[w(pe,{sitekey:"6Ld7pNAmAAAAAG4qWGWSDntc7Cc4HsywpB2lYvpI","load-recaptcha-script":!0,onVerify:a.handleSuccess,onError:a.handleError},null,8,["onVerify","onError"])]),_:1}),w(R,{sm:"12",style:{"text-align":"center"}},{default:D(()=>[r.captchaChecked?We("",!0):(be(),He(s,{key:0,style:{color:"red",padding:"0"}},{default:D(()=>[ye(Zt(r.captchaWarning),1)]),_:1})),r.loading?(be(),He(_,{key:1,disabled:!r.agreeToTermsAndConditions,"prepend-icon":"mdi-login",class:"btn_green",style:{"margin-bottom":"40px","margin-top":"30px"},onClick:a.performSignUp},{default:D(()=>[ye("Sign up")]),_:1},8,["disabled","onClick"])):We("",!0),Pe("div",Tte,[r.loading?We("",!0):(be(),He(de,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01"}))])]),_:1})]),_:1}),w(R,{md:"2"})]),_:1})]),_:1})]),_:1})}const Cte=Kn(xte,[["render",Ste]]);const kte={components:{TextFieldItem:sm,SignUpHeader:$y,AtomSpinner:is,VueRecaptcha:Gx},data(){return{mobileNumber:"",dialog:!1,alert_title:"",alert_description:"",loading:!0,otpCode:"",editMobileNumber:!1,captchaChecked:!1,captchaWarning:"",captchaToken:null,resendpasswordResetLink:!1}},methods:{handleSuccess(t){this.captchaToken=t,this.captchaChecked=!0},handleError(){this.alert_title="Alert",this.alert_description="Please solve the Captcha again.",this.dialog=!0,this.captchaChecked=!1},resendResetPass(){},requestResetPass(){if(this.captchaChecked==!1){this.captchaWarning="Please verify you are human";return}else this.captchaChecked=!0;if(this.mobileNumber=="")this.alert_title="Warning",this.alert_description="Please enter your registered Mobile Number.",this.dialog=!0;else{this.loading=!1;var t=this.baseurl+"onboard_forgotPassword";const e={identity:this.mobileNumber,captchaKey:this.captchaToken};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(i=>{if(this.loading=!0,i.status==200){this.resendpasswordResetLink=!0;var n=i.data;n.Success?(this.alert_title="Success",this.alert_description=n.Success,this.dialog=!0):(this.alert_title="Warning",n.Failure=="Captcha not verified."?this.alert_description="Error verifying the mobile number. Please try again.":this.alert_description=n.Failure,this.dialog=!0)}}).catch(i=>{this.$router.push("/")})}},confirmOTP(){this.$router.push("/resetPassword")}}},Ete={key:2,style:{width:"100%","text-align":"-webkit-center"}};function Ite(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-col"),V=ue("SignUpHeader"),q=ue("v-text-field"),U=ue("TextFieldItem"),H=ue("VueRecaptcha"),Z=ue("atom-spinner"),ne=ue("v-container");return be(),He(ne,{"fill-height":"",fluid:"",class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[3]||(e[3]=ie=>r.dialog=ie),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.alert_title=="Success"?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):r.alert_title=="Warning"?(be(),He(_,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):r.alert_title=="Alert"?(be(),He(_,{key:2,style:{"background-color":"#7efb01"},variant:"text",onClick:e[2]||(e[2]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(I,null,{default:D(()=>[w(R,{md:"2"}),w(R,{cols:"12",sm:"12",md:"4","align-self":"center"},{default:D(()=>[w(V)]),_:1}),w(R,{cols:"12",sm:"12",md:"4",style:{"align-self":"center"}},{default:D(()=>[w(U,null,{heading:D(()=>[ye("Mobile Number")]),default:D(()=>[w(q,{"background-color":"black",required:"",modelValue:r.mobileNumber,"onUpdate:modelValue":e[4]||(e[4]=ie=>r.mobileNumber=ie),"hide-details":"",readonly:r.editMobileNumber,placeholder:"Enter number","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",type:"text",density:"comfortable",onKeyup:Vl(a.requestResetPass,["enter"])},null,8,["modelValue","readonly","onKeyup"])]),_:1}),w(Nl,{name:"fade",mode:"out-in"},{default:D(()=>[r.editMobileNumber==!0?(be(),He(U,{key:0},{heading:D(()=>[ye("One Time Password")]),default:D(()=>[w(q,{"background-color":"black",required:"",modelValue:r.otpCode,"onUpdate:modelValue":e[5]||(e[5]=ie=>r.otpCode=ie),"hide-details":"",placeholder:"Enter OTP","persistent-placeholder":!0,class:"generic_tx px-1",name:"otp",type:"number",density:"comfortable",onKeyup:Vl(a.confirmOTP,["enter"])},null,8,["modelValue","onKeyup"])]),_:1})):We("",!0)]),_:1}),w(R,{sm:"12",class:"alignCaptcha"},{default:D(()=>[w(H,{sitekey:"6Ld7pNAmAAAAAG4qWGWSDntc7Cc4HsywpB2lYvpI","load-recaptcha-script":!0,onVerify:a.handleSuccess,onError:a.handleError},null,8,["onVerify","onError"])]),_:1}),w(R,{"align-self":"center",sm:"12",style:{"text-align":"center","margin-top":"10px"}},{default:D(()=>[r.captchaChecked?We("",!0):(be(),He(s,{key:0,style:{color:"red",padding:"0"}},{default:D(()=>[ye(Zt(r.captchaWarning),1)]),_:1})),r.loading?(be(),He(_,{key:1,"prepend-icon":"mdi-shield-check",class:"btn_green",style:{"margin-left":"10px"},onClick:a.requestResetPass},{default:D(()=>[ye("Verify")]),_:1},8,["onClick"])):We("",!0),r.loading?We("",!0):(be(),ti("div",Ete,[w(Z,{"animation-duration":1e3,size:90,color:"#0AFD01"})]))]),_:1}),r.resendpasswordResetLink?(be(),He(R,{key:0},{default:D(()=>[w(s,{style:{color:"white","text-align":"center"}},{default:D(()=>[ye("Didn't get the code? "),Pe("span",{class:"resendPass",onClick:e[6]||(e[6]=(...ie)=>a.resendResetPass&&a.resendResetPass(...ie))},"Resend!")]),_:1})]),_:1})):We("",!0)]),_:1}),w(R,{md:"2"})]),_:1})]),_:1})}const Pte=Kn(kte,[["render",Ite]]);var kS={},Ate={get exports(){return kS},set exports(t){kS=t}};(function(t,e){(function(i,n){t.exports=n(IB)})(self,i=>(()=>{var n={744:(s,p)=>{p.Z=(_,b)=>{const S=_.__vccOpts||_;for(const[E,I]of b)S[E]=I;return S}},748:s=>{s.exports=i}},r={};function a(s){var p=r[s];if(p!==void 0)return p.exports;var _=r[s]={exports:{}};return n[s](_,_.exports,a),_.exports}a.d=(s,p)=>{for(var _ in p)a.o(p,_)&&!a.o(s,_)&&Object.defineProperty(s,_,{enumerable:!0,get:p[_]})},a.o=(s,p)=>Object.prototype.hasOwnProperty.call(s,p),a.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var c={};return(()=>{a.r(c),a.d(c,{default:()=>E});var s=a(748);const p={class:"step-progress__wrapper"},_={class:"step-progress__bar"},b={class:"step-progress__step-label"},S={name:"StepProgress",props:{steps:{type:Array,default:()=>[],validator:I=>I&&I.length>0},currentStep:{type:Number,default:0},iconClass:{type:String,default:"fa fa-check"},activeColor:{type:String,default:"red"},passiveColor:{type:String,default:"gray"},activeThickness:{type:Number,default:5},passiveThickness:{type:Number,default:5},lineThickness:{type:Number,default:12}},computed:{scaleX(){let I=this.currentStep;return I<0?I=0:I>=this.steps.length&&(I=this.steps.length-1),I/(this.steps.length-1)}}},E=(0,a(744).Z)(S,[["render",function(I,R,V,q,U,H){return(0,s.openBlock)(),(0,s.createElementBlock)("div",p,[(0,s.createElementVNode)("div",{class:"step-progress__wrapper-before",style:(0,s.normalizeStyle)({"background-color":V.passiveColor,height:V.lineThickness+"px"})},null,4),(0,s.createElementVNode)("div",_,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(V.steps,(Z,ne)=>((0,s.openBlock)(),(0,s.createElementBlock)("div",{class:(0,s.normalizeClass)(["step-progress__step",{"step-progress__step--active":ne===V.currentStep,"step-progress__step--valid":ne<V.currentStep}]),style:(0,s.normalizeStyle)({"--activeColor":V.activeColor,"--passiveColor":V.passiveColor,"--activeBorder":V.activeThickness+"px","--passiveBorder":V.passiveThickness+"px"})},[(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(ne+1),1),(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["step-progress__step-icon",V.iconClass])},null,2),(0,s.createElementVNode)("div",b,(0,s.toDisplayString)(Z),1)],6))),256))]),(0,s.createElementVNode)("div",{class:"step-progress__wrapper-after",style:(0,s.normalizeStyle)({transform:"scaleX("+H.scaleX+") translateY(-50%) perspective(1000px)","background-color":V.activeColor,height:V.lineThickness+"px"})},null,4)])}]])})(),c})())})(Ate);const Mte=T4(kS),Ote=""+new URL("thumbnail-717de72a.png",import.meta.url).href,RO=""+new URL("english-37dd7141.png",import.meta.url).href,Lte=""+new URL("spanish-4d315e54.png",import.meta.url).href,FF=""+new URL("Module_1-55f45c04.png",import.meta.url).href,$F=""+new URL("Module_2-8a0e3a74.png",import.meta.url).href,NF=""+new URL("Module_3-3d47d0b4.png",import.meta.url).href,ES=""+new URL("Module_4-33118724.png",import.meta.url).href,Dte={data(){return{newDriver:!0,drawerNavigation:!1,checkDrawer:!0,currentAddress:"",items:["Personal Information","Documents","Banking Information","Delivery Location","Preferred Availability","Vehicle & Bag"],icons:["mdi-account","mdi-file-document","mdi-account-credit-card","mdi-map-marker","mdi-clock-time-four","mdi-car-estate"],resources:["Training Video","FAQs"],resourcesIcon:["mdi-video","mdi-frequently-asked-questions"]}},props:{drawer:{type:Boolean},badge:{type:Boolean}},watch:{},mounted(){this.newDriver=localStorage.getItem("new_driver")=="true",console.log("Navigation"),console.log(this.newDriver),this.currentAddress=window.location.pathname,this.drawerNavigation=this.drawer,this.checkCurrentPage()},methods:{viewDetails(t){t==0?this.$router.push("/personalDetails"):t==1?this.$router.push("/documents"):t==2?this.$router.push("/validation"):t==3?this.$router.push("/deliverylocation"):t==4?this.$router.push("/availability"):t==5?this.$router.push("/vehicleandbagdetails"):t==6?this.$router.push("/training"):t==7&&this.$router.push("/faq")},viewAnalytics(){this.$router.push("/analytics")},viewQuestions(){this.$router.push("/educate")},viewAnnouncements(){this.$router.push("./announcements")},submitRegistration(){this.$router.push("/submit")},viewLLC(){this.$router.push("/llc")},checkCurrentPage(){this.currentAddress=="/analytics"?document.getElementById("analytics").style.backgroundColor="#0afd01":this.currentAddress=="/announcements"?document.getElementById("announcements").style.backgroundColor="#0afd01":this.currentAddress=="/educate"?document.getElementById("questions").style.backgroundColor="#0afd01":this.currentAddress=="/llc"&&(document.getElementById("llc").style.backgroundColor="#0afd01")},onClickOutside(){this.checkDrawer==!0?(this.$emit("closeNavigationDrawer"),this.checkDrawer=!1):this.checkDrawer=!0}}};function Rte(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-badge"),E=ue("v-list-group"),I=ue("v-list"),R=ue("v-navigation-drawer"),V=Ba("click-outside");return be(),He(R,{modelValue:r.drawerNavigation,"onUpdate:modelValue":e[0]||(e[0]=q=>r.drawerNavigation=q),location:"left",temporary:"",width:"320",class:"drawerStyle"},{default:D(()=>[Br((be(),He(I,{style:{"overflow-y":"scroll !important",height:"90vh !important"}},{default:D(()=>[w(p,{onClick:a.viewAnalytics,id:"analytics"},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-google-analytics")]),_:1}),ye(" Analytics ")]),_:1})]),_:1},8,["onClick"]),r.newDriver?(be(),He(p,{key:0,onClick:a.viewQuestions,id:"questions"},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-comment-question")]),_:1}),ye(" Questionnaire ")]),_:1})]),_:1},8,["onClick"])):We("",!0),w(p,{style:{},onClick:a.viewAnnouncements,id:"announcements"},{default:D(()=>[w(s,{style:{height:"40px","align-items":"center",display:"flex",width:"100% !important"}},{default:D(()=>[w(_,{style:{"font-size":"16px",padding:"0"}},{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-bullhorn")]),_:1}),ye(" dlivrd Announcements ")]),_:1}),w(b),w(S,{style:{"margin-right":"10px"},content:"2",color:"error"},{default:D(()=>[w(c,null,{default:D(()=>[ye("mdi-bell-outline")]),_:1})]),_:1})]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.viewLLC,id:"llc"},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-video-account")]),_:1}),ye(" LLC ")]),_:1})]),_:1},8,["onClick"]),w(p,{style:{cursor:"pointer"}},{default:D(()=>[w(E,null,{activator:D(({props:q})=>[w(s,Mi(q,{style:{display:"inline-flex","justify-content":"space-between",width:"100%"}}),{default:D(()=>[Pe("div",null,[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-account")]),_:1}),ye(" My Info ")]),w(c,{class:"menuIcon",style:{"margin-left":"58px"}},{default:D(()=>[ye("mdi-chevron-down")]),_:1})]),_:2},1040)]),default:D(()=>[(be(!0),ti(Oi,null,Zr(r.items,(q,U)=>(be(),He(p,{key:U,onClick:H=>a.viewDetails(U)},{default:D(()=>[q=="Banking Information"?(be(),He(s,{key:0},{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye(Zt(r.icons[U]),1)]),_:2},1024),ye(" "+Zt(q)+" ",1),i.badge?(be(),He(c,{key:0,class:"",style:{color:"red","margin-left":"12px"}},{default:D(()=>[ye("mdi-alert-circle")]),_:1})):We("",!0)]),_:2},1024)):q!="Banking Information"?(be(),He(s,{key:1},{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye(Zt(r.icons[U]),1)]),_:2},1024),ye(Zt(q),1)]),_:2},1024)):We("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),w(p,{style:{cursor:"pointer"}},{default:D(()=>[w(E,null,{activator:D(({props:q})=>[w(s,yL(hC(q)),{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-information")]),_:1}),ye(" Resources "),w(c,{class:"menuIcon",style:{"margin-left":"118px"}},{default:D(()=>[ye("mdi-chevron-down")]),_:1})]),_:2},1040)]),default:D(()=>[(be(!0),ti(Oi,null,Zr(r.resources,(q,U)=>(be(),He(p,{key:U,onClick:H=>a.viewDetails(U+6)},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye(Zt(r.resourcesIcon[U]),1)]),_:2},1024),ye(" "+Zt(q),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),r.newDriver?(be(),He(p,{key:1,onClick:a.submitRegistration,id:"analytics"},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{class:"menuIcon"},{default:D(()=>[ye("mdi-checkbox-multiple-marked-circle")]),_:1}),ye(" Submit ")]),_:1})]),_:1},8,["onClick"])):We("",!0)]),_:1})),[[V,{handler:a.onClickOutside}]])]),_:1},8,["modelValue"])}const tc=Kn(Dte,[["render",Rte]]);const Bte={components:{"step-progress":Mte,AtomSpinner:is,NavigationDrawer:tc},data(){return{drawer:!1,selectedLanguage:RO,width:window.innerWidth*.4,screenSize:screen.width,alert_error:null,QuestionsIsLoaded:!1,language_code:"English",session_validated:!0,video_src_1:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_1.mp4",video_src_2:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_2.mp4",video_src_3:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_3.mp4",video_src_4:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_4.mp4",imageThumb_1:FF,imageThumb_2:$F,imageThumb_3:NF,imageThumb_4:ES,currentModule:"",imageThumb:Ote,imageVideo:ES,viewedQuestions:[],loading:!1,loading_video:!0,checkModule:0,english:RO,spanish:Lte,model_otp:"",loadView:!1,submitquesitonloading:!1,cancelButtonText:"",videoOptions:{autoplay:!1,controls:!1,textTrackSettings:!1,tracks:[{kind:"",src:"../src/assets/intro.vtt",srclang:"se",label:"Spanish"}],sources:[{src:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_1.mp4",type:"video/mp4"}]},spanishSubtitle:[{kind:"captions",src:"myCaptions.vtt",srclang:"de",label:"german"}],autocomlete:!0,counting:!1,agreeButtonText:"",mySteps:["Step 1","Step 2","Step 3","Step 4","Final"],currentStep:2,alert_title:"",alert_description:"",dialog:!1,is_disabled_radio:!0,modules:[],username:"",testing:!0,moduleComplete:!0,onFirstModule:!0,count:0,verifyNumber:!1,tx_number:null,editNumber:!0,otp:null,verifyOTP:!1,referral:"",validationFailed:!1,name:"",questionsPending:!0}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name"),this.sessionValidator()},mounted(){},methods:{init(){Twilio.FlexWebChat.MessagingCanvas.defaultProps.memberDisplayOptions={yourDefaultName:this.username,yourFriendlyNameOverride:!1},this.updateSavedStage(0),this.screenSize>1024?this.width=window.innerWidth*.4:this.width=window.innerWidth*.8},startCountdown:function(){this.counting=!0},onCountdownEnd:function(){this.counting=!1},updateSavedStage(t){this.currentModule=this.getCurrentModule(),localStorage.setItem("currentStage",t),t==0?(this.onFirstModule=!1,this.moduleComplete=!0):t==this.modules.length?(this.onFirstModule=!0,this.moduleComplete=!1):(this.onFirstModule=!0,this.moduleComplete=!0)},getQuestions(){var t=this.baseurl+"get_question_stat";const e={};Ai.get(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then(i=>{if(i.status==200){var n=localStorage.getItem("stage");n==""||n==0?this.checkModule=0:n=="Completed"||n==5?(this.checkModule=5,this.questionnaireModuleComplete(),this.QuestionsIsLoaded=!0):(n=n.split("_",2),n.length==2?(n=n[1],this.checkModule=parseInt(n),this.checkModule-=1):this.checkModule=parseInt(n),this.checkModule==4?this.is_disabled_radio=!1:this.is_disabled_radio=!0,this.modules=i.data[0].module_question,this.QuestionsIsLoaded=!0,this.loading_video=!1,this.viewedQuestions=this.modules[this.getCurrentModule()][this.language_code],this.updateSavedStage(this.checkModule))}}).catch(i=>{this.$router.push("/")})},getCurrentModule(){return"Module_"+(this.checkModule+1).toString().replace("0","")},checkprogress(){this.is_disabled_radio=!1},selected_option(t,e){this.viewedQuestions[t].selectedAnswer=e},logout(){this.verifyOTP=!1,this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel",this.alert_error=null},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;(n.Success||n.Failure)&&(localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.dialog=!1,this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},language(t){t=="English"?(this.language_code="English",this.selectedLanguage=this.english):t=="Spanish"&&(this.language_code="Spanish",this.selectedLanguage=this.spanish),this.viewedQuestions=this.modules[this.getCurrentModule()][this.language_code]},previousForm(){this.checkModule>0?(this.checkModule--,this.updateSavedStage(this.checkModule),this.viewedQuestions=this.modules[this.getCurrentModule()][this.language_code]):this.onFirstModule=!1},submitAnswers(){var t=null,e=!0,i={};for(var n in this.viewedQuestions)if(this.viewedQuestions[n].selectedAnswer==null){if(!this.testing){e=!1;break}}else if(this.viewedQuestions[n].Answer==this.viewedQuestions[n].selectedAnswer){this.$refs["_module_"+this.checkModule+"_q_"+n+"_i_"+this.viewedQuestions[n].Answer][0].$el.style.color="#00FF00";var r=this.viewedQuestions[n].Answer;i[n]=r}else{if(this.$refs["_module_"+this.checkModule+"_q_"+n+"_i_"+this.viewedQuestions[n].selectedAnswer][0].$el.style.color="#FF0000",t=this.$refs["_module_"+this.checkModule+"_q_"+n+"_i_"+this.viewedQuestions[n].selectedAnswer][0],this.viewedQuestions[n].Answer==-1){this.$refs["_module_"+this.checkModule+"_q_"+n+"_i_"+this.viewedQuestions[n].selectedAnswer][0].$el.style.color="#00FF00",i[n]=this.viewedQuestions[n].Answer;continue}e=!1}var a={};a[this.language_code]=i;var c={};c[this.getCurrentModule()]=a,c.identity=this.username,this.getCurrentModule();var s=this.baseurl+"onboard_verifyStage";const p={data_to_verify:c,update_stage_only:!0};this.submitquesitonloading=!0,Ai.post(s,p,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(_=>{if(_.status==200){this.verifyNumber=!1,this.submitquesitonloading=!1;var b=_.data;b.Failure?(b.Failure=="Session Expired. Please login again."&&(this.verifyOTP=!1,this.alert_title="Warning",this.alert_description="Session Expired.",this.alert_error=null,this.dialog=!0,this.agreeButtonText="logout"),b.Failure=="Number Already On Hubspot"?(this.verifyOTP=!1,this.alert_title="Warning",this.alert_description="Account already exists.",this.alert_error=null,this.dialog=!0,this.agreeButtonText="logout"):(this.alert_title="Warning",this.alert_description="Please answer all the questions correctly.",this.alert_error=null,this.dialog=!0,this.agreeButtonText="Ok",this.scrollQuestionIntoView(t))):b.Success&&e&&(this.checkModule++,this.checkModule<5?(this.verifyNumber=!1,this.viewedQuestions=[],this.updateSavedStage(this.checkModule),this.viewedQuestions=this.modules[this.getCurrentModule()][this.language_code],this.questionsScrollToTop(),this.checkModule!=4?this.is_disabled_radio=!0:this.is_disabled_radio=!1):this.questionnaireModuleComplete())}}).catch(()=>{})},questionnaireModuleComplete(){localStorage.setItem("questionnaire",!1),this.alert_title="Completed",this.alert_description="You have answered all the questions successfully.",this.dialog=!0,this.agreeButtonText="Okay",this.questionsPending=!1},questionnaireSolved(){this.$router.push("/analytics")},clearSavedFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage","")},sessionValidator(){this.loading=!1;var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;if(n.Success)if(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,localStorage.setItem("phoneverified",n.phone_verified),localStorage.setItem("stage",n.stage),this.init(),this.session_validated=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,localStorage.getItem("stage")=="Completed"){this.questionnaireModuleComplete();return}else this.getQuestions();else n.Failure=="OnBoarding Not Allowed In Your Region"?(this.alert_title="Update",this.alert_description="Hey it looks like we have a lot of drivers in this market right now. Don’t worry we’ve added you to the waitlist and when have some more room we’ll reach out and get you signed up",this.alert_error=null,this.dialog=!0,this.agreeButtonText="logout"):n.Failure&&(this.clearSavedFields(),this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},get_otp(){this.loading=!1;var t=this.baseurl+"mobile_code_generator";const e={identity:this.username,mobile_number:this.tx_number};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;n.Success?this.checkOTP():n.Failure=="session Expired"?(this.alert_title="Warning",this.alert_description="Session Expired",this.agreeButtonText="logout",this.alert_error=null,this.dialog=!0,this.verifyOTP=!1):this.alert_error=n.Failure}}).catch(()=>{this.alert_title="Warning",this.alert_description="Password not updated/ Try Again!",this.dialog=!0,this.alert_error=null,this.agreeButtonText="Ok"})},verify_otp_code(){this.loading=!1;var t=this.baseurl+"mobile_code_verifier";const e={identity:this.username,verification_code:this.model_otp};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;n.Success?this.OnboardComplete():n.Failure=="session Expired"?(this.alert_title="Warning",this.alert_description="Session Expired",this.agreeButtonText="logout",this.alert_error=null,this.dialog=!0,this.verifyOTP=!1):this.alert_error=n.Failure}}).catch(()=>{this.alert_title="Warning",this.alert_description="Password not updated/ Try Again!",this.agreeButtonText="Ok",this.dialog=!0,this.alert_error=null})},contactNumberVerification(){this.editNumber=!this.editNumber,this.editNumber==!1&&this.$refs.tf_contact.focus()},checkOTP(){this.verifyNumber=!1,this.alert_title="Verify Number",this.alert_description="Please enter the code sent to your phone below to verify.",this.verifyOTP=!0,this.alert_error=null,this.agreeButtonText="Verify",this.startCountdown()},OnboardComplete(){this.verifyNumber=!1,this.alert_title="Congratulations !!!",this.alert_description="You have successfully onboarded the dlivrd Driver Portal.",this.verifyOTP=!0,this.alert_error=null,this.agreeButtonText="logout",this.verifyOTP=!1,this.startCountdown()},optVerification(){this.model_otp==""||this.verify_otp_code()},scrollQuestionIntoView(t){t.scrollIntoView({behavior:"smooth"})},questionsScrollToTop(){var t=document.getElementById("video_block");t.scrollIntoView()},closeDrawer(){this.drawer=!1}}},Fte=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"80vw",position:"fixed",top:"40%",left:"7%",opacity:"0.1"},src:_r},null,-1),$te={style:{width:"100vw","text-align":"center"}},Nte={key:4,style:{"margin-top":"10px","font-weight":"bold",color:"red","margin-right":"10px","margin-left":"10px"}},zte={style:{"text-align":"justify","margin-bottom":"15px","font-size":"18px"}},Vte={id:"next_button"};function Ute(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-text-field"),S=ue("v-icon"),E=ue("v-row"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-dialog"),U=ue("v-app-bar-nav-icon"),H=ue("v-toolbar-title"),Z=ue("v-img"),ne=ue("v-avatar"),ie=ue("v-layout"),oe=ue("v-list-item"),pe=ue("v-list"),de=ue("v-menu"),fe=ue("v-app-bar"),ge=ue("NavigationDrawer"),we=ue("step-progress"),Ie=ue("video-player"),Oe=ue("v-col"),ke=ue("v-radio"),Ee=ue("v-radio-group"),Qe=ue("v-main");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[Fte,w(E,{justify:"center"},{default:D(()=>[w(q,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[4]||(e[4]=gt=>r.dialog=gt),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),r.verifyNumber?(be(),He(E,{key:1,style:{"align-items":"center"}},{default:D(()=>[w(b,{modelValue:r.tx_number,"onUpdate:modelValue":e[0]||(e[0]=gt=>r.tx_number=gt),"hide-details":"",style:{"margin-left":"30px","margin-right":"20px"},ref:"tf_contact",readonly:r.editNumber},null,8,["modelValue","readonly"]),this.editNumber?We("",!0):(be(),He(S,{key:0,style:{"margin-right":"20px"},onClick:a.contactNumberVerification},{default:D(()=>[ye("mdi-file-edit")]),_:1},8,["onClick"])),this.editNumber?(be(),He(S,{key:1,style:{"margin-right":"20px",opacity:"0.5"},onClick:a.contactNumberVerification},{default:D(()=>[ye("mdi-file-edit")]),_:1},8,["onClick"])):We("",!0)]),_:1})):We("",!0),r.verifyOTP?(be(),He(b,{key:2,modelValue:r.model_otp,"onUpdate:modelValue":e[1]||(e[1]=gt=>r.model_otp=gt),label:"Enter OTP","hide-details":"",style:{"margin-left":"30px","margin-right":"20px"}},null,8,["modelValue"])):We("",!0),r.alert_error!=null?(be(),He(_,{key:3,style:{"overflow-y":"scroll","text-align":"left",color:"red","font-size":"12px",width:"100%","padding-top":"0px"}},{default:D(()=>[ye(Zt(r.alert_error),1)]),_:1})):We("",!0),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.cancelButtonText=="Cancel"?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[2]||(e[2]=gt=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):(be(),He(R,{key:1,style:{display:"none"}})),r.agreeButtonText=="Ok"?(be(),He(R,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[3]||(e[3]=gt=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="Okay"?(be(),He(R,{key:3,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.questionnaireSolved},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="logout"?(be(),He(R,{key:4,"prepend-icon":"mdi-logout",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Verify"?(be(),He(R,{key:5,"prepend-icon":"mdi-shield-check",style:{"background-color":"#7efb01"},variant:"text",disabled:r.counting,onClick:a.get_otp},null,8,["disabled","onClick"])):We("",!0),r.agreeButtonText=="Verify"?(be(),He(R,{key:6,"prepend-icon":"mdi-shield-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.optVerification},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(ie,null,{default:D(()=>[w(fe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(U,{variant:"text",onClick:e[5]||(e[5]=zl(gt=>r.drawer=!r.drawer,["stop"]))}),w(H,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Questionnaire")]),_:1}),w(de,{width:"220px"},{activator:D(({props:gt})=>[w(R,Mi({icon:""},gt),{default:D(()=>[w(ne,{class:"accountIcon",size:"38"},{default:D(()=>[w(Z,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(pe,null,{default:D(()=>[w(oe,null,{default:D(()=>[w(ie,{style:{"justify-content":"center"}},{default:D(()=>[w(ne,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(Z,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(oe,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(ge,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),r.questionsPending?(be(),He(Qe,{key:0},{default:D(()=>[r.session_validated?(be(),He(E,{key:0},{default:D(()=>[w(Oe,{style:{"text-align":"center","margin-top":"10px"}},{default:D(()=>[w(ie,{style:{position:"fixed",width:"100vw","background-color":"white"}},{default:D(()=>[Pe("div",$te,[r.submitquesitonloading?(be(),He(c,{key:0,"animation-duration":1e3,size:200,style:{top:"100%"},color:"#0AFD01",class:"loading_bar"})):We("",!0),w(we,{activeColor:"#7EFB01",style:{width:"80vw"},steps:r.mySteps,"current-step":r.checkModule,"icon-class":"fa fa-check"},null,8,["steps","current-step"])])]),_:1}),w(Oe,{id:"video_block",style:{"margin-top":"150px"}},{default:D(()=>[!r.loading_video&&r.currentModule=="Module_1"?(be(),He(Ie,{key:0,src:r.video_src_1,poster:r.imageThumb_1,controls:"",volume:.6,onEnded:e[6]||(e[6]=gt=>a.checkprogress()),width:r.width,"onUpdate:width":e[7]||(e[7]=gt=>r.width=gt)},null,8,["src","poster","volume","width"])):We("",!0),!r.loading_video&&r.currentModule=="Module_2"?(be(),He(Ie,{key:1,src:r.video_src_2,poster:r.imageThumb_2,controls:"",volume:.6,onEnded:e[8]||(e[8]=gt=>a.checkprogress()),width:r.width,"onUpdate:width":e[9]||(e[9]=gt=>r.width=gt)},null,8,["src","poster","volume","width"])):We("",!0),!r.loading_video&&r.currentModule=="Module_3"?(be(),He(Ie,{key:2,src:r.video_src_3,poster:r.imageThumb_3,controls:"",volume:.6,onEnded:e[10]||(e[10]=gt=>a.checkprogress()),width:r.width,"onUpdate:width":e[11]||(e[11]=gt=>r.width=gt)},null,8,["src","poster","volume","width"])):We("",!0),!r.loading_video&&r.currentModule=="Module_4"?(be(),He(Ie,{key:3,src:r.video_src_4,poster:r.imageThumb_4,controls:"",volume:.6,onEnded:e[12]||(e[12]=gt=>a.checkprogress()),width:r.width,"onUpdate:width":e[13]||(e[13]=gt=>r.width=gt)},null,8,["src","poster","volume","width"])):We("",!0),r.is_disabled_radio&&r.checkModule!=4&&!r.loading_video?(be(),ti("h3",Nte,"To Unlock Questions Please View The Entire Video ")):We("",!0)]),_:1})]),_:1})]),_:1})):We("",!0),r.session_validated?(be(),He(Oe,{key:1,justify:"center","align-self":"center",class:"adjustQuestions",style:{"text-align":"-webkit-center"}},{default:D(()=>[r.QuestionsIsLoaded?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01"})),(be(!0),ti(Oi,null,Zr(r.viewedQuestions,(gt,nt)=>(be(),He(Oe,{key:nt,style:{"max-width":"1024px"}},{default:D(()=>[w(Oe,{class:"questionCards"},{default:D(()=>[Pe("h3",zte,Zt(nt),1),w(Ee,{disabled:r.is_disabled_radio,"hide-details":""},{default:D(()=>[(be(!0),ti(Oi,null,Zr(gt.Options,(ft,Tt)=>(be(),He(ke,{id:`_module_${r.checkModule}_q_${nt}_i_${Tt}`,ref_for:!0,ref:`_module_${r.checkModule}_q_${nt}_i_${Tt}`,label:ft,value:ft,name:"option",style:{"margin-bottom":"5px","text-align":"left !important",color:"#000000DE"},onClick:pt=>a.selected_option(nt,Tt)},null,8,["id","label","value","onClick"]))),256))]),_:2},1032,["disabled"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):We("",!0),r.loading_video?We("",!0):(be(),He(E,{key:2,style:{"text-align":"center","margin-bottom":"50px"}},{default:D(()=>[w(Oe,null,{default:D(()=>[Pe("div",Vte,[r.onFirstModule?(be(),He(R,{key:0,class:"btn_home_green","prepend-icon":"mdi-arrow-left",onClick:a.previousForm,disabled:r.is_disabled_radio,style:{width:"auto"}},{default:D(()=>[ye("Previous")]),_:1},8,["onClick","disabled"])):We("",!0),r.moduleComplete?(be(),He(R,{key:1,class:"btn_home_green","prepend-icon":"mdi-arrow-right",onClick:a.submitAnswers,disabled:r.is_disabled_radio},{default:D(()=>[ye("Next")]),_:1},8,["onClick","disabled"])):We("",!0)])]),_:1})]),_:1}))]),_:1})):We("",!0)]),_:1})]),_:1})):We("",!0)],64)}const jte=Kn(Bte,[["render",Ute]]);const Hte={components:{TextFieldItem:sm,SignUpHeader:$y,AtomSpinner:is},data(){return{userPassword:"",confirmPassword:"",dialog:!1,alert_title:"",alert_description:"",loading:!0,loadingToken:!0,tokenVerified:!1,value:String,valueConfirmPassword:String,redirectTo:null}},computed:{tokenId:function(){return this.$route.params.tokenId}},mounted(){this.verifyToken()},methods:{verifyToken(){this.tokenVerified=!1;var t="",e=this.baseurl+"onboard_resetPassword_verifyToken";const i={token:this.tokenId};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t}}).then(n=>{n.status==200&&(this.tokenVerified=!0)}).catch(()=>{this.alert_title="OOOPS!!!",this.alert_description="Link not found",this.dialog=!0,this.agreeButtonText="Ok"})},requestResetPass(){if(this.userPassword==""||this.confirmPassword=="")this.alert_title="Warning",this.alert_description="Please fill all the fields",this.dialog=!0,this.agreeButtonText="Ok";else if(this.userPassword!=""&&this.confirmPassword!="")if(this.userPassword==this.confirmPassword){this.loading=!1;var t="",e=this.baseurl+"onboard_resetPassword";const i={token:this.tokenId,new_password:this.userPassword};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t}}).then(n=>{console.log("Reset Password"),console.log(n);var r=n.data;this.loading=!0,n.status==200&&(this.redirectTo=r.redirect,this.alert_title="Success",this.alert_description="Password updated successfully",this.dialog=!0,this.agreeButtonText="Ok")}).catch(()=>{this.alert_title="Warning",this.alert_description="Password not updated/ Try Again!",this.dialog=!0,this.agreeButtonText="Ok"})}else this.alert_title="Warning",this.alert_description="Password and confirm password do not match",this.dialog=!0,this.agreeButtonText="Ok"},confirmResetPassword(){this.redirectTo=="on"?this.$router.push("/"):this.redirectTo=="open"&&(window.location.href="https://urgent.dlivrd.io/")}}},Gte={style:{width:"100%","text-align":"-webkit-center"}};function Wte(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-col"),V=ue("SignUpHeader"),q=ue("v-text-field"),U=ue("TextFieldItem"),H=ue("atom-spinner"),Z=ue("v-container");return be(),He(Z,{"fill-height":"",fluid:"",class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[1]||(e[1]=ne=>r.dialog=ne),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.alert_title=="Success"?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:a.confirmResetPassword},{default:D(()=>[ye(" Okay ")]),_:1},8,["onClick"])):r.alert_title=="Warning"?(be(),He(_,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ne=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),r.tokenVerified?(be(),He(I,{key:0},{default:D(()=>[w(R,{md:"2"}),w(R,{cols:"12",sm:"12",md:"4","align-self":"center"},{default:D(()=>[w(V)]),_:1}),w(R,{cols:"12",sm:"12",md:"4",style:{"align-self":"center"}},{default:D(()=>[w(U,null,{heading:D(()=>[ye("Password")]),default:D(()=>[w(q,{required:"",modelValue:r.userPassword,"onUpdate:modelValue":e[2]||(e[2]=ne=>r.userPassword=ne),"hide-details":"",placeholder:"Enter new password","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",value:r.userPassword,"append-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:append":e[3]||(e[3]=()=>r.value=!r.value),type:r.value?"password":"text",density:"comfortable",onKeyup:Vl(a.requestResetPass,["enter"])},null,8,["modelValue","value","append-icon","type","onKeyup"])]),_:1}),w(U,null,{heading:D(()=>[ye("Confirm Password")]),default:D(()=>[w(q,{required:"",modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=ne=>r.confirmPassword=ne),"hide-details":"",placeholder:"Confirm password","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",valueConfirmPassword:r.confirmPassword,"append-icon":r.valueConfirmPassword?"mdi-eye-off":"mdi-eye","onClick:append":e[5]||(e[5]=()=>r.valueConfirmPassword=!r.valueConfirmPassword),type:r.valueConfirmPassword?"password":"text",density:"comfortable",onKeyup:Vl(a.requestResetPass,["enter"])},null,8,["modelValue","valueConfirmPassword","append-icon","type","onKeyup"])]),_:1}),w(R,{"align-self":"center",sm:"12",style:{"text-align":"center","margin-top":"10px"}},{default:D(()=>[r.loading?(be(),He(_,{key:0,class:"btn_green",onClick:a.requestResetPass},{default:D(()=>[ye("Reset Password")]),_:1},8,["onClick"])):We("",!0),Pe("div",Gte,[r.loading?We("",!0):(be(),He(H,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01"}))])]),_:1})]),_:1}),w(R,{md:"2"})]),_:1})):We("",!0)]),_:1})}const qte=Kn(Hte,[["render",Wte]]);const Zte={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{days:["Days/ Time","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],breakfastTime:["Breakfast (before 10am)","","","","","","",""],lunchTime:["Lunch (10am - 2pm)","","","","","","",""],dinnerTime:["Dinner (After 2pm)","","","","","","",""],drawer:!1,loading:!0,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,username:"",agreeButtonText:"",cancelButtonText:"",checkSlotSelection:{},save_slots:{},loadView:!1,loadingTableData:!0,name:"",validationFailed:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},methods:{selectSlot(t,e,i){if(this.save_slots[t]==null&&(this.save_slots[t]=[]),this.checkSlotSelection["time_"+i+"_q_"+t+"_index_"+e]==!0){if(this.$refs["time_"+i+"_q_"+t+"_index_"+e][0].$el.style.background="transparent",this.$refs["time_"+i+"_q_"+t+"_index_"+e+"_icon"][0].$el.style.visibility="hidden",this.checkSlotSelection["time_"+i+"_q_"+t+"_index_"+e]=!1,t in this.save_slots){if(i=="Breakfast")for(var e=0;e<this.save_slots[t].length;e++)this.save_slots[t][e]==0&&this.save_slots[t].splice(e,1);if(i=="Lunch")for(var e=0;e<this.save_slots[t].length;e++)this.save_slots[t][e]==1&&this.save_slots[t].splice(e,1);if(i=="Dinner")for(var e=0;e<this.save_slots[t].length;e++)this.save_slots[t][e]==2&&this.save_slots[t].splice(e,1)}}else e>0&&(this.$refs["time_"+i+"_q_"+t+"_index_"+e][0].$el.style.background="#0AFD01",this.$refs["time_"+i+"_q_"+t+"_index_"+e+"_icon"][0].$el.style.visibility="visible",this.checkSlotSelection["time_"+i+"_q_"+t+"_index_"+e]=!0,i=="Breakfast"&&this.save_slots[t].push(0),i=="Lunch"&&this.save_slots[t].push(1),i=="Dinner"&&this.save_slots[t].push(2))},submitPreferredTimeDetails(){this.loading=!1;var t=this.baseurl+"update_rider_pref_slots";const e={identity:this.username,pref_slots:this.save_slots};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{i.data.Success?(this.alert_title="Success",this.alert_description="Preferred time slots saved successfully.",this.alert_error=null,this.dialog=!0,this.agreeButtonText="Okay"):i.data.Failure=="Session Expired. Please login again."?this.$router.push("/"):(this.alert_title="Warning",this.alert_description="Preferred time slots not updated. Please try again!",this.alert_error=null,this.dialog=!0,this.agreeButtonText="Okay"),this.loading=!0}).catch(()=>{this.alert_title="Warning",this.alert_description="Preferred time slots not updated. Please try again!",this.dialog=!0,this.agreeButtonText="logout"})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},getPreferredTimeSlots(){var t=this.baseurl+"get_rider_pref_slots";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{this.loadingTableData=!1;var n=i.data,r=0;for(var a in n.pref_slots){for(var c=0;c<this.days.length;c++)a==this.days[c]&&(r=c);for(var c in n.pref_slots[a]){var s="";n.pref_slots[a][c]==0?s="time_Breakfast_q_"+a+"_index_"+r:n.pref_slots[a][c]==1?s="time_Lunch_q_"+a+"_index_"+r:s="time_Dinner_q_"+a+"_index_"+r,this.$refs[s][0].$el.style.background="#0AFD01",this.$refs[s+"_icon"][0].$el.style.visibility="visible",this.checkSlotSelection[s]=!0,this.save_slots[a]==null?(this.save_slots[a]=[],this.save_slots[a].push(n.pref_slots[a][c])):this.save_slots[a].push(n.pref_slots[a][c])}}}).catch(()=>{this.clearFields(),this.$router.push("/")})},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.getPreferredTimeSlots()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},closeDrawer(){this.drawer=!1}}},Yte=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"80vw",position:"fixed",top:"40%",left:"7%",opacity:"0.1"},src:_r},null,-1);function Xte(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-col"),ge=ue("v-icon"),we=ue("v-main"),Ie=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[Yte,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=Oe=>r.dialog=Oe),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[w(p,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:0,style:{color:"red","padding-top":"0px"},innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=Oe=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=Oe=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Ie,{fluid:"",style:{"padding-right":"0px","padding-left":"0px"}},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(Oe=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Preferred Availability")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:Oe})=>[w(S,Mi({icon:""},Oe),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(we,null,{default:D(()=>[w(R,{class:"pageHeadingStyle"},{default:D(()=>[w(fe,{style:{"text-align":"center"}},{default:D(()=>[w(_,null,{default:D(()=>[ye("Please select the time slots in which you would prefer to make order deliveries.")]),_:1})]),_:1})]),_:1}),w(fe,{class:"layoutStyle screenLayout"},{default:D(()=>[r.loadingTableData?(be(),He(c,{key:0,"animation-duration":1e3,size:130,color:"#0AFD01",class:"loading_bar"})):We("",!0),w(R,{class:"tableHeadRow"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.days,(Oe,ke)=>(be(),He(fe,{key:ke,class:Zs(ke==r.lunchTime.length-1?"headerCellColorSmall":"headerCellColor")},{default:D(()=>[w(_,{class:"headerTextStyle"},{default:D(()=>[ye(Zt(Oe),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),w(R,{class:"tableRowContentStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.breakfastTime,(Oe,ke)=>(be(),He(fe,{key:ke,class:Zs(ke==r.lunchTime.length-1?"tableCellColorSmall":"tableCellColor"),onClick:Ee=>a.selectSlot(r.days[ke],ke,"Breakfast")},{default:D(()=>[w(_,{class:"tableTextStyle",id:`time_Breakfast_q_${r.days[ke]}_index_${ke}`,ref_for:!0,ref:`time_Breakfast_q_${r.days[ke]}_index_${ke}`},{default:D(()=>[ye(Zt(Oe)+" ",1),ke!=0?(be(),He(ge,{key:0,size:"50",class:"checkIconStyle",id:`time_Breakfast_q_${r.days[ke]}_index_${ke}_icon`,ref_for:!0,ref:`time_Breakfast_q_${r.days[ke]}_index_${ke}_icon`},{default:D(()=>[ye("mdi-checkbox-marked-circle-outline")]),_:2},1032,["id"])):We("",!0)]),_:2},1032,["id"])]),_:2},1032,["class","onClick"]))),128))]),_:1}),w(R,{class:"tableRowContentStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.lunchTime,(Oe,ke)=>(be(),He(fe,{key:ke,class:Zs(ke==r.lunchTime.length-1?"tableCellColorSmall":"tableCellColor"),onClick:Ee=>a.selectSlot(r.days[ke],ke,"Lunch")},{default:D(()=>[w(_,{class:"tableTextStyle",id:`time_Lunch_q_${r.days[ke]}_index_${ke}`,ref_for:!0,ref:`time_Lunch_q_${r.days[ke]}_index_${ke}`},{default:D(()=>[ye(Zt(Oe)+" ",1),ke!=0?(be(),He(ge,{key:0,size:"50",class:"checkIconStyle",id:`time_Lunch_q_${r.days[ke]}_index_${ke}_icon`,ref_for:!0,ref:`time_Lunch_q_${r.days[ke]}_index_${ke}_icon`},{default:D(()=>[ye("mdi-checkbox-marked-circle-outline")]),_:2},1032,["id"])):We("",!0)]),_:2},1032,["id"])]),_:2},1032,["class","onClick"]))),128))]),_:1}),w(R,{"align-content":"center",justify:"center",class:"tableRowContentStyle",style:{"margin-bottom":"0px"}},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.dinnerTime,(Oe,ke)=>(be(),He(fe,{key:ke,class:Zs(ke==r.lunchTime.length-1?"dinnerCellColorSmall":"dinnerCellColor"),onClick:Ee=>a.selectSlot(r.days[ke],ke,"Dinner")},{default:D(()=>[w(_,{class:"tableTextStyle",id:`time_Dinner_q_${r.days[ke]}_index_${ke}`,ref_for:!0,ref:`time_Dinner_q_${r.days[ke]}_index_${ke}`},{default:D(()=>[ye(Zt(Oe)+" ",1),ke!=0?(be(),He(ge,{key:0,size:"50",class:"checkIconStyle",id:`time_Dinner_q_${r.days[ke]}_index_${ke}_icon`,ref_for:!0,ref:`time_Dinner_q_${r.days[ke]}_index_${ke}_icon`},{default:D(()=>[ye("mdi-checkbox-marked-circle-outline")]),_:2},1032,["id"])):We("",!0)]),_:2},1032,["id"])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),w(fe,{class:"btnLayout"},{default:D(()=>[r.loading?(be(),He(S,{key:0,"prepend-icon":"mdi-update",class:"buttonStyle",variant:"text",onClick:a.submitPreferredTimeDetails},{default:D(()=>[ye(" Update ")]),_:1},8,["onClick"])):We("",!0),r.loading?We("",!0):(be(),He(c,{key:1,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Kte=Kn(Zte,[["render",Xte]]);function zF(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Wx(t){return zF(t)?new Date(t.getTime()):t==null?new Date(NaN):new Date(t)}function Qte(t){return zF(t)&&!isNaN(t.getTime())}function VF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(e>=0&&e<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var i=Wx(t),n=i.getDay(),r=(n+7-e)%7;return i.setDate(i.getDate()-r),i.setHours(0,0,0,0),i}function UF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.firstDayOfWeek,n=i===void 0?0:i,r=e.firstWeekContainsDate,a=r===void 0?1:r;if(!(a>=1&&a<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var c=Wx(t),s=c.getFullYear(),p=new Date(0),_=s+1;_>=s-1&&(p.setFullYear(_,0,a),p.setHours(0,0,0,0),p=VF(p,n),!(c.getTime()>=p.getTime()));_--);return p}function Jk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.firstDayOfWeek,n=i===void 0?0:i,r=e.firstWeekContainsDate,a=r===void 0?1:r,c=Wx(t),s=VF(c,n),p=UF(c,{firstDayOfWeek:n,firstWeekContainsDate:a}),_=s.getTime()-p.getTime();return Math.round(_/(7*24*3600*1e3))+1}var eE={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},Jte=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function Hu(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i="".concat(Math.abs(t)),n=t<0?"-":"";i.length<e;)i="0".concat(i);return n+i}function BO(t){return Math.round(t.getTimezoneOffset()/15)*15}function FO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=t>0?"-":"+",n=Math.abs(t),r=Math.floor(n/60),a=n%60;return i+Hu(r,2)+e+Hu(a,2)}var $O=function(e,i,n){var r=e<12?"AM":"PM";return n?r.toLocaleLowerCase():r},Rv={Y:function(e){var i=e.getFullYear();return i<=9999?"".concat(i):"+".concat(i)},YY:function(e){return Hu(e.getFullYear(),4).substr(2)},YYYY:function(e){return Hu(e.getFullYear(),4)},M:function(e){return e.getMonth()+1},MM:function(e){return Hu(e.getMonth()+1,2)},MMM:function(e,i){return i.monthsShort[e.getMonth()]},MMMM:function(e,i){return i.months[e.getMonth()]},D:function(e){return e.getDate()},DD:function(e){return Hu(e.getDate(),2)},H:function(e){return e.getHours()},HH:function(e){return Hu(e.getHours(),2)},h:function(e){var i=e.getHours();return i===0?12:i>12?i%12:i},hh:function(){var e=Rv.h.apply(Rv,arguments);return Hu(e,2)},m:function(e){return e.getMinutes()},mm:function(e){return Hu(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return Hu(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return Hu(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return Hu(e.getMilliseconds(),3)},d:function(e){return e.getDay()},dd:function(e,i){return i.weekdaysMin[e.getDay()]},ddd:function(e,i){return i.weekdaysShort[e.getDay()]},dddd:function(e,i){return i.weekdays[e.getDay()]},A:function(e,i){var n=i.meridiem||$O;return n(e.getHours(),e.getMinutes(),!1)},a:function(e,i){var n=i.meridiem||$O;return n(e.getHours(),e.getMinutes(),!0)},Z:function(e){return FO(BO(e),":")},ZZ:function(e){return FO(BO(e))},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()},w:function(e,i){return Jk(e,{firstDayOfWeek:i.firstDayOfWeek,firstWeekContainsDate:i.firstWeekContainsDate})},ww:function(e,i){return Hu(Rv.w(e,i),2)}};function tE(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=Wx(t);if(!Qte(r))return"Invalid Date";var a=i.locale||eE;return n.replace(Jte,function(c,s){return s||(typeof Rv[c]=="function"?"".concat(Rv[c](r,a)):c)})}function NO(t){return iie(t)||tie(t)||eie()}function eie(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function tie(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function iie(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function zO(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function nie(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?zO(i,!0).forEach(function(n){Wf(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zO(i).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function rie(t,e){return aie(t)||oie(t,e)||sie()}function sie(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function oie(t,e){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]"){var i=[],n=!0,r=!1,a=void 0;try{for(var c=t[Symbol.iterator](),s;!(n=(s=c.next()).done)&&(i.push(s.value),!(e&&i.length===e));n=!0);}catch(p){r=!0,a=p}finally{try{!n&&c.return!=null&&c.return()}finally{if(r)throw a}}return i}}function aie(t){if(Array.isArray(t))return t}function Wf(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var lie=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,jF=/\d/,qf=/\d\d/,uie=/\d{3}/,cie=/\d{4}/,r_=/\d\d?/,die=/[+-]\d\d:?\d\d/,HF=/[+-]?\d+/,hie=/[+-]?\d+(\.\d{1,3})?/,iE="year",qx="month",GF="day",WF="hour",qF="minute",ZF="second",nE="millisecond",YF={},ls=function(e,i,n){var r=Array.isArray(e)?e:[e],a;typeof n=="string"?a=function(s){var p=parseInt(s,10);return Wf({},n,p)}:a=n,r.forEach(function(c){YF[c]=[i,a]})},fie=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Ny=function(e){return function(i){var n=i[e];if(!Array.isArray(n))throw new Error("Locale[".concat(e,"] need an array"));return new RegExp(n.map(fie).join("|"))}},zy=function(e,i){return function(n,r){var a=r[e];if(!Array.isArray(a))throw new Error("Locale[".concat(e,"] need an array"));var c=a.indexOf(n);if(c<0)throw new Error("Invalid Word");return Wf({},i,c)}};ls("Y",HF,iE);ls("YY",qf,function(t){var e=new Date().getFullYear(),i=Math.floor(e/100),n=parseInt(t,10);return n=(n>68?i-1:i)*100+n,Wf({},iE,n)});ls("YYYY",cie,iE);ls("M",r_,function(t){return Wf({},qx,parseInt(t,10)-1)});ls("MM",qf,function(t){return Wf({},qx,parseInt(t,10)-1)});ls("MMM",Ny("monthsShort"),zy("monthsShort",qx));ls("MMMM",Ny("months"),zy("months",qx));ls("D",r_,GF);ls("DD",qf,GF);ls(["H","h"],r_,WF);ls(["HH","hh"],qf,WF);ls("m",r_,qF);ls("mm",qf,qF);ls("s",r_,ZF);ls("ss",qf,ZF);ls("S",jF,function(t){return Wf({},nE,parseInt(t,10)*100)});ls("SS",qf,function(t){return Wf({},nE,parseInt(t,10)*10)});ls("SSS",uie,nE);function pie(t){return t.meridiemParse||/[ap]\.?m?\.?/i}function mie(t){return"".concat(t).toLowerCase().charAt(0)==="p"}ls(["A","a"],pie,function(t,e){var i=typeof e.isPM=="function"?e.isPM(t):mie(t);return{isPM:i}});function gie(t){var e=t.match(/([+-]|\d\d)/g)||["-","0","0"],i=rie(e,3),n=i[0],r=i[1],a=i[2],c=parseInt(r,10)*60+parseInt(a,10);return c===0?0:n==="+"?-c:+c}ls(["Z","ZZ"],die,function(t){return{offset:gie(t)}});ls("x",HF,function(t){return{date:new Date(parseInt(t,10))}});ls("X",hie,function(t){return{date:new Date(parseFloat(t)*1e3)}});ls("d",jF,"weekday");ls("dd",Ny("weekdaysMin"),zy("weekdaysMin","weekday"));ls("ddd",Ny("weekdaysShort"),zy("weekdaysShort","weekday"));ls("dddd",Ny("weekdays"),zy("weekdays","weekday"));ls("w",r_,"week");ls("ww",qf,"week");function _ie(t,e){if(t!==void 0&&e!==void 0){if(e){if(t<12)return t+12}else if(t===12)return 0}return t}function vie(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,i=[0,0,1,0,0,0,0],n=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],r=!0,a=0;a<7;a++)t[a]===void 0?i[a]=r?n[a]:i[a]:(i[a]=t[a],r=!1);return i}function yie(t,e,i,n,r,a,c){var s;return t<100&&t>=0?(s=new Date(t+400,e,i,n,r,a,c),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,i,n,r,a,c),s}function bie(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i[0];return r<100&&r>=0?(i[0]+=400,t=new Date(Date.UTC.apply(Date,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(r)):t=new Date(Date.UTC.apply(Date,i)),t}function xie(t,e,i){var n=e.match(lie);if(!n)throw new Error;for(var r=n.length,a={},c=0;c<r;c+=1){var s=n[c],p=YF[s];if(p){var b=typeof p[0]=="function"?p[0](i):p[0],S=p[1],E=(b.exec(t)||[])[0],I=S(E,i);a=nie({},a,{},I),t=t.replace(E,"")}else{var _=s.replace(/^\[|\]$/g,"");if(t.indexOf(_)===0)t=t.substr(_.length);else throw new Error("not match")}}return a}function wie(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var n=i.locale,r=n===void 0?eE:n,a=i.backupDate,c=a===void 0?new Date:a,s=xie(t,e,r),p=s.year,_=s.month,b=s.day,S=s.hour,E=s.minute,I=s.second,R=s.millisecond,V=s.isPM,q=s.date,U=s.offset,H=s.weekday,Z=s.week;if(q)return q;var ne=[p,_,b,S,E,I,R];if(ne[3]=_ie(ne[3],V),Z!==void 0&&_===void 0&&b===void 0){var ie=UF(p===void 0?c:new Date(p,3),{firstDayOfWeek:r.firstDayOfWeek,firstWeekContainsDate:r.firstWeekContainsDate});return new Date(ie.getTime()+(Z-1)*7*24*3600*1e3)}var oe,pe=vie(ne,c);return U!==void 0?(pe[6]+=U*60*1e3,oe=bie.apply(void 0,NO(pe))):oe=yie.apply(void 0,NO(pe)),H!==void 0&&oe.getDay()!==H?new Date(NaN):oe}catch{return new Date(NaN)}}var Tie=Object.defineProperty,Sie=Object.defineProperties,Cie=Object.getOwnPropertyDescriptors,kb=Object.getOwnPropertySymbols,XF=Object.prototype.hasOwnProperty,KF=Object.prototype.propertyIsEnumerable,VO=(t,e,i)=>e in t?Tie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ma=(t,e)=>{for(var i in e||(e={}))XF.call(e,i)&&VO(t,i,e[i]);if(kb)for(var i of kb(e))KF.call(e,i)&&VO(t,i,e[i]);return t},Ac=(t,e)=>Sie(t,Cie(e)),kie=(t,e)=>{var i={};for(var n in t)XF.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&kb)for(var n of kb(t))e.indexOf(n)<0&&KF.call(t,n)&&(i[n]=t[n]);return i};const Eie={formatLocale:eE,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let yv="en";const Hm={};Hm[yv]=Eie;function QF(t,e,i=!1){if(typeof t!="string")return Hm[yv];let n=yv;return Hm[t]&&(n=t),e&&(Hm[t]=e,n=t),i||(yv=n),Hm[t]||Hm[yv]}function IS(t){return QF(t,void 0,!0)}function rE(t,e){if(!Array.isArray(t))return[];const i=[],n=t.length;let r=0;for(e=e||n;r<n;)i.push(t.slice(r,r+=e));return i}function UO(t){return Array.isArray(t)?t[t.length-1]:void 0}function xf(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ch(t,e){const i={};return xf(t)&&(Array.isArray(e)||(e=[e]),e.forEach(n=>{Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])})),i}function JF(t,e){if(!xf(t))return{};let i=t;return xf(e)&&Object.keys(e).forEach(n=>{let r=e[n];const a=t[n];xf(r)&&xf(a)&&(r=JF(a,r)),i=Ac(ma({},i),{[n]:r})}),i}function e2(t){const e=parseInt(String(t),10);return e<10?`0${e}`:`${e}`}function Iie(t){const e=/-(\w)/g;return t.replace(e,(i,n)=>n?n.toUpperCase():"")}const e6="datepicker_locale",t6="datepicker_prefixClass",i6="datepicker_getWeek";function sE(){return qi(e6,Tf(IS()))}function Pie(t){const e=Me(()=>xf(t.value)?JF(IS(),t.value):IS(t.value));return Mn(e6,e),e}function Aie(t){Mn(t6,t)}function jl(){return qi(t6,"mx")}function Mie(t){Mn(i6,t)}function Oie(){return qi(i6,Jk)}function Lie(t){const e=t.style.display,i=t.style.visibility;t.style.display="block",t.style.visibility="hidden";const n=window.getComputedStyle(t),r=t.offsetWidth+parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),a=t.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10);return t.style.display=e,t.style.visibility=i,{width:r,height:a}}function Die(t,e,i,n){let r=0,a=0,c=0,s=0;const p=t.getBoundingClientRect(),_=document.documentElement.clientWidth,b=document.documentElement.clientHeight;return n&&(c=window.pageXOffset+p.left,s=window.pageYOffset+p.top),_-p.left<e&&p.right<e?r=c-p.left+1:p.left+p.width/2<=_/2?r=c:r=c+p.width-e,p.top<=i&&b-p.bottom<=i?a=s+b-p.top-i:p.top+p.height/2<=b/2?a=s+p.height:a=s-i,{left:`${r}px`,top:`${a}px`}}function oE(t,e=document.body){if(!t||t===e)return null;const i=(a,c)=>getComputedStyle(a,null).getPropertyValue(c);return/(auto|scroll)/.test(i(t,"overflow")+i(t,"overflow-y")+i(t,"overflow-x"))?t:oE(t.parentElement,e)}let u1;function Rie(){if(typeof window>"u")return 0;if(u1!==void 0)return u1;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const e=document.createElement("div");return e.style.width="100%",t.appendChild(e),u1=t.offsetWidth-e.offsetWidth,t.parentNode.removeChild(t),u1}const jO="ontouchend"in document?"touchstart":"mousedown";function Bie(t){let e=!1;return function(...n){e||(e=!0,requestAnimationFrame(()=>{e=!1,t.apply(this,n)}))}}function Wh(t,e){return{setup:t,name:t.name,props:e}}function qh(t,e){return new Proxy(t,{get(n,r){const a=n[r];return a!==void 0?a:e[r]}})}const Zf=()=>t=>t,Fie=(t,e)=>{const i={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=Iie(n);let a=t[n];e.indexOf(r)!==-1&&a===""&&(a=!0),i[r]=a}return i};function $ie(t,{slots:e}){const i=qh(t,{appendToBody:!0}),n=jl(),r=lt(null),a=lt({left:"",top:""}),c=()=>{if(!i.visible||!r.value)return;const p=i.getRelativeElement();if(!p)return;const{width:_,height:b}=Lie(r.value);a.value=Die(p,_,b,i.appendToBody)};Xs(c,{flush:"post"}),Xs(p=>{const _=i.getRelativeElement();if(!_)return;const b=oE(_)||window,S=Bie(c);b.addEventListener("scroll",S),window.addEventListener("resize",S),p(()=>{b.removeEventListener("scroll",S),window.removeEventListener("resize",S)})},{flush:"post"});const s=p=>{if(!i.visible)return;const _=p.target,b=r.value,S=i.getRelativeElement();b&&!b.contains(_)&&S&&!S.contains(_)&&i.onClickOutside(p)};return Xs(p=>{document.addEventListener(jO,s),p(()=>{document.removeEventListener(jO,s)})}),()=>w(dC,{to:"body",disabled:!i.appendToBody},{default:()=>[w(Nl,{name:`${n}-zoom-in-down`},{default:()=>{var p;return[i.visible&&w("div",{ref:r,class:`${n}-datepicker-main ${n}-datepicker-popup ${i.className}`,style:[ma({position:"absolute"},a.value),i.style||{}]},[(p=e.default)==null?void 0:p.call(e)])]}})]})}const Nie=Zf()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var zie=Wh($ie,Nie);const Vie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Uie=Pe("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),jie=[Uie];function n6(t,e){return be(),ti("svg",Vie,jie)}const Hie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Gie=Pe("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),Wie=[Gie];function qie(t,e){return be(),ti("svg",Hie,Wie)}const Zie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},Yie=Pe("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Xie=Pe("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),Kie=Pe("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),Qie=[Yie,Xie,Kie];function Jie(t,e){return be(),ti("svg",Zie,Qie)}function Ep(t,e=0,i=1,n=0,r=0,a=0,c=0){const s=new Date(t,e,i,n,r,a,c);return t<100&&t>=0&&s.setFullYear(t),s}function Fh(t){return t instanceof Date&&!isNaN(t.getTime())}function Ip(t){return Array.isArray(t)&&t.length===2&&t.every(Fh)&&t[0]<=t[1]}function ene(t){return Array.isArray(t)&&t.every(Fh)}function Zx(...t){if(t[0]!==void 0&&t[0]!==null){const i=new Date(t[0]);if(Fh(i))return i}const e=t.slice(1);return e.length?Zx(...e):new Date}function tne(t){const e=new Date(t);return e.setMonth(0,1),e.setHours(0,0,0,0),e}function HO(t){const e=new Date(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Ff(t){const e=new Date(t);return e.setHours(0,0,0,0),e}function ine({firstDayOfWeek:t,year:e,month:i}){const n=[],r=Ep(e,i,0),a=r.getDate(),c=a-(r.getDay()+7-t)%7;for(let b=c;b<=a;b++)n.push(Ep(e,i,b-a));r.setMonth(i+1,0);const s=r.getDate();for(let b=1;b<=s;b++)n.push(Ep(e,i,b));const p=a-c+1,_=6*7-p-s;for(let b=1;b<=_;b++)n.push(Ep(e,i,s+b));return n}function Eb(t,e){const i=new Date(t),n=typeof e=="function"?e(i.getMonth()):Number(e),r=i.getFullYear(),a=Ep(r,n+1,0).getDate(),c=i.getDate();return i.setMonth(n,Math.min(c,a)),i}function Km(t,e){const i=new Date(t),n=typeof e=="function"?e(i.getFullYear()):e;return i.setFullYear(n),i}function nne(t,e){const i=new Date(e),n=new Date(t),r=i.getFullYear()-n.getFullYear(),a=i.getMonth()-n.getMonth();return r*12+a}function Ib(t,e){const i=new Date(t),n=new Date(e);return i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),i}function rne(t,{slots:e}){const i=qh(t,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),n=jl(),r=lt(null),a=Me(()=>i.separator||(i.range?" ~ ":",")),c=I=>i.range?Ip(I):i.multiple?ene(I):Fh(I),s=I=>Array.isArray(I)?I.some(R=>i.disabledDate(R)):i.disabledDate(I),p=Me(()=>r.value!==null?r.value:typeof i.renderInputText=="function"?i.renderInputText(i.value):c(i.value)?Array.isArray(i.value)?i.value.map(I=>i.formatDate(I)).join(a.value):i.formatDate(i.value):""),_=I=>{var R;I&&I.stopPropagation(),i.onChange(i.range?[null,null]:null),(R=i.onClear)==null||R.call(i)},b=()=>{var I;if(!i.editable||r.value===null)return;const R=r.value.trim();if(r.value=null,R===""){_();return}let V;if(i.range){let q=R.split(a.value);q.length!==2&&(q=R.split(a.value.trim())),V=q.map(U=>i.parseDate(U.trim()))}else i.multiple?V=R.split(a.value).map(q=>i.parseDate(q.trim())):V=i.parseDate(R);c(V)&&!s(V)?i.onChange(V):(I=i.onInputError)==null||I.call(i,R)},S=I=>{r.value=typeof I=="string"?I:I.target.value},E=I=>{const{keyCode:R}=I;R===9?i.onBlur():R===13&&b()};return()=>{var I,R,V;const q=!i.disabled&&i.clearable&&p.value,U=Ac(ma({name:"date",type:"text",autocomplete:"off",value:p.value,class:i.inputClass||`${n}-input`,readonly:!i.editable,disabled:i.disabled,placeholder:i.placeholder},i.inputAttr),{onFocus:i.onFocus,onKeydown:E,onInput:S,onChange:b});return w("div",{class:`${n}-input-wrapper`,onClick:i.onClick},[((I=e.input)==null?void 0:I.call(e,U))||w("input",U,null),q?w("i",{class:`${n}-icon-clear`,onClick:_},[((R=e["icon-clear"])==null?void 0:R.call(e))||w(qie,null,null)]):null,w("i",{class:`${n}-icon-calendar`},[((V=e["icon-calendar"])==null?void 0:V.call(e))||w(n6,null,null)])])}}const aE=Zf()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),sne=Zf()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...aE]);var one=Wh(rne,sne);function ane(t,{slots:e}){var i;const n=qh(t,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});Aie(n.prefixClass),Mie(((i=n.formatter)==null?void 0:i.getWeek)||Jk);const r=Pie(li(t,"lang")),a=lt(),c=()=>a.value,s=lt(!1),p=Me(()=>!n.disabled&&(typeof n.open=="boolean"?n.open:s.value)),_=()=>{var oe,pe;n.disabled||p.value||(s.value=!0,(oe=n["onUpdate:open"])==null||oe.call(n,!0),(pe=n.onOpen)==null||pe.call(n))},b=()=>{var oe,pe;p.value&&(s.value=!1,(oe=n["onUpdate:open"])==null||oe.call(n,!1),(pe=n.onClose)==null||pe.call(n))},S=(oe,pe)=>(pe=pe||n.format,xf(n.formatter)&&typeof n.formatter.stringify=="function"?n.formatter.stringify(oe,pe):tE(oe,pe,{locale:r.value.formatLocale})),E=(oe,pe)=>{if(pe=pe||n.format,xf(n.formatter)&&typeof n.formatter.parse=="function")return n.formatter.parse(oe,pe);const de=new Date;return wie(oe,pe,{locale:r.value.formatLocale,backupDate:de})},I=oe=>{switch(n.valueType){case"date":return oe instanceof Date?new Date(oe.getTime()):new Date(NaN);case"timestamp":return typeof oe=="number"?new Date(oe):new Date(NaN);case"format":return typeof oe=="string"?E(oe):new Date(NaN);default:return typeof oe=="string"?E(oe,n.valueType):new Date(NaN)}},R=oe=>{if(!Fh(oe))return null;switch(n.valueType){case"date":return oe;case"timestamp":return oe.getTime();case"format":return S(oe);default:return S(oe,n.valueType)}},V=Me(()=>{const oe=n.value;return n.range?(Array.isArray(oe)?oe.slice(0,2):[null,null]).map(I):n.multiple?(Array.isArray(oe)?oe:[]).map(I):I(oe)}),q=(oe,pe,de=!0)=>{var fe,ge;const we=Array.isArray(oe)?oe.map(R):R(oe);return(fe=n["onUpdate:value"])==null||fe.call(n,we),(ge=n.onChange)==null||ge.call(n,we,pe),de&&b(),we},U=lt(new Date);Xs(()=>{p.value&&(U.value=V.value)});const H=(oe,pe)=>{n.confirm?U.value=oe:q(oe,pe,!n.multiple&&(pe===n.type||pe==="time"))},Z=()=>{var oe;const pe=q(U.value);(oe=n.onConfirm)==null||oe.call(n,pe)},ne=oe=>n.disabledDate(oe)||n.disabledTime(oe),ie=oe=>{var pe;const{prefixClass:de}=n;return w("div",{class:`${de}-datepicker-sidebar`},[(pe=e.sidebar)==null?void 0:pe.call(e,oe),(n.shortcuts||[]).map((fe,ge)=>w("button",{key:ge,"data-index":ge,type:"button",class:`${de}-btn ${de}-btn-text ${de}-btn-shortcut`,onClick:()=>{var we;const Ie=(we=fe.onClick)==null?void 0:we.call(fe);Ie&&q(Ie)}},[fe.text]))])};return()=>{var oe,pe;const{prefixClass:de,disabled:fe,confirm:ge,range:we,popupClass:Ie,popupStyle:Oe,appendToBody:ke}=n,Ee={value:U.value,["onUpdate:value"]:H,emit:q},Qe=e.header&&w("div",{class:`${de}-datepicker-header`},[e.header(Ee)]),gt=(e.footer||ge)&&w("div",{class:`${de}-datepicker-footer`},[(oe=e.footer)==null?void 0:oe.call(e,Ee),ge&&w("button",{type:"button",class:`${de}-btn ${de}-datepicker-btn-confirm`,onClick:Z},[n.confirmText])]),nt=(pe=e.content)==null?void 0:pe.call(e,Ee),ft=(e.sidebar||n.shortcuts)&&ie(Ee);return w("div",{ref:a,class:{[`${de}-datepicker`]:!0,[`${de}-datepicker-range`]:we,disabled:fe}},[w(one,Ac(ma({},Ch(n,aE)),{value:V.value,formatDate:S,parseDate:E,disabledDate:ne,onChange:q,onClick:_,onFocus:_,onBlur:b}),Ch(e,["icon-calendar","icon-clear","input"])),w(zie,{className:Ie,style:Oe,visible:p.value,appendToBody:ke,getRelativeElement:c,onClickOutside:b},{default:()=>[ft,w("div",{class:`${de}-datepicker-content`},[Qe,nt,gt])]})])}}const lne=Zf()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),une=[...lne,...aE];var GO=Wh(ane,une);function c1(t){var e=t,{value:i}=e,n=kie(e,["value"]);const r=jl();return w("button",Ac(ma({},n),{type:"button",class:`${r}-btn ${r}-btn-text ${r}-btn-icon-${i}`}),[w("i",{class:`${r}-icon-${i}`},null)])}function lE({type:t,calendar:e,onUpdateCalendar:i},{slots:n}){var r;const a=jl(),c=()=>{i(Eb(e,E=>E-1))},s=()=>{i(Eb(e,E=>E+1))},p=()=>{i(Km(e,E=>E-1))},_=()=>{i(Km(e,E=>E+1))},b=()=>{i(Km(e,E=>E-10))},S=()=>{i(Km(e,E=>E+10))};return w("div",{class:`${a}-calendar-header`},[w(c1,{value:"double-left",onClick:t==="year"?b:p},null),t==="date"&&w(c1,{value:"left",onClick:c},null),w(c1,{value:"double-right",onClick:t==="year"?S:_},null),t==="date"&&w(c1,{value:"right",onClick:s},null),w("span",{class:`${a}-calendar-header-label`},[(r=n.default)==null?void 0:r.call(n)])])}function cne({calendar:t,isWeekMode:e,showWeekNumber:i,titleFormat:n,getWeekActive:r,getCellClasses:a,onSelect:c,onUpdatePanel:s,onUpdateCalendar:p,onDateMouseEnter:_,onDateMouseLeave:b}){const S=jl(),E=Oie(),I=sE().value,{yearFormat:R,monthBeforeYear:V,monthFormat:q="MMM",formatLocale:U}=I,H=U.firstDayOfWeek||0;let Z=I.days||U.weekdaysMin;Z=Z.concat(Z).slice(H,H+7);const ne=t.getFullYear(),ie=t.getMonth(),oe=rE(ine({firstDayOfWeek:H,year:ne,month:ie}),7),pe=(Ee,Qe)=>tE(Ee,Qe,{locale:I.formatLocale}),de=Ee=>{s(Ee)},fe=Ee=>{const Qe=Ee.getAttribute("data-index"),[gt,nt]=Qe.split(",").map(Tt=>parseInt(Tt,10)),ft=oe[gt][nt];return new Date(ft)},ge=Ee=>{c(fe(Ee.currentTarget))},we=Ee=>{_&&_(fe(Ee.currentTarget))},Ie=Ee=>{b&&b(fe(Ee.currentTarget))},Oe=w("button",{type:"button",class:`${S}-btn ${S}-btn-text ${S}-btn-current-year`,onClick:()=>de("year")},[pe(t,R)]),ke=w("button",{type:"button",class:`${S}-btn ${S}-btn-text ${S}-btn-current-month`,onClick:()=>de("month")},[pe(t,q)]);return i=typeof i=="boolean"?i:e,w("div",{class:[`${S}-calendar ${S}-calendar-panel-date`,{[`${S}-calendar-week-mode`]:e}]},[w(lE,{type:"date",calendar:t,onUpdateCalendar:p},{default:()=>[V?[ke,Oe]:[Oe,ke]]}),w("div",{class:`${S}-calendar-content`},[w("table",{class:`${S}-table ${S}-table-date`},[w("thead",null,[w("tr",null,[i&&w("th",{class:`${S}-week-number-header`},null),Z.map(Ee=>w("th",{key:Ee},[Ee]))])]),w("tbody",null,[oe.map((Ee,Qe)=>w("tr",{key:Qe,class:[`${S}-date-row`,{[`${S}-active-week`]:r(Ee)}]},[i&&w("td",{class:`${S}-week-number`,"data-index":`${Qe},0`,onClick:ge},[w("div",null,[E(Ee[0])])]),Ee.map((gt,nt)=>w("td",{key:nt,class:["cell",a(gt)],title:pe(gt,n),"data-index":`${Qe},${nt}`,onClick:ge,onMouseenter:we,onMouseleave:Ie},[w("div",null,[gt.getDate()])]))]))])])])])}function dne({calendar:t,getCellClasses:e,onSelect:i,onUpdateCalendar:n,onUpdatePanel:r}){const a=jl(),c=sE().value,s=c.months||c.formatLocale.monthsShort,p=b=>Ep(t.getFullYear(),b),_=b=>{const E=b.currentTarget.getAttribute("data-month");i(p(parseInt(E,10)))};return w("div",{class:`${a}-calendar ${a}-calendar-panel-month`},[w(lE,{type:"month",calendar:t,onUpdateCalendar:n},{default:()=>[w("button",{type:"button",class:`${a}-btn ${a}-btn-text ${a}-btn-current-year`,onClick:()=>r("year")},[t.getFullYear()])]}),w("div",{class:`${a}-calendar-content`},[w("table",{class:`${a}-table ${a}-table-month`},[rE(s,3).map((b,S)=>w("tr",{key:S},[b.map((E,I)=>{const R=S*3+I;return w("td",{key:I,class:["cell",e(p(R))],"data-month":R,onClick:_},[w("div",null,[E])])})]))])])])}const hne=t=>{const e=Math.floor(t.getFullYear()/10)*10,i=[];for(let n=0;n<10;n++)i.push(e+n);return rE(i,2)};function fne({calendar:t,getCellClasses:e=()=>[],getYearPanel:i=hne,onSelect:n,onUpdateCalendar:r}){const a=jl(),c=S=>Ep(S,0),s=S=>{const I=S.currentTarget.getAttribute("data-year");n(c(parseInt(I,10)))},p=i(new Date(t)),_=p[0][0],b=UO(UO(p));return w("div",{class:`${a}-calendar ${a}-calendar-panel-year`},[w(lE,{type:"year",calendar:t,onUpdateCalendar:r},{default:()=>[w("span",null,[_]),w("span",{class:`${a}-calendar-decade-separator`},null),w("span",null,[b])]}),w("div",{class:`${a}-calendar-content`},[w("table",{class:`${a}-table ${a}-table-year`},[p.map((S,E)=>w("tr",{key:E},[S.map((I,R)=>w("td",{key:R,class:["cell",e(c(I))],"data-year":I,onClick:s},[w("div",null,[I])]))]))])])])}function pne(t){const e=qh(t,{defaultValue:Ff(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),i=Me(()=>(Array.isArray(e.value)?e.value:[e.value]).filter(Fh).map(H=>e.type==="year"?tne(H):e.type==="month"?HO(H):Ff(H))),n=lt(new Date);Xs(()=>{let U=e.calendar;if(!Fh(U)){const{length:H}=i.value;U=Zx(H>0?i.value[H-1]:e.defaultValue)}n.value=HO(U)});const r=U=>{var H;n.value=U,(H=e.onCalendarChange)==null||H.call(e,U)},a=lt("date");Xs(()=>{const U=["date","month","year"],H=Math.max(U.indexOf(e.type),U.indexOf(e.defaultPanel));a.value=H!==-1?U[H]:"date"});const c=U=>{var H;const Z=a.value;a.value=U,(H=e.onPanelChange)==null||H.call(e,U,Z)},s=U=>e.disabledDate(new Date(U),i.value),p=(U,H)=>{var Z,ne,ie;if(!s(U))if((Z=e.onPick)==null||Z.call(e,U),e.multiple===!0){const oe=i.value.filter(pe=>pe.getTime()!==U.getTime());oe.length===i.value.length&&oe.push(U),(ne=e["onUpdate:value"])==null||ne.call(e,oe,H)}else(ie=e["onUpdate:value"])==null||ie.call(e,U,H)},_=U=>{p(U,e.type==="week"?"week":"date")},b=U=>{if(e.type==="year")p(U,"year");else if(r(U),c("month"),e.partialUpdate&&i.value.length===1){const H=Km(i.value[0],U.getFullYear());p(H,"year")}},S=U=>{if(e.type==="month")p(U,"month");else if(r(U),c("date"),e.partialUpdate&&i.value.length===1){const H=Eb(Km(i.value[0],U.getFullYear()),U.getMonth());p(H,"month")}},E=(U,H=[])=>(s(U)?H.push("disabled"):i.value.some(Z=>Z.getTime()===U.getTime())&&H.push("active"),H.concat(e.getClasses(U,i.value,H.join(" ")))),I=U=>{const H=U.getMonth()!==n.value.getMonth(),Z=[];return U.getTime()===new Date().setHours(0,0,0,0)&&Z.push("today"),H&&Z.push("not-current-month"),E(U,Z)},R=U=>e.type!=="month"?n.value.getMonth()===U.getMonth()?"active":"":E(U),V=U=>e.type!=="year"?n.value.getFullYear()===U.getFullYear()?"active":"":E(U),q=U=>{if(e.type!=="week")return!1;const H=U[0].getTime(),Z=U[6].getTime();return i.value.some(ne=>{const ie=ne.getTime();return ie>=H&&ie<=Z})};return()=>a.value==="year"?w(fne,{calendar:n.value,getCellClasses:V,getYearPanel:e.getYearPanel,onSelect:b,onUpdateCalendar:r},null):a.value==="month"?w(dne,{calendar:n.value,getCellClasses:R,onSelect:S,onUpdatePanel:c,onUpdateCalendar:r},null):w(cne,{isWeekMode:e.type==="week",showWeekNumber:e.showWeekNumber,titleFormat:e.titleFormat,calendar:n.value,getCellClasses:I,getWeekActive:q,onSelect:_,onUpdatePanel:c,onUpdateCalendar:r,onDateMouseEnter:e.onDateMouseEnter,onDateMouseLeave:e.onDateMouseLeave},null)}const Yx=Zf()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var Xx=Wh(pne,Yx);const WO=(t,e)=>{const i=t.getTime();let[n,r]=e.map(a=>a.getTime());return n>r&&([n,r]=[r,n]),i>n&&i<r};function mne(t){const e=qh(t,{defaultValue:new Date,type:"date"}),i=jl(),n=Me(()=>{let q=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];return q=q.map(U=>Ff(U)),Ip(q)?q:[new Date,new Date].map(U=>Ff(U))}),r=lt([new Date(NaN),new Date(NaN)]);Xs(()=>{Ip(e.value)&&(r.value=e.value)});const a=(q,U)=>{var H;const[Z,ne]=r.value;Fh(Z)&&!Fh(ne)?(Z.getTime()>q.getTime()?r.value=[q,Z]:r.value=[Z,q],(H=e["onUpdate:value"])==null||H.call(e,r.value,U)):r.value=[q,new Date(NaN)]},c=lt([new Date,new Date]),s=Me(()=>Ip(e.calendar)?e.calendar:c.value),p=Me(()=>e.type==="year"?10*12:e.type==="month"?1*12:1),_=(q,U)=>{var H;const Z=nne(q[0],q[1]),ne=p.value-Z;if(ne>0){const ie=U===1?0:1;q[ie]=Eb(q[ie],oe=>oe+(ie===0?-ne:ne))}c.value=q,(H=e.onCalendarChange)==null||H.call(e,q,U)},b=q=>{_([q,s.value[1]],0)},S=q=>{_([s.value[0],q],1)};Xs(()=>{const q=Ip(e.value)?e.value:n.value;_(q.slice(0,2))});const E=lt(null),I=q=>E.value=q,R=()=>E.value=null,V=(q,U,H)=>{const Z=e.getClasses?e.getClasses(q,U,H):[],ne=Array.isArray(Z)?Z:[Z];return/disabled|active/.test(H)?ne:(U.length===2&&WO(q,U)&&ne.push("in-range"),U.length===1&&E.value&&WO(q,[U[0],E.value])?ne.concat("hover-in-range"):ne)};return()=>{const q=s.value.map((U,H)=>{const Z=Ac(ma({},e),{calendar:U,value:r.value,defaultValue:n.value[H],getClasses:V,partialUpdate:!1,multiple:!1,["onUpdate:value"]:a,onCalendarChange:H===0?b:S,onDateMouseLeave:R,onDateMouseEnter:I});return w(Xx,Z,null)});return w("div",{class:`${i}-calendar-range`},[q])}}const uE=Yx;var cE=Wh(mne,uE);const r6=qn({setup(t,{slots:e}){const i=jl(),n=lt(),r=lt(""),a=lt("");Fn(()=>{if(!n.value)return;const R=n.value,V=R.clientHeight*100/R.scrollHeight;r.value=V<100?`${V}%`:""});const s=Rie(),p=R=>{const V=R.currentTarget,{scrollHeight:q,scrollTop:U}=V;a.value=`${U*100/q}%`};let _=!1,b=0;const S=R=>{R.stopImmediatePropagation();const V=R.currentTarget,{offsetTop:q}=V;_=!0,b=R.clientY-q},E=R=>{if(!_||!n.value)return;const{clientY:V}=R,{scrollHeight:q,clientHeight:U}=n.value,Z=(V-b)*q/U;n.value.scrollTop=Z},I=()=>{_=!1};return Fn(()=>{document.addEventListener("mousemove",E),document.addEventListener("mouseup",I)}),Nf(()=>{document.addEventListener("mousemove",E),document.addEventListener("mouseup",I)}),()=>{var R;return w("div",{class:`${i}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[w("div",{ref:n,class:`${i}-scrollbar-wrap`,style:{marginRight:`-${s}px`},onScroll:p},[(R=e.default)==null?void 0:R.call(e)]),w("div",{class:`${i}-scrollbar-track`},[w("div",{class:`${i}-scrollbar-thumb`,style:{height:r.value,top:a.value},onMousedown:S},null)])])}}});function gne({options:t,getClasses:e,onSelect:i}){const n=jl(),r=a=>{const c=a.target,s=a.currentTarget;if(c.tagName.toUpperCase()!=="LI")return;const p=s.getAttribute("data-type"),_=parseInt(s.getAttribute("data-index"),10),b=parseInt(c.getAttribute("data-index"),10),S=t[_].list[b].value;i(S,p)};return w("div",{class:`${n}-time-columns`},[t.map((a,c)=>w(r6,{key:a.type,class:`${n}-time-column`},{default:()=>[w("ul",{class:`${n}-time-list`,"data-index":c,"data-type":a.type,onClick:r},[a.list.map((s,p)=>w("li",{key:s.text,"data-index":p,class:[`${n}-time-item`,e(s.value,a.type)]},[s.text]))])]}))])}function _ne(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Eh(t)}function vne(t){let e;const i=jl();return w(r6,null,_ne(e=t.options.map(n=>w("div",{key:n.text,class:[`${i}-time-option`,t.getClasses(n.value,"time")],onClick:()=>t.onSelect(n.value,"time")},[n.text])))?e:{default:()=>[e]})}function t2({length:t,step:e=1,options:i}){if(Array.isArray(i))return i.filter(r=>r>=0&&r<t);e<=0&&(e=1);const n=[];for(let r=0;r<t;r+=e)n.push(r);return n}function yne(t,e){let{showHour:i,showMinute:n,showSecond:r,use12h:a}=e;const c=e.format||"HH:mm:ss";i=typeof i=="boolean"?i:/[HhKk]/.test(c),n=typeof n=="boolean"?n:/m/.test(c),r=typeof r=="boolean"?r:/s/.test(c),a=typeof a=="boolean"?a:/a/i.test(c);const s=[],p=a&&t.getHours()>=12;return i&&s.push({type:"hour",list:t2({length:a?12:24,step:e.hourStep,options:e.hourOptions}).map(_=>{const b=_===0&&a?"12":e2(_),S=new Date(t);return S.setHours(p?_+12:_),{value:S,text:b}})}),n&&s.push({type:"minute",list:t2({length:60,step:e.minuteStep,options:e.minuteOptions}).map(_=>{const b=new Date(t);return b.setMinutes(_),{value:b,text:e2(_)}})}),r&&s.push({type:"second",list:t2({length:60,step:e.secondStep,options:e.secondOptions}).map(_=>{const b=new Date(t);return b.setSeconds(_),{value:b,text:e2(_)}})}),a&&s.push({type:"ampm",list:["AM","PM"].map((_,b)=>{const S=new Date(t);return S.setHours(S.getHours()%12+b*12),{text:_,value:S}})}),s}function i2(t=""){const e=t.split(":");if(e.length>=2){const i=parseInt(e[0],10),n=parseInt(e[1],10);return{hours:i,minutes:n}}return null}function bne({date:t,option:e,format:i,formatDate:n}){const r=[];if(typeof e=="function")return e()||[];const a=i2(e.start),c=i2(e.end),s=i2(e.step),p=e.format||i;if(a&&c&&s){const _=a.minutes+a.hours*60,b=c.minutes+c.hours*60,S=s.minutes+s.hours*60,E=Math.floor((b-_)/S);for(let I=0;I<=E;I++){const R=_+I*S,V=Math.floor(R/60),q=R%60,U=new Date(t);U.setHours(V,q,0),r.push({value:U,text:n(U,p)})}}return r}const s6=(t,e,i=0)=>{if(i<=0){requestAnimationFrame(()=>{t.scrollTop=e});return}const r=(e-t.scrollTop)/i*10;requestAnimationFrame(()=>{const a=t.scrollTop+r;if(a>=e){t.scrollTop=e;return}t.scrollTop=a,s6(t,e,i-10)})};function xne(t){const e=qh(t,{defaultValue:Ff(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),i=jl(),n=sE(),r=(V,q)=>tE(V,q,{locale:n.value.formatLocale}),a=lt(new Date);Xs(()=>{a.value=Zx(e.value,e.defaultValue)});const c=V=>Array.isArray(V)?V.every(q=>e.disabledTime(new Date(q))):e.disabledTime(new Date(V)),s=V=>{const q=new Date(V);return c([q.getTime(),q.setMinutes(0,0,0),q.setMinutes(59,59,999)])},p=V=>{const q=new Date(V);return c([q.getTime(),q.setSeconds(0,0),q.setSeconds(59,999)])},_=V=>{const q=new Date(V),U=q.getHours()<12?0:12,H=U+11;return c([q.getTime(),q.setHours(U,0,0,0),q.setHours(H,59,59,999)])},b=(V,q)=>q==="hour"?s(V):q==="minute"?p(V):q==="ampm"?_(V):c(V),S=(V,q)=>{var U;if(!b(V,q)){const H=new Date(V);a.value=H,c(H)||(U=e["onUpdate:value"])==null||U.call(e,H,q)}},E=(V,q)=>b(V,q)?"disabled":V.getTime()===a.value.getTime()?"active":"",I=lt(),R=V=>{if(!I.value)return;const q=I.value.querySelectorAll(".active");for(let U=0;U<q.length;U++){const H=q[U],Z=oE(H,I.value);if(Z){const ne=H.offsetTop;s6(Z,ne,V)}}};return Fn(()=>R(0)),Fi(a,()=>R(e.scrollDuration),{flush:"post"}),()=>{let V;return e.timePickerOptions?V=w(vne,{onSelect:S,getClasses:E,options:bne({date:a.value,format:e.format,option:e.timePickerOptions,formatDate:r})},null):V=w(gne,{options:yne(a.value,e),onSelect:S,getClasses:E},null),w("div",{class:`${i}-time`,ref:I},[e.showTimeHeader&&w("div",{class:`${i}-time-header`},[w("button",{type:"button",class:`${i}-btn ${i}-btn-text ${i}-time-header-title`,onClick:e.onClickTitle},[r(a.value,e.timeTitleFormat)])]),w("div",{class:`${i}-time-content`},[V])])}}const Kx=Zf()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var uy=Wh(xne,Kx);function wne(t){const e=qh(t,{defaultValue:Ff(new Date),disabledTime:()=>!1}),i=jl(),n=lt([new Date(NaN),new Date(NaN)]);Xs(()=>{Ip(e.value)?n.value=e.value:n.value=[new Date(NaN),new Date(NaN)]});const r=(_,b)=>{var S;(S=e["onUpdate:value"])==null||S.call(e,n.value,_==="time"?"time-range":_,b)},a=(_,b)=>{n.value[0]=_,n.value[1].getTime()>=_.getTime()||(n.value[1]=_),r(b,0)},c=(_,b)=>{n.value[1]=_,n.value[0].getTime()<=_.getTime()||(n.value[0]=_),r(b,1)},s=_=>e.disabledTime(_,0),p=_=>_.getTime()<n.value[0].getTime()||e.disabledTime(_,1);return()=>{const _=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];return w("div",{class:`${i}-time-range`},[w(uy,Ac(ma({},e),{["onUpdate:value"]:a,value:n.value[0],defaultValue:_[0],disabledTime:s}),null),w(uy,Ac(ma({},e),{["onUpdate:value"]:c,value:n.value[1],defaultValue:_[1],disabledTime:p}),null)])}}const dE=Kx;var hE=Wh(wne,dE);function o6(t){const e=lt(!1),i=()=>{var a;e.value=!1,(a=t.onShowTimePanelChange)==null||a.call(t,!1)},n=()=>{var a;e.value=!0,(a=t.onShowTimePanelChange)==null||a.call(t,!0)};return{timeVisible:Me(()=>typeof t.showTimePanel=="boolean"?t.showTimePanel:e.value),openTimePanel:n,closeTimePanel:i}}function Tne(t){const e=qh(t,{disabledTime:()=>!1,defaultValue:Ff(new Date)}),i=lt(e.value);Xs(()=>{i.value=e.value});const{openTimePanel:n,closeTimePanel:r,timeVisible:a}=o6(e),c=(s,p)=>{var _;p==="date"&&n();let b=Ib(s,Zx(e.value,e.defaultValue));if(e.disabledTime(new Date(b))&&(b=Ib(s,e.defaultValue),e.disabledTime(new Date(b)))){i.value=b;return}(_=e["onUpdate:value"])==null||_.call(e,b,p)};return()=>{const s=jl(),p=Ac(ma({},Ch(e,Yx)),{multiple:!1,type:"date",value:i.value,["onUpdate:value"]:c}),_=Ac(ma({},Ch(e,Kx)),{showTimeHeader:!0,value:i.value,["onUpdate:value"]:e["onUpdate:value"],onClickTitle:r});return w("div",{class:`${s}-date-time`},[w(Xx,p,null),a.value&&w(uy,_,null)])}}const a6=Zf()(["showTimePanel","onShowTimePanelChange"]),Sne=[...a6,...Yx,...Kx];var l6=Wh(Tne,Sne);function Cne(t){const e=qh(t,{defaultValue:Ff(new Date),disabledTime:()=>!1}),i=lt(e.value);Xs(()=>{i.value=e.value});const{openTimePanel:n,closeTimePanel:r,timeVisible:a}=o6(e),c=(s,p)=>{var _;p==="date"&&n();const b=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];let S=s.map((E,I)=>{const R=Ip(e.value)?e.value[I]:b[I];return Ib(E,R)});if(S[1].getTime()<S[0].getTime()&&(S=[S[0],S[0]]),S.some(e.disabledTime)&&(S=s.map((E,I)=>Ib(E,b[I])),S.some(e.disabledTime))){i.value=S;return}(_=e["onUpdate:value"])==null||_.call(e,S,p)};return()=>{const s=jl(),p=Ac(ma({},Ch(e,uE)),{type:"date",value:i.value,["onUpdate:value"]:c}),_=Ac(ma({},Ch(e,dE)),{showTimeHeader:!0,value:i.value,["onUpdate:value"]:e["onUpdate:value"],onClickTitle:r});return w("div",{class:`${s}-date-time-range`},[w(cE,p,null),a.value&&w(hE,_,null)])}}const kne=[...a6,...dE,...uE];var u6=Wh(Cne,kne);const Ene=Zf()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),qO={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function c6(t,{slots:e}){const i=t.type||"date",n=t.format||qO[i]||qO.date,r=Ac(ma({},Fie(t,Ene)),{type:i,format:n});return w(GO,Ch(r,GO.props),ma({content:a=>{if(r.range){const c=i==="time"?hE:i==="datetime"?u6:cE;return Ns(c,Ch(ma(ma({},r),a),c.props))}else{const c=i==="time"?uy:i==="datetime"?l6:Xx;return Ns(c,Ch(ma(ma({},r),a),c.props))}},["icon-calendar"]:()=>w(i==="time"?Jie:n6,null,null)},e))}const Ine={locale:QF,install:t=>{t.component("DatePicker",c6)}};var Pne=Object.assign(c6,Ine,{Calendar:Xx,CalendarRange:cE,TimePanel:uy,TimeRange:hE,DateTime:l6,DateTimeRange:u6});const so=""+new URL("Upload-fb825e73.png",import.meta.url).href;const Ane={components:{DatePicker:Pne,AtomSpinner:is,NavigationDrawer:tc},data(){return{purpose:["Business","Personal"],previewImagefrontfile:null,previewImageBackfile:null,file:null,fileBack:null,lazy_load:"",lazy_load_back:"",previewImage:null,previewBackImage:null,loadingFrontImage:!0,loadingBackImage:!0,drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,licImgError:!1,licImgMessage:null,username:"",selectedPurpose:null,loading:!0,license:!1,licenseFrontImage:null,licenseBackImage:null,licenseImage:null,fullName:null,firstName:null,lastName:null,emailAddress:null,phone:null,SSN:null,hintDOB:null,dob:null,hintSSN:null,countries:[],states:[],cities:[],optedCountry:null,optedState:null,optedCity:null,Data_Countries:{},dataLoadedOnMount:0,togglePassword:!1,confirmPassword:"",newPassword:"",showddDetailsWarning:!1,licImg:!1,progressValue:null,licImgIcon:"mdi-upload",btnColor:"#eeeeee",uploadingData:!1,loadView:!1,btnProperty:!0,name:"",profileImage:"../src/assets/user.jpg",fileImageProfile:null,previewProfileImage:null,loadingProfileImage:!0,lazy_load_profile:"",previewProfileFile:null,accountName:"---",accountNumber:"---",accountType:"---",bank:"---",routingNumber:"---",bankDetailsUpdatedAt:"---",nameVerified:!1,verifySession:null,nameVerifiedHint:"",locationVerified:!1,countryVerifiedHint:"",cityVerifiedHint:"",stateVerifiedHint:"",validationFailed:!1,newPasswordValue:String,newConfirmPassValue:String,date:new Date().toISOString().substr(0,10),picker:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10),dlivrdProfileLogo:null}},watch:{optedCountry(){this.dataLoadedOnMount++,this.setStates()},optedState(){this.setCity()}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator(),this.dlivrdProfileLogo=_r},methods:{loadRegions(t){var e,i="";for(var n in t){n=="Others"?(e="Other",i="USA"):(e=n.split(", ")[0],i=n.split(", ")[1]);for(var r in t[n])this.Data_Countries[i]==null&&(this.Data_Countries[i]={}),this.Data_Countries[i][e]==null&&(this.Data_Countries[i][e]=[]),this.Data_Countries[i][e].push(t[n][r]);this.countries.includes(i)||this.countries.push(i)}},getRegions(){var t=this.baseurl+"get_markets_regions";const e={};Ai.get(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){const n=i.data;this.loadRegions(n)}}).catch(()=>{})},setStates(){this.states=[],this.dataLoadedOnMount>1&&(this.optedState=null);for(var t in this.Data_Countries)if(this.optedCountry==t){for(var e in this.Data_Countries[t])this.states.push(e);this.states.sort()}this.setCity()},setCity(){this.cities=[],this.dataLoadedOnMount>1&&(this.optedCity=null);for(var t in this.Data_Countries){for(var e in this.Data_Countries[t])if(this.optedState==e)for(var i in this.Data_Countries[t][e])this.cities.push(this.Data_Countries[t][e][i]);this.cities.sort()}},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},saveddDetails(){if(this.togglePassword){if(this.newPassword.length<8||this.newPassword.length>32){this.alert_title="Invalid Passwords",this.alert_description="Password should be between 8 and 32 characters.",this.dialog=!0,this.agreeButtonText="Okay";return}else if(this.newPassword!=this.confirmPassword){this.alert_title="Incorrect Passwords",this.alert_description="Password and confirm password do not match.",this.dialog=!0,this.agreeButtonText="Okay";return}}if(this.firstName==null)this.showddDetailsWarning=!0,this.errorMessage="*First name is required.";else if(this.lastName==null)this.showddDetailsWarning=!0,this.errorMessage="*Last name is required.";else if(this.purpose==null)this.showddDetailsWarning=!0,this.errorMessage="*Please select a purpose of joining dlivrd.";else{this.showddDetailsWarning=!1,this.errorMessage=null;var t=new FormData;t.append("identity",this.username),t.append("first_name",this.firstName),t.append("last_name",this.lastName),t.append("purpose",this.selectedPurpose),t.append("preferred_language","English"),this.togglePassword&&t.append("password",this.newPassword),typeof this.previewProfileFile!="string"&&this.previewProfileFile!=null&&t.append("selfie",this.previewProfileFile),typeof this.previewImagefrontfile!="string"&&this.previewImagefrontfile!=null&&t.append("license_front",this.previewImagefrontfile),typeof this.previewImageBackfile!="string"&&this.previewImageBackfile!=null&&t.append("license_back",this.previewImageBackfile);var e=this.baseurl+"update_rider_personal_info";this.uploadingData=!0,Ai.post(e,t,{headers:{"Content-Type":"multipart/form-data",session:localStorage.getItem("session_id")}}).then(i=>{console.log(i),this.uploadingData=!1,i.data.Success?this.newPassword?(this.dialog=!0,this.alert_title="Success",this.alert_description="Password updated successfully. Please login again.",this.agreeButtonText="logout"):(this.dialog=!0,this.alert_title="Success",this.alert_description="Details updated successfully.",this.agreeButtonText="Okay"):(this.dialog=!0,this.alert_title="Update Failed",i.data.license_front?this.alert_description=i.data.license_front:i.data.license_back?this.alert_description=i.data.license_back:i.data.selfie?this.alert_description=i.data.selfie:i.data.not_selfie?this.alert_description=i.data.not_selfie:i.data.Failure=="Session Expired. Please login again."?this.$router.push("/"):this.alert_description="Details not saved. Please Try Again",this.agreeButtonText="Okay")}).catch(i=>{this.dialog=!0,this.alert_title="Warning",this.alert_description="Your session has expired. Please Login Again",this.agreeButtonText="logout"})}},selectLicenseFrontImage(t,e){e==!1&&t==null?this.$refs.fileInput.click():e==!0&&(this.previewImage=null,this.previewImagefrontfile=null,this.lazy_load=so,this.file=null,this.previewBackImage==null?this.progressValue=0:this.progressValue=50)},selectLicenseBackImage(t,e){e==!1&&t==null?this.$refs.fileInputBack.click():e==!0&&(this.previewBackImage=null,this.previewImageBackfile=null,this.lazy_load_back=so,this.fileBack=null,this.previewImage==null?this.progressValue=0:this.progressValue=50)},pickLicenceFrontFile(t){this.previewImagefrontfile=t.target.files[0],this.lazy_load="",this.licImgError=!1;let i=this.$refs.fileInput.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.previewImage=r.target.result,this.previewBackImage==null?this.progressValue=50:this.progressValue=100},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},pickLicenceBackFile(t){this.previewImageBackfile=t.target.files[0],this.lazy_load_back="",this.licImgError=!1;let i=this.$refs.fileInputBack.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.previewBackImage=r.target.result,this.previewImage==null?this.progressValue=50:this.progressValue=100},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},closeLicenseUploadPopUp(){this.previewImagefrontfile||this.previewImageBackfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check"):(this.btnColor="#eeeeee",this.licImgIcon="mdi-upload"),this.licImg=!1,this.licImgError=!1,this.licImgMessage=null,this.showddDetailsWarning=!1},licenseImagesUploaded(){this.previewImagefrontfile||this.previewImageBackfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check"):(this.btnColor="#eeeeee",this.licImgIcon="mdi-upload"),this.licImgError=!1,this.licImgMessage=null,this.licImg=!1,this.showddDetailsWarning=!1},sessionValidator(){this.uploadingData=!0;var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{this.uploadingData=!1,i.status==200&&(this.verifySession=i.data,this.verifySession.Success?(this.verifySession.non_verified_values.name_verified==null&&(this.nameVerified=!0,this.nameVerifiedHint="Name is verified and cannot be edited.",this.locationVerified=!0,this.countryVerifiedHint="Country is verified and cannot be edited.",this.cityVerifiedHint="City is verified and cannot be edited.",this.stateVerifiedHint="State is verified and cannot be edited."),this.verifySession.plaid_verification_complete=="success"&&this.verifySession.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+this.verifySession.profile_image,this.getDriverPersonalDetails(),this.getRegions()):(this.clearFields(),this.$router.push("/")))}).catch(()=>{this.clearFields(),this.$router.push("/")})},getDriverPersonalDetails(){var t=this.baseurl+"get_rider_personal_info",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{console.log(i),i.data.Success&&(this.fullName=i.data.rider_info.first_name+" "+i.data.rider_info.last_name,this.firstName=i.data.rider_info.first_name,this.lastName=i.data.rider_info.last_name,this.selectedPurpose=i.data.rider_info.purpose,this.phone=i.data.rider_info.mobile_number,this.emailAddress=i.data.rider_info.email,this.optedCountry=i.data.rider_info.country,this.optedCity=i.data.rider_info.city,this.optedState=i.data.rider_info.state,this.verifySession.non_verified_values.dob_verified==!1?(this.dob="Not verified",this.hintDOB="Date of Birth is not verified. Please complete your identity verification process."):(this.dob=i.data.rider_info.dob,this.hintDOB="Date of Birth is verified and cannot be edited."),this.verifySession.non_verified_values.ssn_verified==!1?(this.SSN="Not verified",this.hintSSN="SSN is not verified. Please complete your identity verification process."):(this.SSN=i.data.rider_info.ssn,this.hintSSN="SSN is verified and cannot be updated."),this.accountName=i.data.rider_info.banking_info.account_name,this.accountNumber=i.data.rider_info.banking_info.account_number,this.accountType=i.data.rider_info.banking_info.account_type,this.bank=i.data.rider_info.banking_info.bank_name,this.routingNumber=i.data.rider_info.banking_info.routing_number,this.bankDetailsUpdatedAt=i.data.rider_info.banking_info.bank_details_updated_at,this.previewProfileFile=this.baseImageurl+i.data.rider_info.profile_image,this.profileImage=this.previewProfileFile,i.data.rider_info.license_front_url=="image not found"?(this.previewImagefrontfile=null,this.previewImage=so):(this.previewImagefrontfile=this.baseImageurl+i.data.rider_info.license_front_url,this.previewImage=this.previewImagefrontfile),i.data.rider_info.license_back_url=="image not found"?(this.previewImageBackfile=null,this.previewBackImage=so):(this.previewImageBackfile=this.baseImageurl+i.data.rider_info.license_back_url,this.previewBackImage=this.previewImageBackfile),this.lazy_load="",this.lazy_load_back="",this.lazy_load_profile="",this.btnProperty=!1,this.previewProfileFile?(this.loadingProfileImage=!1,this.lazy_load_profile=""):(this.loadingProfileImage=!1,this.profileImage="../src/assets/User.jpg"),this.previewImagefrontfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check",this.loadingFrontImage=!1,this.progressValue+=50,this.lazy_load=""):(this.loadingFrontImage=!1,this.previewImage=so),this.previewImageBackfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check",this.loadingBackImage=!1,this.progressValue+=50,this.lazy_load_back=""):(this.loadingBackImage=!1,this.previewBackImage=so))}).catch(()=>{this.clearFields(),this.$router.push("/")})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},selectProfileImage(t,e){this.$refs.fileProfile.click()},pickProfileFile(t){this.previewProfileFile=t.target.files[0];let i=this.$refs.fileProfile.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.profileImage=r.target.result},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},closeDrawer(){this.drawer=!1}}},Mne=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1),One={ref:"fileInput",class:"imagePreviewWrapper"},Lne={ref:"fileInputBack",class:"imagePreviewWrapper"},Dne={ref:"fileProfile",class:"profileImageWrapper"};function Rne(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-progress-linear"),b=ue("v-img"),S=ue("v-progress-circular"),E=ue("v-row"),I=ue("v-badge"),R=ue("v-file-input"),V=ue("v-col"),q=ue("v-card-text"),U=ue("v-spacer"),H=ue("v-btn"),Z=ue("v-card-actions"),ne=ue("v-dialog"),ie=ue("v-app-bar-nav-icon"),oe=ue("v-toolbar-title"),pe=ue("v-avatar"),de=ue("v-layout"),fe=ue("v-list-item"),ge=ue("v-list"),we=ue("v-menu"),Ie=ue("v-app-bar"),Oe=ue("NavigationDrawer"),ke=ue("v-text-field"),Ee=ue("v-select"),Qe=ue("v-switch"),gt=ue("v-main"),nt=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[Mne,w(E,{justify:"center"},{default:D(()=>[w(ne,{id:"dialogBox",modelValue:r.licImg,"onUpdate:modelValue":e[8]||(e[8]=ft=>r.licImg=ft),transition:"dialog-top-transition","max-width":"1000px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(" Upload License Image ")]),_:1}),r.previewImage!=null||r.previewBackImage!=null?(be(),He(_,{key:1,"model-value":r.progressValue,height:"10",color:"#20205C"},null,8,["model-value"])):We("",!0),w(E,{class:"imagePopup dialogBoxDescription"},{default:D(()=>[w(V,{cols:"12",md:"6",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"centerText"},{default:D(()=>[ye("License Front Image")]),_:1}),Pe("div",One,[w(b,{src:r.previewImage,"lazy-src":r.previewImage,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[0]||(e[0]=ft=>a.selectLicenseFrontImage(r.previewImagefrontfile,!1))},{placeholder:D(()=>[w(E,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.previewImagefrontfile?We("",!0):(be(),He(b,{key:0,src:r.lazy_load},null,8,["src"])),r.loadingFrontImage?(be(),He(S,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.previewImagefrontfile!=null?(be(),He(I,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[1]||(e[1]=ft=>a.selectLicenseFrontImage(r.previewImagefrontfile,!0))})):We("",!0)],512),w(R,{ref:"fileInput",type:"file",accept:"image/*",modelValue:r.file,"onUpdate:modelValue":e[2]||(e[2]=ft=>r.file=ft),onEmptied:e[3]||(e[3]=ft=>r.file=null),onInput:a.pickLicenceFrontFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1}),w(V,{md:"6",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"centerText"},{default:D(()=>[ye("License Back Image")]),_:1}),Pe("div",Lne,[w(b,{src:r.previewBackImage,"lazy-src":r.previewBackImage,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[4]||(e[4]=ft=>a.selectLicenseBackImage(r.previewImageBackfile,!1))},{placeholder:D(()=>[w(E,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.previewImageBackfile?We("",!0):(be(),He(b,{key:0,src:r.lazy_load_back},null,8,["src"])),r.loadingBackImage?(be(),He(S,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.previewImageBackfile!=null?(be(),He(I,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[5]||(e[5]=ft=>a.selectLicenseBackImage(r.previewImageBackfile,!0))})):We("",!0)],512),w(R,{ref:"fileInputBack",type:"file",accept:"image/*",modelValue:r.fileBack,"onUpdate:modelValue":e[6]||(e[6]=ft=>r.fileBack=ft),onEmptied:e[7]||(e[7]=ft=>r.fileBack=null),onInput:a.pickLicenceBackFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1})]),_:1}),r.licImgError?(be(),He(q,{key:2,class:"dialogBoxError",innerHTML:r.licImgMessage},null,8,["innerHTML"])):We("",!0),w(Z,{class:"dialogButtonsUploadImage",style:{"margin-bottom":"30px"}},{default:D(()=>[w(U),w(H,{"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:a.closeLicenseUploadPopUp},{default:D(()=>[ye(" Cancel ")]),_:1},8,["onClick"]),w(H,{"prepend-icon":"mdi-upload",class:"dialogBoxGreenColor",variant:"text",onClick:a.licenseImagesUploaded},{default:D(()=>[ye(" Upload ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(E,{justify:"center"},{default:D(()=>[w(ne,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[11]||(e[11]=ft=>r.dialog=ft),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(q,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(q,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(Z,{class:"dialogBoxActionButtons"},{default:D(()=>[w(U),r.cancelButtonText=="Cancel"?(be(),He(H,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[9]||(e[9]=ft=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(H,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(H,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[10]||(e[10]=ft=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(nt,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(de,{id:"dashboardView"},{default:D(()=>[w(Ie,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(ie,{variant:"text",onClick:e[12]||(e[12]=zl(ft=>r.drawer=!r.drawer,["stop"]))}),w(oe,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Personal Information")]),_:1}),w(we,{width:"220px"},{activator:D(({props:ft})=>[w(H,Mi({icon:""},ft),{default:D(()=>[w(pe,{class:"accountIcon",size:"38"},{default:D(()=>[w(b,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ge,null,{default:D(()=>[w(fe,null,{default:D(()=>[w(de,{style:{"justify-content":"center"}},{default:D(()=>[w(pe,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(b,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(fe,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(Oe,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(gt,{class:"mainView"},{default:D(()=>[w(E,{class:"mainBlockStyle"},{default:D(()=>[w(V,{class:"columnStyle"},{default:D(()=>[w(E,{class:"detailsBlockHead"},{default:D(()=>[w(pe,{size:"160",class:"topCardCenter editProfileImage"},{default:D(()=>[Pe("div",Dne,[w(b,{src:r.profileImage,"lazy-src":r.profileImage,class:"bg-grey-lighten-2",onClick:e[13]||(e[13]=ft=>a.selectProfileImage(r.previewProfileFile,!1))},{placeholder:D(()=>[w(E,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.previewProfileFile?We("",!0):(be(),He(b,{key:0,src:r.lazy_load_profile},null,8,["src"])),r.loadingProfileImage?(be(),He(S,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.previewProfileFile!=null?(be(),He(I,{key:0,icon:"mdi-close",class:"editProfileOverlay",onClick:e[14]||(e[14]=ft=>a.selectProfileImage(r.previewProfileFile,!0))})):We("",!0)],512),w(R,{ref:"fileProfile",type:"file",accept:"image/*",modelValue:r.fileImageProfile,"onUpdate:modelValue":e[15]||(e[15]=ft=>r.fileImageProfile=ft),onEmptied:e[16]||(e[16]=ft=>r.fileImageProfile=null),onInput:a.pickProfileFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1}),w(V,null,{default:D(()=>[w(q,{class:"cardStyleName topCardCenter"},{default:D(()=>[ye(Zt(r.fullName),1)]),_:1}),w(q,{class:"topCardCenter",style:{"font-size":"18px"}},{default:D(()=>[ye(Zt(r.phone),1)]),_:1})]),_:1}),w(V,{class:"profileSectionLogo"},{default:D(()=>[w(b,{src:r.dlivrdProfileLogo,width:"200"},null,8,["src"])]),_:1})]),_:1}),w(p,{class:"bankingInfoTitle fontSize"},{default:D(()=>[ye("Personal Information")]),_:1}),w(E,null,{default:D(()=>[w(V,{cols:"12",md:"6",sm:"12",xs:"12",class:"columnPadding"},{default:D(()=>[w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("First Name")]),_:1}),w(ke,{modelValue:r.firstName,"onUpdate:modelValue":e[17]||(e[17]=ft=>r.firstName=ft),readonly:r.nameVerified,hint:r.nameVerifiedHint,class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue","readonly","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Last Name")]),_:1}),w(ke,{modelValue:r.lastName,"onUpdate:modelValue":e[18]||(e[18]=ft=>r.lastName=ft),readonly:r.nameVerified,hint:r.nameVerifiedHint,class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue","readonly","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Mobile Number")]),_:1}),w(ke,{modelValue:r.phone,"onUpdate:modelValue":e[19]||(e[19]=ft=>r.phone=ft),readonly:"",hint:"Mobile number cannot be edited.",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Date of Birth")]),_:1}),w(ke,{modelValue:r.dob,"onUpdate:modelValue":e[20]||(e[20]=ft=>r.dob=ft),readonly:"",hint:r.hintDOB,class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Tax Type")]),_:1}),w(Ee,{modelValue:r.selectedPurpose,"onUpdate:modelValue":e[21]||(e[21]=ft=>r.selectedPurpose=ft),items:r.purpose,regular:"",id:"tf_id",color:"#0afd01","bg-color":"#ffffff",class:"tf_width",density:"comfortable"},null,8,["modelValue","items"])]),_:1})]),_:1}),w(V,{md:"6",sm:"12",xs:"12",class:"columnPadding"},{default:D(()=>[w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Email Address")]),_:1}),w(ke,{modelValue:r.emailAddress,"onUpdate:modelValue":e[22]||(e[22]=ft=>r.emailAddress=ft),readonly:"",hint:"Email cannot be changed.",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Country")]),_:1}),w(Ee,{modelValue:r.optedCountry,"onUpdate:modelValue":e[23]||(e[23]=ft=>r.optedCountry=ft),items:r.countries,id:"tf_id",clearable:"",readonly:r.locationVerified,hint:r.countryVerifiedHint,"open-on-clear":"",color:"#0AFD01","bg-color":"#FFFFFF",placeholder:"Select Country","persistent-placeholder":!0,class:"tf_width",density:"comfortable"},null,8,["modelValue","items","readonly","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("State")]),_:1}),w(Ee,{modelValue:r.optedState,"onUpdate:modelValue":e[24]||(e[24]=ft=>r.optedState=ft),items:r.states,clearable:"","open-on-clear":"",readonly:r.locationVerified,hint:r.stateVerifiedHint,color:"#0AFD01","bg-color":"#FFFFFF",placeholder:"Select State","persistent-placeholder":!0,class:"tf_width",density:"comfortable"},null,8,["modelValue","items","readonly","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("City")]),_:1}),w(Ee,{modelValue:r.optedCity,"onUpdate:modelValue":e[25]||(e[25]=ft=>r.optedCity=ft),items:r.cities,clearable:"","open-on-clear":"",readonly:r.locationVerified,hint:r.cityVerifiedHint,color:"#0AFD01","bg-color":"#FFFFFF",placeholder:"Select City","persistent-placeholder":!0,class:"tf_width",density:"comfortable"},null,8,["modelValue","items","readonly","hint"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("SSN/ EIN")]),_:1}),w(ke,{modelValue:r.SSN,"onUpdate:modelValue":e[26]||(e[26]=ft=>r.SSN=ft),hint:r.hintSSN,readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue","hint"])]),_:1}),We("",!0)]),_:1})]),_:1}),w(E,null,{default:D(()=>[w(Qe,{modelValue:r.togglePassword,"onUpdate:modelValue":e[28]||(e[28]=ft=>r.togglePassword=ft),color:"#0AFD01",label:"Change Password",value:"true",class:"toggleBtnStyle","hide-details":""},null,8,["modelValue"])]),_:1}),r.togglePassword?(be(),He(E,{key:0},{default:D(()=>[w(V,{cols:"12",md:"6",sm:"12",class:"columnPadding"},{default:D(()=>[w(p,{class:"tf_passwordTitleAlignment"},{default:D(()=>[ye("New Password")]),_:1}),w(ke,{"hide-details":"",modelValue:r.newPassword,"onUpdate:modelValue":e[29]||(e[29]=ft=>r.newPassword=ft),placeholder:"Enter Password","persistent-placeholder":!0,class:"tf_password",name:"newPassword",value:r.newPassword,"append-icon":r.newPasswordValue?"mdi-eye-off":"mdi-eye","onClick:append":e[30]||(e[30]=()=>r.newPasswordValue=!r.newPasswordValue),type:r.newPasswordValue?"password":"text",density:"comfortable"},null,8,["modelValue","value","append-icon","type"])]),_:1}),w(V,{md:"6",sm:"12",class:"columnPadding"},{default:D(()=>[w(p,{class:"tf_passwordTitleAlignment"},{default:D(()=>[ye("Confirm Password")]),_:1}),w(ke,{"hide-details":"",modelValue:r.confirmPassword,"onUpdate:modelValue":e[31]||(e[31]=ft=>r.confirmPassword=ft),placeholder:"Confirm Password","persistent-placeholder":!0,class:"tf_password",name:"confirmPassword",value:r.confirmPassword,"append-icon":r.newConfirmPassValue?"mdi-eye-off":"mdi-eye","onClick:append":e[32]||(e[32]=()=>r.newConfirmPassValue=!r.newConfirmPassValue),type:r.newConfirmPassValue?"password":"text",density:"comfortable"},null,8,["modelValue","value","append-icon","type"])]),_:1})]),_:1})):We("",!0),w(p,{class:"bankingInfoTitle fontSize"},{default:D(()=>[ye("Banking Information")]),_:1}),w(E,null,{default:D(()=>[w(V,{cols:"12",md:"6",sm:"12",xs:"12",class:"columnPadding"},{default:D(()=>[w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Account Name")]),_:1}),w(ke,{modelValue:r.accountName,"onUpdate:modelValue":e[33]||(e[33]=ft=>r.accountName=ft),hint:"Account Name is Verified and cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Account Number")]),_:1}),w(ke,{modelValue:r.accountNumber,"onUpdate:modelValue":e[34]||(e[34]=ft=>r.accountNumber=ft),hint:"Account Number is Verified and cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Account Type")]),_:1}),w(ke,{modelValue:r.accountType,"onUpdate:modelValue":e[35]||(e[35]=ft=>r.accountType=ft),hint:"Account Type is Verified and cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1}),w(V,{md:"6",sm:"12",xs:"12",class:"columnPadding"},{default:D(()=>[w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Bank")]),_:1}),w(ke,{modelValue:r.bank,"onUpdate:modelValue":e[36]||(e[36]=ft=>r.bank=ft),hint:"Bank name is verified and cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Routing Number")]),_:1}),w(ke,{modelValue:r.routingNumber,"onUpdate:modelValue":e[37]||(e[37]=ft=>r.routingNumber=ft),hint:"Routing Nmmber cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1}),w(V,{class:"columnStyle"},{default:D(()=>[w(p,{class:"titleAlignment"},{default:D(()=>[ye("Updated At")]),_:1}),w(ke,{modelValue:r.bankDetailsUpdatedAt,"onUpdate:modelValue":e[38]||(e[38]=ft=>r.bankDetailsUpdatedAt=ft),hint:"Field cannot be edited.",readonly:"",class:"tf_width",variant:"filled",color:"#0afd01",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),w(V,null,{default:D(()=>[r.showddDetailsWarning?(be(),He(q,{key:0,class:"warningMessageStyle",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0)]),_:1}),w(V,null,{default:D(()=>[r.uploadingData?We("",!0):(be(),He(H,{key:0,"prepend-icon":"mdi-update",variant:"text",style:{"background-color":"#0AFD01"},onClick:a.saveddDetails},{default:D(()=>[ye(" Update ")]),_:1},8,["onClick"])),r.uploadingData?(be(),He(c,{key:1,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})):We("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Bne=Kn(Ane,[["render",Rne]]);const Fne={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{quantityOfBags:["1","2","3","4","5","6","7","8","9","10","10+"],make:[],model:[],year:[],drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,username:"",loading:!0,detailsOfVehicle:!1,vehicleMake:null,vehicleModel:null,vehicleYear:null,cateringBags:null,cart:null,numberOfBags:0,imgCateringBags:null,requiredWarning:"",bagsDetails:null,showBagsWarning:!1,showVehicleWarning:!1,processingDetails:!1,buttonAction:!1,loadView:!1,checkServerData:!1,uploadImageDefault:so,bagsImage:null,bagsImageFile:null,lazy_load_bags_image:"",loadingBagsImage:!0,fileBags:null,bagsImagesList:[],existingBagImages:[],removedBagsImages:[],bagsImageFileList:[],NumberOfBagsImages:0,addNewBagsImage:!0,cartImage:null,cartImageSecond:null,cartImageFile:null,cartImageFile2:null,cartImage1:!1,cartImage2:!1,cartImagesArray:[],existingCartImages:[],removedCartImages:[],lazy_load_cart_image:"",loadingCartImage:!0,fileCart:null,name:"",disableModel:!0,disableYear:!0,validationFailed:!1,checkWorking:!0}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},watch:{vehicleMake(){this.checkServerData||this.setModel()},vehicleModel(){this.checkServerData||this.setVehicleYear()},cateringBags(){this.checkCateringBags()}},methods:{loadVehicleData(){var t="",e=this.baseurl+"get_make_model_year";const i={identity:this.username};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t,session:localStorage.getItem("session_id")}}).then(n=>{n.data.Success&&(this.make=n.data.makes)}).catch(()=>{this.alert_title="Warning",this.alert_description="Session Expired. Please Login again.",this.alert_error=null,this.dialog=!0,this.agreeButtonText="logout"})},setModel(){if(this.vehicleMake==null){this.vehicleModel=null,this.vehicleYear=null,this.model=[],this.year=[],this.disableModel=!0,this.disableYear=!0;return}else{this.vehicleModel=null,this.vehicleYear=null,this.model=[],this.year=[];var t="",e=this.baseurl+"get_make_model_year";const i={identity:this.username,make:this.vehicleMake};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t,session:localStorage.getItem("session_id")}}).then(n=>{this.vehicleMake!=null&&(this.disableModel=!1,this.model=n.data.models)}).catch(()=>{this.clearFields(),this.$router.push("/")})}},setVehicleYear(){if(this.vehicleModel==null){this.vehicleYear=null,this.year=[],this.disableYear=!0;return}else{this.vehicleYear=null,this.year=[];var t="",e=this.baseurl+"get_make_model_year";const i={identity:this.username,make:this.vehicleMake,model:this.vehicleModel};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",authorization:t,session:localStorage.getItem("session_id")}}).then(n=>{this.vehicleModel!=null&&(this.disableYear=!1,this.year=n.data.years)}).catch(()=>{this.clearFields(),this.$router.push("/")})}},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.clearFields(),this.$router.push("/")})},saveVehicleAndBagDetails(){if(this.showVehicleWarning=!1,this.showBagsWarning=!1,this.vehicleMake==null){this.requiredWarning="*Please select the vehicle manufacturer.",this.showVehicleWarning=!0;return}else if(this.vehicleModel==null){this.requiredWarning="*Please select the vehicle model.",this.showVehicleWarning=!0;return}else if(this.vehicleYear==null){this.requiredWarning="*Please select the vehicle make year.",this.showVehicleWarning=!0;return}else if(this.cateringBags==null){this.bagsDetails="*Please select an option for catering bags",this.showBagsWarning=!0;return}else if(this.cart==null){this.bagsDetails="*Please select an option for cart",this.showBagsWarning=!0;return}var t=this.baseurl+"update_rider_vehicle_bag_details";this.processingDetails=!0,this.buttonAction=!0;var e=new FormData;e.append("identity",this.username),e.append("vehicle_make",this.vehicleMake),e.append("vehicle_model",this.vehicleModel),e.append("vehicle_year",this.vehicleYear),e.append("has_catering_bags",this.cateringBags),e.append("has_cart",this.cart),e.append("number_of_bags",this.numberOfBags),e.append("bag_image_remove_list",this.removedBagsImages),e.append("cart_image_remove_list",this.removedCartImages);for(var i=0;i<this.bagsImageFileList.length;i++)e.append("bag_image_"+i,this.bagsImageFileList[i]);for(var i=0;i<this.cartImagesArray.length;i++)e.append("cart_image_"+i,this.cartImagesArray[i]);Ai.post(t,e,{headers:{"Content-Type":"multipart/form-data",session:localStorage.getItem("session_id")}}).then(n=>{console.log("Save vehicle and Bag Details API response"),console.log(n),this.processingDetails=!1,this.buttonAction=!1,n.data.Success?(this.alert_title="Update Successful",this.alert_description="dlivrd Driver vehicle and bag details updated.",this.dialog=!0,this.agreeButtonText="Okay",this.cartImagesArray=[],this.removedCartImages=[]):n.data.Failure=="Session Expired. Please login again."?(this.clearFields(),this.$router.push("/")):(this.dialog=!0,this.alert_title="Update Failed",n.data.bag_image?this.alert_description=n.data.bag_image:this.alert_description="Vehicle and bag details not updated. Try Again!",this.agreeButtonText="Okay")}).catch(()=>{this.clearFields(),this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.getUserVehicleAndBagDetails(),this.loadVehicleData()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},getUserVehicleAndBagDetails(){var t=this.baseurl+"get_rider_vehicle_and_bag_details",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(console.log("Get vehicle and Bag Details Response"),console.log(i),i.data.Success){if(this.checkServerData=!0,this.vehicleMake=i.data.vehicle_details.make,this.vehicleModel=i.data.vehicle_details.model,this.vehicleYear=i.data.vehicle_details.year,this.numberOfBags=i.data.number_of_bags,this.model=i.data.models,this.year=i.data.years,this.disableModel=!1,this.disableYear=!1,i.data.has_cart==!0?this.cart=!0:this.cart=!1,i.data.has_catering_bags==!0?this.cateringBags=!0:this.cateringBags=!1,i.data.bag_image_url!=[]){for(var n=0;n<i.data.bag_image_url.length;n++){var r=this.baseImageurl+i.data.bag_image_url[n];this.bagsImagesList.push(r),this.existingBagImages.push(i.data.bag_image_url[n])}this.numberOfBagsImages=this.bagsImagesList.length,this.numberOfBagsImages==12&&(this.addNewBagsImage=!1)}else this.bagsImageFile=null,this.bagsImage=so;i.data.cart_image_url[0]&&i.data.cart_image_url[1]?(this.cartImageFile=this.baseImageurl+i.data.cart_image_url[0],this.cartImage=this.cartImageFile,this.cartImage1=!0,this.cartImageFile2=this.baseImageurl+i.data.cart_image_url[1],this.cartImageSecond=this.cartImageFile2,this.cartImage2=!0,this.existingCartImages.push(i.data.cart_image_url[0]),this.existingCartImages.push(i.data.cart_image_url[1])):i.data.cart_image_url[0]&&(this.cartImageFile=this.baseImageurl+i.data.cart_image_url[0],this.cartImage=this.cartImageFile,this.cartImage1=!0,this.existingCartImages.push(i.data.cart_image_url[0])),this.loadingBagsImage=!1,this.loadingCartImage=!1}else this.loadingBagsImage=!1,this.loadingCartImage=!1,this.bagsImage=so}).catch(()=>{this.clearFields(),this.$router.push("/")}).finally(()=>{this.checkServerData=!1})},removeBagsImage(t,e){if(this.bagsImagesList.includes(e)){if(e.includes(this.baseImageurl)){var i=e.split(this.baseImageurl);e=i[1]}this.existingBagImages.includes(e)?(this.bagsImagesList.splice(this.bagsImagesList.indexOf(e),1),this.removedBagsImages.push(e)):(this.bagsImagesList.splice(this.bagsImagesList.indexOf(e),1),this.bagsImageFileList.splice(this.bagsImageFileList.indexOf(e),1))}this.numberOfBagsImages-=1,this.numberOfBagsImages<12&&(this.addNewBagsImage=!0)},selectBagsImage(){this.$refs.bagsFileInputData.click()},pickBagsFile(t){this.bagsImageFile=t.target.files[0],this.lazy_load_bags_image="";let i=this.$refs.bagsFileInputData.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.bagsImage=r.target.result,this.bagsImagesList.push(this.bagsImage),this.bagsImageFileList.push(this.bagsImageFile)},n.readAsDataURL(i[0]),this.$emit("input",i[0])}this.numberOfBagsImages+=1,this.numberOfBagsImages==12&&(this.addNewBagsImage=!1)},removeCartImage(t,e,i){if(typeof e=="string"&&e.includes(this.baseImageurl)){var n=e.split(this.baseImageurl);e=n[1]}t==1&&i==!0?(this.existingCartImages.includes(e)&&this.removedCartImages.push(e),this.cartImagesArray.includes(e)&&this.cartImagesArray.splice(this.cartImagesArray.indexOf(e),1),this.cartImageSecond!=null?(this.cartImage=this.cartImageSecond,this.cartImageFile=this.cartImageFile2,this.cartImageSecond=null,this.cartImageFile2=null,this.cartImage2=!1):(this.cartImage=null,this.cartImageFile=null,this.lazy_load_cart_image=so,this.fileCart=null,this.cartImage1=!1)):t==2&&i==!0&&(this.existingCartImages.includes(e)&&this.removedCartImages.push(e),this.cartImagesArray.includes(e)&&this.cartImagesArray.splice(this.cartImagesArray.indexOf(e),1),this.cartImageSecond=null,this.cartImageFile2=null,this.lazy_load_cart_image=so,this.fileCart=null,this.cartImage2=!1)},selectCartImage(){this.$refs.cartFileInputdata.click()},pickCartFile(t){if(this.cartImage1==!1){this.cartImageFile=t.target.files[0],this.lazy_load_cart_image="";let i=this.$refs.cartFileInputdata.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.cartImage=r.target.result,this.cartImagesArray.push(this.cartImageFile)},n.readAsDataURL(i[0]),this.$emit("input",i[0])}this.cartImage1=!0}else{this.cartImageFile2=t.target.files[0],this.lazy_load_cart_image="";let i=this.$refs.cartFileInputdata.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.cartImageSecond=r.target.result,this.cartImagesArray.push(this.cartImageFile2)},n.readAsDataURL(i[0]),this.$emit("input",i[0])}this.cartImage2=!0}},checkCateringBags(){this.cateringBags==!0?this.numberOfBags=1:this.numberOfBags=0},closeDrawer(){this.drawer=!1}}},$ne=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1),Nne={class:"bagsImagesMainBlock"},zne={key:0,ref:"bagsFileInput",class:"imagePreviewBlockBags",style:{"background-color":"white"}},Vne={key:0,class:"imagePreviewBlock",style:{"background-color":"white"}},Une={key:1,class:"imagePreviewBlock",style:{"background-color":"white"}},jne={key:2,ref:"cartFileInput",class:"imagePreviewBlock",style:{"background-color":"white"}};function Hne(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-col"),ge=ue("v-select"),we=ue("v-radio"),Ie=ue("v-radio-group"),Oe=ue("v-badge"),ke=ue("v-file-input"),Ee=ue("v-progress-circular"),Qe=ue("v-main"),gt=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[$ne,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=nt=>r.dialog=nt),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=nt=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=nt=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(gt,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(nt=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Vehicle Details")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:nt})=>[w(S,Mi({icon:""},nt),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Qe,{class:"mainViewStyle"},{default:D(()=>[r.processingDetails?(be(),He(R,{key:0,style:{position:"fixed",width:"100vw","background-color":"transparent","z-index":"10"}},{default:D(()=>[w(fe,{style:{width:"100vw",height:"100vh","text-align":"center"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:130,color:"#ffffff",class:"loading_bar"})]),_:1})]),_:1})):We("",!0),w(fe,{class:"screenView"},{default:D(()=>[w(fe,{class:"pageHeading"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Add Vehicle Details")]),_:1})]),_:1}),w(R,{class:"centerAlignContent"},{default:D(()=>[w(fe,{cols:"12",md:"3",sm:"10"},{default:D(()=>[w(ge,{clearable:"","open-on-clear":"",modelValue:r.vehicleMake,"onUpdate:modelValue":e[4]||(e[4]=nt=>r.vehicleMake=nt),id:"make_id",items:r.make,label:"Make",variant:"solo",placeholder:"Select Manufacturer","hide-details":""},null,8,["modelValue","items"])]),_:1}),w(fe,{cols:"12",md:"3",sm:"10"},{default:D(()=>[w(ge,{clearable:"","open-on-clear":"",modelValue:r.vehicleModel,"onUpdate:modelValue":e[5]||(e[5]=nt=>r.vehicleModel=nt),items:r.model,disabled:r.disableModel,id:"make_id",label:"Model",variant:"solo",placeholder:"Select Model","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1}),w(fe,{cols:"12",md:"3",sm:"10"},{default:D(()=>[w(ge,{clearable:"","open-on-clear":"",modelValue:r.vehicleYear,"onUpdate:modelValue":e[6]||(e[6]=nt=>r.vehicleYear=nt),items:r.year,disabled:r.disableYear,id:"make_id",label:"Year",variant:"solo",placeholder:"Select Year","hide-details":""},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),w(fe,{class:"mainColView"},{default:D(()=>[w(fe,{class:"bagsBlockView"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Do you have catering bags?")]),_:1}),w(Ie,{inline:"",modelValue:r.cateringBags,"onUpdate:modelValue":e[7]||(e[7]=nt=>r.cateringBags=nt),"hide-details":"",class:"radioBtns"},{default:D(()=>[w(we,{style:{color:"black"},label:"Yes",value:!0}),w(we,{style:{color:"black"},label:"No",value:!1})]),_:1},8,["modelValue"]),w(p,{class:"fontSize"},{default:D(()=>[ye("Do you have a cart?")]),_:1}),w(Ie,{inline:"",modelValue:r.cart,"onUpdate:modelValue":e[8]||(e[8]=nt=>r.cart=nt),"hide-details":"",class:"radioBtns"},{default:D(()=>[w(we,{style:{color:"black"},label:"Yes",value:!0}),w(we,{style:{color:"black"},label:"No",value:!1})]),_:1},8,["modelValue"]),r.cateringBags?(be(),He(fe,{key:0,class:"bagsDetailView"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Number of catering bags?")]),_:1}),w(ge,{modelValue:r.numberOfBags,"onUpdate:modelValue":e[9]||(e[9]=nt=>r.numberOfBags=nt),items:r.quantityOfBags,box:"",placeholder:"Quantity of Bags","hide-details":"","bg-color":"#ffffff",class:"selectFieldBagsQuantity"},null,8,["modelValue","items"]),w(fe,{cols:"12",md:"5",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Image of Catering Bags")]),_:1}),w(_,{class:"note"},{default:D(()=>[ye("*You can upload a maximum of 12 images.")]),_:1}),w(_,{class:"note",style:{"margin-bottom":"20px"}},{default:D(()=>[ye("*Acceptable Image Format: JPG, PNG.")]),_:1}),Pe("div",Nne,[(be(!0),ti(Oi,null,Zr(r.bagsImagesList,(nt,ft)=>(be(),ti("div",{key:ft,class:"imagePreviewBlockBags",style:{"background-color":"white"}},[w(U,{src:nt,"lazy-src":nt,class:"bg-grey-lighten-2 imagePreviewWrapperBags"},null,8,["src","lazy-src"]),w(Oe,{icon:"mdi-close",class:"badgeStyle",onClick:Tt=>a.removeBagsImage(ft,nt)},null,8,["onClick"])]))),128)),r.addNewBagsImage?(be(),ti("div",zne,[w(U,{src:r.uploadImageDefault,"lazy-src":r.uploadImageDefault,class:"bg-grey-lighten-2 imagePreviewWrapperBags",onClick:e[10]||(e[10]=nt=>a.selectBagsImage())},null,8,["src","lazy-src"])],512)):We("",!0)]),w(ke,{ref:"bagsFileInputData",type:"file",accept:"image/*",modelValue:r.fileBags,"onUpdate:modelValue":e[11]||(e[11]=nt=>r.fileBags=nt),onEmptied:e[12]||(e[12]=nt=>r.fileBags=null),onInput:a.pickBagsFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1})]),_:1})):We("",!0),r.cart?(be(),He(fe,{key:1,class:"bagsDetailView"},{default:D(()=>[w(fe,{cols:"12",md:"5",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Image of Cart")]),_:1}),w(_,{class:"note"},{default:D(()=>[ye("*You can upload maximum of 2 cart images.")]),_:1}),w(_,{class:"note",style:{"padding-bottom":"20px !important"}},{default:D(()=>[ye("*Acceptable Image Format: JPG, PNG.")]),_:1}),r.cartImage1?(be(),ti("div",Vne,[w(U,{src:r.cartImage,"lazy-src":r.cartImage,class:"bg-grey-lighten-2 imagePreviewWrapper"},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.cartImageFile?We("",!0):(be(),He(U,{key:0,src:r.lazy_load_cart_image},null,8,["src"])),r.loadingCartImage?(be(),He(Ee,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.cartImageFile!=null?(be(),He(Oe,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[13]||(e[13]=nt=>a.removeCartImage("1",r.cartImageFile,!0))})):We("",!0)])):We("",!0),r.cartImage2?(be(),ti("div",Une,[w(U,{src:r.cartImageSecond,"lazy-src":r.cartImageSecond,class:"bg-grey-lighten-2 imagePreviewWrapper"},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.cartImageFile2?We("",!0):(be(),He(U,{key:0,src:r.lazy_load_cart_image},null,8,["src"])),r.loadingCartImage?(be(),He(Ee,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.cartImageFile2!=null?(be(),He(Oe,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[14]||(e[14]=nt=>a.removeCartImage(2,r.cartImageFile2,!0))})):We("",!0)])):We("",!0),r.cartImage2?We("",!0):(be(),ti("div",jne,[w(U,{src:r.uploadImageDefault,"lazy-src":r.uploadImageDefault,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[15]||(e[15]=nt=>a.selectCartImage())},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.cartImageFile?We("",!0):(be(),He(U,{key:0,src:r.lazy_load_cart_image},null,8,["src"])),r.loadingCartImage?(be(),He(Ee,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"])],512)),w(ke,{ref:"cartFileInputdata",type:"file",accept:"image/*",modelValue:r.fileCart,"onUpdate:modelValue":e[16]||(e[16]=nt=>r.fileCart=nt),onEmptied:e[17]||(e[17]=nt=>r.fileCart=null),onInput:a.pickCartFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1})]),_:1})):We("",!0),w(fe,{class:"fileUploadBlockContainer"},{default:D(()=>[r.showBagsWarning?(be(),He(_,{key:0,class:"note",innerHTML:r.bagsDetails},null,8,["innerHTML"])):We("",!0),r.showVehicleWarning?(be(),He(_,{key:1,class:"note",innerHTML:r.requiredWarning},null,8,["innerHTML"])):We("",!0),w(S,{"prepend-icon":"mdi-check",class:"buttonView2",variant:"text",disabled:r.buttonAction,onClick:a.saveVehicleAndBagDetails},{default:D(()=>[ye(" Save ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Gne=Kn(Fne,[["render",Hne]]);const Wne={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,username:"",loading:!0,showMessage:!1,processingDetails:!1,buttonAction:!1,loadView:!1,name:"",verifyIdentity:!1,verifyAccount:!1,validationFailed:!1,snackbar:!1,snackBarText:"",bankingInfoStatus:null}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},methods:{initPlaid(t){if(this.loading=!1,this.processingDetails=!0,this.buttonAction=!0,this.bankingInfoStatus=="pending_automatic_verification"){this.alert_title="Verification Pending",this.alert_description="Your banking information is under review. Please check back in 1-2 business days.",this.agreeButtonText="Okay",this.dialog=!0,this.loading=!0,this.processingDetails=!1;return}var e=this.baseurl+t;const i={identity:localStorage.getItem("username")};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(n=>{n.data.Failure?(this.loading=!0,this.processingDetails=!1,this.alert_title="Alert",this.alert_description=n.data.Failure,this.dialog=!0,this.agreeButtonText="Okay"):(this.loading=!0,this.loadPlaid(n.data.link_token))}).catch(()=>{this.message="Not liked!"})},initPlaidIV(t){if(this.verifyIdentity==!0){this.alert_title="Verified",this.alert_description="Your identity verification process is complete.",this.dialog=!0,this.agreeButtonText="Okay";return}this.loading=!1,this.processingDetails=!0,this.buttonAction=!0;var e=this.baseurl+t;const i={identity:localStorage.getItem("username")};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(n=>{this.loading=!0,this.loadPlaidIV(n.data.link_token)}).catch(()=>{this.message="Not liked!"})},loadPlaid(t){this.loading=!0,this.processingDetails=!1,this.buttonAction=!1,Plaid.create({token:t,onSuccess:(i,n)=>{this.updatepublictookn(i,"",n.institution.name,n.account_id,n.account.verification_status,"plaidpublictookandetails")},onLoad:()=>{},onExit:(i,n)=>{console.log(i)},onEvent:(i,n)=>{}}).open()},loadPlaidIV(t){this.loading=!1,this.processingDetails=!1,this.buttonAction=!1,Plaid.create({token:t,onSuccess:(i,n)=>{this.updatepublictookn(i,n.link_session_id,"","","","plaidpublictookandetailsIV")},onLoad:()=>{},onExit:(i,n)=>{console.log(i)},onEvent:(i,n)=>{}}).open()},updatepublictookn(t,e,i,n,r,a){var c=this.baseurl+a;const s={link_session_id:e,public_tokan:t,bank_name:i,account_id:n,verification_status:r,identity:localStorage.getItem("username")};Ai.post(c,s,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(p=>{p.data.Success?(this.validationFailed=!1,this.snackbar=!1,this.bankingInfoStatus=p.data.banking_info_verified,this.bankingInfoStatus=="pending_manual_verification"?this.alert_title="Validation Pending":this.bankingInfoStatus=="pending_automatic_verification"?this.alert_title="Validation Pending":this.alert_title="Validation Successful",this.alert_description=p.data.Success,this.dialog=!0,this.agreeButtonText="Okay"):(this.alert_title="Validation Failed",this.alert_description="Unable to validate your account. Please try again.",this.dialog=!0,this.agreeButtonText="Okay"),this.loading=!0,this.processingDetails=!1}).catch(()=>{this.message="Not liked!"})},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.bankingInfoStatus=n.banking_info_verified,Object.keys(n.non_verified_values).length==0?(this.validationFailed=!1,this.snackbar=!1):(this.validationFailed=!0,this.snackbar=!0,n.non_verified_values.name_verified==!1&&(this.snackBarText="Name not verified.</br>"),n.non_verified_values.mobile_number_verified==!1&&(this.snackBarText+="Mobile number not verified.</br>"),n.non_verified_values.ssn_verified==!1&&(this.snackBarText+="SSN not verified.</br>"),n.non_verified_values.dob_verified==!1&&(this.snackBarText+="Date of Birth not verified.</br>"),n.non_verified_values.address_verified==!1&&(this.snackBarText+="Address not verified.</br>")),n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0):(localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},closeDrawer(){this.drawer=!1}}},qne=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1);function Zne(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-col"),ge=ue("v-icon"),we=ue("v-snackbar"),Ie=ue("v-main"),Oe=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[qne,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ke=>r.dialog=ke),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=ke=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=ke=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Oe,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(ke=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Payments")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:ke})=>[w(S,Mi({icon:""},ke),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Ie,{style:{height:"97vh","padding-bottom":"10px","overflow-y":"scroll"}},{default:D(()=>[r.processingDetails?(be(),He(R,{key:0,style:{position:"fixed",width:"100vw","background-color":"transparent","z-index":"10"}},{default:D(()=>[w(fe,{style:{width:"100vw","text-align":"center"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:130,style:{top:"225px"},color:"#000000",class:"loading_bar"})]),_:1})]),_:1})):We("",!0),w(fe,{class:"centerAlignContent"},{default:D(()=>[w(fe,null,{default:D(()=>[w(_,null,{default:D(()=>[ye(" Please proceed with your identity and account validation. ")]),_:1}),w(R,{style:{"justify-content":"center"}},{default:D(()=>[w(fe,null,{default:D(()=>[w(ge,{size:"206",class:"bankIcon",onClick:e[4]||(e[4]=ke=>a.initPlaidIV("getLinkTokanPlaidIV")),disabled:r.buttonAction},{default:D(()=>[ye(" mdi-account-circle ")]),_:1},8,["disabled"]),w(_,null,{default:D(()=>[ye(" Identity Validation ")]),_:1})]),_:1}),w(fe,null,{default:D(()=>[w(ge,{size:"206",class:"bankIcon",onClick:e[5]||(e[5]=ke=>a.initPlaid("getLinkTokanPlaid")),disabled:r.buttonAction},{default:D(()=>[ye(" mdi-bank-circle ")]),_:1},8,["disabled"]),w(_,null,{default:D(()=>[ye(" Account Validation ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),w(we,{modelValue:r.snackbar,"onUpdate:modelValue":e[7]||(e[7]=ke=>r.snackbar=ke),"multi-line":"",timeout:"200000",elevation:"24",color:"#0afd01",style:{color:"black !important"}},{actions:D(()=>[w(_,{class:"txtSnackBar",innerHTML:r.snackBarText},null,8,["innerHTML"]),w(S,{class:"btnCloseSnackBar",variant:"text",onClick:e[6]||(e[6]=ke=>r.snackbar=!1)},{default:D(()=>[w(ge,null,{default:D(()=>[ye("mdi-close")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Yne=Kn(Wne,[["render",Zne]]);const Xne={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{drawer:!1,agreeButtonText:null,mapbox_ref:null,get_current_location:[74.333454,31.513394],mapbox_ref_click_log:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,username:"",updating:!1,loading:!0,radiusSlider:40,showMessage:!1,datapoint:null,loadView:!1,zoom:null,boundaryBox:null,northEastLat:"",northEastLng:"",southWestLat:"",southWestLng:"",name:"",validationFailed:!1,boundaryCoord:null,tickLabels:{0:"",40:"$40",50:"$50",60:"$60",70:"$70",80:"$80+"},accessToken:"pk.eyJ1IjoibWluZ3lhbjIxNCIsImEiOiJja2h4Y2xiajAwMTBsMnZuNHBzMjVmYjlsIn0.w7Wxvvi2i4olHVL2gE1zkQ"}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){_S.accessToken="pk.eyJ1IjoibWluZ3lhbjIxNCIsImEiOiJja2h4Y2xiajAwMTBsMnZuNHBzMjVmYjlsIn0.w7Wxvvi2i4olHVL2gE1zkQ",this.sessionValidator()},methods:{loadmap(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t=>{this.get_current_location=[this.mapbox_ref_click_log.lng,this.mapbox_ref_click_log.lat],this.generate_map()}):this.generate_map()},generate_map(){const t=[[this.southWestLng,this.southWestLat],[this.northEastLng,this.northEastLat]];this.mapbox_ref=new _S.Map({container:"mapContainerBlock",style:"mapbox://styles/mapbox/streets-v11",center:[this.mapbox_ref_click_log.lng,this.mapbox_ref_click_log.lat],zoom:this.zoom,maxBounds:t}),this.generateGeoCircle(),this.mapbox_ref.on("click",this.addMarker),this.mapbox_ref.on("load",()=>{for(var e=0;e<this.boundaryCoord.boundaries.length;e++){var i=this.boundaryCoord.boundaries[e].intensity;this.mapbox_ref.addSource(`maine${e}`,{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[[parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_left.long),parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_left.lat)],[parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_right.long),parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_right.lat)],[parseFloat(this.boundaryCoord.boundaries[e].boundary.top_right.long),parseFloat(this.boundaryCoord.boundaries[e].boundary.top_right.lat)],[parseFloat(this.boundaryCoord.boundaries[e].boundary.top_left.long),parseFloat(this.boundaryCoord.boundaries[e].boundary.top_left.lat)],[parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_left.long),parseFloat(this.boundaryCoord.boundaries[e].boundary.bottom_left.lat)]]]}}}),this.mapbox_ref.addLayer({id:`maine${e}`,type:"fill",source:`maine${e}`,layout:{},paint:{"fill-color":"#ff0000","fill-opacity":i}})}}),this.mapbox_ref.on("load",()=>{})},addMarker(t){try{this.circle_layer!=null&&(this.mapbox_ref.removeLayer("point"),this.mapbox_ref.removeSource("point"),this.getSelectedLoc())}catch{}this.mapbox_ref_click_log=t.lngLat,this.generateGeoCircle()},generateGeoCircle(){this.circle_layer={id:"point",type:"circle",paint:{"circle-opacity":.4,"circle-radius":200,"circle-color":"#0AFD01"},source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{field:this.mapbox_ref_click_log},geometry:{type:"Point",coordinates:[this.mapbox_ref_click_log.lng,this.mapbox_ref_click_log.lat]}}]}}},this.mapbox_ref.on("styledata",this.test)},test(){this.mapbox_ref.addLayer(this.circle_layer)},getSelectedLoc(){if(this.circle_layer==null)return{lat:0,lng:0,radius:0};const t=200,e=this.mapbox_ref.getZoom(),i=156543.03392*Math.cos(this.mapbox_ref_click_log.lat*Math.PI/180)/Math.pow(2,e),n=t*i;return this.datapoint={lat:this.mapbox_ref_click_log.lat,lng:this.mapbox_ref_click_log.lng,radius:n,zoom:e},this.datapoint},getZoomLoc(t){return 0},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.getDeliveryLocationDetails()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},saveDeliveryDetails(){this.updating=!0,this.currentLocation=this.getSelectedLoc();var t=this.baseurl+"update_rider_delivery_area_and_tip_pref",e={identity:this.username,center:{lat:this.currentLocation.lat,long:this.currentLocation.lng},radius:this.currentLocation.radius,zoom:this.currentLocation.zoom,tip_pref:this.radiusSlider};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{this.updating=!1,i.data.Success?(this.dialog=!0,this.alert_title="Success",this.alert_description="Your delivery location details have been updated.",this.agreeButtonText="Okay"):i.data.Failure=="Session Expired. Please login again."?(this.clearFields(),this.$router.push("/")):(this.dialog=!0,this.alert_title="Warning",this.alert_description="Your delivery location details were not saved. Please Try again!",this.agreeButtonText="Okay")}).catch(()=>{this.clearFields(),this.$router.push("/")})},getDeliveryLocationDetails(){var t=this.baseurl+"get_rider_delivery_area_and_tip_pref",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.data.Success){var n=i.data.data;this.radiusSlider=n.tip_pref,n.center.lat==null&&(n.center.lat=0),n.center.long==null&&(n.center.long=0),this.boundaryCoord=n.boundaries_intensities,this.mapbox_ref_click_log={lat:n.center.lat,lng:n.center.long},this.zoom=n.zoom,this.get_current_location=[n.center.long,n.center.lat],this.northEastLat=n.boundary.northEast.lat,this.northEastLng=n.boundary.northEast.long,this.southWestLat=n.boundary.southWest.lat,this.southWestLng=n.boundary.southWest.long,this.loadmap()}}).catch(()=>{this.clearFields(),this.$router.push("/")})},closeDrawer(){this.drawer=!1}}},Kne=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1);function Qne(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-slider"),ge=ue("v-app"),we=ue("v-col"),Ie=ue("v-main"),Oe=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[Kne,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ke=>r.dialog=ke),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=ke=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=ke=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Oe,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(ke=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Delivery Location")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:ke})=>[w(S,Mi({icon:""},ke),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Ie,{class:"mainViewStyle"},{default:D(()=>[w(R,{class:"mainBlockStyle"},{default:D(()=>[w(we,null,{default:D(()=>[w(p,{class:"pageHeading"},{default:D(()=>[ye("Mark Delivery Area On The Map")]),_:1}),w(Z,{id:"mapContainerBlock",class:"mapStyle"}),w(ge,{class:"appView"},{default:D(()=>[w(s,{class:"mx-auto radiusCardStyle","max-width":"760"},{default:D(()=>[w(p,{class:"deliveryRadiusSliderTitle"},{default:D(()=>[ye("Deliver Outside Area")]),_:1}),w(_,{class:"deliveryRadiusSliderText"},{default:D(()=>[ye("Willing to travel outside the defined delivery radius if the earning opportunity is greater than or equal to:")]),_:1}),w(fe,{modelValue:r.radiusSlider,"onUpdate:modelValue":e[4]||(e[4]=ke=>r.radiusSlider=ke),ticks:r.tickLabels,"thumb-color":"red","show-ticks":"always","thumb-size":26,step:"10",max:90,min:30,class:"sliderStyle"},null,8,["modelValue","ticks"])]),_:1})]),_:1}),w(we,{class:"fileUploadBlock"},{default:D(()=>[r.updating?(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0afd01"})):We("",!0),r.updating?We("",!0):(be(),He(S,{key:1,"prepend-icon":"mdi-update",class:"buttonView",variant:"text",onClick:a.saveDeliveryDetails},{default:D(()=>[ye(" Update ")]),_:1},8,["onClick"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Jne=Kn(Xne,[["render",Qne]]);const ere={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{accountFAQ:[{title:"How do I reset my password?",text:"You can reset your password by going to the dlivrd app and clicking the word “Forgot” under the password field. You will be sent an email from dlivrd with a link to reset your password. If you do not see the email, come through, first check your spam folder. If it is not in there and does not come up when you search for “dlivrd” in your inbox, please contact us at 1-844-515-2932."},{title:"What is my username and password?",text:"Your username will generally be your phone number including area code. Your password is generated at random to make sure that your account is secure. This is texted to you from 58973 when you are first onboarded. If you require further assistance, please follow the link below."}],paymentFAQ:[{title:"How do I get paid?",text:"Working on the dlivrd platform enables you to be paid for your deliveries the business day following your completed delivery. We work with a third-party payment platform called Everee to accomplish this. Deliveries completed Monday through Thursday are paid the next business banking day. Deliveries completed Friday through Sunday are paid on Mondays. If Monday is a banking holiday you will be paid the following business day."},{title:"How much can I expect to earn per delivery?",text:"At the beginning of your experience with dlivrd, you are most likely to see deliveries with average earnings of about $25. As you take more deliveries and acquire more equipment such as, large, insulated catering delivery bags and/or a delivery cart you will start to see larger orders with more earnings attached. Across our operating areas, drivers average about $42 per catering delivery. The amount earned per delivery is largely influence by the number of deliveries you complete and your number of large, insulated catering delivery bags."},{title:"Something is wrong with my payment, what do I do?",text:"Orders are paid the following business day after the date of delivery and usually arrive in your bank account after 2pm, local time. An order delivered on Monday is paid Tuesday, an order on Thursday is paid Friday. Friday and weekend orders are paid Monday. If you believe a payment is missing, please follow the link here, fill out the form and click submit. Dates and the Order ID’s can be found in your dlivrd app. Also, please make sure to check with your bank and ensure your Everee account is up to date before submitting this form. One of our employees will research and email you within 1 business day with findings. Please keep in mind, weekends and holidays are not business days."}],deliveryProcessFAQ:[{title:"Do I have to use the in-app GPS function",text:"You can use whatever GPS you would like to get to your destinations. You can change your in-app GPS provider by going to settings in the menu of the dlivrd app. Our only ask is that you continue sharing your location with us throughout the delivery process so that our platform can help facilitate updates to the clients and customers for you. As long you don’t close the app completely while on delivery, this your location will continue to share. Additionally, if you are using the GPS outside of the dlivrd app it will be important that you enter address information accurately or else you could be taken out of your way."},{title:"How does the actual delivery process work?",text:`Refer to delivery task in your app for the customer’s directions of who to contact or direction of where to meet the customer.
If you are unsure of where to go, simply press the phone symbol and the call will direct you to the customer.
If you find that you are having an issue reaching the customer, text delivery support at 1-844-515-2932.
Set up the order according to the customer’s direction
Upload a picture of the food setup in the required field – please make sure to include as much of the food as possible in the photo for context.
You will not be able to complete the delivery task without adding at least one image. Learn more about proof of delivery pictures here.
It is best to do this via the camera on your phone and then uploading to the dlivrd app.
Be sure to swipe that the delivery was successful in the app before you leave the location to complete tracking and properly process your payment.`},{title:"I’ve answered the confirmation text, now how will the restaurant know that I’m on my way?",text:"30 minutes prior to the pickup time of your delivery it is best to open the app and swipe start on the pickup task. Be sure your calendar is set for the right day when you open the app. If we see that this does not happen, someone from the dlivrd team will reach out to remind you. Even if your pick-up location is only five minutes from your current location and you won’t be leaving for some time, it is important to swipe start on the pickup task ahead of time so that restaurant partners have peace of mind that their food is going to be in good hands."},{title:"What do I do once I’m at the pick-up location?",text:`The app will automatically mark that you have arrived at the pickup location via the GPS. If the door is locked, always try knocking. Text us at 1-844-515-2932 if you are not having any luck. Once inside, make sure to announce yourself, the client you are picking up for and the order ID, found in the pickup task in your app: “Hi, I’m (Christine). I’m here for client XYZ order ZQ1-37P.” The restaurant will begin handing over food items for your delivery. Before leaving, check with the restaurant by asking “do I have everything?” Assuming they respond with yes, you should let them know that you are heading for the delivery location.

It is not your responsibility to check an itemized packing list. Once you’ve loaded up, swipe to complete the pickup task. After you swipe to complete the pickup task, your app will go directly to the delivery task. Swipe to start on the delivery task then press the navigation icon to use the in-app GPS or you can use your own and make your way to the delivery location.`},{title:"What happens first on the day of my accepted delivery offer?",text:"You will receive a confirmation text from 58973 about one hour prior to your first scheduled pick-up time of the day. If you do not respond with just the word “yes” within the time communicated in the text, we will try to reach you from 1-844-515-2932. If you do not respond at that point, we will assume that you are no longer available to complete the delivery. We will then remove the delivery offer from you and begin offering to other earning partners."},{title:"What if I am left waiting at the pick-up location because the food is not ready?",text:"We’ve already stressed the importance of being right on-time. You probably realize that this will, at times, mean you will have to wait for the restaurant to be ready. We understand that this can be frustrating. For that reason, you will be compensated for waiting. If you are on-time for the pickup, have used the app as instructed and the food is not ready within 15 minutes of the scheduled pickup time. We will start billing the restaurant on your behalf. You will be compensated at a rate of $0.25 per minute for every minute you wait after the first 15 minutes have passed. This rate equates to $15 per hour. To make sure this goes according to plan it is best to let us know that you are waiting for the restaurant by texting 1-844-515-2932."},{title:"What if I’m running late to pick-up or deliver the food?",text:"If you are running late, it is best to let us know as quickly and safely as possible by contacting us at 1-844-515-2932. We will facilitate that communication so that the client can inform the customer. If we are not informed and can’t facilitate that communication, it can negatively impact your earnings via chargebacks from the client. There may also be situations in which the food is on track to be so late that the client insists that we redirect the earning opportunity to another partner to avoid refunds."},{title:"Why do I need to take pictures of completed deliveries?",text:"Taking good pictures of your successfully completed delivery is a staple for any delivery business. If there is ever a dispute about a customer’s delivery instructions being followed, these pictures are used as proof to protect your earnings for completing the delivery. When disputes happen, we want to be able to stand for the success of your business. Oftentimes, you are going to be delivering to locations where cell phone service can be an issue. For that reason, it is best practice to take your delivery pictures on your phone’s camera versus in the app. You can then upload the picture into the app versus taking it directly in the app."}],deliveryOfferProcessFAQ:[{title:"Do I have to accept a certain number of deliveries to remain active on the platform?",text:"You are never required to accept a delivery offered to you on our platform to remain active. Our only ask is that you respond to the deliveries offered to you by accepting or declining within the time given to you to do so. You will know how much time you have by looking at the notification text that you receive (pictured below). When you do not respond at all to 3 delivery offers in the same day, we will assume that you are unavailable and will not send any more offers to you for that day."},{title:"How often can I expect to make deliveries?",text:"This can also vary depending on the number of deliveries you have completed and how many large, insulated catering delivery bags you own. You can always purchase delivery bags on your own and send us pictures at 1-844-515-2932 or by going to www.dlivrd.io/shop. After first signing up, you can expect to be offered a delivery once every few days in most markets. As you complete more deliveries through the dlivrd platform, more earning opportunities will be offered to you. Please note that newer markets will usually be slower when we first kickoff operations there."},{title:"How will I know that I am offered a delivery?",text:"When you are offered a delivery, you will receive a text to the phone number with which you used to sign up on the dlivrd platform. Delivery offers will be sent to you whether you are marked as “on-duty” in the app or not. This text will come from 58973. To view the full offer details and accept or decline you will need to open the app and review the tasks."},{title:"I’m off duty, why am I still receiving delivery offers?",text:"On-duty simply means that you are sharing your location with us via GPS. If you are off-duty you can still be sent delivery offers. It is best to use on-duty as a means of letting us know where you like to complete deliveries. If you are going to be unavailable for more than a day or two simply let us know by texting 1-844-515-2932 and we will make sure you aren’t bothered with delivery offers for as long as you tell us that you will be unavailable."},{title:"What do I do when I receive a delivery offer?",text:"It is best to open the dlivrd app after receiving a delivery offer to evaluate the full details of the opportunity. Once in the app you should use the calendar to ensure you are looking at the appropriate day. Once you are on the correct day to evaluate the offer, tap on the pickup task. The pickup task includes the name of the pickup location, their address, and the pickup time. The delivery task includes the customer’s name, their address, delivery and/or setup instructions, food subtotal, and payment breakdown. After reviewing the details tap and hold the multi-colored circle at the bottom of the screen. Swipe right to accept the delivery offer and left to decline it. As a reminder, there is no negative impact to you for declining delivery offers."},{title:"What if I need to cancel a delivery offer that I’ve accepted?",text:"Failing to successfully complete an accepted delivery offer will impact your standing negatively based when you tell us that you need to cancel. If you can let us know the day prior to your delivery by 9pm Eastern Standard Time, that is much preferred. The closer to the pickup time we are made aware that you will not complete the delivery, the more negatively your standing will be impacted. “No-showing” without any notice or not completing your first accepted delivery offer will impact your ability to receive future delivery offers immediately. These cancellations can lead to refunds for customers that can ultimately impact your future earnings negatively. You can inform us of your cancellation by calling or texting 1-844-515-2932."},{title:"What is an earning opportunity?",text:"dlivrd works with catering companies and restaurants in more than 100 markets across the US and Canada to accumulate delivery opportunities to be coordinated through our app. We call these high-quality earning opportunities. We then partner with a fleet of customer-service driven and independently contracted delivery drivers, like you, to connect to and complete these high-quality earning opportunities successfully. Because dlivrd and the delivery driver work in collaboration to make this experience an extraordinary one for everyone involved, we call you an Earning Partner. Earning Partners use dlivrd as a guide and our platform as a communication tool throughout the process. Earning Partners pick up the food in their personal vehicle from a restaurant or catering partner and deliver it, professionally, to the customer. The customer pays the restaurant. The restaurant sends the delivery costs, usually made up of a base fee and tip, to dlivrd. Your agreed-to earnings flow right from us to you!"}],drawer:!1,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,agreeButtonText:null,cancelButtonText:null,username:"",loading:!0,loadView:!1,name:"",validationFailed:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.getFAQs(),this.sessionValidator()},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.clearFields(),this.$router.push("/")})},sessionValidator(){console.log(localStorage);var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},getFAQs(){console.log("FAQ"),console.log("this.username"),console.log(this.username),console.log("session_id"),console.log(localStorage.getItem("session_id"));var t=this.baseurl+"get_faqs";const e={identity:this.username,language:"english"};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(console.log("FAQs response"),console.log(i),i.status==200){var n=i.data.faqs;console.log("FAQs"),console.log(n),i.data.Success&&(this.accountFAQ=n.accountfaq,this.deliveryProcessFAQ=n.deliveryProcessFAQ,this.paymentFAQ=n.paymentFAQ,this.deliveryOfferProcessFAQ=n.deliveryOfferProcessFAQ)}}).catch(()=>{})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},closeDrawer(){this.drawer=!1}}},tre=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1);function ire(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-expansion-panel"),ge=ue("v-expansion-panels"),we=ue("v-col"),Ie=ue("v-main"),Oe=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[tre,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ke=>r.dialog=ke),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=ke=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=ke=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Oe,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,null,{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(ke=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("FAQ's")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:ke})=>[w(S,Mi({icon:""},ke),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Ie,{class:"mainViewStyle"},{default:D(()=>[w(we,{md:"12",sm:"12"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Account")]),_:1}),w(ge,{variant:"popout",color:"#eeeeee95",class:"expansionPanelStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.accountFAQ,ke=>(be(),He(fe,{key:ke,title:ke.title,text:ke.text},null,8,["title","text"]))),128))]),_:1})]),_:1}),w(we,{md:"12",sm:"12"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Payment")]),_:1}),w(ge,{variant:"popout",color:"#eeeeee95",class:"expansionPanelStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.paymentFAQ,ke=>(be(),He(fe,{key:ke,title:ke.title,text:ke.text},null,8,["title","text"]))),128))]),_:1})]),_:1}),w(we,{md:"12",sm:"12"},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Delivery Process")]),_:1}),w(ge,{variant:"popout",color:"#eeeeee95",class:"expansionPanelStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.deliveryProcessFAQ,ke=>(be(),He(fe,{key:ke,title:ke.title,text:ke.text},null,8,["title","text"]))),128))]),_:1})]),_:1}),w(we,{md:"12",sm:"12",style:{"padding-bottom":"50px"}},{default:D(()=>[w(p,{class:"fontSize"},{default:D(()=>[ye("Delivery Offer Process")]),_:1}),w(ge,{variant:"popout",color:"#eeeeee95",class:"expansionPanelStyle"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.deliveryOfferProcessFAQ,ke=>(be(),He(fe,{key:ke,title:ke.title,text:ke.text},null,8,["title","text"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const nre=Kn(ere,[["render",ire]]);const rre={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{previewImagefrontfile:null,previewImageBackfile:null,file:null,fileBack:null,lazy_load:"",lazy_load_back:"",previewImage:null,previewBackImage:null,loadingFrontImage:!0,loadingBackImage:!0,licImgError:!1,licImgMessage:null,license:!1,licenseFrontImage:null,licenseBackImage:null,licenseImage:null,drawer:!1,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,agreeButtonText:null,cancelButtonText:null,username:"",loggedInUserEmail:"",loading:!0,detailsWarning:null,warning:!1,vehicleRegistrationImage:null,insuranceCardImage:null,lazy_load_registration:"",lazy_load_insurance:"",loadView:!1,vehicleRegistrationImageFile:null,insuranceCardImageFile:null,loadingRegistration:!0,loadingInsurance:!0,fileRegistration:null,fileInsurance:null,uploadingDetails:!1,checkButton:!0,name:"",validationFailed:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator(),this.getDriverPersonalDetails()},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.loggedInUserEmail};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.clearFields(),this.$router.push("/")})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},selectRegistrationImage(t,e){e==!1&&t==null?this.$refs.vehicleRegistrationfileInput.click():e==!0&&(this.vehicleRegistrationImage=null,this.vehicleRegistrationImageFile=null,this.lazy_load_registration=so,this.fileRegistration=null,this.insuranceCardImageFile==null&&(this.checkButton=!0))},pickRegistrationFile(t){this.vehicleRegistrationImageFile=t.target.files[0],this.lazy_load_registration="",this.checkButton=!1,this.warning=!1;let i=this.$refs.vehicleRegistrationfileInput.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.vehicleRegistrationImage=r.target.result},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},selectInsuranceCardImage(t,e){e==!1&&t==null?this.$refs.insuranceCardFileInput.click():e==!0&&(this.insuranceCardImage=null,this.insuranceCardImageFile=null,this.lazy_load_insurance=so,this.fileInsurance=null,this.vehicleRegistrationImageFile==null&&(this.checkButton=!0))},pickInsuranceCardFile(t){this.insuranceCardImageFile=t.target.files[0],this.lazy_load_insurance="",this.checkButton=!1,this.warning=!1;let i=this.$refs.insuranceCardFileInput.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.insuranceCardImage=r.target.result},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},uploadDetailsData(){this.uploadingDetails=!0;var e=this.baseurl+"update_rider_details_insurance_selfie_reg",t=new FormData;t.append("identity",this.username),typeof this.vehicleRegistrationImageFile!="string"&&this.vehicleRegistrationImageFile!=null&&t.append("vehicle_registration",this.vehicleRegistrationImageFile),Ai.post(e,t,{headers:{"Content-Type":"multipart/form-data",session:localStorage.getItem("session_id")}}).then(i=>{this.uploadingDetails=!1,i.data.Success||(this.dialog=!0,this.alert_title="Update Failed",i.data.vehicle_registration?this.alert_description="Vehicle registration "+i.data.vehicle_registration:i.data.Failure=="Session Expired. Please login again."?(this.clearFields(),this.$router.push("/")):this.alert_description=i.data.Failure,this.agreeButtonText="Okay")});var t=new FormData;t.append("identity",this.username),typeof this.previewImagefrontfile!="string"&&this.previewImagefrontfile!=null&&t.append("license_front",this.previewImagefrontfile),typeof this.previewImageBackfile!="string"&&this.previewImageBackfile!=null&&t.append("license_back",this.previewImageBackfile);var e=this.baseurl+"update_rider_personal_info";this.uploadingData=!0,Ai.post(e,t,{headers:{"Content-Type":"multipart/form-data",session:localStorage.getItem("session_id")}}).then(i=>{console.log(i),this.uploadingData=!1,i.data.Success?(this.dialog=!0,this.alert_title="Success",this.alert_description="Images successfully updated.",this.agreeButtonText="Okay"):(this.dialog=!0,this.alert_title="Update Failed",i.data.license_front?this.alert_description=i.data.license_front:i.data.license_back?this.alert_description=i.data.license_back:i.data.Failure=="Session Expired. Please login again."?this.$router.push("/"):this.alert_description="Details not saved. Please Try Again",this.agreeButtonText="Okay")}).catch(i=>{this.dialog=!0,this.alert_title="Warning",this.alert_description="Your session has expired. Please Login Again",this.agreeButtonText="logout"})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.getDetailsImages()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},getDetailsImages(){var t=this.baseurl+"get_rider_details_insurance_selfie_reg",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{i.data.Success&&(i.data.urls.vehicle_registration_image_url=="image not found"?(this.vehicleRegistrationImageFile=null,this.vehicleRegistrationImage=so):(this.vehicleRegistrationImageFile=this.baseImageurl+i.data.urls.vehicle_registration_image_url,this.vehicleRegistrationImage=this.vehicleRegistrationImageFile,this.checkButton=!1),i.data.urls.insurance_image_url=="image not found"?(this.insuranceCardImageFile=null,this.insuranceCardImage=so):(this.insuranceCardImageFile=this.baseImageurl+i.data.urls.insurance_image_url,this.insuranceCardImage=this.insuranceCardImageFile,this.checkButton=!1),this.loadingRegistration=!1,this.loadingInsurance=!1,this.lazy_load_registration="",this.lazy_load_insurance="")}).catch(()=>{this.clearFields(),this.$router.push("/")})},closeDrawer(){this.drawer=!1},selectLicenseFrontImage(t,e){e==!1&&t==null?this.$refs.fileInput.click():e==!0&&(this.previewImage=null,this.previewImagefrontfile=null,this.lazy_load=so,this.file=null,this.previewBackImage==null?this.progressValue=0:this.progressValue=50)},selectLicenseBackImage(t,e){e==!1&&t==null?this.$refs.fileInputBack.click():e==!0&&(this.previewBackImage=null,this.previewImageBackfile=null,this.lazy_load_back=so,this.fileBack=null,this.previewImage==null?this.progressValue=0:this.progressValue=50)},pickLicenceFrontFile(t){this.previewImagefrontfile=t.target.files[0],this.lazy_load="",this.licImgError=!1;let i=this.$refs.fileInput.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.previewImage=r.target.result,this.previewBackImage==null?this.progressValue=50:this.progressValue=100},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},pickLicenceBackFile(t){this.previewImageBackfile=t.target.files[0],this.lazy_load_back="",this.licImgError=!1;let i=this.$refs.fileInputBack.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.previewBackImage=r.target.result,this.previewImage==null?this.progressValue=50:this.progressValue=100},n.readAsDataURL(i[0]),this.$emit("input",i[0])}},licenseImagesUploaded(){this.previewImagefrontfile||this.previewImageBackfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check"):(this.btnColor="#eeeeee",this.licImgIcon="mdi-upload"),this.licImgError=!1,this.licImgMessage=null,this.licImg=!1,this.showddDetailsWarning=!1},getDriverPersonalDetails(){var t=this.baseurl+"get_rider_personal_info",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{console.log(i),i.data.Success&&(i.data.rider_info.license_front_url=="image not found"?(this.previewImagefrontfile=null,this.previewImage=so):(this.previewImagefrontfile=this.baseImageurl+i.data.rider_info.license_front_url,this.previewImage=this.previewImagefrontfile),i.data.rider_info.license_back_url=="image not found"?(this.previewImageBackfile=null,this.previewBackImage=so):(this.previewImageBackfile=this.baseImageurl+i.data.rider_info.license_back_url,this.previewBackImage=this.previewImageBackfile),this.lazy_load="",this.lazy_load_back="",this.lazy_load_profile="",this.previewProfileFile?(this.loadingProfileImage=!1,this.lazy_load_profile=""):(this.loadingProfileImage=!1,this.profileImage="../src/assets/User.jpg"),this.previewImagefrontfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check",this.loadingFrontImage=!1,this.progressValue+=50,this.lazy_load=""):(this.loadingFrontImage=!1,this.previewImage=so),this.previewImageBackfile?(this.btnColor="#0afd01",this.licImgIcon="mdi-check",this.loadingBackImage=!1,this.progressValue+=50,this.lazy_load_back=""):(this.loadingBackImage=!1,this.previewBackImage=so))}).catch(()=>{this.clearFields(),this.$router.push("/")})}}},sre=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1),ore={ref:"fileInput",class:"imagePreviewBlock"},are={ref:"fileInputBack",class:"imagePreviewBlock"},lre={ref:"vehicleRegistrationfileInput",class:"imagePreviewBlock"};function ure(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-progress-circular"),ge=ue("v-badge"),we=ue("v-file-input"),Ie=ue("v-col"),Oe=ue("v-main"),ke=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[sre,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=Ee=>r.dialog=Ee),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=Ee=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=Ee=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(ke,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(Ee=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Documents")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:Ee})=>[w(S,Mi({icon:""},Ee),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Oe,null,{default:D(()=>[w(R,{class:"mainBlockStyle"},{default:D(()=>[w(Ie,{md:"12",sm:"12",class:"centerAlignContent"},{default:D(()=>[w(R,{style:{"justify-content":"center"}},{default:D(()=>[w(Ie,{cols:"12",md:"4",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"centerText"},{default:D(()=>[ye("License Front Image")]),_:1}),Pe("div",ore,[w(U,{src:r.previewImage,"lazy-src":r.previewImage,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[4]||(e[4]=Ee=>a.selectLicenseFrontImage(r.previewImagefrontfile,!1))},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.previewImagefrontfile?We("",!0):(be(),He(U,{key:0,src:r.lazy_load},null,8,["src"])),r.loadingFrontImage?(be(),He(fe,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.previewImagefrontfile!=null?(be(),He(ge,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[5]||(e[5]=Ee=>a.selectLicenseFrontImage(r.previewImagefrontfile,!0))})):We("",!0)],512),w(we,{ref:"fileInput",type:"file",accept:"image/*",modelValue:r.file,"onUpdate:modelValue":e[6]||(e[6]=Ee=>r.file=Ee),onEmptied:e[7]||(e[7]=Ee=>r.file=null),onInput:a.pickLicenceFrontFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1}),w(Ie,{cols:"12",md:"4",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"centerText"},{default:D(()=>[ye("License Back Image")]),_:1}),Pe("div",are,[w(U,{src:r.previewBackImage,"lazy-src":r.previewBackImage,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[8]||(e[8]=Ee=>a.selectLicenseBackImage(r.previewImageBackfile,!1))},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.previewImageBackfile?We("",!0):(be(),He(U,{key:0,src:r.lazy_load_back},null,8,["src"])),r.loadingBackImage?(be(),He(fe,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.previewImageBackfile!=null?(be(),He(ge,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[9]||(e[9]=Ee=>a.selectLicenseBackImage(r.previewImageBackfile,!0))})):We("",!0)],512),w(we,{ref:"fileInputBack",type:"file",accept:"image/*",modelValue:r.fileBack,"onUpdate:modelValue":e[10]||(e[10]=Ee=>r.fileBack=Ee),onEmptied:e[11]||(e[11]=Ee=>r.fileBack=null),onInput:a.pickLicenceBackFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1}),w(Ie,{cols:"12",md:"4",sm:"12",class:"alignFileInput"},{default:D(()=>[w(p,{class:"centerText"},{default:D(()=>[ye("Vehicle Registration")]),_:1}),Pe("div",lre,[w(U,{src:r.vehicleRegistrationImage,"lazy-src":r.vehicleRegistrationImage,class:"bg-grey-lighten-2 imagePreviewWrapper",onClick:e[12]||(e[12]=Ee=>a.selectRegistrationImage(r.vehicleRegistrationImageFile,!1))},{placeholder:D(()=>[w(R,{class:"fill-height ma-0 loaderPlacement"},{default:D(()=>[r.vehicleRegistrationImageFile?We("",!0):(be(),He(U,{key:0,src:r.lazy_load_registration},null,8,["src"])),r.loadingRegistration?(be(),He(fe,{key:1,indeterminate:"",color:"#000000",style:{position:"absolute"}})):We("",!0)]),_:1})]),_:1},8,["src","lazy-src"]),r.vehicleRegistrationImageFile!=null?(be(),He(ge,{key:0,icon:"mdi-close",class:"badgeStyle",onClick:e[13]||(e[13]=Ee=>a.selectRegistrationImage(r.vehicleRegistrationImageFile,!0))})):We("",!0)],512),w(we,{ref:"vehicleRegistrationfileInput",type:"file",accept:"image/*",modelValue:r.fileRegistration,"onUpdate:modelValue":e[14]||(e[14]=Ee=>r.fileRegistration=Ee),onEmptied:e[15]||(e[15]=Ee=>r.fileRegistration=null),onInput:a.pickRegistrationFile,style:{display:"none"}},null,8,["modelValue","onInput"])]),_:1})]),_:1}),r.warning?(be(),He(_,{key:0,class:"warningMessage",innerHTML:r.detailsWarning},null,8,["innerHTML"])):We("",!0),r.uploadingDetails?(be(),He(c,{key:1,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})):(be(),He(S,{key:2,"prepend-icon":"mdi-update",class:"dialogBoxGreenColor uploadBtn",variant:"text",disabled:r.checkButton,onClick:a.uploadDetailsData},{default:D(()=>[ye(" Update ")]),_:1},8,["disabled","onClick"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const cre=Kn(rre,[["render",ure]]);const dre={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,agreeButtonText:null,cancelButtonText:null,drawer:!1,username:"",loading:!0,lastDelivery:"---",onTime:0,partnerVersary:"---",responseRate:0,totalEarnings:0,totalOrders:0,loadView:!1,name:"",distanceCovered:0,validationFailed:!1,newLogin:!1,referral:"",password:null,confirmPassword:null,value:String,valuePassword:String,successResponseTitle:"",successResponse:"",tx_number:null,displayContent:!1,count:0,accountWarningText:!1,btnDisable:!1,askCriminalBackgroundCheck:!1,backgroundCheck:!0,criminal_selection:"",criminal_description:!1,criminal_description_detail:"",criminal_description_detail_char_count:0,criminal_description_detail_help:"Please explain below With Minimum 50 character",criminalCheckSolved:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},watch:{criminal_description_detail(){this.criminal_description_detail_char_count=this.criminal_description_detail.split("").length;var t=50-this.criminal_description_detail.split("").length;t<=0?(this.criminal_description_detail_help="Good To Go",t=0):this.criminal_description_detail_help="Please explain here with minimum "+t+" character"}},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.clearFields(),this.$router.push("/")})},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},getDriverStats(){var t=this.baseurl+"get_rider_stats",e={identity:localStorage.getItem("username")};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{i.data.Success&&(i.data.stats.last_delivery!=""&&i.data.stats.last_delivery!=null&&(this.lastDelivery=i.data.stats.last_delivery),i.data.stats.on_time_percentage!=""&&i.data.stats.on_time_percentage!=null&&(this.onTime=i.data.stats.on_time_percentage),i.data.stats.partner_versary!=""&&i.data.stats.partner_versary!=null&&(this.partnerVersary=i.data.stats.partner_versary),i.data.stats.response_rate!=""&&i.data.stats.response_rate!=null&&(this.responseRate=i.data.stats.response_rate),i.data.stats.total_earnings!=""&&i.data.stats.total_earnings!=null&&(this.totalEarnings=i.data.stats.total_earnings),i.data.stats.total_earnings!=""&&i.data.stats.total_earnings!=null&&(this.totalOrders=i.data.stats.total_orders),i.data.stats.total_distance_travelled!=""&&i.data.stats.total_distance_travelled!=null&&(this.distanceCovered=i.data.stats.total_distance_travelled))}).catch(()=>{this.clearFields(),this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){console.log("Session Response"),console.log(i);var n=i.data;if(n.Success){if(this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.getDriverStats(),n.background_check==!1){console.log("Background Check"),this.criminalCheckPopup(),this.askCriminalBackgroundCheck=!0;return}else if(localStorage.getItem("require_password")=="true"){console.log("Require Password"),console.log(localStorage.getItem("require_password")),this.checkNewLogin();return}else if(localStorage.getItem("first_login")=="true"){console.log("First Time Login"),console.log(localStorage.getItem("first_login")),this.firstTimeLogin();return}n.info_completed==!1?(console.log("Info Verified is false"),this.accountWarningText=!0):(console.log("Info Verified is true"),this.accountWarningText=!1),n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?(console.log("Validation is false"),this.validationFailed=!1):(console.log("Validation is true"),this.validationFailed=!0),this.displayContent=!0}else this.clearFields(),this.$router.push("/")}}).catch(()=>{this.clearFields(),this.$router.push("/")})},checkNewLogin(){console.log("Check new Login");var t=localStorage.getItem("require_password");t=="true"&&(this.newLogin=!0,this.dialog=!0,this.alert_title="Create your new password",this.agreeButtonText="Save",this.cancelButtonText="")},updatePassword(){if(this.password==null||this.password=="")this.showError=!0,this.errorMessage="Password cannot be empty.";else if(this.password.length<8)this.showError=!0,this.errorMessage="Password should be at least 8 characters long.";else if(this.confirmPassword==null||this.confirmPassword=="")this.showError=!0,this.errorMessage="Confirm Password cannot be empty.";else if(this.password!=this.confirmPassword)this.showError=!0,this.errorMessage="Password and Confirm Password do not match.";else{var t=this.baseurl+"update_rider";const e={identity:this.username,password:this.password};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id"),sessiontype:"user"}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(localStorage.setItem("require_password",!1),this.dialog=!1,this.newLogin=!1,this.showError=!1,this.errorMessage=!1,console.log("First Time login"),console.log(localStorage.getItem("first_login")),this.sessionValidator()):(this.dialog=!0,this.alert_title="Warning",this.alert_description="Password not updated successfully. Your session may have expired.<br/>Please login again",this.agreeButtonText="logout")}}).catch(()=>{this.clearFields(),this.$router.push("/")})}},firstTimeLogin(){console.log("First time Login Function");var t=localStorage.getItem("first_login");t=="true"&&(this.dialog=!0,this.count==0?(this.alert_title="Hi "+localStorage.getItem("name")+"!",this.alert_description="My name is Chris Heffernan and I am the CEO and Founder of dlivrd. Thank you again for your interest in the high-quality earning opportunities available on the dlivrd platform. It is our mission here to “dlivr” success through committed people, extraordinary experiences, and dynamic systems. Transparency is a pillar of everything we do so you will always have a good idea of what each earning opportunity includes, how much driving is involved and most importantly what you can expect to earn before you decide whether it is worth your valuable time. In the spirit of that, I wanted to give you a little more information about the benefits of using the dlivrd platform and what next steps will look like on your dlivd Driver Portal onboarding journey.<br/><br/>The dlivrd platform is best used to easily earn money as a side job or supplement the income you are generating with other gig work such as driving for Uber, Lyft, Door Dash, Instacart, etc. Most earning opportunities will include completing catering deliveries that take about 30 minutes of time between the hours of 10am and 2pm. New drivers average $25-$35 earned per delivery and earnings will generally increase as you move beyond 10 deliveries completed through the platform and acquire more equipment such as large, insulated catering delivery bags.",this.agreeButtonText="Next",this.cancelButtonText="",this.alert_error=null):this.count==1?(this.alert_title="Welcome to dlivrd!",this.alert_description="The benefits you can expect:<br/>- Earnings per opportunity of at least $20<br/>- You’ll know what to expect for pay, distance and timing before accepting opportunities<br/>- Humans on standby to help you communicate with clients and customers about issues<br/>- Next business day pay<br/>- Referral bonus opportunities<br/><br/>What you will need:<br/>- Your own motor vehicle (no scooters, motorcycles or bicycles) that can be used to make deliveries<br/>- To be age 21 or older<br/>- A valid driver’s license for your area<br/>- The ability to lift and transport large quantities of food<br/><br/>What you will do:<br/>- Transport food safely from pick-up location to delivery destination<br/>- Follow the customer’s requests for setting up food<br/>- Provide professional customer service",this.agreeButtonText="Next",this.cancelButtonText="Previous",this.alert_error=null):this.count==2?(this.alert_title="Driver Portal Onboarding Process",this.alert_description="The steps for the dlivrd Driver Portal registration process are as follows:<br/>1. 	Watch a series of 4 educational videos about how best to work with the platform<br/>2. 	Answer questions about what you learn after each<br/>3. 	Complete a final set of questions about the dlivrd experience<br/>4. 	You will have the option to speak with one of our agents to discuss any questions<br/><br/>The whole process can be completed in under 45 minutes and you will be able to progress at your own pace. Stop and start, and save your progress whenever you like. If you do not login for 10 days, we will assume that you are no longer interested at this time but you will have the opportunity to pick back up any time if you so choose.<br/><br/>Please do not download the dlivrd app ahead of completing these steps. You will not be able to begin delivering with us until the sign-up process outlined above is completed.<br/><br/>Thank you again for your interest. We look forward to making earning easy with you!<br/><br/>-Chris",this.agreeButtonText="Next",this.cancelButtonText="Previous",this.alert_error=null):this.count==3&&(this.alert_title="Get Started",this.alert_description="Last thing before you get started learning more about the dlivrd experience: If you were referred to the dlivrd platform by someone, please submit their first and last name below so we can hook them up.",this.agreeButtonText="Get Started",this.cancelButtonText="Previous",this.alert_error=null))},nextDialog(){this.count++,this.firstTimeLogin(),this.DialogScrollToTop(),this.scrollToTopWindow()},previousDialog(){this.count>0&&this.count--,this.firstTimeLogin(),this.DialogScrollToTop(),this.scrollToTopWindow()},gettingStarted(){this.referral==""&&(this.referral="-");var t=this.baseurl+"update_rider";const e={identity:this.username,referer:this.referral,initial_stage:"false"};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id"),sessiontype:"user"}}).then(i=>{if(i.status==200){var n=i.data;n.Success&&(localStorage.setItem("first_login",!1),this.dialog=!1,this.count=-1,this.displayContent=!0)}}).catch(()=>{this.alert_title="Warning",this.alert_description="Session Expired. Please log in again",this.dialog=!0,this.agreeButtonText="logout"})},DialogScrollToTop(){var t=document.getElementById("dialogDescription");t.scrollTo(0,0)},scrollToTopWindow(){window.scrollTo({top:0,behavior:"smooth"})},closeDrawer(){this.drawer=!1},routeToChecklist(){this.$router.push("/submit")},criminalCheckPopup(){this.criminal_description=!1,this.criminal_description_detail="",this.alert_title="Screening Question",this.alert_description="Have you ever been convicted of a crime that would legally prohibit you from entering government buildings, schools, churches, offices or any other establishment?",this.agreeButtonText="Criminal",this.cancelButtonText="Criminal",this.alert_error=null,this.dialog=!0},criminalCheck(t){this.criminal_selection=t,this.criminal_selection=="y"?this.criminal_description=!0:this.criminal_selection=="n"&&(this.criminal_description=!1,this.criminalCheckSolved=!0)},criminalCheckPopupYES(){this.criminal_description_detail="",this.criminal_description=!0},criminalCheckPopupNO(){this.criminalCheckUpdate(!1)},criminalCheckUpdate(){var t=!0;if(this.criminal_selection=="y")t=!0;else if(this.criminal_selection=="n")this.criminal_description_detail="",t=!1;else return;if(this.criminal_description_detail_char_count<50&&t==!0)return;var e=this.baseurl+"submit_background_check";const i={identity:this.username,affirmation:t,affirmation_text:this.criminal_description_detail};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(n=>{if(this.loading=!0,n.status==200){var r=n.data;this.customUsername=r.custom_username_enabled,r.Success&&(this.criminalCheckSolved=!0,console.log(r),r.account_under_review==!0?this.account_under_review():(this.criminal_description=!1,this.criminal_description_detail="",this.dialog=!1,this.askCriminalBackgroundCheck=!1,this.alert_title="",this.alert_description="",this.criminal_description=!1,this.criminal_description_detail="",this.agreeButtonText="",this.cancelButtonText="",this.sessionValidator()))}}).catch(()=>{this.$router.push("/")})}}},hre=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1);function fre(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-text-field"),S=ue("v-spacer"),E=ue("v-btn"),I=ue("v-card-actions"),R=ue("v-textarea"),V=ue("v-dialog"),q=ue("v-row"),U=ue("v-app-bar-nav-icon"),H=ue("v-toolbar-title"),Z=ue("v-img"),ne=ue("v-avatar"),ie=ue("v-layout"),oe=ue("v-list-item"),pe=ue("v-list"),de=ue("v-menu"),fe=ue("v-app-bar"),ge=ue("NavigationDrawer"),we=ue("v-icon"),Ie=ue("v-col"),Oe=ue("v-main"),ke=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","align-content":"center","justify-content":"center","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[hre,w(q,{justify:"center"},{default:D(()=>[w(V,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[11]||(e[11]=Ee=>r.dialog=Ee),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.newLogin?(be(),He(b,{key:1,style:{"margin-left":"20px","margin-right":"20px"},modelValue:r.password,"onUpdate:modelValue":e[0]||(e[0]=Ee=>r.password=Ee),label:"Enter New Password","hide-details":"",valuePassword:r.password,"append-icon":r.valuePassword?"mdi-eye-off":"mdi-eye","onClick:append":e[1]||(e[1]=()=>r.valuePassword=!r.valuePassword),type:r.valuePassword?"password":"text",onKeyup:Vl(a.updatePassword,["enter"])},null,8,["modelValue","valuePassword","append-icon","type","onKeyup"])):We("",!0),r.newLogin?(be(),He(b,{key:2,style:{"margin-left":"20px","margin-right":"20px"},modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=Ee=>r.confirmPassword=Ee),label:"Confirm Password","hide-details":"",value:r.confirmPassword,"append-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:append":e[3]||(e[3]=()=>r.value=!r.value),type:r.value?"password":"text",onKeyup:Vl(a.updatePassword,["enter"])},null,8,["modelValue","value","append-icon","type","onKeyup"])):We("",!0),r.count==3?(be(),He(b,{key:3,style:{"margin-left":"20px","margin-right":"20px"},modelValue:r.referral,"onUpdate:modelValue":e[4]||(e[4]=Ee=>r.referral=Ee),label:"Reffered by:"},null,8,["modelValue"])):We("",!0),r.showError?(be(),He(_,{key:4,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),r.askCriminalBackgroundCheck?We("",!0):(be(),He(I,{key:5,class:"dialogBoxActionButtons"},{default:D(()=>[w(S),r.cancelButtonText=="Previous"&&r.agreeButtonText!="logout"?(be(),He(E,{key:0,"prepend-icon":"mdi-arrow-left",style:{"background-color":"#7efb01"},variant:"text",onClick:a.previousDialog},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Next"?(be(),He(E,{key:1,"prepend-icon":"mdi-arrow-right",style:{"background-color":"#7efb01"},variant:"text",onClick:a.nextDialog},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Get Started"?(be(),He(E,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.gettingStarted},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Save"?(be(),He(E,{key:3,"prepend-icon":"mdi-upload",style:{"background-color":"#7efb01"},variant:"text",onClick:a.updatePassword},{default:D(()=>[ye(Zt(r.agreeButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.cancelButtonText=="Cancel"?(be(),He(E,{key:4,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[5]||(e[5]=Ee=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(E,{key:5,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(E,{key:6,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[6]||(e[6]=Ee=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})),r.askCriminalBackgroundCheck?(be(),He(I,{key:6,style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[r.cancelButtonText=="Criminal"?(be(),He(E,{key:0,class:Zs({selected_criminal_selection:r.criminal_selection==="n"}),style:{"background-color":"#7efb0166"},variant:"text",disabled:r.btnDisable,onClick:e[7]||(e[7]=Ee=>a.criminalCheck("n"))},{default:D(()=>[ye(" No ")]),_:1},8,["class","disabled"])):We("",!0),r.agreeButtonText=="Criminal"?(be(),He(E,{key:1,class:Zs({selected_criminal_selection:r.criminal_selection==="y"}),style:{"background-color":"#7efb0166"},variant:"text",disabled:r.btnDisable,onClick:e[8]||(e[8]=Ee=>a.criminalCheck("y"))},{default:D(()=>[ye(" Yes ")]),_:1},8,["class","disabled"])):We("",!0)]),_:1})):We("",!0),r.criminal_description?(be(),He(R,{key:7,style:{"margin-left":"20px","margin-right":"20px","margin-bottom":"30px"},variant:"outlined",modelValue:r.criminal_description_detail,"onUpdate:modelValue":e[9]||(e[9]=Ee=>r.criminal_description_detail=Ee),label:r.criminal_description_detail_help,"hide-details":""},null,8,["modelValue","label"])):We("",!0),(r.criminal_description==!0&&r.criminal_description_detail_char_count>=50||this.criminal_selection=="n")&&r.agreeButtonText=="Criminal"&&r.cancelButtonText=="Criminal"?(be(),He(E,{key:8,"prepend-icon":"mdi-check-underline",style:{"background-color":"#7efb01"},variant:"text",disabled:r.btnDisable,onClick:e[10]||(e[10]=Ee=>a.criminalCheckUpdate())},{default:D(()=>[ye(" Next ")]),_:1},8,["disabled"])):We("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),r.displayContent?(be(),He(ke,{key:0,fluid:"",class:"mainContainerBlock"},{default:D(()=>[w(ie,{id:"dashboardView"},{default:D(()=>[w(fe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(U,{variant:"text",onClick:e[12]||(e[12]=zl(Ee=>r.drawer=!r.drawer,["stop"]))}),w(H,{class:"toolbarTitleStyle"},{default:D(()=>[ye("My Stats")]),_:1}),w(de,{width:"220px"},{activator:D(({props:Ee})=>[w(E,Mi({icon:""},Ee),{default:D(()=>[w(ne,{class:"accountIcon",size:"38"},{default:D(()=>[w(Z,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(pe,null,{default:D(()=>[w(oe,null,{default:D(()=>[w(ie,{style:{"justify-content":"center"}},{default:D(()=>[w(ne,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(Z,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(oe,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(ge,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Oe,{class:"scrollView",id:"viewPort"},{default:D(()=>[r.accountWarningText?(be(),He(_,{key:0,class:"accountSetupWarningText"},{default:D(()=>[ye("In order to receive orders, "),Pe("span",{class:"completeAccountWarning",onClick:e[13]||(e[13]=(...Ee)=>a.routeToChecklist&&a.routeToChecklist(...Ee))}," Click here"),ye(" to complete your profile.")]),_:1})):We("",!0),w(Ie,{cols:"12",class:"driverStatsMainCol"},{default:D(()=>[w(q,{class:"colContentAlign"},{default:D(()=>[w(Ie,{md:"2",sm:"5"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Total Orders ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-cart")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.totalOrders),1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2",sm:"5"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Total Earnings ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-currency-usd")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.totalEarnings),1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Partner-Versary ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-handshake")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.partnerVersary),1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Last Delivery ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-calendar-range")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.lastDelivery),1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2",class:"cardViewStyle"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Distance Covered ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-map-marker-distance")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.distanceCovered)+" miles",1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2",class:"cardViewStyle"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" On-Time Percentage ")]),_:1}),w(we,{size:"64",color:"#0afd01",style:{transform:"rotate(90deg)"}},{default:D(()=>[ye("mdi-timeline-clock-outline")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.onTime)+"%",1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2",class:"cardViewStyle",style:{"padding-bottom":"60px"}},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Response Rate ")]),_:1}),w(we,{size:"64",color:"#0afd01"},{default:D(()=>[ye("mdi-chart-timeline-variant")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.responseRate)+"%",1)]),_:1})]),_:1})]),_:1})]),_:1}),w(q,{class:"viewStyle colContentAlign"},{default:D(()=>[w(Ie,{md:"3"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle",height:"195"},{default:D(()=>[w(q,{style:{"align-items":"center"}},{default:D(()=>[w(Ie,{md:"4"},{default:D(()=>[w(we,{size:"140",color:"#0afd01"},{default:D(()=>[ye("mdi-map-marker-distance")]),_:1})]),_:1}),w(Ie,{md:"8"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Travelled ")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.distanceCovered)+" miles",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),w(Ie,{md:"2"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" On-Time ")]),_:1}),w(we,{size:"64",color:"#0afd01",style:{transform:"rotate(90deg)"}},{default:D(()=>[ye("mdi-timeline-clock-outline")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.onTime)+"%",1)]),_:1})]),_:1})]),_:1}),w(Ie,{md:"3"},{default:D(()=>[w(s,{color:"#eeeeee",class:"cardStyle",height:"195"},{default:D(()=>[w(q,{style:{"align-items":"center"}},{default:D(()=>[w(Ie,{md:"4"},{default:D(()=>[w(we,{size:"140",color:"#0afd01"},{default:D(()=>[ye("mdi-chart-timeline-variant")]),_:1})]),_:1}),w(Ie,{md:"8"},{default:D(()=>[w(p,{class:"cardTitle"},{default:D(()=>[ye(" Response Time ")]),_:1}),w(_,{class:"textStyle"},{default:D(()=>[ye(Zt(r.responseRate)+"%",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)]),_:1})):We("",!0)],64)}const pre=Kn(dre,[["render",fre]]);const mre={components:{AtomSpinner:is,NavigationDrawer:tc},name:"TrainingVideos",data:()=>({video_src_1:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_1.mp4",video_src_2:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_2.mp4",video_src_3:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_3.mp4",video_src_4:"https://www.dlivrd.io/wp-content/uploads/2023/04/Module_4.mp4",imageThumb_1:FF,imageThumb_2:$F,imageThumb_3:NF,imageThumb_4:ES,width:window.innerWidth*.5,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,agreeButtonText:null,cancelButtonText:null,drawer:!1,username:"",loading:!0,loadView:!1,name:"",panel:["video 1"],validationFailed:!1}),beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name"),window.innerWidth<1e3&&(this.width=window.innerWidth*.8)},mounted(){this.sessionValidator()},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(n.non_verified_values&&(this.validationFailed=!0),this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.clearFields(),this.$router.push("/")})},closeDrawer(){this.drawer=!1},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")}}},gre=t=>(Yd("data-v-bed999f1"),t=t(),Xd(),t),_re=gre(()=>Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1));function vre(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-col"),ge=ue("v-expansion-panel-title"),we=ue("video-player"),Ie=ue("v-expansion-panel-text"),Oe=ue("v-expansion-panel"),ke=ue("v-expansion-panels"),Ee=ue("v-container");return be(),ti(Oi,null,[t.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),t.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[_re,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:t.dialog,"onUpdate:modelValue":e[2]||(e[2]=Qe=>t.dialog=Qe),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[t.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(t.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:t.alert_description},null,8,["innerHTML"]),t.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:t.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),t.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=Qe=>t.dialog=!1)},{default:D(()=>[ye(Zt(t.cancelButtonText),1)]),_:1})):We("",!0),t.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),t.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=Qe=>t.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(Ee,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=zl(Qe=>t.drawer=!t.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Training Videos")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:Qe})=>[w(S,Mi({icon:""},Qe),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(t.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:t.validationFailed,drawer:t.drawer,key:t.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(fe,{cols:"12",md:"10"},{default:D(()=>[w(ke,{variant:"popout",modelValue:t.panel,"onUpdate:modelValue":e[8]||(e[8]=Qe=>t.panel=Qe)},{default:D(()=>[w(Oe,{value:"video 1","bg-color":"#eeeeee95"},{default:D(()=>[w(ge,null,{default:D(({expanded:Qe})=>[w(R,{"no-gutters":""},{default:D(()=>[w(fe,{cols:"4",class:"d-flex justify-start"},{default:D(()=>[ye(" Course 1 ")]),_:1})]),_:1})]),_:1}),w(Ie,null,{default:D(()=>[w(we,{src:t.video_src_1,poster:t.imageThumb_1,controls:"",volume:.6,width:t.width,"onUpdate:width":e[4]||(e[4]=Qe=>t.width=Qe),style:{border:"1px solid #0AFD01"}},null,8,["src","poster","volume","width"])]),_:1})]),_:1}),w(Oe,{value:"video 2","bg-color":"#eeeeee95"},{default:D(()=>[w(ge,null,{default:D(({open:Qe})=>[w(R,{"no-gutters":""},{default:D(()=>[w(fe,{cols:"4",class:"d-flex justify-start"},{default:D(()=>[ye(" Course 2 ")]),_:1})]),_:1})]),_:1}),w(Ie,null,{default:D(()=>[w(we,{src:t.video_src_2,poster:t.imageThumb_2,controls:"",volume:.6,width:t.width,"onUpdate:width":e[5]||(e[5]=Qe=>t.width=Qe),style:{border:"1px solid #0AFD01"}},null,8,["src","poster","volume","width"])]),_:1})]),_:1}),w(Oe,{value:"video 3","bg-color":"#eeeeee95"},{default:D(()=>[w(ge,null,{default:D(({open:Qe})=>[w(R,{"no-gutters":""},{default:D(()=>[w(fe,{cols:"4",class:"d-flex justify-start"},{default:D(()=>[ye(" Course 3 ")]),_:1})]),_:1})]),_:1}),w(Ie,null,{default:D(()=>[w(we,{src:t.video_src_3,poster:t.imageThumb_3,controls:"",volume:.6,width:t.width,"onUpdate:width":e[6]||(e[6]=Qe=>t.width=Qe),style:{border:"1px solid #0AFD01"}},null,8,["src","poster","volume","width"])]),_:1})]),_:1}),w(Oe,{value:"video 4","bg-color":"#eeeeee95"},{default:D(()=>[w(ge,null,{default:D(({open:Qe})=>[w(R,{"no-gutters":""},{default:D(()=>[w(fe,{cols:"4",class:"d-flex justify-start"},{default:D(()=>[ye(" Course 4 ")]),_:1})]),_:1})]),_:1}),w(Ie,null,{default:D(()=>[w(we,{src:t.video_src_4,poster:t.imageThumb_4,controls:"",volume:.6,width:t.width,"onUpdate:width":e[7]||(e[7]=Qe=>t.width=Qe),style:{border:"1px solid #0AFD01"}},null,8,["src","poster","volume","width"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const yre=Kn(mre,[["render",vre],["__scopeId","data-v-bed999f1"]]),bre=""+new URL("logo_dlivrd-cb844797.png",import.meta.url).href;const xre={name:"NotificationCard",props:{announcementTitle:String,announcementdescription:String},data(){return{}},methods:{readMore(){this.$router.push("/blog")}}},wre=t=>(Yd("data-v-b084c818"),t=t(),Xd(),t),Tre=wre(()=>Pe("img",{src:bre,width:"55",height:"55"},null,-1));function Sre(t,e,i,n,r,a){const c=ue("v-avatar"),s=ue("v-col"),p=ue("v-card-text"),_=ue("v-row"),b=ue("v-card");return be(),He(b,{color:"#f7f7f7",rounded:"5","min-height":"100",style:{padding:"20px",margin:"20px"}},{default:D(()=>[w(_,{class:"notificationPanelRow"},{default:D(()=>[w(s,{md:"2",sm:"2",xs:"1",class:"notificationCardHeader"},{default:D(()=>[w(c,{color:"grey darken-1",size:"50"},{default:D(()=>[Tre]),_:1})]),_:1}),w(s,{md:"10",sm:"10",xs:"11"},{default:D(()=>[w(p,{class:"cardTitleStyle"},{default:D(()=>[ye(Zt(i.announcementTitle),1)]),_:1})]),_:1})]),_:1}),w(_,{class:"imageAndContentBlock"},{default:D(()=>[w(p,{class:"cardTextStyle"},{default:D(()=>[ye(Zt(i.announcementdescription),1)]),_:1})]),_:1})]),_:1})}const Cre=Kn(xre,[["render",Sre],["__scopeId","data-v-b084c818"]]);const kre={name:"Announcements",components:{NavigationDrawer:tc,AtomSpinner:is,NotificationCard:Cre},data(){return{announcement:[],drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,loading:!0,errorMessage:!1,showError:!1,username:"",loadView:!1,validationFailed:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},methods:{pullAnnouncements(){var t=this.baseurl+"get_announcements";const e={identity:this.username,timezone_:Intl.DateTimeFormat().resolvedOptions().timeZone};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.announcement=n.announcements)}).catch(()=>{this.$router.push("/"),this.clearFields()})},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){this.uploadingData=!0;var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(this.uploadingData=!1,i.status==200){var n=i.data;n.Success?(n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,this.pullAnnouncements()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},closeDrawer(){this.drawer=!1},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")}}},Ere=t=>(Yd("data-v-08765bcb"),t=t(),Xd(),t),Ire=Ere(()=>Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1));function Pre(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("NotificationCard"),ge=ue("v-col"),we=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh"},rounded:"0"},{default:D(()=>[Ire,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=Ie=>r.dialog=Ie),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.showError?(be(),He(_,{key:1,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=Ie=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(S,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:e[1]||(e[1]=Ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(we,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[3]||(e[3]=Ie=>r.drawer=!r.drawer)}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Announcements")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:Ie})=>[w(S,Mi({icon:""},Ie),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(t.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(R,{class:"mainBlockAnnouncements alignRowContent"},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.announcement,Ie=>(be(),He(ge,{md:"4",style:{padding:"0"}},{default:D(()=>[(be(),He(fe,{key:Ie,announcementTitle:Ie.title,announcementdescription:Ie.body},null,8,["announcementTitle","announcementdescription"]))]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Are=Kn(kre,[["render",Pre],["__scopeId","data-v-08765bcb"]]),Mre={name:"BlogView"},Ore={width:"800",height:"800",src:"https://www.dlivrd.io/dlivrds-marvelous-may-recap/&output=embed"};function Lre(t,e,i,n,r,a){return be(),ti("iframe",Ore)}const Dre=Kn(Mre,[["render",Lre]]);let s_=Symbol("map"),o_=Symbol("api"),d6=Symbol("marker"),h6=Symbol("markerCluster"),Pb=Symbol("CustomMarker"),f6=Symbol("mapTilesLoaded"),Dg="click dblclick drag dragend dragstart mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");var Rre=function t(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;var n;if(Array.isArray(e)){var r=e.length;if(r!=i.length)return!1;for(n=r;n--!==0;)if(!t(e[n],i[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();var a=Object.keys(e);if(r=a.length,r!==Object.keys(i).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(i,a[n]))return!1;for(n=r;n--!==0;)if(r=a[n],!t(e[r],i[r]))return!1;return!0}return e!==e&&i!==i};let Bre=class Gm{constructor({apiKey:e,channel:i,client:n,id:r="__googleMapsScriptId",libraries:a=[],language:c,region:s,version:p,mapIds:_,nonce:b,retries:S=3,url:E="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.loading=this.done=!1,this.errors=[],this.version=p,this.apiKey=e,this.channel=i,this.client=n,this.id=r||"__googleMapsScriptId",this.libraries=a,this.language=c,this.region=s,this.mapIds=_,this.nonce=b,this.retries=S,this.url=E,Gm.instance){if(!Rre(this.options,Gm.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Gm.instance.options)}`);return Gm.instance}Gm.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),0<this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,i)=>{this.loadCallback(n=>{n?i(n.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))this.callback();else{var e=this.createUrl(),i=document.createElement("script");i.id=this.id,i.type="text/javascript",i.src=e,i.onerror=this.loadErrorCallback.bind(this),i.defer=!0,i.async=!0,this.nonce&&(i.nonce=this.nonce),document.head.appendChild(i)}}reset(){this.deleteScript(),this.loading=this.done=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){this.errors.push(e),this.errors.length<=this.retries?(e=this.errors.length*Math.pow(2,this.errors.length),console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)):(this.onerrorEvent=e,this.callback())}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){this.resetIfRetryingFailed(),this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setCallback(),this.setScript())}};function Fre(t){return class extends t.OverlayView{constructor(e){super();let{element:i,...n}=e;this.element=i,this.opts=n,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof t.LatLng?this.opts.position:new t.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;let e=this.element;return e.style.display!=="none"&&e.style.visibility!=="hidden"&&(e.style.opacity===""||.01<Number(e.style.opacity))}onAdd(){if(this.element){var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}}draw(){if(this.element){var e=this.getProjection().fromLatLngToDivPixel(this.getPosition());if(e){this.element.style.position="absolute";let n=this.element.offsetHeight;var i=this.element.offsetWidth;switch(this.opts.anchorPoint){case"TOP_CENTER":i=e.x-i/2,e=e.y;break;case"BOTTOM_CENTER":i=e.x-i/2,e=e.y-n;break;case"LEFT_CENTER":i=e.x,e=e.y-n/2;break;case"RIGHT_CENTER":i=e.x-i,e=e.y-n/2;break;case"TOP_LEFT":i=e.x,e=e.y;break;case"TOP_RIGHT":i=e.x-i,e=e.y;break;case"BOTTOM_LEFT":i=e.x,e=e.y-n;break;case"BOTTOM_RIGHT":i=e.x-i,e=e.y-n;break;default:i=e.x-i/2,e=e.y-n/2}this.element.style.left=i+"px",this.element.style.top=e+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}}onRemove(){this.element&&this.element.remove()}setOptions(e){this.opts=e,this.draw()}}}let ZO,YO="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");var eh=qn({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:YO,setup(t,{emit:e}){let i=lt(),n=lt(!1),r=lt(),a=lt(),c=lt(!1);Mn(s_,r),Mn(o_,a),Mn(f6,c);let s=()=>{const b={...t};Object.keys(b).forEach(E=>{b[E]===void 0&&delete b[E]});var S=E=>{var I;return E?{position:(I=a.value)===null||I===void 0?void 0:I.ControlPosition[E]}:{}};return S={scaleControlOptions:t.scaleControlStyle?{style:t.scaleControlStyle}:{},panControlOptions:S(t.panControlPosition),zoomControlOptions:S(t.zoomControlPosition),rotateControlOptions:S(t.rotateControlPosition),streetViewControlOptions:S(t.streetViewControlPosition),fullscreenControlOptions:S(t.fullscreenControlPosition),disableDefaultUI:t.disableDefaultUi},{...b,...S}},p=Fi([a,r],([b,S])=>{b&&S&&(b.event.addListenerOnce(S,"tilesloaded",()=>{c.value=!0}),setTimeout(p,0))},{immediate:!0}),_=b=>{a.value=Ar(b.maps),r.value=Ar(new b.maps.Map(i.value,s())),b=Fre(a.value),a.value[Pb]=b,YO.forEach(S=>{var E;(E=r.value)===null||E===void 0||E.addListener(S,I=>e(S,I))}),n.value=!0,b=Object.keys(t).filter(S=>!"apiPromise apiKey version libraries region language center zoom".split(" ").includes(S)).map(S=>li(t,S)),Fi([()=>t.center,()=>t.zoom,...b],([S,E],[I,R])=>{var V,q,U;const{center:H,zoom:Z,...ne}=s();(V=r.value)===null||V===void 0||V.setOptions(ne),E!==void 0&&E!==R&&((q=r.value)===null||q===void 0||q.setZoom(E)),E=!I||S.lng!==I.lng||S.lat!==I.lat,S&&E&&((U=r.value)===null||U===void 0||U.panTo(S))})};return Fn(()=>{if(t.apiPromise&&t.apiPromise instanceof Promise)t.apiPromise.then(_);else{try{const{apiKey:b,region:S,version:E,language:I,libraries:R}=t;ZO=new Bre({apiKey:b,region:S,version:E,language:I,libraries:R})}catch(b){console.error(b)}ZO.load().then(_)}}),as(()=>{var b;c.value=!1,r.value&&((b=a.value)===null||b===void 0||b.event.clearInstanceListeners(r.value))}),{mapRef:i,ready:n,map:r,api:a,mapTilesLoaded:c}}});function fE(t,e){if(e===void 0&&(e={}),e=e.insertAt,t&&typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}fE(`
.mapdiv[data-v-177d06e3] {
  width: 100%;
  height: 100%;
}
`);let $re=Hb();Yd("data-v-177d06e3");let Nre={ref:"mapRef",class:"mapdiv"};Xd();let zre=$re(t=>(be(),He("div",null,[w("div",Nre,null,512),$d(t.$slots,"default",{ready:t.ready,map:t.map,api:t.api,mapTilesLoaded:t.mapTilesLoaded},void 0,!0)])));eh.render=zre;eh.__scopeId="data-v-177d06e3";var cy=function t(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;var n;if(Array.isArray(e)){var r=e.length;if(r!=i.length)return!1;for(n=r;n--!==0;)if(!t(e[n],i[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();var a=Object.keys(e);if(r=a.length,r!==Object.keys(i).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(i,a[n]))return!1;for(n=r;n--!==0;)if(r=a[n],!t(e[r],i[r]))return!1;return!0}return e!==e&&i!==i};let a_=(t,e,i,n)=>{const r=lt(),a=qi(s_,lt()),c=qi(o_,lt()),s=qi(h6,lt()),p=Me(()=>!!(s.value&&c.value&&(r.value instanceof c.value.Marker||r.value instanceof c.value[Pb])));return Fi([a,i],(_,[b,S])=>{var E,I,R;_=!cy(i.value,S)||a.value!==b,a.value&&c.value&&_&&(r.value?(r.value.setOptions(i.value),p.value&&((E=s.value)===null||E===void 0||E.removeMarker(r.value),(I=s.value)===null||I===void 0||I.addMarker(r.value))):(r.value=Ar(t==="Marker"?new c.value[t](i.value):t===Pb?new c.value[t](i.value):new c.value[t]({...i.value,map:a.value})),p.value?(R=s.value)===null||R===void 0||R.addMarker(r.value):r.value.setMap(a.value),e.forEach(V=>{var q;(q=r.value)===null||q===void 0||q.addListener(V,U=>n(V,U))})))},{immediate:!0}),as(()=>{var _,b;r.value&&((_=c.value)===null||_===void 0||_.event.clearInstanceListeners(r.value),p.value?(b=s.value)===null||b===void 0||b.removeMarker(r.value):r.value.setMap(null))}),r},XO="animation_changed click dblclick rightclick dragstart dragend drag mouseover mousedown mouseout mouseup draggable_changed clickable_changed contextmenu cursor_changed flat_changed rightclick zindex_changed icon_changed position_changed shape_changed title_changed visible_changed".split(" ");var Yf=qn({name:"Marker",props:{options:{type:Object,required:!0}},emits:XO,setup(t,{emit:e,expose:i,slots:n}){return t=li(t,"options"),e=a_("Marker",XO,t,e),Mn(d6,e),i({marker:e}),()=>{var r;return(r=n.default)===null||r===void 0?void 0:r.call(n)}}});qn({name:"Polyline",props:{options:{type:Object,required:!0}},emits:Dg,setup(t,{emit:e}){return t=li(t,"options"),{polyline:a_("Polyline",Dg,t,e)}},render:()=>null});qn({name:"Polygon",props:{options:{type:Object,required:!0}},emits:Dg,setup(t,{emit:e}){return t=li(t,"options"),{polygon:a_("Polygon",Dg,t,e)}},render:()=>null});let KO=Dg.concat(["bounds_changed"]);qn({name:"Rectangle",props:{options:{type:Object,required:!0}},emits:KO,setup(t,{emit:e}){return t=li(t,"options"),{rectangle:a_("Rectangle",KO,t,e)}},render:()=>null});let QO=Dg.concat(["center_changed","radius_changed"]);qn({name:"Circle",props:{options:{type:Object,required:!0}},emits:QO,setup(t,{emit:e}){return t=li(t,"options"),{circle:a_("Circle",QO,t,e)}},render:()=>null});var Vre=qn({props:{position:{type:String,required:!0},index:{type:Number,default:1}},emits:["content:loaded"],setup(t,{emit:e}){let i=lt(null),n=qi(s_,lt()),r=qi(o_,lt()),a=qi(f6,lt(!1)),c=lt(!1),s=Fi([a,r,i],([b,S,E])=>{S&&b&&E&&(p(t.position),c.value=!0,e("content:loaded"),setTimeout(s,0))},{immediate:!0}),p=b=>{n.value&&r.value&&i.value&&n.value.controls[r.value.ControlPosition[b]].push(i.value)},_=b=>{if(n.value&&r.value){let S=null;b=r.value.ControlPosition[b],n.value.controls[b].forEach((E,I)=>{E===i.value&&(S=I)}),S!==null&&n.value.controls[b].removeAt(S)}};return as(()=>_(t.position)),Fi(()=>t.position,(b,S)=>{_(S),p(b)}),Fi(()=>t.index,b=>{b&&i.value&&(i.value.index=t.index)}),{controlRef:i,showContent:c}}});let Ure={ref:"controlRef"};Vre.render=function(t){return be(),He(Oi,null,[We(`
    v-show must be used instead of v-if otherwise there
    would be no rendered content pushed to the map controls
  `),Br(w("div",Ure,[$d(t.$slots,"default")],512),[[Qu,t.showContent]])],2112)};let JO="closeclick content_changed domready position_changed visible zindex_changed".split(" ");var p6=qn({inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},emits:JO,setup(t,{slots:e,emit:i}){let n=lt(),r=lt(),a=qi(s_,lt()),c=qi(o_,lt()),s=qi(d6,lt()),p,_=Me(()=>{var b;return(b=e.default)===null||b===void 0?void 0:b.call(e).some(S=>S.type!==ga)});return Fn(()=>{Fi([a,()=>t.options],([,b],[S,E])=>{S=!cy(b,E)||a.value!==S,a.value&&c.value&&S&&(n.value?(n.value.setOptions({...b,content:_.value?r.value:b.content}),s.value||n.value.open({map:a.value})):(n.value=Ar(new c.value.InfoWindow({...b,content:_.value?r.value:b.content})),s.value?p=s.value.addListener("click",()=>{n.value&&n.value.open({map:a.value,anchor:s.value})}):n.value.open({map:a.value}),JO.forEach(I=>{var R;(R=n.value)===null||R===void 0||R.addListener(I,V=>i(I,V))})))},{immediate:!0})}),as(()=>{var b;p&&p.remove(),n.value&&((b=c.value)===null||b===void 0||b.event.clearInstanceListeners(n.value),n.value.close())}),{infoWindow:n,infoWindowRef:r,hasSlotContent:_}}});fE(`
.info-window-wrapper[data-v-5b373d6e] {
  display: none;
}
.mapdiv .info-window-wrapper[data-v-5b373d6e] {
  display: inline-block;
}
`);let jre=Hb();Yd("data-v-5b373d6e");let Hre={key:0,class:"info-window-wrapper"};Xd();let Gre=jre(t=>t.hasSlotContent?(be(),He("div",Hre,[w("div",Mi({ref:"infoWindowRef"},t.$attrs),[$d(t.$slots,"default",{},void 0,!0)],16)])):We("v-if",!0));p6.render=Gre;p6.__scopeId="data-v-5b373d6e";function PS(t,e,i,n,r,a){if(!(r-n<=i)){var c=n+r>>1;m6(t,e,c,n,r,a%2),PS(t,e,i,n,c-1,a+1),PS(t,e,i,c+1,r,a+1)}}function m6(t,e,i,n,r,a){for(;r>n;){if(600<r-n){var c=r-n+1,s=i-n+1,p=Math.log(c),_=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*_*(c-_)/c)*(0>s-c/2?-1:1),m6(t,e,i,Math.max(n,Math.floor(i-s*_/c+p)),Math.min(r,Math.floor(i+(c-s)*_/c+p)),a)}for(c=e[2*i+a],s=n,_=r,lv(t,e,n,i),e[2*r+a]>c&&lv(t,e,n,r);s<_;){for(lv(t,e,s,_),s++,_--;e[2*s+a]<c;)s++;for(;e[2*_+a]>c;)_--}e[2*n+a]===c?lv(t,e,n,_):(_++,lv(t,e,_,r)),_<=i&&(n=_+1),i<=_&&(r=_-1)}}function lv(t,e,i,n){n2(t,i,n),n2(e,2*i,2*n),n2(e,2*i+1,2*n+1)}function n2(t,e,i){let n=t[e];t[e]=t[i],t[i]=n}let Wre=t=>t[0],qre=t=>t[1];class eL{constructor(e,i=Wre,n=qre,r=64,a=Float64Array){this.nodeSize=r,this.points=e;let c=this.ids=new(65536>e.length?Uint16Array:Uint32Array)(e.length);a=this.coords=new a(2*e.length);for(let s=0;s<e.length;s++)c[s]=s,a[2*s]=i(e[s]),a[2*s+1]=n(e[s]);PS(c,a,r,0,c.length-1,0)}range(e,i,n,r){{var a=this.ids,c=this.coords,s=this.nodeSize;let _=[0,a.length-1,0],b=[],S,E;for(;_.length;){var p=_.pop();let I=_.pop(),R=_.pop();if(I-R<=s){for(p=R;p<=I;p++)S=c[2*p],E=c[2*p+1],S>=e&&S<=n&&E>=i&&E<=r&&b.push(a[p]);continue}let V=Math.floor((R+I)/2);S=c[2*V],E=c[2*V+1],S>=e&&S<=n&&E>=i&&E<=r&&b.push(a[V]);let q=(p+1)%2;(p===0?e<=S:i<=E)&&(_.push(R),_.push(V-1),_.push(q)),(p===0?n>=S:r>=E)&&(_.push(V+1),_.push(I),_.push(q))}e=b}return e}within(e,i,n){{var r=this.ids,a=this.coords,c=this.nodeSize;let S=[0,r.length-1,0],E=[],I=n*n;for(;S.length;){var s=S.pop();let R=S.pop();var p=S.pop();if(R-p<=c){for(s=p;s<=R;s++){p=a[2*s]-e;var _=a[2*s+1]-i;p=p*p+_*_,p<=I&&E.push(r[s])}continue}_=Math.floor((p+R)/2);let V=a[2*_],q=a[2*_+1];{var b=V-e;let U=q-i;b=b*b+U*U}b<=I&&E.push(r[_]),b=(s+1)%2,(s===0?e-n<=V:i-n<=q)&&(S.push(p),S.push(_-1),S.push(b)),(s===0?e+n>=V:i+n>=q)&&(S.push(_+1),S.push(R),S.push(b))}e=E}return e}}let Zre={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Ab=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1));class Yre{constructor(e){this.options=Bv(Object.create(Zre),e),this.trees=Array(this.options.maxZoom+1)}load(e){let{log:i,minZoom:n,maxZoom:r,nodeSize:a}=this.options;i&&console.time("total time");var c=`prepare ${e.length} points`;i&&console.time(c),this.points=e;let s=[];for(let p=0;p<e.length;p++)e[p].geometry&&s.push(Kre(e[p],p));for(this.trees[r+1]=new eL(s,iL,nL,a,Float32Array),i&&console.timeEnd(c),e=r;e>=n;e--)c=+Date.now(),s=this._cluster(s,e),this.trees[e]=new eL(s,iL,nL,a,Float32Array),i&&console.log("z%d: %d clusters in %dms",e,s.length,+Date.now()-c);return i&&console.timeEnd("total time"),this}getClusters(e,i){let n=((e[0]+180)%360+360)%360-180;var r=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180;let c=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])n=-180,a=180;else if(n>a){var s=this.getClusters([n,r,180,c],i);return r=this.getClusters([-180,r,a,c],i),s.concat(r)}i=this.trees[this._limitZoom(i)],a=i.range(n/360+.5,M1(c),a/360+.5,M1(r)),r=[];for(s of a)a=i.points[s],r.push(a.numPoints?tL(a):this.points[a.index]);return r}getChildren(e){var i=this._getOriginId(e),n=this._getOriginZoom(e);let r=this.trees[n];if(!r||(i=r.points[i],!i))throw Error("No cluster with the specified id.");i=r.within(i.x,i.y,this.options.radius/(this.options.extent*Math.pow(2,n-1))),n=[];for(let a of i)i=r.points[a],i.parentId===e&&n.push(i.numPoints?tL(i):this.points[i.index]);if(n.length===0)throw Error("No cluster with the specified id.");return n}getLeaves(e,i,n){let r=[];return this._appendLeaves(r,e,i||10,n||0,0),r}getTile(e,i,n){let r=this.trees[this._limitZoom(e)];e=Math.pow(2,e);let{extent:a,radius:c}=this.options,s=c/a,p=(n-s)/e,_=(n+1+s)/e,b={features:[]};return this._addTileFeatures(r.range((i-s)/e,p,(i+1+s)/e,_),r.points,i,n,e,b),i===0&&this._addTileFeatures(r.range(1-s/e,p,1,_),r.points,e,n,e,b),i===e-1&&this._addTileFeatures(r.range(0,p,s/e,_),r.points,-1,n,e,b),b.features.length?b:null}getClusterExpansionZoom(e){let i=this._getOriginZoom(e)-1;for(;i<=this.options.maxZoom&&(e=this.getChildren(e),i++,e.length===1);)e=e[0].properties.cluster_id;return i}_appendLeaves(e,i,n,r,a){i=this.getChildren(i);for(let c of i)if((i=c.properties)&&i.cluster?a=a+i.point_count<=r?a+i.point_count:this._appendLeaves(e,i.cluster_id,n,r,a):a<r?a++:e.push(c),e.length===n)break;return a}_addTileFeatures(e,i,n,r,a,c){for(let _ of e){e=i[_];let b=e.numPoints;var s=void 0;let S;var p=void 0;b?(s=g6(e),S=e.x,p=e.y):(p=this.points[e.index],s=p.properties,S=p.geometry.coordinates[0]/360+.5,p=M1(p.geometry.coordinates[1])),s={type:1,geometry:[[Math.round(this.options.extent*(S*a-n)),Math.round(this.options.extent*(p*a-r))]],tags:s};let E;b?E=e.id:this.options.generateId?E=e.index:this.points[e.index].id&&(E=this.points[e.index].id),E!==void 0&&(s.id=E),c.features.push(s)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,i){let n=[],{radius:r,extent:a,reduce:c,minPoints:s}=this.options,p=r/(a*Math.pow(2,i));for(let I=0;I<e.length;I++){var _=e[I];if(_.zoom<=i)continue;_.zoom=i;let R=this.trees[i+1];var b=R.within(_.x,_.y,p),S=_.numPoints||1;let V=S;for(let q of b){var E=R.points[q];E.zoom>i&&(V+=E.numPoints||1)}if(V>S&&V>=s){E=_.x*S;let q=_.y*S;S=c&&1<S?this._map(_,!0):null;let U=(I<<5)+(i+1)+this.points.length;for(let H of b){if(b=R.points[H],b.zoom<=i)continue;b.zoom=i;let Z=b.numPoints||1;E+=b.x*Z,q+=b.y*Z,b.parentId=U,c&&(S||(S=this._map(_,!0)),c(S,this._map(b)))}_.parentId=U,n.push(Xre(E/V,q/V,U,V,S))}else if(n.push(_),1<V)for(let q of b)_=R.points[q],_.zoom<=i||(_.zoom=i,n.push(_))}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,i){if(e.numPoints)return i?Bv({},e.properties):e.properties;e=this.points[e.index].properties;let n=this.options.map(e);return i&&n===e?Bv({},n):n}}function Xre(t,e,i,n,r){return{x:Ab(t),y:Ab(e),zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function Kre(t,e){let[i,n]=t.geometry.coordinates;return{x:Ab(i/360+.5),y:Ab(M1(n)),zoom:1/0,index:e,parentId:-1}}function tL(t){var e=t.id,i=g6(t);return{type:"Feature",id:e,properties:i,geometry:{type:"Point",coordinates:[360*(t.x-.5),360*Math.atan(Math.exp((180-360*t.y)*Math.PI/180))/Math.PI-90]}}}function g6(t){let e=t.numPoints,i=1e4<=e?`${Math.round(e/1e3)}k`:1e3<=e?`${Math.round(e/100)/10}k`:e;return Bv(Bv({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function M1(t){return t=Math.sin(t*Math.PI/180),t=.5-.25*Math.log((1+t)/(1-t))/Math.PI,0>t?0:1<t?1:t}function Bv(t,e){for(let i in e)t[i]=e[i];return t}function iL(t){return t.x}function nL(t){return t.y}let AS=class{constructor({markers:e,position:i}){this.markers=e,i&&(this._position=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i))}get bounds(){if(this.markers.length!==0||this._position)return this.markers.reduce((e,i)=>e.extend(i.getPosition()),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>e.getVisible()).length}push(e){this.markers.push(e)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}};class Qre{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return Jre(e)}}let Jre=t=>t.map(e=>new AS({position:e.getPosition(),markers:[e]}));class ese extends Qre{constructor(e){var{maxZoom:i,radius:n=60}=e,r=["maxZoom","radius"],a={},c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&0>r.indexOf(c)&&(a[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(c=Object.getOwnPropertySymbols(e);s<c.length;s++)0>r.indexOf(c[s])&&Object.prototype.propertyIsEnumerable.call(e,c[s])&&(a[c[s]]=e[c[s]])}super({maxZoom:i}),this.superCluster=new Yre(Object.assign({maxZoom:this.maxZoom,radius:n},a)),this.state={zoom:null}}calculate(e){let i=!1;if(!cy(e.markers,this.markers)){i=!0,this.markers=[...e.markers];var n=this.markers.map(r=>({type:"Feature",geometry:{type:"Point",coordinates:[r.getPosition().lng(),r.getPosition().lat()]},properties:{marker:r}}));this.superCluster.load(n)}return n={zoom:e.map.getZoom()},i||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(i=i||!cy(this.state,n)),this.state=n,i&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:i}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[e,i]},properties:n}){return n.cluster?new AS({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(r=>r.properties.marker),position:new google.maps.LatLng({lat:i,lng:e})}):(e=n.marker,new AS({markers:[e],position:e.getPosition()}))}}class tse{constructor(e,i){this.markers={sum:e.length},e=i.map(r=>r.count);let n=e.reduce((r,a)=>r+a,0);this.clusters={count:i.length,markers:{mean:n/i.length,sum:n,min:Math.min(...e),max:Math.max(...e)}}}}class ise{render({count:e,position:i},n){return n=window.btoa(`
  <svg fill="${e>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
    <circle cx="120" cy="120" opacity=".6" r="70" />
    <circle cx="120" cy="120" opacity=".3" r="90" />
    <circle cx="120" cy="120" opacity=".2" r="110" />
  </svg>`),new google.maps.Marker({position:i,icon:{url:`data:image/svg+xml;base64,${n}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${e} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+e})}}class pE{constructor(){var e=pE,i=google.maps.OverlayView;for(let n in i.prototype)e.prototype[n]=i.prototype[n]}}var cg,mE=cg||(cg={});mE.CLUSTERING_BEGIN="clusteringbegin";mE.CLUSTERING_END="clusteringend";mE.CLUSTER_CLICK="click";let nse=(t,e,i)=>{i.fitBounds(e.bounds)};class rse extends pE{constructor({map:e,markers:i=[],algorithm:n=new ese({}),renderer:r=new ise,onClusterClick:a=nse}){super(),this.markers=[...i],this.clusters=[],this.algorithm=n,this.renderer=r,this.onClusterClick=a,e&&this.setMap(e)}addMarker(e,i){this.markers.includes(e)||(this.markers.push(e),i||this.render())}addMarkers(e,i){e.forEach(n=>{this.addMarker(n,!0)}),i||this.render()}removeMarker(e,i){let n=this.markers.indexOf(e);return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),i||this.render(),!0)}removeMarkers(e,i){let n=!1;return e.forEach(r=>{n=this.removeMarker(r,!0)||n}),n&&!i&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){let e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,cg.CLUSTERING_BEGIN,this);let{clusters:i,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=i,this.renderClusters()),google.maps.event.trigger(this,cg.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>e.setMap(null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){let e=new tse(this.markers,this.clusters),i=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e),this.onClusterClick&&n.marker.addListener("click",r=>{google.maps.event.trigger(this,cg.CLUSTER_CLICK,n),this.onClusterClick(r,n,i)})),n.marker.setMap(i)})}}let rL=Object.values(cg);qn({name:"MarkerCluster",props:{options:{type:Object,default:()=>({})}},emits:rL,setup(t,{emit:e,expose:i,slots:n}){let r=lt(),a=qi(s_,lt()),c=qi(o_,lt());return Mn(h6,r),Fi(a,()=>{a.value&&(r.value=Ar(new rse({map:a.value,...t.options})),rL.forEach(s=>{var p;(p=r.value)===null||p===void 0||p.addListener(s,_=>e(s,_))}))},{immediate:!0}),as(()=>{var s;r.value&&((s=c.value)===null||s===void 0||s.event.clearInstanceListeners(r.value),r.value.clearMarkers(),r.value.setMap(null))}),i({markerCluster:r}),()=>{var s;return(s=n.default)===null||s===void 0?void 0:s.call(n)}}});var _6=qn({inheritAttrs:!1,props:{options:{type:Object,required:!0}},setup(t,{slots:e,emit:i}){let n=lt(),r=lt(),a=Me(()=>{var s;return(s=e.default)===null||s===void 0?void 0:s.call(e).some(p=>p.type!==ga)}),c=Me(()=>({...t.options,element:n.value}));return Fn(()=>{r=a_(Pb,[],c,i)}),{customMarkerRef:n,customMarker:r,hasSlotContent:a}}});fE(`
.custom-marker-wrapper[data-v-b9d5ec8a] {
  display: none;
}
.mapdiv .custom-marker-wrapper[data-v-b9d5ec8a] {
  display: inline-block;
}
`);let sse=Hb();Yd("data-v-b9d5ec8a");let ose={key:0,class:"custom-marker-wrapper"};Xd();let ase=sse(t=>t.hasSlotContent?(be(),He("div",ose,[w("div",Mi({ref:"customMarkerRef",style:{cursor:t.$attrs.onClick?"pointer":void 0}},t.$attrs),[$d(t.$slots,"default",{},void 0,!0)],16)])):We("v-if",!0));_6.render=ase;_6.__scopeId="data-v-b9d5ec8a";qn({name:"HeatmapLayer",props:{options:{type:Object,default:()=>({})}},setup(t){let e=lt(),i=qi(s_,lt()),n=qi(o_,lt());return Fi([i,()=>t.options],([,r],[a,c])=>{var s;if(a=!cy(r,c)||i.value!==a,i.value&&n.value&&a){if(r=structuredClone(r),r.data&&!(r.data instanceof n.value.MVCArray)){let p=n.value.LatLng;r.data=(s=r.data)===null||s===void 0?void 0:s.map(_=>_ instanceof p||"location"in _&&(_.location instanceof p||_.location===null)?_:"location"in _?{..._,location:new p(_.location)}:new p(_))}e.value?e.value.setOptions(r):e.value=Ar(new n.value.visualization.HeatmapLayer({...r,map:i.value}))}},{immediate:!0}),as(()=>{e.value&&e.value.setMap(null)}),{heatmapLayer:e}},render:()=>null});const Vy=""+new URL("Foodee-47138179.png",import.meta.url).href;const lse={components:{GoogleMap:eh,Marker:Yf},data(){return{center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"Order 165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:100,TravelDistance:14.6},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"}],map:null}},mounted(){this.initMap()},methods:{initMap(){},viewOrderDetails(t){t==1?this.center=this.pickup:this.center=this.drop,console.log("View details for order ID:",t)}}},use={class:"order_view_web"},cse={style:{"background-color":"white","border-bottom":"3px #0afd01 solid",height:"8vh"}},dse={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},hse=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),fse=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"left","padding-left":"10px",color:"red"}},"0# 48646464",-1),pse={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},mse=Pe("div",{id:"map",class:"map",style:{display:"none"}},null,-1),gse={class:"order-list",style:{display:"block","padding-top":"10px"}},_se=$g('<div class="order-details" style="width:100% !important;margin-bottom:15px;"><div style="display:inline-flex;justify-content:space-between;width:100%;"><h2 style="font-weight:bold;color:black;">Earning</h2><h2 style="color:black;font-weight:bold;">50 $</h2></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Distance</p><p style="color:black;"><i class="fas fa-clock"></i>14.6 Miles</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Order Value</p><p style="color:black;"><i class="fas fa-map-marker-alt"></i> 205$</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;padding-top:10px;">Partner</p> <img alt="Vue logo" class="logo" style="object-fit:contain;width:150px;" src="'+Vy+'" width="125" height="50"></div></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">DELIVERY ACTIVITY</p></div>',2),vse={class:"delivery_activity"},yse=["onClick"],bse={style:{display:"inline-flex"}},xse={style:{}},wse={key:0,class:"activity_track"},Tse=Pe("p",{style:{visibility:"hidden"}},"p",-1),Sse=[Tse],Cse={key:1,class:"activity_track_icon"},kse=Pe("div",{class:"activity_infoblock"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Ese=Pe("div",{class:"activity_track"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Ise={style:{"margin-left":"20px"}},Pse={style:{color:"black","font-weight":"bold"}},Ase={style:{color:"black"}},Mse=Pe("i",{class:"fas fa-clock"},null,-1),Ose={style:{color:"black"}},Lse=Pe("i",{class:"fas fa-map-marker-alt"},null,-1),Dse=Pe("footer",{style:{"margin-bottom":"20px",height:"10vh"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function Rse(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("Marker"),p=ue("GoogleMap");return be(),ti("div",use,[Pe("header",cse,[Pe("div",dse,[w(c,{onClick:e[0]||(e[0]=_=>t.$router.go(-1)),style:{"background-color":"#0afd01","border-radius":"30px",height:"100%",width:"50px"},size:"50"},{default:D(()=>[ye("mdi-arrow-left-thin-circle-outline")]),_:1}),hse])]),fse,Pe("div",pse,[Pe("main",null,[mse,w(p,{"api-key":"AIzaSyCxupdlf2THy6HbkYf33JTupUz14AP2plY",class:"map_box",style:{width:"100%",height:"400px"},center:this.center,zoom:12},{default:D(()=>[w(s,{options:this.markerOptionspickup},null,8,["options"]),w(s,{options:this.markerOptionsdrop},null,8,["options"])]),_:1},8,["center"]),Pe("div",gse,[_se,Pe("div",vse,[(be(!0),ti(Oi,null,Zr(r.orders,_=>(be(),ti("div",{onClick:b=>a.viewOrderDetails(_.id),key:_.id,class:"activity_block"},[Pe("div",bse,[Pe("div",xse,[_.id!=1?(be(),ti("div",wse,Sse)):We("",!0),_.id==1?(be(),ti("div",Cse,[w(c,{color:"#0afd01",style:{"border-radius":"30px",height:"100%"},size:"40"},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1})])):We("",!0),kse,Ese]),Pe("div",Ise,[Pe("h2",Pse,Zt(_.orderNumber),1),Pe("p",Ase,[Mse,ye(" "+Zt(_.time),1)]),Pe("p",Ose,[Lse,ye(" "+Zt(_.address),1)])])])],8,yse))),128))])]),Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[1]||(e[1]=_=>a.viewOrderDetails(1)),style:{"background-color":"red"}},"Decline"),Pe("button",{class:"decision_button",onClick:e[2]||(e[2]=_=>a.viewOrderDetails(2)),style:{"background-color":"green"}},"Interested")])])]),Dse])}const Bse=Kn(lse,[["render",Rse]]);const Fse={class:"wrapper",style:{"text-align":"-webkit-center"}},$se={__name:"LoginHeader",setup(t){return(e,i)=>(be(),ti("header",null,[Pe("div",Fse,[w(BF,{msg:"Dlivrd"})])]))}},Nse=Kn($se,[["__scopeId","data-v-a1877a27"]]);const zse={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,linkToClick:"https://www.legalzoom.com/business/business-formation/llc-overview.html",username:"",loading:!0,showMessage:!1,loadView:!1,name:"",validationFailed:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},openLink(){window.open("https://www.legalzoom.com/business/business-formation/llc-overview.html")},closeDrawer(){this.drawer=!1}}},Vse=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1),Use=Pe("br",null,null,-1);function jse(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-dialog"),R=ue("v-row"),V=ue("v-app-bar-nav-icon"),q=ue("v-toolbar-title"),U=ue("v-img"),H=ue("v-avatar"),Z=ue("v-layout"),ne=ue("v-list-item"),ie=ue("v-list"),oe=ue("v-menu"),pe=ue("v-app-bar"),de=ue("NavigationDrawer"),fe=ue("v-col"),ge=ue("v-main"),we=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[Vse,w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[1]||(e[1]=Ie=>r.dialog=Ie),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),w(E,{class:"dialogBoxActionButtons"},{default:D(()=>[w(b),r.cancelButtonText=="Cancel"?(be(),He(S,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:e[0]||(e[0]=Ie=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(S,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(we,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(Z,{id:"dashboardView"},{default:D(()=>[w(pe,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(V,{variant:"text",onClick:e[2]||(e[2]=zl(Ie=>r.drawer=!r.drawer,["stop"]))}),w(q,{class:"toolbarTitleStyle"},{default:D(()=>[ye("LLC")]),_:1}),w(oe,{width:"220px"},{activator:D(({props:Ie})=>[w(S,Mi({icon:""},Ie),{default:D(()=>[w(H,{class:"accountIcon",size:"38"},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(ie,null,{default:D(()=>[w(ne,null,{default:D(()=>[w(Z,{style:{"justify-content":"center"}},{default:D(()=>[w(H,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(U,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ne,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(de,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(ge,null,{default:D(()=>[w(fe,{md:"5",sm:"12",style:{padding:"0"}},{default:D(()=>[w(p,{class:"heading"},{default:D(()=>[ye(" Registering An LLC ")]),_:1}),w(_,{class:"noteStyle"},{default:D(()=>[ye(" Please click on the button below to get the basics. ")]),_:1}),w(S,{class:"LLCBtnStyle","prepend-icon":"mdi-link",onClick:a.openLink},{default:D(()=>[ye(" Link ")]),_:1},8,["onClick"]),w(p,{class:"heading"},{default:D(()=>[ye(" Note ")]),_:1}),w(_,{class:"noteStyle"},{default:D(()=>[ye(" We will repay state filing fees once X total deliveries are successfully completed. "),Use,ye("Send us a snippet to ROSE line for confirmation so we can make a note on your profile. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Hse=Kn(zse,[["render",jse]]);const Gse={components:{TextFieldItem:sm,SignUpHeader:$y,AtomSpinner:is},data(){return{username:"",dialog:!1,alert_title:"",alert_description:"",loading:!0,otpCode:"",editMobileNumber:!1}},methods:{requestResetPass(){if(this.username=="")this.alert_title="Warning",this.alert_description="Please enter dlivrd username",this.dialog=!0,this.agreeButtonText="Ok",this.cancelButtonText="Cancel";else{this.loading=!1;var t=this.baseurl+"onboard_forgotPassword";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(i=>{if(console.log(i),this.loading=!0,i.status==200){var n=i.data;n.Success?(this.alert_title="Success",this.alert_description=n.Success,this.dialog=!0,this.agreeButtonText="Ok"):(this.alert_title="Warning",this.alert_description=n.Failure,this.dialog=!0,this.agreeButtonText="Ok")}}).catch(i=>{console.log(i)})}},confirmOTP(){this.$router.push("/resetPassword")}}},Wse={style:{width:"100%","text-align":"-webkit-center"}};function qse(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-col"),V=ue("v-text-field"),q=ue("TextFieldItem"),U=ue("atom-spinner"),H=ue("v-container");return be(),He(H,{"fill-height":"",fluid:"",class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=Z=>r.dialog=Z),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.alert_title=="Success"?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=Z=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):r.alert_title=="Warning"?(be(),He(_,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=Z=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(I,null,{default:D(()=>[w(R,{md:"2"}),w(R,{cols:"12",sm:"12",md:"4",style:{"align-self":"center"}},{default:D(()=>[w(q,null,{heading:D(()=>[ye("Mobile Number")]),default:D(()=>[w(V,{"background-color":"black",required:"",modelValue:r.username,"onUpdate:modelValue":e[3]||(e[3]=Z=>r.username=Z),"hide-details":"",readonly:r.editMobileNumber,placeholder:"Enter number","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",type:"text",density:"comfortable",onKeyup:Vl(a.requestResetPass,["enter"])},null,8,["modelValue","readonly","onKeyup"])]),_:1}),w(Nl,{name:"fade",mode:"out-in"},{default:D(()=>[r.editMobileNumber==!0?(be(),He(q,{key:0},{heading:D(()=>[ye("One Time Password")]),default:D(()=>[w(V,{"background-color":"black",required:"",modelValue:r.otpCode,"onUpdate:modelValue":e[4]||(e[4]=Z=>r.otpCode=Z),"hide-details":"",placeholder:"Enter OTP","persistent-placeholder":!0,class:"generic_tx px-1",name:"otp",type:"number",density:"comfortable",onKeyup:Vl(a.confirmOTP,["enter"])},null,8,["modelValue","onKeyup"])]),_:1})):We("",!0)]),_:1}),w(R,{"align-self":"center",sm:"12",style:{"text-align":"center","margin-top":"10px"}},{default:D(()=>[r.loading?(be(),He(_,{key:0,"prepend-icon":"mdi-send-variant-outline",class:"btn_green",onClick:a.requestResetPass},{default:D(()=>[ye("Resend")]),_:1},8,["onClick"])):We("",!0),r.loading?(be(),He(_,{key:1,"prepend-icon":"mdi-shield-check",class:"btn_green",style:{"margin-left":"10px"},onClick:a.requestResetPass},{default:D(()=>[ye("Verify")]),_:1},8,["onClick"])):We("",!0),Pe("div",Wse,[r.loading?We("",!0):(be(),He(U,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01"}))])]),_:1})]),_:1}),w(R,{md:"2"})]),_:1})]),_:1})}const Zse=Kn(Gse,[["render",qse]]);const Yse={components:{GoogleMap:eh,Marker:Yf,AtomSpinner:is},data(){return{order_details:{},order_id:"",username:"",loading:!0,first_job:"",markerlist:[],delivery_partner_image:"src/assets/logos/",alert_title:"Confirmation",dialog:!1,alert_description:"Do you want this order ?",center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},jobs:[],orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"}],map:null}},mounted(){this.order_id=this.$route.params.Order_id,this.username=localStorage.getItem("on_username"),this.sessionValidator()},methods:{sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(console.log("Settings session response"),console.log(i),this.loading=!0,i.status==200){var n=i.data;n.Success?(localStorage.setItem("profile_image",n.profile_image),this.get_open_order(this.order_id)):(alert("session Expired sessuib exoured"),this.$router.go(-1))}}).catch(()=>{console.log("")})},decide_open_order(){this.dialog=!1;var t=this.baseurl+"assign_open_order";const e={identity:this.username,order_id:this.order_id};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{console.log("Settings session response"),console.log(i),this.loading=!0,i.status==200&&this.$router.go(-1)}).catch(()=>{console.log("")})},append_marker_google_map(){},get_open_order(t){var e=this.baseurl+"get_single_open_order_details";const i={identity:this.username,page_number:1,order_id:t};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(n=>{if(console.log("Settings session response"),console.log(n),this.loading=!1,n.status==200){var n=n.data;if(n.Success=="Order found."){this.order_details=n.order,this.delivery_partner_image+=this.order_details.delivery_partner+".png";for(var r=0;r<this.order_details.pickups.length;r++){var a={position:{lat:parseFloat(this.order_details.pickups[r].latitude),lng:parseFloat(this.order_details.pickups[r].longitude)},label:"P",title:this.order_details.pickups[r].location_name};this.markerlist.push(a),this.jobs.push({type:"Pickup",location_name:this.order_details.pickups[r].location_name,address:this.order_details.pickups[r].address,time:this.order_details.pickups[r].pickupAt,latitude:this.order_details.pickups[r].latitude,longitude:this.order_details.pickups[r].longitude,marker_location:a})}for(var r=0;r<this.order_details.dropoffs.length;r++){var a={position:{lat:parseFloat(this.order_details.dropoffs[r].latitude),lng:parseFloat(this.order_details.dropoffs[r].longitude)},label:"D",title:this.order_details.dropoffs[r].location_name};this.markerlist.push(a),this.jobs.push({type:"Dropoff",location_name:this.order_details.dropoffs[r].location_name,address:this.order_details.dropoffs[r].address,time:this.order_details.dropoffs[r].dropoffAt,latitude:this.order_details.dropoffs[r].latitude,longitude:this.order_details.dropoffs[r].longitude,marker_location:a})}this.center=this.markerlist[0].position}else alert("session Expired get all orders")}}).catch(()=>{console.log("")})},initMap(){},viewOrderDetails(t){this.center=t.position}}},Xse={class:"order_view_web"},Kse={style:{"background-color":"white","border-bottom":"3px #0afd01 solid"}},Qse={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},Jse=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),eoe={key:0,id:"header",style:{"font-weight":"bold","text-align":"left","padding-left":"10px",color:"black"}},toe={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},ioe={key:1},noe=Pe("div",{id:"map",class:"map",style:{display:"none"}},null,-1),roe={class:"order-list",style:{display:"block","padding-top":"10px"}},soe={class:"order-details",style:{width:"100% !important","margin-bottom":"15px"}},ooe={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},aoe=Pe("h2",{style:{"font-weight":"bold",color:"black"}},"Earning",-1),loe={style:{color:"black","font-weight":"bold"}},uoe={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},coe=Pe("p",{style:{"font-weight":"bold",color:"black"}},"Distance",-1),doe={style:{color:"black"}},hoe=Pe("i",{class:"fas fa-clock"},null,-1),foe={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},poe=Pe("p",{style:{"font-weight":"bold",color:"black"}},"Order Value",-1),moe={style:{color:"black"}},goe=Pe("i",{class:"fas fa-map-marker-alt"},null,-1),_oe={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},voe=Pe("p",{style:{"font-weight":"bold",color:"black","padding-top":"10px"}},"Partner",-1),yoe=["src"],boe=Pe("div",{style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},[Pe("p",{style:{"font-weight":"bold",color:"black"}},"DELIVERY ACTIVITY")],-1),xoe={class:"delivery_activity"},woe=["onClick"],Toe={style:{display:"inline-flex"}},Soe={style:{}},Coe={key:0,class:"activity_track"},koe=Pe("p",{style:{visibility:"hidden"}},"p",-1),Eoe=[koe],Ioe={key:1,class:"activity_track_icon"},Poe=Pe("div",{class:"activity_infoblock"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Aoe=Pe("div",{class:"activity_track"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Moe={style:{"margin-left":"20px"}},Ooe={style:{color:"black","font-weight":"bold"}},Loe={style:{color:"black"}},Doe={style:{color:"black","font-size":"80%"}},Roe=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function Boe(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-card-title"),p=ue("v-card-text"),_=ue("v-spacer"),b=ue("v-btn"),S=ue("v-card-actions"),E=ue("v-card"),I=ue("v-dialog"),R=ue("v-row"),V=ue("atom-spinner"),q=ue("Marker"),U=ue("GoogleMap"),H=ue("v-col");return be(),ti("div",Xse,[Pe("header",Kse,[Pe("div",Qse,[w(c,{onClick:e[0]||(e[0]=Z=>t.$router.go(-1)),style:{"background-color":"transparent",color:"#0afd01","border-radius":"30px",height:"100%",width:"50px"},size:"50"},{default:D(()=>[ye("mdi-arrow-left-thin-circle-outline")]),_:1}),Jse])]),w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=Z=>r.dialog=Z),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(E,null,{default:D(()=>[w(s,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(p,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),t.showError?(be(),He(p,{key:0,style:{color:"red","padding-top":"0px"},innerHTML:t.errorMessage},null,8,["innerHTML"])):We("",!0),w(S,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(_),w(b,{"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=Z=>r.dialog=!1)},{default:D(()=>[ye(" Cancel ")]),_:1}),w(b,{"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.decide_open_order},{default:D(()=>[ye(" Confirm ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),r.loading?We("",!0):(be(),ti("h1",eoe,"0# "+Zt(r.order_details.order_id),1)),Pe("div",toe,[r.loading?(be(),He(V,{key:0,"animation-duration":1e3,size:90,color:"#0afd01",style:{margin:"auto","margin-top":"100px"}})):We("",!0),r.loading?We("",!0):(be(),ti("main",ioe,[noe,w(U,{id:"google_map","api-key":"AIzaSyCxupdlf2THy6HbkYf33JTupUz14AP2plY",class:"map_box",style:{width:"100%",height:"400px"},center:this.center,zoom:12},{default:D(()=>[(be(!0),ti(Oi,null,Zr(r.markerlist,Z=>(be(),He(q,{options:Z},null,8,["options"]))),256))]),_:1},8,["center"]),Pe("div",roe,[Pe("div",soe,[Pe("div",ooe,[aoe,Pe("h2",loe,Zt(r.order_details.order_earnings)+" $",1)]),Pe("div",uoe,[coe,Pe("p",doe,[hoe,ye(Zt(r.order_details.distance_to_dropoff)+" Miles",1)])]),Pe("div",foe,[poe,Pe("p",moe,[goe,ye(" "+Zt(r.order_details.order_subtotal)+"$",1)])]),Pe("div",_oe,[voe,ye(),Pe("img",{class:"logo",style:{"object-fit":"contain",width:"150px"},src:r.delivery_partner_image,width:"125",height:"50"},null,8,yoe)])]),boe,Pe("div",xoe,[(be(!0),ti(Oi,null,Zr(this.jobs,Z=>(be(),ti("div",{onClick:ne=>a.viewOrderDetails(Z.marker_location),key:Z.id,class:"activity_block"},[Pe("div",Toe,[Pe("div",Soe,[Z.type!="Pickup"?(be(),ti("div",Coe,Eoe)):We("",!0),Z.type=="Pickup"?(be(),ti("div",Ioe,[w(c,{color:"#0afd01",style:{"border-radius":"30px",height:"100%"},size:"40"},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1})])):We("",!0),Poe,Aoe]),Pe("div",Moe,[Pe("h4",Ooe,Zt(Z.location_name),1),Pe("p",Loe,[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-store-clock")]),_:1}),ye(" "+Zt(Z.time.replace("T"," ")),1)]),w(R,null,{default:D(()=>[w(H,{cols:"1",sm:"1",style:{width:"10px"}},{default:D(()=>[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1})]),_:1}),w(H,{style:{"align-self":"flex-end"}},{default:D(()=>[Pe("p",Doe,Zt(Z.address),1)]),_:2},1024)]),_:2},1024)])])],8,woe))),128))])]),Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[3]||(e[3]=Z=>this.$router.go(-1)),style:{"background-color":"red"}},"Back"),Pe("button",{class:"decision_button",onClick:e[4]||(e[4]=Z=>r.dialog=!0),style:{"background-color":"#0afd01"}},"Interested")])]))]),Roe])}const Foe=Kn(Yse,[["render",Boe]]);const $oe={components:{AtomSpinner:is,NavigationDrawer:tc},data(){return{drawer:!1,agreeButtonText:null,cancelButtonText:null,alert_title:"",alert_description:"",dialog:!1,errorMessage:!1,showError:!1,username:"",loading:!0,showMessage:!1,loadView:!1,name:"",validationFailed:!1,personalInfo:!1,documentsInfo:!1,questionnaireInfo:!1,bankingInfo:!1,deliveryInfo:!1,availabilityInfo:!1,vehicleInfo:!1,verifyRequirements:!0,desiredUsername:null,responseUsernameAvailibility:{},customUsername:null,username_tf:!1,personalInfoTooltip:"",documentsInfoTooltip:"",questionnaireInfoTooltip:"",bankingInfoTooltip:"",deliveryInfoTooltip:"",availabilityInfoTooltip:"",vehicleInfoTooltip:"",showStatus:!1}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.sessionValidator()},methods:{logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},clearFields(){localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),localStorage.setItem("name",""),localStorage.setItem("mobile",""),localStorage.setItem("phoneverified",""),localStorage.setItem("session_id","")},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(this.clearFields(),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){console.log(i);var n=i.data;n.Success?(this.loadView=!0,this.userProfileImage=this.baseImageurl+n.profile_image,n.plaid_verification_complete=="success"&&n.banking_info_verified==!0?this.validationFailed=!1:this.validationFailed=!0,this.loadChecklistStatus()):(this.clearFields(),this.$router.push("/"))}}).catch(()=>{this.$router.push("/")})},loadChecklistStatus(){var t=this.baseurl+"get_onboard_checklist",e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{console.log(" C response"),console.log(i),i.data.Success?(i.data.checklist.personal_info?this.personalInfo=!0:i.data.missing_info.personal_info&&(i.data.missing_info.personal_info.name_verified&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.name_verified+"</br>"),i.data.missing_info.personal_info.mobile_number_verified&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.mobile_number_verified+"</br>"),i.data.missing_info.personal_info.email&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.email+"</br>"),i.data.missing_info.personal_info.ssn_verified&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.ssn_verified+"</br>"),i.data.missing_info.personal_info.dob_verified&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.dob_verified+"</br>"),i.data.missing_info.personal_info.country&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.country+"</br>"),i.data.missing_info.personal_info.state&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.state+"</br>"),i.data.missing_info.personal_info.address&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.address+"</br>"),i.data.missing_info.personal_info.purpose&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.purpose+"</br>"),i.data.missing_info.personal_info.selfie&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.selfie+"</br>"),i.data.missing_info.personal_info.license_front&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.license_front+"</br>"),i.data.missing_info.personal_info.license_back&&(this.personalInfoTooltip+=i.data.missing_info.personal_info.license_back+"</br>")),i.data.checklist.documents?this.documentsInfo=!0:i.data.missing_info.documents&&(i.data.missing_info.documents.insurance&&(this.documentsInfoTooltip+=i.data.missing_info.documents.insurance+"</br>"),i.data.missing_info.documents.vehicle_registration&&(this.documentsInfoTooltip+=i.data.missing_info.documents.vehicle_registration+"</br>")),i.data.checklist.questionnaire?(this.questionnaireInfo=!0,localStorage.setItem("questionnaire",!1)):(i.data.missing_info.questionnaire&&i.data.missing_info.questionnaire.questionnaire&&(this.questionnaireInfoTooltip+=i.data.missing_info.questionnaire.questionnaire+"</br>"),localStorage.setItem("questionnaire",!0)),i.data.checklist.banking_info?this.bankingInfo=!0:i.data.missing_info.banking_info&&i.data.missing_info.banking_info.banking_info&&(this.bankingInfoTooltip+=i.data.missing_info.banking_info.banking_info+"</br>"),i.data.checklist.delivery_location?this.deliveryInfo=!0:i.data.missing_info.delivery_location&&(i.data.missing_info.delivery_location.delivery_location&&(this.deliveryInfoTooltip+=i.data.missing_info.delivery_location.delivery_location+"</br>"),i.data.missing_info.delivery_location.tip_preference&&(this.deliveryInfoTooltip+=i.data.missing_info.delivery_location.tip_preference+"</br>")),i.data.checklist.preferred_slots?this.availabilityInfo=!0:i.data.missing_info.preferred_slots&&i.data.missing_info.preferred_slots.preferred_slots&&(this.availabilityInfoTooltip+=i.data.missing_info.preferred_slots.preferred_slots+"</br>"),i.data.checklist.vehicle_bag_details?this.vehicleInfo=!0:i.data.missing_info.vehicle_bag_details&&(i.data.missing_info.vehicle_bag_details.vehicle&&(this.vehicleInfoTooltip+=i.data.missing_info.vehicle_bag_details.vehicle+"</br>"),i.data.missing_info.vehicle_bag_details.cart&&(this.vehicleInfoTooltip+=i.data.missing_info.vehicle_bag_details.cart+"</br>"),i.data.missing_info.vehicle_bag_details.cart_image&&(this.vehicleInfoTooltip+=i.data.missing_info.vehicle_bag_details.cart_image+"</br>"),i.data.missing_info.vehicle_bag_details.catering_bags&&(this.vehicleInfoTooltip+=i.data.missing_info.vehicle_bag_details.catering_bags+"</br>"),i.data.missing_info.vehicle_bag_details.catering_bags_image&&(this.vehicleInfoTooltip+=i.data.missing_info.vehicle_bag_details.catering_bags_image+"</br>")),this.personalInfo==!1||this.documentsInfo==!1||this.bankingInfo==!1||this.deliveryInfo==!1||this.availabilityInfo==!1||this.vehicleInfo==!1||this.questionnaireInfo==!1?this.verifyRequirements=!0:this.verifyRequirements=!1,this.showStatus=!0):(this.clearFields(),this.$router.push("/"))}).catch(()=>{this.clearFields(),this.$router.push("/")})},submitFormConfirmation(){this.alert_title="Submit",this.alert_description="Are you sure you want to submit your application for review?",this.agreeButtonText="Process",this.cancelButtonText="Cancel",this.dialog=!0},enterUsername(){this.username_tf=!0,this.alert_title="Display Name",this.alert_description="Enter your username for the account.",this.dialog=!0,this.agreeButtonText="Save",this.showError=!1},checkUsernameAvailability(){if(this.alert_error=null,this.desiredUsername==null||this.desiredUsername.length<8||this.desiredUsername.length>20){this.errorMessage="The username should have 8-20 characters.",this.showError=!0;return}else if(!this.desiredUsername.match(/^[A-Za-z0-9]*$/)){this.errorMessage="The username should have characters and numbers only.",this.showError=!0;return}this.loading=!1,this.btnDisable=!0;var t=this.baseurl+"check_tookan";const e={identity:this.username,tookan_username:this.desiredUsername};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(this.loading=!0,this.btnDisable=!1,i.status==200){if(this.responseUsernameAvailibility=i.data,this.responseUsernameAvailibility.tookan_username_available==!1){this.alert_error="Username already taken.";return}this.username_tf=!1,this.modulesCompleted()}}).catch(()=>{this.alert_title="Warning",this.alert_description="Session Expired. Please login again.",this.agreeButtonText="logout",this.dialog=!0,this.username_tf=!1})},modulesCompleted(){this.responseUsernameAvailibility.Failure?this.responseUsernameAvailibility.Failure=="Rider already registered at Tookan."?(this.verifyOTP=!1,this.sessionStatus=!1,this.alert_title="Warning",this.alert_description="Account already exists",this.alert_error=null,this.dialog=!0,this.agreeButtonText="logout"):this.responseUsernameAvailibility.Failure=="Account Already On Hubspot"?(this.verifyOTP=!1,this.sessionStatus=!1,this.alert_title="Warning",this.alert_description="Account already exists.",this.dialog=!0,this.agreeButtonText="logout"):this.responseUsernameAvailibility.Failure=="No Account Created."?(this.verifyOTP=!1,this.sessionStatus=!1,this.alert_title="Warning",this.agreeButtonText="logout",this.alert_description="No account created.",this.dialog=!0):(this.verifyOTP=!1,this.sessionStatus=!1,this.alert_title="Warning",this.agreeButtonText="logout",this.alert_description="No account created.",this.dialog=!0):this.responseUsernameAvailibility.Success&&(this.responseUsernameAvailibility.Success?(this.successResponseTitle="Account Created",this.successResponse="Congratulations and welcome to dlivrd."):this.responseUsernameAvailibility.tookan_response&&(this.successResponseTitle="Account Creation Failed",this.successResponse="Account not created successfully."),this.accountCreationResponse())},accountCreationResponse(){this.alert_title=this.successResponseTitle,this.alert_description=this.successResponse,this.alert_error=null,this.dialog=!0,this.verifyNumber=!1,this.tx_number=localStorage.getItem("mobile"),this.agreeButtonText="logout",this.QuestionsIsLoaded=!0},closeDialog(){this.dialog=!1,this.username_tf=null},routeToPage(t){t==1&&this.personalInfo==!1?this.personalInfoTooltip.includes("image")?this.$router.push("/personalDetails"):this.$router.push("/validation"):t==2&&this.documentsInfo==!1?this.$router.push("/documents"):t==3&&this.questionnaireInfo==!1?this.$router.push("/educate"):t==4&&this.bankingInfo==!1?this.$router.push("/validation"):t==5&&this.deliveryInfo==!1?this.$router.push("/deliverylocation"):t==6&&this.availabilityInfo==!1?this.$router.push("/availability"):t==7&&this.vehicleInfo==!1&&this.$router.push("/vehicleandbagdetails")},closeDrawer(){this.drawer=!1}}},Noe=Pe("img",{alt:"Vue logo",class:"logo bgImage",src:_r},null,-1),zoe=["innerHTML"],Voe=["innerHTML"],Uoe=["innerHTML"],joe=["innerHTML"],Hoe=["innerHTML"],Goe=["innerHTML"],Woe=["innerHTML"];function qoe(t,e,i,n,r,a){const c=ue("atom-spinner"),s=ue("v-card"),p=ue("v-card-title"),_=ue("v-card-text"),b=ue("v-text-field"),S=ue("v-spacer"),E=ue("v-btn"),I=ue("v-card-actions"),R=ue("v-dialog"),V=ue("v-row"),q=ue("v-app-bar-nav-icon"),U=ue("v-toolbar-title"),H=ue("v-img"),Z=ue("v-avatar"),ne=ue("v-layout"),ie=ue("v-list-item"),oe=ue("v-list"),pe=ue("v-menu"),de=ue("v-app-bar"),fe=ue("NavigationDrawer"),ge=ue("v-icon"),we=ue("v-tooltip"),Ie=ue("v-col"),Oe=ue("v-main"),ke=ue("v-container");return be(),ti(Oi,null,[r.loadView?We("",!0):(be(),He(s,{key:0,style:{"background-color":"#0adf01",width:"100vw",height:"100vh"}},{default:D(()=>[w(c,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})]),_:1})),r.loadView?(be(),He(s,{key:1,color:"grey-lighten-4",flat:"",style:{"min-height":"100vh","text-align":"-moz-center"},rounded:"0"},{default:D(()=>[Noe,w(V,{justify:"center"},{default:D(()=>[w(R,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[1]||(e[1]=Ee=>r.dialog=Ee),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(s,null,{default:D(()=>[r.loading?We("",!0):(be(),He(c,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01",class:"loading_bar"})),w(p,{class:"text-h5 dialogBoxGreenColor"},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(_,{id:"dialogDescription",class:"dialogBoxDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),r.username_tf?(be(),He(b,{key:1,style:{"margin-left":"20px","margin-right":"20px"},modelValue:r.desiredUsername,"onUpdate:modelValue":e[0]||(e[0]=Ee=>r.desiredUsername=Ee),label:"Enter Username","hide-details":""},null,8,["modelValue"])):We("",!0),r.showError?(be(),He(_,{key:2,class:"dialogBoxError",innerHTML:r.errorMessage},null,8,["innerHTML"])):We("",!0),w(I,{class:"dialogBoxActionButtons"},{default:D(()=>[w(S),r.cancelButtonText=="Cancel"?(be(),He(E,{key:0,"prepend-icon":"mdi-close",class:"dialogBoxGreenColor",variant:"text",onClick:a.closeDialog},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="logout"?(be(),He(E,{key:1,"prepend-icon":"mdi-logout",class:"dialogBoxGreenColor",variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Submit"?(be(),He(E,{key:2,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:a.submitFormConfirmation},{default:D(()=>[ye(" Submit ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Process"?(be(),He(E,{key:3,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:a.enterUsername},{default:D(()=>[ye(" Submit ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Save"?(be(),He(E,{key:4,"prepend-icon":"mdi-check",class:"dialogBoxGreenColor",variant:"text",onClick:a.checkUsernameAvailability},{default:D(()=>[ye(" Save ")]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),w(ke,{fluid:"",class:"mainContainerView"},{default:D(()=>[w(ne,{id:"dashboardView"},{default:D(()=>[w(de,{color:"#0AFD01",class:"top_bar_title",prominent:""},{default:D(()=>[w(q,{variant:"text",onClick:e[2]||(e[2]=zl(Ee=>r.drawer=!r.drawer,["stop"]))}),w(U,{class:"toolbarTitleStyle"},{default:D(()=>[ye("Submit Application")]),_:1}),w(pe,{width:"220px"},{activator:D(({props:Ee})=>[w(E,Mi({icon:""},Ee),{default:D(()=>[w(Z,{class:"accountIcon",size:"38"},{default:D(()=>[w(H,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:2},1040)]),default:D(()=>[w(oe,null,{default:D(()=>[w(ie,null,{default:D(()=>[w(ne,{style:{"justify-content":"center"}},{default:D(()=>[w(Z,{size:"100px",style:{"background-color":"#0AFD01"}},{default:D(()=>[w(H,{src:t.userProfileImage,cover:""},null,8,["src"])]),_:1})]),_:1}),w(p,{style:{"text-align":"center"}},{default:D(()=>[ye(Zt(r.name),1)]),_:1})]),_:1}),w(ie,{"prepend-icon":"mdi-logout",title:"Log Out",value:"logout",onClick:a.logout},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),(be(),He(fe,{badge:r.validationFailed,drawer:r.drawer,key:r.drawer,onCloseNavigationDrawer:a.closeDrawer},null,8,["badge","drawer","onCloseNavigationDrawer"])),w(Oe,null,{default:D(()=>[w(Ie,{md:"4",sm:"12",style:{padding:"0"}},{default:D(()=>[w(s,{color:"grey-lighten-4",flat:"",class:"checklistCardStyle",rounded:"0"},{default:D(()=>[w(p,{style:{"font-weight":"bold","font-size":"24px"}},{default:D(()=>[ye("Registration Checklist")]),_:1}),w(V,{class:Zs([r.questionnaireInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[3]||(e[3]=Ee=>a.routeToPage(3))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Questionnaire")]),_:1}),r.questionnaireInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.questionnaireInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.questionnaireInfoTooltip},null,8,zoe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.personalInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[4]||(e[4]=Ee=>a.routeToPage(1))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Personal Information")]),_:1}),r.personalInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.personalInfo?We("",!0):(be(),He(we,{key:2,style:{"font-size":"32px"},activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.personalInfoTooltip},null,8,Voe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.documentsInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[5]||(e[5]=Ee=>a.routeToPage(2))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Documents")]),_:1}),r.documentsInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.documentsInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.documentsInfoTooltip},null,8,Uoe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.bankingInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[6]||(e[6]=Ee=>a.routeToPage(4))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Banking Information")]),_:1}),r.bankingInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.bankingInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.bankingInfoTooltip},null,8,joe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.deliveryInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[7]||(e[7]=Ee=>a.routeToPage(5))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Delivery Location")]),_:1}),r.deliveryInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.deliveryInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.deliveryInfoTooltip},null,8,Hoe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.availabilityInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[8]||(e[8]=Ee=>a.routeToPage(6))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Preferred Availability")]),_:1}),r.availabilityInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.availabilityInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.availabilityInfoTooltip},null,8,Goe)]),_:1}))]),_:1},8,["class"]),w(V,{class:Zs([r.vehicleInfo?"":"unapproved_block","checklistElementRow"]),onClick:e[9]||(e[9]=Ee=>a.routeToPage(7))},{default:D(()=>[w(p,{class:"checklistTitleStyle"},{default:D(()=>[ye("Vehicle & Bag Details")]),_:1}),r.vehicleInfo&&r.showStatus?(be(),He(ge,{key:0,class:"checklistIconStyle",color:"#0afd01",size:"34"},{default:D(()=>[ye("mdi-check-circle-outline")]),_:1})):r.showStatus?(be(),He(ge,{key:1,class:"checklistIconStyle",color:"#FF0000",size:"34"},{default:D(()=>[ye("mdi-close-circle-outline")]),_:1})):We("",!0),r.vehicleInfo?We("",!0):(be(),He(we,{key:2,activator:"parent",location:"bottom",width:"300px"},{default:D(()=>[Pe("span",{innerHTML:r.vehicleInfoTooltip},null,8,Woe)]),_:1}))]),_:1},8,["class"])]),_:1})]),_:1}),w(E,{"prepend-icon":"mdi-upload",variant:"text",disabled:r.verifyRequirements,class:"submitBtnStyle",onClick:a.submitFormConfirmation},{default:D(()=>[ye(" Apply For Approval ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})):We("",!0)],64)}const Zoe=Kn($oe,[["render",qoe]]);const Yoe={components:{GoogleMap:eh,Marker:Yf},data(){return{center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"Order 165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:100,TravelDistance:14.6},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"}],map:null}},mounted(){this.initMap()},methods:{initMap(){},viewOrderDetails(t){t==1?this.center=this.pickup:this.center=this.drop,console.log("View details for order ID:",t)}}},Xoe={class:"order_view_web"},Koe=Pe("header",{style:{"background-color":"white","border-bottom":"3px #0afd01 solid",height:"8vh"}},[Pe("div",{style:{display:"block",width:"100vw",padding:"10px","text-align":"center"}},[Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"})])],-1),Qoe=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"left","padding-left":"10px",color:"red"}},"0# 48646464",-1),Joe={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},eae=Pe("div",{id:"map",class:"map",style:{display:"none"}},null,-1),tae={class:"order-list",style:{display:"block","padding-top":"10px"}},iae=$g('<div class="order-details" style="width:100% !important;margin-bottom:15px;"><div style="display:inline-flex;justify-content:space-between;width:100%;"><h2 style="font-weight:bold;color:black;">Earning</h2><h2 style="color:black;font-weight:bold;">50 $</h2></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Distance</p><p style="color:black;"><i class="fas fa-clock"></i>14.6 Miles</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Order Value</p><p style="color:black;"><i class="fas fa-map-marker-alt"></i> 205$</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;padding-top:10px;">Partner</p> <img alt="Vue logo" class="logo" style="object-fit:contain;width:150px;" src="'+Vy+'" width="125" height="50"></div></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">DELIVERY ACTIVITY</p></div>',2),nae={class:"delivery_activity"},rae=["onClick"],sae={style:{display:"inline-flex"}},oae={style:{}},aae={key:0,class:"activity_track"},lae=Pe("p",{style:{visibility:"hidden"}},"p",-1),uae=[lae],cae={key:1,class:"activity_track_icon"},dae=Pe("div",{class:"activity_infoblock"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),hae=Pe("div",{class:"activity_track"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),fae={style:{"margin-left":"20px"}},pae={style:{color:"black","font-weight":"bold"}},mae={style:{color:"black"}},gae=Pe("i",{class:"fas fa-clock"},null,-1),_ae={style:{color:"black"}},vae=Pe("i",{class:"fas fa-map-marker-alt"},null,-1),yae=Pe("footer",{style:{"margin-bottom":"20px",height:"10vh"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function bae(t,e,i,n,r,a){const c=ue("Marker"),s=ue("GoogleMap"),p=ue("v-icon");return be(),ti("div",Xoe,[Koe,Qoe,Pe("div",Joe,[Pe("main",null,[eae,w(s,{"api-key":"AIzaSyCxupdlf2THy6HbkYf33JTupUz14AP2plY",class:"map_box",style:{width:"100%",height:"400px"},center:this.center,zoom:12},{default:D(()=>[w(c,{options:this.markerOptionspickup},null,8,["options"]),w(c,{options:this.markerOptionsdrop},null,8,["options"])]),_:1},8,["center"]),Pe("div",tae,[iae,Pe("div",nae,[(be(!0),ti(Oi,null,Zr(r.orders,_=>(be(),ti("div",{onClick:b=>a.viewOrderDetails(_.id),key:_.id,class:"activity_block"},[Pe("div",sae,[Pe("div",oae,[_.id!=1?(be(),ti("div",aae,uae)):We("",!0),_.id==1?(be(),ti("div",cae,[w(p,{color:"#0afd01",style:{"border-radius":"30px",height:"100%"},size:"40"},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1})])):We("",!0),dae,hae]),Pe("div",fae,[Pe("h2",pae,Zt(_.orderNumber),1),Pe("p",mae,[gae,ye(" "+Zt(_.time),1)]),Pe("p",_ae,[vae,ye(" "+Zt(_.address),1)])])])],8,rae))),128))])]),Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[0]||(e[0]=_=>a.viewOrderDetails(1)),style:{"background-color":"red"}},"Decline"),Pe("button",{class:"decision_button",onClick:e[1]||(e[1]=_=>a.viewOrderDetails(2)),style:{"background-color":"green"}},"Interested")])])]),yae])}const xae=Kn(Yoe,[["render",bae]]);const wae={components:{GoogleMap:eh,Marker:Yf},data(){return{center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"Order 165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:100,TravelDistance:14.6},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"}],map:null}},mounted(){this.initMap()},methods:{initMap(){},viewOrderDetails(t){t==1?this.center=this.pickup:this.center=this.drop,console.log("View details for order ID:",t)}}},Tae={id:"header",class:"order_view_webb"},Sae=Pe("h1",{class:"orderNumberStyle"},"0# 48646464",-1),Cae={class:"mainDIV"},kae={class:"order-list"},Eae=$g('<div class="order-details"><div class="orderBenefits"><h2 class="orderBenefitsTextStyle">Earning</h2><h2 class="orderBenefitsTextStyle">50 $</h2></div><div class="orderBenefits"><p class="orderBenefitsTextStyle">Distance</p><p style="color:black;"><i class="fas fa-clock"></i>14.6 Miles</p></div><div class="orderBenefits"><p class="orderBenefitsTextStyle">Order Value</p><p style="color:black;"><i class="fas fa-map-marker-alt"></i> 205$</p></div><div class="orderBenefits"><p class="orderBenefitsPartners">Partner</p> <img alt="Vue logo" class="logo" style="object-fit:contain;width:150px;" src="'+Vy+'" width="125" height="50"></div></div><div class="orderBenefits"><p class="orderBenefitsTextStyle">DELIVERY ACTIVITY</p></div>',2),Iae={class:"delivery_activity"},Pae=["onClick"],Aae={style:{display:"inline-flex"}},Mae={style:{}},Oae={key:0,class:"activity_track"},Lae=Pe("p",{style:{visibility:"hidden"}},"p",-1),Dae=[Lae],Rae={key:1,class:"activity_track_icon"},Bae=Pe("div",{class:"activity_infoblock"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Fae=Pe("div",{class:"activity_track"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),$ae={style:{"margin-left":"20px"}},Nae={class:"orderBenefitsTextStyle"},zae={style:{color:"black"}},Vae=Pe("i",{class:"fas fa-clock"},null,-1),Uae={style:{color:"black"}},jae=Pe("i",{class:"fas fa-map-marker-alt"},null,-1);function Hae(t,e,i,n,r,a){const c=ue("Marker"),s=ue("GoogleMap"),p=ue("v-icon");return be(),ti("div",Tae,[Sae,Pe("div",Cae,[Pe("main",null,[w(s,{"api-key":"AIzaSyCxupdlf2THy6HbkYf33JTupUz14AP2plY",class:"map_box",style:{width:"100%",height:"400px"},center:this.center,zoom:12},{default:D(()=>[w(c,{options:this.markerOptionspickup},null,8,["options"]),w(c,{options:this.markerOptionsdrop},null,8,["options"])]),_:1},8,["center"]),Pe("div",kae,[Eae,Pe("div",Iae,[(be(!0),ti(Oi,null,Zr(r.orders,_=>(be(),ti("div",{onClick:b=>a.viewOrderDetails(_.id),key:_.id,class:"activity_block"},[Pe("div",Aae,[Pe("div",Mae,[_.id!=1?(be(),ti("div",Oae,Dae)):We("",!0),_.id==1?(be(),ti("div",Rae,[w(p,{color:"#0afd01",style:{"border-radius":"30px",height:"100%"},size:"40"},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1})])):We("",!0),Bae,Fae]),Pe("div",$ae,[Pe("h2",Nae,Zt(_.orderNumber),1),Pe("p",zae,[Vae,ye(" "+Zt(_.time),1)]),Pe("p",Uae,[jae,ye(" "+Zt(_.address),1)])])])],8,Pae))),128))])]),Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[0]||(e[0]=_=>a.viewOrderDetails(1)),style:{"background-color":"red"}},"Decline"),Pe("button",{class:"decision_button",onClick:e[1]||(e[1]=_=>a.viewOrderDetails(2)),style:{"background-color":"green"}},"Interested")])])])])}const Gae=Kn(wae,[["render",Hae]]);const Wae={components:{GoogleMap:eh,Marker:Yf,OpenOrderDetails:Gae},data(){return{drawer:!1,center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6},{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St",OName:"Olo",ONumber:"Order 165498498494",PickupLocation:["Tacidekku Cibgress Caterubg"],DueIn:["3 H, 57 m"],NumberOfTask:4,Earning:"100$",TravelDistance:14.6}],map:null,username:null,name:null,alert_title:null,alert_description:null,dialog:!1,agreeButtonText:null,cancelButtonText:null,userProfileImage:null}},beforeMount(){this.username=localStorage.getItem("username"),this.name=localStorage.getItem("name")},mounted(){this.initMap()},methods:{initMap(){},viewOrderDetails(t){t==1?this.center=this.pickup:this.center=this.drop,console.log("View details for order ID:",t)},sessionValidator(){var t=this.baseurl+"onboard_verifySession";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("session_id")}}).then(i=>{if(i.status==200){var n=i.data;this.userProfileImage=this.baseImageurl+n.profile_image}else localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.$router.push("/")}).catch(()=>{this.$router.push("/")})},logout(){this.alert_title="Confirmation",this.alert_description="Are you sure you want to logout? ",this.dialog=!0,this.agreeButtonText="logout",this.cancelButtonText="Cancel"},logoutOnboarding(){var t=this.baseurl+"onboard_logout";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("session_id")}}).then(i=>{var n=i.data;(n.Success||n.Failure)&&(localStorage.setItem("email",""),localStorage.setItem("password",""),localStorage.setItem("username",""),localStorage.setItem("stage",""),localStorage.setItem("country",""),localStorage.setItem("currentStage",""),this.dialog=!1,this.$router.push("/"))}).catch(()=>{this.$router.push("/")})}}},qae={class:"mainPageview"},Zae={style:{"background-color":"white"}},Yae={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"30px 10px 0 10px"}},Xae=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),Kae=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"center",color:"red"}},"OPEN ORDERS 2",-1),Qae={style:{display:"inline-flex",width:"100%"}},Jae={style:{width:"60%"}},ele={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},tle={class:"order-details",style:{padding:"0px !important",margin:"0px!important",width:"100%"}},ile=Pe("p",{style:{color:"black",width:"100%","text-align":"center","font-weight":"bold","background-color":"#0afd01"}},"Earn",-1),nle={style:{color:"black",width:"100%","text-align":"center","font-size":"20px","font-weight":"bold"}},rle={style:{color:"black","font-size":"80%","font-weight":"bold"}},sle={style:{color:"black","font-size":"80%"}},ole={style:{color:"black","font-size":"80%"}},ale={style:{color:"black","font-size":"80%"}},lle={style:{display:"none"}},ule=Pe("div",{id:"map",class:"map",style:{display:"none"}},null,-1),cle=$g('<div class="order-list" style="display:block;padding-top:10px;"><div class="order-details" style="width:100% !important;margin-bottom:15px;"><div style="display:inline-flex;justify-content:space-between;width:100%;"><h2 style="font-weight:bold;color:black;">Price</h2><h2 style="color:black;">257$</h2></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Distance</p><p style="color:black;"><i class="fas fa-clock"></i>14.6 KM</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Earning</p><p style="color:black;"><i class="fas fa-map-marker-alt"></i> 25$</p></div></div></div>',1),dle={style:{width:"40%"}},hle={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},fle=Pe("footer",{style:{"margin-bottom":"20px",height:"10vh",color:"white"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function ple(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-icon"),V=ue("v-col"),q=ue("Marker"),U=ue("GoogleMap"),H=ue("OpenOrderDetails");return be(),ti(Oi,null,[w(I,{justify:"center"},{default:D(()=>[w(E,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[1]||(e[1]=Z=>r.dialog=Z),transition:"dialog-top-transition","max-width":"600px",persistent:""},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.cancelButtonText=="Cancel"?(be(),He(_,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=Z=>r.dialog=!1)},{default:D(()=>[ye(Zt(r.cancelButtonText),1)]),_:1})):We("",!0),r.agreeButtonText=="logout"?(be(),He(_,{key:1,"prepend-icon":"mdi-logout",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logoutOnboarding},{default:D(()=>[ye(" Logout ")]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Pe("div",qae,[Pe("header",Zae,[Pe("div",Yae,[Xae,w(R,{onClick:a.logout,style:{height:"50px",width:"50px"},size:"40"},{default:D(()=>[ye("mdi-logout-variant")]),_:1},8,["onClick"])])]),Kae,Pe("div",Qae,[Pe("div",Jae,[Pe("div",ele,[Pe("main",null,[(be(!0),ti(Oi,null,Zr(r.orders,Z=>(be(),ti("div",{key:Z.id,class:"order-item openjob_block",style:{"background-color":"white"}},[Pe("div",{class:"order-info",style:{width:"100%"},onClick:e[2]||(e[2]=()=>{})},[Pe("div",tle,[w(I,{style:{display:"inline-flex",width:"100%",margin:"0px"}},{default:D(()=>[w(V,{class:"justify-center",style:{padding:"0px",margin:"0px",width:"20% !important","align-self":"center","flex-grow":"0.2"}},{default:D(()=>[ile,Pe("p",nle,Zt(Z.Earning),1)]),_:2},1024),w(V,{style:{padding:"0px",width:"20% !important","border-left":"1px solid #0afd01","margin-right":"5px","padding-left":"6px","padding-top":"5px","padding-bottom":"5px"}},{default:D(()=>[Pe("p",rle,"O# "+Zt(Z.ONumber),1),w(V,{style:{"flex-grow":"0.2",padding:"0px !important"}},{default:D(()=>[Pe("p",sle,[w(R,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-store-clock")]),_:1}),ye(" "+Zt(Z.time),1)]),Pe("p",ole,[w(R,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1}),ye(" "+Zt(Z.address),1)]),Pe("p",ale,[w(R,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1}),ye(" 1 Pickup - 2 Delivery")])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),Pe("button",{onClick:e[3]||(e[3]=ne=>this.$router.push("urgentOrder")),style:{"background-color":"transparent",color:"black","font-weight":"bold","margin-right":"10px"}},[w(R,{style:{"background-color":"transparent","border-radius":"30px",height:"100%",width:"2px"},size:"50"},{default:D(()=>[ye("mdi-chevron-right")]),_:1})])]))),128)),Pe("div",lle,[ule,w(U,{"api-key":"AIzaSyCxupdlf2THy6HbkYf33JTupUz14AP2plY",style:{width:"100%",height:"400px"},center:this.center,zoom:12},{default:D(()=>[w(q,{options:this.markerOptionspickup},null,8,["options"]),w(q,{options:this.markerOptionsdrop},null,8,["options"])]),_:1},8,["center"]),cle,Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[4]||(e[4]=Z=>a.viewOrderDetails(1)),style:{"background-color":"red"}},"Decline"),Pe("button",{class:"decision_button",onClick:e[5]||(e[5]=Z=>a.viewOrderDetails(2)),style:{"background-color":"green"}},"Interested")])])])])]),Pe("div",dle,[Pe("div",hle,[Pe("main",null,[w(H)])])])]),fle])],64)}const mle=Kn(Wae,[["render",ple]]);const gle={components:{AtomSpinner:is},data(){return{username:"",loading:!0,alert_title:null,dialog:!1,alert_description:null,agreeButtonText:null,openOrder:!1,urgentOrder:!1}},mounted(){this.username=localStorage.getItem("on_username"),this.sessionValidator()},methods:{logoutClicked(){this.alert_title="Confirmation",this.alert_description="Do you want to Logout ?",this.dialog=!0,this.agreeButtonText="Logout"},logout(){localStorage.setItem("on_username",""),localStorage.setItem("onboard_session_id",""),this.$router.push("/")},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(localStorage.setItem("profile_image",n.profile_image),this.loading=!1,this.loadSettings()):this.$router.push("/order")}}).catch(i=>{this.$router.push("/order")})},openFeedback(){this.$router.push("/order/feedback")},openSettings(){this.$router.push("/order/settings")},loadSettings(){var t=this.baseurl+"get_rider_openboard_settings";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.urgentOrder=i.data.send_urgent_order_notification,this.openOrder=i.data.send_open_order_notification)}).catch(i=>{this.router.push("/order")})},saveSettings(){var t=this.baseurl+"update_rider_openboard_settings";const e={identity:this.username,send_urgent_order_notification:this.urgentOrder,send_open_order_notification:this.openOrder};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.alert_title="Success",this.alert_description="Settings Updated Successfully!",this.dialog=!0,this.agreeButtonText="Okay")}).catch(i=>{console.log("Error Updating Settings"),console.log(i)})}}},_le={class:"mobile-view"},vle={style:{"background-color":"white"}},yle={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},ble=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),xle=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"center",color:"black"}},"SETTINGS",-1),wle={key:0,style:{width:"100%","text-align":"center",position:"absolute"}},Tle={key:1,style:{"padding-left":"30px","padding-right":"30px","padding-top":"20px",height:"75vh",overflow:"scroll"}},Sle=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. All Rights Reserved.")],-1);function Cle(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-list"),b=ue("v-menu"),S=ue("v-card-title"),E=ue("v-card-text"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-card"),U=ue("v-dialog"),H=ue("v-row"),Z=ue("atom-spinner"),ne=ue("v-switch");return be(),ti("div",_le,[Pe("header",vle,[Pe("div",yle,[ble,w(b,{width:"200",location:"bottom"},{activator:D(({props:ie})=>[w(c,Mi({size:"28",color:"#0afd01",style:{"border-radius":"30px",height:"50px",width:"50px"}},ie),{default:D(()=>[ye(" mdi-dots-vertical ")]),_:2},1040)]),default:D(()=>[w(_,null,{default:D(()=>[w(p,{onClick:a.openFeedback},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-comment-quote-outline")]),_:1}),ye("Feedback ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openSettings},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-cog")]),_:1}),ye("Settings ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.logoutClicked},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{transform:"rotate(180deg)","margin-right":"10px"}},{default:D(()=>[ye("mdi-logout")]),_:1}),ye("Logout ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})])]),w(H,{justify:"center"},{default:D(()=>[w(U,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ie=>r.dialog=ie),transition:"dialog-top-transition","max-width":"350px",persistent:""},{default:D(()=>[w(q,null,{default:D(()=>[w(S,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(E,{id:"dialogDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.agreeButtonText=="Logout"?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ie=>r.dialog=!1)},{default:D(()=>[ye(" No ")]),_:1})):We("",!0),r.agreeButtonText=="Logout"?(be(),He(R,{key:1,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logout},{default:D(()=>[ye(" Yes ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(R,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),xle,r.loading?(be(),ti("div",wle,[w(Z,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),r.loading?We("",!0):(be(),ti("div",Tle,[Pe("main",null,[w(H,{style:{"padding-bottom":"0"}},{default:D(()=>[w(ne,{modelValue:r.urgentOrder,"onUpdate:modelValue":e[3]||(e[3]=ie=>r.urgentOrder=ie),"hide-details":"",inset:"",label:"Receive Urgent Order Notifications",class:"settings",color:"#000000"},null,8,["modelValue"]),w(ne,{modelValue:r.openOrder,"onUpdate:modelValue":e[4]||(e[4]=ie=>r.openOrder=ie),"hide-details":"",inset:"",label:"Receive Open Order Notifications",class:"settings",color:"#000000"},null,8,["modelValue"])]),_:1}),w(H,{style:{"justify-content":"center","margin-top":"40px"}},{default:D(()=>[w(R,{onClick:a.saveSettings},{default:D(()=>[ye(" Save ")]),_:1},8,["onClick"])]),_:1})])])),Sle])}const kle=Kn(gle,[["render",Cle]]);const Ele={components:{TextFieldItem:sm,SignUpHeader:$y,AtomSpinner:is,VueRecaptcha:Gx},data(){return{username:"",dialog:!1,alert_title:"",alert_description:"",loading:!0,otpCode:"",logo:_r,editMobileNumber:!1,captchaToken:null,captchaChecked:!1}},methods:{handleSuccess(t){this.captchaToken=t,this.captchaChecked=!0},handleError(){this.captchaChecked=!1},requestResetPass(){if(this.username=="")this.alert_title="Warning",this.alert_description="Please enter Email Address",this.dialog=!0,this.agreeButtonText="Ok",this.cancelButtonText="Cancel";else{this.loading=!1;var t=this.baseurl+"onboard_forgotPassword";const e={identity:this.username,ttc:"open",captchaKey:this.captchaToken};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;n.Success?(this.alert_title="Success",this.alert_description=n.Success,this.dialog=!0,this.agreeButtonText="Ok"):(this.alert_title="Warning",this.alert_description=n.Failure,this.dialog=!0,this.agreeButtonText="Ok")}}).catch(i=>{})}},confirmOTP(){this.$router.push("/resetPassword")}}},Ile={style:{width:"100%","text-align":"-webkit-center"}};function Ple(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("v-row"),R=ue("v-img"),V=ue("v-col"),q=ue("v-text-field"),U=ue("TextFieldItem"),H=ue("VueRecaptcha"),Z=ue("atom-spinner"),ne=ue("v-container");return be(),He(ne,{"fill-height":"",fluid:"",class:"mainblock"},{default:D(()=>[w(S,null,{default:D(()=>[w(I,{justify:"center"},{default:D(()=>[w(E,{modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ie=>r.dialog=ie),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),r.alert_title=="Success"?(be(),He(_,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):r.alert_title=="Warning"?(be(),He(_,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(I,{style:{"justify-content":"center"}},{default:D(()=>[w(V,{cols:"12",sm:"12",md:"4",style:{"align-self":"center"}},{default:D(()=>[w(V,null,{default:D(()=>[w(R,{src:this.logo},null,8,["src"]),w(s,{style:{color:"white",padding:"0px","text-align":"center","font-size":"40px"}},{default:D(()=>[ye(" Enter Registered Username ")]),_:1})]),_:1}),w(U,null,{heading:D(()=>[ye("dlivrd UserName")]),default:D(()=>[w(q,{"background-color":"black",required:"",modelValue:r.username,"onUpdate:modelValue":e[3]||(e[3]=ie=>r.username=ie),"hide-details":"",readonly:r.editMobileNumber,placeholder:"UserName on dlivrd mobile app","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",type:"text",density:"comfortable",onKeyup:Vl(a.requestResetPass,["enter"])},null,8,["modelValue","readonly","onKeyup"])]),_:1}),w(Nl,{name:"fade",mode:"out-in"},{default:D(()=>[r.editMobileNumber==!0?(be(),He(U,{key:0},{heading:D(()=>[ye("One Time Password")]),default:D(()=>[w(q,{"background-color":"black",required:"",modelValue:r.otpCode,"onUpdate:modelValue":e[4]||(e[4]=ie=>r.otpCode=ie),"hide-details":"",placeholder:"Enter OTP","persistent-placeholder":!0,class:"generic_tx px-1",name:"otp",type:"number",density:"comfortable",onKeyup:Vl(a.confirmOTP,["enter"])},null,8,["modelValue","onKeyup"])]),_:1})):We("",!0)]),_:1}),w(V,{sm:"12",class:"alignCaptcha",style:{"text-align":"center"}},{default:D(()=>[w(H,{style:{"align-items":"center",display:"inline-table"},sitekey:"6Ld7pNAmAAAAAG4qWGWSDntc7Cc4HsywpB2lYvpI","load-recaptcha-script":!0,onVerify:a.handleSuccess,onError:a.handleError},null,8,["onVerify","onError"])]),_:1}),w(V,{"align-self":"center",sm:"12",style:{"text-align":"center","margin-top":"10px"}},{default:D(()=>[r.loading?(be(),He(_,{key:0,"prepend-icon":"mdi-send-variant-outline",class:"btn_green",onClick:a.requestResetPass},{default:D(()=>[ye("Resend")]),_:1},8,["onClick"])):We("",!0),r.loading?(be(),He(_,{key:1,"prepend-icon":"mdi-shield-check",class:"btn_green",style:{"margin-left":"10px"},onClick:a.requestResetPass},{default:D(()=>[ye("Verify")]),_:1},8,["onClick"])):We("",!0),Pe("div",Ile,[r.loading?We("",!0):(be(),He(Z,{key:0,"animation-duration":1e3,size:90,color:"#0AFD01"}))])]),_:1})]),_:1})]),_:1})]),_:1})}const Ale=Kn(Ele,[["render",Ple]]);const Mle={components:{AtomSpinner:is},data(){return{username:"",loading:!0,alert_title:null,dialog:!1,alert_description:null,agreeButtonText:null,allowFeedback:!0,allowFeedbackResponse:null,feedbackQuestions:[{title:"Not enough orders.",value:null},{title:"Earnings are too low.",value:null},{title:"Orders too far away from me.",value:null},{title:"Order mileage too high.",value:null},{title:"Delays in receiving orders to app.",value:null},{title:"Technical Issues.",value:null}],comments:null}},mounted(){this.username=localStorage.getItem("on_username"),this.sessionValidator()},methods:{logoutClicked(){this.alert_title="Confirmation",this.alert_description="Do you want to Logout ?",this.dialog=!0,this.agreeButtonText="Logout"},logout(){localStorage.setItem("on_username",""),localStorage.setItem("onboard_session_id",""),this.$router.push("/")},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(i.status==200){console.log("Session response"),console.log(i);var n=i.data;n.allow_feedback.Failure?(this.allowFeedback=!1,this.allowFeedbackResponse=n.allow_feedback.Failure):n.Success?(localStorage.setItem("profile_image",n.profile_image),this.loading=!1,this.allowFeedback=!0):this.$router.push("/")}}).catch(()=>{this.$router.push("/")})},openOrders(){this.$router.push("/openOrders")},openFeedback(){this.$router.push("/feedback")},openHelp(){this.$router.push("/help")},openSettings(){this.$router.push("/settings")},saveFeedback(){for(var t=[],e=0;e<this.feedbackQuestions.length;e++)this.feedbackQuestions[e].value==!0&&t.push(this.feedbackQuestions[e].title);var i=this.baseurl+"submit_rider_openboard_feedback";const n={identity:this.username,selected_feedback_options:t,detailed_feedback:this.comments};Ai.post(i,n,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(r=>{r.status==200&&(r.data.Success?(this.alert_title="Success",this.alert_description="Thank you for your feedback!",this.dialog=!0,this.agreeButtonText="Okay",this.allowFeedback=!1,this.loading=!0,this.allowFeedbackResponse="Your feedback is under review. You can submit a new feedback after 3 days."):r.data.Failure=="Invalid values"?(this.alert_title="Warning",this.alert_description="Please fill out the feedback form.",this.dialog=!0,this.agreeButtonText="Okay"):(this.alert_title="Warning",this.alert_description=r.data.Failure,this.dialog=!0,this.agreeButtonText="Okay"))}).catch(()=>{this.$router.push("/")})}}},Ole={class:"mobile-view"},Lle={style:{"background-color":"white"}},Dle={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},Rle=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),Ble=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"center",color:"black"}},"FEEDBACK",-1),Fle={key:0,style:{width:"100%","text-align":"center",position:"absolute"}},$le={key:1,style:{"padding-left":"30px","padding-right":"30px","padding-top":"20px",height:"75vh",overflow:"scroll"}},Nle={key:2,style:{"padding-left":"30px","padding-right":"30px","padding-top":"20px",height:"75vh",overflow:"scroll"}},zle=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function Vle(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-list"),b=ue("v-menu"),S=ue("v-card-title"),E=ue("v-card-text"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-card"),U=ue("v-dialog"),H=ue("v-row"),Z=ue("atom-spinner"),ne=ue("v-checkbox"),ie=ue("v-textarea"),oe=Ba("ripple");return be(),ti("div",Ole,[Pe("header",Lle,[Pe("div",Dle,[Rle,w(b,{width:"200",location:"bottom","close-on-content-click":!1},{activator:D(({props:pe})=>[w(c,Mi({size:"28",color:"#0afd01",style:{"border-radius":"30px",height:"50px",width:"50px"}},pe),{default:D(()=>[ye(" mdi-dots-vertical ")]),_:2},1040)]),default:D(()=>[w(_,null,{default:D(()=>[w(p,{onClick:a.openOrders},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1}),ye("Orders ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openSettings},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-cog")]),_:1}),ye("Settings ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openHelp},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-help")]),_:1}),ye("Help ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.logoutClicked},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{transform:"rotate(180deg)","margin-right":"10px"}},{default:D(()=>[ye("mdi-logout")]),_:1}),ye("Logout ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})])]),w(H,{justify:"center"},{default:D(()=>[w(U,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=pe=>r.dialog=pe),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(q,null,{default:D(()=>[w(S,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(E,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.agreeButtonText=="Logout"?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=pe=>r.dialog=!1)},{default:D(()=>[ye(" No ")]),_:1})):We("",!0),r.agreeButtonText=="Logout"?(be(),He(R,{key:1,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logout},{default:D(()=>[ye(" Yes ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(R,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=pe=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Ble,r.loading&&r.allowFeedback?(be(),ti("div",Fle,[w(Z,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),r.allowFeedback?We("",!0):(be(),ti("div",$le,[w(E,{style:{color:"#000000","font-size":"16px"}},{default:D(()=>[ye(Zt(r.allowFeedbackResponse),1)]),_:1})])),w(E,{style:{color:"#000000","font-size":"16px"}},{default:D(()=>[ye("Please help us improve the Open Orders Board by providing feedback about one of these topics.")]),_:1}),!r.loading&&r.allowFeedback?(be(),ti("div",Nle,[Pe("main",null,[(be(!0),ti(Oi,null,Zr(r.feedbackQuestions,pe=>(be(),He(H,{style:{"padding-bottom":"0"}},{default:D(()=>[Br(w(ne,{modelValue:pe.value,"onUpdate:modelValue":de=>pe.value=de,label:pe.title,ripple:!1,class:"feedbackLabel","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),[[oe,void 0,void 0,{stop:!0}]])]),_:2},1024))),256)),w(H,{style:{"padding-left":"5px","padding-right":"5px","margin-top":"30px"}},{default:D(()=>[w(ie,{placeholder:"Enter comments","bg-color":"#0afd01","hide-details":"",modelValue:r.comments,"onUpdate:modelValue":e[3]||(e[3]=pe=>r.comments=pe),class:"commentsTextArea"},null,8,["modelValue"])]),_:1}),w(H,{style:{"justify-content":"center","margin-top":"40px"}},{default:D(()=>[w(R,{onClick:a.saveFeedback},{default:D(()=>[ye(" Save ")]),_:1},8,["onClick"])]),_:1})])])):We("",!0),zle])}const Ule=Kn(Mle,[["render",Vle]]);const jle={components:{AtomSpinner:is},data(){return{username:"",loading:!0,alert_title:null,dialog:!1,alert_description:null,agreeButtonText:null,openOrder:!1,urgentOrder:!1}},mounted(){this.username=localStorage.getItem("on_username"),this.sessionValidator()},methods:{logoutClicked(){this.alert_title="Confirmation",this.alert_description="Do you want to Logout ?",this.dialog=!0,this.agreeButtonText="Logout"},logout(){localStorage.setItem("on_username",""),localStorage.setItem("onboard_session_id",""),this.$router.push("/")},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(localStorage.setItem("profile_image",n.profile_image),this.loadSettings()):this.$router.push("/order")}}).catch(i=>{this.$router.push("/order")})},openFeedback(){this.$router.push("/feedback")},openSettings(){this.$router.push("/settings")},openOrders(){this.$router.push("/openOrders")},loadSettings(){var t=this.baseurl+"get_rider_openboard_settings";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.urgentOrder=i.data.send_urgent_order_notification,this.openOrder=i.data.send_open_order_notification),this.loading=!1}).catch(i=>{this.loading=!1,this.router.push("/order")})},saveSettings(){var t=this.baseurl+"update_rider_openboard_settings";const e={identity:this.username,send_urgent_order_notification:this.urgentOrder,send_open_order_notification:this.openOrder};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.alert_title="Success",this.alert_description="Settings Updated Successfully!",this.dialog=!0,this.agreeButtonText="Okay")}).catch(i=>{console.log("Error Updating Settings"),console.log(i)})}}},Hle={class:"mobile-view"},Gle={style:{"background-color":"white"}},Wle={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},qle=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),Zle=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"center",color:"black"}},"Help",-1),Yle={key:0,style:{width:"100%","text-align":"center",position:"absolute"}},Xle={key:1,style:{"padding-left":"30px","padding-right":"30px","padding-top":"20px",height:"75vh",overflow:"scroll"}},Kle=Pe("h5",{style:{"font-weight":"bold","text-align":"center",color:"black"}},"The dlivrd Open Orders Board is another chance for partners to find and accept delivery opportunities. At 8pm each night, all orders for the next day that are still available will be uploaded onto the board. These orders are available to be claimed, first come, first serve.",-1),Qle=Pe("h4",{style:{"font-weight":"bold",color:"black"}},"Will you still be offering orders by text?",-1),Jle=Pe("h5",{style:{color:"black"}},"Yes! We will continue texting orders just like always but any orders that fail to get accepted will be found on the Open Orders Board. ",-1),eue=Pe("h4",{style:{"font-weight":"bold",color:"black"}},"What happens if I accept an order within the Open Orders Board?",-1),tue=Pe("h5",{style:{color:"black"}},"If you see an order that you want, you can select “Interested”. This will alert the system to send the order to your driver app. You still need to open your app and “Accept” the order. ",-1),iue=Pe("h4",{style:{"font-weight":"bold",color:"black"}},"I clicked interested but the order never came to me - why?",-1),nue=Pe("h5",{style:{color:"black"}},"Many drivers will be interacting with the Open Orders board at the same time. Even though you clicked “Interested” on an order, it’s possible another driver scooped it up first. ",-1),rue=Pe("h4",{style:{"font-weight":"bold",color:"black"}},"There aren’t any orders on the board.",-1),sue=Pe("h5",{style:{color:"black"}},"This means that all of the next day's orders were already accepted. Don’t be discouraged - keep checking the board as you never know when a great order will be waiting! ",-1),oue=Pe("h4",{style:{"font-weight":"bold",color:"black"}},null,-1),aue=Pe("h5",{style:{color:"black"}},null,-1),lue=Pe("h4",{style:{"font-weight":"bold",color:"black"}},null,-1),uue=Pe("h5",{style:{color:"black"}},null,-1),cue=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. All Rights Reserved.")],-1);function due(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-list"),b=ue("v-menu"),S=ue("v-card-title"),E=ue("v-card-text"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-card"),U=ue("v-dialog"),H=ue("v-row"),Z=ue("atom-spinner");return be(),ti("div",Hle,[Pe("header",Gle,[Pe("div",Wle,[qle,w(b,{width:"200",location:"bottom"},{activator:D(({props:ne})=>[w(c,Mi({size:"28",color:"#0afd01",style:{"border-radius":"30px",height:"50px",width:"50px"}},ne),{default:D(()=>[ye(" mdi-dots-vertical ")]),_:2},1040)]),default:D(()=>[w(_,null,{default:D(()=>[w(p,{onClick:a.openOrders},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1}),ye("Orders ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openFeedback},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-comment-quote-outline")]),_:1}),ye("Feedback ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openSettings},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-cog")]),_:1}),ye("Settings ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.logoutClicked},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{transform:"rotate(180deg)","margin-right":"10px"}},{default:D(()=>[ye("mdi-logout")]),_:1}),ye("Logout ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})])]),w(H,{justify:"center"},{default:D(()=>[w(U,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ne=>r.dialog=ne),transition:"dialog-top-transition","max-width":"350px",persistent:""},{default:D(()=>[w(q,null,{default:D(()=>[w(S,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(E,{id:"dialogDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.agreeButtonText=="Logout"?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ne=>r.dialog=!1)},{default:D(()=>[ye(" No ")]),_:1})):We("",!0),r.agreeButtonText=="Logout"?(be(),He(R,{key:1,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logout},{default:D(()=>[ye(" Yes ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(R,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ne=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Zle,r.loading?(be(),ti("div",Yle,[w(Z,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),r.loading?We("",!0):(be(),ti("div",Xle,[Pe("main",null,[w(H,{style:{"padding-bottom":"0"}},{default:D(()=>[Kle]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[Qle,Jle]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[eue,tue]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[iue,nue]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[rue,sue]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[oue,aue]),_:1}),w(H,{style:{"padding-bottom":"0","margin-top":"30px"}},{default:D(()=>[lue,uue]),_:1})])])),cue])}const hue=Kn(jle,[["render",due]]);const fue={components:{AtomSpinner:is},data(){return{username:"",loading:!0,alert_title:null,dialog:!1,alert_description:null,agreeButtonText:null,openOrder:!1,urgentOrder:!1}},mounted(){this.username=localStorage.getItem("on_username"),this.sessionValidator()},methods:{logoutClicked(){this.alert_title="Confirmation",this.alert_description="Do you want to Logout ?",this.dialog=!0,this.agreeButtonText="Logout"},UrgentOrderClicked(){this.urgentOrder&&(this.alert_title="Warning",this.alert_description="You will not receive urgent order sms ",this.dialog=!0,this.agreeButtonText="Okay")},OpenOrderClicked(){this.openOrder&&(this.alert_title="Warning",this.alert_description="You will not receive open order sms ",this.dialog=!0,this.agreeButtonText="Okay")},logout(){localStorage.setItem("on_username",""),localStorage.setItem("onboard_session_id",""),this.$router.push("/")},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success?(localStorage.setItem("profile_image",n.profile_image),this.loadSettings()):this.$router.push("/order")}}).catch(i=>{this.$router.push("/order")})},openFeedback(){this.$router.push("/feedback")},openOrders(){this.$router.push("/openOrders")},openHelp(){this.$router.push("/help")},loadSettings(){var t=this.baseurl+"get_rider_openboard_settings";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.urgentOrder=!i.data.send_urgent_order_notification,this.openOrder=!i.data.send_open_order_notification),this.loading=!1}).catch(i=>{this.loading=!1,this.router.push("/order")})},saveSettings(){var t=this.baseurl+"update_rider_openboard_settings";const e={identity:this.username,send_urgent_order_notification:!this.urgentOrder,send_open_order_notification:!this.openOrder};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success&&(this.alert_title="Success",this.alert_description="Settings Updated Successfully!",this.dialog=!0,this.agreeButtonText="Okay")}).catch(i=>{console.log("Error Updating Settings"),console.log(i)})}}},pue={class:"mobile-view"},mue={style:{"background-color":"white"}},gue={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},_ue=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),vue=Pe("h1",{id:"header",style:{"font-weight":"bold","text-align":"center",color:"black"}},"SETTINGS",-1),yue={key:0,style:{width:"100%","text-align":"center",position:"absolute"}},bue={key:1,style:{"padding-left":"30px","padding-right":"30px","padding-top":"20px",height:"75vh",overflow:"scroll"}},xue=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. All Rights Reserved.")],-1);function wue(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-list"),b=ue("v-menu"),S=ue("v-card-title"),E=ue("v-card-text"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-card"),U=ue("v-dialog"),H=ue("v-row"),Z=ue("atom-spinner"),ne=ue("v-switch");return be(),ti("div",pue,[Pe("header",mue,[Pe("div",gue,[_ue,w(b,{width:"200",location:"bottom"},{activator:D(({props:ie})=>[w(c,Mi({size:"28",color:"#0afd01",style:{"border-radius":"30px",height:"50px",width:"50px"}},ie),{default:D(()=>[ye(" mdi-dots-vertical ")]),_:2},1040)]),default:D(()=>[w(_,null,{default:D(()=>[w(p,{onClick:a.openOrders},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1}),ye("Orders ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openFeedback},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-comment-quote-outline")]),_:1}),ye("Feedback ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openHelp},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-help")]),_:1}),ye("Help ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.logoutClicked},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{transform:"rotate(180deg)","margin-right":"10px"}},{default:D(()=>[ye("mdi-logout")]),_:1}),ye("Logout ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})])]),w(H,{justify:"center"},{default:D(()=>[w(U,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ie=>r.dialog=ie),transition:"dialog-top-transition","max-width":"350px",persistent:""},{default:D(()=>[w(q,null,{default:D(()=>[w(S,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(E,{id:"dialogDescription",innerHTML:r.alert_description},null,8,["innerHTML"]),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.agreeButtonText=="Logout"?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=ie=>r.dialog=!1)},{default:D(()=>[ye(" No ")]),_:1})):We("",!0),r.agreeButtonText=="Logout"?(be(),He(R,{key:1,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logout},{default:D(()=>[ye(" Yes ")]),_:1},8,["onClick"])):We("",!0),r.agreeButtonText=="Okay"?(be(),He(R,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),vue,r.loading?(be(),ti("div",yue,[w(Z,{"animation-duration":1e3,size:90,color:"#ffffff",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),r.loading?We("",!0):(be(),ti("div",bue,[Pe("main",null,[w(H,{style:{"padding-bottom":"0"}},{default:D(()=>[w(ne,{modelValue:r.urgentOrder,"onUpdate:modelValue":e[3]||(e[3]=ie=>r.urgentOrder=ie),"hide-details":"",onChange:a.UrgentOrderClicked,inset:"",label:"Receive Urgent Order Notifications",class:"settings",color:"#000000"},null,8,["modelValue","onChange"]),w(ne,{modelValue:r.openOrder,"onUpdate:modelValue":e[4]||(e[4]=ie=>r.openOrder=ie),"hide-details":"",onChange:a.OpenOrderClicked,inset:"",label:"Receive Open Order Notifications",class:"settings",color:"#000000"},null,8,["modelValue","onChange"])]),_:1}),w(H,{style:{"justify-content":"center","margin-top":"40px"}},{default:D(()=>[w(R,{onClick:a.saveSettings},{default:D(()=>[ye(" Save ")]),_:1},8,["onClick"])]),_:1})])])),xue])}const Tue=Kn(fue,[["render",wue]]);const Sue={components:{TextFieldItem:sm,LoginHeader:Nse,AtomSpinner:is},data(){return{username:"",userPassword:"",dialog:!1,alert_title:"",alert_description:"",showError:!1,logo:_r,errorMessage:null,loading:!0,value:String}},mounted(){localStorage.getItem("first_time_login_message",!0)!="false"&&this.first_time_login_message(),this.checkExistingSession()},methods:{first_time_login_message(){localStorage.setItem("first_time_login_message",!1),this.alert_title="Welcome To Dlivrd Open Board",this.alert_description="This portal will help you to secure an order that has been opened for the Dlivrd Drivers to take. Please use your driver app username to retrieve your account and secure high earning orders.",this.dialog=!0},login(){if(this.username==""&&this.userPassword==""){this.alert_title="Warning",this.alert_description="Email and Password cannot be empty",this.dialog=!0,this.agreeButtonText="Okay";return}else if(this.username==""||this.userPassword==""){this.alert_title="Warning",this.alert_description="Please fill all the fields",this.dialog=!0,this.agreeButtonText="Okay";return}else{this.loading=!1;var t=this.baseurl+"dlivrd_drivers_signin";const e={identity:this.username,password:this.userPassword};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;n.Failure?(this.showError=!0,this.errorMessage=n.Failure):(localStorage.setItem("on_fullname",n.full_name),localStorage.setItem("on_username",n.username),localStorage.setItem("onboard_session_id",n.session_id),this.$router.push("openOrders"))}}).catch(i=>{this.loading=!0,this.showError=!0,this.errorMessage="You are having issues logging in to your account. Please Try Again after 30 minutes."})}},checkExistingSession(){var t=this.baseurl+"dlivrd_drivers_verify_session";if(localStorage.getItem("on_username","")==""||localStorage.getItem("on_username","")==null)return"";const e={identity:localStorage.getItem("on_username"),check:3};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(i.status==200){var n=i.data;n.Success&&(localStorage.setItem("profile_image",n.profile_image),this.$router.push("openOrders"))}}).catch(()=>{}),localStorage.getItem("onboard_session_id")!=""&&this.$router.push("openOrders")}}},Cue=Pe("span",{class:"signUpLink",onclick:"window.parent.location.href= '/AccountRecovery'"},"Retrieve Now!",-1),kue={class:"alignSpinnerCenter"};function Eue(t,e,i,n,r,a){const c=ue("v-card-text"),s=ue("v-icon"),p=ue("v-row"),_=ue("v-card-title"),b=ue("v-spacer"),S=ue("v-btn"),E=ue("v-card-actions"),I=ue("v-card"),R=ue("v-dialog"),V=ue("v-col"),q=ue("v-img"),U=ue("v-text-field"),H=ue("TextFieldItem"),Z=ue("atom-spinner"),ne=ue("v-container");return be(),He(ne,{class:"mainblock",fluid:""},{default:D(()=>[r.showError?(be(),He(p,{key:0,style:{"background-color":"red",position:"absolute",top:"0",width:"100vw","overflow-x":"hidden","z-index":"10","align-items":"center"}},{default:D(()=>[w(c,{style:{"background-color":"red",color:"white","padding-bottom":"6px",width:"90%"}},{default:D(()=>[ye(Zt(r.errorMessage),1)]),_:1}),w(s,{style:{"padding-top":"10px","padding-right":"10px",cursor:"pointer",width:"10%","justify-content":"right"},color:"#ffffff",onClick:e[0]||(e[0]=ie=>r.showError=!1)},{default:D(()=>[ye("mdi-close")]),_:1})]),_:1})):We("",!0),w(p,{class:"mainblock"},{default:D(()=>[w(I,null,{default:D(()=>[w(p,{justify:"center"},{default:D(()=>[w(R,{modelValue:r.dialog,"onUpdate:modelValue":e[3]||(e[3]=ie=>r.dialog=ie),transition:"dialog-top-transition",width:"auto"},{default:D(()=>[w(I,null,{default:D(()=>[w(_,{class:"text-h5",style:{color:"#0adf01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(c,null,{default:D(()=>[ye(Zt(r.alert_description),1)]),_:1}),w(E,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(b),r.alert_title=="Warning"?(be(),He(S,{key:0,style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0),r.alert_title!="Warning"?(be(),He(S,{key:1,style:{"background-color":"#7efb01"},variant:"text",onClick:e[2]||(e[2]=ie=>r.dialog=!1)},{default:D(()=>[ye(" Okay ")]),_:1})):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),w(p,null,{default:D(()=>[w(V,{md:"4"}),w(V,{cols:"12",sm:"12",md:"4","align-self":"center"},{default:D(()=>[w(V,null,{default:D(()=>[w(q,{src:this.logo},null,8,["src"]),w(c,{style:{color:"white",padding:"0px","text-align":"center"}},{default:D(()=>[ye(" Welcome to Open Order Portal ")]),_:1})]),_:1}),w(H,null,{heading:D(()=>[ye("Username")]),default:D(()=>[w(U,{modelValue:r.username,"onUpdate:modelValue":e[4]||(e[4]=ie=>r.username=ie),"background-color":"black",required:"","hide-details":"",placeholder:"Enter Username","persistent-placeholder":!0,class:"generic_tx px-1",name:"login",type:"text",density:"comfortable",onKeyup:Vl(a.login,["enter"]),autocomplete:"new"},null,8,["modelValue","onKeyup"])]),_:1}),w(H,null,{heading:D(()=>[ye("Password")]),default:D(()=>[w(U,{required:"","hide-details":"",modelValue:r.userPassword,"onUpdate:modelValue":e[5]||(e[5]=ie=>r.userPassword=ie),placeholder:"Enter Password","persistent-placeholder":!0,class:"generic_tx px-2",name:"login",value:r.userPassword,"append-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:append":e[6]||(e[6]=()=>r.value=!r.value),type:r.value?"password":"text",density:"comfortable",onKeyup:Vl(a.login,["enter"])},null,8,["modelValue","value","append-icon","type","onKeyup"])]),_:1}),w(V,null,{default:D(()=>[w(c,{style:{color:"white",padding:"0px","text-align":"center"}},{default:D(()=>[ye(" First time logging in? "),Cue]),_:1})]),_:1}),w(V,{"align-self":"center",sm:"12",style:{"text-align":"center"}},{default:D(()=>[r.loading?(be(),He(S,{key:0,"prepend-icon":"mdi-login",class:"btn_green",onClick:a.login},{default:D(()=>[ye("Login")]),_:1},8,["onClick"])):We("",!0),Pe("div",kue,[r.loading?We("",!0):(be(),He(Z,{key:0,"animation-duration":1e3,size:90,color:"#ffffff"}))])]),_:1})]),_:1}),w(V,{md:"4"})]),_:1})]),_:1})]),_:1})}const Iue=Kn(Sue,[["render",Eue]]),Pue="modulepreload",Aue=function(t,e){return new URL(t,e).href},sL={},xs=function(e,i,n){if(!i||i.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(i.map(a=>{if(a=Aue(a,n),a in sL)return;sL[a]=!0;const c=a.endsWith(".css"),s=c?'[rel="stylesheet"]':"";if(!!n)for(let b=r.length-1;b>=0;b--){const S=r[b];if(S.href===a&&(!c||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const _=document.createElement("link");if(_.rel=c?"stylesheet":Pue,c||(_.as="script",_.crossOrigin=""),_.href=a,document.head.appendChild(_),c)return new Promise((b,S)=>{_.addEventListener("load",b),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())},oL=(t,e)=>{for(const i of Object.keys(e))t.on(i,e[i])},v6=t=>{for(const e of Object.keys(t)){const i=t[e];i&&bf(i.cancel)&&i.cancel()}},Mue=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),bf=t=>typeof t=="function",po=(t,e,i)=>{for(const n in i){const r="set"+Mue(n);t[r]?Fi(()=>i[n],(a,c)=>{t[r](a,c)}):e[r]&&Fi(()=>i[n],a=>{e[r](a)})}},Ks=(t,e,i={})=>{const n={...i};for(const r in t){const a=e[r],c=t[r];a&&(a&&a.custom===!0||c!==void 0&&(n[r]=c))}return n},Na=t=>{const e={},i={};for(const n in t)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const r=n.slice(2).toLocaleLowerCase();e[r]=t[n]}else i[n]=t[n];return{listeners:e,attrs:i}},Oue=async t=>{const e=await Promise.all([xs(()=>import("./marker-icon-2x-e148f0f7.js"),[],import.meta.url),xs(()=>import("./marker-icon-d6994ad0.js"),[],import.meta.url),xs(()=>import("./marker-shadow-a7f70f89.js"),[],import.meta.url)]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:e[0].default,iconUrl:e[1].default,shadowUrl:e[2].default})},d1=t=>{const e=lt((...n)=>console.warn(`Method ${t} has been invoked without being replaced`)),i=(...n)=>e.value(...n);return i.wrapped=e,Mn(t,i),i},h1=(t,e)=>t.wrapped.value=e,Fs=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,os=t=>{const e=qi(t);if(e===void 0)throw new Error(`Attempt to inject ${t.description} before it was provided.`);return e},mo=Symbol("useGlobalLeaflet"),fl=Symbol("addLayer"),Qx=Symbol("removeLayer"),Uy=Symbol("registerControl"),y6=Symbol("registerLayerControl"),b6=Symbol("canSetParentHtml"),x6=Symbol("setParentHtml"),w6=Symbol("setIcon"),T6=Symbol("bindPopup"),S6=Symbol("bindTooltip"),C6=Symbol("unbindPopup"),k6=Symbol("unbindTooltip"),jy={options:{type:Object,default:()=>({}),custom:!0}},Hy=t=>({options:t.options,methods:{}}),l_={...jy,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},Gy=(t,e,i)=>{const n=os(fl),r=os(Qx),{options:a,methods:c}=Hy(t),s=Ks(t,l_,a),p=()=>n({leafletObject:e.value}),_=()=>r({leafletObject:e.value}),b={...c,setAttribution(S){_(),e.value.options.attribution=S,t.visible&&p()},setName(){_(),t.visible&&p()},setLayerType(){_(),t.visible&&p()},setVisible(S){e.value&&(S?p():_())},bindPopup(S){if(!e.value||!bf(e.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}e.value.bindPopup(S)},bindTooltip(S){if(!e.value||!bf(e.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}e.value.bindTooltip(S)},unbindTooltip(){e.value&&(bf(e.value.closeTooltip)&&e.value.closeTooltip(),bf(e.value.unbindTooltip)&&e.value.unbindTooltip())},unbindPopup(){e.value&&(bf(e.value.closePopup)&&e.value.closePopup(),bf(e.value.unbindPopup)&&e.value.unbindPopup())},updateVisibleProp(S){i.emit("update:visible",S)}};return Mn(T6,b.bindPopup),Mn(S6,b.bindTooltip),Mn(C6,b.unbindPopup),Mn(k6,b.unbindTooltip),Nf(()=>{b.unbindPopup(),b.unbindTooltip(),_()}),{options:s,methods:b}},th=(t,e)=>{if(t&&e.default)return Ns("div",{style:{display:"none"}},e.default())},E6={...l_,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Lue=(t,e,i)=>{const{options:n,methods:r}=Gy(t,e,i);return{options:Ks(t,E6,n),methods:r}},gE={...E6,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},I6=(t,e,i)=>{const{options:n,methods:r}=Lue(t,e,i),a=Ks(t,gE,n),c=os(Qx),s={...r,setStroke(p){e.value.setStyle({stroke:p})},setColor(p){e.value.setStyle({color:p})},setWeight(p){e.value.setStyle({weight:p})},setOpacity(p){e.value.setStyle({opacity:p})},setLineCap(p){e.value.setStyle({lineCap:p})},setLineJoin(p){e.value.setStyle({lineJoin:p})},setDashArray(p){e.value.setStyle({dashArray:p})},setDashOffset(p){e.value.setStyle({dashOffset:p})},setFill(p){e.value.setStyle({fill:p})},setFillColor(p){e.value.setStyle({fillColor:p})},setFillOpacity(p){e.value.setStyle({fillOpacity:p})},setFillRule(p){e.value.setStyle({fillRule:p})},setClassName(p){e.value.setStyle({className:p})}};return as(()=>{c({leafletObject:e.value})}),{options:a,methods:s}},_E={...gE,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},P6=(t,e,i)=>{const{options:n,methods:r}=I6(t,e,i),a=Ks(t,_E,n),c={...r,setRadius(s){e.value.setRadius(s)},setLatLng(s){e.value.setLatLng(s)}};return{options:a,methods:c}},A6={..._E,radius:{type:Number}},Due=(t,e,i)=>{const{options:n,methods:r}=P6(t,e,i),a=Ks(t,A6,n),c={...r};return{options:a,methods:c}};qn({name:"LCircle",props:A6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=Due(t,i,e);return Fn(async()=>{const{circle:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.latLng,c));const{listeners:_}=Na(e.attrs);i.value.on(_),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});qn({name:"LCircleMarker",props:_E,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=P6(t,i,e);return Fn(async()=>{const{circleMarker:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.latLng,c));const{listeners:_}=Na(e.attrs);i.value.on(_),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});const u_={...jy,position:{type:String}},Wy=(t,e)=>{const{options:i,methods:n}=Hy(t),r=Ks(t,u_,i),a={...n,setPosition(c){e.value&&e.value.setPosition(c)}};return Nf(()=>{e.value&&e.value.remove()}),{options:r,methods:a}},Rue=t=>t.default?Ns("div",{ref:"root"},t.default()):null;qn({name:"LControl",props:{...u_,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,e){const i=lt(),n=lt(),r=qi(mo),a=os(Uy),{options:c,methods:s}=Wy(t,i);return Fn(async()=>{const{Control:p,DomEvent:_}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url),b=p.extend({onAdd(){return n.value}});i.value=Ar(new b(c)),po(s,i.value,t),a({leafletObject:i.value}),t.disableClickPropagation&&n.value&&_.disableClickPropagation(n.value),t.disableScrollPropagation&&n.value&&_.disableScrollPropagation(n.value),Cn(()=>e.emit("ready",i.value))}),{root:n,leafletObject:i}},render(){return Rue(this.$slots)}});const M6={...u_,prefix:{type:String}},Bue=(t,e)=>{const{options:i,methods:n}=Wy(t,e),r=Ks(t,M6,i),a={...n,setPrefix(c){e.value.setPrefix(c)}};return{options:r,methods:a}};qn({name:"LControlAttribution",props:M6,setup(t,e){const i=lt(),n=qi(mo),r=os(Uy),{options:a,methods:c}=Bue(t,i);return Fn(async()=>{const{control:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s.attribution(a)),po(c,i.value,t),r({leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});const O6={...u_,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Fue=(t,e)=>{const{options:i}=Wy(t,e);return{options:Ks(t,O6,i),methods:{addLayer(n){n.layerType==="base"?e.value.addBaseLayer(n.leafletObject,n.name):n.layerType==="overlay"&&e.value.addOverlay(n.leafletObject,n.name)},removeLayer(n){e.value.removeLayer(n.leafletObject)}}}};qn({name:"LControlLayers",props:O6,setup(t,e){const i=lt(),n=qi(mo),r=os(y6),{options:a,methods:c}=Fue(t,i);return Fn(async()=>{const{control:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s.layers(void 0,void 0,a)),po(c,i.value,t),r({...t,...c,leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});const L6={...u_,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},$ue=(t,e)=>{const{options:i,methods:n}=Wy(t,e);return{options:Ks(t,L6,i),methods:n}};qn({name:"LControlScale",props:L6,setup(t,e){const i=lt(),n=qi(mo),r=os(Uy),{options:a,methods:c}=$ue(t,i);return Fn(async()=>{const{control:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s.scale(a)),po(c,i.value,t),r({leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});const D6={...u_,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Nue=(t,e)=>{const{options:i,methods:n}=Wy(t,e);return{options:Ks(t,D6,i),methods:n}};qn({name:"LControlZoom",props:D6,setup(t,e){const i=lt(),n=qi(mo),r=os(Uy),{options:a,methods:c}=Nue(t,i);return Fn(async()=>{const{control:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s.zoom(a)),po(c,i.value,t),r({leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});const Jx={...l_},vE=(t,e,i)=>{const{options:n,methods:r}=Gy(t,e,i),a=Ks(t,Jx,n),c={...r,addLayer(s){e.value.addLayer(s.leafletObject)},removeLayer(s){e.value.removeLayer(s.leafletObject)}};return Mn(fl,c.addLayer),Mn(Qx,c.removeLayer),{options:a,methods:c}},R6={...Jx},zue=(t,e,i)=>{const{options:n,methods:r}=vE(t,e,i),a=Ks(t,R6,n),c={...r};return{options:a,methods:c}};qn({props:R6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{methods:c,options:s}=zue(t,i,e);return Fn(async()=>{const{featureGroup:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(void 0,s));const{listeners:_}=Na(e.attrs);i.value.on(_),po(c,i.value,t),a({...t,...c,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});const B6={...Jx,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},Vue=(t,e,i)=>{const{options:n,methods:r}=vE(t,e,i),a=Ks(t,B6,n);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(a.style=t.optionsStyle);const c={...r,setGeojson(s){e.value.clearLayers(),e.value.addData(s)},setOptionsStyle(s){e.value.setStyle(s)},getGeoJSONData(){return e.value.toGeoJSON()},getBounds(){return e.value.getBounds()}};return{options:a,methods:c}};qn({props:B6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{methods:c,options:s}=Vue(t,i,e);return Fn(async()=>{const{geoJSON:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.geojson,s));const{listeners:_}=Na(e.attrs);i.value.on(_),po(c,i.value,t),a({...t,...c,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});const yE={...l_,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},F6=(t,e,i)=>{const{options:n,methods:r}=Gy(t,e,i),a=Ks(t,yE,n),c={...r,setTileComponent(){var s;(s=e.value)==null||s.redraw()}};return Nf(()=>{e.value.off()}),{options:a,methods:c}},Uue=(t,e,i,n)=>t.extend({initialize(r){this.tileComponents={},this.on("tileunload",this._unloadTile),i.setOptions(this,r)},createTile(r){const a=this._tileCoordsToKey(r);this.tileComponents[a]=e.create("div");const c=Ns({setup:n,props:["coords"]},{coords:r});return V1(c,this.tileComponents[a]),this.tileComponents[a]},_unloadTile(r){const a=this._tileCoordsToKey(r.coords);this.tileComponents[a]&&(this.tileComponents[a].innerHTML="",this.tileComponents[a]=void 0)}});qn({props:{...yE,childRender:{type:Function,required:!0}},setup(t,e){const i=lt(),n=lt(null),r=lt(!1),a=qi(mo),c=os(fl),{options:s,methods:p}=F6(t,i,e);return Fn(async()=>{const{GridLayer:_,DomUtil:b,Util:S}=a?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url),E=Uue(_,b,S,t.childRender);i.value=Ar(new E(s));const{listeners:I}=Na(e.attrs);i.value.on(I),po(p,i.value,t),c({...t,...p,leafletObject:i.value}),r.value=!0,Cn(()=>e.emit("ready",i.value))}),{root:n,ready:r,leafletObject:i}},render(){return this.ready?Ns("div",{style:{display:"none"},ref:"root"}):null}});const aL={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},bE=qn({name:"LIcon",props:{...aL,...jy},setup(t,e){const i=lt(),n=qi(mo),r=os(b6),a=os(x6),c=os(w6);let s,p,_,b,S;const E=(q,U,H)=>{const Z=q&&q.innerHTML;if(!U){H&&S&&r()&&a(Z);return}const{listeners:ne}=Na(e.attrs);S&&p(S,ne);const{options:ie}=Hy(t),oe=Ks(t,aL,ie);Z&&(oe.html=Z),S=oe.html?_(oe):b(oe),s(S,ne),c(S)},I=()=>{Cn(()=>E(i.value,!0,!1))},R=()=>{Cn(()=>E(i.value,!1,!0))},V={setIconUrl:I,setIconRetinaUrl:I,setIconSize:I,setIconAnchor:I,setPopupAnchor:I,setTooltipAnchor:I,setShadowUrl:I,setShadowRetinaUrl:I,setShadowAnchor:I,setBgPos:I,setClassName:I,setHtml:I};return Fn(async()=>{const{DomEvent:q,divIcon:U,icon:H}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);s=q.on,p=q.off,_=U,b=H,po(V,{},t),new MutationObserver(R).observe(i.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),I()}),{root:i}},render(){const t=this.$slots.default?this.$slots.default():void 0;return Ns("div",{ref:"root"},t)}}),$6={...l_,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},jue=(t,e,i)=>{const{options:n,methods:r}=Gy(t,e,i),a=Ks(t,$6,n),c={...r,setOpacity(s){return e.value.setOpacity(s)},setUrl(s){return e.value.setUrl(s)},setBounds(s){return e.value.setBounds(s)},getBounds(){return e.value.getBounds()},getElement(){return e.value.getElement()},bringToFront(){return e.value.bringToFront()},bringToBack(){return e.value.bringToBack()},setZIndex(s){return e.value.setZIndex(s)}};return{options:a,methods:c}};qn({name:"LImageOverlay",props:$6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=jue(t,i,e);return Fn(async()=>{const{imageOverlay:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.url,t.bounds,c));const{listeners:_}=Na(e.attrs);i.value.on(_),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});qn({props:Jx,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{methods:c}=vE(t,i,e);return Fn(async()=>{const{layerGroup:s}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s(void 0,t.options));const{listeners:p}=Na(e.attrs);i.value.on(p),po(c,i.value,t),a({...t,...c,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});function N6(t,e,i){var n,r,a;e===void 0&&(e=50),i===void 0&&(i={});var c=(n=i.isImmediate)!=null&&n,s=(r=i.callback)!=null&&r,p=i.maxWait,_=Date.now(),b=[];function S(){if(p!==void 0){var I=Date.now()-_;if(I+e>=p)return p-I}return e}var E=function(){var I=[].slice.call(arguments),R=this;return new Promise(function(V,q){var U=c&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,_=Date.now(),!c){var Z=t.apply(R,I);s&&s(Z),b.forEach(function(ne){return(0,ne.resolve)(Z)}),b=[]}},S()),U){var H=t.apply(R,I);return s&&s(H),V(H)}b.push({resolve:V,reject:q})})};return E.cancel=function(I){a!==void 0&&clearTimeout(a),b.forEach(function(R){return(0,R.reject)(I)}),b=[]},E}const lL={...jy,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},xE=qn({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:lL,setup(t,e){const i=lt(),n=Bo({ready:!1,layersToAdd:[],layersInControl:[]}),{options:r}=Hy(t),a=Ks(t,lL,r),{listeners:c,attrs:s}=Na(e.attrs),p=d1(fl),_=d1(Qx),b=d1(Uy),S=d1(y6);Mn(mo,t.useGlobalLeaflet);const E=Me(()=>{const U={};return t.noBlockingAnimations&&(U.animate=!1),U}),I=Me(()=>{const U=E.value;return t.padding&&(U.padding=t.padding),t.paddingTopLeft&&(U.paddingTopLeft=t.paddingTopLeft),t.paddingBottomRight&&(U.paddingBottomRight=t.paddingBottomRight),U}),R={moveend:N6(U=>{n.leafletRef&&(e.emit("update:zoom",n.leafletRef.getZoom()),e.emit("update:center",n.leafletRef.getCenter()),e.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(U){const H=n.layersInControl.find(Z=>Z.name===U.name);H&&H.updateVisibleProp(!0)},overlayremove(U){const H=n.layersInControl.find(Z=>Z.name===U.name);H&&H.updateVisibleProp(!1)}};Fn(async()=>{t.useGlobalLeaflet&&(Fs.L=Fs.L||await xs(()=>Promise.resolve().then(()=>nce),void 0,import.meta.url));const{map:U,CRS:H,Icon:Z,latLngBounds:ne,latLng:ie,stamp:oe}=t.useGlobalLeaflet?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);try{a.beforeMapMount&&await a.beforeMapMount()}catch(fe){console.error(`The following error occurred running the provided beforeMapMount hook ${fe.message}`)}await Oue(Z);const pe=typeof a.crs=="string"?H[a.crs]:a.crs;a.crs=pe||H.EPSG3857;const de={addLayer(fe){fe.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(fe):n.layersInControl.find(ge=>oe(ge.leafletObject)===oe(fe.leafletObject))||(n.layerControl.addLayer(fe),n.layersInControl.push(fe))),fe.visible!==!1&&n.leafletRef.addLayer(fe.leafletObject)},removeLayer(fe){fe.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(ge=>ge.name!==fe.name):(n.layerControl.removeLayer(fe.leafletObject),n.layersInControl=n.layersInControl.filter(ge=>oe(ge.leafletObject)!==oe(fe.leafletObject)))),n.leafletRef.removeLayer(fe.leafletObject)},registerLayerControl(fe){n.layerControl=fe,n.layersToAdd.forEach(ge=>{n.layerControl.addLayer(ge)}),n.layersToAdd=[],b(fe)},registerControl(fe){n.leafletRef.addControl(fe.leafletObject)},setZoom(fe){const ge=n.leafletRef.getZoom();fe!==ge&&n.leafletRef.setZoom(fe,E.value)},setCrs(fe){const ge=n.leafletRef.getBounds();n.leafletRef.options.crs=fe,n.leafletRef.fitBounds(ge,{animate:!1,padding:[0,0]})},fitBounds(fe){n.leafletRef.fitBounds(fe,I.value)},setBounds(fe){if(!fe)return;const ge=ne(fe);ge.isValid()&&!(n.lastSetBounds||n.leafletRef.getBounds()).equals(ge,0)&&(n.lastSetBounds=ge,n.leafletRef.fitBounds(ge))},setCenter(fe){if(fe==null)return;const ge=ie(fe),we=n.lastSetCenter||n.leafletRef.getCenter();(we.lat!==ge.lat||we.lng!==ge.lng)&&(n.lastSetCenter=ge,n.leafletRef.panTo(ge,E.value))}};h1(p,de.addLayer),h1(_,de.removeLayer),h1(b,de.registerControl),h1(S,de.registerLayerControl),n.leafletRef=Ar(U(i.value,a)),po(de,n.leafletRef,t),oL(n.leafletRef,R),oL(n.leafletRef,c),n.ready=!0,Cn(()=>e.emit("ready",n.leafletRef))}),as(()=>{v6(R),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const V=Me(()=>n.leafletRef),q=Me(()=>n.ready);return{root:i,ready:q,leafletObject:V,attrs:s}},render({attrs:t}){return t.style||(t.style={}),t.style.width||(t.style.width="100%"),t.style.height||(t.style.height="100%"),Ns("div",{...t,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Hue=["Symbol(Comment)","Symbol(Text)"],Gue=["LTooltip","LPopup"],z6={...l_,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Wue=(t,e,i)=>{const{options:n,methods:r}=Gy(t,e,i),a=Ks(t,z6,n),c={...r,setDraggable(s){e.value.dragging&&(s?e.value.dragging.enable():e.value.dragging.disable())},latLngSync(s){i.emit("update:latLng",s.latlng),i.emit("update:lat-lng",s.latlng)},setLatLng(s){if(s!=null&&e.value){const p=e.value.getLatLng();(!p||!p.equals(s))&&e.value.setLatLng(s)}}};return{options:a,methods:c}},que=(t,e)=>{const i=e.slots.default&&e.slots.default();return i&&i.length&&i.some(Zue)};function Zue(t){return!(Hue.includes(t.type.toString())||Gue.includes(t.type.name))}const wE=qn({name:"LMarker",props:z6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl);Mn(b6,()=>{var _;return!!((_=i.value)!=null&&_.getElement())}),Mn(x6,_=>{var b,S;const E=bf((b=i.value)==null?void 0:b.getElement)&&((S=i.value)==null?void 0:S.getElement());E&&(E.innerHTML=_)}),Mn(w6,_=>{var b;return((b=i.value)==null?void 0:b.setIcon)&&i.value.setIcon(_)});const{options:c,methods:s}=Wue(t,i,e),p={moveHandler:N6(s.latLngSync)};return Fn(async()=>{const{marker:_,divIcon:b}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);que(c,e)&&(c.icon=b({className:""})),i.value=Ar(_(t.latLng,c));const{listeners:S}=Na(e.attrs);i.value.on(S),i.value.on("move",p.moveHandler),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),as(()=>v6(p)),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}}),TE={...gE,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},V6=(t,e,i)=>{const{options:n,methods:r}=I6(t,e,i),a=Ks(t,TE,n),c={...r,setSmoothFactor(s){e.value.setStyle({smoothFactor:s})},setNoClip(s){e.value.setStyle({noClip:s})},addLatLng(s){e.value.addLatLng(s)}};return{options:a,methods:c}},Mb={...TE},U6=(t,e,i)=>{const{options:n,methods:r}=V6(t,e,i),a=Ks(t,Mb,n),c={...r,toGeoJSON(s){return e.value.toGeoJSON(s)}};return{options:a,methods:c}};qn({name:"LPolygon",props:Mb,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=U6(t,i,e);return Fn(async()=>{const{polygon:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.latLngs,c));const{listeners:_}=Na(e.attrs);i.value.on(_),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});const SE=qn({name:"LPolyline",props:TE,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=V6(t,i,e);return Fn(async()=>{const{polyline:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(t.latLngs,c));const{listeners:_}=Na(e.attrs);i.value.on(_),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}}),j6={...jy,content:{type:String,default:null}},H6=(t,e)=>{const{options:i,methods:n}=Hy(t),r={...n,setContent(a){e.value&&a!==null&&a!==void 0&&e.value.setContent(a)}};return{options:i,methods:r}},G6=t=>t.default?Ns("div",{ref:"root"},t.default()):null,Yue={...j6,latLng:{type:[Object,Array],default:()=>[]}},Xue=(t,e)=>{const{options:i,methods:n}=H6(t,e);return{options:i,methods:n}},CE=qn({name:"LPopup",props:Yue,setup(t,e){const i=lt(),n=lt(null),r=qi(mo),a=os(T6),c=os(C6),{options:s,methods:p}=Xue(t,i);return Fn(async()=>{const{popup:_}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(_(s)),t.latLng!==void 0&&i.value.setLatLng(t.latLng),po(p,i.value,t);const{listeners:b}=Na(e.attrs);i.value.on(b),i.value.setContent(t.content||n.value||""),a(i.value),Cn(()=>e.emit("ready",i.value))}),as(()=>{c()}),{root:n,leafletObject:i}},render(){return G6(this.$slots)}}),W6={...Mb,latLngs:{...Mb.latLngs,required:!1},bounds:{type:Object,custom:!0}},Kue=(t,e,i)=>{const{options:n,methods:r}=U6(t,e,i),a=Ks(t,W6,n),c={...r,setBounds(s){e.value.setBounds(s)},setLatLngs(s){e.value.setBounds(s)}};return{options:a,methods:c}};qn({name:"LRectangle",props:W6,setup(t,e){const i=lt(),n=lt(!1),r=qi(mo),a=os(fl),{options:c,methods:s}=Kue(t,i,e);return Fn(async()=>{const{rectangle:p,latLngBounds:_}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url),b=t.bounds?_(t.bounds):_(t.latLngs||[]);i.value=Ar(p(b,c));const{listeners:S}=Na(e.attrs);i.value.on(S),po(s,i.value,t),a({...t,...s,leafletObject:i.value}),n.value=!0,Cn(()=>e.emit("ready",i.value))}),{ready:n,leafletObject:i}},render(){return th(this.ready,this.$slots)}});const kE={...yE,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(e=>typeof e=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},q6=(t,e,i)=>{const{options:n,methods:r}=F6(t,e,i),a=Ks(t,kE,n),c={...r};return{options:a,methods:c}},EE=qn({props:kE,setup(t,e){const i=lt(),n=qi(mo),r=os(fl),{options:a,methods:c}=q6(t,i,e);return Fn(async()=>{const{tileLayer:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s(t.url,a));const{listeners:p}=Na(e.attrs);i.value.on(p),po(c,i.value,t),r({...t,...c,leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}}),Que={...j6},Jue=(t,e)=>{const{options:i,methods:n}=H6(t,e),r=os(k6);return as(()=>{r()}),{options:i,methods:n}};qn({name:"LTooltip",props:Que,setup(t,e){const i=lt(),n=lt(null),r=qi(mo),a=os(S6),{options:c,methods:s}=Jue(t,i);return Fn(async()=>{const{tooltip:p}=r?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(p(c)),po(s,i.value,t);const{listeners:_}=Na(e.attrs);i.value.on(_),i.value.setContent(t.content||n.value||""),a(i.value),Cn(()=>e.emit("ready",i.value))}),{root:n,leafletObject:i}},render(){return G6(this.$slots)}});const Z6={...kE,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},ece=(t,e,i)=>{const{options:n,methods:r}=q6(t,e,i);return{options:Ks(t,Z6,n),methods:{...r}}};qn({props:Z6,setup(t,e){const i=lt(),n=qi(mo),r=os(fl),{options:a,methods:c}=ece(t,i,e);return Fn(async()=>{const{tileLayer:s}=n?Fs.L:await xs(()=>import("./leaflet-src.esm-9c358b30.js"),[],import.meta.url);i.value=Ar(s.wms(t.url,a));const{listeners:p}=Na(e.attrs);i.value.on(p),po(c,i.value,t),r({...t,...c,leafletObject:i.value}),Cn(()=>e.emit("ready",i.value))}),{leafletObject:i}},render(){return null}});const IE=""+new URL("mappickup-bebf3327.png",import.meta.url).href,PE=""+new URL("mapdropoff-0b0807ad.png",import.meta.url).href;var sd={},tce={get exports(){return sd},set exports(t){sd=t}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(i,n){n(e)})(_g,function(i){var n="1.9.4";function r(h){var v,P,z,X;for(P=1,z=arguments.length;P<z;P++){X=arguments[P];for(v in X)h[v]=X[v]}return h}var a=Object.create||function(){function h(){}return function(v){return h.prototype=v,new h}}();function c(h,v){var P=Array.prototype.slice;if(h.bind)return h.bind.apply(h,P.call(arguments,1));var z=P.call(arguments,2);return function(){return h.apply(v,z.length?z.concat(P.call(arguments)):arguments)}}var s=0;function p(h){return"_leaflet_id"in h||(h._leaflet_id=++s),h._leaflet_id}function _(h,v,P){var z,X,ce,Se;return Se=function(){z=!1,X&&(ce.apply(P,X),X=!1)},ce=function(){z?X=arguments:(h.apply(P,arguments),setTimeout(Se,v),z=!0)},ce}function b(h,v,P){var z=v[1],X=v[0],ce=z-X;return h===z&&P?h:((h-X)%ce+ce)%ce+X}function S(){return!1}function E(h,v){if(v===!1)return h;var P=Math.pow(10,v===void 0?6:v);return Math.round(h*P)/P}function I(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function R(h){return I(h).split(/\s+/)}function V(h,v){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?a(h.options):{});for(var P in v)h.options[P]=v[P];return h.options}function q(h,v,P){var z=[];for(var X in h)z.push(encodeURIComponent(P?X.toUpperCase():X)+"="+encodeURIComponent(h[X]));return(!v||v.indexOf("?")===-1?"?":"&")+z.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function H(h,v){return h.replace(U,function(P,z){var X=v[z];if(X===void 0)throw new Error("No value provided for variable "+P);return typeof X=="function"&&(X=X(v)),X})}var Z=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function ne(h,v){for(var P=0;P<h.length;P++)if(h[P]===v)return P;return-1}var ie="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function oe(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var pe=0;function de(h){var v=+new Date,P=Math.max(0,16-(v-pe));return pe=v+P,window.setTimeout(h,P)}var fe=window.requestAnimationFrame||oe("RequestAnimationFrame")||de,ge=window.cancelAnimationFrame||oe("CancelAnimationFrame")||oe("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function we(h,v,P){if(P&&fe===de)h.call(v);else return fe.call(window,c(h,v))}function Ie(h){h&&ge.call(window,h)}var Oe={__proto__:null,extend:r,create:a,bind:c,get lastId(){return s},stamp:p,throttle:_,wrapNum:b,falseFn:S,formatNum:E,trim:I,splitWords:R,setOptions:V,getParamString:q,template:H,isArray:Z,indexOf:ne,emptyImageUrl:ie,requestFn:fe,cancelFn:ge,requestAnimFrame:we,cancelAnimFrame:Ie};function ke(){}ke.extend=function(h){var v=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=v.__super__=this.prototype,z=a(P);z.constructor=v,v.prototype=z;for(var X in this)Object.prototype.hasOwnProperty.call(this,X)&&X!=="prototype"&&X!=="__super__"&&(v[X]=this[X]);return h.statics&&r(v,h.statics),h.includes&&(Ee(h.includes),r.apply(null,[z].concat(h.includes))),r(z,h),delete z.statics,delete z.includes,z.options&&(z.options=P.options?a(P.options):{},r(z.options,h.options)),z._initHooks=[],z.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var ce=0,Se=z._initHooks.length;ce<Se;ce++)z._initHooks[ce].call(this)}},v},ke.include=function(h){var v=this.prototype.options;return r(this.prototype,h),h.options&&(this.prototype.options=v,this.mergeOptions(h.options)),this},ke.mergeOptions=function(h){return r(this.prototype.options,h),this},ke.addInitHook=function(h){var v=Array.prototype.slice.call(arguments,1),P=typeof h=="function"?h:function(){this[h].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function Ee(h){if(!(typeof L>"u"||!L||!L.Mixin)){h=Z(h)?h:[h];for(var v=0;v<h.length;v++)h[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(h,v,P){if(typeof h=="object")for(var z in h)this._on(z,h[z],v);else{h=R(h);for(var X=0,ce=h.length;X<ce;X++)this._on(h[X],v,P)}return this},off:function(h,v,P){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var z in h)this._off(z,h[z],v);else{h=R(h);for(var X=arguments.length===1,ce=0,Se=h.length;ce<Se;ce++)X?this._off(h[ce]):this._off(h[ce],v,P)}return this},_on:function(h,v,P,z){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(h,v,P)===!1){P===this&&(P=void 0);var X={fn:v,ctx:P};z&&(X.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(X)}},_off:function(h,v,P){var z,X,ce;if(this._events&&(z=this._events[h],!!z)){if(arguments.length===1){if(this._firingCount)for(X=0,ce=z.length;X<ce;X++)z[X].fn=S;delete this._events[h];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var Se=this._listens(h,v,P);if(Se!==!1){var je=z[Se];this._firingCount&&(je.fn=S,this._events[h]=z=z.slice()),z.splice(Se,1)}}},fire:function(h,v,P){if(!this.listens(h,P))return this;var z=r({},v,{type:h,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var X=this._events[h];if(X){this._firingCount=this._firingCount+1||1;for(var ce=0,Se=X.length;ce<Se;ce++){var je=X[ce],bt=je.fn;je.once&&this.off(h,bt,je.ctx),bt.call(je.ctx||this,z)}this._firingCount--}}return P&&this._propagateEvent(z),this},listens:function(h,v,P,z){typeof h!="string"&&console.warn('"string" type argument expected');var X=v;typeof v!="function"&&(z=!!v,X=void 0,P=void 0);var ce=this._events&&this._events[h];if(ce&&ce.length&&this._listens(h,X,P)!==!1)return!0;if(z){for(var Se in this._eventParents)if(this._eventParents[Se].listens(h,v,P,z))return!0}return!1},_listens:function(h,v,P){if(!this._events)return!1;var z=this._events[h]||[];if(!v)return!!z.length;P===this&&(P=void 0);for(var X=0,ce=z.length;X<ce;X++)if(z[X].fn===v&&z[X].ctx===P)return X;return!1},once:function(h,v,P){if(typeof h=="object")for(var z in h)this._on(z,h[z],v,!0);else{h=R(h);for(var X=0,ce=h.length;X<ce;X++)this._on(h[X],v,P,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[p(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[p(h)],this},_propagateEvent:function(h){for(var v in this._eventParents)this._eventParents[v].fire(h.type,r({layer:h.target,propagatedFrom:h.target},h),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var gt=ke.extend(Qe);function nt(h,v,P){this.x=P?Math.round(h):h,this.y=P?Math.round(v):v}var ft=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};nt.prototype={clone:function(){return new nt(this.x,this.y)},add:function(h){return this.clone()._add(Tt(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(Tt(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new nt(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new nt(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ft(this.x),this.y=ft(this.y),this},distanceTo:function(h){h=Tt(h);var v=h.x-this.x,P=h.y-this.y;return Math.sqrt(v*v+P*P)},equals:function(h){return h=Tt(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=Tt(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function Tt(h,v,P){return h instanceof nt?h:Z(h)?new nt(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new nt(h.x,h.y):new nt(h,v,P)}function pt(h,v){if(h)for(var P=v?[h,v]:h,z=0,X=P.length;z<X;z++)this.extend(P[z])}pt.prototype={extend:function(h){var v,P;if(!h)return this;if(h instanceof nt||typeof h[0]=="number"||"x"in h)v=P=Tt(h);else if(h=et(h),v=h.min,P=h.max,!v||!P)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=P.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(h){return Tt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return Tt(this.min.x,this.max.y)},getTopRight:function(){return Tt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var v,P;return typeof h[0]=="number"||h instanceof nt?h=Tt(h):h=et(h),h instanceof pt?(v=h.min,P=h.max):v=P=h,v.x>=this.min.x&&P.x<=this.max.x&&v.y>=this.min.y&&P.y<=this.max.y},intersects:function(h){h=et(h);var v=this.min,P=this.max,z=h.min,X=h.max,ce=X.x>=v.x&&z.x<=P.x,Se=X.y>=v.y&&z.y<=P.y;return ce&&Se},overlaps:function(h){h=et(h);var v=this.min,P=this.max,z=h.min,X=h.max,ce=X.x>v.x&&z.x<P.x,Se=X.y>v.y&&z.y<P.y;return ce&&Se},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var v=this.min,P=this.max,z=Math.abs(v.x-P.x)*h,X=Math.abs(v.y-P.y)*h;return et(Tt(v.x-z,v.y-X),Tt(P.x+z,P.y+X))},equals:function(h){return h?(h=et(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function et(h,v){return!h||h instanceof pt?h:new pt(h,v)}function Mt(h,v){if(h)for(var P=v?[h,v]:h,z=0,X=P.length;z<X;z++)this.extend(P[z])}Mt.prototype={extend:function(h){var v=this._southWest,P=this._northEast,z,X;if(h instanceof Fe)z=h,X=h;else if(h instanceof Mt){if(z=h._southWest,X=h._northEast,!z||!X)return this}else return h?this.extend(tt(h)||Qt(h)):this;return!v&&!P?(this._southWest=new Fe(z.lat,z.lng),this._northEast=new Fe(X.lat,X.lng)):(v.lat=Math.min(z.lat,v.lat),v.lng=Math.min(z.lng,v.lng),P.lat=Math.max(X.lat,P.lat),P.lng=Math.max(X.lng,P.lng)),this},pad:function(h){var v=this._southWest,P=this._northEast,z=Math.abs(v.lat-P.lat)*h,X=Math.abs(v.lng-P.lng)*h;return new Mt(new Fe(v.lat-z,v.lng-X),new Fe(P.lat+z,P.lng+X))},getCenter:function(){return new Fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof Fe||"lat"in h?h=tt(h):h=Qt(h);var v=this._southWest,P=this._northEast,z,X;return h instanceof Mt?(z=h.getSouthWest(),X=h.getNorthEast()):z=X=h,z.lat>=v.lat&&X.lat<=P.lat&&z.lng>=v.lng&&X.lng<=P.lng},intersects:function(h){h=Qt(h);var v=this._southWest,P=this._northEast,z=h.getSouthWest(),X=h.getNorthEast(),ce=X.lat>=v.lat&&z.lat<=P.lat,Se=X.lng>=v.lng&&z.lng<=P.lng;return ce&&Se},overlaps:function(h){h=Qt(h);var v=this._southWest,P=this._northEast,z=h.getSouthWest(),X=h.getNorthEast(),ce=X.lat>v.lat&&z.lat<P.lat,Se=X.lng>v.lng&&z.lng<P.lng;return ce&&Se},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,v){return h?(h=Qt(h),this._southWest.equals(h.getSouthWest(),v)&&this._northEast.equals(h.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Qt(h,v){return h instanceof Mt?h:new Mt(h,v)}function Fe(h,v,P){if(isNaN(h)||isNaN(v))throw new Error("Invalid LatLng object: ("+h+", "+v+")");this.lat=+h,this.lng=+v,P!==void 0&&(this.alt=+P)}Fe.prototype={equals:function(h,v){if(!h)return!1;h=tt(h);var P=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return P<=(v===void 0?1e-9:v)},toString:function(h){return"LatLng("+E(this.lat,h)+", "+E(this.lng,h)+")"},distanceTo:function(h){return Xt.distance(this,tt(h))},wrap:function(){return Xt.wrapLatLng(this)},toBounds:function(h){var v=180*h/40075017,P=v/Math.cos(Math.PI/180*this.lat);return Qt([this.lat-v,this.lng-P],[this.lat+v,this.lng+P])},clone:function(){return new Fe(this.lat,this.lng,this.alt)}};function tt(h,v,P){return h instanceof Fe?h:Z(h)&&typeof h[0]!="object"?h.length===3?new Fe(h[0],h[1],h[2]):h.length===2?new Fe(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new Fe(h.lat,"lng"in h?h.lng:h.lon,h.alt):v===void 0?null:new Fe(h,v,P)}var Rt={latLngToPoint:function(h,v){var P=this.projection.project(h),z=this.scale(v);return this.transformation._transform(P,z)},pointToLatLng:function(h,v){var P=this.scale(v),z=this.transformation.untransform(h,P);return this.projection.unproject(z)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var v=this.projection.bounds,P=this.scale(h),z=this.transformation.transform(v.min,P),X=this.transformation.transform(v.max,P);return new pt(z,X)},infinite:!1,wrapLatLng:function(h){var v=this.wrapLng?b(h.lng,this.wrapLng,!0):h.lng,P=this.wrapLat?b(h.lat,this.wrapLat,!0):h.lat,z=h.alt;return new Fe(P,v,z)},wrapLatLngBounds:function(h){var v=h.getCenter(),P=this.wrapLatLng(v),z=v.lat-P.lat,X=v.lng-P.lng;if(z===0&&X===0)return h;var ce=h.getSouthWest(),Se=h.getNorthEast(),je=new Fe(ce.lat-z,ce.lng-X),bt=new Fe(Se.lat-z,Se.lng-X);return new Mt(je,bt)}},Xt=r({},Rt,{wrapLng:[-180,180],R:6371e3,distance:function(h,v){var P=Math.PI/180,z=h.lat*P,X=v.lat*P,ce=Math.sin((v.lat-h.lat)*P/2),Se=Math.sin((v.lng-h.lng)*P/2),je=ce*ce+Math.cos(z)*Math.cos(X)*Se*Se,bt=2*Math.atan2(Math.sqrt(je),Math.sqrt(1-je));return this.R*bt}}),Ei=6378137,Ni={R:Ei,MAX_LATITUDE:85.0511287798,project:function(h){var v=Math.PI/180,P=this.MAX_LATITUDE,z=Math.max(Math.min(P,h.lat),-P),X=Math.sin(z*v);return new nt(this.R*h.lng*v,this.R*Math.log((1+X)/(1-X))/2)},unproject:function(h){var v=180/Math.PI;return new Fe((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*v,h.x*v/this.R)},bounds:function(){var h=Ei*Math.PI;return new pt([-h,-h],[h,h])}()};function Vi(h,v,P,z){if(Z(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=v,this._c=P,this._d=z}Vi.prototype={transform:function(h,v){return this._transform(h.clone(),v)},_transform:function(h,v){return v=v||1,h.x=v*(this._a*h.x+this._b),h.y=v*(this._c*h.y+this._d),h},untransform:function(h,v){return v=v||1,new nt((h.x/v-this._b)/this._a,(h.y/v-this._d)/this._c)}};function Ve(h,v,P,z){return new Vi(h,v,P,z)}var dt=r({},Xt,{code:"EPSG:3857",projection:Ni,transformation:function(){var h=.5/(Math.PI*Ni.R);return Ve(h,.5,-h,.5)}()}),kt=r({},dt,{code:"EPSG:900913"});function Xe(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function it(h,v){var P="",z,X,ce,Se,je,bt;for(z=0,ce=h.length;z<ce;z++){for(je=h[z],X=0,Se=je.length;X<Se;X++)bt=je[X],P+=(X?"L":"M")+bt.x+" "+bt.y;P+=v?De.svg?"z":"x":""}return P||"M0 0"}var ct=document.documentElement.style,At="ActiveXObject"in window,Gt=At&&!document.addEventListener,Bt="msLaunchUri"in navigator&&!("documentMode"in document),Yt=ze("webkit"),gi=ze("android"),_i=ze("android 2")||ze("android 3"),zi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Hi=gi&&ze("Google")&&zi<537&&!("AudioNode"in window),Zi=!!window.opera,Ci=!Bt&&ze("chrome"),ci=ze("gecko")&&!Yt&&!Zi&&!At,Si=!Ci&&ze("safari"),sn=ze("phantom"),vn="OTransition"in ct,hn=navigator.platform.indexOf("Win")===0,Nn=At&&"transition"in ct,yr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_i,Mr="MozPerspective"in ct,Yr=!window.L_DISABLE_3D&&(Nn||yr||Mr)&&!vn&&!sn,fr=typeof orientation<"u"||ze("mobile"),Ko=fr&&Yt,An=fr&&yr,Is=!window.PointerEvent&&window.MSPointerEvent,Xr=!!(window.PointerEvent||Is),Fo="ontouchstart"in window||!!window.TouchEvent,za=!window.L_NO_TOUCH&&(Fo||Xr),Hl=fr&&Zi,va=fr&&ci,ps=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fr=function(){var h=!1;try{var v=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",S,v),window.removeEventListener("testPassiveEventSupport",S,v)}catch{}return h}(),ms=function(){return!!document.createElement("canvas").getContext}(),Io=!!(document.createElementNS&&Xe("svg").createSVGRect),gs=!!Io&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ge=!Io&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var v=h.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),_e=navigator.platform.indexOf("Mac")===0,Te=navigator.platform.indexOf("Linux")===0;function ze(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var De={ie:At,ielt9:Gt,edge:Bt,webkit:Yt,android:gi,android23:_i,androidStock:Hi,opera:Zi,chrome:Ci,gecko:ci,safari:Si,phantom:sn,opera12:vn,win:hn,ie3d:Nn,webkit3d:yr,gecko3d:Mr,any3d:Yr,mobile:fr,mobileWebkit:Ko,mobileWebkit3d:An,msPointer:Is,pointer:Xr,touch:za,touchNative:Fo,mobileOpera:Hl,mobileGecko:va,retina:ps,passiveEvents:Fr,canvas:ms,svg:Io,vml:Ge,inlineSvg:gs,mac:_e,linux:Te},_t=De.msPointer?"MSPointerDown":"pointerdown",Ct=De.msPointer?"MSPointerMove":"pointermove",St=De.msPointer?"MSPointerUp":"pointerup",vt=De.msPointer?"MSPointerCancel":"pointercancel",Pt={touchstart:_t,touchmove:Ct,touchend:St,touchcancel:vt},jt={touchstart:Jn,touchmove:rn,touchend:rn,touchcancel:rn},Ii={},ai=!1;function Ji(h,v,P){return v==="touchstart"&&Ln(),jt[v]?(P=jt[v].bind(this,P),h.addEventListener(Pt[v],P,!1),P):(console.warn("wrong event specified:",v),S)}function Qi(h,v,P){if(!Pt[v]){console.warn("wrong event specified:",v);return}h.removeEventListener(Pt[v],P,!1)}function Gi(h){Ii[h.pointerId]=h}function Bi(h){Ii[h.pointerId]&&(Ii[h.pointerId]=h)}function yn(h){delete Ii[h.pointerId]}function Ln(){ai||(document.addEventListener(_t,Gi,!0),document.addEventListener(Ct,Bi,!0),document.addEventListener(St,yn,!0),document.addEventListener(vt,yn,!0),ai=!0)}function rn(h,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var P in Ii)v.touches.push(Ii[P]);v.changedTouches=[v],h(v)}}function Jn(h,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&xr(v),rn(h,v)}function er(h){var v={},P,z;for(z in h)P=h[z],v[z]=P&&P.bind?P.bind(h):P;return h=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var ya=200;function $o(h,v){h.addEventListener("dblclick",v);var P=0,z;function X(ce){if(ce.detail!==1){z=ce.detail;return}if(!(ce.pointerType==="mouse"||ce.sourceCapabilities&&!ce.sourceCapabilities.firesTouchEvents)){var Se=ku(ce);if(!(Se.some(function(bt){return bt instanceof HTMLLabelElement&&bt.attributes.for})&&!Se.some(function(bt){return bt instanceof HTMLInputElement||bt instanceof HTMLSelectElement}))){var je=Date.now();je-P<=ya?(z++,z===2&&v(er(ce))):z=1,P=je}}}return h.addEventListener("click",X),{dblclick:v,simDblclick:X}}function Wt(h,v){h.removeEventListener("dblclick",v.dblclick),h.removeEventListener("click",v.simDblclick)}var Po=Ur(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),pr=Ur(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ba=pr==="webkitTransition"||pr==="OTransition"?pr+"End":"transitionend";function Lc(h){return typeof h=="string"?document.getElementById(h):h}function Qs(h,v){var P=h.style[v]||h.currentStyle&&h.currentStyle[v];if((!P||P==="auto")&&document.defaultView){var z=document.defaultView.getComputedStyle(h,null);P=z?z[v]:null}return P==="auto"?null:P}function En(h,v,P){var z=document.createElement(h);return z.className=v||"",P&&P.appendChild(z),z}function dr(h){var v=h.parentNode;v&&v.removeChild(h)}function Qo(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function bi(h){var v=h.parentNode;v&&v.lastChild!==h&&v.appendChild(h)}function _n(h){var v=h.parentNode;v&&v.firstChild!==h&&v.insertBefore(h,v.firstChild)}function bn(h,v){if(h.classList!==void 0)return h.classList.contains(v);var P=go(h);return P.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(P)}function fn(h,v){if(h.classList!==void 0)for(var P=R(v),z=0,X=P.length;z<X;z++)h.classList.add(P[z]);else if(!bn(h,v)){var ce=go(h);xn(h,(ce?ce+" ":"")+v)}}function nr(h,v){h.classList!==void 0?h.classList.remove(v):xn(h,I((" "+go(h)+" ").replace(" "+v+" "," ")))}function xn(h,v){h.className.baseVal===void 0?h.className=v:h.className.baseVal=v}function go(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function ns(h,v){"opacity"in h.style?h.style.opacity=v:"filter"in h.style&&Ps(h,v)}function Ps(h,v){var P=!1,z="DXImageTransform.Microsoft.Alpha";try{P=h.filters.item(z)}catch{if(v===1)return}v=Math.round(v*100),P?(P.Enabled=v!==100,P.Opacity=v):h.style.filter+=" progid:"+z+"(opacity="+v+")"}function Ur(h){for(var v=document.documentElement.style,P=0;P<h.length;P++)if(h[P]in v)return h[P];return!1}function In(h,v,P){var z=v||new nt(0,0);h.style[Po]=(De.ie3d?"translate("+z.x+"px,"+z.y+"px)":"translate3d("+z.x+"px,"+z.y+"px,0)")+(P?" scale("+P+")":"")}function tr(h,v){h._leaflet_pos=v,De.any3d?In(h,v):(h.style.left=v.x+"px",h.style.top=v.y+"px")}function Or(h){return h._leaflet_pos||new nt(0,0)}var Ao,_o,Gl;if("onselectstart"in document)Ao=function(){ln(window,"selectstart",xr)},_o=function(){Yn(window,"selectstart",xr)};else{var No=Ur(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ao=function(){if(No){var h=document.documentElement.style;Gl=h[No],h[No]="none"}},_o=function(){No&&(document.documentElement.style[No]=Gl,Gl=void 0)}}function pl(){ln(window,"dragstart",xr)}function Jo(){Yn(window,"dragstart",xr)}var Mo,Va;function ws(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(br(),Mo=h,Va=h.style.outlineStyle,h.style.outlineStyle="none",ln(window,"keydown",br))}function br(){Mo&&(Mo.style.outlineStyle=Va,Mo=void 0,Va=void 0,Yn(window,"keydown",br))}function ml(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function gl(h){var v=h.getBoundingClientRect();return{x:v.width/h.offsetWidth||1,y:v.height/h.offsetHeight||1,boundingClientRect:v}}var Vs={__proto__:null,TRANSFORM:Po,TRANSITION:pr,TRANSITION_END:ba,get:Lc,getStyle:Qs,create:En,remove:dr,empty:Qo,toFront:bi,toBack:_n,hasClass:bn,addClass:fn,removeClass:nr,setClass:xn,getClass:go,setOpacity:ns,testProp:Ur,setTransform:In,setPosition:tr,getPosition:Or,get disableTextSelection(){return Ao},get enableTextSelection(){return _o},disableImageDrag:pl,enableImageDrag:Jo,preventOutline:ws,restoreOutline:br,getSizedParentNode:ml,getScale:gl};function ln(h,v,P,z){if(v&&typeof v=="object")for(var X in v)Wl(h,X,v[X],P);else{v=R(v);for(var ce=0,Se=v.length;ce<Se;ce++)Wl(h,v[ce],P,z)}return this}var As="_leaflet_events";function Yn(h,v,P,z){if(arguments.length===1)jr(h),delete h[As];else if(v&&typeof v=="object")for(var X in v)xa(h,X,v[X],P);else if(v=R(v),arguments.length===2)jr(h,function(je){return ne(v,je)!==-1});else for(var ce=0,Se=v.length;ce<Se;ce++)xa(h,v[ce],P,z);return this}function jr(h,v){for(var P in h[As]){var z=P.split(/\d/)[0];(!v||v(z))&&xa(h,z,null,null,P)}}var _l={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wl(h,v,P,z){var X=v+p(P)+(z?"_"+p(z):"");if(h[As]&&h[As][X])return this;var ce=function(je){return P.call(z||h,je||window.event)},Se=ce;!De.touchNative&&De.pointer&&v.indexOf("touch")===0?ce=Ji(h,v,ce):De.touch&&v==="dblclick"?ce=$o(h,ce):"addEventListener"in h?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?h.addEventListener(_l[v]||v,ce,De.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(ce=function(je){je=je||window.event,Zl(h,je)&&Se(je)},h.addEventListener(_l[v],ce,!1)):h.addEventListener(v,Se,!1):h.attachEvent("on"+v,ce),h[As]=h[As]||{},h[As][X]=ce}function xa(h,v,P,z,X){X=X||v+p(P)+(z?"_"+p(z):"");var ce=h[As]&&h[As][X];if(!ce)return this;!De.touchNative&&De.pointer&&v.indexOf("touch")===0?Qi(h,v,ce):De.touch&&v==="dblclick"?Wt(h,ce):"removeEventListener"in h?h.removeEventListener(_l[v]||v,ce,!1):h.detachEvent("on"+v,ce),h[As][X]=null}function Lr(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function ql(h){return Wl(h,"wheel",Lr),this}function Oo(h){return ln(h,"mousedown touchstart dblclick contextmenu",Lr),h._leaflet_disable_click=!0,this}function xr(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function zo(h){return xr(h),Lr(h),this}function ku(h){if(h.composedPath)return h.composedPath();for(var v=[],P=h.target;P;)v.push(P),P=P.parentNode;return v}function hd(h,v){if(!v)return new nt(h.clientX,h.clientY);var P=gl(v),z=P.boundingClientRect;return new nt((h.clientX-z.left)/P.x-v.clientLeft,(h.clientY-z.top)/P.y-v.clientTop)}var Dc=De.linux&&De.chrome?window.devicePixelRatio:De.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function vl(h){return De.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/Dc:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function Zl(h,v){var P=v.relatedTarget;if(!P)return!0;try{for(;P&&P!==h;)P=P.parentNode}catch{return!1}return P!==h}var Eu={__proto__:null,on:ln,off:Yn,stopPropagation:Lr,disableScrollPropagation:ql,disableClickPropagation:Oo,preventDefault:xr,stop:zo,getPropagationPath:ku,getMousePosition:hd,getWheelDelta:vl,isExternalTarget:Zl,addListener:ln,removeListener:Yn},Ua=gt.extend({run:function(h,v,P,z){this.stop(),this._el=h,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(z||.5,.2),this._startPos=Or(h),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=we(this._animate,this),this._step()},_step:function(h){var v=+new Date-this._startTime,P=this._duration*1e3;v<P?this._runFrame(this._easeOut(v/P),h):(this._runFrame(1),this._complete())},_runFrame:function(h,v){var P=this._startPos.add(this._offset.multiplyBy(h));v&&P._round(),tr(this._el,P),this.fire("step")},_complete:function(){Ie(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),Sn=gt.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,v){v=V(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(tt(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=pr&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ln(this._proxy,ba,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,v,P){if(v=v===void 0?this._zoom:this._limitZoom(v),h=this._limitCenter(tt(h),v,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=r({animate:P.animate},P.zoom),P.pan=r({animate:P.animate,duration:P.duration},P.pan));var z=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,v,P.zoom):this._tryAnimatedPan(h,P.pan);if(z)return clearTimeout(this._sizeTimer),this}return this._resetView(h,v,P.pan&&P.pan.noMoveStart),this},setZoom:function(h,v){return this._loaded?this.setView(this.getCenter(),h,{zoom:v}):(this._zoom=h,this)},zoomIn:function(h,v){return h=h||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,v)},zoomOut:function(h,v){return h=h||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,v)},setZoomAround:function(h,v,P){var z=this.getZoomScale(v),X=this.getSize().divideBy(2),ce=h instanceof nt?h:this.latLngToContainerPoint(h),Se=ce.subtract(X).multiplyBy(1-1/z),je=this.containerPointToLatLng(X.add(Se));return this.setView(je,v,{zoom:P})},_getBoundsCenterZoom:function(h,v){v=v||{},h=h.getBounds?h.getBounds():Qt(h);var P=Tt(v.paddingTopLeft||v.padding||[0,0]),z=Tt(v.paddingBottomRight||v.padding||[0,0]),X=this.getBoundsZoom(h,!1,P.add(z));if(X=typeof v.maxZoom=="number"?Math.min(v.maxZoom,X):X,X===1/0)return{center:h.getCenter(),zoom:X};var ce=z.subtract(P).divideBy(2),Se=this.project(h.getSouthWest(),X),je=this.project(h.getNorthEast(),X),bt=this.unproject(Se.add(je).divideBy(2).add(ce),X);return{center:bt,zoom:X}},fitBounds:function(h,v){if(h=Qt(h),!h.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(h,v);return this.setView(P.center,P.zoom,v)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,v){return this.setView(h,this._zoom,{pan:v})},panBy:function(h,v){if(h=Tt(h).round(),v=v||{},!h.x&&!h.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ua,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){fn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,P,v.duration||.25,v.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,v,P){if(P=P||{},P.animate===!1||!De.any3d)return this.setView(h,v,P);this._stop();var z=this.project(this.getCenter()),X=this.project(h),ce=this.getSize(),Se=this._zoom;h=tt(h),v=v===void 0?Se:v;var je=Math.max(ce.x,ce.y),bt=je*this.getZoomScale(Se,v),wt=X.distanceTo(z)||1,si=1.42,ki=si*si;function on(Hr){var zc=Hr?-1:1,Zh=Hr?bt:je,nh=bt*bt-je*je+zc*ki*ki*wt*wt,Yh=2*Zh*ki*wt,_c=nh/Yh,O=Math.sqrt(_c*_c+1)-_c,G=O<1e-9?-18:Math.log(O);return G}function cr(Hr){return(Math.exp(Hr)-Math.exp(-Hr))/2}function Cr(Hr){return(Math.exp(Hr)+Math.exp(-Hr))/2}function _s(Hr){return cr(Hr)/Cr(Hr)}var Ss=on(0);function Ja(Hr){return je*(Cr(Ss)/Cr(Ss+si*Hr))}function ou(Hr){return je*(Cr(Ss)*_s(Ss+si*Hr)-cr(Ss))/ki}function Nc(Hr){return 1-Math.pow(1-Hr,1.5)}var wr=Date.now(),au=(on(1)-Ss)/si,js=P.duration?1e3*P.duration:1e3*au*.8;function Fu(){var Hr=(Date.now()-wr)/js,zc=Nc(Hr)*au;Hr<=1?(this._flyToFrame=we(Fu,this),this._move(this.unproject(z.add(X.subtract(z).multiplyBy(ou(zc)/wt)),Se),this.getScaleZoom(je/Ja(zc),Se),{flyTo:!0})):this._move(h,v)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Fu.call(this),this},flyToBounds:function(h,v){var P=this._getBoundsCenterZoom(h,v);return this.flyTo(P.center,P.zoom,v)},setMaxBounds:function(h){return h=Qt(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var v=this.options.minZoom;return this.options.minZoom=h,this._loaded&&v!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var v=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&v!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,v){this._enforcingBounds=!0;var P=this.getCenter(),z=this._limitCenter(P,this._zoom,Qt(h));return P.equals(z)||this.panTo(z,v),this._enforcingBounds=!1,this},panInside:function(h,v){v=v||{};var P=Tt(v.paddingTopLeft||v.padding||[0,0]),z=Tt(v.paddingBottomRight||v.padding||[0,0]),X=this.project(this.getCenter()),ce=this.project(h),Se=this.getPixelBounds(),je=et([Se.min.add(P),Se.max.subtract(z)]),bt=je.getSize();if(!je.contains(ce)){this._enforcingBounds=!0;var wt=ce.subtract(je.getCenter()),si=je.extend(ce).getSize().subtract(bt);X.x+=wt.x<0?-si.x:si.x,X.y+=wt.y<0?-si.y:si.y,this.panTo(this.unproject(X),v),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=r({animate:!1,pan:!0},h===!0?{animate:!0}:h);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),z=v.divideBy(2).round(),X=P.divideBy(2).round(),ce=z.subtract(X);return!ce.x&&!ce.y?this:(h.animate&&h.pan?this.panBy(ce):(h.pan&&this._rawPanBy(ce),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=r({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=c(this._handleGeolocationResponse,this),P=c(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,P,h):navigator.geolocation.getCurrentPosition(v,P,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var v=h.code,P=h.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var v=h.coords.latitude,P=h.coords.longitude,z=new Fe(v,P),X=z.toBounds(h.coords.accuracy*2),ce=this._locateOptions;if(ce.setView){var Se=this.getBoundsZoom(X);this.setView(z,ce.maxZoom?Math.min(Se,ce.maxZoom):Se)}var je={latlng:z,bounds:X,timestamp:h.timestamp};for(var bt in h.coords)typeof h.coords[bt]=="number"&&(je[bt]=h.coords[bt]);this.fire("locationfound",je)}},addHandler:function(h,v){if(!v)return this;var P=this[h]=new v(this);return this._handlers.push(P),this.options[h]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ie(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)dr(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,v){var P="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),z=En("div",P,v||this._mapPane);return h&&(this._panes[h]=z),z},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),v=this.unproject(h.getBottomLeft()),P=this.unproject(h.getTopRight());return new Mt(v,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,v,P){h=Qt(h),P=Tt(P||[0,0]);var z=this.getZoom()||0,X=this.getMinZoom(),ce=this.getMaxZoom(),Se=h.getNorthWest(),je=h.getSouthEast(),bt=this.getSize().subtract(P),wt=et(this.project(je,z),this.project(Se,z)).getSize(),si=De.any3d?this.options.zoomSnap:1,ki=bt.x/wt.x,on=bt.y/wt.y,cr=v?Math.max(ki,on):Math.min(ki,on);return z=this.getScaleZoom(cr,z),si&&(z=Math.round(z/(si/100))*(si/100),z=v?Math.ceil(z/si)*si:Math.floor(z/si)*si),Math.max(X,Math.min(ce,z))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,v){var P=this._getTopLeftPoint(h,v);return new pt(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,v){var P=this.options.crs;return v=v===void 0?this._zoom:v,P.scale(h)/P.scale(v)},getScaleZoom:function(h,v){var P=this.options.crs;v=v===void 0?this._zoom:v;var z=P.zoom(h*P.scale(v));return isNaN(z)?1/0:z},project:function(h,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(tt(h),v)},unproject:function(h,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(Tt(h),v)},layerPointToLatLng:function(h){var v=Tt(h).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(h){var v=this.project(tt(h))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(tt(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(Qt(h))},distance:function(h,v){return this.options.crs.distance(tt(h),tt(v))},containerPointToLayerPoint:function(h){return Tt(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return Tt(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var v=this.containerPointToLayerPoint(Tt(h));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(tt(h)))},mouseEventToContainerPoint:function(h){return hd(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var v=this._container=Lc(h);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ln(v,"scroll",this._onScroll,this),this._containerId=p(v)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,fn(h,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Qs(h,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tr(this._mapPane,new nt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fn(h.markerPane,"leaflet-zoom-hide"),fn(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,v,P){tr(this._mapPane,new nt(0,0));var z=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var X=this._zoom!==v;this._moveStart(X,P)._move(h,v)._moveEnd(X),this.fire("viewreset"),z&&this.fire("load")},_moveStart:function(h,v){return h&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(h,v,P,z){v===void 0&&(v=this._zoom);var X=this._zoom!==v;return this._zoom=v,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),z?P&&P.pinch&&this.fire("zoom",P):((X||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ie(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){tr(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[p(this._container)]=this;var v=h?Yn:ln;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ie(this._resizeRequest),this._resizeRequest=we(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,v){for(var P=[],z,X=v==="mouseout"||v==="mouseover",ce=h.target||h.srcElement,Se=!1;ce;){if(z=this._targets[p(ce)],z&&(v==="click"||v==="preclick")&&this._draggableMoved(z)){Se=!0;break}if(z&&z.listens(v,!0)&&(X&&!Zl(ce,h)||(P.push(z),X))||ce===this._container)break;ce=ce.parentNode}return!P.length&&!Se&&!X&&this.listens(v,!0)&&(P=[this]),P},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var v=h.target||h.srcElement;if(!(!this._loaded||v._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(v))){var P=h.type;P==="mousedown"&&ws(v),this._fireDOMEvent(h,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,v,P){if(h.type==="click"){var z=r({},h);z.type="preclick",this._fireDOMEvent(z,z.type,P)}var X=this._findEventTargets(h,v);if(P){for(var ce=[],Se=0;Se<P.length;Se++)P[Se].listens(v,!0)&&ce.push(P[Se]);X=ce.concat(X)}if(X.length){v==="contextmenu"&&xr(h);var je=X[0],bt={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var wt=je.getLatLng&&(!je._radius||je._radius<=10);bt.containerPoint=wt?this.latLngToContainerPoint(je.getLatLng()):this.mouseEventToContainerPoint(h),bt.layerPoint=this.containerPointToLayerPoint(bt.containerPoint),bt.latlng=wt?je.getLatLng():this.layerPointToLatLng(bt.layerPoint)}for(Se=0;Se<X.length;Se++)if(X[Se].fire(v,bt,!0),bt.originalEvent._stopped||X[Se].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,v=this._handlers.length;h<v;h++)this._handlers[h].disable()},whenReady:function(h,v){return this._loaded?h.call(v||this,{target:this}):this.on("load",h,v),this},_getMapPanePos:function(){return Or(this._mapPane)||new nt(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,v){var P=h&&v!==void 0?this._getNewPixelOrigin(h,v):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,v){var P=this.getSize()._divideBy(2);return this.project(h,v)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,v,P){var z=this._getNewPixelOrigin(P,v);return this.project(h,v)._subtract(z)},_latLngBoundsToNewLayerBounds:function(h,v,P){var z=this._getNewPixelOrigin(P,v);return et([this.project(h.getSouthWest(),v)._subtract(z),this.project(h.getNorthWest(),v)._subtract(z),this.project(h.getSouthEast(),v)._subtract(z),this.project(h.getNorthEast(),v)._subtract(z)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,v,P){if(!P)return h;var z=this.project(h,v),X=this.getSize().divideBy(2),ce=new pt(z.subtract(X),z.add(X)),Se=this._getBoundsOffset(ce,P,v);return Math.abs(Se.x)<=1&&Math.abs(Se.y)<=1?h:this.unproject(z.add(Se),v)},_limitOffset:function(h,v){if(!v)return h;var P=this.getPixelBounds(),z=new pt(P.min.add(h),P.max.add(h));return h.add(this._getBoundsOffset(z,v))},_getBoundsOffset:function(h,v,P){var z=et(this.project(v.getNorthEast(),P),this.project(v.getSouthWest(),P)),X=z.min.subtract(h.min),ce=z.max.subtract(h.max),Se=this._rebound(X.x,-ce.x),je=this._rebound(X.y,-ce.y);return new nt(Se,je)},_rebound:function(h,v){return h+v>0?Math.round(h-v)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(v))},_limitZoom:function(h){var v=this.getMinZoom(),P=this.getMaxZoom(),z=De.any3d?this.options.zoomSnap:1;return z&&(h=Math.round(h/z)*z),Math.max(v,Math.min(P,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,v){var P=this._getCenterOffset(h)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,v),!0)},_createAnimProxy:function(){var h=this._proxy=En("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(v){var P=Po,z=this._proxy.style[P];In(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),z===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),v=this.getZoom();In(this._proxy,this.project(h,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,v,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var z=this.getZoomScale(v),X=this._getCenterOffset(h)._divideBy(1-1/z);return P.animate!==!0&&!this.getSize().contains(X)?!1:(we(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(h,v,!0)},this),!0)},_animateZoom:function(h,v,P,z){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=v,fn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:v,noUpdate:z}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Iu(h,v){return new Sn(h,v)}var us=ke.extend({options:{position:"topright"},initialize:function(h){V(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var v=this._map;return v&&v.removeControl(this),this.options.position=h,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var v=this._container=this.onAdd(h),P=this.getPosition(),z=h._controlCorners[P];return fn(v,"leaflet-control"),P.indexOf("bottom")!==-1?z.insertBefore(v,z.firstChild):z.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Ms=function(h){return new us(h)};Sn.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},v="leaflet-",P=this._controlContainer=En("div",v+"control-container",this._container);function z(X,ce){var Se=v+X+" "+v+ce;h[X+ce]=En("div",Se,P)}z("top","left"),z("top","right"),z("bottom","left"),z("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)dr(this._controlCorners[h]);dr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yl=us.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,v,P,z){return P<z?-1:z<P?1:0}},initialize:function(h,v,P){V(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var z in h)this._addLayer(h[z],z);for(z in v)this._addLayer(v[z],z,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return us.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,v){return this._addLayer(h,v),this._map?this._update():this},addOverlay:function(h,v){return this._addLayer(h,v,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var v=this._getLayer(p(h));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){fn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(fn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):nr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",v=this._container=En("div",h),P=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Oo(v),ql(v);var z=this._section=En("section",h+"-list");P&&(this._map.on("click",this.collapse,this),ln(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var X=this._layersLink=En("a",h+"-toggle",v);X.href="#",X.title="Layers",X.setAttribute("role","button"),ln(X,{keydown:function(ce){ce.keyCode===13&&this._expandSafely()},click:function(ce){xr(ce),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=En("div",h+"-base",z),this._separator=En("div",h+"-separator",z),this._overlaysList=En("div",h+"-overlays",z),v.appendChild(z)},_getLayer:function(h){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&p(this._layers[v].layer)===h)return this._layers[v]},_addLayer:function(h,v,P){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:v,overlay:P}),this.options.sortLayers&&this._layers.sort(c(function(z,X){return this.options.sortFunction(z.layer,X.layer,z.name,X.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qo(this._baseLayersList),Qo(this._overlaysList),this._layerControlInputs=[];var h,v,P,z,X=0;for(P=0;P<this._layers.length;P++)z=this._layers[P],this._addItem(z),v=v||z.overlay,h=h||!z.overlay,X+=z.overlay?0:1;return this.options.hideSingleBase&&(h=h&&X>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=v&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var v=this._getLayer(p(h.target)),P=v.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;P&&this._map.fire(P,v)},_createRadioElement:function(h,v){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(v?' checked="checked"':"")+"/>",z=document.createElement("div");return z.innerHTML=P,z.firstChild},_addItem:function(h){var v=document.createElement("label"),P=this._map.hasLayer(h.layer),z;h.overlay?(z=document.createElement("input"),z.type="checkbox",z.className="leaflet-control-layers-selector",z.defaultChecked=P):z=this._createRadioElement("leaflet-base-layers_"+p(this),P),this._layerControlInputs.push(z),z.layerId=p(h.layer),ln(z,"click",this._onInputClick,this);var X=document.createElement("span");X.innerHTML=" "+h.name;var ce=document.createElement("span");v.appendChild(ce),ce.appendChild(z),ce.appendChild(X);var Se=h.overlay?this._overlaysList:this._baseLayersList;return Se.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,v,P,z=[],X=[];this._handlingClick=!0;for(var ce=h.length-1;ce>=0;ce--)v=h[ce],P=this._getLayer(v.layerId).layer,v.checked?z.push(P):v.checked||X.push(P);for(ce=0;ce<X.length;ce++)this._map.hasLayer(X[ce])&&this._map.removeLayer(X[ce]);for(ce=0;ce<z.length;ce++)this._map.hasLayer(z[ce])||this._map.addLayer(z[ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,v,P,z=this._map.getZoom(),X=h.length-1;X>=0;X--)v=h[X],P=this._getLayer(v.layerId).layer,v.disabled=P.options.minZoom!==void 0&&z<P.options.minZoom||P.options.maxZoom!==void 0&&z>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,ln(h,"click",xr),this.expand();var v=this;setTimeout(function(){Yn(h,"click",xr),v._preventClick=!1})}}),nc=function(h,v,P){return new Yl(h,v,P)},ja=us.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var v="leaflet-control-zoom",P=En("div",v+" leaflet-bar"),z=this.options;return this._zoomInButton=this._createButton(z.zoomInText,z.zoomInTitle,v+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(z.zoomOutText,z.zoomOutTitle,v+"-out",P,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,v,P,z,X){var ce=En("a",P,z);return ce.innerHTML=h,ce.href="#",ce.title=v,ce.setAttribute("role","button"),ce.setAttribute("aria-label",v),Oo(ce),ln(ce,"click",zo),ln(ce,"click",X,this),ln(ce,"click",this._refocusOnMap,this),ce},_updateDisabled:function(){var h=this._map,v="leaflet-disabled";nr(this._zoomInButton,v),nr(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(fn(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(fn(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Sn.mergeOptions({zoomControl:!0}),Sn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ja,this.addControl(this.zoomControl))});var Ha=function(h){return new ja(h)},yl=us.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var v="leaflet-control-scale",P=En("div",v),z=this.options;return this._addScales(z,v+"-line",P),h.on(z.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),P},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,v,P){h.metric&&(this._mScale=En("div",v,P)),h.imperial&&(this._iScale=En("div",v,P))},_update:function(){var h=this._map,v=h.getSize().y/2,P=h.distance(h.containerPointToLatLng([0,v]),h.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(P)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var v=this._getRoundNum(h),P=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,P,v/h)},_updateImperial:function(h){var v=h*3.2808399,P,z,X;v>5280?(P=v/5280,z=this._getRoundNum(P),this._updateScale(this._iScale,z+" mi",z/P)):(X=this._getRoundNum(v),this._updateScale(this._iScale,X+" ft",X/v))},_updateScale:function(h,v,P){h.style.width=Math.round(this.options.maxWidth*P)+"px",h.innerHTML=v},_getRoundNum:function(h){var v=Math.pow(10,(Math.floor(h)+"").length-1),P=h/v;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,v*P}}),Xl=function(h){return new yl(h)},vo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Os=us.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?vo+" ":"")+"Leaflet</a>"},initialize:function(h){V(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=En("div","leaflet-control-attribution"),Oo(this._container);for(var v in h._layers)h._layers[v].getAttribution&&this.addAttribution(h._layers[v].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var v in this._attributions)this._attributions[v]&&h.push(v);var P=[];this.options.prefix&&P.push(this.options.prefix),h.length&&P.push(h.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Sn.mergeOptions({attributionControl:!0}),Sn.addInitHook(function(){this.options.attributionControl&&new Os().addTo(this)});var Kl=function(h){return new Os(h)};us.Layers=Yl,us.Zoom=ja,us.Scale=yl,us.Attribution=Os,Ms.layers=nc,Ms.zoom=Ha,Ms.scale=Xl,Ms.attribution=Kl;var Js=ke.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Js.addTo=function(h,v){return h.addHandler(v,this),this};var rc={Events:Qe},sc=De.touch?"touchstart mousedown":"mousedown",eo=gt.extend({options:{clickTolerance:3},initialize:function(h,v,P,z){V(this,z),this._element=h,this._dragStartTarget=v||h,this._preventOutline=P},enable:function(){this._enabled||(ln(this._dragStartTarget,sc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(eo._dragging===this&&this.finishDrag(!0),Yn(this._dragStartTarget,sc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!bn(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){eo._dragging===this&&this.finishDrag();return}if(!(eo._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(eo._dragging=this,this._preventOutline&&ws(this._element),pl(),Ao(),!this._moving)){this.fire("down");var v=h.touches?h.touches[0]:h,P=ml(this._element);this._startPoint=new nt(v.clientX,v.clientY),this._startPos=Or(this._element),this._parentScale=gl(P);var z=h.type==="mousedown";ln(document,z?"mousemove":"touchmove",this._onMove,this),ln(document,z?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var v=h.touches&&h.touches.length===1?h.touches[0]:h,P=new nt(v.clientX,v.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,xr(h),this._moved||(this.fire("dragstart"),this._moved=!0,fn(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),tr(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){nr(document.body,"leaflet-dragging"),this._lastTarget&&(nr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn(document,"mousemove touchmove",this._onMove,this),Yn(document,"mouseup touchend touchcancel",this._onUp,this),Jo(),_o();var v=this._moved&&this._moving;this._moving=!1,eo._dragging=!1,v&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function Un(h,v,P){var z,X=[1,4,2,8],ce,Se,je,bt,wt,si,ki,on;for(ce=0,si=h.length;ce<si;ce++)h[ce]._code=cs(h[ce],v);for(je=0;je<4;je++){for(ki=X[je],z=[],ce=0,si=h.length,Se=si-1;ce<si;Se=ce++)bt=h[ce],wt=h[Se],bt._code&ki?wt._code&ki||(on=Wa(wt,bt,ki,v,P),on._code=cs(on,v),z.push(on)):(wt._code&ki&&(on=Wa(wt,bt,ki,v,P),on._code=cs(on,v),z.push(on)),z.push(bt));h=z}return h}function wa(h,v){var P,z,X,ce,Se,je,bt,wt,si;if(!h||h.length===0)throw new Error("latlngs not passed");Us(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var ki=tt([0,0]),on=Qt(h),cr=on.getNorthWest().distanceTo(on.getSouthWest())*on.getNorthEast().distanceTo(on.getNorthWest());cr<1700&&(ki=bl(h));var Cr=h.length,_s=[];for(P=0;P<Cr;P++){var Ss=tt(h[P]);_s.push(v.project(tt([Ss.lat-ki.lat,Ss.lng-ki.lng])))}for(je=bt=wt=0,P=0,z=Cr-1;P<Cr;z=P++)X=_s[P],ce=_s[z],Se=X.y*ce.x-ce.y*X.x,bt+=(X.x+ce.x)*Se,wt+=(X.y+ce.y)*Se,je+=Se*3;je===0?si=_s[0]:si=[bt/je,wt/je];var Ja=v.unproject(Tt(si));return tt([Ja.lat+ki.lat,Ja.lng+ki.lng])}function bl(h){for(var v=0,P=0,z=0,X=0;X<h.length;X++){var ce=tt(h[X]);v+=ce.lat,P+=ce.lng,z++}return tt([v/z,P/z])}var Ta={__proto__:null,clipPolygon:Un,polygonCenter:wa,centroid:bl};function Vo(h,v){if(!v||!h.length)return h.slice();var P=v*v;return h=ac(h,P),h=oc(h,P),h}function Sa(h,v,P){return Math.sqrt(Lo(h,v,P,!0))}function ea(h,v,P){return Lo(h,v,P)}function oc(h,v){var P=h.length,z=typeof Uint8Array!=void 0+""?Uint8Array:Array,X=new z(P);X[0]=X[P-1]=1,xl(h,X,v,0,P-1);var ce,Se=[];for(ce=0;ce<P;ce++)X[ce]&&Se.push(h[ce]);return Se}function xl(h,v,P,z,X){var ce=0,Se,je,bt;for(je=z+1;je<=X-1;je++)bt=Lo(h[je],h[z],h[X],!0),bt>ce&&(Se=je,ce=bt);ce>P&&(v[Se]=1,xl(h,v,P,z,Se),xl(h,v,P,Se,X))}function ac(h,v){for(var P=[h[0]],z=1,X=0,ce=h.length;z<ce;z++)kn(h[z],h[X])>v&&(P.push(h[z]),X=z);return X<ce-1&&P.push(h[ce-1]),P}var Uo;function Ga(h,v,P,z,X){var ce=z?Uo:cs(h,P),Se=cs(v,P),je,bt,wt;for(Uo=Se;;){if(!(ce|Se))return[h,v];if(ce&Se)return!1;je=ce||Se,bt=Wa(h,v,je,P,X),wt=cs(bt,P),je===ce?(h=bt,ce=wt):(v=bt,Se=wt)}}function Wa(h,v,P,z,X){var ce=v.x-h.x,Se=v.y-h.y,je=z.min,bt=z.max,wt,si;return P&8?(wt=h.x+ce*(bt.y-h.y)/Se,si=bt.y):P&4?(wt=h.x+ce*(je.y-h.y)/Se,si=je.y):P&2?(wt=bt.x,si=h.y+Se*(bt.x-h.x)/ce):P&1&&(wt=je.x,si=h.y+Se*(je.x-h.x)/ce),new nt(wt,si,X)}function cs(h,v){var P=0;return h.x<v.min.x?P|=1:h.x>v.max.x&&(P|=2),h.y<v.min.y?P|=4:h.y>v.max.y&&(P|=8),P}function kn(h,v){var P=v.x-h.x,z=v.y-h.y;return P*P+z*z}function Lo(h,v,P,z){var X=v.x,ce=v.y,Se=P.x-X,je=P.y-ce,bt=Se*Se+je*je,wt;return bt>0&&(wt=((h.x-X)*Se+(h.y-ce)*je)/bt,wt>1?(X=P.x,ce=P.y):wt>0&&(X+=Se*wt,ce+=je*wt)),Se=h.x-X,je=h.y-ce,z?Se*Se+je*je:new nt(X,ce)}function Us(h){return!Z(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"}function Rc(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Us(h)}function lc(h,v){var P,z,X,ce,Se,je,bt,wt;if(!h||h.length===0)throw new Error("latlngs not passed");Us(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var si=tt([0,0]),ki=Qt(h),on=ki.getNorthWest().distanceTo(ki.getSouthWest())*ki.getNorthEast().distanceTo(ki.getNorthWest());on<1700&&(si=bl(h));var cr=h.length,Cr=[];for(P=0;P<cr;P++){var _s=tt(h[P]);Cr.push(v.project(tt([_s.lat-si.lat,_s.lng-si.lng])))}for(P=0,z=0;P<cr-1;P++)z+=Cr[P].distanceTo(Cr[P+1])/2;if(z===0)wt=Cr[0];else for(P=0,ce=0;P<cr-1;P++)if(Se=Cr[P],je=Cr[P+1],X=Se.distanceTo(je),ce+=X,ce>z){bt=(ce-z)/X,wt=[je.x-bt*(je.x-Se.x),je.y-bt*(je.y-Se.y)];break}var Ss=v.unproject(Tt(wt));return tt([Ss.lat+si.lat,Ss.lng+si.lng])}var uc={__proto__:null,simplify:Vo,pointToSegmentDistance:Sa,closestPointOnSegment:ea,clipSegment:Ga,_getEdgeIntersection:Wa,_getBitCode:cs,_sqClosestPointOnSegment:Lo,isFlat:Us,_flat:Rc,polylineCenter:lc},Ql={project:function(h){return new nt(h.lng,h.lat)},unproject:function(h){return new Fe(h.y,h.x)},bounds:new pt([-180,-90],[180,90])},cc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new pt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var v=Math.PI/180,P=this.R,z=h.lat*v,X=this.R_MINOR/P,ce=Math.sqrt(1-X*X),Se=ce*Math.sin(z),je=Math.tan(Math.PI/4-z/2)/Math.pow((1-Se)/(1+Se),ce/2);return z=-P*Math.log(Math.max(je,1e-10)),new nt(h.lng*v*P,z)},unproject:function(h){for(var v=180/Math.PI,P=this.R,z=this.R_MINOR/P,X=Math.sqrt(1-z*z),ce=Math.exp(-h.y/P),Se=Math.PI/2-2*Math.atan(ce),je=0,bt=.1,wt;je<15&&Math.abs(bt)>1e-7;je++)wt=X*Math.sin(Se),wt=Math.pow((1-wt)/(1+wt),X/2),bt=Math.PI/2-2*Math.atan(ce*wt)-Se,Se+=bt;return new Fe(Se*v,h.x*v/P)}},fd={__proto__:null,LonLat:Ql,Mercator:cc,SphericalMercator:Ni},dc=r({},Xt,{code:"EPSG:3395",projection:cc,transformation:function(){var h=.5/(Math.PI*cc.R);return Ve(h,.5,-h,.5)}()}),Pu=r({},Xt,{code:"EPSG:4326",projection:Ql,transformation:Ve(1/180,1,-1/180,.5)}),Au=r({},Rt,{projection:Ql,transformation:Ve(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,v){var P=v.lng-h.lng,z=v.lat-h.lat;return Math.sqrt(P*P+z*z)},infinite:!0});Rt.Earth=Xt,Rt.EPSG3395=dc,Rt.EPSG3857=dt,Rt.EPSG900913=kt,Rt.EPSG4326=Pu,Rt.Simple=Au;var to=gt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[p(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[p(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var v=h.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var P=this.getEvents();v.on(P,this),this.once("remove",function(){v.off(P,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Sn.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var v=p(h);return this._layers[v]?this:(this._layers[v]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var v=p(h);return this._layers[v]?(this._loaded&&h.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return p(h)in this._layers},eachLayer:function(h,v){for(var P in this._layers)h.call(v,this._layers[P]);return this},_addLayers:function(h){h=h?Z(h)?h:[h]:[];for(var v=0,P=h.length;v<P;v++)this.addLayer(h[v])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[p(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var v=p(h);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,v=-1/0,P=this._getZoomSpan();for(var z in this._zoomBoundLayers){var X=this._zoomBoundLayers[z].options;h=X.minZoom===void 0?h:Math.min(h,X.minZoom),v=X.maxZoom===void 0?v:Math.max(v,X.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=h===1/0?void 0:h,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qa=to.extend({initialize:function(h,v){V(this,v),this._layers={};var P,z;if(h)for(P=0,z=h.length;P<z;P++)this.addLayer(h[P])},addLayer:function(h){var v=this.getLayerId(h);return this._layers[v]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var v=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(h){var v=typeof h=="number"?h:this.getLayerId(h);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var v=Array.prototype.slice.call(arguments,1),P,z;for(P in this._layers)z=this._layers[P],z[h]&&z[h].apply(z,v);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,v){for(var P in this._layers)h.call(v,this._layers[P]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return p(h)}}),pd=function(h,v){return new qa(h,v)},ta=qa.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),qa.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),qa.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new Mt;for(var v in this._layers){var P=this._layers[v];h.extend(P.getBounds?P.getBounds():P.getLatLng())}return h}}),Mu=function(h,v){return new ta(h,v)},yo=ke.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){V(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,v){var P=this._getIconUrl(h);if(!P){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var z=this._createImg(P,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(z,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(z.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),z},_setIconStyles:function(h,v){var P=this.options,z=P[v+"Size"];typeof z=="number"&&(z=[z,z]);var X=Tt(z),ce=Tt(v==="shadow"&&P.shadowAnchor||P.iconAnchor||X&&X.divideBy(2,!0));h.className="leaflet-marker-"+v+" "+(P.className||""),ce&&(h.style.marginLeft=-ce.x+"px",h.style.marginTop=-ce.y+"px"),X&&(h.style.width=X.x+"px",h.style.height=X.y+"px")},_createImg:function(h,v){return v=v||document.createElement("img"),v.src=h,v},_getIconUrl:function(h){return De.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function wl(h){return new yo(h)}var ia=yo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof ia.imagePath!="string"&&(ia.imagePath=this._detectIconPath()),(this.options.imagePath||ia.imagePath)+yo.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var v=function(P,z,X){var ce=z.exec(P);return ce&&ce[X]};return h=v(h,/^url\((['"])?(.+)\1\)$/,2),h&&v(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=En("div","leaflet-default-icon-path",document.body),v=Qs(h,"background-image")||Qs(h,"backgroundImage");if(document.body.removeChild(h),v=this._stripUrl(v),v)return v;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Ou=Js.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new eo(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fn(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var v=this._marker,P=v._map,z=this._marker.options.autoPanSpeed,X=this._marker.options.autoPanPadding,ce=Or(v._icon),Se=P.getPixelBounds(),je=P.getPixelOrigin(),bt=et(Se.min._subtract(je).add(X),Se.max._subtract(je).subtract(X));if(!bt.contains(ce)){var wt=Tt((Math.max(bt.max.x,ce.x)-bt.max.x)/(Se.max.x-bt.max.x)-(Math.min(bt.min.x,ce.x)-bt.min.x)/(Se.min.x-bt.min.x),(Math.max(bt.max.y,ce.y)-bt.max.y)/(Se.max.y-bt.max.y)-(Math.min(bt.min.y,ce.y)-bt.min.y)/(Se.min.y-bt.min.y)).multiplyBy(z);P.panBy(wt,{animate:!1}),this._draggable._newPos._add(wt),this._draggable._startPos._add(wt),tr(v._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=we(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(Ie(this._panRequest),this._panRequest=we(this._adjustPan.bind(this,h)))},_onDrag:function(h){var v=this._marker,P=v._shadow,z=Or(v._icon),X=v._map.layerPointToLatLng(z);P&&tr(P,z),v._latlng=X,h.latlng=X,h.oldLatLng=this._oldLatLng,v.fire("move",h).fire("drag",h)},_onDragEnd:function(h){Ie(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),bo=to.extend({options:{icon:new ia,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,v){V(this,v),this._latlng=tt(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var v=this._latlng;return this._latlng=tt(h),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=h.icon.createIcon(this._icon),z=!1;P!==this._icon&&(this._icon&&this._removeIcon(),z=!0,h.title&&(P.title=h.title),P.tagName==="IMG"&&(P.alt=h.alt||"")),fn(P,v),h.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ln(P,"focus",this._panOnFocus,this);var X=h.icon.createShadow(this._shadow),ce=!1;X!==this._shadow&&(this._removeShadow(),ce=!0),X&&(fn(X,v),X.alt=""),this._shadow=X,h.opacity<1&&this._updateOpacity(),z&&this.getPane().appendChild(this._icon),this._initInteraction(),X&&ce&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yn(this._icon,"focus",this._panOnFocus,this),dr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dr(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&tr(this._icon,h),this._shadow&&tr(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var v=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(fn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ou)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ou(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&ns(this._icon,h),this._shadow&&ns(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var v=this.options.icon.options,P=v.iconSize?Tt(v.iconSize):Tt(0,0),z=v.iconAnchor?Tt(v.iconAnchor):Tt(0,0);h.panInside(this._latlng,{paddingTopLeft:z,paddingBottomRight:P.subtract(z)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Za(h,v){return new bo(h,v)}var Ca=to.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return V(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Tl=Ca.extend({options:{fill:!0,radius:10},initialize:function(h,v){V(this,v),this._latlng=tt(h),this._radius=this.options.radius},setLatLng:function(h){var v=this._latlng;return this._latlng=tt(h),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var v=h&&h.radius||this._radius;return Ca.prototype.setStyle.call(this,h),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,v=this._radiusY||h,P=this._clickTolerance(),z=[h+P,v+P];this._pxBounds=new pt(this._point.subtract(z),this._point.add(z))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Lu(h,v){return new Tl(h,v)}var Ya=Tl.extend({initialize:function(h,v,P){if(typeof v=="number"&&(v=r({},P,{radius:v})),V(this,v),this._latlng=tt(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new Mt(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:Ca.prototype.setStyle,_project:function(){var h=this._latlng.lng,v=this._latlng.lat,P=this._map,z=P.options.crs;if(z.distance===Xt.distance){var X=Math.PI/180,ce=this._mRadius/Xt.R/X,Se=P.project([v+ce,h]),je=P.project([v-ce,h]),bt=Se.add(je).divideBy(2),wt=P.unproject(bt).lat,si=Math.acos((Math.cos(ce*X)-Math.sin(v*X)*Math.sin(wt*X))/(Math.cos(v*X)*Math.cos(wt*X)))/X;(isNaN(si)||si===0)&&(si=ce/Math.cos(Math.PI/180*v)),this._point=bt.subtract(P.getPixelOrigin()),this._radius=isNaN(si)?0:bt.x-P.project([wt,h-si]).x,this._radiusY=bt.y-Se.y}else{var ki=z.unproject(z.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(ki).x}this._updateBounds()}});function ih(h,v,P){return new Ya(h,v,P)}var Do=Ca.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,v){V(this,v),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var v=1/0,P=null,z=Lo,X,ce,Se=0,je=this._parts.length;Se<je;Se++)for(var bt=this._parts[Se],wt=1,si=bt.length;wt<si;wt++){X=bt[wt-1],ce=bt[wt];var ki=z(h,X,ce,!0);ki<v&&(v=ki,P=z(h,X,ce))}return P&&(P.distance=Math.sqrt(v)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,v){return v=v||this._defaultShape(),h=tt(h),v.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new Mt,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return Us(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var v=[],P=Us(h),z=0,X=h.length;z<X;z++)P?(v[z]=tt(h[z]),this._bounds.extend(v[z])):v[z]=this._convertLatLngs(h[z]);return v},_project:function(){var h=new pt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),v=new nt(h,h);this._rawPxBounds&&(this._pxBounds=new pt([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(h,v,P){var z=h[0]instanceof Fe,X=h.length,ce,Se;if(z){for(Se=[],ce=0;ce<X;ce++)Se[ce]=this._map.latLngToLayerPoint(h[ce]),P.extend(Se[ce]);v.push(Se)}else for(ce=0;ce<X;ce++)this._projectLatlngs(h[ce],v,P)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,P,z,X,ce,Se,je,bt;for(P=0,X=0,ce=this._rings.length;P<ce;P++)for(bt=this._rings[P],z=0,Se=bt.length;z<Se-1;z++)je=Ga(bt[z],bt[z+1],h,z,!0),je&&(v[X]=v[X]||[],v[X].push(je[0]),(je[1]!==bt[z+1]||z===Se-2)&&(v[X].push(je[1]),X++))}},_simplifyPoints:function(){for(var h=this._parts,v=this.options.smoothFactor,P=0,z=h.length;P<z;P++)h[P]=Vo(h[P],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,v){var P,z,X,ce,Se,je,bt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(P=0,ce=this._parts.length;P<ce;P++)for(je=this._parts[P],z=0,Se=je.length,X=Se-1;z<Se;X=z++)if(!(!v&&z===0)&&Sa(h,je[X],je[z])<=bt)return!0;return!1}});function md(h,v){return new Do(h,v)}Do._flat=Rc;var jo=Do.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var v=Do.prototype._convertLatLngs.call(this,h),P=v.length;return P>=2&&v[0]instanceof Fe&&v[0].equals(v[P-1])&&v.pop(),v},_setLatLngs:function(h){Do.prototype._setLatLngs.call(this,h),Us(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Us(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,v=this.options.weight,P=new nt(v,v);if(h=new pt(h.min.subtract(P),h.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var z=0,X=this._rings.length,ce;z<X;z++)ce=Un(this._rings[z],h,!0),ce.length&&this._parts.push(ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var v=!1,P,z,X,ce,Se,je,bt,wt;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(ce=0,bt=this._parts.length;ce<bt;ce++)for(P=this._parts[ce],Se=0,wt=P.length,je=wt-1;Se<wt;je=Se++)z=P[Se],X=P[je],z.y>h.y!=X.y>h.y&&h.x<(X.x-z.x)*(h.y-z.y)/(X.y-z.y)+z.x&&(v=!v);return v||Do.prototype._containsPoint.call(this,h,!0)}});function gd(h,v){return new jo(h,v)}var xo=ta.extend({initialize:function(h,v){V(this,v),this._layers={},h&&this.addData(h)},addData:function(h){var v=Z(h)?h:h.features,P,z,X;if(v){for(P=0,z=v.length;P<z;P++)X=v[P],(X.geometries||X.geometry||X.features||X.coordinates)&&this.addData(X);return this}var ce=this.options;if(ce.filter&&!ce.filter(h))return this;var Se=hc(h,ce);return Se?(Se.feature=Ea(h),Se.defaultOptions=Se.options,this.resetStyle(Se),ce.onEachFeature&&ce.onEachFeature(h,Se),this.addLayer(Se)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=r({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(v){this._setLayerStyle(v,h)},this)},_setLayerStyle:function(h,v){h.setStyle&&(typeof v=="function"&&(v=v(h.feature)),h.setStyle(v))}});function hc(h,v){var P=h.type==="Feature"?h.geometry:h,z=P?P.coordinates:null,X=[],ce=v&&v.pointToLayer,Se=v&&v.coordsToLatLng||Cl,je,bt,wt,si;if(!z&&!P)return null;switch(P.type){case"Point":return je=Se(z),Sl(ce,h,je,v);case"MultiPoint":for(wt=0,si=z.length;wt<si;wt++)je=Se(z[wt]),X.push(Sl(ce,h,je,v));return new ta(X);case"LineString":case"MultiLineString":return bt=ur(z,P.type==="LineString"?0:1,Se),new Do(bt,v);case"Polygon":case"MultiPolygon":return bt=ur(z,P.type==="Polygon"?1:2,Se),new jo(bt,v);case"GeometryCollection":for(wt=0,si=P.geometries.length;wt<si;wt++){var ki=hc({geometry:P.geometries[wt],type:"Feature",properties:h.properties},v);ki&&X.push(ki)}return new ta(X);case"FeatureCollection":for(wt=0,si=P.features.length;wt<si;wt++){var on=hc(P.features[wt],v);on&&X.push(on)}return new ta(X);default:throw new Error("Invalid GeoJSON object.")}}function Sl(h,v,P,z){return h?h(v,P):new bo(P,z&&z.markersInheritOptions&&z)}function Cl(h){return new Fe(h[1],h[0],h[2])}function ur(h,v,P){for(var z=[],X=0,ce=h.length,Se;X<ce;X++)Se=v?ur(h[X],v-1,P):(P||Cl)(h[X]),z.push(Se);return z}function ka(h,v){return h=tt(h),h.alt!==void 0?[E(h.lng,v),E(h.lat,v),E(h.alt,v)]:[E(h.lng,v),E(h.lat,v)]}function Jl(h,v,P,z){for(var X=[],ce=0,Se=h.length;ce<Se;ce++)X.push(v?Jl(h[ce],Us(h[ce])?0:v-1,P,z):ka(h[ce],z));return!v&&P&&X.length>0&&X.push(X[0].slice()),X}function Xa(h,v){return h.feature?r({},h.feature,{geometry:v}):Ea(v)}function Ea(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var fc={toGeoJSON:function(h){return Xa(this,{type:"Point",coordinates:ka(this.getLatLng(),h)})}};bo.include(fc),Ya.include(fc),Tl.include(fc),Do.include({toGeoJSON:function(h){var v=!Us(this._latlngs),P=Jl(this._latlngs,v?1:0,!1,h);return Xa(this,{type:(v?"Multi":"")+"LineString",coordinates:P})}}),jo.include({toGeoJSON:function(h){var v=!Us(this._latlngs),P=v&&!Us(this._latlngs[0]),z=Jl(this._latlngs,P?2:v?1:0,!0,h);return v||(z=[z]),Xa(this,{type:(P?"Multi":"")+"Polygon",coordinates:z})}}),qa.include({toMultiPoint:function(h){var v=[];return this.eachLayer(function(P){v.push(P.toGeoJSON(h).geometry.coordinates)}),Xa(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(h){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(h);var P=v==="GeometryCollection",z=[];return this.eachLayer(function(X){if(X.toGeoJSON){var ce=X.toGeoJSON(h);if(P)z.push(ce.geometry);else{var Se=Ea(ce);Se.type==="FeatureCollection"?z.push.apply(z,Se.features):z.push(Se)}}}),P?Xa(this,{geometries:z,type:"GeometryCollection"}):{type:"FeatureCollection",features:z}}});function pc(h,v){return new xo(h,v)}var Bc=pc,kl=to.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,v,P){this._url=h,this._bounds=Qt(v),V(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&bi(this._image),this},bringToBack:function(){return this._map&&_n(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=Qt(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",v=this._image=h?this._url:En("img");if(fn(v,"leaflet-image-layer"),this._zoomAnimated&&fn(v,"leaflet-zoom-animated"),this.options.className&&fn(v,this.options.className),v.onselectstart=S,v.onmousemove=S,v.onload=c(this.fire,this,"load"),v.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(h){var v=this._map.getZoomScale(h.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;In(this._image,P,v)},_reset:function(){var h=this._image,v=new pt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=v.getSize();tr(h,v.min),h.style.width=P.x+"px",h.style.height=P.y+"px"},_updateOpacity:function(){ns(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),mc=function(h,v,P){return new kl(h,v,P)},Fc=kl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",v=this._image=h?this._url:En("video");if(fn(v,"leaflet-image-layer"),this._zoomAnimated&&fn(v,"leaflet-zoom-animated"),this.options.className&&fn(v,this.options.className),v.onselectstart=S,v.onmousemove=S,v.onloadeddata=c(this.fire,this,"load"),h){for(var P=v.getElementsByTagName("source"),z=[],X=0;X<P.length;X++)z.push(P[X].src);this._url=P.length>0?z:[v.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var ce=0;ce<this._url.length;ce++){var Se=En("source");Se.src=this._url[ce],v.appendChild(Se)}}});function Du(h,v,P){return new Fc(h,v,P)}var El=kl.extend({_initImage:function(){var h=this._image=this._url;fn(h,"leaflet-image-layer"),this._zoomAnimated&&fn(h,"leaflet-zoom-animated"),this.options.className&&fn(h,this.options.className),h.onselectstart=S,h.onmousemove=S}});function $c(h,v,P){return new El(h,v,P)}var wo=to.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,v){h&&(h instanceof Fe||Z(h))?(this._latlng=tt(h),V(this,v)):(V(this,h),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&ns(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&ns(this._container,1),this.bringToFront(),this.options.interactive&&(fn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(ns(this._container,0),this._removeTimeout=setTimeout(c(dr,void 0,this._container),200)):dr(this._container),this.options.interactive&&(nr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=tt(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bi(this._container),this},bringToBack:function(){return this._map&&_n(this._container),this},_prepareOpen:function(h){var v=this._source;if(!v._map)return!1;if(v instanceof ta){v=null;var P=this._source._layers;for(var z in P)if(P[z]._map){v=P[z];break}if(!v)return!1;this._source=v}if(!h)if(v.getCenter)h=v.getCenter();else if(v.getLatLng)h=v.getLatLng();else if(v.getBounds)h=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")h.innerHTML=v;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),v=Tt(this.options.offset),P=this._getAnchor();this._zoomAnimated?tr(this._container,h.add(P)):v=v.add(h).add(P);var z=this._containerBottom=-v.y,X=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=z+"px",this._container.style.left=X+"px"}},_getAnchor:function(){return[0,0]}});Sn.include({_initOverlay:function(h,v,P,z){var X=v;return X instanceof h||(X=new h(z).setContent(v)),P&&X.setLatLng(P),X}}),to.include({_initOverlay:function(h,v,P,z){var X=P;return X instanceof h?(V(X,z),X._source=this):(X=v&&!z?v:new h(z,this),X.setContent(P)),X}});var eu=wo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,wo.prototype.openOn.call(this,h)},onAdd:function(h){wo.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ca||this._source.on("preclick",Lr))},onRemove:function(h){wo.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ca||this._source.off("preclick",Lr))},getEvents:function(){var h=wo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",v=this._container=En("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=En("div",h+"-content-wrapper",v);if(this._contentNode=En("div",h+"-content",P),Oo(v),ql(this._contentNode),ln(v,"contextmenu",Lr),this._tipContainer=En("div",h+"-tip-container",v),this._tip=En("div",h+"-tip",this._tipContainer),this.options.closeButton){var z=this._closeButton=En("a",h+"-close-button",v);z.setAttribute("role","button"),z.setAttribute("aria-label","Close popup"),z.href="#close",z.innerHTML='<span aria-hidden="true">&#215;</span>',ln(z,"click",function(X){xr(X),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,v=h.style;v.width="",v.whiteSpace="nowrap";var P=h.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),v.width=P+1+"px",v.whiteSpace="",v.height="";var z=h.offsetHeight,X=this.options.maxHeight,ce="leaflet-popup-scrolled";X&&z>X?(v.height=X+"px",fn(h,ce)):nr(h,ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var v=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),P=this._getAnchor();tr(this._container,v.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,v=parseInt(Qs(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+v,z=this._containerWidth,X=new nt(this._containerLeft,-P-this._containerBottom);X._add(Or(this._container));var ce=h.layerPointToContainerPoint(X),Se=Tt(this.options.autoPanPadding),je=Tt(this.options.autoPanPaddingTopLeft||Se),bt=Tt(this.options.autoPanPaddingBottomRight||Se),wt=h.getSize(),si=0,ki=0;ce.x+z+bt.x>wt.x&&(si=ce.x+z-wt.x+bt.x),ce.x-si-je.x<0&&(si=ce.x-je.x),ce.y+P+bt.y>wt.y&&(ki=ce.y+P-wt.y+bt.y),ce.y-ki-je.y<0&&(ki=ce.y-je.y),(si||ki)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([si,ki]))}},_getAnchor:function(){return Tt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tu=function(h,v){return new eu(h,v)};Sn.mergeOptions({closePopupOnClick:!0}),Sn.include({openPopup:function(h,v,P){return this._initOverlay(eu,h,v,P).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),to.include({bindPopup:function(h,v){return this._popup=this._initOverlay(eu,this._popup,h,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof ta||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){zo(h);var v=h.layer||h.target;if(this._popup._source===v&&!(v instanceof Ca)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=v,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var io=wo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){wo.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){wo.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=wo.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",v=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=En("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var v,P,z=this._map,X=this._container,ce=z.latLngToContainerPoint(z.getCenter()),Se=z.layerPointToContainerPoint(h),je=this.options.direction,bt=X.offsetWidth,wt=X.offsetHeight,si=Tt(this.options.offset),ki=this._getAnchor();je==="top"?(v=bt/2,P=wt):je==="bottom"?(v=bt/2,P=0):je==="center"?(v=bt/2,P=wt/2):je==="right"?(v=0,P=wt/2):je==="left"?(v=bt,P=wt/2):Se.x<ce.x?(je="right",v=0,P=wt/2):(je="left",v=bt+(si.x+ki.x)*2,P=wt/2),h=h.subtract(Tt(v,P,!0)).add(si).add(ki),nr(X,"leaflet-tooltip-right"),nr(X,"leaflet-tooltip-left"),nr(X,"leaflet-tooltip-top"),nr(X,"leaflet-tooltip-bottom"),fn(X,"leaflet-tooltip-"+je),tr(X,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&ns(this._container,h)},_animateZoom:function(h){var v=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(v)},_getAnchor:function(){return Tt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),iu=function(h,v){return new io(h,v)};Sn.include({openTooltip:function(h,v,P){return this._initOverlay(io,h,v,P).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),to.include({bindTooltip:function(h,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(io,this._tooltip,h,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var v=h?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[v](P),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof ta||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var v=typeof h.getElement=="function"&&h.getElement();v&&(ln(v,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),ln(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var v=typeof h.getElement=="function"&&h.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var v=h.latlng,P,z;this._tooltip.options.sticky&&h.originalEvent&&(P=this._map.mouseEventToContainerPoint(h.originalEvent),z=this._map.containerPointToLayerPoint(P),v=this._map.layerPointToLatLng(z)),this._tooltip.setLatLng(v)}});var nu=yo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var v=h&&h.tagName==="DIV"?h:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Qo(v),v.appendChild(P.html)):v.innerHTML=P.html!==!1?P.html:"",P.bgPos){var z=Tt(P.bgPos);v.style.backgroundPosition=-z.x+"px "+-z.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function ru(h){return new nu(h)}yo.Default=ia;var na=to.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){V(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),dr(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof nt?h:new nt(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var v=this.getPane().children,P=-h(-1/0,1/0),z=0,X=v.length,ce;z<X;z++)ce=v[z].style.zIndex,v[z]!==this._container&&ce&&(P=h(P,+ce));isFinite(P)&&(this.options.zIndex=P+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){ns(this._container,this.options.opacity);var h=+new Date,v=!1,P=!1;for(var z in this._tiles){var X=this._tiles[z];if(!(!X.current||!X.loaded)){var ce=Math.min(1,(h-X.loaded)/200);ns(X.el,ce),ce<1?v=!0:(X.active?P=!0:this._onOpaqueTile(X),X.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),v&&(Ie(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=En("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,v=this.options.maxZoom;if(h!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===h?(this._levels[P].el.style.zIndex=v-Math.abs(h-P),this._onUpdateLevel(P)):(dr(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var z=this._levels[h],X=this._map;return z||(z=this._levels[h]={},z.el=En("div","leaflet-tile-container leaflet-zoom-animated",this._container),z.el.style.zIndex=v,z.origin=X.project(X.unproject(X.getPixelOrigin()),h).round(),z.zoom=h,this._setZoomTransform(z,X.getCenter(),X.getZoom()),S(z.el.offsetWidth),this._onCreateLevel(z)),this._level=z,z}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var h,v,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)v=this._tiles[h],v.retain=v.current;for(h in this._tiles)if(v=this._tiles[h],v.current&&!v.active){var z=v.coords;this._retainParent(z.x,z.y,z.z,z.z-5)||this._retainChildren(z.x,z.y,z.z,z.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var v in this._tiles)this._tiles[v].coords.z===h&&this._removeTile(v)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)dr(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,v,P,z){var X=Math.floor(h/2),ce=Math.floor(v/2),Se=P-1,je=new nt(+X,+ce);je.z=+Se;var bt=this._tileCoordsToKey(je),wt=this._tiles[bt];return wt&&wt.active?(wt.retain=!0,!0):(wt&&wt.loaded&&(wt.retain=!0),Se>z?this._retainParent(X,ce,Se,z):!1)},_retainChildren:function(h,v,P,z){for(var X=2*h;X<2*h+2;X++)for(var ce=2*v;ce<2*v+2;ce++){var Se=new nt(X,ce);Se.z=P+1;var je=this._tileCoordsToKey(Se),bt=this._tiles[je];if(bt&&bt.active){bt.retain=!0;continue}else bt&&bt.loaded&&(bt.retain=!0);P+1<z&&this._retainChildren(X,ce,P+1,z)}},_resetView:function(h){var v=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var v=this.options;return v.minNativeZoom!==void 0&&h<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<h?v.maxNativeZoom:h},_setView:function(h,v,P,z){var X=Math.round(v);this.options.maxZoom!==void 0&&X>this.options.maxZoom||this.options.minZoom!==void 0&&X<this.options.minZoom?X=void 0:X=this._clampZoom(X);var ce=this.options.updateWhenZooming&&X!==this._tileZoom;(!z||ce)&&(this._tileZoom=X,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),X!==void 0&&this._update(h),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(h,v)},_setZoomTransforms:function(h,v){for(var P in this._levels)this._setZoomTransform(this._levels[P],h,v)},_setZoomTransform:function(h,v,P){var z=this._map.getZoomScale(P,h.zoom),X=h.origin.multiplyBy(z).subtract(this._map._getNewPixelOrigin(v,P)).round();De.any3d?In(h.el,X,z):tr(h.el,X)},_resetGrid:function(){var h=this._map,v=h.options.crs,P=this._tileSize=this.getTileSize(),z=this._tileZoom,X=this._map.getPixelWorldBounds(this._tileZoom);X&&(this._globalTileRange=this._pxBoundsToTileRange(X)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,v.wrapLng[0]],z).x/P.x),Math.ceil(h.project([0,v.wrapLng[1]],z).x/P.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([v.wrapLat[0],0],z).y/P.x),Math.ceil(h.project([v.wrapLat[1],0],z).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var v=this._map,P=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),z=v.getZoomScale(P,this._tileZoom),X=v.project(h,this._tileZoom).floor(),ce=v.getSize().divideBy(z*2);return new pt(X.subtract(ce),X.add(ce))},_update:function(h){var v=this._map;if(v){var P=this._clampZoom(v.getZoom());if(h===void 0&&(h=v.getCenter()),this._tileZoom!==void 0){var z=this._getTiledPixelBounds(h),X=this._pxBoundsToTileRange(z),ce=X.getCenter(),Se=[],je=this.options.keepBuffer,bt=new pt(X.getBottomLeft().subtract([je,-je]),X.getTopRight().add([je,-je]));if(!(isFinite(X.min.x)&&isFinite(X.min.y)&&isFinite(X.max.x)&&isFinite(X.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var wt in this._tiles){var si=this._tiles[wt].coords;(si.z!==this._tileZoom||!bt.contains(new nt(si.x,si.y)))&&(this._tiles[wt].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(h,P);return}for(var ki=X.min.y;ki<=X.max.y;ki++)for(var on=X.min.x;on<=X.max.x;on++){var cr=new nt(on,ki);if(cr.z=this._tileZoom,!!this._isValidTile(cr)){var Cr=this._tiles[this._tileCoordsToKey(cr)];Cr?Cr.current=!0:Se.push(cr)}}if(Se.sort(function(Ss,Ja){return Ss.distanceTo(ce)-Ja.distanceTo(ce)}),Se.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _s=document.createDocumentFragment();for(on=0;on<Se.length;on++)this._addTile(Se[on],_s);this._level.el.appendChild(_s)}}}},_isValidTile:function(h){var v=this._map.options.crs;if(!v.infinite){var P=this._globalTileRange;if(!v.wrapLng&&(h.x<P.min.x||h.x>P.max.x)||!v.wrapLat&&(h.y<P.min.y||h.y>P.max.y))return!1}if(!this.options.bounds)return!0;var z=this._tileCoordsToBounds(h);return Qt(this.options.bounds).overlaps(z)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var v=this._map,P=this.getTileSize(),z=h.scaleBy(P),X=z.add(P),ce=v.unproject(z,h.z),Se=v.unproject(X,h.z);return[ce,Se]},_tileCoordsToBounds:function(h){var v=this._tileCoordsToNwSe(h),P=new Mt(v[0],v[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var v=h.split(":"),P=new nt(+v[0],+v[1]);return P.z=+v[2],P},_removeTile:function(h){var v=this._tiles[h];v&&(dr(v.el),delete this._tiles[h],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){fn(h,"leaflet-tile");var v=this.getTileSize();h.style.width=v.x+"px",h.style.height=v.y+"px",h.onselectstart=S,h.onmousemove=S,De.ielt9&&this.options.opacity<1&&ns(h,this.options.opacity)},_addTile:function(h,v){var P=this._getTilePos(h),z=this._tileCoordsToKey(h),X=this.createTile(this._wrapCoords(h),c(this._tileReady,this,h));this._initTile(X),this.createTile.length<2&&we(c(this._tileReady,this,h,null,X)),tr(X,P),this._tiles[z]={el:X,coords:h,current:!0},v.appendChild(X),this.fire("tileloadstart",{tile:X,coords:h})},_tileReady:function(h,v,P){v&&this.fire("tileerror",{error:v,tile:P,coords:h});var z=this._tileCoordsToKey(h);P=this._tiles[z],P&&(P.loaded=+new Date,this._map._fadeAnimated?(ns(P.el,0),Ie(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),v||(fn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?we(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var v=new nt(this._wrapX?b(h.x,this._wrapX):h.x,this._wrapY?b(h.y,this._wrapY):h.y);return v.z=h.z,v},_pxBoundsToTileRange:function(h){var v=this.getTileSize();return new pt(h.min.unscaleBy(v).floor(),h.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function Ia(h){return new na(h)}var To=na.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,v){this._url=h,v=V(this,v),v.detectRetina&&De.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,v){return this._url===h&&v===void 0&&(v=!0),this._url=h,v||this.redraw(),this},createTile:function(h,v){var P=document.createElement("img");return ln(P,"load",c(this._tileOnLoad,this,v,P)),ln(P,"error",c(this._tileOnError,this,v,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(h),P},getTileUrl:function(h){var v={r:De.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-h.y;this.options.tms&&(v.y=P),v["-y"]=P}return H(this._url,r(v,this.options))},_tileOnLoad:function(h,v){De.ielt9?setTimeout(c(h,this,null,v),0):h(null,v)},_tileOnError:function(h,v,P){var z=this.options.errorTileUrl;z&&v.getAttribute("src")!==z&&(v.src=z),h(P,v)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,v=this.options.maxZoom,P=this.options.zoomReverse,z=this.options.zoomOffset;return P&&(h=v-h),h+z},_getSubdomain:function(h){var v=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var h,v;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(v=this._tiles[h].el,v.onload=S,v.onerror=S,!v.complete)){v.src=ie;var P=this._tiles[h].coords;dr(v),delete this._tiles[h],this.fire("tileabort",{tile:v,coords:P})}},_removeTile:function(h){var v=this._tiles[h];if(v)return v.el.setAttribute("src",ie),na.prototype._removeTile.call(this,h)},_tileReady:function(h,v,P){if(!(!this._map||P&&P.getAttribute("src")===ie))return na.prototype._tileReady.call(this,h,v,P)}});function Dn(h,v){return new To(h,v)}var Ru=To.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,v){this._url=h;var P=r({},this.defaultWmsParams);for(var z in v)z in this.options||(P[z]=v[z]);v=V(this,v);var X=v.detectRetina&&De.retina?2:1,ce=this.getTileSize();P.width=ce.x*X,P.height=ce.y*X,this.wmsParams=P},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,To.prototype.onAdd.call(this,h)},getTileUrl:function(h){var v=this._tileCoordsToNwSe(h),P=this._crs,z=et(P.project(v[0]),P.project(v[1])),X=z.min,ce=z.max,Se=(this._wmsVersion>=1.3&&this._crs===Pu?[X.y,X.x,ce.y,ce.x]:[X.x,X.y,ce.x,ce.y]).join(","),je=To.prototype.getTileUrl.call(this,h);return je+q(this.wmsParams,je,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Se},setParams:function(h,v){return r(this.wmsParams,h),v||this.redraw(),this}});function _d(h,v){return new Ru(h,v)}To.WMS=Ru,Dn.wms=_d;var Ts=to.extend({options:{padding:.1},initialize:function(h){V(this,h),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),fn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,v){var P=this._map.getZoomScale(v,this._zoom),z=this._map.getSize().multiplyBy(.5+this.options.padding),X=this._map.project(this._center,v),ce=z.multiplyBy(-P).add(X).subtract(this._map._getNewPixelOrigin(h,v));De.any3d?In(this._container,ce,P):tr(this._container,ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,v=this._map.getSize(),P=this._map.containerPointToLayerPoint(v.multiplyBy(-h)).round();this._bounds=new pt(P,P.add(v.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qn=Ts.extend({options:{tolerance:0},getEvents:function(){var h=Ts.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ts.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");ln(h,"mousemove",this._onMouseMove,this),ln(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ln(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){Ie(this._redrawRequest),delete this._ctx,dr(this._container),Yn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var v in this._layers)h=this._layers[v],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ts.prototype._update.call(this);var h=this._bounds,v=this._container,P=h.getSize(),z=De.retina?2:1;tr(v,h.min),v.width=z*P.x,v.height=z*P.y,v.style.width=P.x+"px",v.style.height=P.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){Ts.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[p(h)]=h;var v=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var v=h._order,P=v.next,z=v.prev;P?P.prev=z:this._drawLast=z,z?z.next=P:this._drawFirst=P,delete h._order,delete this._layers[p(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var v=h.options.dashArray.split(/[, ]+/),P=[],z,X;for(X=0;X<v.length;X++){if(z=Number(v[X]),isNaN(z))return;P.push(z)}h.options._dashArray=P}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||we(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var v=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new pt,this._redrawBounds.extend(h._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(h._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var v=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,v=this._redrawBounds;if(this._ctx.save(),v){var P=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var z=this._drawFirst;z;z=z.next)h=z.layer,(!v||h._pxBounds&&h._pxBounds.intersects(v))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,v){if(this._drawing){var P,z,X,ce,Se=h._parts,je=Se.length,bt=this._ctx;if(je){for(bt.beginPath(),P=0;P<je;P++){for(z=0,X=Se[P].length;z<X;z++)ce=Se[P][z],bt[z?"lineTo":"moveTo"](ce.x,ce.y);v&&bt.closePath()}this._fillStroke(bt,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var v=h._point,P=this._ctx,z=Math.max(Math.round(h._radius),1),X=(Math.max(Math.round(h._radiusY),1)||z)/z;X!==1&&(P.save(),P.scale(1,X)),P.beginPath(),P.arc(v.x,v.y/X,z,0,Math.PI*2,!1),X!==1&&P.restore(),this._fillStroke(P,h)}},_fillStroke:function(h,v){var P=v.options;P.fill&&(h.globalAlpha=P.fillOpacity,h.fillStyle=P.fillColor||P.color,h.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(h.setLineDash&&h.setLineDash(v.options&&v.options._dashArray||[]),h.globalAlpha=P.opacity,h.lineWidth=P.weight,h.strokeStyle=P.color,h.lineCap=P.lineCap,h.lineJoin=P.lineJoin,h.stroke())},_onClick:function(h){for(var v=this._map.mouseEventToLayerPoint(h),P,z,X=this._drawFirst;X;X=X.next)P=X.layer,P.options.interactive&&P._containsPoint(v)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(P))&&(z=P);this._fireEvent(z?[z]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,v)}},_handleMouseOut:function(h){var v=this._hoveredLayer;v&&(nr(this._container,"leaflet-interactive"),this._fireEvent([v],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,v){if(!this._mouseHoverThrottled){for(var P,z,X=this._drawFirst;X;X=X.next)P=X.layer,P.options.interactive&&P._containsPoint(v)&&(z=P);z!==this._hoveredLayer&&(this._handleMouseOut(h),z&&(fn(this._container,"leaflet-interactive"),this._fireEvent([z],h,"mouseover"),this._hoveredLayer=z)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,v,P){this._map._fireDOMEvent(v,P||v.type,h)},_bringToFront:function(h){var v=h._order;if(v){var P=v.next,z=v.prev;if(P)P.prev=z;else return;z?z.next=P:P&&(this._drawFirst=P),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(h)}},_bringToBack:function(h){var v=h._order;if(v){var P=v.next,z=v.prev;if(z)z.next=P;else return;P?P.prev=z:z&&(this._drawLast=z),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(h)}}});function ra(h){return De.canvas?new Qn(h):null}var rs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),no={_initContainer:function(){this._container=En("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ts.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var v=h._container=rs("shape");fn(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",h._path=rs("path"),v.appendChild(h._path),this._updateStyle(h),this._layers[p(h)]=h},_addPath:function(h){var v=h._container;this._container.appendChild(v),h.options.interactive&&h.addInteractiveTarget(v)},_removePath:function(h){var v=h._container;dr(v),h.removeInteractiveTarget(v),delete this._layers[p(h)]},_updateStyle:function(h){var v=h._stroke,P=h._fill,z=h.options,X=h._container;X.stroked=!!z.stroke,X.filled=!!z.fill,z.stroke?(v||(v=h._stroke=rs("stroke")),X.appendChild(v),v.weight=z.weight+"px",v.color=z.color,v.opacity=z.opacity,z.dashArray?v.dashStyle=Z(z.dashArray)?z.dashArray.join(" "):z.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=z.lineCap.replace("butt","flat"),v.joinstyle=z.lineJoin):v&&(X.removeChild(v),h._stroke=null),z.fill?(P||(P=h._fill=rs("fill")),X.appendChild(P),P.color=z.fillColor||z.color,P.opacity=z.fillOpacity):P&&(X.removeChild(P),h._fill=null)},_updateCircle:function(h){var v=h._point.round(),P=Math.round(h._radius),z=Math.round(h._radiusY||P);this._setPath(h,h._empty()?"M0 0":"AL "+v.x+","+v.y+" "+P+","+z+" 0,"+65535*360)},_setPath:function(h,v){h._path.v=v},_bringToFront:function(h){bi(h._container)},_bringToBack:function(h){_n(h._container)}},Bu=De.vml?rs:Xe,sa=Ts.extend({_initContainer:function(){this._container=Bu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dr(this._container),Yn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ts.prototype._update.call(this);var h=this._bounds,v=h.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,P.setAttribute("width",v.x),P.setAttribute("height",v.y)),tr(P,h.min),P.setAttribute("viewBox",[h.min.x,h.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(h){var v=h._path=Bu("path");h.options.className&&fn(v,h.options.className),h.options.interactive&&fn(v,"leaflet-interactive"),this._updateStyle(h),this._layers[p(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){dr(h._path),h.removeInteractiveTarget(h._path),delete this._layers[p(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var v=h._path,P=h.options;v&&(P.stroke?(v.setAttribute("stroke",P.color),v.setAttribute("stroke-opacity",P.opacity),v.setAttribute("stroke-width",P.weight),v.setAttribute("stroke-linecap",P.lineCap),v.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?v.setAttribute("stroke-dasharray",P.dashArray):v.removeAttribute("stroke-dasharray"),P.dashOffset?v.setAttribute("stroke-dashoffset",P.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),P.fill?(v.setAttribute("fill",P.fillColor||P.color),v.setAttribute("fill-opacity",P.fillOpacity),v.setAttribute("fill-rule",P.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(h,v){this._setPath(h,it(h._parts,v))},_updateCircle:function(h){var v=h._point,P=Math.max(Math.round(h._radius),1),z=Math.max(Math.round(h._radiusY),1)||P,X="a"+P+","+z+" 0 1,0 ",ce=h._empty()?"M0 0":"M"+(v.x-P)+","+v.y+X+P*2+",0 "+X+-P*2+",0 ";this._setPath(h,ce)},_setPath:function(h,v){h._path.setAttribute("d",v)},_bringToFront:function(h){bi(h._path)},_bringToBack:function(h){_n(h._path)}});De.vml&&sa.include(no);function oa(h){return De.svg||De.vml?new sa(h):null}Sn.include({getRenderer:function(h){var v=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var v=this._paneRenderers[h];return v===void 0&&(v=this._createRenderer({pane:h}),this._paneRenderers[h]=v),v},_createRenderer:function(h){return this.options.preferCanvas&&ra(h)||oa(h)}});var Il=jo.extend({initialize:function(h,v){jo.prototype.initialize.call(this,this._boundsToLatLngs(h),v)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=Qt(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function gc(h,v){return new Il(h,v)}sa.create=Bu,sa.pointsToPath=it,xo.geometryToLayer=hc,xo.coordsToLatLng=Cl,xo.coordsToLatLngs=ur,xo.latLngToCoords=ka,xo.latLngsToCoords=Jl,xo.getFeature=Xa,xo.asFeature=Ea,Sn.mergeOptions({boxZoom:!0});var Pa=Js.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){ln(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ao(),pl(),this._startPoint=this._map.mouseEventToContainerPoint(h),ln(document,{contextmenu:zo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=En("div","leaflet-zoom-box",this._container),fn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var v=new pt(this._point,this._startPoint),P=v.getSize();tr(this._box,v.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(dr(this._box),nr(this._container,"leaflet-crosshair")),_o(),Jo(),Yn(document,{contextmenu:zo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var v=new Mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Sn.addInitHook("addHandler","boxZoom",Pa),Sn.mergeOptions({doubleClickZoom:!0});var Ka=Js.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var v=this._map,P=v.getZoom(),z=v.options.zoomDelta,X=h.originalEvent.shiftKey?P-z:P+z;v.options.doubleClickZoom==="center"?v.setZoom(X):v.setZoomAround(h.containerPoint,X)}});Sn.addInitHook("addHandler","doubleClickZoom",Ka),Sn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var su=Js.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new eo(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}fn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nr(this._map._container,"leaflet-grab"),nr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=Qt(this._map.options.maxBounds);this._offsetLimit=et(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var v=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(v),this._prunePositions(v)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,v){return h-(h-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;h.x<v.min.x&&(h.x=this._viscousLimit(h.x,v.min.x)),h.y<v.min.y&&(h.y=this._viscousLimit(h.y,v.min.y)),h.x>v.max.x&&(h.x=this._viscousLimit(h.x,v.max.x)),h.y>v.max.y&&(h.y=this._viscousLimit(h.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,v=Math.round(h/2),P=this._initialWorldOffset,z=this._draggable._newPos.x,X=(z-v+P)%h+v-P,ce=(z+v+P)%h-v-P,Se=Math.abs(X+P)<Math.abs(ce+P)?X:ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Se},_onDragEnd:function(h){var v=this._map,P=v.options,z=!P.inertia||h.noInertia||this._times.length<2;if(v.fire("dragend",h),z)v.fire("moveend");else{this._prunePositions(+new Date);var X=this._lastPos.subtract(this._positions[0]),ce=(this._lastTime-this._times[0])/1e3,Se=P.easeLinearity,je=X.multiplyBy(Se/ce),bt=je.distanceTo([0,0]),wt=Math.min(P.inertiaMaxSpeed,bt),si=je.multiplyBy(wt/bt),ki=wt/(P.inertiaDeceleration*Se),on=si.multiplyBy(-ki/2).round();!on.x&&!on.y?v.fire("moveend"):(on=v._limitOffset(on,v.options.maxBounds),we(function(){v.panBy(on,{duration:ki,easeLinearity:Se,noMoveStart:!0,animate:!0})}))}}});Sn.addInitHook("addHandler","dragging",su),Sn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qa=Js.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),ln(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,v=document.documentElement,P=h.scrollTop||v.scrollTop,z=h.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(z,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var v=this._panKeys={},P=this.keyCodes,z,X;for(z=0,X=P.left.length;z<X;z++)v[P.left[z]]=[-1*h,0];for(z=0,X=P.right.length;z<X;z++)v[P.right[z]]=[h,0];for(z=0,X=P.down.length;z<X;z++)v[P.down[z]]=[0,h];for(z=0,X=P.up.length;z<X;z++)v[P.up[z]]=[0,-1*h]},_setZoomDelta:function(h){var v=this._zoomKeys={},P=this.keyCodes,z,X;for(z=0,X=P.zoomIn.length;z<X;z++)v[P.zoomIn[z]]=h;for(z=0,X=P.zoomOut.length;z<X;z++)v[P.zoomOut[z]]=-h},_addHooks:function(){ln(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var v=h.keyCode,P=this._map,z;if(v in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(z=this._panKeys[v],h.shiftKey&&(z=Tt(z).multiplyBy(3)),P.options.maxBounds&&(z=P._limitOffset(Tt(z),P.options.maxBounds)),P.options.worldCopyJump){var X=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(z)));P.panTo(X)}else P.panBy(z)}else if(v in this._zoomKeys)P.setZoom(P.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;zo(h)}}});Sn.addInitHook("addHandler","keyboard",Qa),Sn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Li=Js.extend({addHooks:function(){ln(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var v=vl(h),P=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var z=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),z),zo(h)},_performZoom:function(){var h=this._map,v=h.getZoom(),P=this._map.options.zoomSnap||0;h._stop();var z=this._delta/(this._map.options.wheelPxPerZoomLevel*4),X=4*Math.log(2/(1+Math.exp(-Math.abs(z))))/Math.LN2,ce=P?Math.ceil(X/P)*P:X,Se=h._limitZoom(v+(this._delta>0?ce:-ce))-v;this._delta=0,this._startTime=null,Se&&(h.options.scrollWheelZoom==="center"?h.setZoom(v+Se):h.setZoomAround(this._lastMousePos,v+Se))}});Sn.addInitHook("addHandler","scrollWheelZoom",Li);var F=600;Sn.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var K=Js.extend({addHooks:function(){ln(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var v=h.touches[0];this._startPos=this._newPos=new nt(v.clientX,v.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(ln(document,"touchend",xr),ln(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),F),ln(document,"touchend touchcancel contextmenu",this._cancel,this),ln(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){Yn(document,"touchend",xr),Yn(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),Yn(document,"touchend touchcancel contextmenu",this._cancel,this),Yn(document,"touchmove",this._onMove,this)},_onMove:function(h){var v=h.touches[0];this._newPos=new nt(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,v){var P=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});P._simulated=!0,v.target.dispatchEvent(P)}});Sn.addInitHook("addHandler","tapHold",K),Sn.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var te=Js.extend({addHooks:function(){fn(this._map._container,"leaflet-touch-zoom"),ln(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nr(this._map._container,"leaflet-touch-zoom"),Yn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var v=this._map;if(!(!h.touches||h.touches.length!==2||v._animatingZoom||this._zooming)){var P=v.mouseEventToContainerPoint(h.touches[0]),z=v.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(P.add(z)._divideBy(2))),this._startDist=P.distanceTo(z),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),ln(document,"touchmove",this._onTouchMove,this),ln(document,"touchend touchcancel",this._onTouchEnd,this),xr(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var v=this._map,P=v.mouseEventToContainerPoint(h.touches[0]),z=v.mouseEventToContainerPoint(h.touches[1]),X=P.distanceTo(z)/this._startDist;if(this._zoom=v.getScaleZoom(X,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&X<1||this._zoom>v.getMaxZoom()&&X>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,X===1)return}else{var ce=P._add(z)._divideBy(2)._subtract(this._centerPoint);if(X===1&&ce.x===0&&ce.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(ce),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),Ie(this._animRequest);var Se=c(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=we(Se,this,!0),xr(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ie(this._animRequest),Yn(document,"touchmove",this._onTouchMove,this),Yn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Sn.addInitHook("addHandler","touchZoom",te),Sn.BoxZoom=Pa,Sn.DoubleClickZoom=Ka,Sn.Drag=su,Sn.Keyboard=Qa,Sn.ScrollWheelZoom=Li,Sn.TapHold=K,Sn.TouchZoom=te,i.Bounds=pt,i.Browser=De,i.CRS=Rt,i.Canvas=Qn,i.Circle=Ya,i.CircleMarker=Tl,i.Class=ke,i.Control=us,i.DivIcon=nu,i.DivOverlay=wo,i.DomEvent=Eu,i.DomUtil=Vs,i.Draggable=eo,i.Evented=gt,i.FeatureGroup=ta,i.GeoJSON=xo,i.GridLayer=na,i.Handler=Js,i.Icon=yo,i.ImageOverlay=kl,i.LatLng=Fe,i.LatLngBounds=Mt,i.Layer=to,i.LayerGroup=qa,i.LineUtil=uc,i.Map=Sn,i.Marker=bo,i.Mixin=rc,i.Path=Ca,i.Point=nt,i.PolyUtil=Ta,i.Polygon=jo,i.Polyline=Do,i.Popup=eu,i.PosAnimation=Ua,i.Projection=fd,i.Rectangle=Il,i.Renderer=Ts,i.SVG=sa,i.SVGOverlay=El,i.TileLayer=To,i.Tooltip=io,i.Transformation=Vi,i.Util=Oe,i.VideoOverlay=Fc,i.bind=c,i.bounds=et,i.canvas=ra,i.circle=ih,i.circleMarker=Lu,i.control=Ms,i.divIcon=ru,i.extend=r,i.featureGroup=Mu,i.geoJSON=pc,i.geoJson=Bc,i.gridLayer=Ia,i.icon=wl,i.imageOverlay=mc,i.latLng=tt,i.latLngBounds=Qt,i.layerGroup=pd,i.map=Iu,i.marker=Za,i.point=Tt,i.polygon=gd,i.polyline=md,i.popup=tu,i.rectangle=gc,i.setOptions=V,i.stamp=p,i.svg=oa,i.svgOverlay=$c,i.tileLayer=Dn,i.tooltip=iu,i.transformation=Ve,i.version=n,i.videoOverlay=Du;var ee=window.L;i.noConflict=function(){return window.L=ee,this},window.L=i})})(tce,sd);const ice=sd,nce=P9({__proto__:null,default:ice},[sd]);const rce={components:{GoogleMap:eh,Marker:Yf,AtomSpinner:is,LMap:xE,LTileLayer:EE,LMarker:wE,LIcon:bE,LPopup:CE,LPolyline:SE},data(){return{username:"",no_order_found:!1,session_live:!0,center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},orders:[],loading:!0,selectedOption1:"Please select one question",selectedOption2:"Please select one question",alert_title:"Confirmation",dialog:!1,notify_me:!1,selectedOption1ans:"",selectedOption2ans:"",no_security_question:!0,timeout_inst:!1,alert_description:"Do you want this Logout ?",refreash_timeline:6e4,questions:[{id:"q1",value:"What is your favorite book?"},{id:"q2",value:"What was the name of your first pet?"},{id:"q3",value:"In which city were you born?"},{id:"q4",value:"What is your mother's maiden name?"},{id:"q5",value:"What was the name of your first school?"},{id:"q6",value:"What is the name of your favorite childhood friend?"},{id:"q7",value:"What was the model of your first car?"},{id:"q8",value:"What is the name of your favorite movie?"},{id:"q9",value:"What street did you grow up on?"},{id:"q10",value:"What is your favorite song?"},{id:"q11",value:"What was the name of your first stuffed animal?"},{id:"q12",value:"What is the name of your favorite teacher?"},{id:"q13",value:"In which city did you meet your spouse/partner?"},{id:"q14",value:"What is your favorite food?"},{id:"q15",value:"What is the name of the company where you had your first job?"}],filterMenu:[{title:"Sort by Earning"},{title:"Sort by Distance"},{title:"Sort by Pickup Time"}],map:null,sortKey:"",firstcall:!1,centerLeaflet:[41.9855989,-87.8332167],markerOptionsPickupLeaflet:[41.9855989,-87.8332167],markerOptionsDropLeaflet:[41.9800399,-87.8650262],zoom:13,icon:sd.icon({iconUrl:IE,iconSize:[45,52],iconAnchor:[16,37]}),iconDrop:sd.icon({iconUrl:PE,iconSize:[45,52],iconAnchor:[16,37]})}},mounted(){this.username=localStorage.getItem("on_username"),this.sessionValidator(),this.punch_last_call_time(),window.addEventListener("focus",this.focusChange,!1)},methods:{focusChange(){this.timeout_inst!=!1&&localStorage.getItem("onboard_session_id")!=""&&this.validate_last_server_call()&&(this.loading=!0,this.get_open_orders())},logout(){},uploadQuestion(){if(this.selectedOption1=="Please select one question"||this.selectedOption2=="Please select one question")alert("Please fill all the security questions");else if(this.selectedOption1==this.selectedOption2)alert("Security Question Can Not Be Same");else if(this.selectedOption1ans==""||this.selectedOption2ans=="")alert("Security Answer Can Not Be Empty");else if(this.selectedOption1ans.split(/\S/g).length>100)alert("Security Answer 1 Can Not More Then 100 Characters");else if(this.selectedOption2ans.split(/\S/g).length>100)alert("Security Answer 2 Can Not Then 100 Characters");else{alert("All Questions uploaded"),this.loading=!0;var t=this.baseurl+"update_security_questions",e={};e[this.selectedOption1]=this.selectedOption1ans,e[this.selectedOption2]=this.selectedOption2ans;const i={identity:this.username,questions:e};Ai.post(t,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(n=>{this.loading=!1,n.status==200&&this.sessionValidator()}).catch(()=>{})}},openFeedback(){this.$router.push("/feedback")},openSettings(){this.$router.push("/settings")},openHelp(){this.$router.push("/help")},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";localStorage.getItem("on_username","")==""||localStorage.getItem("on_username","")==null,this.username=localStorage.getItem("on_username","");const e={identity:this.username,check:1};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(console.log(i),i.status==200){var n=i.data;n.force_sec_questions!==void 0?this.no_security_question=!1:this.no_security_question=!0,n.Success?(localStorage.setItem("profile_image",n.profile_image),this.initMap(),this.get_open_orders()):this.session_logout()}}).catch(()=>{})},settingUpdate(t){var e=this.baseurl+"dlivrd_drivers_verify_session";const i={identity:this.username,sort_key:t,check:4};Ai.post(e,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(n=>{if(n.status==200){var r=n.data;r.Success?this.get_open_orders():this.session_logout()}}).catch(()=>{})},session_logout(){localStorage.setItem("on_username",""),localStorage.setItem("onboard_session_id",""),this.alert_description="Session Expired.",this.session_live=!1,this.dialog=!0},punch_last_call_time(){var t=new Date;localStorage.setItem("last_call_time",t.getTime())},validate_last_server_call(){var t=localStorage.getItem("last_call_time"),e=new Date,i=(e.getTime()-t)/1e3;return i>60},get_open_orders(){localStorage.getItem("onboard_session_id")!=""&&(this.timeout_inst=!0,setTimeout(this.get_open_orders,this.refreash_timeline));var t=this.baseurl+"get_all_open_orders";const e={identity:this.username,page_number:1,records_per_page:30};if(this.firstcall==!0){if(document.hidden){this.loading=!1;return}if(!this.validate_last_server_call())return}else this.firstcall=!0;this.punch_last_call_time(),Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(this.loading=!1,this.firstcall=!0,i.status==200){var i=i.data;i.Success?(this.no_order_found=!1,this.orders=i.orders):i.Failure=="No eligible orders found for the provided rider."?(this.orders=[],this.no_order_found=!0,this.notify_me=i.allow_notify_me):i.Failure=="Session Expired. Please login again."||i.Failure=="User unavailable. Please contact administrator."?localStorage.getItem("onboard_session_id")!=""&&this.session_logout():(this.orders=[],this.no_order_found=!0,this.notify_me=i.allow_notify_me)}}).catch(()=>{this.orders=[],this.no_order_found=!0,this.notify_me=response.allow_notify_me})},set_notify_me(){this.loading=!0;var t=this.baseurl+"mark_notify_me";const e={identity:this.username};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(this.loading=!1,i.status==200){var i=i.data;i.Success=="You will be notified when an open order is available."&&(this.notify_me=!1)}}).catch(()=>{})},initMap(){},send_OTP(){alert("test")},viewOrderDetails(t){t==1?this.center=this.pickup:this.center=this.drop},filterMenuActions(t){t==0?this.sortKey="earning":t==1?this.sortKey="distance":this.sortKey="pickupAt",this.orders=[],this.settingUpdate(this.sortKey)}}},sce={class:"mobile-view"},oce={style:{"background-color":"white"}},ace={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},lce=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),uce={key:0,style:{"font-weight":"bold","text-align":"center",color:"black"}},cce={key:2,style:{width:"100%","justify-content":"center","margin-top":"10px"}},dce=Pe("h2",{style:{"text-align":"center"}},"Security Questions",-1),hce=Pe("h4",{style:{"text-align":"center"}},"Please update your Security questions.",-1),fce=Pe("option",{value:"Please select one question"},"Please select one question",-1),pce=["value"],mce=Pe("div",{style:{width:"100%",height:"0.2px","background-color":"white"}},null,-1),gce=Pe("option",{value:"Please select one question"},"Please select one question",-1),_ce=["value"],vce={key:3},yce={key:0,style:{position:"absolute",width:"100%","padding-top":"100px","text-align":"center","z-index":"10"}},bce=Pe("h2",{id:"no_open_order",style:{color:"White","font-weight":"bold","text-shadow":"-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black"}},"No OPEN ORDERS",-1),xce=Pe("div",{id:"timer_clock"},null,-1),wce={key:1,style:{width:"100%","text-align":"center",position:"absolute","z-index":"20"}},Tce={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll","scrollbar-width":"none"}},Sce=["onClick"],Cce={class:"order-details",style:{padding:"0px !important",margin:"0px!important",width:"100%"}},kce=Pe("p",{style:{color:"black",width:"100%","text-align":"center","font-weight":"bold","background-color":"#0afd01"}},"Earn",-1),Ece={style:{color:"black",width:"100%","text-align":"center","font-size":"14px","font-weight":"bold"}},Ice=Pe("p",{style:{color:"black",width:"100%","text-align":"center","font-weight":"bold","background-color":"#0afd01","margin-top":"10px"}},"Total",-1),Pce={style:{color:"black",width:"100%","text-align":"center","font-size":"14px","font-weight":"bold"}},Ace={style:{color:"black","font-size":"80%","font-weight":"bold"}},Mce={style:{color:"black","font-size":"80%"}},Oce={style:{color:"black","font-size":"80%"}},Lce={style:{color:"black","font-size":"80%"}},Dce=["onClick"],Rce={style:{display:"none"}},Bce={style:{height:"400px",width:"100%"},class:"map_box"},Fce=$g('<div class="order-list" style="display:block;padding-top:10px;"><div class="order-details" style="width:100% !important;margin-bottom:15px;"><div style="display:inline-flex;justify-content:space-between;width:100%;"><h2 style="font-weight:bold;color:black;">Price</h2><h2 style="color:black;">257$</h2></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Distance</p><p style="color:black;"><i class="fas fa-clock"></i>14.6 KM</p></div><div style="display:inline-flex;justify-content:space-between;width:100%;"><p style="font-weight:bold;color:black;">Earning</p><p style="color:black;"><i class="fas fa-map-marker-alt"></i> 25$</p></div></div></div>',1),$ce=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function Nce(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-list-item-title"),p=ue("v-list-item"),_=ue("v-list"),b=ue("v-menu"),S=ue("v-card-title"),E=ue("v-card-text"),I=ue("v-spacer"),R=ue("v-btn"),V=ue("v-card-actions"),q=ue("v-card"),U=ue("v-dialog"),H=ue("v-row"),Z=ue("v-col"),ne=ue("atom-spinner"),ie=ue("l-tile-layer"),oe=ue("l-marker"),pe=ue("l-map");return be(),ti("div",sce,[Pe("header",oce,[Pe("div",ace,[lce,w(b,{width:"200",location:"bottom"},{activator:D(({props:de})=>[w(c,Mi({size:"28",color:"#0afd01",style:{"border-radius":"30px",height:"50px",width:"50px"}},de),{default:D(()=>[ye(" mdi-dots-vertical ")]),_:2},1040)]),default:D(()=>[w(_,null,{default:D(()=>[w(p,{onClick:a.openSettings},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-cog")]),_:1}),ye("Settings ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openFeedback},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-comment-quote-outline")]),_:1}),ye("Feedback ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:a.openHelp},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{"margin-right":"10px"}},{default:D(()=>[ye("mdi-help")]),_:1}),ye("Help ")]),_:1})]),_:1},8,["onClick"]),w(p,{onClick:e[0]||(e[0]=de=>this.dialog=!0)},{default:D(()=>[w(s,null,{default:D(()=>[w(c,{style:{transform:"rotate(180deg)","margin-right":"10px"}},{default:D(()=>[ye("mdi-logout")]),_:1}),ye("Logout ")]),_:1})]),_:1})]),_:1})]),_:1})])]),w(H,{justify:"center"},{default:D(()=>[w(U,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=de=>r.dialog=de),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(q,null,{default:D(()=>[w(S,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(E,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),t.showError?(be(),He(E,{key:0,style:{color:"red","padding-top":"0px"},innerHTML:t.errorMessage},null,8,["innerHTML"])):We("",!0),w(V,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(I),r.session_live?(be(),He(R,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=de=>r.dialog=!1)},{default:D(()=>[ye(" No ")]),_:1})):We("",!0),w(R,{"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.logout},{default:D(()=>[ye(" Yes ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),!r.no_order_found&&r.session_live&&r.no_security_question?(be(),ti("h1",uce,"OPEN ORDERS")):We("",!0),We("",!0),r.no_security_question?We("",!0):(be(),ti("div",cce,[w(Z,null,{default:D(()=>[dce,hce]),_:1}),w(Z,null,{default:D(()=>[Br(Pe("select",{"onUpdate:modelValue":e[3]||(e[3]=de=>r.selectedOption1=de),class:"question_select"},[fce,(be(!0),ti(Oi,null,Zr(r.questions,de=>(be(),ti("option",{value:de.value},Zt(de.value),9,pce))),256))],512),[[z1,r.selectedOption1]])]),_:1}),w(Z,null,{default:D(()=>[Br(Pe("input",{"onUpdate:modelValue":e[4]||(e[4]=de=>r.selectedOption1ans=de),style:{width:"100%",height:"40px","border-radius":"2px"}},null,512),[[Up,r.selectedOption1ans]])]),_:1}),w(Z,null,{default:D(()=>[mce]),_:1}),w(Z,null,{default:D(()=>[Br(Pe("select",{"onUpdate:modelValue":e[5]||(e[5]=de=>r.selectedOption2=de),class:"question_select"},[gce,(be(!0),ti(Oi,null,Zr(r.questions,de=>(be(),ti("option",{value:de.value},Zt(de.value),9,_ce))),256))],512),[[z1,r.selectedOption2]])]),_:1}),w(Z,null,{default:D(()=>[Br(Pe("input",{"onUpdate:modelValue":e[6]||(e[6]=de=>r.selectedOption2ans=de),style:{width:"100%",height:"40px","border-radius":"2px"}},null,512),[[Up,r.selectedOption2ans]])]),_:1}),w(Z,{style:{"text-align":"center"}},{default:D(()=>[w(R,{onClick:a.uploadQuestion,variant:"outlined",height:"50",color:"#0E383A",class:"saveQBtn orderDetailsHeaderBtn"},{default:D(()=>[ye(" Save ")]),_:1},8,["onClick"])]),_:1})])),r.no_security_question?(be(),ti("div",vce,[r.no_order_found?(be(),ti("div",yce,[bce,xce,r.notify_me?(be(),He(R,{key:0,onClick:a.set_notify_me,variant:"outlined",height:"50",color:"#0E383A",class:"notifyMeBtn orderDetailsHeaderBtn"},{default:D(()=>[w(c,{size:"28"},{default:D(()=>[ye("mdi-bell")]),_:1}),ye(" Notify Me ")]),_:1},8,["onClick"])):We("",!0)])):We("",!0),r.loading&&r.session_live?(be(),ti("div",wce,[w(ne,{"animation-duration":1e3,size:90,color:"#000000",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),Pe("div",Tce,[Pe("main",null,[(be(!0),ti(Oi,null,Zr(r.orders,de=>(be(),ti("div",{key:de.id,class:"order-item openjob_block",style:{"background-color":"white"}},[Pe("div",{class:"order-info",style:{width:"100%"},onClick:fe=>this.$router.push("OpenOrdersDetail/"+de.order_id)},[Pe("div",Cce,[w(H,{style:{display:"inline-flex",width:"100%",margin:"0px"}},{default:D(()=>[w(Z,{class:"justify-center",style:{padding:"0px",margin:"0px",width:"20% !important","align-self":"center","flex-grow":"0.2"}},{default:D(()=>[kce,Pe("p",Ece,"$"+Zt(de.order_earnings),1),Ice,Pe("p",Pce,"$"+Zt(de.order_subtotal),1)]),_:2},1024),w(Z,{style:{padding:"0px",width:"20% !important","border-left":"1px solid #0afd01","margin-right":"5px","padding-left":"6px","padding-top":"5px","padding-bottom":"5px"}},{default:D(()=>[Pe("p",Ace,"O# "+Zt(de.order_id),1),w(Z,{style:{"flex-grow":"0.2",padding:"0px !important"}},{default:D(()=>[Pe("p",Mce,[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-store-clock")]),_:1}),ye(" "+Zt(de.pickups[0].pickupAt.replace("T"," ")),1)]),w(H,null,{default:D(()=>[w(Z,{cols:"1",sm:"1",style:{width:"10px"}},{default:D(()=>[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1})]),_:1}),w(Z,{style:{"align-self":"flex-end"}},{default:D(()=>[Pe("p",Oce,Zt(de.pickups[0].address),1)]),_:2},1024)]),_:2},1024),Pe("p",Lce,[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1}),ye(" "+Zt(Math.round(de.distance_to_dropoff*100)/100)+" Miles",1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)])],8,Sce),Pe("button",{onClick:fe=>this.$router.push("OpenOrdersDetail/"+de.order_id),style:{"background-color":"transparent",color:"black","font-weight":"bold","margin-right":"10px"}},[w(c,{style:{"background-color":"transparent","border-radius":"30px",height:"100%",width:"2px"},size:"50"},{default:D(()=>[ye("mdi-chevron-right")]),_:1})],8,Dce)]))),128)),Pe("div",Rce,[Pe("div",Bce,[w(pe,{ref:"map",zoom:r.zoom,"onUpdate:zoom":e[7]||(e[7]=de=>r.zoom=de),center:this.centerLeaflet},{default:D(()=>[w(ie,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),w(oe,{"lat-lng":this.markerOptionsPickupLeaflet,icon:r.icon},null,8,["lat-lng","icon"]),w(oe,{"lat-lng":this.markerOptionsDropLeaflet,icon:r.iconDrop},null,8,["lat-lng","icon"])]),_:1},8,["zoom","center"])]),Fce,Pe("div",null,[Pe("button",{class:"decision_button",onClick:e[8]||(e[8]=de=>a.viewOrderDetails(1)),style:{"background-color":"red"}},"Decline"),Pe("button",{class:"decision_button",onClick:e[9]||(e[9]=de=>a.viewOrderDetails(2)),style:{"background-color":"green"}},"Interested")])])])])])):We("",!0),$ce])}const zce=Kn(rce,[["render",Nce]]),Y6=""+new URL("Chompies-a0a4b89c.png",import.meta.url).href,X6=""+new URL("Cosi-fec54bcd.png",import.meta.url).href,K6=""+new URL("EmmySquaredPizza-b1be9295.png",import.meta.url).href,Q6=""+new URL("EzCater-2545f01a.png",import.meta.url).href,J6=""+new URL("HipCityVeg-9eba6e42.png",import.meta.url).href,e$=""+new URL("LocalGrind-db69ad82.png",import.meta.url).href,t$=""+new URL("QDOBA-e3468da0.png",import.meta.url).href,i$=""+new URL("QDOBA-e3468da0.png",import.meta.url).href,n$=""+new URL("Sauce-5c4176ec.png",import.meta.url).href,r$=""+new URL("sharebite-d6599387.png",import.meta.url).href,s$=""+new URL("SimpleCater-3f4e9800.png",import.meta.url).href,o$=""+new URL("TacoDeli-0500b60a.png",import.meta.url).href,a$=""+new URL("vromo-5a148bd0.png",import.meta.url).href;const Vce={components:{GoogleMap:eh,Marker:Yf,AtomSpinner:is,LMap:xE,LTileLayer:EE,LMarker:wE,LIcon:bE,LPopup:CE,LPolyline:SE},data(){return{order_details:{},order_id:"",username:"",loading:!0,order_found:!1,first_job:"",markerlist:[],confirmation_loading:!1,partners_icons:{Chompies:Y6,Cosi:X6,EmmySquaredPizza:K6,EzCater:Q6,Foodee:Vy,HipCityVeg:J6,LocalGrind:e$,QDOBA:t$,QdobaPhilly:i$,Sauce:n$,sharebite:r$,SimpleCater:s$,TacoDeli:o$,vromo:a$,dlivrd:_r},btn_back:!0,delivery_partner_image:_r,order_subtotal:0,alert_title:"Confirmation",order_confirmed:!1,dialog:!1,urgent_link:!1,alert_description:"Do you want this order ?",center:{lat:41.9855989,lng:-87.8332167},pickup:{lat:41.9855989,lng:-87.8332167},markerOptionspickup:{position:{lat:41.9855989,lng:-87.8332167},label:"P",title:"Hooters"},drop:{lat:41.9800399,lng:-87.8650262},markerOptionsdrop:{position:{lat:41.9800399,lng:-87.8650262},label:"D",title:"Bridge Industrial"},jobs:[],orders:[{id:1,orderNumber:"Pickup_1",time:"9:00 AM",address:"123 Main St"},{id:2,orderNumber:"Drop_1",time:"10:30 AM",address:"456 Elm St"}],map:null,zoom:13,icon:sd.icon({iconUrl:IE,iconSize:[45,52],iconAnchor:[16,37]}),iconDrop:sd.icon({iconUrl:PE,iconSize:[45,52],iconAnchor:[16,37]})}},mounted(){this.order_id=this.$route.params.Order_id,this.username=localStorage.getItem("on_username");var t=String(window.location);t.includes("/ur/")&&(this.urgent_link=!0,this.btn_back=!1),this.urgent_link==!0?this.get_open_order(this.order_id):this.sessionValidator()},methods:{return_to_list(){this.dialog=!1,this.$router.go(-1)},sessionValidator(){var t=this.baseurl+"dlivrd_drivers_verify_session";const e={identity:this.username,check:2};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{if(this.loading=!0,i.status==200){var n=i.data;n.Success?(localStorage.setItem("profile_image",n.profile_image),this.get_open_order(this.order_id)):(alert("session Expired "),this.$router.go(-1))}}).catch(()=>{this.loading=!1})},simluate_open_order(){this.dialog=!1,this.confirmation_loading=!0},decide_open_order(){this.dialog=!1,this.confirmation_loading=!0;var t=this.baseurl+"assign_open_order",e={"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id","")},i={identity:this.username,order_id:this.order_id};this.urgent_link==!0&&(t=this.baseurl+"urgent_order_request",e={"Content-Type":"application/json;charset=UTF-8"},i={token:this.order_id}),Ai.post(t,i,{headers:e}).then(n=>{this.loading=!1,n.data.Success=="Rider Added to the urgent request list"?(this.alert_title="Order Sent",this.alert_description="You have been added to the wait list.If order is available it will be sent to your driver app",this.confirmation_loading=!1,this.order_confirmed=!0,this.dialog=!0):n.data.Success?(this.alert_title="Order Sent",this.alert_description="Please check your driver app to accept the order ",this.confirmation_loading=!1,this.order_confirmed=!0,this.dialog=!0):n.data.Failure=="Order is already in assigned state."?(this.alert_title="Order Update",this.alert_description="If order is available it will be sent to your driver app ",this.confirmation_loading=!1,this.order_confirmed=!0,this.dialog=!0):(this.alert_title="Order Update",this.alert_description="If order is available it will be sent to your driver app ",this.confirmation_loading=!1,this.order_confirmed=!0,this.dialog=!0)}).catch(()=>{})},append_marker_google_map(){},get_open_order(t){var e=this.baseurl+"get_single_open_order_details",i={"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id","")},n={identity:this.username,page_number:1,order_id:t};this.urgent_link==!0&&(e=this.baseurl+"urgent_order_retrieve_data",i={"Content-Type":"application/json;charset=UTF-8"},n={token:t}),Ai.post(e,n,{headers:i}).then(r=>{if(r.status==200){var r=r.data;if(r.Success=="Order found."||r.Success=="Order Returned"){this.order_details=r.order,this.order_found=!0,this.loading=!1,this.order_details.order_subtotal!==void 0?this.order_subtotal=this.order_details.order_subtotal:this.order_subtotal=this.order_details.subtotal,this.order_details.delivery_partner in this.partners_icons?this.delivery_partner_image=this.partners_icons[this.order_details.delivery_partner]:this.delivery_partner_image=_r;for(var a=0;a<this.order_details.pickups.length;a++){this.markerOptionsPickupLeaflet=[parseFloat(this.order_details.pickups[a].latitude),parseFloat(this.order_details.pickups[a].longitude)];var c={position:{lat:parseFloat(this.order_details.pickups[a].latitude),lng:parseFloat(this.order_details.pickups[a].longitude)},label:"P",title:this.order_details.pickups[a].location_name,icon:this.icon};this.markerlist.push(c),this.jobs.push({type:"Pickup",location_name:this.order_details.pickups[a].location_name,address:this.order_details.pickups[a].address,time:this.order_details.pickups[a].pickupAt,latitude:this.order_details.pickups[a].latitude,longitude:this.order_details.pickups[a].longitude,marker_location:c})}for(var a=0;a<this.order_details.dropoffs.length;a++){this.markerOptionsDropLeaflet=[parseFloat(this.order_details.dropoffs[a].latitude),parseFloat(this.order_details.dropoffs[a].longitude)];var c={position:{lat:parseFloat(this.order_details.dropoffs[a].latitude),lng:parseFloat(this.order_details.dropoffs[a].longitude)},label:"D",title:this.order_details.dropoffs[a].location_name,icon:this.iconDrop};this.markerlist.push(c),this.jobs.push({type:"Dropoff",location_name:this.order_details.dropoffs[a].location_name,address:this.order_details.dropoffs[a].address,time:this.order_details.dropoffs[a].dropoffAt,latitude:this.order_details.dropoffs[a].latitude,longitude:this.order_details.dropoffs[a].longitude,marker_location:c})}this.center=this.markerlist[0].position}else this.loading=!1}else this.loading=!1}).catch(()=>{})},initMap(){},viewOrderDetails(t){this.center=t.position}}},Uce={class:"order_view_web"},jce={style:{"background-color":"white","border-bottom":"3px #0afd01 solid"}},Hce={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},Gce=Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"},null,-1),Wce={key:0,id:"header2",style:{"font-weight":"bold","margin-top":"20px","text-align":"center","padding-left":"10px",color:"black"}},qce={key:1,id:"header",style:{"font-weight":"bold","text-align":"left","padding-left":"10px",color:"black"}},Zce={key:2,style:{width:"100%","align-items":"center",position:"absolute"}},Yce={key:3,style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},Xce={key:0},Kce=Pe("div",{id:"map",class:"map",style:{display:"none"}},null,-1),Qce={style:{height:"400px",width:"100%"},class:"map_box"},Jce={class:"order-list",style:{display:"block","padding-top":"10px"}},ede={class:"order-details",style:{width:"100% !important","margin-bottom":"15px"}},tde={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},ide=Pe("h2",{style:{"font-weight":"bold",color:"black"}},"Earning",-1),nde={style:{color:"black","font-weight":"bold"}},rde={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},sde=Pe("p",{style:{"font-weight":"bold",color:"black"}},"Distance",-1),ode={style:{color:"black"}},ade=Pe("i",{class:"fas fa-clock"},null,-1),lde={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},ude=Pe("p",{style:{"font-weight":"bold",color:"black"}},"Order Value",-1),cde={style:{color:"black"}},dde=Pe("i",{class:"fas fa-map-marker-alt"},null,-1),hde={style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},fde=Pe("p",{style:{"font-weight":"bold",color:"black","padding-top":"10px"}},"Partner",-1),pde=["src"],mde=Pe("div",{style:{display:"inline-flex","justify-content":"space-between",width:"100%"}},[Pe("p",{style:{"font-weight":"bold",color:"black"}},"DELIVERY ACTIVITY")],-1),gde={class:"delivery_activity"},_de=["onClick"],vde={style:{display:"inline-flex"}},yde={style:{}},bde={key:0,class:"activity_track"},xde=Pe("p",{style:{visibility:"hidden"}},"p",-1),wde=[xde],Tde={key:1,class:"activity_track_icon"},Sde=Pe("div",{class:"activity_infoblock"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),Cde=Pe("div",{class:"activity_track"},[Pe("p",{style:{visibility:"hidden"}},"p")],-1),kde={style:{"margin-left":"20px"}},Ede={style:{color:"black","font-weight":"bold"}},Ide={style:{color:"black"}},Pde={style:{color:"black","font-size":"80%"}},Ade={key:0,style:{"text-align":"center"}},Mde=Pe("footer",{style:{position:"absolute",bottom:"20px",width:"100%"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function Ode(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-card-title"),p=ue("v-card-text"),_=ue("v-spacer"),b=ue("v-btn"),S=ue("v-card-actions"),E=ue("v-card"),I=ue("v-dialog"),R=ue("v-row"),V=ue("atom-spinner"),q=ue("l-tile-layer"),U=ue("l-marker"),H=ue("l-map"),Z=ue("v-col");return be(),ti("div",Uce,[Pe("header",jce,[Pe("div",Hce,[r.urgent_link?We("",!0):(be(),He(c,{key:0,onClick:e[0]||(e[0]=ne=>t.$router.go(-1)),style:{"background-color":"transparent",color:"#0afd01","border-radius":"30px",height:"100%",width:"50px"},size:"50"},{default:D(()=>[ye("mdi-arrow-left-thin-circle-outline")]),_:1})),Gce])]),w(R,{justify:"center"},{default:D(()=>[w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[2]||(e[2]=ne=>r.dialog=ne),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(E,null,{default:D(()=>[w(s,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(p,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),t.showError?(be(),He(p,{key:0,style:{color:"red","padding-top":"0px"},innerHTML:t.errorMessage},null,8,["innerHTML"])):We("",!0),w(S,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(_),r.order_confirmed==!1?(be(),He(b,{key:0,"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[1]||(e[1]=ne=>r.dialog=!1)},{default:D(()=>[ye(" Cancel ")]),_:1})):We("",!0),r.order_confirmed==!1?(be(),He(b,{key:1,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.decide_open_order},{default:D(()=>[ye(" Confirm ")]),_:1},8,["onClick"])):We("",!0),r.order_confirmed==!0?(be(),He(b,{key:2,"prepend-icon":"mdi-check",style:{"background-color":"#7efb01"},variant:"text",onClick:a.return_to_list},{default:D(()=>[ye(" Ok ")]),_:1},8,["onClick"])):We("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),!r.order_found&&!r.loading?(be(),ti("h3",Wce,"Order Already Claimed")):We("",!0),!r.loading&&r.order_found?(be(),ti("h1",qce,"O# "+Zt(r.order_details.order_id),1)):We("",!0),r.loading||r.confirmation_loading?(be(),ti("div",Zce,[w(V,{"animation-duration":1e3,size:190,color:"black",style:{margin:"auto","margin-top":"100px","z-index":"100"}})])):We("",!0),r.order_found?(be(),ti("div",Yce,[r.loading?We("",!0):(be(),ti("main",Xce,[Kce,Pe("div",Qce,[w(H,{ref:"map",zoom:r.zoom,"onUpdate:zoom":e[3]||(e[3]=ne=>r.zoom=ne),center:this.center},{default:D(()=>[w(q,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(be(!0),ti(Oi,null,Zr(this.markerlist,ne=>(be(),He(U,{"lat-lng":ne.position,icon:ne.icon},null,8,["lat-lng","icon"]))),256))]),_:1},8,["zoom","center"])]),Pe("div",Jce,[Pe("div",ede,[Pe("div",tde,[ide,Pe("h2",nde,Zt(r.order_details.order_earnings)+" $",1)]),Pe("div",rde,[sde,Pe("p",ode,[ade,ye(Zt(Math.round(r.order_details.distance_to_dropoff*100)/100)+" Miles",1)])]),Pe("div",lde,[ude,Pe("p",cde,[dde,ye(" "+Zt(r.order_subtotal)+"$",1)])]),Pe("div",hde,[fde,ye(),Pe("img",{class:"logo",style:{"object-fit":"contain",width:"150px"},src:r.delivery_partner_image,width:"125",height:"50"},null,8,pde)])]),mde,Pe("div",gde,[(be(!0),ti(Oi,null,Zr(this.jobs,ne=>(be(),ti("div",{onClick:ie=>a.viewOrderDetails(ne.marker_location),key:ne.id,class:"activity_block"},[Pe("div",vde,[Pe("div",yde,[ne.type!="Pickup"?(be(),ti("div",bde,wde)):We("",!0),ne.type=="Pickup"?(be(),ti("div",Tde,[w(c,{color:"#0afd01",style:{"border-radius":"30px",height:"100%"},size:"40"},{default:D(()=>[ye("mdi-truck-delivery-outline")]),_:1})])):We("",!0),Sde,Cde]),Pe("div",kde,[Pe("h4",Ede,Zt(ne.location_name),1),Pe("p",Ide,[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-store-clock")]),_:1}),ye(" "+Zt(ne.time.replace("T"," ")),1)]),w(R,null,{default:D(()=>[w(Z,{cols:"1",sm:"1",style:{width:"10px"}},{default:D(()=>[w(c,{size:"20",style:{color:"#0afd01"}},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1})]),_:1}),w(Z,{style:{"align-self":"flex-end"}},{default:D(()=>[Pe("p",Pde,Zt(ne.address),1)]),_:2},1024)]),_:2},1024)])])],8,_de))),128))])]),r.loading||r.confirmation_loading?We("",!0):(be(),ti("div",Ade,[r.btn_back?(be(),ti("button",{key:0,class:"decision_button",onClick:e[4]||(e[4]=ne=>this.$router.go(-1)),style:{"background-color":"red",color:"black","font-size":"15px","font-weight":"bold"}},"BACK")):We("",!0),Pe("button",{class:"decision_button",onClick:e[5]||(e[5]=ne=>r.dialog=!0),style:{"background-color":"#0afd01",color:"black","font-size":"15px","font-weight":"bold"}},"INTERESTED")]))]))])):We("",!0),Mde])}const Lde=Kn(Vce,[["render",Ode]]);const Dde={name:"ImgUpload",props:{primary_color:{type:String},secondary_color:{type:String},text_color:{type:String}},data(){return{alert_title:"",alert_description:"",dialog:!1,buttonAction:!1,showBagsWarning:!1,quantityOfBags:["1","2","3","4","5","6","7","8","9","10","10+"],uploadImageDefault:so,numberOfBags:3,cateringBags:!0,bagsImage:null,bagsImageFile:null,lazy_load_bags_image:"",loadingBagsImage:!0,fileBags:null,bagsImagesList:[],existingBagImages:[],removedBagsImages:[],bagsImageFileList:[],NumberOfBagsImages:0,addNewBagsImage:!0}},emits:["upload"],methods:{selectBagsImage(){if(this.bagsImagesList.length>=this.numberOfBags){this.alert_title="Image Limit Reached",this.alert_description="Maximum number of images uploaded!",this.dialog=!0,this.agreeButtonText="Okay";return}this.$refs.bagsFileInputData.click()},removeBagsImage(t,e){if(this.bagsImagesList.includes(e)){if(e.includes(this.baseImageurl)){var i=e.split(this.baseImageurl);e=i[1]}this.existingBagImages.includes(e)?(this.bagsImagesList.splice(this.bagsImagesList.indexOf(e),1),this.removedBagsImages.push(e)):(this.bagsImagesList.splice(this.bagsImagesList.indexOf(e),1),this.bagsImageFileList.splice(this.bagsImageFileList.indexOf(e),1))}this.numberOfBagsImages=this.numberOfBagsImages-1,this.numberOfBagsImages<3&&(this.addNewBagsImage=!0),this.$emit("upload",this.bagsImageFileList)},pickBagsFile(t){this.bagsImageFile=t.target.files[0],this.lazy_load_bags_image="";let i=this.$refs.bagsFileInputData.files;if(i&&i[0]){let n=new FileReader;n.onload=r=>{this.bagsImage=r.target.result,this.bagsImagesList.push(this.bagsImage),this.bagsImageFileList.push(this.bagsImageFile)},n.readAsDataURL(i[0])}this.numberOfBagsImages=this.numberOfBagsImages+1,this.numberOfBagsImages==3&&(this.addNewBagsImage=!1),this.$emit("upload",this.bagsImageFileList)},saveVehicleAndBagDetails(){if(this.bagsImageFileList.length<1){this.alert_title="No images uploaded",this.alert_description="Please upload the Dropoff images first.",this.dialog=!0;return}this.showBagsWarning=!1;var t=this.baseurl+"update_rider_vehicle_bag_details";this.buttonAction=!1;for(var e=new FormData,i=0;i<this.bagsImageFileList.length;i++)e.append("drop_image_"+i,this.bagsImageFileList[i]);Ai.post(t,e,{headers:{"Content-Type":"multipart/form-data",session:localStorage.getItem("session_id")}}).then(n=>{console.log("Save vehicle and Bag Details API response"),console.log(n),this.processingDetails=!1,this.buttonAction=!1,n.data.Success?(this.alert_title="Update Successful",this.alert_description="dlivrd Driver vehicle and bag details updated.",this.$emit("upload")):(this.alert_title="Update Failed",this.alert_description="Vehicle and bag details not updated. Try Again!"),this.dialog=!0,this.agreeButtonText="Okay"}).catch(()=>{})}}},Rde={class:"bagsImagesMainBlock"};function Bde(t,e,i,n,r,a){const c=ue("v-icon"),s=ue("v-card-subtitle"),p=ue("v-row"),_=ue("v-badge"),b=ue("v-img"),S=ue("v-file-input"),E=ue("v-card-title"),I=ue("v-card-text"),R=ue("v-spacer"),V=ue("v-btn"),q=ue("v-card-actions"),U=ue("v-card"),H=ue("v-dialog"),Z=ue("v-col");return r.cateringBags?(be(),He(Z,{key:0,style:ir({"background-color":i.primary_color,color:i.secondary_color})},{default:D(()=>[w(p,{onClick:e[0]||(e[0]=ne=>a.selectBagsImage()),class:"image_block",style:ir({"border-color":i.secondary_color})},{default:D(()=>[w(c,null,{default:D(()=>[ye("mdi-image-multiple")]),_:1}),w(s,{style:{"font-weight":"bold"}},{default:D(()=>[ye(" Upload Delivery Photos ")]),_:1})]),_:1},8,["style"]),w(p,{style:ir([{"background-color":i.primary_color,color:i.secondary_color},{display:"grid","justify-content":"center"}]),cols:"12"},{default:D(()=>[Pe("div",Rde,[(be(!0),ti(Oi,null,Zr(r.bagsImagesList,(ne,ie)=>(be(),ti("div",{key:ie,class:"imagePreviewBlockBags",style:ir({"background-color":i.primary_color})},[w(_,{style:{"z-index":"100"},icon:"mdi-close",onClick:oe=>a.removeBagsImage(ie,ne)},null,8,["onClick"]),w(b,{width:"370px","aspect-ratio":"1:1",src:ne,"lazy-src":ne,class:"bg-grey-lighten-2 imagePreviewWrapperBags"},null,8,["src","lazy-src"])],4))),128))])]),_:1},8,["style"]),w(S,{ref:"bagsFileInputData",type:"file",accept:"image/*",modelValue:r.fileBags,"onUpdate:modelValue":e[1]||(e[1]=ne=>r.fileBags=ne),onEmptied:e[2]||(e[2]=ne=>r.fileBags=null),onInput:a.pickBagsFile,style:{display:"none"}},null,8,["modelValue","onInput"]),w(H,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[4]||(e[4]=ne=>r.dialog=ne),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(U,null,{default:D(()=>[w(E,{class:"text-h5",style:ir({"background-color":i.primary_color,color:i.text_color})},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1},8,["style"]),w(I,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(q,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(R),w(V,{theme:"dark",class:"btnDialog","prepend-icon":"mdi-close",style:ir([{"pointer-events":"visible",cursor:"pointer"},{"background-color":i.primary_color,color:i.text_color}]),variant:"outlined",onClick:e[3]||(e[3]=ne=>r.dialog=!1)},{default:D(()=>[ye(" Ok ")]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["style"])):We("",!0)}const Fde=Kn(Dde,[["render",Bde],["__scopeId","data-v-ce527924"]]);(function(){try{var t=document.createElement("style");t.appendChild(document.createTextNode('@keyframes animated-50e610f5{0%{background-position:-300px 0}to{background-position:300px 0}}@keyframes shine-50e610f5{to{width:100%;transition:all 5s ease-out;background-color:#fff0}}.slideunlock[data-v-50e610f5]{--su-size-text: 24px;--su-size-padding: 6px;--su-color-bg: #EBEBEB;--su-color-progress-normal-bg: #CACACA;--su-color-progress-complete-bg: #42B983;--su-color-text-normal: #4F4F4F;--su-color-text-complete: #FEFEFE;--su-color-handler-bg: #FFFFFF;--su-icon-handler: url(data:image/svg;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0ZDhlNWY5My05NmI0LTRlNWQtOGFjYi03ZTY4OGYyMTU2ZTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTEyNTVEMURGMkVFMTFFNEI5NDBCMjQ2M0ExMDQ1OUYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTEyNTVEMUNGMkVFMTFFNEI5NDBCMjQ2M0ExMDQ1OUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MTc5NzNmZS02OTQxLTQyOTYtYTIwNi02NDI2YTNkOWU5YmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NGQ4ZTVmOTMtOTZiNC00ZTVkLThhY2ItN2U2ODhmMjE1NmU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+YiRG4AAAALFJREFUeNpi/P//PwMlgImBQkA9A+bOnfsIiBOxKcInh+yCaCDuByoswaIOpxwjciACFegBqZ1AvBSIS5OTk/8TkmNEjwWgQiUgtQuIjwAxUF3yX3xyGIEIFLwHpKyAWB+I1xGSwxULIGf9A7mQkBwTlhBXAFLHgPgqEAcTkmNCU6AL9d8WII4HOvk3ITkWJAXWUMlOoGQHmsE45ViQ2KuBuASoYC4Wf+OUYxz6mQkgwAAN9mIrUReCXgAAAABJRU5ErkJggg==);display:flex;position:relative;box-sizing:content-box;padding:var(--su-size-padding);background-color:var(--su-color-bg);text-align:center}.slideunlock[data-v-50e610f5]:after{content:"";position:absolute;top:0;left:0;width:0%;height:100%;transition:none;animation:shine-50e610f5 4s infinite;background-color:#fff6}.slideunlock .slideunlock-progressbar[data-v-50e610f5]{position:absolute;z-index:1;width:0;height:34px;transition:background 1s ease-out;background-color:var(--su-color-progress-normal-bg)}.slideunlock .slideunlock-text[data-v-50e610f5]{display:inline;z-index:2;align-items:center;justify-content:center;width:100%;transition:background 1s ease,color 1s ease;animation:animated-50e610f5 2s linear infinite;background:var(--su-color-text-normal) linear-gradient(90deg,rgba(255,255,255,0),white,rgba(255,255,255,0)) no-repeat;background-clip:text;-webkit-background-clip:text;color:transparent;font-size:var(--su-size-text);-webkit-user-select:none;user-select:none}.slideunlock .slideunlock-text[data-v-50e610f5]:before{content:"";display:inline-block;height:100%;vertical-align:middle}.slideunlock .slideunlock-handler[data-v-50e610f5]{position:absolute;z-index:3;top:0;left:0;margin:var(--su-size-padding);transition:background .75s ease,transform .1s ease-in;background:var(--su-color-handler-bg) var(--su-icon-handler) no-repeat center;cursor:grab}.slideunlock .slideunlock-handler[data-v-50e610f5]:active{transform:scale(1.05);cursor:grabbing}.slideunlock.is-circle[data-v-50e610f5]{border-radius:50rem}.slideunlock.is-circle[data-v-50e610f5]:after{border-radius:50rem 0 0 50rem}.slideunlock.is-circle .slideunlock-handler[data-v-50e610f5]{border-radius:50%}.slideunlock.is-noanimate[data-v-50e610f5]:after{animation:none}.slideunlock.is-noanimate .slideunlock-text[data-v-50e610f5]{animation:none;color:var(--su-color-text-normal)}.slideunlock.is-disabled[data-v-50e610f5]{opacity:.5}.slideunlock.is-disabled[data-v-50e610f5]:after{content:"";position:absolute;z-index:10;top:0;left:0;width:100%;height:100%;animation:none;opacity:.5;background-color:var(--su-color-bg)}.slideunlock.is-disabled .slideunlock-text[data-v-50e610f5]{animation:none;opacity:.25;color:var(--su-color-text-normal)}.slideunlock.is-disabled .slideunlock-handler[data-v-50e610f5]{pointer-events:none}.slideunlock.is-disabled.is-circle[data-v-50e610f5]:after{border-radius:50rem}.slideunlock.is-complete[data-v-50e610f5]:after{animation:none}.slideunlock.is-complete .slideunlock-progressbar[data-v-50e610f5]{background-color:var(--su-color-progress-complete-bg)}.slideunlock.is-complete .slideunlock-text[data-v-50e610f5]{animation:none;opacity:1!important;color:var(--su-color-text-complete)}.slideunlock.is-complete .slideunlock-handler[data-v-50e610f5]{opacity:0;background:var(--su-color-progress-complete-bg)}')),document.head.appendChild(t)}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var f1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uL=typeof window<"u"&&"requestAnimationFrame"in window?window.requestAnimationFrame:function(t){setTimeout(t,16)};function $de(t){var e="startValue"in t?t.startValue:0,i="endValue"in t?t.endValue:1,n="durationMs"in t?t.durationMs:200,r=t.onComplete||function(){},a=n/16,c=(i-e)/a,s=Math.PI/a,p=e,_=0;function b(){_+=s,p+=c*Math.pow(Math.sin(_),2)*2,_<Math.PI?(t.onStep(p),uL(b)):(t.onStep(i),r())}uL(b)}var Nde=$de;const zde=l$(Nde);var Vde="Expected a function",cL=0/0,Ude="[object Symbol]",jde=/^\s+|\s+$/g,Hde=/^[-+]0x[0-9a-f]+$/i,Gde=/^0b[01]+$/i,Wde=/^0o[0-7]+$/i,qde=parseInt,Zde=typeof f1=="object"&&f1&&f1.Object===Object&&f1,Yde=typeof self=="object"&&self&&self.Object===Object&&self,Xde=Zde||Yde||Function("return this")(),Kde=Object.prototype,Qde=Kde.toString,Jde=Math.max,ehe=Math.min,r2=function(){return Xde.Date.now()};function the(t,e,i){var n,r,a,c,s,p,_=0,b=!1,S=!1,E=!0;if(typeof t!="function")throw new TypeError(Vde);e=dL(e)||0,MS(i)&&(b=!!i.leading,S="maxWait"in i,a=S?Jde(dL(i.maxWait)||0,e):a,E="trailing"in i?!!i.trailing:E);function I(oe){var pe=n,de=r;return n=r=void 0,_=oe,c=t.apply(de,pe),c}function R(oe){return _=oe,s=setTimeout(U,e),b?I(oe):c}function V(oe){var pe=oe-p,de=oe-_,fe=e-pe;return S?ehe(fe,a-de):fe}function q(oe){var pe=oe-p,de=oe-_;return p===void 0||pe>=e||pe<0||S&&de>=a}function U(){var oe=r2();if(q(oe))return H(oe);s=setTimeout(U,V(oe))}function H(oe){return s=void 0,E&&n?I(oe):(n=r=void 0,c)}function Z(){s!==void 0&&clearTimeout(s),_=0,n=p=r=s=void 0}function ne(){return s===void 0?c:H(r2())}function ie(){var oe=r2(),pe=q(oe);if(n=arguments,r=this,p=oe,pe){if(s===void 0)return R(p);if(S)return s=setTimeout(U,e),I(p)}return s===void 0&&(s=setTimeout(U,e)),c}return ie.cancel=Z,ie.flush=ne,ie}function MS(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ihe(t){return!!t&&typeof t=="object"}function nhe(t){return typeof t=="symbol"||ihe(t)&&Qde.call(t)==Ude}function dL(t){if(typeof t=="number")return t;if(nhe(t))return cL;if(MS(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=MS(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jde,"");var i=Gde.test(t);return i||Wde.test(t)?qde(t.slice(2),i?2:8):Hde.test(t)?cL:+t}var rhe=the;const she=l$(rhe),ohe=qn({name:"SlideUnlock",props:{autoWidth:{type:Boolean,default:!0},width:{type:Number,default:400},height:{type:Number,default:60},text:{type:String,default:"slide to unlock"},successText:{type:String,default:"success"},circle:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},noanimate:{type:Boolean,default:!1},name:{type:String,default:"slideunlock"}},setup(t,{emit:e}){const i=Bo({CanMove:!1,IsComplete:!1,StartPositionWindow:0,HandlerPosition:0,ProgressWidth:0,TextOpacity:1}),n=Me(()=>({width:t.autoWidth?"auto":t.width+"px",height:t.height+"px"})),r=Me(()=>({width:i.ProgressWidth+"px",height:t.height+"px",borderRadius:t.circle?i.IsComplete?t.height/2+"px ":t.height/2+"px 0 0 "+t.height/2+"px":0})),a=Me(()=>({left:i.HandlerPosition+"px",width:t.height+"px",height:t.height+"px"})),c=Me(()=>i.IsComplete?t.successText:t.text),s=Me(()=>{const I=document.getElementById(t.name);return t.autoWidth?I.clientWidth-parseInt(getComputedStyle(I).getPropertyValue("--su-size-padding").replace("px",""),10)*2:t.width});Fi(()=>t.autoWidth,()=>{i.IsComplete&&setTimeout(()=>{i.ProgressWidth=s.value},1)}),Fi(()=>t.width,()=>{i.IsComplete&&(i.ProgressWidth=s.value)});const p=she(function(){const I=(s.value-t.height)*(100/i.HandlerPosition)/1e3-.1;i.CanMove&&(i.TextOpacity=I)},5),_=I=>{i.IsComplete||(i.CanMove=!0,window.TouchEvent&&I instanceof TouchEvent&&I.touches?i.StartPositionWindow=I.touches[0].pageX-i.HandlerPosition:I instanceof MouseEvent&&(i.StartPositionWindow=I.pageX-i.HandlerPosition)),document.onmousemove=R=>(b(R),!1),document.onmouseup=R=>(S(R),document.onmousemove=null,!1)},b=I=>{i.CanMove&&!i.IsComplete&&(window.TouchEvent&&I instanceof TouchEvent&&I.touches?i.HandlerPosition=I.touches[0].pageX-i.StartPositionWindow:I instanceof MouseEvent&&(i.HandlerPosition=I.pageX-i.StartPositionWindow),i.HandlerPosition>0&&i.HandlerPosition<=s.value-t.height?(i.ProgressWidth=i.HandlerPosition+t.height/2,p()):i.HandlerPosition>s.value-t.height&&(i.HandlerPosition=s.value-t.height,i.ProgressWidth=s.value,E()))},S=I=>{i.CanMove&&!i.IsComplete&&(window.TouchEvent&&I instanceof TouchEvent&&I.touches?i.HandlerPosition=I.changedTouches[0].pageX-i.StartPositionWindow:I instanceof MouseEvent&&(i.HandlerPosition=I.pageX-i.StartPositionWindow),i.HandlerPosition<s.value-t.height&&(zde({startValue:i.HandlerPosition,endValue:0,durationMs:200,onStep:R=>{i.HandlerPosition=R,i.ProgressWidth=R+t.height/2}}),i.TextOpacity=1),i.CanMove=!1)},E=()=>{i.IsComplete=!0,i.CanMove=!1,e("completed")};return{Slider:i,slideUnlockStyle:n,progressBarStyle:r,handlerStyle:a,message:c,sliderWidth:s,slideStart:_,slideMoving:b,slideFinish:S,reset:()=>{i.CanMove=!1,i.IsComplete=!1,i.StartPositionWindow=0,i.HandlerPosition=0,i.ProgressWidth=0,i.TextOpacity=1},complete:()=>{i.CanMove=!1,i.IsComplete=!0,i.StartPositionWindow=0,i.HandlerPosition=0,i.ProgressWidth=s.value,i.TextOpacity=1}}}}),ahe=(t,e)=>{const i=t.__vccOpts||t;for(const[n,r]of e)i[n]=r;return i},lhe=["id"];function uhe(t,e,i,n,r,a){return be(),ti("div",{id:t.name,class:Zs(["slideunlock",{"is-disabled":t.disabled,"is-noanimate":t.noanimate,"is-circle":t.circle,"is-complete":t.Slider.IsComplete}]),style:ir(t.slideUnlockStyle),onMousemove:e[2]||(e[2]=(...c)=>t.slideMoving&&t.slideMoving(...c)),onMouseup:e[3]||(e[3]=(...c)=>t.slideFinish&&t.slideFinish(...c)),onTouchmove:e[4]||(e[4]=(...c)=>t.slideMoving&&t.slideMoving(...c)),onTouchend:e[5]||(e[5]=(...c)=>t.slideFinish&&t.slideFinish(...c))},[Pe("div",{class:"slideunlock-progressbar",style:ir(t.progressBarStyle)},null,4),Pe("div",{class:"slideunlock-text",style:ir({opacity:t.Slider.TextOpacity})},Zt(t.message),5),Pe("div",{class:"slideunlock-handler",style:ir(t.handlerStyle),onMousedown:e[0]||(e[0]=(...c)=>t.slideStart&&t.slideStart(...c)),onTouchstart:e[1]||(e[1]=(...c)=>t.slideStart&&t.slideStart(...c))},null,36)],46,lhe)}const che=ahe(ohe,[["render",uhe],["__scopeId","data-v-50e610f5"]]),dhe=""+new URL("chevron-right-double-svgrepo-com-c2e5d129.png",import.meta.url).href,hhe=""+new URL("Box-Loader-New-31d3b1e2.gif",import.meta.url).href;const fhe={name:"OpenOrdersDetailRestaurantDriver",components:{AtomSpinner:is,SlideUnlock:che,ImgUpload:Fde,LMap:xE,LTileLayer:EE,LMarker:wE,LIcon:bE,LPopup:CE,LPolyline:SE},data(){return{info:!1,takeImages:!1,images:[],icons:[],failmsg:"",order_id:"",failure:!1,next_status_info:null,tookan_job_id:-1,next_status:0,token:"",counter:-1,taskStatus:"Start Pickup",taskSuccess:"Updating",completed:!1,complete_msg:"Order Completed",logo_url:_r,primary_color:"white",secondary_color:"#0adf01",text_color:"#ffffff",slider_icon:dhe,loaderGIF:hhe,centerLeaflet:[41.9855989,-87.8332167],center:[41.9855989,-87.8332167],isComplete:!1,order_details:{},loading:!0,order_found:!1,first_job:"",markerlist:[],confirmation_loading:!1,partners_icons:{Chompies:Y6,Cosi:X6,EmmySquaredPizza:K6,EzCater:Q6,Foodee:Vy,HipCityVeg:J6,LocalGrind:e$,QDOBA:t$,QdobaPhilly:i$,Sauce:n$,sharebite:r$,SimpleCater:s$,TacoDeli:o$,vromo:a$,dlivrd:_r},btn_back:!0,delivery_partner_image:_r,order_subtotal:0,alert_title:"Confirmation",order_confirmed:!1,dialog:!1,urgent_link:!1,alert_description:"Do you want this order ?",zoom:11,icon:sd.icon({iconUrl:IE,iconSize:[45,52],iconAnchor:[16,37]}),iconDrop:sd.icon({iconUrl:PE,iconSize:[45,52],iconAnchor:[16,37]}),jobs:[],map:null}},mounted(){this.token=this.$route.params.token;var t=String(window.location);t.includes("/rd/")&&this.get_restaurant_order()},methods:{get_restaurant_order(){var t=this.baseurl+"rpanel/business_specific_driver_verify_token",e={token:this.token};Ai.post(t,e).then(i=>{if(console.log("response"),console.log(i),i.status==200){var i=i.data;if(i.Success){console.log("ssadasd"),console.log(i),this.markerOptionsPickupLeaflet=[],this.markerOptionsDropLeaflet=[],this.order_details=i.data.order_info,this.order_id=this.order_details.order_id,this.next_status_info=this.order_details.next_status_info,this.taskStatus=this.next_status_info.next_status_text,this.tookan_job_id=this.next_status_info.tookan_job_id,this.next_status=this.next_status_info.next_status,this.order_found=!0,this.loading=!1,this.taskStatus=="Dropoff Complete"&&(this.takeImages=!0),this.order_details.order_subtotal!=null?this.order_subtotal=this.order_details.order_subtotal:this.order_subtotal=this.order_details.subtotal,this.order_details.delivery_partner in this.partners_icons?this.delivery_partner_image=this.partners_icons[this.order_details.delivery_partner]:this.delivery_partner_image=_r;for(var n=0;n<this.order_details.pickups.length;n++){this.markerOptionsPickupLeaflet=[parseFloat(this.order_details.pickups[n].latitude),parseFloat(this.order_details.pickups[n].longitude)];var r={position:{lat:parseFloat(this.order_details.pickups[n].latitude),lng:parseFloat(this.order_details.pickups[n].longitude)},label:"P",title:this.order_details.pickups[n].location_name,icon:this.icon};this.markerlist.push(r),this.jobs.push({type:"Pickup",location_name:this.order_details.pickups[n].location_name,address:this.order_details.pickups[n].address,time:this.order_details.pickups[n].pickupAt,latitude:this.order_details.pickups[n].latitude,longitude:this.order_details.pickups[n].longitude,marker_location:r})}for(var n=0;n<this.order_details.dropoffs.length;n++){this.markerOptionsDropLeaflet=[parseFloat(this.order_details.dropoffs[n].latitude),parseFloat(this.order_details.dropoffs[n].longitude)],this.mapCenter();var r={position:{lat:parseFloat(this.order_details.dropoffs[n].latitude),lng:parseFloat(this.order_details.dropoffs[n].longitude)},label:"D",title:this.order_details.dropoffs[n].location_name,icon:this.iconDrop};this.markerlist.push(r),this.jobs.push({type:"Dropoff",location_name:this.order_details.dropoffs[n].location_name,address:this.order_details.dropoffs[n].address,time:this.order_details.dropoffs[n].dropoffAt,latitude:this.order_details.dropoffs[n].latitude,longitude:this.order_details.dropoffs[n].longitude,marker_location:r})}this.center=this.markerlist[0].position,this.business_settings=i.data.business_settings,this.logo_url=this.baseImageurl+this.business_settings.logo_url,this.primary_color=this.business_settings.primary_color,this.secondary_color=this.business_settings.secondary_color,this.text_color=this.business_settings.text_color}else this.loading=!1,this.failmsg=i.Failure}}).catch(()=>{})},mapCenter(){var t=this.markerOptionsPickupLeaflet[0]-(this.markerOptionsPickupLeaflet[0]-this.markerOptionsDropLeaflet[0])/2,e=this.markerOptionsPickupLeaflet[1]-(this.markerOptionsPickupLeaflet[1]-this.markerOptionsDropLeaflet[1])/2;this.centerLeaflet=[t,e]},viewOrderDetails(t){this.center=t.position},imageUploaded(t){this.images=t},status_update(){if(this.taskStatus=="Dropoff Complete"&&this.images.length<1){this.alert_title="Missing Dropoff Images",this.alert_description="Please upload the Dropoff images before marking the order as complete.",this.dialog=!0,this.$refs.vueslideunlock.reset();return}var t=this.baseurl+"rpanel/business_specific_driver_change_task_status",e=new FormData;if(e.append("token",this.token),e.append("tookan_job_id",this.tookan_job_id),e.append("next_status",this.next_status),this.takeImages)for(var i=0;i<this.images.length;i++)e.append("drop_image_"+i,this.images[i]);Ai.post(t,e).then(n=>{if(n.status==200){var r=n.data;r.Success&&(this.next_status_info=r.next_status_info,this.taskStatus=this.next_status_info.next_status_text,this.tookan_job_id=this.next_status_info.tookan_job_id,this.next_status=this.next_status_info.next_status,this.next_status==-1&&(this.isComplete=!0,this.complete_msg="Your order has been completed"),this.taskStatus=="Dropoff Complete"&&(this.takeImages=!0),this.$refs.vueslideunlock.reset())}else this.$refs.vueslideunlock.reset()}).catch(()=>{})}}},AE=t=>(Yd("data-v-c04ba629"),t=t(),Xd(),t),phe={style:{margin:"0","background-color":"transparent",position:"relative",top:"0","z-index":"1000",height:"0"}},mhe={style:{width:"100%",display:"flex","justify-content":"center",padding:"10px"}},ghe=["src"],_he={key:1,style:{width:"100%","align-items":"center","background-color":"#26225B",height:"160px"}},vhe={style:{display:"flex","z-index":"2000","justify-content":"center","max-width":"400px",width:"80%","border-radius":"4px","margin-bottom":"7px",position:"fixed","margin-top":"60px"}},yhe={key:4,style:{height:"92vh",overflow:"scroll","padding-bottom":"82px"}},bhe={key:0},xhe={style:{height:"75vh",width:"100%"}},whe={class:"order-list",style:{display:"block",margin:"15px"}},The={style:{display:"flex",filter:"brightness(100%)"}},She=AE(()=>Pe("p",{style:{"font-weight":"bold"}},"Order Value",-1)),Che=AE(()=>Pe("i",{class:"fas fa-map-marker-alt"},null,-1)),khe=AE(()=>Pe("div",{style:{display:"inline-flex","justify-content":"center",width:"100%","margin-bottom":"10px"}},[Pe("p",{style:{"font-weight":"bold"}},"DELIVERY ACTIVITY")],-1)),Ehe=["onClick"],Ihe={style:{display:"inline-flex"}},Phe={key:0,style:{"margin-left":"20px"}},Ahe={style:{"font-weight":"bold"}},Mhe={style:{"font-size":"80%"}},Ohe={key:1,style:{"margin-left":"20px"}},Lhe={style:{"font-weight":"bold"}},Dhe={style:{"font-size":"80%"}},Rhe={key:0,class:"order-list",style:{display:"block","padding-top":"10px","padding-left":"15px","padding-right":"15px"}},Bhe={key:5,style:{"text-align":"center",position:"fixed",bottom:"5px","max-width":"400px",width:"26%",display:"grid","justify-content":"left","justify-items":"center","background-color":"transparent","padding-left":"7px"}};function Fhe(t,e,i,n,r,a){const c=ue("v-img"),s=ue("v-card-text"),p=ue("v-icon"),_=ue("v-spacer"),b=ue("v-btn"),S=ue("v-card-actions"),E=ue("v-col"),I=ue("v-dialog"),R=ue("v-card-title"),V=ue("v-card"),q=ue("l-tile-layer"),U=ue("l-marker"),H=ue("l-map"),Z=ue("v-row"),ne=ue("img-upload"),ie=ue("slide-unlock");return be(),ti("div",{class:"order_view_web",style:ir({"background-color":r.primary_color,color:r.text_color})},[Pe("div",phe,[Pe("div",mhe,[Pe("img",{alt:"Company logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:r.logo_url,width:"125",height:"50"},null,8,ghe)])]),!r.order_found&&!r.loading?(be(),ti("h3",{key:0,class:"heading2",style:ir([{height:"50px","font-weight":"bold","margin-top":"100px","text-align":"center","padding-left":"10px",display:"flex","align-items":"center","justify-content":"center"},{color:r.text_color,"background-color":r.secondary_color}])},Zt(r.failmsg),5)):We("",!0),r.loading||r.confirmation_loading?(be(),ti("div",_he,[w(c,{src:r.loaderGIF,width:"25%",style:{margin:"auto","margin-top":"50%","z-index":"100"}},null,8,["src"]),w(s,{style:ir([{color:r.text_color},{"text-align":"center","font-size":"20px","font-weight":"bold"}])},{default:D(()=>[ye("Fetching Details...")]),_:1},8,["style"])])):We("",!0),r.completed?We("",!0):(be(),He(I,{key:2,modelValue:r.isComplete,"onUpdate:modelValue":e[1]||(e[1]=oe=>r.isComplete=oe),transition:"dialog-top-transition","max-width":"350px",persistent:""},{default:D(()=>[w(E,{style:ir([{"background-color":r.primary_color,"border-color":r.text_color},{display:"grid","justify-items":"center",border:"2px solid"}])},{default:D(()=>[w(p,{style:ir([{"font-size":"80px"},{color:r.text_color}])},{default:D(()=>[ye("mdi-package-variant-closed-check")]),_:1},8,["style"]),Pe("h2",{id:"header",style:ir([{"font-weight":"bold","text-align":"left","padding-left":"10px","margin-top":"15px","font-size":"25px"},{color:r.text_color}])},"O# "+Zt(r.order_id),5),Pe("h3",{style:ir([{"font-weight":"bold","margin-top":"15px","text-align":"center","padding-left":"10px"},{color:r.text_color}])},Zt(r.complete_msg),5),w(S,{style:{"align-self":"end","margin-top":"30px",width:"100%"}},{default:D(()=>[w(_),w(b,{style:ir([{"background-color":r.secondary_color,color:r.text_color},{width:"100%",height:"55px"}]),class:"btnDialog",variant:"text",onClick:e[0]||(e[0]=oe=>r.completed=!0)},{default:D(()=>[ye(" Done ")]),_:1},8,["style"])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])),Pe("div",vhe,[!r.loading&&r.order_found&&!r.completed?(be(),ti("div",{key:0,style:ir([{"background-color":r.secondary_color,"border-color":r.secondary_color},{display:"flex",width:"92%","align-items":"center","justify-content":"center","border-radius":"5px"}])},[w(p,{style:{"margin-right":"5px"}},{default:D(()=>[ye(" mdi-package-variant-closed ")]),_:1}),Pe("h3",{id:"header",style:ir([{"font-weight":"bold","text-align":"center"},{color:r.text_color}])},[ye(" Order ID: "),Pe("span",null," #"+Zt(r.order_id),1)],4)],4)):We("",!0)]),r.completed&&r.order_found?(be(),He(E,{key:3,style:{display:"grid","justify-content":"center","align-content":"center",height:"100%","justify-items":"center"}},{default:D(()=>[w(p,{style:ir([{"font-size":"80px"},{color:r.text_color}])},{default:D(()=>[ye("mdi-package-variant-closed-check")]),_:1},8,["style"]),Pe("h2",{id:"header",style:ir([{"font-weight":"bold","text-align":"left","padding-left":"10px","margin-top":"15px"},{color:r.text_color}])},"O# "+Zt(r.order_id),5),Pe("h3",{style:ir([{"font-weight":"bold","margin-top":"15px","text-align":"center","padding-left":"10px"},{color:r.text_color}])},Zt(r.complete_msg),5)]),_:1})):We("",!0),w(I,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[3]||(e[3]=oe=>r.dialog=oe),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(V,null,{default:D(()=>[w(R,{class:"text-h5",style:ir({"background-color":r.primary_color,color:r.text_color})},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1},8,["style"]),w(s,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(S,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(_),w(b,{"prepend-icon":"mdi-close",class:"btnDialog",style:ir({"background-color":r.primary_color,color:r.text_color}),variant:"text",onClick:e[2]||(e[2]=oe=>r.dialog=!1)},{default:D(()=>[ye(" Ok ")]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r.order_found&&!r.completed?(be(),ti("div",yhe,[r.loading?We("",!0):(be(),ti("main",bhe,[Pe("div",xhe,[w(H,{ref:"map",zoom:r.zoom,"onUpdate:zoom":e[4]||(e[4]=oe=>r.zoom=oe),center:this.centerLeaflet},{default:D(()=>[w(q,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),(be(!0),ti(Oi,null,Zr(this.markerlist,oe=>(be(),He(U,{"lat-lng":oe.position,icon:oe.icon},null,8,["lat-lng","icon"]))),256))]),_:1},8,["zoom","center"])]),Pe("div",whe,[Pe("div",{class:"delivery_activity",style:ir([{"background-color":r.secondary_color},{border:"0"}])},[Pe("div",{style:ir([{"border-color":r.text_color,"background-color":r.primary_color},{display:"flex","justify-content":"space-between",width:"96%",margin:"5px auto",padding:"5px 12px","border-radius":"4px",border:"2px solid",filter:"brightness(80%)"}])},[Pe("div",The,[w(p,{class:"icons",style:{"margin-right":"4px"}},{default:D(()=>[ye(" mdi-currency-usd ")]),_:1}),She]),Pe("p",null,[Che,ye(" $"+Zt(r.order_subtotal),1)])],4),khe,(be(!0),ti(Oi,null,Zr(this.jobs,(oe,pe)=>(be(),ti("div",{onClick:de=>a.viewOrderDetails(oe.marker_location),key:oe.id,class:"activity_block"},[Pe("div",Ihe,[Pe("div",null,[oe.type!="Pickup"?(be(),He(p,{key:0,class:"icons",style:{"margin-left":"8px","margin-bottom":"0","padding-bottom":"0","background-color":"#0adf01",color:"#26225B"}},{default:D(()=>[ye(" mdi-package-variant-closed ")]),_:1})):(be(),He(p,{key:1,class:"icons",style:{"margin-left":"8px","margin-bottom":"0","background-color":"#0adf01",color:"#26225B"}},{default:D(()=>[ye(" mdi-truck-delivery-outline ")]),_:1})),pe<this.jobs.length-1?(be(),ti("div",{key:2,class:"activity_track",style:ir({"border-color":r.text_color})},null,4)):We("",!0)]),oe.type!="Pickup"?(be(),ti("div",Phe,[Pe("h4",Ahe,Zt(oe.location_name),1),Pe("p",null,[w(p,{size:"20",color:r.text_color},{default:D(()=>[ye("mdi-package-variant-closed")]),_:1},8,["color"]),ye(" "+Zt(oe.time.replace("T"," ")),1)]),w(Z,null,{default:D(()=>[w(E,{cols:"1",sm:"1",style:{width:"10px"}},{default:D(()=>[w(p,{size:"20",color:r.text_color},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1},8,["color"])]),_:1}),w(E,{style:{"align-self":"flex-end"}},{default:D(()=>[Pe("p",Mhe,Zt(oe.address),1)]),_:2},1024)]),_:2},1024)])):We("",!0),oe.type=="Pickup"?(be(),ti("div",Ohe,[Pe("h4",Lhe,Zt(oe.location_name),1),Pe("p",null,[w(p,{size:"20",color:r.text_color},{default:D(()=>[ye("mdi-store-clock")]),_:1},8,["color"]),ye(" "+Zt(oe.time.replace("T"," ")),1)]),w(Z,null,{default:D(()=>[w(E,{cols:"1",sm:"1",style:{width:"10px"}},{default:D(()=>[w(p,{size:"20",color:r.text_color},{default:D(()=>[ye("mdi-map-marker-outline")]),_:1},8,["color"])]),_:1}),w(E,{style:{"align-self":"flex-end"}},{default:D(()=>[Pe("p",Dhe,Zt(oe.address),1)]),_:2},1024)]),_:2},1024)])):We("",!0)])],8,Ehe))),128))],4)]),r.takeImages?(be(),ti("div",Rhe,[Pe("div",{style:ir({"border-color":r.secondary_color})},[w(ne,{onUpload:a.imageUploaded,primary_color:r.primary_color,secondary_color:r.secondary_color,text_color:r.text_color},null,8,["onUpload","primary_color","secondary_color","text_color"])],4)])):We("",!0)]))])):We("",!0),!(r.loading&&r.confirmation_loading)&&r.order_found&&!r.completed?(be(),ti("footer",Bhe,[w(ie,{style:ir([{color:r.text_color,"--su-color-bg":r.primary_color,"--su-color-text-normal":r.text_color},{border:"solid 2px","border-radius":"8px"}]),ref:"vueslideunlock","auto-width":!1,circle:!1,disabled:!1,noanimate:!1,width:360,height:60,text:r.taskStatus,"success-text":r.taskSuccess,name:"slideunlock",onCompleted:e[5]||(e[5]=oe=>a.status_update())},null,8,["style","text","success-text"])])):We("",!0)],4)}const $he=Kn(fhe,[["render",Fhe],["__scopeId","data-v-c04ba629"]]);const Nhe={components:{GoogleMap:eh,Marker:Yf,AtomSpinner:is,VueRecaptcha:Gx},data(){return{question_1:"",question_2:"",answer_1:"",loading:!0,loadOTP:!1,answer_2:"",captchaToken:null,VerificationComplete:!1,captchaChecked:!1,tokenId:"",otp_code:"",verifyTokanId:"",dialog:!1,alert_title:"",alert_description:""}},mounted(){this.tokenId=this.$route.params.tokenid,this.pull_questions()},methods:{showAlert(t,e){this.alert_title=t,this.alert_description=e,this.dialog=!0},handleSuccess(t){this.captchaToken=t,this.captchaChecked=!0},handleError(){this.captchaChecked=!1},pull_questions(){var t=this.baseurl+"number_verification_verify_token";const e={token:this.tokenId};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.status==200&&i.data.Success?(this.question_1=i.data.questions[0],this.question_2=i.data.questions[1],this.loading=!1):this.showAlert("Error","Token expired")}).catch(()=>{})},verify_otp(){this.loading=!0;var t=this.baseurl+"number_verification_verify_otp";const e={old_token:this.tokenId,token:this.verifyTokanId,otp:this.otp_code};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.data.Success?(this.loading=!1,this.VerificationComplete=!0):(this.showAlert("Error","Invalid OTP"),this.loading=!1),this.loading=!1}).catch(()=>{})},request_otp(){var t=this.baseurl+"number_verification_send_otp";const e={token:this.verifyTokanId};Ai.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(i=>{i.data.Success?(this.loading=!1,this.loadOTP=!0):(this.showAlert("Error",i.data.Failure),this.loading=!1)}).catch(()=>{})},approve_questions(){if(this.answer_1==""&&this.answer_2==""){this.alert_title="Error",this.alert_description="Please Answer At-least One Question",this.dialog=!0;return}if(this.captchaToken==null){this.alert_title="Error",this.alert_description="Please Solve Captcha",this.dialog=!0;return}this.loading=!0;var t=this.baseurl+"number_verification_verify_security_answers",e={};e[this.question_1]=this.answer_1,e[this.question_2]=this.answer_2;const i={token:this.tokenId,captcha_key:this.captchaToken,answers:e};Ai.post(t,i,{headers:{"Content-Type":"application/json;charset=UTF-8",session:localStorage.getItem("onboard_session_id")}}).then(n=>{n.status==200&&(n.data.Success?(this.verifyTokanId=n.data.new_token,this.request_otp()):(this.showAlert("Error","Questions Not Verified. Please Retry"),this.loading=!1))}).catch(()=>{})}}},zhe={key:0,style:{width:"100%","text-align":"center",position:"absolute","z-index":"20",color:"#0AFD01"}},Vhe={class:"order_view_web"},Uhe=Pe("header",{style:{"background-color":"white","border-bottom":"3px #0afd01 solid"}},[Pe("div",{style:{width:"100%","text-align":"center","padding-top":"10px"}},[Pe("img",{alt:"Vue logo",class:"logo",style:{"object-fit":"contain",width:"150px"},src:_r,width:"125",height:"50"})])],-1),jhe={key:0,class:"title_block"},Hhe={key:1,class:"title_sub_block"},Ghe={key:2,class:"title_block"},Whe={key:3,class:"title_sub_block"},qhe={key:4,class:"title_block"},Zhe={key:5,class:"title_sub_block"},Yhe={key:6,style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},Xhe={style:{"margin-top":"30px"}},Khe=Pe("p",{class:"question_block"}," OTP ",-1),Qhe={style:{"text-align":"center","margin-top":"30px"}},Jhe={style:{"padding-left":"10px","padding-right":"10px",height:"75vh",overflow:"scroll"}},efe={key:0},tfe={style:{"margin-top":"30px"}},ife={class:"question_block"},nfe=Pe("div",{style:{width:"100%","margin-top":"30px",height:"2px","background-color":"#0AFD01"}},null,-1),rfe={style:{"margin-top":"30px"}},sfe={class:"question_block"},ofe={style:{"text-align":"center","margin-top":"30px"}},afe=Pe("footer",{style:{"margin-bottom":"20px",height:"10vh"}},[Pe("p",{style:{"text-align":"center"}},"© 2023 dlivrd. Rights Reserved.")],-1);function lfe(t,e,i,n,r,a){const c=ue("v-card-title"),s=ue("v-card-text"),p=ue("v-spacer"),_=ue("v-btn"),b=ue("v-card-actions"),S=ue("v-card"),E=ue("v-dialog"),I=ue("atom-spinner"),R=ue("v-text-field"),V=ue("TextFieldItem"),q=ue("VueRecaptcha"),U=ue("v-col");return be(),ti(Oi,null,[w(E,{id:"dialogBox",modelValue:r.dialog,"onUpdate:modelValue":e[1]||(e[1]=H=>r.dialog=H),transition:"dialog-top-transition","max-width":"300px",persistent:""},{default:D(()=>[w(S,null,{default:D(()=>[w(c,{class:"text-h5",style:{"background-color":"#7efb01"}},{default:D(()=>[ye(Zt(r.alert_title),1)]),_:1}),w(s,{id:"dialogDescription",style:{"overflow-y":"scroll","text-align":"justify"},innerHTML:r.alert_description},null,8,["innerHTML"]),w(b,{style:{"align-self":"end","margin-top":"30px"}},{default:D(()=>[w(p),w(_,{"prepend-icon":"mdi-close",style:{"background-color":"#7efb01"},variant:"text",onClick:e[0]||(e[0]=H=>r.dialog=!1)},{default:D(()=>[ye(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r.loading?(be(),ti("div",zhe,[w(I,{"animation-duration":1e3,size:90,color:"#000000",style:{margin:"auto","margin-top":"100px"}})])):We("",!0),Pe("div",Vhe,[Uhe,!r.loading&&!r.loadOTP?(be(),ti("p",jhe," Verify Your Identity ")):We("",!0),!r.loading&&!r.loadOTP?(be(),ti("p",Hhe," Answer Any One Of The Question ")):We("",!0),r.loadOTP&&!r.VerificationComplete?(be(),ti("p",Ghe," Verify OTP ")):We("",!0),r.loadOTP&&!r.VerificationComplete?(be(),ti("p",Whe," An OTP is send to your new number ")):We("",!0),r.VerificationComplete?(be(),ti("p",qhe," Congratulations ")):We("",!0),r.VerificationComplete?(be(),ti("p",Zhe," Your New Phone Number Verification Is Now Complete. ")):We("",!0),!r.loading&&r.loadOTP&&!r.VerificationComplete?(be(),ti("div",Yhe,[Pe("main",null,[Pe("div",Xhe,[w(V,null,{default:D(()=>[Khe,w(R,{required:"","hide-details":"",modelValue:r.otp_code,"onUpdate:modelValue":e[2]||(e[2]=H=>r.otp_code=H),placeholder:"OTP Code","persistent-placeholder":!0,class:"generic_tx px-2 answer_field",name:"login",value:r.otp_code,density:"comfortable"},null,8,["modelValue","value"])]),_:1})]),Pe("div",Qhe,[Pe("button",{class:"decision_button",onClick:e[3]||(e[3]=(...H)=>a.verify_otp&&a.verify_otp(...H)),style:{"background-color":"green"}},"Verify")])])])):We("",!0),Pe("div",Jhe,[!r.loading&&!r.loadOTP?(be(),ti("main",efe,[Pe("div",tfe,[w(V,null,{default:D(()=>[Pe("p",ife,Zt(r.question_1),1),w(R,{required:"","hide-details":"",modelValue:r.answer_1,"onUpdate:modelValue":e[4]||(e[4]=H=>r.answer_1=H),placeholder:"Answer","persistent-placeholder":!0,class:"generic_tx px-2 answer_field",name:"login",value:r.answer_1,density:"comfortable"},null,8,["modelValue","value"])]),_:1})]),nfe,Pe("div",rfe,[w(V,null,{default:D(()=>[Pe("p",sfe,Zt(r.question_2),1),w(R,{required:"","hide-details":"",modelValue:r.answer_2,"onUpdate:modelValue":e[5]||(e[5]=H=>r.answer_2=H),placeholder:"Answer","persistent-placeholder":!0,class:"generic_tx px-2 answer_field",name:"login",value:r.answer_2,density:"comfortable"},null,8,["modelValue","value"])]),_:1})]),Pe("div",ofe,[w(U,{class:"alignCaptcha",style:{"text-align":"center"}},{default:D(()=>[w(q,{style:{"align-items":"center",display:"inline-table"},sitekey:"6Ld7pNAmAAAAAG4qWGWSDntc7Cc4HsywpB2lYvpI","load-recaptcha-script":!0,onVerify:a.handleSuccess,onError:a.handleError},null,8,["onVerify","onError"])]),_:1}),Pe("button",{class:"decision_button",onClick:e[6]||(e[6]=(...H)=>a.approve_questions&&a.approve_questions(...H)),style:{"background-color":"green"}},"Verify")])])):We("",!0)]),afe])],64)}const ufe=Kn(Nhe,[["render",lfe]]),cfe=AJ({history:qQ("./"),routes:[{path:"/ph/:tokenid",name:"phVerification",component:ufe},{path:"/rd/:token",name:"OpenOrdersDetailRestaurantDriver",component:$he},{path:"/OpenOrdersDetail/:Order_id",name:"OpenOrdersDetail",component:Lde},{path:"/openOrders",name:"openOrders",component:zce},{path:"/O",name:"openOrdersLogin",component:Iue},{path:"/settings",name:"OpenBoardSettings",component:Tue},{path:"/help",name:"OpenBoardHelp",component:hue},{path:"/feedback",name:"Feedback",component:Ule},{path:"/AccountRecovery",name:"AccountRecovery",component:Ale},{path:"/",name:"login",component:lte},{path:"/announcements",name:"Announcements",component:Are},{path:"/availability",name:"availability",component:Kte},{path:"/personalDetails",name:"UploadDetails",component:Bne},{path:"/vehicleandbagdetails",name:"VehicleAndBagDetails",component:Gne},{path:"/deliverylocation",name:"DeliveryLocation",component:Jne},{path:"/llc",name:"LegalZoomLink",component:Hse},{path:"/faq",name:"FAQ",component:nre},{path:"/blog",name:"BlogView",component:Dre},{path:"/training",name:"TrainingVideos",component:yre},{path:"/analytics",name:"Stats",component:pre},{path:"/validation",name:"PaymentValidation",component:Yne},{path:"/forgotPassword",name:"forgotPassword",component:Pte},{path:"/documents",name:"MyDetails",component:cre},{path:"/resetPassword/:tokenId",name:"ResetPassword",component:qte},{path:"/drive",name:"signup",component:Cte},{path:"/educate",name:"Home",component:jte},{path:"/order/urgentOrder",name:"UrgentOrder",component:Bse},{path:"/order/OrdersOpen",name:"OrdersOpen",component:mle},{path:"/order/forgotpassword",name:"openForgetPassword",component:Zse},{path:"/BailUrgentOrder",name:"BailUrgentOrder",component:xae},{path:"/submit",name:"SubmitApplication",component:Zoe},{path:"/order/OpenOrdersDetail/:Order_id",name:"OpenOrdersDetail",component:Foe},{path:"/order/settings",name:"OpenBoardSettings",component:kle}]});const dfe=yi()({name:"VApp",props:{...b4({fullHeight:!0}),...vr()},setup(t,e){let{slots:i}=e;const n=Vr(t),{layoutClasses:r,layoutStyles:a,getLayoutItem:c,items:s,layoutRef:p}=x4(t),{rtlClasses:_}=zh();return Pi(()=>{var b;return w("div",{ref:p,class:["v-application",n.themeClasses.value,r.value,_.value],style:a.value},[w("div",{class:"v-application__wrap"},[(b=i.default)==null?void 0:b.call(i)])])}),{getLayoutItem:c,items:s,theme:n}}});const u$=gn({text:String,...Zn()},"v-toolbar-title"),ME=yi()({name:"VToolbarTitle",props:u$(),setup(t,e){let{slots:i}=e;return Pi(()=>{const n=!!(i.default||i.text||t.text);return w(t.tag,{class:"v-toolbar-title"},{default:()=>{var r;return[n&&w("div",{class:"v-toolbar-title__placeholder"},[i.text?i.text():t.text,(r=i.default)==null?void 0:r.call(i)])]}})}),{}}}),hfe=[null,"prominent","default","comfortable","compact"],c$=gn({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>hfe.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ju(),...Xo(),...zs(),...Zn({tag:"header"}),...vr()},"v-toolbar"),OS=yi()({name:"VToolbar",props:c$(),setup(t,e){var E;let{slots:i}=e;const{backgroundColorClasses:n,backgroundColorStyles:r}=ho(li(t,"color")),{borderClasses:a}=Mc(t),{elevationClasses:c}=$a(t),{roundedClasses:s}=fo(t),{themeClasses:p}=Vr(t),_=lt(!!(t.extended||(E=i.extension)!=null&&E.call(i))),b=Me(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),S=Me(()=>_.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return co({VBtn:{variant:"text"}}),Pi(()=>{var q;const I=!!(t.title||i.title),R=!!(i.image||t.image),V=(q=i.extension)==null?void 0:q.call(i);return _.value=!!(t.extended||V),w(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},n.value,a.value,c.value,s.value,p.value],style:[r.value]},{default:()=>[R&&w("div",{key:"image",class:"v-toolbar__image"},[i.image?w(es,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},i.image):w(i_,{key:"image-img",cover:!0,src:t.image},null)]),w(es,{defaults:{VTabs:{height:Xi(b.value)}}},{default:()=>{var U,H,Z;return[w("div",{class:"v-toolbar__content",style:{height:Xi(b.value)}},[i.prepend&&w("div",{class:"v-toolbar__prepend"},[(U=i.prepend)==null?void 0:U.call(i)]),I&&w(ME,{key:"title",text:t.title},{text:i.title}),(H=i.default)==null?void 0:H.call(i),i.append&&w("div",{class:"v-toolbar__append"},[(Z=i.append)==null?void 0:Z.call(i)])])]}}),w(es,{defaults:{VTabs:{height:Xi(S.value)}}},{default:()=>[w(Ex,null,{default:()=>[_.value&&w("div",{class:"v-toolbar__extension",style:{height:Xi(S.value)}},[V])]})]})]})}),{contentHeight:b,extensionHeight:S}}}),ffe=yi()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...c$(),...zg(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=lt(),r=Pn(t,"modelValue"),a=Me(()=>{var b,S;const p=((b=n.value)==null?void 0:b.contentHeight)??0,_=((S=n.value)==null?void 0:S.extensionHeight)??0;return p+_}),{ssrBootStyles:c}=rm(),{layoutItemStyles:s}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:li(t,"location"),layoutSize:a,elementSize:a,active:r,absolute:li(t,"absolute")});return Pi(()=>{const[p]=OS.filterProps(t);return w(OS,Mi({ref:n,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...s.value,height:void 0,...c.value}},p),i)}),{}}}),pfe=yi()({name:"VAppBarNavIcon",props:{icon:{type:On,default:"$menu"}},setup(t,e){let{slots:i}=e;return Pi(()=>w(ko,{class:"v-app-bar-nav-icon",icon:t.icon},i)),{}}}),mfe=yi()({name:"VToolbarItems",props:Oc({variant:"text"}),setup(t,e){let{slots:i}=e;return co({VBtn:{color:li(t,"color"),height:"inherit",variant:li(t,"variant")}}),Pi(()=>{var n;return w("div",{class:"v-toolbar-items"},[(n=i.default)==null?void 0:n.call(i)])}),{}}}),gfe=yi()({name:"VAppBarTitle",props:u$(),setup(t,e){let{slots:i}=e;return Pi(()=>w(ME,Mi(t,{class:"v-app-bar-title"}),i)),{}}});const d$=od("v-alert-title"),_fe=["success","info","warning","error"],vfe=yi()({name:"VAlert",props:{border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:On,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>_fe.includes(t)},...Yo(),...ud(),...Xo(),...jf(),...Jg(),...zs(),...Zn(),...vr(),...Oc({variant:"flat"})},emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:i,slots:n}=e;const r=Pn(t,"modelValue"),a=Me(()=>{if(t.icon!==!1)return t.type?t.icon??`$${t.type}`:t.icon}),c=Me(()=>({color:t.color??t.type,variant:t.variant})),{themeClasses:s}=Vr(t),{colorClasses:p,colorStyles:_,variantClasses:b}=tm(c),{densityClasses:S}=hl(t),{dimensionStyles:E}=cd(t),{elevationClasses:I}=$a(t),{locationStyles:R}=Hf(t),{positionClasses:V}=e_(t),{roundedClasses:q}=fo(t),{textColorClasses:U,textColorStyles:H}=Ul(li(t,"borderColor")),{t:Z}=Tu(),ne=Me(()=>({"aria-label":Z(t.closeLabel),onClick(ie){r.value=!1,i("click:close",ie)}}));return()=>{const ie=!!(n.prepend||a.value),oe=!!(n.title||t.title),pe=!!(t.text||n.text),de=!!(n.close||t.closable);return r.value&&w(t.tag,{class:["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},s.value,p.value,S.value,I.value,V.value,q.value,b.value],style:[_.value,E.value,R.value],role:"alert"},{default:()=>{var fe,ge;return[em(!1,"v-alert"),t.border&&w("div",{key:"border",class:["v-alert__border",U.value],style:H.value},null),ie&&w("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?w(es,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{density:t.density,icon:a.value,size:t.prominent?44:28}}},n.prepend):w(lo,{key:"prepend-icon",density:t.density,icon:a.value,size:t.prominent?44:28},null)]),w("div",{class:"v-alert__content"},[oe&&w(d$,{key:"title"},{default:()=>{var we;return[((we=n.title)==null?void 0:we.call(n))??t.title]}}),pe&&(((fe=n.text)==null?void 0:fe.call(n))??t.text),(ge=n.default)==null?void 0:ge.call(n)]),n.append&&w("div",{key:"append",class:"v-alert__append"},[n.append()]),de&&w("div",{key:"close",class:"v-alert__close"},[n.close?w(es,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var we;return[(we=n.close)==null?void 0:we.call(n,{props:ne.value})]}}):w(ko,Mi({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},ne.value),null)])]}})}}});function yfe(t,e,i){if(e==null)return t;if(Array.isArray(e))throw new Error("Multiple matches is not implemented");return typeof e=="number"&&~e?w(Oi,null,[w("span",{class:"v-autocomplete__unmask"},[t.substr(0,e)]),w("span",{class:"v-autocomplete__mask"},[t.substr(e,i)]),w("span",{class:"v-autocomplete__unmask"},[t.substr(e+i)])]):t}const bfe=yi()({name:"VAutocomplete",props:{search:String,...Uk({filterKeys:["title"]}),...Vk(),...Qd(Ox({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...jh({transition:!1})},emits:{"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:i}=e;const{t:n}=Tu(),r=lt(),a=lt(!1),c=lt(!0),s=lt(),p=Pn(t,"menu"),_=Me({get:()=>p.value,set:Ee=>{var Qe;p.value&&!Ee&&((Qe=s.value)!=null&&Qe.ΨopenChildren)||(p.value=Ee)}}),{items:b,transformIn:S,transformOut:E}=Dx(t),I=Pn(t,"search",""),R=Pn(t,"modelValue",[],Ee=>S(kc(Ee)),Ee=>{const Qe=E(Ee);return t.multiple?Qe:Qe[0]??null}),V=Ax(),{filteredItems:q,getMatches:U}=jk(t,b,Me(()=>c.value?void 0:I.value)),H=Me(()=>R.value.map(Ee=>b.value.find(Qe=>t.valueComparator(Qe.value,Ee.value))||Ee)),Z=Me(()=>t.hideSelected?q.value.filter(Ee=>!H.value.some(Qe=>Qe.value===Ee.value)):q.value),ne=Me(()=>H.value.map(Ee=>Ee.props.value)),ie=lt();function oe(Ee){t.openOnClear&&(_.value=!0),I.value=""}function pe(){t.hideNoData&&!b.value.length||t.readonly||V!=null&&V.isReadonly.value||(_.value=!0)}function de(Ee){var Qe,gt;t.readonly||V!=null&&V.isReadonly.value||(["Enter","ArrowDown","ArrowUp"].includes(Ee.key)&&Ee.preventDefault(),["Enter","ArrowDown"].includes(Ee.key)&&(_.value=!0),["Escape"].includes(Ee.key)&&(_.value=!1),["Enter","Escape","Tab"].includes(Ee.key)&&(c.value=!0),Ee.key==="ArrowDown"?(Qe=ie.value)==null||Qe.focus("next"):Ee.key==="ArrowUp"&&((gt=ie.value)==null||gt.focus("prev")))}function fe(Ee){I.value=Ee.target.value}function ge(){a.value&&(c.value=!0)}function we(Ee){a.value=!0}function Ie(Ee){var Qe;Ee.relatedTarget==null&&((Qe=r.value)==null||Qe.focus())}const Oe=lt(!1);function ke(Ee){if(t.multiple){const Qe=ne.value.findIndex(gt=>t.valueComparator(gt,Ee.value));if(Qe===-1)R.value=[...R.value,Ee],I.value="";else{const gt=[...R.value];gt.splice(Qe,1),R.value=gt}}else R.value=[Ee],Oe.value=!0,i.selection||(I.value=Ee.title),_.value=!1,c.value=!0,Cn(()=>Oe.value=!1)}return Fi(a,Ee=>{var Qe;Ee?(Oe.value=!0,I.value=t.multiple||i.selection?"":String(((Qe=H.value.at(-1))==null?void 0:Qe.props.title)??""),c.value=!0,Cn(()=>Oe.value=!1)):(_.value=!1,I.value="")}),Fi(I,Ee=>{!a.value||Oe.value||(Ee&&(_.value=!0),c.value=!Ee)}),Pi(()=>{const Ee=!!(t.chips||i.chip),Qe=!!(!t.hideNoData||Z.value.length||i.prepend||i.append||i["no-data"]),gt=R.value.length>0,[nt]=Wp.filterProps(t);return w(Wp,Mi({ref:r},nt,{modelValue:I.value,"onUpdate:modelValue":ft=>{ft==null&&(R.value=[])},validationValue:R.externalValue,dirty:gt,onInput:fe,class:["v-autocomplete",{"v-autocomplete--active-menu":_.value,"v-autocomplete--chips":!!t.chips,[`v-autocomplete--${t.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!i.selection}],appendInnerIcon:t.menuIcon,readonly:t.readonly,placeholder:gt?void 0:t.placeholder,"onClick:clear":oe,"onMousedown:control":pe,onFocus:()=>a.value=!0,onBlur:()=>a.value=!1,onKeydown:de}),{...i,default:()=>w(Oi,null,[w(Fx,Mi({ref:s,modelValue:_.value,"onUpdate:modelValue":ft=>_.value=ft,activator:"parent",contentClass:"v-autocomplete__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:ge},t.menuProps),{default:()=>[Qe&&w(Rx,{ref:ie,selected:ne.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:ft=>ft.preventDefault(),onFocusin:we,onFocusout:Ie},{default:()=>{var ft,Tt,pt;return[!Z.value.length&&!t.hideNoData&&(((ft=i["no-data"])==null?void 0:ft.call(i))??w(Rh,{title:n(t.noDataText)},null)),(Tt=i["prepend-item"])==null?void 0:Tt.call(i),Z.value.map(et=>{var Mt;return((Mt=i.item)==null?void 0:Mt.call(i,{item:et,props:Mi(et.props,{onClick:()=>ke(et)})}))??w(Rh,Mi({key:et.value},et.props,{onClick:()=>ke(et)}),{prepend:Qt=>{let{isSelected:Fe}=Qt;return t.multiple&&!t.hideSelected?w(Dh,{modelValue:Fe,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var Qt,Fe;return c.value?et.title:yfe(et.title,(Qt=U(et))==null?void 0:Qt.title,((Fe=I.value)==null?void 0:Fe.length)??0)}})}),(pt=i["append-item"])==null?void 0:pt.call(i)]}})]}),H.value.map((ft,Tt)=>{var Mt;function pt(Qt){Qt.stopPropagation(),Qt.preventDefault(),ke(ft)}const et={"onClick:close":pt,modelValue:!0,"onUpdate:modelValue":void 0};return w("div",{key:ft.value,class:"v-autocomplete__selection"},[Ee?i.chip?w(es,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:ft.title}}},{default:()=>{var Qt;return[(Qt=i.chip)==null?void 0:Qt.call(i,{item:ft,index:Tt,props:et})]}}):w(Ly,Mi({key:"chip",closable:t.closableChips,size:"small",text:ft.title},et),null):((Mt=i.selection)==null?void 0:Mt.call(i,{item:ft,index:Tt}))??w("span",{class:"v-autocomplete__selection-text"},[ft.title,t.multiple&&Tt<H.value.length-1&&w("span",{class:"v-autocomplete__selection-comma"},[ye(",")])])])})])})}),dd({isFocused:a,isPristine:c,menu:_,search:I,filteredItems:q,select:ke},r)}});const xfe=yi()({name:"VBadge",inheritAttrs:!1,props:{bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:On,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...jf({location:"top end"}),...zs(),...Zn(),...vr(),...jh({transition:"scale-rotate-transition"})},setup(t,e){const{backgroundColorClasses:i,backgroundColorStyles:n}=ho(li(t,"color")),{roundedClasses:r}=fo(t),{t:a}=Tu(),{textColorClasses:c,textColorStyles:s}=Ul(li(t,"textColor")),{themeClasses:p}=v4(),{locationStyles:_}=Hf(t,!0,b=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(b)?+(t.offsetY??0):["left","right"].includes(b)?+(t.offsetX??0):0));return Pi(()=>{const b=Number(t.content),S=!t.max||isNaN(b)?t.content:b<=+t.max?b:`${t.max}+`,[E,I]=Kp(e.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return w(t.tag,Mi({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline}]},I),{default:()=>{var R,V;return[w("div",{class:"v-badge__wrapper"},[(V=(R=e.slots).default)==null?void 0:V.call(R),w(Jc,{transition:t.transition},{default:()=>{var q,U;return[Br(w("span",Mi({class:["v-badge__badge",p.value,i.value,r.value,c.value],style:[n.value,s.value,t.inline?{}:_.value],"aria-atomic":"true","aria-label":a(t.label,b),"aria-live":"polite",role:"status"},E),[t.dot?void 0:e.slots.badge?(U=(q=e.slots).badge)==null?void 0:U.call(q):t.icon?w(lo,{icon:t.icon},null):S]),[[Qu,t.modelValue]])]}})])]}})}),{}}});const h$=yi()({name:"VBannerActions",props:{color:String,density:String},setup(t,e){let{slots:i}=e;return co({VBtn:{color:t.color,density:t.density,variant:"text"}}),Pi(()=>{var n;return w("div",{class:"v-banner-actions"},[(n=i.default)==null?void 0:n.call(i)])}),{}}}),f$=od("v-banner-text"),wfe=yi()({name:"VBanner",props:{avatar:String,color:String,icon:On,lines:String,stacked:Boolean,sticky:Boolean,text:String,...Ju(),...Yo(),...ud(),...Xo(),...jf(),...Jg(),...zs(),...Zn(),...vr()},setup(t,e){let{slots:i}=e;const{borderClasses:n}=Mc(t),{densityClasses:r}=hl(t),{mobile:a}=Ng(),{dimensionStyles:c}=cd(t),{elevationClasses:s}=$a(t),{locationStyles:p}=Hf(t),{positionClasses:_}=e_(t),{roundedClasses:b}=fo(t),{themeClasses:S}=Vr(t),E=li(t,"color"),I=li(t,"density");co({VBannerActions:{color:E,density:I}}),Pi(()=>{const R=!!(t.text||i.text),V=!!(t.avatar||t.icon),q=!!(V||i.prepend);return w(t.tag,{class:["v-banner",{"v-banner--stacked":t.stacked||a.value,"v-banner--sticky":t.sticky,[`v-banner--${t.lines}-line`]:!!t.lines},n.value,r.value,s.value,_.value,b.value,S.value],style:[c.value,p.value],role:"banner"},{default:()=>{var U;return[q&&w("div",{key:"prepend",class:"v-banner__prepend"},[i.prepend?w(es,{key:"prepend-defaults",disabled:!V,defaults:{VAvatar:{color:E.value,density:I.value,icon:t.icon,image:t.avatar}}},i.prepend):w(Rf,{key:"prepend-avatar",color:E.value,density:I.value,icon:t.icon,image:t.avatar},null)]),w("div",{class:"v-banner__content"},[R&&w(f$,{key:"text"},{default:()=>{var H;return[((H=i.text)==null?void 0:H.call(i))??t.text]}}),(U=i.default)==null?void 0:U.call(i)]),i.actions&&w(h$,{key:"actions"},i.actions)]}})})}});const Tfe=yi()({name:"VBottomNavigation",props:{bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Ju(),...Yo(),...Xo(),...zs(),...zg({name:"bottom-navigation"}),...Zn({tag:"header"}),...Yg({modelValue:!0,selectedClass:"v-btn--selected"}),...vr()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{themeClasses:n}=v4(),{borderClasses:r}=Mc(t),{backgroundColorClasses:a,backgroundColorStyles:c}=ho(li(t,"bgColor")),{densityClasses:s}=hl(t),{elevationClasses:p}=$a(t),{roundedClasses:_}=fo(t),{ssrBootStyles:b}=rm(),S=Me(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),E=li(t,"active"),{layoutItemStyles:I}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:Me(()=>"bottom"),layoutSize:Me(()=>E.value?S.value:0),elementSize:S,active:E,absolute:li(t,"absolute")});return im(t,Ak),co({VBtn:{color:li(t,"color"),density:li(t,"density"),stacked:Me(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Pi(()=>w(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":E.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},n.value,a.value,r.value,s.value,p.value,_.value],style:[c.value,I.value,{height:Xi(S.value),transform:`translateY(${Xi(E.value?0:100,"%")})`},b.value]},{default:()=>[i.default&&w("div",{class:"v-bottom-navigation__content"},[i.default()])]})),{}}});const p$=yi()({name:"VBreadcrumbsDivider",props:{divider:[Number,String]},setup(t,e){let{slots:i}=e;return Pi(()=>{var n;return w("li",{class:"v-breadcrumbs-divider"},[((n=i==null?void 0:i.default)==null?void 0:n.call(i))??t.divider])}),{}}}),m$=yi()({name:"VBreadcrumbsItem",props:{active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ay(),...Zn({tag:"li"})},setup(t,e){let{slots:i,attrs:n}=e;const r=Py(t,n),a=Me(()=>{var _;return t.active||((_=r.isActive)==null?void 0:_.value)}),c=Me(()=>a.value?t.activeColor:t.color),{textColorClasses:s,textColorStyles:p}=Ul(c);return Pi(()=>{const _=r.isLink.value?"a":t.tag;return w(_,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":a.value,"v-breadcrumbs-item--disabled":t.disabled,"v-breadcrumbs-item--link":r.isLink.value,[`${t.activeClass}`]:a.value&&t.activeClass},s.value],style:[p.value],href:r.href.value,"aria-current":a.value?"page":void 0,onClick:r.navigate},{default:()=>{var b;return[((b=i.default)==null?void 0:b.call(i))??t.title]}})}),{}}}),Sfe=yi()({name:"VBreadcrumbs",props:{activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:On,items:{type:Array,default:()=>[]},...Yo(),...zs(),...Zn({tag:"ul"})},setup(t,e){let{slots:i}=e;const{backgroundColorClasses:n,backgroundColorStyles:r}=ho(li(t,"bgColor")),{densityClasses:a}=hl(t),{roundedClasses:c}=fo(t);return co({VBreadcrumbsDivider:{divider:li(t,"divider")},VBreadcrumbsItem:{activeClass:li(t,"activeClass"),activeColor:li(t,"activeColor"),color:li(t,"color"),disabled:li(t,"disabled")}}),Pi(()=>{const s=!!(i.prepend||t.icon);return w(t.tag,{class:["v-breadcrumbs",n.value,a.value,c.value],style:r.value},{default:()=>{var p;return[s&&w("div",{key:"prepend",class:"v-breadcrumbs__prepend"},[i.prepend?w(es,{key:"prepend-defaults",disabled:!t.icon,defaults:{VIcon:{icon:t.icon,start:!0}}},i.prepend):w(lo,{key:"prepend-icon",start:!0,icon:t.icon},null)]),t.items.map((_,b,S)=>w(Oi,null,[w(m$,Mi({key:b,disabled:b>=S.length-1},typeof _=="string"?{title:_}:_),{default:i.title?()=>{var E;return(E=i.title)==null?void 0:E.call(i,{item:_,index:b})}:void 0}),b<S.length-1&&w(p$,null,{default:i.divider?()=>{var E;return(E=i.divider)==null?void 0:E.call(i,{item:_,index:b})}:void 0})])),(p=i.default)==null?void 0:p.call(i)]}})}),{}}});const g$=wu({name:"VCardActions",setup(t,e){let{slots:i}=e;return co({VBtn:{variant:"text"}}),Pi(()=>{var n;return w("div",{class:"v-card-actions"},[(n=i.default)==null?void 0:n.call(i)])}),{}}}),_$=od("v-card-subtitle"),v$=od("v-card-title"),y$=yi()({name:"VCardItem",props:{appendAvatar:String,appendIcon:On,prependAvatar:String,prependIcon:On,subtitle:String,title:String,...Yo()},setup(t,e){let{slots:i}=e;return Pi(()=>{var _;const n=!!(t.prependAvatar||t.prependIcon),r=!!(n||i.prepend),a=!!(t.appendAvatar||t.appendIcon),c=!!(a||i.append),s=!!(t.title||i.title),p=!!(t.subtitle||i.subtitle);return w("div",{class:"v-card-item"},[r&&w("div",{key:"prepend",class:"v-card-item__prepend"},[i.prepend?w(es,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},i.prepend):n&&w(Rf,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),w("div",{class:"v-card-item__content"},[s&&w(v$,{key:"title"},{default:()=>{var b;return[((b=i.title)==null?void 0:b.call(i))??t.title]}}),p&&w(_$,{key:"subtitle"},{default:()=>{var b;return[((b=i.subtitle)==null?void 0:b.call(i))??t.subtitle]}}),(_=i.default)==null?void 0:_.call(i)]),c&&w("div",{key:"append",class:"v-card-item__append"},[i.append?w(es,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},i.append):a&&w(Rf,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),b$=od("v-card-text"),Cfe=yi()({name:"VCard",directives:{Ripple:Uf},props:{appendAvatar:String,appendIcon:On,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:On,ripple:{type:Boolean,default:!0},subtitle:String,text:String,title:String,...vr(),...Ju(),...Yo(),...ud(),...Xo(),...Sx(),...jf(),...Jg(),...zs(),...Ay(),...Zn(),...Oc({variant:"elevated"})},setup(t,e){let{attrs:i,slots:n}=e;const{themeClasses:r}=Vr(t),{borderClasses:a}=Mc(t),{colorClasses:c,colorStyles:s,variantClasses:p}=tm(t),{densityClasses:_}=hl(t),{dimensionStyles:b}=cd(t),{elevationClasses:S}=$a(t),{loaderClasses:E}=Iy(t),{locationStyles:I}=Hf(t),{positionClasses:R}=e_(t),{roundedClasses:V}=fo(t),q=Py(t,i),U=Me(()=>t.link!==!1&&q.isLink.value),H=Me(()=>!t.disabled&&t.link!==!1&&(t.link||q.isClickable.value));return Pi(()=>{const Z=U.value?"a":t.tag,ne=!!(n.title||t.title),ie=!!(n.subtitle||t.subtitle),oe=ne||ie,pe=!!(n.append||t.appendAvatar||t.appendIcon),de=!!(n.prepend||t.prependAvatar||t.prependIcon),fe=!!(n.image||t.image),ge=oe||de||pe,we=!!(n.text||t.text);return Br(w(Z,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":H.value},r.value,a.value,c.value,_.value,S.value,E.value,R.value,V.value,p.value],style:[s.value,b.value,I.value],href:q.href.value,onClick:H.value&&q.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var Ie;return[fe&&w("div",{key:"image",class:"v-card__image"},[n.image?w(es,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):w(i_,{key:"image-img",cover:!0,src:t.image},null)]),w(Cx,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:n.loader}),ge&&w(y$,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),we&&w(b$,{key:"text"},{default:()=>{var Oe;return[((Oe=n.text)==null?void 0:Oe.call(n))??t.text]}}),(Ie=n.default)==null?void 0:Ie.call(n),n.actions&&w(g$,null,{default:n.actions}),em(H.value,"v-card")]}}),[[Ba("ripple"),H.value&&t.ripple]])}),{}}});const kfe=t=>{const{touchstartX:e,touchendX:i,touchstartY:n,touchendY:r}=t,a=.5,c=16;t.offsetX=i-e,t.offsetY=r-n,Math.abs(t.offsetY)<a*Math.abs(t.offsetX)&&(t.left&&i<e-c&&t.left(t),t.right&&i>e+c&&t.right(t)),Math.abs(t.offsetX)<a*Math.abs(t.offsetY)&&(t.up&&r<n-c&&t.up(t),t.down&&r>n+c&&t.down(t))};function Efe(t,e){var n;const i=t.changedTouches[0];e.touchstartX=i.clientX,e.touchstartY=i.clientY,(n=e.start)==null||n.call(e,{originalEvent:t,...e})}function Ife(t,e){var n;const i=t.changedTouches[0];e.touchendX=i.clientX,e.touchendY=i.clientY,(n=e.end)==null||n.call(e,{originalEvent:t,...e}),kfe(e)}function Pfe(t,e){var n;const i=t.changedTouches[0];e.touchmoveX=i.clientX,e.touchmoveY=i.clientY,(n=e.move)==null||n.call(e,{originalEvent:t,...e})}function Afe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:i=>Efe(i,e),touchend:i=>Ife(i,e),touchmove:i=>Pfe(i,e)}}function Mfe(t,e){var s;const i=e.value,n=i!=null&&i.parent?t.parentElement:t,r=(i==null?void 0:i.options)??{passive:!0},a=(s=e.instance)==null?void 0:s.$.uid;if(!n||!a)return;const c=Afe(e.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[a]=c,YD(c).forEach(p=>{n.addEventListener(p,c[p],r)})}function Ofe(t,e){var a,c;const i=(a=e.value)!=null&&a.parent?t.parentElement:t,n=(c=e.instance)==null?void 0:c.$.uid;if(!(i!=null&&i._touchHandlers)||!n)return;const r=i._touchHandlers[n];YD(r).forEach(s=>{i.removeEventListener(s,r[s])}),delete i._touchHandlers[n]}const OE={mounted:Mfe,unmounted:Ofe},x$=Symbol.for("vuetify:v-window"),w$=Symbol.for("vuetify:v-window-group"),T$=gn({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...Zn(),...vr()},"v-window"),S$=yi()({name:"VWindow",directives:{Touch:OE},props:T$(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{isRtl:r}=zh(),{t:a}=Tu(),c=im(t,w$),s=lt(),p=Me(()=>r.value?!t.reverse:t.reverse),_=lt(!1),b=Me(()=>{const ne=t.direction==="vertical"?"y":"x",oe=(p.value?!_.value:_.value)?"-reverse":"";return`v-window-${ne}${oe}-transition`}),S=lt(0),E=lt(void 0),I=Me(()=>c.items.value.findIndex(ne=>c.selected.value.includes(ne.id)));Fi(I,(ne,ie)=>{const oe=c.items.value.length,pe=oe-1;oe<=2?_.value=ne<ie:ne===pe&&ie===0?_.value=!0:ne===0&&ie===pe?_.value=!1:_.value=ne<ie}),Mn(x$,{transition:b,isReversed:_,transitionCount:S,transitionHeight:E,rootRef:s});const R=Me(()=>t.continuous||I.value!==0),V=Me(()=>t.continuous||I.value!==c.items.value.length-1);function q(){R.value&&c.prev()}function U(){V.value&&c.next()}const H=Me(()=>{const ne=[],ie={icon:r.value?t.nextIcon:t.prevIcon,class:`v-window__${p.value?"right":"left"}`,onClick:c.prev,ariaLabel:a("$vuetify.carousel.prev")};ne.push(R.value?i.prev?i.prev({props:ie}):w(ko,ie,null):w("div",null,null));const oe={icon:r.value?t.prevIcon:t.nextIcon,class:`v-window__${p.value?"left":"right"}`,onClick:c.next,ariaLabel:a("$vuetify.carousel.next")};return ne.push(V.value?i.next?i.next({props:oe}):w(ko,oe,null):w("div",null,null)),ne}),Z=Me(()=>t.touch===!1?t.touch:{...{left:()=>{p.value?q():U()},right:()=>{p.value?U():q()},start:ie=>{let{originalEvent:oe}=ie;oe.stopPropagation()}},...t.touch===!0?{}:t.touch});return Pi(()=>Br(w(t.tag,{ref:s,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},n.value]},{default:()=>{var ne,ie;return[w("div",{class:"v-window__container",style:{height:E.value}},[(ne=i.default)==null?void 0:ne.call(i,{group:c}),t.showArrows!==!1&&w("div",{class:"v-window__controls"},[H.value])]),(ie=i.additional)==null?void 0:ie.call(i,{group:c})]}}),[[Ba("touch"),Z.value]])),{group:c}}}),Lfe=yi()({name:"VCarousel",props:{color:String,cycle:Boolean,delimiterIcon:{type:On,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:t=>Number(t)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...T$({continuous:!0,mandatory:"force",showArrows:!0})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{t:r}=Tu(),a=lt();let c=-1;Fi(n,p),Fi(()=>t.interval,p),Fi(()=>t.cycle,_=>{_?p():window.clearTimeout(c)}),Fn(s);function s(){!t.cycle||!a.value||(c=window.setTimeout(a.value.group.next,+t.interval>0?+t.interval:6e3))}function p(){window.clearTimeout(c),window.requestAnimationFrame(s)}return Pi(()=>w(S$,{ref:a,modelValue:n.value,"onUpdate:modelValue":_=>n.value=_,class:["v-carousel",{"v-carousel--hide-delimiter-background":t.hideDelimiterBackground,"v-carousel--vertical-delimiters":t.verticalDelimiters}],style:{height:Xi(t.height)},continuous:!0,mandatory:"force",showArrows:t.showArrows},{default:i.default,additional:_=>{let{group:b}=_;return w(Oi,null,[!t.hideDelimiters&&w("div",{class:"v-carousel__controls",style:{left:t.verticalDelimiters==="left"&&t.verticalDelimiters?0:"auto",right:t.verticalDelimiters==="right"?0:"auto"}},[b.items.value.length>0&&w(es,{defaults:{VBtn:{color:t.color,icon:t.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[b.items.value.map((S,E)=>{const I={id:`carousel-item-${S.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",E+1,b.items.value.length),class:[b.isSelected(S.id)&&"v-btn--active"],onClick:()=>b.select(S.id,!0)};return i.item?i.item({props:I,item:S}):w(ko,Mi(S,I),null)})]})]),t.progress&&w(Lk,{class:"v-carousel__progress",color:typeof t.progress=="string"?t.progress:void 0,modelValue:(b.getItemIndex(n.value)+1)/b.items.value.length*100},null)])},prev:i.prev,next:i.next})),{}}}),C$=yi()({name:"VWindowItem",directives:{Touch:OE},props:{reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Xg(),...Bx()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:i}=e;const n=qi(x$),r=Kg(t,w$),{isBooted:a}=rm();if(!n||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const c=lt(!1),s=Me(()=>n.isReversed.value?t.reverseTransition!==!1:t.transition!==!1);function p(){!c.value||!n||(c.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function _(){var R;c.value||!n||(c.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=Xi((R=n.rootRef.value)==null?void 0:R.clientHeight)),n.transitionCount.value+=1)}function b(){p()}function S(R){c.value&&Cn(()=>{!s.value||!c.value||!n||(n.transitionHeight.value=Xi(R.clientHeight))})}const E=Me(()=>{const R=n.isReversed.value?t.reverseTransition:t.transition;return s.value?{name:typeof R!="string"?n.transition.value:R,onBeforeEnter:_,onAfterEnter:p,onEnterCancelled:b,onBeforeLeave:_,onAfterLeave:p,onLeaveCancelled:b,onEnter:S}:!1}),{hasContent:I}=zk(t,r.isSelected);return Pi(()=>w(Jc,{transition:E.value,disabled:!a.value},{default:()=>{var R;return[Br(w("div",{class:["v-window-item",r.selectedClass.value]},[I.value&&((R=i.default)==null?void 0:R.call(i))]),[[Qu,r.isSelected.value]])]}})),{}}}),Dfe=yi()({name:"VCarouselItem",inheritAttrs:!1,props:{value:null},setup(t,e){let{slots:i,attrs:n}=e;Pi(()=>w(C$,{class:"v-carousel-item",value:t.value},{default:()=>[w(i_,n,i)]}))}});const Rfe=od("v-code");const k$=gn({color:String,...Ju(),...ud(),...Xo(),...jf(),...Jg(),...zs(),...Zn(),...vr()},"v-sheet"),LS=yi()({name:"VSheet",props:{...k$()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{backgroundColorClasses:r,backgroundColorStyles:a}=ho(li(t,"color")),{borderClasses:c}=Mc(t),{dimensionStyles:s}=cd(t),{elevationClasses:p}=$a(t),{locationStyles:_}=Hf(t),{positionClasses:b}=e_(t),{roundedClasses:S}=fo(t);return Pi(()=>w(t.tag,{class:["v-sheet",n.value,r.value,c.value,p.value,b.value,S.value],style:[a.value,s.value,_.value]},i)),{}}});const Bfe=wu({name:"VColorPickerCanvas",props:{color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300}},emits:{"update:color":t=>!0,"update:position":t=>!0},setup(t,e){let{emit:i}=e;const n=lt(!1),r=lt(!1),a=lt({x:0,y:0}),c=Me(()=>{const{x:U,y:H}=a.value,Z=parseInt(t.dotSize,10)/2;return{width:Xi(t.dotSize),height:Xi(t.dotSize),transform:`translate(${Xi(U-Z)}, ${Xi(H-Z)})`}}),s=lt(),p=lt(parseFloat(t.width)),_=lt(parseFloat(t.height)),{resizeRef:b}=Mf(U=>{var ne;if(!((ne=b.value)!=null&&ne.offsetParent))return;const{width:H,height:Z}=U[0].contentRect;p.value=H,_.value=Z});function S(U,H,Z){const{left:ne,top:ie,width:oe,height:pe}=Z;a.value={x:Yu(U-ne,0,oe),y:Yu(H-ie,0,pe)}}function E(U){t.disabled||!s.value||S(U.clientX,U.clientY,s.value.getBoundingClientRect())}function I(U){U.preventDefault(),!t.disabled&&(n.value=!0,window.addEventListener("mousemove",R),window.addEventListener("mouseup",V),window.addEventListener("touchmove",R),window.addEventListener("touchend",V))}function R(U){if(t.disabled||!s.value)return;n.value=!0;const H=zU(U);S(H.clientX,H.clientY,s.value.getBoundingClientRect())}function V(){window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",V),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",V)}Fi(a,()=>{var Z,ne;if(r.value){r.value=!1;return}if(!s.value)return;const{x:U,y:H}=a.value;i("update:color",{h:((Z=t.color)==null?void 0:Z.h)??0,s:Yu(U,0,p.value)/p.value,v:1-Yu(H,0,_.value)/_.value,a:((ne=t.color)==null?void 0:ne.a)??1})});function q(){var ie;if(!s.value)return;const U=s.value,H=U.getContext("2d");if(!H)return;const Z=H.createLinearGradient(0,0,U.width,0);Z.addColorStop(0,"hsla(0, 0%, 100%, 1)"),Z.addColorStop(1,`hsla(${((ie=t.color)==null?void 0:ie.h)??0}, 100%, 50%, 1)`),H.fillStyle=Z,H.fillRect(0,0,U.width,U.height);const ne=H.createLinearGradient(0,0,0,U.height);ne.addColorStop(0,"hsla(0, 0%, 100%, 0)"),ne.addColorStop(1,"hsla(0, 0%, 0%, 1)"),H.fillStyle=ne,H.fillRect(0,0,U.width,U.height)}return Fi(()=>{var U;return(U=t.color)==null?void 0:U.h},q,{immediate:!0}),Fi(()=>[p.value,_.value],(U,H)=>{q(),a.value={x:a.value.x*U[0]/H[0],y:a.value.y*U[1]/H[1]}},{flush:"post"}),Fi(()=>t.color,()=>{if(n.value){n.value=!1;return}r.value=!0,a.value=t.color?{x:t.color.s*p.value,y:(1-t.color.v)*_.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Fn(()=>q()),Pi(()=>w("div",{ref:b,class:"v-color-picker-canvas",onClick:E,onMousedown:I,onTouchstart:I},[w("canvas",{ref:s,width:p.value,height:_.value},null),t.color&&w("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":t.disabled}],style:c.value},null)])),{}}});function Pp(t,e){return e.every(i=>t.hasOwnProperty(i))}function E$(t){if(!t)return null;let e=null;if(typeof t=="string"){const i=u4(t);e=a4(i)}return typeof t=="object"&&(Pp(t,["r","g","b"])?e=yC(t):Pp(t,["h","s","l"])?e=n4(t):Pp(t,["h","s","v"])&&(e=t)),e}function Ffe(t,e){if(e){const{a:i,...n}=t;return n}return t}function $fe(t,e){if(e==null||typeof e=="string"){const i=l4(t);return t.a===1?i.slice(0,7):i}if(typeof e=="object"){let i;return Pp(e,["r","g","b"])?i=Kb(t):Pp(e,["h","s","l"])?i=i4(t):Pp(e,["h","s","v"])&&(i=t),Ffe(i,!Pp(e,["a"])&&t.a===1)}return t}const Fv={h:0,s:0,v:1,a:1},DS={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:t=>Math.round(t.r),getColor:(t,e)=>({...t,r:Number(e)})},{label:"G",max:255,step:1,getValue:t=>Math.round(t.g),getColor:(t,e)=>({...t,g:Number(e)})},{label:"B",max:255,step:1,getValue:t=>Math.round(t.b),getColor:(t,e)=>({...t,b:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:Kb,from:yC};var vL;const Nfe={...DS,inputs:(vL=DS.inputs)==null?void 0:vL.slice(0,3)},RS={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:t=>Math.round(t.h),getColor:(t,e)=>({...t,h:Number(e)})},{label:"S",max:1,step:.01,getValue:t=>Math.round(t.s*100)/100,getColor:(t,e)=>({...t,s:Number(e)})},{label:"L",max:1,step:.01,getValue:t=>Math.round(t.l*100)/100,getColor:(t,e)=>({...t,l:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:i4,from:n4},zfe={...RS,inputs:RS.inputs.slice(0,3)},I$={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:t=>t,getColor:(t,e)=>e}],to:l4,from:a4},Vfe={...I$,inputs:[{label:"HEX",getValue:t=>t.slice(0,7),getColor:(t,e)=>e}]},Ap={rgb:Nfe,rgba:DS,hsl:zfe,hsla:RS,hex:Vfe,hexa:I$},Ufe=t=>{let{label:e,...i}=t;return w("div",{class:"v-color-picker-edit__input"},[w("input",i,null),w("span",null,[e])])},jfe=wu({name:"VColorPickerEdit",props:{color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(Ap).includes(t)},modes:{type:Array,default:()=>Object.keys(Ap),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(Ap).includes(e))}},emits:{"update:color":t=>!0,"update:mode":t=>!0},setup(t,e){let{emit:i}=e;const n=Me(()=>t.modes.map(a=>({...Ap[a],name:a}))),r=Me(()=>{var s;const a=n.value.find(p=>p.name===t.mode);if(!a)return[];const c=t.color?a.to(t.color):null;return(s=a.inputs)==null?void 0:s.map(p=>{let{getValue:_,getColor:b,...S}=p;return{...a.inputProps,...S,disabled:t.disabled,value:c&&_(c),onChange:E=>{const I=E.target;I&&i("update:color",a.from(b(c??Fv,I.value)))}}})});return Pi(()=>{var a;return w("div",{class:"v-color-picker-edit"},[(a=r.value)==null?void 0:a.map(c=>w(Ufe,c,null)),n.value.length>1&&w(ko,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const c=n.value.findIndex(s=>s.name===t.mode);i("update:mode",n.value[(c+1)%n.value.length].name)}},null)])}),{}}});const LE=Symbol.for("vuetify:v-slider");function BS(t,e,i){const n=i==="vertical",r=e.getBoundingClientRect(),a="touches"in t?t.touches[0]:t;return n?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function Hfe(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const P$=gn({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...zs(),...Xo({elevation:2})},"slider"),A$=t=>{let{props:e,handleSliderMouseUp:i,handleMouseMove:n,getActiveThumb:r}=t;const{isRtl:a}=zh(),c=li(e,"reverse"),s=Me(()=>{let Fe=a.value?"rtl":"ltr";return e.reverse&&(Fe=Fe==="rtl"?"ltr":"rtl"),Fe}),p=Me(()=>parseFloat(e.min)),_=Me(()=>parseFloat(e.max)),b=Me(()=>+e.step>0?parseFloat(e.step):0),S=Me(()=>Math.max(KA(b.value),KA(p.value))),E=Me(()=>parseInt(e.thumbSize,10)),I=Me(()=>parseInt(e.tickSize,10)),R=Me(()=>parseInt(e.trackSize,10)),V=Me(()=>(_.value-p.value)/b.value),q=li(e,"disabled"),U=Me(()=>e.direction==="vertical"),H=Me(()=>e.error||e.disabled?void 0:e.thumbColor??e.color),Z=Me(()=>e.error||e.disabled?void 0:e.trackColor??e.color),ne=Me(()=>e.error||e.disabled?void 0:e.trackFillColor??e.color),ie=lt(!1),oe=lt(0),pe=lt(),de=lt();function fe(Fe){if(b.value<=0)return Fe;const tt=Yu(Fe,p.value,_.value),Rt=p.value%b.value,Xt=Math.round((tt-Rt)/b.value)*b.value+Rt;return parseFloat(Math.min(Xt,_.value).toFixed(S.value))}function ge(Fe){var kt;const tt=e.direction==="vertical",Rt=tt?"top":"left",Xt=tt?"height":"width",Ei=tt?"clientY":"clientX",{[Rt]:Ni,[Xt]:Vi}=(kt=pe.value)==null?void 0:kt.$el.getBoundingClientRect(),Ve=Hfe(Fe,Ei);let dt=Math.min(Math.max((Ve-Ni-oe.value)/Vi,0),1)||0;return(tt||s.value==="rtl")&&(dt=1-dt),fe(p.value+dt*(_.value-p.value))}let we=!1;const Ie=Fe=>{we||(oe.value=0,i(ge(Fe))),ie.value=!1,we=!1,oe.value=0},Oe=Fe=>{de.value=r(Fe),de.value&&(de.value.focus(),ie.value=!0,de.value.contains(Fe.target)?(we=!0,oe.value=BS(Fe,de.value,e.direction)):(oe.value=0,n(ge(Fe))))},ke={passive:!0,capture:!0};function Ee(Fe){we=!0,n(ge(Fe))}function Qe(Fe){Fe.stopPropagation(),Fe.preventDefault(),Ie(Fe),window.removeEventListener("mousemove",Ee,ke),window.removeEventListener("mouseup",Qe)}function gt(Fe){var tt;Ie(Fe),window.removeEventListener("touchmove",Ee,ke),(tt=Fe.target)==null||tt.removeEventListener("touchend",gt)}function nt(Fe){var tt;Oe(Fe),window.addEventListener("touchmove",Ee,ke),(tt=Fe.target)==null||tt.addEventListener("touchend",gt,{passive:!1})}function ft(Fe){Fe.preventDefault(),Oe(Fe),window.addEventListener("mousemove",Ee,ke),window.addEventListener("mouseup",Qe,{passive:!1})}const Tt=Fe=>{const tt=(Fe-p.value)/(_.value-p.value)*100;return Yu(isNaN(tt)?0:tt,0,100)},pt=li(e,"showTicks"),et=Me(()=>pt.value?e.ticks?Array.isArray(e.ticks)?e.ticks.map(Fe=>({value:Fe,position:Tt(Fe),label:Fe.toString()})):Object.keys(e.ticks).map(Fe=>({value:parseFloat(Fe),position:Tt(parseFloat(Fe)),label:e.ticks[Fe]})):V.value!==1/0?yh(V.value+1).map(Fe=>{const tt=p.value+Fe*b.value;return{value:tt,position:Tt(tt)}}):[]:[]),Mt=Me(()=>et.value.some(Fe=>{let{label:tt}=Fe;return!!tt})),Qt={activeThumbRef:de,color:li(e,"color"),decimals:S,disabled:q,direction:li(e,"direction"),elevation:li(e,"elevation"),hasLabels:Mt,horizontalDirection:s,isReversed:c,min:p,max:_,mousePressed:ie,numTicks:V,onSliderMousedown:ft,onSliderTouchstart:nt,parsedTicks:et,parseMouseMove:ge,position:Tt,readonly:li(e,"readonly"),rounded:li(e,"rounded"),roundValue:fe,showTicks:pt,startOffset:oe,step:b,thumbSize:E,thumbColor:H,thumbLabel:li(e,"thumbLabel"),ticks:li(e,"ticks"),tickSize:I,trackColor:Z,trackContainerRef:pe,trackFillColor:ne,trackSize:R,vertical:U};return Mn(LE,Qt),Qt},FS=yi()({name:"VSliderThumb",directives:{Ripple:Uf},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0}},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i,emit:n}=e;const r=qi(LE);if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:a,step:c,vertical:s,disabled:p,thumbSize:_,thumbLabel:b,direction:S,readonly:E,elevation:I,isReversed:R,horizontalDirection:V,mousePressed:q,decimals:U}=r,{textColorClasses:H,textColorStyles:Z}=Ul(a),{pageup:ne,pagedown:ie,end:oe,home:pe,left:de,right:fe,down:ge,up:we}=T2,Ie=[ne,ie,oe,pe,de,fe,ge,we],Oe=Me(()=>c.value?[1,2,3]:[1,5,10]);function ke(Qe,gt){if(!Ie.includes(Qe.key))return;Qe.preventDefault();const nt=c.value||.1,ft=(t.max-t.min)/nt;if([de,fe,ge,we].includes(Qe.key)){const pt=(V.value==="rtl"?[de,we]:[fe,we]).includes(Qe.key)?1:-1,et=Qe.shiftKey?2:Qe.ctrlKey?1:0;gt=gt+pt*nt*Oe.value[et]}else if(Qe.key===pe)gt=t.min;else if(Qe.key===oe)gt=t.max;else{const Tt=Qe.key===ie?1:-1;gt=gt-Tt*nt*(ft>100?ft/10:10)}return Math.max(t.min,Math.min(t.max,gt))}function Ee(Qe){const gt=ke(Qe,t.modelValue);gt!=null&&n("update:modelValue",gt)}return Pi(()=>{const Qe=Xi(s.value||R.value?100-t.position:t.position,"%"),{elevationClasses:gt}=$a(Me(()=>p.value?void 0:I.value));return w("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&q.value}],style:{"--v-slider-thumb-position":Qe,"--v-slider-thumb-size":Xi(_.value)},role:"slider",tabindex:p.value?-1:0,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":E.value,"aria-orientation":S.value,onKeydown:E.value?void 0:Ee},[w("div",{class:["v-slider-thumb__surface",H.value,gt.value],style:{...Z.value}},null),Br(w("div",{class:["v-slider-thumb__ripple",H.value],style:Z.value},null),[[Ba("ripple"),t.ripple,null,{circle:!0,center:!0}]]),w(HB,{origin:"bottom center"},{default:()=>{var nt;return[Br(w("div",{class:"v-slider-thumb__label-container"},[w("div",{class:["v-slider-thumb__label"]},[w("div",null,[((nt=i["thumb-label"])==null?void 0:nt.call(i,{modelValue:t.modelValue}))??t.modelValue.toFixed(c.value?U.value:1)])])]),[[Qu,b.value&&t.focused||b.value==="always"]])]}})])}),{}}});const M$=yi()({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(t,e){let{slots:i}=e;const n=qi(LE);if(!n)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,horizontalDirection:a,parsedTicks:c,rounded:s,showTicks:p,tickSize:_,trackColor:b,trackFillColor:S,trackSize:E,vertical:I,min:R,max:V}=n,{roundedClasses:q}=fo(s),{backgroundColorClasses:U,backgroundColorStyles:H}=ho(S),{backgroundColorClasses:Z,backgroundColorStyles:ne}=ho(b),ie=Me(()=>`inset-${I.value?"block-end":"inline-start"}`),oe=Me(()=>I.value?"height":"width"),pe=Me(()=>({[ie.value]:"0%",[oe.value]:"100%"})),de=Me(()=>t.stop-t.start),fe=Me(()=>({[ie.value]:Xi(t.start,"%"),[oe.value]:Xi(de.value,"%")})),ge=Me(()=>p.value?(I.value?c.value.slice().reverse():c.value).map((Ie,Oe)=>{var Qe;const ke=I.value?"bottom":"margin-inline-start",Ee=Ie.value!==R.value&&Ie.value!==V.value?Xi(Ie.position,"%"):void 0;return w("div",{key:Ie.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":Ie.position>=t.start&&Ie.position<=t.stop,"v-slider-track__tick--first":Ie.value===R.value,"v-slider-track__tick--last":Ie.value===V.value}],style:{[ke]:Ee}},[(Ie.label||i["tick-label"])&&w("div",{class:"v-slider-track__tick-label"},[((Qe=i["tick-label"])==null?void 0:Qe.call(i,{tick:Ie,index:Oe}))??Ie.label])])}):[]);return Pi(()=>w("div",{class:["v-slider-track",q.value],style:{"--v-slider-track-size":Xi(E.value),"--v-slider-tick-size":Xi(_.value),direction:I.value?void 0:a.value}},[w("div",{class:["v-slider-track__background",Z.value,{"v-slider-track__background--opacity":!!r.value||!S.value}],style:{...pe.value,...ne.value}},null),w("div",{class:["v-slider-track__fill",U.value],style:{...fe.value,...H.value}},null),p.value&&w("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":p.value==="always"}]},[ge.value])])),{}}}),$S=yi()({name:"VSlider",props:{...Ix(),...P$(),...Hh(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=lt(),{min:r,max:a,mousePressed:c,roundValue:s,onSliderMousedown:p,onSliderTouchstart:_,trackContainerRef:b,position:S,hasLabels:E,readonly:I}=A$({props:t,handleSliderMouseUp:Z=>R.value=s(Z),handleMouseMove:Z=>R.value=s(Z),getActiveThumb:()=>{var Z;return(Z=n.value)==null?void 0:Z.$el}}),R=Pn(t,"modelValue",void 0,Z=>{const ne=typeof Z=="string"?parseFloat(Z):Z??r.value;return s(ne)}),{isFocused:V,focus:q,blur:U}=nm(t),H=Me(()=>S(R.value));return Pi(()=>{const[Z,ne]=Gf(t),ie=!!(t.label||i.label||i.prepend);return w(Jd,Mi({class:["v-slider",{"v-slider--has-labels":!!i["tick-label"]||E.value,"v-slider--focused":V.value,"v-slider--pressed":c.value,"v-slider--disabled":t.disabled}]},Z,{focused:V.value}),{...i,prepend:ie?oe=>{var pe,de;return w(Oi,null,[((pe=i.label)==null?void 0:pe.call(i,oe))??t.label?w(t_,{id:oe.id.value,class:"v-slider__label",text:t.label},null):void 0,(de=i.prepend)==null?void 0:de.call(i,oe)])}:void 0,default:oe=>{let{id:pe,messagesId:de}=oe;return w("div",{class:"v-slider__container",onMousedown:I.value?void 0:p,onTouchstartPassive:I.value?void 0:_},[w("input",{id:pe.value,name:t.name||pe.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:R.value},null),w(M$,{ref:b,start:0,stop:H.value},{"tick-label":i["tick-label"]}),w(FS,{ref:n,"aria-describedby":de.value,focused:V.value,min:r.value,max:a.value,modelValue:R.value,"onUpdate:modelValue":fe=>R.value=fe,position:H.value,elevation:t.elevation,onFocus:q,onBlur:U},{"thumb-label":i["thumb-label"]})])}})}),{}}}),Gfe=wu({name:"VColorPickerPreview",props:{color:{type:Object},disabled:Boolean,hideAlpha:Boolean},emits:{"update:color":t=>!0},setup(t,e){let{emit:i}=e;return Pi(()=>{var n,r;return w("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":t.hideAlpha}]},[w("div",{class:"v-color-picker-preview__dot"},[w("div",{style:{background:r4(t.color??Fv)}},null)]),w("div",{class:"v-color-picker-preview__sliders"},[w($S,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(n=t.color)==null?void 0:n.h,"onUpdate:modelValue":a=>i("update:color",{...t.color??Fv,h:a}),step:0,min:0,max:360,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!t.hideAlpha&&w($S,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((r=t.color)==null?void 0:r.a)??1,"onUpdate:modelValue":a=>i("update:color",{...t.color??Fv,a}),step:1/256,min:0,max:1,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}});const Wfe=Object.freeze({base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"}),qfe=Object.freeze({base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"}),Zfe=Object.freeze({base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"}),Yfe=Object.freeze({base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"}),Xfe=Object.freeze({base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"}),Kfe=Object.freeze({base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"}),Qfe=Object.freeze({base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"}),Jfe=Object.freeze({base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"}),epe=Object.freeze({base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"}),tpe=Object.freeze({base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"}),ipe=Object.freeze({base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"}),npe=Object.freeze({base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"}),rpe=Object.freeze({base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"}),spe=Object.freeze({base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"}),ope=Object.freeze({base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"}),ape=Object.freeze({base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"}),lpe=Object.freeze({base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"}),upe=Object.freeze({base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"}),cpe=Object.freeze({base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"}),dpe=Object.freeze({black:"#000000",white:"#ffffff",transparent:"#ffffff00"}),hpe=Object.freeze({red:Wfe,pink:qfe,purple:Zfe,deepPurple:Yfe,indigo:Xfe,blue:Kfe,lightBlue:Qfe,cyan:Jfe,teal:epe,green:tpe,lightGreen:ipe,lime:npe,yellow:rpe,amber:spe,orange:ope,deepOrange:ape,brown:lpe,blueGrey:upe,grey:cpe,shades:dpe});function fpe(t){return Object.keys(t).map(e=>{const i=t[e];return i.base?[i.base,i.darken4,i.darken3,i.darken2,i.darken1,i.lighten1,i.lighten2,i.lighten3,i.lighten4,i.lighten5]:[i.black,i.white,i.transparent]})}const ppe=wu({name:"VColorPickerSwatches",props:{swatches:{type:Array,default:()=>fpe(hpe)},disabled:Boolean,color:Object,maxHeight:[Number,String]},emits:{"update:color":t=>!0},setup(t,e){let{emit:i}=e;return Pi(()=>w("div",{class:"v-color-picker-swatches",style:{maxHeight:Xi(t.maxHeight)}},[w("div",null,[t.swatches.map(n=>w("div",{class:"v-color-picker-swatches__swatch"},[n.map(r=>{const a=E$(r);return w("div",{class:"v-color-picker-swatches__color",onClick:()=>a&&i("update:color",a)},[w("div",{style:{background:r}},[t.color&&Xp(t.color,a)?w(lo,{size:"x-small",icon:"$success",color:tj(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),mpe=wu({name:"VColorPicker",props:{canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(Ap).includes(t)},modes:{type:Array,default:()=>Object.keys(Ap),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(Ap).includes(e))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Qd(k$({width:300}),["height","location","minHeight","maxHeight","minWidth","maxWidth"])},emits:{"update:modelValue":t=>!0,"update:mode":t=>!0},setup(t){const e=Pn(t,"mode"),i=lt(null),n=Pn(t,"modelValue",void 0,a=>{let c=E$(a);return c?(i.value&&(c={...c,h:i.value.h},i.value=null),c):null},a=>a?$fe(a,t.modelValue):null),r=a=>{n.value=a,i.value=a};return Fn(()=>{t.modes.includes(e.value)||(e.value=t.modes[0])}),co({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Pi(()=>{const[a]=LS.filterProps(t);return w(LS,Mi({rounded:t.rounded,elevation:t.elevation,theme:t.theme,class:["v-color-picker"],style:{"--v-color-picker-color-hsv":r4({...n.value??Fv,a:1})}},a,{maxWidth:t.width}),{default:()=>[!t.hideCanvas&&w(Bfe,{key:"canvas",color:n.value,"onUpdate:color":r,disabled:t.disabled,dotSize:t.dotSize,width:t.width,height:t.canvasHeight},null),(!t.hideSliders||!t.hideInputs)&&w("div",{key:"controls",class:"v-color-picker__controls"},[!t.hideSliders&&w(Gfe,{key:"preview",color:n.value,"onUpdate:color":r,hideAlpha:!e.value.endsWith("a"),disabled:t.disabled},null),!t.hideInputs&&w(jfe,{key:"edit",modes:t.modes,mode:e.value,"onUpdate:mode":c=>e.value=c,color:n.value,"onUpdate:color":r,disabled:t.disabled},null)]),t.showSwatches&&w(ppe,{key:"swatches",color:n.value,"onUpdate:color":r,maxHeight:t.swatchesMaxHeight,swatches:t.swatches,disabled:t.disabled},null)]})}),{}}});function gpe(t,e,i){if(e==null)return t;if(Array.isArray(e))throw new Error("Multiple matches is not implemented");return typeof e=="number"&&~e?w(Oi,null,[w("span",{class:"v-combobox__unmask"},[t.substr(0,e)]),w("span",{class:"v-combobox__mask"},[t.substr(e,i)]),w("span",{class:"v-combobox__unmask"},[t.substr(e+i)])]):t}const _pe=yi()({name:"VCombobox",props:{delimiters:Array,...Uk({filterKeys:["title"]}),...Vk({hideNoData:!0,returnObject:!0}),...Qd(Ox({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...jh({transition:!1})},emits:{"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var pt;let{emit:i,slots:n}=e;const{t:r}=Tu(),a=lt(),c=lt(!1),s=lt(!0),p=lt(),_=Pn(t,"menu"),b=Me({get:()=>_.value,set:et=>{var Mt;_.value&&!et&&((Mt=p.value)!=null&&Mt.ΨopenChildren)||(_.value=et)}}),S=lt(-1);let E=!1;const I=Me(()=>{var et;return(et=a.value)==null?void 0:et.color}),{items:R,transformIn:V,transformOut:q}=Dx(t),{textColorClasses:U,textColorStyles:H}=Ul(I),Z=Pn(t,"modelValue",[],et=>V(kc(et)),et=>{const Mt=q(et);return t.multiple?Mt:Mt[0]??null}),ne=Ax(),ie=lt(t.multiple?"":((pt=Z.value[0])==null?void 0:pt.title)??""),oe=Me({get:()=>ie.value,set:et=>{var Mt;if(ie.value=et,t.multiple||(Z.value=[Xm(t,et)]),et&&t.multiple&&((Mt=t.delimiters)!=null&&Mt.length)){const Qt=et.split(new RegExp(`(?:${t.delimiters.join("|")})+`));Qt.length>1&&(Qt.forEach(Fe=>{Fe=Fe.trim(),Fe&&nt(Xm(t,Fe))}),ie.value="")}et||(S.value=-1),s.value=!et}});Fi(ie,et=>{E?Cn(()=>E=!1):c.value&&!b.value&&(b.value=!0),i("update:search",et)}),Fi(Z,et=>{var Mt;t.multiple||(ie.value=((Mt=et[0])==null?void 0:Mt.title)??"")});const{filteredItems:pe,getMatches:de}=jk(t,R,Me(()=>s.value?void 0:oe.value)),fe=Me(()=>Z.value.map(et=>R.value.find(Mt=>t.valueComparator(Mt.value,et.value))||et)),ge=Me(()=>t.hideSelected?pe.value.filter(et=>!fe.value.some(Mt=>Mt.value===et.value)):pe.value),we=Me(()=>fe.value.map(et=>et.props.value)),Ie=Me(()=>fe.value[S.value]),Oe=lt();function ke(et){E=!0,t.openOnClear&&(b.value=!0)}function Ee(){t.hideNoData&&!R.value.length||t.readonly||ne!=null&&ne.isReadonly.value||(b.value=!0)}function Qe(et){var Fe,tt;if(t.readonly||ne!=null&&ne.isReadonly.value)return;const Mt=a.value.selectionStart,Qt=we.value.length;if((S.value>-1||["Enter","ArrowDown","ArrowUp"].includes(et.key))&&et.preventDefault(),["Enter","ArrowDown"].includes(et.key)&&(b.value=!0),["Escape"].includes(et.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(et.key)&&(s.value=!0),et.key==="ArrowDown"?(Fe=Oe.value)==null||Fe.focus("next"):et.key==="ArrowUp"&&((tt=Oe.value)==null||tt.focus("prev")),!!t.multiple){if(["Backspace","Delete"].includes(et.key)){if(S.value<0){et.key==="Backspace"&&!oe.value&&(S.value=Qt-1);return}nt(Ie.value),Cn(()=>!Ie.value&&(S.value=Qt-2))}if(et.key==="ArrowLeft"){if(S.value<0&&Mt>0)return;const Rt=S.value>-1?S.value-1:Qt-1;fe.value[Rt]?S.value=Rt:(S.value=-1,a.value.setSelectionRange(oe.value.length,oe.value.length))}if(et.key==="ArrowRight"){if(S.value<0)return;const Rt=S.value+1;fe.value[Rt]?S.value=Rt:(S.value=-1,a.value.setSelectionRange(0,0))}et.key==="Enter"&&oe.value&&(nt(Xm(t,oe.value)),oe.value="")}}function gt(){c.value&&(s.value=!0)}function nt(et){if(t.multiple){const Mt=we.value.findIndex(Qt=>t.valueComparator(Qt,et.value));if(Mt===-1)Z.value=[...Z.value,et];else{const Qt=[...Z.value];Qt.splice(Mt,1),Z.value=Qt}oe.value=""}else Z.value=[et],ie.value=et.title,Cn(()=>{b.value=!1,s.value=!0})}function ft(et){c.value=!0}function Tt(et){var Mt;et.relatedTarget==null&&((Mt=a.value)==null||Mt.focus())}return Fi(pe,et=>{!et.length&&t.hideNoData&&(b.value=!1)}),Fi(c,et=>{if(et)S.value=-1;else{if(b.value=!1,!t.multiple||!oe.value)return;Z.value=[...Z.value,Xm(t,oe.value)],oe.value=""}}),Pi(()=>{const et=!!(t.chips||n.chip),Mt=!!(!t.hideNoData||ge.value.length||n.prepend||n.append||n["no-data"]),Qt=Z.value.length>0,[Fe]=Wp.filterProps(t);return w(Wp,Mi({ref:a},Fe,{modelValue:oe.value,"onUpdate:modelValue":[tt=>oe.value=tt,tt=>{tt==null&&(Z.value=[])}],validationValue:Z.externalValue,dirty:Qt,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!t.chips,"v-combobox--selecting-index":S.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:t.items.length?t.menuIcon:void 0,readonly:t.readonly,placeholder:Qt?void 0:t.placeholder,"onClick:clear":ke,"onMousedown:control":Ee,onFocus:()=>c.value=!0,onBlur:()=>c.value=!1,onKeydown:Qe}),{...n,default:()=>w(Oi,null,[w(Fx,Mi({ref:p,modelValue:b.value,"onUpdate:modelValue":tt=>b.value=tt,activator:"parent",contentClass:"v-combobox__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:gt},t.menuProps),{default:()=>[Mt&&w(Rx,{ref:Oe,selected:we.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:tt=>tt.preventDefault(),onFocusin:ft,onFocusout:Tt},{default:()=>{var tt,Rt,Xt;return[!ge.value.length&&!t.hideNoData&&(((tt=n["no-data"])==null?void 0:tt.call(n))??w(Rh,{title:r(t.noDataText)},null)),(Rt=n["prepend-item"])==null?void 0:Rt.call(n),ge.value.map(Ei=>{var Ni;return((Ni=n.item)==null?void 0:Ni.call(n,{item:Ei,props:Mi(Ei.props,{onClick:()=>nt(Ei)})}))??w(Rh,Mi({key:Ei.value},Ei.props,{onClick:()=>nt(Ei)}),{prepend:Vi=>{let{isSelected:Ve}=Vi;return t.multiple&&!t.hideSelected?w(Dh,{modelValue:Ve,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var Vi,Ve;return s.value?Ei.title:gpe(Ei.title,(Vi=de(Ei))==null?void 0:Vi.title,((Ve=oe.value)==null?void 0:Ve.length)??0)}})}),(Xt=n["append-item"])==null?void 0:Xt.call(n)]}})]}),fe.value.map((tt,Rt)=>{var Ni;function Xt(Vi){Vi.stopPropagation(),Vi.preventDefault(),nt(tt)}const Ei={"onClick:close":Xt,modelValue:!0,"onUpdate:modelValue":void 0};return w("div",{key:tt.value,class:["v-combobox__selection",Rt===S.value&&["v-combobox__selection--selected",U.value]],style:Rt===S.value?H.value:{}},[et?n.chip?w(es,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:tt.title}}},{default:()=>{var Vi;return[(Vi=n.chip)==null?void 0:Vi.call(n,{item:tt,index:Rt,props:Ei})]}}):w(Ly,Mi({key:"chip",closable:t.closableChips,size:"small",text:tt.title},Ei),null):((Ni=n.selection)==null?void 0:Ni.call(n,{item:tt,index:Rt}))??w("span",{class:"v-combobox__selection-text"},[tt.title,t.multiple&&Rt<fe.value.length-1&&w("span",{class:"v-combobox__selection-comma"},[ye(",")])])])})])})}),dd({isFocused:c,isPristine:s,menu:b,search:oe,selectionIndex:S,filteredItems:pe,select:nt},a)}});const vpe=yi()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Ry({origin:"center center",scrollStrategy:"block",transition:{component:kx},zIndex:2400})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{scopeId:r}=Dy(),a=lt();function c(p){var S,E;const _=p.relatedTarget,b=p.target;if(_!==b&&((S=a.value)!=null&&S.contentEl)&&((E=a.value)!=null&&E.globalTop)&&![document,a.value.contentEl].includes(b)&&!a.value.contentEl.contains(b)){const I=[...a.value.contentEl.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')].filter(q=>!q.hasAttribute("disabled")&&!q.matches('[tabindex="-1"]'));if(!I.length)return;const R=I[0],V=I[I.length-1];_===R?V.focus():R.focus()}}Eo&&Fi(()=>n.value&&t.retainFocus,p=>{p?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0}),Fi(n,async p=>{var _,b;await Cn(),p?(_=a.value.contentEl)==null||_.focus({preventScroll:!0}):(b=a.value.activatorEl)==null||b.focus({preventScroll:!0})});const s=Me(()=>Mi({"aria-haspopup":"dialog","aria-expanded":String(n.value)},t.activatorProps));return Pi(()=>{const[p]=Bh.filterProps(t);return w(Bh,Mi({ref:a,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable}]},p,{modelValue:n.value,"onUpdate:modelValue":_=>n.value=_,"aria-modal":"true",activatorProps:s.value,role:"dialog"},r),{activator:i.activator,default:function(){for(var _=arguments.length,b=new Array(_),S=0;S<_;S++)b[S]=arguments[S];return w(es,{root:!0},{default:()=>{var E;return[(E=i.default)==null?void 0:E.call(i,...b)]}})}})}),dd({},a)}});const dy=Symbol.for("vuetify:v-expansion-panel"),ype=["default","accordion","inset","popout"],bpe=yi()({name:"VExpansionPanels",props:{color:String,variant:{type:String,default:"default",validator:t=>ype.includes(t)},readonly:Boolean,...Yg(),...Zn(),...vr()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;im(t,dy);const{themeClasses:n}=Vr(t),r=Me(()=>t.variant&&`v-expansion-panels--variant-${t.variant}`);return co({VExpansionPanel:{color:li(t,"color")},VExpansionPanelTitle:{readonly:li(t,"readonly")}}),Pi(()=>w(t.tag,{class:["v-expansion-panels",n.value,r.value]},i)),{}}}),O$=gn({color:String,expandIcon:{type:On,default:"$expand"},collapseIcon:{type:On,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean},"v-expansion-panel-title"),L$=yi()({name:"VExpansionPanelTitle",directives:{Ripple:Uf},props:{...O$()},setup(t,e){let{slots:i}=e;const n=qi(dy);if(!n)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:a}=ho(t,"color"),c=Me(()=>({collapseIcon:t.collapseIcon,disabled:n.disabled.value,expanded:n.isSelected.value,expandIcon:t.expandIcon,readonly:t.readonly}));return Pi(()=>{var s;return Br(w("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":n.isSelected.value},r.value],style:a.value,type:"button",tabindex:n.disabled.value?-1:void 0,disabled:n.disabled.value,"aria-expanded":n.isSelected.value,onClick:t.readonly?void 0:n.toggle},[w("span",{class:"v-expansion-panel-title__overlay"},null),(s=i.default)==null?void 0:s.call(i,c.value),!t.hideActions&&w("span",{class:"v-expansion-panel-title__icon"},[i.actions?i.actions(c.value):w(lo,{icon:n.isSelected.value?t.collapseIcon:t.expandIcon},null)])]),[[Ba("ripple"),t.ripple]])}),{}}}),D$=yi()({name:"VExpansionPanelText",props:{...Bx()},setup(t,e){let{slots:i}=e;const n=qi(dy);if(!n)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:a}=zk(t,n.isSelected);return Pi(()=>w(Ex,{onAfterLeave:a},{default:()=>{var c;return[Br(w("div",{class:"v-expansion-panel-text"},[i.default&&r.value&&w("div",{class:"v-expansion-panel-text__wrapper"},[(c=i.default)==null?void 0:c.call(i)])]),[[Qu,n.isSelected.value]])]}})),{}}}),xpe=yi()({name:"VExpansionPanel",props:{title:String,text:String,bgColor:String,...Xo(),...Xg(),...Bx(),...zs(),...Zn(),...O$()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:i}=e;const n=Kg(t,dy),{backgroundColorClasses:r,backgroundColorStyles:a}=ho(t,"bgColor"),{elevationClasses:c}=$a(t),{roundedClasses:s}=fo(t),p=Me(()=>(n==null?void 0:n.disabled.value)||t.disabled),_=Me(()=>n.group.items.value.reduce((E,I,R)=>(n.group.selected.value.includes(I.id)&&E.push(R),E),[])),b=Me(()=>{const E=n.group.items.value.findIndex(I=>I.id===n.id);return!n.isSelected.value&&_.value.some(I=>I-E===1)}),S=Me(()=>{const E=n.group.items.value.findIndex(I=>I.id===n.id);return!n.isSelected.value&&_.value.some(I=>I-E===-1)});return Mn(dy,n),Pi(()=>{const E=!!(i.text||t.text),I=!!(i.title||t.title);return w(t.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":n.isSelected.value,"v-expansion-panel--before-active":b.value,"v-expansion-panel--after-active":S.value,"v-expansion-panel--disabled":p.value},s.value,r.value],style:a.value,"aria-expanded":n.isSelected.value},{default:()=>{var R;return[w("div",{class:["v-expansion-panel__shadow",...c.value]},null),I&&w(L$,{key:"title",collapseIcon:t.collapseIcon,color:t.color,expandIcon:t.expandIcon,hideActions:t.hideActions,ripple:t.ripple},{default:()=>[i.title?i.title():t.title]}),E&&w(D$,{key:"text",eager:t.eager},{default:()=>[i.text?i.text():t.text]}),(R=i.default)==null?void 0:R.call(i)]}})}),{}}});const wpe=yi()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(t)},...Hh({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:t=>kc(t).every(e=>e!=null&&typeof e=="object")},...Px({clearable:!0})},emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const{t:a}=Tu(),c=Pn(t,"modelValue"),s=Me(()=>typeof t.showSize!="boolean"?t.showSize:void 0),p=Me(()=>(c.value??[]).reduce((oe,pe)=>{let{size:de=0}=pe;return oe+de},0)),_=Me(()=>JA(p.value,s.value)),b=Me(()=>(c.value??[]).map(oe=>{const{name:pe="",size:de=0}=oe;return t.showSize?`${pe} (${JA(de,s.value)})`:pe})),S=Me(()=>{var pe;const oe=((pe=c.value)==null?void 0:pe.length)??0;return t.showSize?a(t.counterSizeString,oe,_.value):a(t.counterString,oe)}),E=lt(),I=lt(),R=lt(!1),V=lt(),q=Me(()=>t.messages.length?t.messages:t.persistentHint?t.hint:"");function U(){var oe;V.value!==document.activeElement&&((oe=V.value)==null||oe.focus()),R.value||(R.value=!0)}function H(oe){j1(t["onClick:prepend"],oe),ne(oe)}function Z(oe){n("mousedown:control",oe)}function ne(oe){var pe;(pe=V.value)==null||pe.click(),n("click:control",oe)}function ie(oe){oe.stopPropagation(),U(),Cn(()=>{c.value=[],j1(t["onClick:clear"],oe)})}return Fi(c,oe=>{(!Array.isArray(oe)||!oe.length)&&V.value&&(V.value.value="")}),Pi(()=>{const oe=!!(r.counter||t.counter),pe=!!(oe||r.details),[de,fe]=Qp(i),[{modelValue:ge,...we}]=Gf(t),[Ie]=Bk(t);return w(Jd,Mi({ref:E,modelValue:c.value,"onUpdate:modelValue":Oe=>c.value=Oe,class:"v-file-input","onClick:prepend":H,"onClick:append":t["onClick:append"]},de,we,{focused:R.value,messages:q.value}),{...r,default:Oe=>{let{id:ke,isDisabled:Ee,isDirty:Qe,isReadonly:gt,isValid:nt}=Oe;return w(My,Mi({ref:I,"prepend-icon":t.prependIcon,onMousedown:Z,onClick:ne,"onClick:clear":ie,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},Ie,{id:ke.value,active:Qe.value||R.value,dirty:Qe.value,disabled:Ee.value,focused:R.value,error:nt.value===!1}),{...r,default:ft=>{var et;let{props:{class:Tt,...pt}}=ft;return w(Oi,null,[w("input",Mi({ref:V,type:"file",readonly:gt.value,disabled:Ee.value,multiple:t.multiple,name:t.name,onClick:Mt=>{Mt.stopPropagation(),U()},onChange:Mt=>{if(!Mt.target)return;const Qt=Mt.target;c.value=[...Qt.files??[]]},onFocus:U,onBlur:()=>R.value=!1},pt,fe),null),w("div",{class:Tt},[!!((et=c.value)!=null&&et.length)&&(r.selection?r.selection({fileNames:b.value,totalBytes:p.value,totalBytesReadable:_.value}):t.chips?b.value.map(Mt=>w(Ly,{key:Mt,size:"small",color:t.color},{default:()=>[Mt]})):b.value.join(", "))])])}})},details:pe?Oe=>{var ke,Ee;return w(Oi,null,[(ke=r.details)==null?void 0:ke.call(r,Oe),oe&&w(Oi,null,[w("span",null,null),w(Mx,{active:!!((Ee=c.value)!=null&&Ee.length),value:S.value},r.counter)])])}:void 0})}),dd({},E,I,V)}});const Tpe=yi()({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ju(),...Xo(),...zg(),...zs(),...Zn({tag:"footer"}),...vr()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{backgroundColorClasses:r,backgroundColorStyles:a}=ho(li(t,"color")),{borderClasses:c}=Mc(t),{elevationClasses:s}=$a(t),{roundedClasses:p}=fo(t),_=lt(32),{resizeRef:b}=Mf(I=>{I.length&&(_.value=I[0].target.clientHeight)}),S=Me(()=>t.height==="auto"?_.value:parseInt(t.height,10)),{layoutItemStyles:E}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:Me(()=>"bottom"),layoutSize:S,elementSize:Me(()=>t.height==="auto"?void 0:S.value),active:Me(()=>t.app),absolute:li(t,"absolute")});return Pi(()=>w(t.tag,{ref:b,class:["v-footer",n.value,r.value,c.value,s.value,p.value],style:[a.value,t.app?E.value:void 0]},i)),{}}}),Spe=yi()({name:"VForm",props:{...pK()},emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:i,emit:n}=e;const r=mK(t),a=lt();function c(p){p.preventDefault(),r.reset()}function s(p){const _=p,b=r.validate();_.then=b.then.bind(b),_.catch=b.catch.bind(b),_.finally=b.finally.bind(b),n("submit",_),_.defaultPrevented||b.then(S=>{var I;let{valid:E}=S;E&&((I=a.value)==null||I.submit())}),_.preventDefault()}return Pi(()=>{var p;return w("form",{ref:a,class:"v-form",novalidate:!0,onReset:c,onSubmit:s},[(p=i.default)==null?void 0:p.call(i,r)])}),dd(r,a)}});const Cpe=yi()({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...Zn()},setup(t,e){let{slots:i}=e;return Pi(()=>w(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},i)),{}}}),R$=(()=>Qb.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}))(),B$=(()=>Qb.reduce((t,e)=>{const i="offset"+Zd(e);return t[i]={type:[String,Number],default:null},t},{}))(),F$=(()=>Qb.reduce((t,e)=>{const i="order"+Zd(e);return t[i]={type:[String,Number],default:null},t},{}))(),hL={col:Object.keys(R$),offset:Object.keys(B$),order:Object.keys(F$)};function kpe(t,e,i){let n=t;if(!(i==null||i===!1)){if(e){const r=e.replace(t,"");n+=`-${r}`}return t==="col"&&(n="v-"+n),t==="col"&&(i===""||i===!0)||(n+=`-${i}`),n.toLowerCase()}}const Epe=["auto","start","end","center","baseline","stretch"],Ipe=yi()({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...R$,offset:{type:[String,Number],default:null},...B$,order:{type:[String,Number],default:null},...F$,alignSelf:{type:String,default:null,validator:t=>Epe.includes(t)},...Zn()},setup(t,e){let{slots:i}=e;const n=Me(()=>{const r=[];let a;for(a in hL)hL[a].forEach(s=>{const p=t[s],_=kpe(a,s,p);_&&r.push(_)});const c=r.some(s=>s.startsWith("v-col-"));return r.push({"v-col":!c||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),r});return()=>{var r;return Ns(t.tag,{class:n.value},(r=i.default)==null?void 0:r.call(i))}}}),DE=["start","end","center"],$$=["space-between","space-around","space-evenly"];function RE(t,e){return Qb.reduce((i,n)=>{const r=t+Zd(n);return i[r]=e(),i},{})}const Ppe=[...DE,"baseline","stretch"],N$=t=>Ppe.includes(t),z$=RE("align",()=>({type:String,default:null,validator:N$})),Ape=[...DE,...$$],V$=t=>Ape.includes(t),U$=RE("justify",()=>({type:String,default:null,validator:V$})),Mpe=[...DE,...$$,"stretch"],j$=t=>Mpe.includes(t),H$=RE("alignContent",()=>({type:String,default:null,validator:j$})),fL={align:Object.keys(z$),justify:Object.keys(U$),alignContent:Object.keys(H$)},Ope={align:"align",justify:"justify",alignContent:"align-content"};function Lpe(t,e,i){let n=Ope[t];if(i!=null){if(e){const r=e.replace(t,"");n+=`-${r}`}return n+=`-${i}`,n.toLowerCase()}}const Dpe=yi()({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:N$},...z$,justify:{type:String,default:null,validator:V$},...U$,alignContent:{type:String,default:null,validator:j$},...H$,...Zn()},setup(t,e){let{slots:i}=e;const n=Me(()=>{const r=[];let a;for(a in fL)fL[a].forEach(c=>{const s=t[c],p=Lpe(a,c,s);p&&r.push(p)});return r.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),r});return()=>{var r;return Ns(t.tag,{class:["v-row",n.value]},(r=i.default)==null?void 0:r.call(i))}}}),Rpe=od("flex-grow-1","div","VSpacer"),Bpe=yi()({name:"VHover",props:{disabled:Boolean,modelValue:{type:Boolean,default:void 0},...m8()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=g8(t,c=>!t.disabled&&(n.value=c));return()=>{var c;return(c=i.default)==null?void 0:c.call(i,{isHovering:n.value,props:{onMouseenter:r,onMouseleave:a}})}}});const G$=Symbol.for("vuetify:v-item-group"),Fpe=yi()({name:"VItemGroup",props:{...Yg({selectedClass:"v-item--selected"}),...Zn(),...vr()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{isSelected:r,select:a,next:c,prev:s,selected:p}=im(t,G$);return()=>w(t.tag,{class:["v-item-group",n.value]},{default:()=>{var _;return[(_=i.default)==null?void 0:_.call(i,{isSelected:r,select:a,next:c,prev:s,selected:p.value})]}})}}),$pe=yi()({name:"VItem",props:Xg(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:i}=e;const{isSelected:n,select:r,toggle:a,selectedClass:c,value:s,disabled:p}=Kg(t,G$);return()=>{var _;return(_=i.default)==null?void 0:_.call(i,{isSelected:n.value,selectedClass:c.value,select:r,toggle:a,value:s.value,disabled:p.value})}}});const Npe=od("v-kbd");const zpe=yi()({name:"VLayout",props:b4(),setup(t,e){let{slots:i}=e;const{layoutClasses:n,layoutStyles:r,getLayoutItem:a,items:c,layoutRef:s}=x4(t);return Pi(()=>{var p;return w("div",{ref:s,class:n.value,style:r.value},[(p=i.default)==null?void 0:p.call(i)])}),{getLayoutItem:a,items:c}}});const Vpe=yi()({name:"VLayoutItem",props:{position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...zg()},setup(t,e){let{slots:i}=e;const{layoutItemStyles:n}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:li(t,"position"),elementSize:li(t,"size"),layoutSize:li(t,"size"),active:li(t,"modelValue"),absolute:li(t,"absolute")});return()=>{var r;return w("div",{class:["v-layout-item"],style:n.value},[(r=i.default)==null?void 0:r.call(i)])}}}),Upe=yi()({name:"VLazy",directives:{intersect:Oy},props:{modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...ud(),...Zn(),...jh({transition:"fade-transition"})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{dimensionStyles:n}=cd(t),r=Pn(t,"modelValue");function a(c){r.value||(r.value=c)}return Pi(()=>Br(w(t.tag,{class:"v-lazy",style:n.value},{default:()=>[r.value&&w(Jc,{transition:t.transition,appear:!0},{default:()=>{var c;return[(c=i.default)==null?void 0:c.call(i)]}})]}),[[Ba("intersect"),{handler:a,options:t.options},null]])),{}}});const jpe=yi()({name:"VLocaleProvider",props:{locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0}},setup(t,e){let{slots:i}=e;const{rtlClasses:n}=Tj(t);return Pi(()=>{var r;return w("div",{class:["v-locale-provider",n.value]},[(r=i.default)==null?void 0:r.call(i)])}),{}}});const Hpe=yi()({name:"VMain",props:{scrollable:Boolean,...Zn({tag:"main"})},setup(t,e){let{slots:i}=e;const{mainStyles:n}=Rj(),{ssrBootStyles:r}=rm();return Pi(()=>w(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[n.value,r.value]},{default:()=>{var a,c;return[t.scrollable?w("div",{class:"v-main__scroller"},[(a=i.default)==null?void 0:a.call(i)]):(c=i.default)==null?void 0:c.call(i)]}})),{}}});function Gpe(t){let{rootEl:e,isSticky:i,layoutItemStyles:n}=t;const r=lt(!1),a=lt(0),c=Me(()=>{const _=typeof r.value=="boolean"?"top":r.value;return[i.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[_]:Xi(a.value)}:{top:n.value.top}]});Fn(()=>{Fi(i,_=>{_?window.addEventListener("scroll",p,{passive:!0}):window.removeEventListener("scroll",p)},{immediate:!0})}),as(()=>{document.removeEventListener("scroll",p)});let s=0;function p(){const _=s>window.scrollY?"up":"down",b=e.value.getBoundingClientRect(),S=parseFloat(n.value.top??0),E=window.scrollY-Math.max(0,a.value-S),I=b.height+Math.max(a.value,S)-window.scrollY-window.innerHeight;b.height<window.innerHeight-S?(r.value="top",a.value=S):_==="up"&&r.value==="bottom"||_==="down"&&r.value==="top"?(a.value=window.scrollY+b.top,r.value=!0):_==="down"&&I<=0?(a.value=0,r.value="bottom"):_==="up"&&E<=0&&(a.value=b.top+E,r.value="top"),s=window.scrollY}return{isStuck:r,stickyStyles:c}}const Wpe=100,qpe=20;function pL(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function mL(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let i=t.length-1;i>0;i--){if(t[i].t===t[i-1].t)continue;const n=pL(e),r=(t[i].d-t[i-1].d)/(t[i].t-t[i-1].t);e+=(r-n)*Math.abs(r),i===t.length-1&&(e*=.5)}return pL(e)*1e3}function Zpe(){const t={};function e(r){Array.from(r.changedTouches).forEach(a=>{(t[a.identifier]??(t[a.identifier]=new NU(qpe))).push([r.timeStamp,a])})}function i(r){Array.from(r.changedTouches).forEach(a=>{delete t[a.identifier]})}function n(r){var _;const a=(_=t[r])==null?void 0:_.values().reverse();if(!a)throw new Error(`No samples for touch id ${r}`);const c=a[0],s=[],p=[];for(const b of a){if(c[0]-b[0]>Wpe)break;s.push({t:b[0],d:b[1].clientX}),p.push({t:b[0],d:b[1].clientY})}return{x:mL(s),y:mL(p),get direction(){const{x:b,y:S}=this,[E,I]=[Math.abs(b),Math.abs(S)];return E>I&&b>=0?"right":E>I&&b<=0?"left":I>E&&S>=0?"down":I>E&&S<=0?"up":Ype()}}}return{addMovement:e,endTouch:i,getVelocity:n}}function Ype(){throw new Error}function Xpe(t){let{isActive:e,isTemporary:i,width:n,touchless:r,position:a}=t;Fn(()=>{window.addEventListener("touchstart",U,{passive:!0}),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",Z,{passive:!0})}),as(()=>{window.removeEventListener("touchstart",U),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",Z)});const c=Me(()=>["left","right"].includes(a.value)),{addMovement:s,endTouch:p,getVelocity:_}=Zpe();let b=!1;const S=lt(!1),E=lt(0),I=lt(0);let R;function V(ie,oe){return(a.value==="left"?ie:a.value==="right"?document.documentElement.clientWidth-ie:a.value==="top"?ie:a.value==="bottom"?document.documentElement.clientHeight-ie:Vm())-(oe?n.value:0)}function q(ie){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const pe=a.value==="left"?(ie-I.value)/n.value:a.value==="right"?(document.documentElement.clientWidth-ie-I.value)/n.value:a.value==="top"?(ie-I.value)/n.value:a.value==="bottom"?(document.documentElement.clientHeight-ie-I.value)/n.value:Vm();return oe?Math.max(0,Math.min(1,pe)):pe}function U(ie){if(r.value)return;const oe=ie.changedTouches[0].clientX,pe=ie.changedTouches[0].clientY,de=25,fe=a.value==="left"?oe<de:a.value==="right"?oe>document.documentElement.clientWidth-de:a.value==="top"?pe<de:a.value==="bottom"?pe>document.documentElement.clientHeight-de:Vm(),ge=e.value&&(a.value==="left"?oe<n.value:a.value==="right"?oe>document.documentElement.clientWidth-n.value:a.value==="top"?pe<n.value:a.value==="bottom"?pe>document.documentElement.clientHeight-n.value:Vm());(fe||ge||e.value&&i.value)&&(b=!0,R=[oe,pe],I.value=V(c.value?oe:pe,e.value),E.value=q(c.value?oe:pe),p(ie),s(ie))}function H(ie){const oe=ie.changedTouches[0].clientX,pe=ie.changedTouches[0].clientY;if(b){if(!ie.cancelable){b=!1;return}const fe=Math.abs(oe-R[0]),ge=Math.abs(pe-R[1]);(c.value?fe>ge&&fe>3:ge>fe&&ge>3)?(S.value=!0,b=!1):(c.value?ge:fe)>3&&(b=!1)}if(!S.value)return;ie.preventDefault(),s(ie);const de=q(c.value?oe:pe,!1);E.value=Math.max(0,Math.min(1,de)),de>1?I.value=V(c.value?oe:pe,!0):de<0&&(I.value=V(c.value?oe:pe,!1))}function Z(ie){if(b=!1,!S.value)return;s(ie),S.value=!1;const oe=_(ie.changedTouches[0].identifier),pe=Math.abs(oe.x),de=Math.abs(oe.y);(c.value?pe>de&&pe>400:de>pe&&de>3)?e.value=oe.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||Vm()):e.value=E.value>.5}const ne=Me(()=>S.value?{transform:a.value==="left"?`translateX(calc(-100% + ${E.value*n.value}px))`:a.value==="right"?`translateX(calc(100% - ${E.value*n.value}px))`:a.value==="top"?`translateY(calc(-100% + ${E.value*n.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${E.value*n.value}px))`:Vm(),transition:"none"}:void 0);return{isDragging:S,dragProgress:E,dragStyles:ne}}function Vm(){throw new Error}const Kpe=["start","end","left","right","top","bottom"],Qpe=yi()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Kpe.includes(t)},sticky:Boolean,...Ju(),...Xo(),...zg(),...zs(),...Zn({tag:"nav"}),...vr()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const{isRtl:a}=zh(),{themeClasses:c}=Vr(t),{borderClasses:s}=Mc(t),{backgroundColorClasses:p,backgroundColorStyles:_}=ho(li(t,"color")),{elevationClasses:b}=$a(t),{mobile:S}=Ng(),{roundedClasses:E}=fo(t),I=zB(),R=Pn(t,"modelValue",null,ft=>!!ft),{ssrBootStyles:V}=rm(),q=lt(),U=lt(!1),H=Me(()=>t.rail&&t.expandOnHover&&U.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),Z=Me(()=>C2(t.location,a.value)),ne=Me(()=>!t.permanent&&(S.value||t.temporary)),ie=Me(()=>t.sticky&&!ne.value&&Z.value!=="bottom");t.expandOnHover&&t.rail!=null&&Fi(U,ft=>n("update:rail",!ft)),t.disableResizeWatcher||Fi(ne,ft=>!t.permanent&&Cn(()=>R.value=!ft)),!t.disableRouteWatcher&&I&&Fi(I.currentRoute,()=>ne.value&&(R.value=!1)),Fi(()=>t.permanent,ft=>{ft&&(R.value=!0)}),_y(()=>{t.modelValue!=null||ne.value||(R.value=t.permanent||!S.value)});const{isDragging:oe,dragProgress:pe,dragStyles:de}=Xpe({isActive:R,isTemporary:ne,width:H,touchless:li(t,"touchless"),position:Z}),fe=Me(()=>{const ft=ne.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):H.value;return oe.value?ft*pe.value:ft}),{layoutItemStyles:ge,layoutRect:we,layoutItemScrimStyles:Ie}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:Z,layoutSize:fe,elementSize:H,active:Me(()=>R.value||oe.value),disableTransitions:Me(()=>oe.value),absolute:Me(()=>t.absolute||ie.value&&typeof Oe.value!="string")}),{isStuck:Oe,stickyStyles:ke}=Gpe({rootEl:q,isSticky:ie,layoutItemStyles:ge}),Ee=ho(Me(()=>typeof t.scrim=="string"?t.scrim:null)),Qe=Me(()=>({...oe.value?{opacity:pe.value*.2,transition:"none"}:void 0,...we.value?{left:Xi(we.value.left),right:Xi(we.value.right),top:Xi(we.value.top),bottom:Xi(we.value.bottom)}:void 0,...Ie.value}));co({VList:{bgColor:"transparent"}});function gt(){U.value=!0}function nt(){U.value=!1}return Pi(()=>{const ft=r.image||t.image;return w(Oi,null,[w(t.tag,Mi({ref:q,onMouseenter:gt,onMouseleave:nt,class:["v-navigation-drawer",`v-navigation-drawer--${Z.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":U.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":ne.value,"v-navigation-drawer--active":R.value,"v-navigation-drawer--sticky":ie.value},c.value,p.value,s.value,b.value,E.value],style:[_.value,ge.value,de.value,V.value,ke.value]},i),{default:()=>{var Tt,pt,et,Mt;return[ft&&w("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?(Tt=r.image)==null?void 0:Tt.call(r,{image:t.image}):w("img",{src:t.image,alt:""},null)]),r.prepend&&w("div",{class:"v-navigation-drawer__prepend"},[(pt=r.prepend)==null?void 0:pt.call(r)]),w("div",{class:"v-navigation-drawer__content"},[(et=r.default)==null?void 0:et.call(r)]),r.append&&w("div",{class:"v-navigation-drawer__append"},[(Mt=r.append)==null?void 0:Mt.call(r)])]}}),w(Nl,{name:"fade-transition"},{default:()=>[ne.value&&(oe.value||R.value)&&!!t.scrim&&w("div",{class:["v-navigation-drawer__scrim",Ee.backgroundColorClasses.value],style:[Qe.value,Ee.backgroundColorStyles.value],onClick:()=>R.value=!1},null)]})])}),{isStuck:Oe}}}),Jpe=wu({name:"VNoSsr",setup(t,e){let{slots:i}=e;const n=y8();return()=>{var r;return n.value&&((r=i.default)==null?void 0:r.call(i))}}});function eme(){const t=lt([]);sC(()=>t.value=[]);function e(i,n){t.value[n]=i}return{refs:t,updateRef:e}}const tme=yi()({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:On,default:"$first"},prevIcon:{type:On,default:"$prev"},nextIcon:{type:On,default:"$next"},lastIcon:{type:On,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ju(),...Yo(),...Xo(),...zs(),...Uh(),...Zn({tag:"nav"}),...vr(),...Oc({variant:"text"})},emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,e){let{slots:i,emit:n}=e;const r=Pn(t,"modelValue"),{t:a,n:c}=Tu(),{isRtl:s}=zh(),{themeClasses:p}=Vr(t),{width:_}=Ng(),b=lt(-1);co(void 0,{scoped:!0});const{resizeRef:S}=Mf(de=>{if(!de.length)return;const{target:fe,contentRect:ge}=de[0],we=fe.querySelector(".v-pagination__list > *");if(!we)return;const Ie=ge.width,Oe=we.offsetWidth+parseFloat(getComputedStyle(we).marginRight)*2;b.value=V(Ie,Oe)}),E=Me(()=>parseInt(t.length,10)),I=Me(()=>parseInt(t.start,10)),R=Me(()=>t.totalVisible?parseInt(t.totalVisible,10):b.value>=0?b.value:V(_.value,58));function V(de,fe){const ge=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((de-fe*ge)/fe).toFixed(2)))}const q=Me(()=>{if(E.value<=0||isNaN(E.value)||E.value>Number.MAX_SAFE_INTEGER)return[];if(R.value<=1)return[r.value];if(E.value<=R.value)return yh(E.value,I.value);const de=R.value%2===0,fe=de?R.value/2:Math.floor(R.value/2),ge=de?fe:fe+1,we=E.value-fe;if(ge-r.value>=0)return[...yh(Math.max(1,R.value-1),I.value),t.ellipsis,E.value];if(r.value-we>=(de?1:0)){const Ie=R.value-1,Oe=E.value-Ie+I.value;return[I.value,t.ellipsis,...yh(Ie,Oe)]}else{const Ie=Math.max(1,R.value-3),Oe=Ie===1?r.value:r.value-Math.ceil(Ie/2)+I.value;return[I.value,t.ellipsis,...yh(Ie,Oe),t.ellipsis,E.value]}});function U(de,fe,ge){de.preventDefault(),r.value=fe,ge&&n(ge,fe)}const{refs:H,updateRef:Z}=eme();co({VPaginationBtn:{color:li(t,"color"),border:li(t,"border"),density:li(t,"density"),size:li(t,"size"),variant:li(t,"variant"),rounded:li(t,"rounded"),elevation:li(t,"elevation")}});const ne=Me(()=>q.value.map((de,fe)=>{const ge=we=>Z(we,fe);if(typeof de=="string")return{isActive:!1,key:`ellipsis-${fe}`,page:de,props:{ref:ge,ellipsis:!0,icon:!0,disabled:!0}};{const we=de===r.value;return{isActive:we,key:de,page:c(de),props:{ref:ge,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:we?t.activeColor:t.color,ariaCurrent:we,ariaLabel:a(we?t.currentPageAriaLabel:t.pageAriaLabel,de),onClick:Ie=>U(Ie,de)}}}})),ie=Me(()=>{const de=!!t.disabled||r.value<=I.value,fe=!!t.disabled||r.value>=I.value+E.value-1;return{first:t.showFirstLastPage?{icon:s.value?t.lastIcon:t.firstIcon,onClick:ge=>U(ge,I.value,"first"),disabled:de,ariaLabel:a(t.firstAriaLabel),ariaDisabled:de}:void 0,prev:{icon:s.value?t.nextIcon:t.prevIcon,onClick:ge=>U(ge,r.value-1,"prev"),disabled:de,ariaLabel:a(t.previousAriaLabel),ariaDisabled:de},next:{icon:s.value?t.prevIcon:t.nextIcon,onClick:ge=>U(ge,r.value+1,"next"),disabled:fe,ariaLabel:a(t.nextAriaLabel),ariaDisabled:fe},last:t.showFirstLastPage?{icon:s.value?t.firstIcon:t.lastIcon,onClick:ge=>U(ge,I.value+E.value-1,"last"),disabled:fe,ariaLabel:a(t.lastAriaLabel),ariaDisabled:fe}:void 0}});function oe(){var fe;const de=r.value-I.value;(fe=H.value[de])==null||fe.$el.focus()}function pe(de){de.key===T2.left&&!t.disabled&&r.value>+t.start?(r.value=r.value-1,Cn(oe)):de.key===T2.right&&!t.disabled&&r.value<I.value+E.value-1&&(r.value=r.value+1,Cn(oe))}return Pi(()=>w(t.tag,{ref:S,class:["v-pagination",p.value],role:"navigation","aria-label":a(t.ariaLabel),onKeydown:pe,"data-test":"v-pagination-root"},{default:()=>[w("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&w("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[i.first?i.first(ie.value.first):w(ko,Mi({_as:"VPaginationBtn"},ie.value.first),null)]),w("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[i.prev?i.prev(ie.value.prev):w(ko,Mi({_as:"VPaginationBtn"},ie.value.prev),null)]),ne.value.map((de,fe)=>w("li",{key:de.key,class:["v-pagination__item",{"v-pagination__item--is-active":de.isActive}],"data-test":"v-pagination-item"},[i.item?i.item(de):w(ko,Mi({_as:"VPaginationBtn"},de.props),{default:()=>[de.page]})])),w("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[i.next?i.next(ie.value.next):w(ko,Mi({_as:"VPaginationBtn"},ie.value.next),null)]),t.showFirstLastPage&&w("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[i.last?i.last(ie.value.last):w(ko,Mi({_as:"VPaginationBtn"},ie.value.last),null)])])]})),{}}});function ime(t){return Math.floor(Math.abs(t))*Math.sign(t)}const nme=yi()({name:"VParallax",props:{scale:{type:[Number,String],default:.5}},setup(t,e){let{slots:i}=e;const{intersectionRef:n,isIntersecting:r}=Mk(),{resizeRef:a,contentRect:c}=Mf(),{height:s}=Ng(),p=lt();Xs(()=>{var I;n.value=a.value=(I=p.value)==null?void 0:I.$el});let _;Fi(r,I=>{I?(_=h4(n.value),_=_===document.scrollingElement?document:_,_.addEventListener("scroll",E,{passive:!0}),E()):_.removeEventListener("scroll",E)}),as(()=>{_==null||_.removeEventListener("scroll",E)}),Fi(s,E),Fi(()=>{var I;return(I=c.value)==null?void 0:I.height},E);const b=Me(()=>1-Yu(+t.scale));let S=-1;function E(){r.value&&(cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var ie;const I=((ie=p.value)==null?void 0:ie.$el).querySelector(".v-img__img");if(!I)return;const R=_ instanceof Document?document.documentElement.clientHeight:_.clientHeight,V=_ instanceof Document?window.scrollY:_.scrollTop,q=n.value.getBoundingClientRect().top+V,U=c.value.height,H=q+(U-R)/2,Z=ime((V-H)*b.value),ne=Math.max(1,(b.value*(R-U)+U)/U);I.style.setProperty("transform",`translateY(${Z}px) scale(${ne})`)}))}return Pi(()=>w(i_,{class:["v-parallax",{"v-parallax--active":r.value}],ref:p,cover:!0,onLoadstart:E,onLoad:E},i)),{}}}),rme=yi()({name:"VRadio",props:{...Lx({falseIcon:"$radioOff",trueIcon:"$radioOn"})},setup(t,e){let{slots:i}=e;return Pi(()=>w(Ag,Mi(t,{class:"v-radio",type:"radio"}),i)),{}}});const sme=yi()({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...Hh(),...Qd(Fk(),["multiple"]),trueIcon:{type:On,default:"$radioOn"},falseIcon:{type:On,default:"$radioOff"},type:{type:String,default:"radio"}},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:i,slots:n}=e;const r=cl(),a=Me(()=>t.id||`radio-group-${r}`),c=Pn(t,"modelValue");return Pi(()=>{const[s,p]=Qp(i),[_,b]=Gf(t),[S,E]=Ag.filterProps(t),I=n.label?n.label({label:t.label,props:{for:a.value}}):t.label;return w(Jd,Mi({class:"v-radio-group"},s,_,{modelValue:c.value,"onUpdate:modelValue":R=>c.value=R,id:a.value}),{...n,default:R=>{let{id:V,messagesId:q,isDisabled:U,isReadonly:H}=R;return w(Oi,null,[I&&w(t_,{id:V.value},{default:()=>[I]}),w(QB,Mi(S,{id:V.value,"aria-describedby":q.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:U.value,readonly:H.value,"aria-labelledby":I?V.value:void 0,multiple:!1},p,{modelValue:c.value,"onUpdate:modelValue":Z=>c.value=Z}),n)])}})}),{}}}),ome=yi()({name:"VRangeSlider",props:{...Ix(),...Hh(),...P$(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=lt(),r=lt(),a=lt();function c(pe){if(!n.value||!r.value)return;const de=BS(pe,n.value.$el,t.direction),fe=BS(pe,r.value.$el,t.direction),ge=Math.abs(de),we=Math.abs(fe);return ge<we||ge===we&&de<0?n.value.$el:r.value.$el}const{activeThumbRef:s,hasLabels:p,max:_,min:b,mousePressed:S,onSliderMousedown:E,onSliderTouchstart:I,position:R,roundValue:V,trackContainerRef:q}=A$({props:t,handleSliderMouseUp:pe=>{var de;U.value=s.value===((de=n.value)==null?void 0:de.$el)?[pe,U.value[1]]:[U.value[0],pe]},handleMouseMove:pe=>{var ge,we,Ie,Oe;const[de,fe]=U.value;!t.strict&&de===fe&&de!==b.value&&(s.value=pe>de?(ge=r.value)==null?void 0:ge.$el:(we=n.value)==null?void 0:we.$el,(Ie=s.value)==null||Ie.focus()),s.value===((Oe=n.value)==null?void 0:Oe.$el)?U.value=[Math.min(pe,fe),fe]:U.value=[de,Math.max(de,pe)]},getActiveThumb:c}),U=Pn(t,"modelValue",void 0,pe=>!pe||!pe.length?[0,0]:pe.map(de=>V(de))),{isFocused:H,focus:Z,blur:ne}=nm(t),ie=Me(()=>R(U.value[0])),oe=Me(()=>R(U.value[1]));return Pi(()=>{const[pe,de]=Gf(t),fe=!!(t.label||i.label||i.prepend);return w(Jd,Mi({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!i["tick-label"]||p.value,"v-slider--focused":H.value,"v-slider--pressed":S.value,"v-slider--disabled":t.disabled}],ref:a},pe,{focused:H.value}),{...i,prepend:fe?ge=>{var we,Ie;return w(Oi,null,[((we=i.label)==null?void 0:we.call(i,ge))??t.label?w(t_,{class:"v-slider__label",text:t.label},null):void 0,(Ie=i.prepend)==null?void 0:Ie.call(i,ge)])}:void 0,default:ge=>{var Oe,ke;let{id:we,messagesId:Ie}=ge;return w("div",{class:"v-slider__container",onMousedown:E,onTouchstartPassive:I},[w("input",{id:`${we.value}_start`,name:t.name||we.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:U.value[0]},null),w("input",{id:`${we.value}_stop`,name:t.name||we.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:U.value[1]},null),w(M$,{ref:q,start:ie.value,stop:oe.value},{"tick-label":i["tick-label"]}),w(FS,{ref:n,"aria-describedby":Ie.value,focused:H&&s.value===((Oe=n.value)==null?void 0:Oe.$el),modelValue:U.value[0],"onUpdate:modelValue":Ee=>U.value=[Ee,U.value[1]],onFocus:Ee=>{var Qe,gt,nt,ft;Z(),s.value=(Qe=n.value)==null?void 0:Qe.$el,U.value[0]===U.value[1]&&U.value[1]===b.value&&Ee.relatedTarget!==((gt=r.value)==null?void 0:gt.$el)&&((nt=n.value)==null||nt.$el.blur(),(ft=r.value)==null||ft.$el.focus())},onBlur:()=>{ne(),s.value=void 0},min:b.value,max:U.value[1],position:ie.value},{"thumb-label":i["thumb-label"]}),w(FS,{ref:r,"aria-describedby":Ie.value,focused:H&&s.value===((ke=r.value)==null?void 0:ke.$el),modelValue:U.value[1],"onUpdate:modelValue":Ee=>U.value=[U.value[0],Ee],onFocus:Ee=>{var Qe,gt,nt,ft;Z(),s.value=(Qe=r.value)==null?void 0:Qe.$el,U.value[0]===U.value[1]&&U.value[0]===_.value&&Ee.relatedTarget!==((gt=n.value)==null?void 0:gt.$el)&&((nt=r.value)==null||nt.$el.blur(),(ft=n.value)==null||ft.$el.focus())},onBlur:()=>{ne(),s.value=void 0},min:U.value[0],max:_.value,position:oe.value},{"thumb-label":i["thumb-label"]})])}})}),{}}});const ame=yi()({name:"VRating",props:{name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:On,default:"$ratingEmpty"},fullIcon:{type:On,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},ripple:Boolean,...Yo(),...Uh(),...Zn(),...vr()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{t:n}=Tu(),{themeClasses:r}=Vr(t),a=Pn(t,"modelValue"),c=Me(()=>Yu(parseFloat(a.value),0,+t.length)),s=Me(()=>yh(Number(t.length),1)),p=Me(()=>s.value.flatMap(ne=>t.halfIncrements?[ne-.5,ne]:[ne])),_=lt(-1),b=lt(-1),S=lt();let E=!1;const I=Me(()=>p.value.map(ne=>{const ie=t.hover&&_.value>-1,oe=c.value>=ne,pe=_.value>=ne,fe=(ie?pe:oe)?t.fullIcon:t.emptyIcon,ge=t.activeColor??t.color,we=oe||pe?ge:t.color;return{isFilled:oe,isHovered:pe,icon:fe,color:we}})),R=Me(()=>[0,...p.value].map(ne=>{function ie(){_.value=ne}function oe(){_.value=-1}function pe(){var ge;ne===0&&c.value===0?(ge=S.value)==null||ge.focus():b.value=ne}function de(){E||(b.value=-1)}function fe(){t.disabled||t.readonly||(a.value=c.value===ne&&t.clearable?0:ne)}return{onMouseenter:t.hover?ie:void 0,onMouseleave:t.hover?oe:void 0,onFocus:pe,onBlur:de,onClick:fe}}));function V(){E=!0}function q(){E=!1}const U=Me(()=>t.name??`v-rating-${cl()}`);function H(ne){var Ee,Qe;let{value:ie,index:oe,showStar:pe=!0}=ne;const{onMouseenter:de,onMouseleave:fe,onFocus:ge,onBlur:we,onClick:Ie}=R.value[oe+1],Oe=`${U.value}-${String(ie).replace(".","-")}`,ke={color:(Ee=I.value[oe])==null?void 0:Ee.color,density:t.density,disabled:t.disabled,icon:(Qe=I.value[oe])==null?void 0:Qe.icon,ripple:t.ripple,size:t.size,tag:"span",variant:"plain"};return w(Oi,null,[w("label",{for:Oe,class:{"v-rating__item--half":t.halfIncrements&&ie%1>0,"v-rating__item--full":t.halfIncrements&&ie%1===0},onMousedown:V,onMouseup:q,onMouseenter:de,onMouseleave:fe},[w("span",{class:"v-rating__hidden"},[n(t.itemAriaLabel,ie,t.length)]),pe?i.item?i.item({...I.value[oe],props:ke,value:ie,index:oe}):w(ko,ke,null):void 0]),w("input",{class:"v-rating__hidden",name:U.value,id:Oe,type:"radio",value:ie,checked:c.value===ie,onClick:Ie,onFocus:ge,onBlur:we,ref:oe===0?S:void 0,readonly:t.readonly,disabled:t.disabled},null)])}function Z(ne){return i["item-label"]?i["item-label"](ne):ne.label?w("span",null,[ne.label]):w("span",null,[ye(" ")])}return Pi(()=>{var ie;const ne=!!((ie=t.itemLabels)!=null&&ie.length)||i["item-label"];return w(t.tag,{class:["v-rating",{"v-rating--hover":t.hover,"v-rating--readonly":t.readonly},r.value]},{default:()=>[w(H,{value:0,index:-1,showStar:!1},null),s.value.map((oe,pe)=>{var de,fe;return w("div",{class:"v-rating__wrapper"},[ne&&t.itemLabelPosition==="top"?Z({value:oe,index:pe,label:(de=t.itemLabels)==null?void 0:de[pe]}):void 0,w("div",{class:["v-rating__item",{"v-rating__item--focused":Math.ceil(b.value)===oe}]},[t.halfIncrements?w(Oi,null,[w(H,{value:oe-.5,index:pe*2},null),w(H,{value:oe,index:pe*2+1},null)]):w(H,{value:oe,index:pe},null)]),ne&&t.itemLabelPosition==="bottom"?Z({value:oe,index:pe,label:(fe=t.itemLabels)==null?void 0:fe[pe]}):void 0])})]})}),{}}});function gL(t){const i=Math.abs(t);return Math.sign(t)*(i/((1/.501-2)*(1-i)+1))}function _L(t){let{selectedElement:e,containerSize:i,contentSize:n,isRtl:r,currentScrollOffset:a,isHorizontal:c}=t;const s=c?e.clientWidth:e.clientHeight,p=c?e.offsetLeft:e.offsetTop,_=r&&c?n-p-s:p,b=i+a,S=s+_,E=s*.4;return _<=a?a=Math.max(_-E,0):b<=S&&(a=Math.min(a-(b-S-E),n-i)),a}function lme(t){let{selectedElement:e,containerSize:i,contentSize:n,isRtl:r,isHorizontal:a}=t;const c=a?e.clientWidth:e.clientHeight,s=a?e.offsetLeft:e.offsetTop,p=r&&a?n-s-c/2-i/2:s+c/2-i/2;return Math.min(n-i,Math.max(0,p))}const W$=Symbol.for("vuetify:v-slide-group"),q$=gn({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:W$},nextIcon:{type:On,default:"$next"},prevIcon:{type:On,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Zn(),...Yg({selectedClass:"v-slide-group-item--active"})},"v-slide-group"),NS=yi()({name:"VSlideGroup",props:q$(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const{isRtl:n}=zh(),{mobile:r}=Ng(),a=im(t,t.symbol),c=lt(!1),s=lt(0),p=lt(0),_=lt(0),b=Me(()=>t.direction==="horizontal"),{resizeRef:S,contentRect:E}=Mf(),{resizeRef:I,contentRect:R}=Mf(),V=Me(()=>a.selected.value.length?a.items.value.findIndex(Tt=>Tt.id===a.selected.value[0]):-1),q=Me(()=>a.selected.value.length?a.items.value.findIndex(Tt=>Tt.id===a.selected.value[a.selected.value.length-1]):-1);if(Eo){let Tt=-1;Fi(()=>[a.selected.value,E.value,R.value,b.value],()=>{cancelAnimationFrame(Tt),Tt=requestAnimationFrame(()=>{if(E.value&&R.value){const pt=b.value?"width":"height";p.value=E.value[pt],_.value=R.value[pt],c.value=p.value+1<_.value}if(V.value>=0&&I.value){const pt=I.value.children[q.value];V.value===0||!c.value?s.value=0:t.centerActive?s.value=lme({selectedElement:pt,containerSize:p.value,contentSize:_.value,isRtl:n.value,isHorizontal:b.value}):c.value&&(s.value=_L({selectedElement:pt,containerSize:p.value,contentSize:_.value,isRtl:n.value,currentScrollOffset:s.value,isHorizontal:b.value}))}})})}const U=lt(!1);let H=0,Z=0;function ne(Tt){const pt=b.value?"clientX":"clientY";Z=(n.value&&b.value?-1:1)*s.value,H=Tt.touches[0][pt],U.value=!0}function ie(Tt){if(!c.value)return;const pt=b.value?"clientX":"clientY",et=n.value&&b.value?-1:1;s.value=et*(Z+H-Tt.touches[0][pt])}function oe(Tt){const pt=_.value-p.value;s.value<0||!c.value?s.value=0:s.value>=pt&&(s.value=pt),U.value=!1}function pe(){S.value&&(S.value[b.value?"scrollLeft":"scrollTop"]=0)}const de=lt(!1);function fe(Tt){if(de.value=!0,!(!c.value||!I.value)){for(const pt of Tt.composedPath())for(const et of I.value.children)if(et===pt){s.value=_L({selectedElement:et,containerSize:p.value,contentSize:_.value,isRtl:n.value,currentScrollOffset:s.value,isHorizontal:b.value});return}}}function ge(Tt){de.value=!1}function we(Tt){var pt;!de.value&&!(Tt.relatedTarget&&((pt=I.value)!=null&&pt.contains(Tt.relatedTarget)))&&Oe()}function Ie(Tt){I.value&&(b.value?Tt.key==="ArrowRight"?Oe(n.value?"prev":"next"):Tt.key==="ArrowLeft"&&Oe(n.value?"next":"prev"):Tt.key==="ArrowDown"?Oe("next"):Tt.key==="ArrowUp"&&Oe("prev"),Tt.key==="Home"?Oe("first"):Tt.key==="End"&&Oe("last"))}function Oe(Tt){var pt,et,Mt,Qt,Fe;if(I.value)if(!Tt)(pt=[...I.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(Rt=>!Rt.hasAttribute("disabled"))[0])==null||pt.focus();else if(Tt==="next"){const tt=(et=I.value.querySelector(":focus"))==null?void 0:et.nextElementSibling;tt?tt.focus():Oe("first")}else if(Tt==="prev"){const tt=(Mt=I.value.querySelector(":focus"))==null?void 0:Mt.previousElementSibling;tt?tt.focus():Oe("last")}else Tt==="first"?(Qt=I.value.firstElementChild)==null||Qt.focus():Tt==="last"&&((Fe=I.value.lastElementChild)==null||Fe.focus())}function ke(Tt){const pt=s.value+(Tt==="prev"?-1:1)*p.value;s.value=Yu(pt,0,_.value-p.value)}const Ee=Me(()=>{let Tt=s.value>_.value-p.value?-(_.value-p.value)+gL(_.value-p.value-s.value):-s.value;s.value<=0&&(Tt=gL(-s.value));const pt=n.value&&b.value?-1:1;return{transform:`translate${b.value?"X":"Y"}(${pt*Tt}px)`,transition:U.value?"none":"",willChange:U.value?"transform":""}}),Qe=Me(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),gt=Me(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!r.value;case!0:return c.value||Math.abs(s.value)>0;case"mobile":return r.value||c.value||Math.abs(s.value)>0;default:return!r.value&&(c.value||Math.abs(s.value)>0)}}),nt=Me(()=>Math.abs(s.value)>0),ft=Me(()=>_.value>Math.abs(s.value)+p.value);return Pi(()=>w(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!b.value,"v-slide-group--has-affixes":gt.value,"v-slide-group--is-overflowing":c.value}],tabindex:de.value||a.selected.value.length?-1:0,onFocus:we},{default:()=>{var Tt,pt,et;return[gt.value&&w("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!nt.value}],onClick:()=>ke("prev")},[((Tt=i.prev)==null?void 0:Tt.call(i,Qe.value))??w(cS,null,{default:()=>[w(lo,{icon:n.value?t.nextIcon:t.prevIcon},null)]})]),w("div",{key:"container",ref:S,class:"v-slide-group__container",onScroll:pe},[w("div",{ref:I,class:"v-slide-group__content",style:Ee.value,onTouchstartPassive:ne,onTouchmovePassive:ie,onTouchendPassive:oe,onFocusin:fe,onFocusout:ge,onKeydown:Ie},[(pt=i.default)==null?void 0:pt.call(i,Qe.value)])]),gt.value&&w("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!ft.value}],onClick:()=>ke("next")},[((et=i.next)==null?void 0:et.call(i,Qe.value))??w(cS,null,{default:()=>[w(lo,{icon:n.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:ke,scrollOffset:s,focus:Oe}}}),ume=yi()({name:"VSlideGroupItem",props:{...Xg()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:i}=e;const n=Kg(t,W$);return()=>{var r;return(r=i.default)==null?void 0:r.call(i,{isSelected:n.isSelected.value,select:n.select,toggle:n.toggle,selectedClass:n.selectedClass.value})}}});const cme=yi()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...jf({location:"bottom"}),...Jg(),...zs(),...Oc(),...vr(),...Qd(Ry({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{locationStyles:r}=Hf(t),{positionClasses:a}=e_(t),{scopeId:c}=Dy(),{themeClasses:s}=Vr(t),{colorClasses:p,colorStyles:_,variantClasses:b}=tm(t),{roundedClasses:S}=fo(t),E=lt();Fi(n,R),Fi(()=>t.timeout,R),Fn(()=>{n.value&&R()});let I=-1;function R(){window.clearTimeout(I);const q=Number(t.timeout);!n.value||q===-1||(I=window.setTimeout(()=>{n.value=!1},q))}function V(){window.clearTimeout(I)}return Pi(()=>{const[q]=Bh.filterProps(t);return w(Bh,Mi({ref:E,class:["v-snackbar",{"v-snackbar--active":n.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},a.value]},q,{modelValue:n.value,"onUpdate:modelValue":U=>n.value=U,contentProps:Mi({class:["v-snackbar__wrapper",s.value,p.value,S.value,b.value],style:[r.value,_.value],onPointerenter:V,onPointerleave:R},q.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},c),{default:()=>[em(!1,"v-snackbar"),i.default&&w("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[i.default()]),i.actions&&w(es,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[w("div",{class:"v-snackbar__actions"},[i.actions()])]})],activator:i.activator})}),dd({},E)}});const dme=yi()({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Hh(),...Lx()},emits:{"update:focused":t=>!0,"update:modelValue":()=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:i,slots:n}=e;const r=Pn(t,"indeterminate"),a=Pn(t,"modelValue"),{loaderClasses:c}=Iy(t),{isFocused:s,focus:p,blur:_}=nm(t),b=Me(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),S=cl(),E=Me(()=>t.id||`switch-${S}`);function I(){r.value&&(r.value=!1)}return Pi(()=>{const[R,V]=Qp(i),[q,U]=Gf(t),[H,Z]=Ag.filterProps(t),ne=lt();function ie(){var oe,pe;(pe=(oe=ne.value)==null?void 0:oe.input)==null||pe.click()}return w(Jd,Mi({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":r.value},c.value]},R,q,{id:E.value,focused:s.value}),{...n,default:oe=>{let{id:pe,messagesId:de,isDisabled:fe,isReadonly:ge,isValid:we}=oe;return w(Ag,Mi({ref:ne},H,{modelValue:a.value,"onUpdate:modelValue":[Ie=>a.value=Ie,I],id:pe.value,"aria-describedby":de.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:fe.value,readonly:ge.value,onFocus:p,onBlur:_},V),{...n,default:()=>w("div",{class:"v-switch__track",onClick:ie},null),input:Ie=>{let{textColorClasses:Oe,textColorStyles:ke}=Ie;return w("div",{class:["v-switch__thumb",Oe.value],style:ke.value},[t.loading&&w(Cx,{name:"v-switch",active:!0,color:we.value===!1?void 0:b.value},{default:Ee=>n.loader?n.loader(Ee):w(Ok,{active:Ee.isActive,color:Ee.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}});const hme=yi()({name:"VSystemBar",props:{color:String,height:[Number,String],window:Boolean,...Xo(),...zg(),...zs(),...Zn(),...vr()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{backgroundColorClasses:r,backgroundColorStyles:a}=ho(li(t,"color")),{elevationClasses:c}=$a(t),{roundedClasses:s}=fo(t),{ssrBootStyles:p}=rm(),_=Me(()=>t.height??(t.window?32:24)),{layoutItemStyles:b}=Vg({id:t.name,order:Me(()=>parseInt(t.order,10)),position:lt("top"),layoutSize:_,elementSize:_,active:Me(()=>!0),absolute:li(t,"absolute")});return Pi(()=>w(t.tag,{class:["v-system-bar",{"v-system-bar--window":t.window},n.value,r.value,c.value,s.value],style:[a.value,b.value,p.value]},i)),{}}});const Z$=Symbol.for("vuetify:v-tabs"),Y$=yi()({name:"VTab",props:{fixed:Boolean,title:String,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Qd(VB({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},setup(t,e){let{slots:i,attrs:n}=e;const{textColorClasses:r,textColorStyles:a}=Ul(t,"sliderColor"),c=Me(()=>t.direction==="horizontal"),s=lt(!1),p=lt(),_=lt();function b(S){var I,R;let{value:E}=S;if(s.value=E,E){const V=(R=(I=p.value)==null?void 0:I.$el.parentElement)==null?void 0:R.querySelector(".v-tab--selected .v-tab__slider"),q=_.value;if(!V||!q)return;const U=getComputedStyle(V).color,H=V.getBoundingClientRect(),Z=q.getBoundingClientRect(),ne=c.value?"x":"y",ie=c.value?"X":"Y",oe=c.value?"right":"bottom",pe=c.value?"width":"height",de=H[ne],fe=Z[ne],ge=de>fe?H[oe]-Z[oe]:H[ne]-Z[ne],we=Math.sign(ge)>0?c.value?"right":"bottom":Math.sign(ge)<0?c.value?"left":"top":"center",Oe=(Math.abs(ge)+(Math.sign(ge)<0?H[pe]:Z[pe]))/Math.max(H[pe],Z[pe]),ke=H[pe]/Z[pe],Ee=1.5;Sp(q,{backgroundColor:[U,""],transform:[`translate${ie}(${ge}px) scale${ie}(${ke})`,`translate${ie}(${ge/Ee}px) scale${ie}(${(Oe-1)/Ee+1})`,""],transformOrigin:Array(3).fill(we)},{duration:225,easing:Gv})}}return Pi(()=>{const[S]=ko.filterProps(t);return w(ko,Mi({_as:"VTab",symbol:Z$,ref:p,class:["v-tab"],tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1,block:t.fixed,maxWidth:t.fixed?300:void 0,rounded:0},S,n,{"onGroup:selected":b}),{default:()=>[i.default?i.default():t.title,!t.hideSlider&&w("div",{ref:_,class:["v-tab__slider",r.value],style:a.value},null)]})}),{}}});function fme(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const pme=yi()({name:"VTabs",props:{alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...q$({mandatory:"force"}),...Yo(),...Zn()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),r=Me(()=>fme(t.items)),{densityClasses:a}=hl(t),{backgroundColorClasses:c,backgroundColorStyles:s}=ho(li(t,"bgColor"));return co({VTab:{color:li(t,"color"),direction:li(t,"direction"),stacked:li(t,"stacked"),fixed:li(t,"fixedTabs"),sliderColor:li(t,"sliderColor"),hideSlider:li(t,"hideSlider")}}),Pi(()=>{const[p]=NS.filterProps(t);return w(NS,Mi(p,{modelValue:n.value,"onUpdate:modelValue":_=>n.value=_,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},a.value,c.value],style:[{"--v-tabs-height":Xi(t.height)},s.value],role:"tablist",symbol:Z$}),{default:()=>[i.default?i.default():r.value.map(_=>w(Y$,Mi(_,{key:_.title}),null))]})}),{}}});const mme=yi()({name:"VTextarea",directives:{Intersect:Oy},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,modelModifiers:Object,...Hh(),...Px()},emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:i,emit:n,slots:r}=e;const a=Pn(t,"modelValue"),{isFocused:c,focus:s,blur:p}=nm(t),_=Me(()=>typeof t.counterValue=="function"?t.counterValue(a.value):(a.value||"").toString().length),b=Me(()=>{if(i.maxlength)return i.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function S(ge,we){var Ie,Oe;!t.autofocus||!ge||(Oe=(Ie=we[0].target)==null?void 0:Ie.focus)==null||Oe.call(Ie)}const E=lt(),I=lt(),R=lt(""),V=lt(),q=Me(()=>c.value||t.persistentPlaceholder),U=Me(()=>t.messages.length?t.messages:c.value||t.persistentHint?t.hint:"");function H(){var ge;V.value!==document.activeElement&&((ge=V.value)==null||ge.focus()),c.value||s()}function Z(ge){H(),n("click:control",ge)}function ne(ge){n("mousedown:control",ge)}function ie(ge){ge.stopPropagation(),H(),Cn(()=>{a.value="",j1(t["onClick:clear"],ge)})}function oe(ge){var Ie;const we=ge.target;if(a.value=we.value,(Ie=t.modelModifiers)!=null&&Ie.trim){const Oe=[we.selectionStart,we.selectionEnd];Cn(()=>{we.selectionStart=Oe[0],we.selectionEnd=Oe[1]})}}const pe=lt();function de(){t.autoGrow&&Cn(()=>{if(!pe.value||!I.value)return;const ge=getComputedStyle(pe.value),we=getComputedStyle(I.value.$el),Ie=parseFloat(ge.getPropertyValue("--v-field-padding-top"))+parseFloat(ge.getPropertyValue("--v-input-padding-top"))+parseFloat(ge.getPropertyValue("--v-field-padding-bottom")),Oe=pe.value.scrollHeight,ke=parseFloat(ge.lineHeight),Ee=Math.max(parseFloat(t.rows)*ke+Ie,parseFloat(we.getPropertyValue("--v-input-control-height"))),Qe=parseFloat(t.maxRows)*ke+Ie||1/0;R.value=Xi(Yu(Oe??0,Ee,Qe))})}Fn(de),Fi(a,de),Fi(()=>t.rows,de),Fi(()=>t.maxRows,de),Fi(()=>t.density,de);let fe;return Fi(pe,ge=>{ge?(fe=new ResizeObserver(de),fe.observe(pe.value)):fe==null||fe.disconnect()}),as(()=>{fe==null||fe.disconnect()}),Pi(()=>{const ge=!!(r.counter||t.counter||t.counterValue),we=!!(ge||r.details),[Ie,Oe]=Qp(i),[{modelValue:ke,...Ee}]=Gf(t),[Qe]=Bk(t);return w(Jd,Mi({ref:E,modelValue:a.value,"onUpdate:modelValue":gt=>a.value=gt,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)}],"onClick:prepend":t["onClick:prepend"],"onClick:append":t["onClick:append"]},Ie,Ee,{focused:c.value,messages:U.value}),{...r,default:gt=>{let{isDisabled:nt,isDirty:ft,isReadonly:Tt,isValid:pt}=gt;return w(My,Mi({ref:I,style:{"--v-textarea-control-height":R.value},onClick:Z,onMousedown:ne,"onClick:clear":ie,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:"textbox"},Qe,{active:q.value||ft.value,dirty:ft.value||t.dirty,disabled:nt.value,focused:c.value,error:pt.value===!1}),{...r,default:et=>{let{props:{class:Mt,...Qt}}=et;return w(Oi,null,[t.prefix&&w("span",{class:"v-text-field__prefix"},[t.prefix]),Br(w("textarea",Mi({ref:V,class:Mt,value:a.value,onInput:oe,autofocus:t.autofocus,readonly:Tt.value,disabled:nt.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:H,onBlur:p},Qt,Oe),null),[[Ba("intersect"),{handler:S},null,{once:!0}]]),t.autoGrow&&Br(w("textarea",{class:[Mt,"v-textarea__sizer"],"onUpdate:modelValue":Fe=>a.value=Fe,ref:pe,readonly:!0,"aria-hidden":"true"},null),[[Up,a.value]]),t.suffix&&w("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:we?gt=>{var nt;return w(Oi,null,[(nt=r.details)==null?void 0:nt.call(r,gt),ge&&w(Oi,null,[w("span",null,null),w(Mx,{active:t.persistentCounter||c.value,value:_.value,max:b.value},r.counter)])])}:void 0})}),dd({},E,I,V)}});const gme=yi()({name:"VThemeProvider",props:{withBackground:Boolean,...vr(),...Zn()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t);return()=>{var r;return t.withBackground?w(t.tag,{class:["v-theme-provider",n.value]},{default:()=>{var a;return[(a=i.default)==null?void 0:a.call(i)]}}):(r=i.default)==null?void 0:r.call(i)}}});const _me=yi()({name:"VTimeline",props:{align:{type:String,default:"center",validator:t=>["center","start"].includes(t)},direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},justify:{type:String,default:"auto",validator:t=>["auto","center"].includes(t)},side:{type:String,validator:t=>t==null||["start","end"].includes(t)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:t=>["start","end","both"].includes(t)},...Yo(),...Zn(),...vr()},setup(t,e){let{slots:i}=e;const{themeClasses:n}=Vr(t),{densityClasses:r}=hl(t);co({VTimelineDivider:{lineColor:li(t,"lineColor")},VTimelineItem:{density:li(t,"density"),lineInset:li(t,"lineInset")}});const a=Me(()=>{const s=t.side?t.side:t.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),c=Me(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(t.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return Pi(()=>w(t.tag,{class:["v-timeline",`v-timeline--${t.direction}`,`v-timeline--align-${t.align}`,`v-timeline--justify-${t.justify}`,c.value,{"v-timeline--inset-line":!!t.lineInset},n.value,r.value,a.value],style:{"--v-timeline-line-thickness":Xi(t.lineThickness)}},i)),{}}}),vme=yi()({name:"VTimelineDivider",props:{dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:On,iconColor:String,lineColor:String,...zs(),...Uh(),...Xo()},setup(t,e){let{slots:i}=e;const{sizeClasses:n,sizeStyles:r}=Qg(t,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:c}=ho(li(t,"dotColor")),{roundedClasses:s}=fo(t,"v-timeline-divider__dot"),{elevationClasses:p}=$a(t),{backgroundColorClasses:_,backgroundColorStyles:b}=ho(li(t,"lineColor"));return Pi(()=>w("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":t.fillDot}]},[w("div",{class:["v-timeline-divider__before",_.value],style:b.value},null),!t.hideDot&&w("div",{key:"dot",class:["v-timeline-divider__dot",p.value,s.value,n.value],style:r.value},[w("div",{class:["v-timeline-divider__inner-dot",c.value,s.value],style:a.value},[i.default?w(es,{key:"icon-defaults",disabled:!t.icon,defaults:{VIcon:{color:t.iconColor,icon:t.icon,size:t.size}}},i.default):w(lo,{key:"icon",color:t.iconColor,icon:t.icon,size:t.size},null)])]),w("div",{class:["v-timeline-divider__after",_.value],style:b.value},null)])),{}}}),yme=yi()({name:"VTimelineItem",props:{density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:On,iconColor:String,lineInset:[Number,String],...zs(),...Xo(),...Uh(),...Zn(),...ud()},setup(t,e){let{slots:i}=e;const{dimensionStyles:n}=cd(t),r=lt(0),a=lt();return Fi(a,c=>{var s;c&&(r.value=((s=c.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:s.getBoundingClientRect().width)??0)},{flush:"post"}),Pi(()=>{var c,s;return w("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":t.fillDot}],style:{"--v-timeline-dot-size":Xi(r.value),"--v-timeline-line-inset":t.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Xi(t.lineInset)})`:Xi(0)}},[w("div",{class:"v-timeline-item__body",style:n.value},[(c=i.default)==null?void 0:c.call(i)]),w(vme,{ref:a,hideDot:t.hideDot,icon:t.icon,iconColor:t.iconColor,size:t.size,elevation:t.elevation,dotColor:t.dotColor,fillDot:t.fillDot,rounded:t.rounded},{default:i.icon}),t.density!=="compact"&&w("div",{class:"v-timeline-item__opposite"},[!t.hideOpposite&&((s=i.opposite)==null?void 0:s.call(i))])])}),{}}});const bme=yi()({name:"VTooltip",props:{id:String,text:String,...Qd(Ry({closeOnBack:!1,location:"end",locationStrategy:"connected",minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent","eager"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=Pn(t,"modelValue"),{scopeId:r}=Dy(),a=cl(),c=Me(()=>t.id||`v-tooltip-${a}`),s=lt(),p=Me(()=>t.location.split(" ").length>1?t.location:t.location+" center"),_=Me(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),b=Me(()=>t.transition?t.transition:n.value?"scale-transition":"fade-transition"),S=Me(()=>Mi({"aria-describedby":c.value},t.activatorProps));return Pi(()=>{const[E]=Bh.filterProps(t);return w(Bh,Mi({ref:s,class:["v-tooltip"],id:c.value},E,{modelValue:n.value,"onUpdate:modelValue":I=>n.value=I,transition:b.value,absolute:!0,location:p.value,origin:_.value,persistent:!0,role:"tooltip",eager:!0,activatorProps:S.value,_disableGlobalStack:!0},r),{activator:i.activator,default:function(){var q;for(var I=arguments.length,R=new Array(I),V=0;V<I;V++)R[V]=arguments[V];return((q=i.default)==null?void 0:q.call(i,...R))??t.text}})}),dd({},s)}}),xme=yi()({name:"VValidation",props:{...ZB()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:i}=e;const n=YB(t,"validation");return()=>{var r;return(r=i.default)==null?void 0:r.call(i,n)}}}),wme=Object.freeze(Object.defineProperty({__proto__:null,VAlert:vfe,VAlertTitle:d$,VApp:dfe,VAppBar:ffe,VAppBarNavIcon:pfe,VAppBarTitle:gfe,VAutocomplete:bfe,VAvatar:Rf,VBadge:xfe,VBanner:wfe,VBannerActions:h$,VBannerText:f$,VBottomNavigation:Tfe,VBreadcrumbs:Sfe,VBreadcrumbsDivider:p$,VBreadcrumbsItem:m$,VBtn:ko,VBtnGroup:aS,VBtnToggle:WX,VCard:Cfe,VCardActions:g$,VCardItem:y$,VCardSubtitle:_$,VCardText:b$,VCardTitle:v$,VCarousel:Lfe,VCarouselItem:Dfe,VCheckbox:yK,VCheckboxBtn:Dh,VChip:Ly,VChipGroup:wK,VClassIcon:wC,VCode:Rfe,VCol:Ipe,VColorPicker:mpe,VCombobox:_pe,VComponentIcon:M2,VContainer:Cpe,VCounter:Mx,VDefaultsProvider:es,VDialog:vpe,VDialogBottomTransition:rK,VDialogTopTransition:sK,VDialogTransition:kx,VDivider:i8,VExpandTransition:Ex,VExpandXTransition:Rk,VExpansionPanel:xpe,VExpansionPanelText:D$,VExpansionPanelTitle:L$,VExpansionPanels:bpe,VFabTransition:nK,VFadeTransition:cS,VField:My,VFieldLabel:_v,VFileInput:wpe,VFooter:Tpe,VForm:Spe,VHover:Bpe,VIcon:lo,VImg:i_,VInput:Jd,VItem:$pe,VItemGroup:Fpe,VKbd:Npe,VLabel:t_,VLayout:zpe,VLayoutItem:Vpe,VLazy:Upe,VLigatureIcon:pj,VList:Rx,VListGroup:hS,VListImg:BK,VListItem:Rh,VListItemAction:FK,VListItemMedia:$K,VListItemSubtitle:u8,VListItemTitle:c8,VListSubheader:d8,VLocaleProvider:jpe,VMain:Hpe,VMenu:Fx,VMessages:WB,VNavigationDrawer:Qpe,VNoSsr:Jpe,VOverlay:Bh,VPagination:tme,VParallax:nme,VProgressCircular:Ok,VProgressLinear:Lk,VRadio:rme,VRadioGroup:sme,VRangeSlider:ome,VRating:ame,VResponsive:e8,VRow:Dpe,VScaleTransition:HB,VScrollXReverseTransition:aK,VScrollXTransition:oK,VScrollYReverseTransition:uK,VScrollYTransition:lK,VSelect:T8,VSelectionControl:Ag,VSelectionControlGroup:QB,VSheet:LS,VSlideGroup:NS,VSlideGroupItem:ume,VSlideXReverseTransition:dK,VSlideXTransition:cK,VSlideYReverseTransition:hK,VSlideYTransition:Dk,VSlider:$S,VSnackbar:cme,VSpacer:Rpe,VSvgIcon:p4,VSwitch:dme,VSystemBar:hme,VTab:Y$,VTable:Ik,VTabs:pme,VTextField:Wp,VTextarea:mme,VThemeProvider:gme,VTimeline:_me,VTimelineItem:yme,VToolbar:OS,VToolbarItems:mfe,VToolbarTitle:ME,VTooltip:bme,VValidation:xme,VWindow:S$,VWindowItem:C$},Symbol.toStringTag,{value:"Module"}));function Tme(t,e){const i=e.modifiers||{},n=e.value,{once:r,immediate:a,...c}=i,s=!Object.keys(c).length,{handler:p,options:_}=typeof n=="object"?n:{handler:n,options:{attributes:(c==null?void 0:c.attr)??s,characterData:(c==null?void 0:c.char)??s,childList:(c==null?void 0:c.child)??s,subtree:(c==null?void 0:c.sub)??s}},b=new MutationObserver(function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1?arguments[1]:void 0;p==null||p(S,E),r&&X$(t,e)});a&&(p==null||p([],b)),t._mutate=Object(t._mutate),t._mutate[e.instance.$.uid]={observer:b},b.observe(t,_)}function X$(t,e){var i;(i=t._mutate)!=null&&i[e.instance.$.uid]&&(t._mutate[e.instance.$.uid].observer.disconnect(),delete t._mutate[e.instance.$.uid])}const Sme={mounted:Tme,unmounted:X$};function Cme(t,e){var r,a;const i=e.value,n={passive:!((r=e.modifiers)!=null&&r.active)};window.addEventListener("resize",i,n),t._onResize=Object(t._onResize),t._onResize[e.instance.$.uid]={handler:i,options:n},(a=e.modifiers)!=null&&a.quiet||i()}function kme(t,e){var r;if(!((r=t._onResize)!=null&&r[e.instance.$.uid]))return;const{handler:i,options:n}=t._onResize[e.instance.$.uid];window.removeEventListener("resize",i,n),delete t._onResize[e.instance.$.uid]}const Eme={mounted:Cme,unmounted:kme};function K$(t,e){const{self:i=!1}=e.modifiers??{},n=e.value,r=typeof n=="object"&&n.options||{passive:!0},a=typeof n=="function"||"handleEvent"in n?n:n.handler,c=i?t:e.arg?document.querySelector(e.arg):window;c&&(c.addEventListener("scroll",a,r),t._onScroll=Object(t._onScroll),t._onScroll[e.instance.$.uid]={handler:a,options:r,target:i?void 0:c})}function Q$(t,e){var a;if(!((a=t._onScroll)!=null&&a[e.instance.$.uid]))return;const{handler:i,options:n,target:r=t}=t._onScroll[e.instance.$.uid];r.removeEventListener("scroll",i,n),delete t._onScroll[e.instance.$.uid]}function Ime(t,e){e.value!==e.oldValue&&(Q$(t,e),K$(t,e))}const Pme={mounted:K$,unmounted:Q$,updated:Ime},Ame=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:w8,Intersect:Oy,Mutate:Sme,Resize:Eme,Ripple:Uf,Scroll:Pme,Touch:OE},Symbol.toStringTag,{value:"Module"})),ic=GD(DJ),Mme=w4({components:{...wme,VDataTableServer:mQ},directives:Ame});ic.config.globalProperties.baseurl="https://appcore.dlivrd.io/";ic.config.globalProperties.baseImageurl="https://dlivrdbucketdriver.s3.us-east-2.amazonaws.com/";ic.config.globalProperties.basesecurityAccess={withCredentials:!1};ic.config.globalProperties.userProfileImage="../src/assets/user.jpg";ic.use(Mme);ic.use(zX);ic.use(OU());ic.use(cfe);ic.component("VGallery",PQ);ic.component("vue-phone-number-input",PB);ic.component(XM.name,XM);ic.use(VueMapbox,{mapboxgl:_S});ic.mount("#app");
